import{c as e}from"./artist-b7807719.js";import{_ as a,S as u,r,j as t,z as s,M as l,N as o,Q as i,U as m,a6 as p}from"./index-6137d952.js";import{C as n}from"./CoverLists-9ffbc3d4.js";import{P as v}from"./index-3e7b80bc.js";import"./album-9073c661.js";import"./formRules-8f71b7bd.js";import"./FormItem-6e5a0af4.js";import"./Select-3d3bcb8f.js";import"./getCoverUrl-e2404558.js";import"./Tooltip-8e4143df.js";import"./PlayOne-8b2c271b.js";import"./LinkTwo-053d5333.js";import"./Unlike-3687ca6d.js";import"./Grid-c63c69ed.js";import"./Skeleton-a194b938.js";import"./use-houdini-b4e30d74.js";const j={class:"albums"},b=a({__name:"albums",setup(a){const b=u(),c=r(b.currentRoute.value.query.id),d=r([]),g=r(30),f=r(b.currentRoute.value.query.page?Number(b.currentRoute.value.query.page):1),h=r(0),y=(a,u=30,r=0)=>{e(a,u,r).then((e=>{h.value=e.artist.albumSize,d.value=[],e.hotAlbums?e.hotAlbums.forEach((e=>{d.value.push({id:e.id,cover:e.picUrl,name:e.name,artist:e.artists,time:p(e.publishTime)})})):$message.error("搜索内容为空"),"undefined"!=typeof $scrollToTop&&$scrollToTop()}))},T=e=>{b.push({path:"/artist/albums",query:{id:c.value,page:e}})},q=e=>{g.value=e,y(c.value,e,(f.value-1)*g.value)};return t((()=>{y(c.value,g.value,(f.value-1)*g.value)})),s((()=>b.currentRoute.value),(e=>{c.value=e.query.id,f.value=Number(e.query.page?e.query.page:1),"ar-albums"==e.name&&y(c.value,g.value,(f.value-1)*g.value)})),(e,a)=>(l(),o("div",j,[i(n,{listData:m(d),listType:"album"},null,8,["listData"]),i(v,{totalCount:m(h),pageNumber:m(f),onPageSizeChange:q,onPageNumberChange:T},null,8,["totalCount","pageNumber"])]))}},[["__scopeId","data-v-66ff9219"]]);export{b as default};
