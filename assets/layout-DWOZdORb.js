import{d as a,as as e,u as s,r as t,f as l,o as i,co as o,H as r,k as n,j as c,af as d,m as u,am as m,ac as v,cO as p,cC as f,au as y,h as g,I as _,cP as h,ad as k,a1 as b,a2 as w,i as q,ae as x,cQ as C,cq as S,cp as R,bJ as j,ai as L,aj as z,a8 as A,ar as T,cm as $,b9 as D,aa as F,c6 as I,ak as K,cG as N,K as P}from"./stores-Jq5HPlpq.js";import{u as U,o as V}from"./index-CrsIAaLK.js";const B=""+new URL("../images/artist.jpg?assest",import.meta.url).href,E={key:0,class:"detail"},G={class:"cover"},H={class:"data"},J={class:"name text-hidden"},M={key:1,class:"detail"},O={class:"data"},Q=P(a({__name:"layout",setup(a){const P=U(),Q=e(),W=s(),X=t(null),Y=l((()=>Number(P.currentRoute.value.query.id))),Z=t(P.currentRoute.value?.name||"artist-songs"),aa=t(null),ea=t(!1),sa=l((()=>[{label:"打开源页面",key:"open",props:{onClick:()=>{window.open(`https://music.163.com/#/artist?id=${Y.value}`)}},icon:j("Link")}])),ta=l((()=>Q.userLikeData.artists.some((a=>a.id===Y.value)))),la=async a=>{try{if(!a)return;ea.value=!1,aa.value=null;const e=await p(a);aa.value=f(e.data.artist)[0],aa.value.identify=e.data.identify?.imageDesc}catch(e){console.error("Erorr getting artist detail:",e),window.$message.error("获取歌手详情失败")}},ia=a=>{P.push({name:a,query:{id:Y.value}})},oa=async()=>{await P.push({name:"artist-songs",query:{id:Y.value}}),X.value&&X.value.playAllSongs()},ra=a=>{const e=a.target.scrollTop;ea.value=e>10};return V((a=>{if(ea.value=!1,"artist"!==a.matched[0].name)return;Z.value=a.name;const e=Number(a.query.id);e&&e!==Y.value&&la(e)})),i((()=>la(Y.value))),(a,e)=>{const s=L,t=z,l=A,i=T,p=$,f=D,j=F,U=I,V=K,Q=N,la=y,na=o("RouterView");return g(),r("div",{key:u(Y),class:v(["artist",{small:u(ea)}])},[n(d,{name:"fade",mode:"out-in"},{default:c((()=>[u(aa)?(g(),r("div",E,[_("div",G,[n(s,{src:u(aa).coverSize?.m||u(aa).cover,"previewed-img-props":{style:{borderRadius:"8px"}},"preview-src":u(aa).cover,renderToolbar:u(h),"show-toolbar-tooltip":"",class:"cover-img",onLoad:u(k)},{placeholder:c((()=>e[5]||(e[5]=[_("div",{class:"cover-loading"},[_("img",{src:B,class:"loading-img",alt:"loading-img"})],-1)]))),_:1},8,["src","preview-src","renderToolbar","onLoad"]),n(s,{class:"cover-shadow","preview-disabled":"",src:u(aa).coverSize?.m||u(aa).cover},null,8,["src"])]),_("div",H,[_("div",J,[n(t,{class:"name-text"},{default:c((()=>[b(w(u(aa).name||"未知艺术家"),1)])),_:1}),u(aa)?.alia?(g(),q(t,{key:0,class:"name-alias",depth:"3"},{default:c((()=>[b(w(u(aa).alia||"未知艺术家"),1)])),_:1})):x("",!0)]),n(f,{show:!u(ea),class:"collapse"},{default:c((()=>[u(aa)?.identify?(g(),q(t,{key:0,depth:3,class:"identify text-hidden"},{default:c((()=>[b(w(u(aa).identify),1)])),_:1})):x("",!0),n(i,{class:"meta"},{default:c((()=>[_("div",{class:"item",onClick:e[0]||(e[0]=a=>u(P).push({name:"artist-songs",query:{id:u(Y)}}))},[n(l,{name:"Music",depth:3}),n(t,null,{default:c((()=>[b(w(u(aa).musicSize||0),1)])),_:1})]),_("div",{class:"item",onClick:e[1]||(e[1]=a=>u(P).push({name:"artist-albums",query:{id:u(Y)}}))},[n(l,{name:"Album",depth:3}),n(t,null,{default:c((()=>[b(w(u(aa).albumSize||0),1)])),_:1})]),_("div",{class:"item",onClick:e[2]||(e[2]=a=>u(P).push({name:"artist-videos",query:{id:u(Y)}}))},[n(l,{name:"Video",depth:3}),n(t,null,{default:c((()=>[b(w(u(aa).mvSize||0),1)])),_:1})])])),_:1}),u(aa).description?(g(),q(p,{key:1,"line-clamp":1,tooltip:{trigger:"click",placement:"bottom",width:"trigger"}},{default:c((()=>[b(w(u(aa).description),1)])),_:1})):x("",!0)])),_:1},8,["show"]),n(i,{class:"menu",justify:"space-between"},{default:c((()=>[n(i,{class:"left",align:"flex-end"},{default:c((()=>[n(j,{focusable:!1,type:"primary",strong:"",secondary:"",round:"",onClick:oa},{icon:c((()=>[n(l,{name:"Play"})])),default:c((()=>[e[6]||(e[6]=b(" 播放 "))])),_:1}),n(j,{focusable:!1,strong:"",secondary:"",round:"",onClick:e[3]||(e[3]=a=>u(C)(u(Y),!u(ta)))},{icon:c((()=>[n(l,{name:u(ta)?"Favorite":"FavoriteBorder"},null,8,["name"])])),default:c((()=>[b(" "+w(u(ta)?"取消关注":"关注歌手"),1)])),_:1}),n(U,{options:u(sa),trigger:"click",placement:"bottom-start"},{default:c((()=>[n(j,{focusable:!1,class:"more",circle:"",strong:"",secondary:""},{icon:c((()=>[n(l,{name:"List"})])),_:1})])),_:1},8,["options"])])),_:1})])),_:1})])])):(g(),r("div",M,[n(V,{class:"cover"}),_("div",O,[n(V,{repeat:4,text:""})])]))])),_:1}),n(la,{value:u(Z),"onUpdate:value":[e[4]||(e[4]=a=>m(Z)?Z.value=a:null),ia],class:"tabs",type:"segment"},{default:c((()=>[n(Q,{name:"artist-songs"},{default:c((()=>e[7]||(e[7]=[b(" 单曲 ")]))),_:1}),n(Q,{name:"artist-albums"},{default:c((()=>e[8]||(e[8]=[b(" 专辑 ")]))),_:1}),n(Q,{name:"artist-videos"},{default:c((()=>e[9]||(e[9]=[b(" 视频 ")]))),_:1})])),_:1},8,["value"]),n(na,null,{default:c((({Component:a})=>[n(d,{name:`router-${u(W).routeAnimation}`,mode:"out-in"},{default:c((()=>[u(W).useKeepAlive?(g(),q(R,{key:0},[(g(),q(S(a),{ref_key:"componentRef",ref:X,id:u(Y),class:"router-view",onScroll:ra},null,40,["id"]))],1024)):(g(),q(S(a),{key:1,ref_key:"componentRef",ref:X,id:u(Y),class:"router-view",onScroll:ra},null,40,["id"]))])),_:2},1032,["name"])])),_:1})],2)}}}),[["__scopeId","data-v-d894489c"]]);export{Q as default};
