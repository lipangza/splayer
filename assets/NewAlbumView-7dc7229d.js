import{b as e}from"./album-03f4a364.js";import{_ as a,R as l,S as r,r as t,z as u,j as s,M as o,N as n,O as i,a2 as m,Q as p,Y as v,U as c,W as b,X as y,a6 as g,aA as d,Z as j,$ as f,a1 as h,aC as q}from"./index-62a86a6d.js";import{C as w}from"./CoverLists-8120940c.js";import{P as C}from"./index-c617a262.js";import"./formRules-8f71b7bd.js";import"./FormItem-9925873e.js";import"./Select-874bd504.js";import"./getCoverUrl-483cfc93.js";import"./Tooltip-05e90936.js";import"./PlayOne-08324da2.js";import"./LinkTwo-de3400c3.js";import"./Unlike-8f9bbc24.js";import"./Grid-b6f95812.js";import"./Skeleton-341b61e6.js";import"./use-houdini-3b9e128b.js";const T={class:"new-album"},k={class:"title"},R={class:"key"},A=a({__name:"NewAlbumView",setup(a){const{t:A}=l(),L=r(),N=t([]),_=t(0),P=t(30),S=t(L.currentRoute.value.query.page?Number(L.currentRoute.value.query.page):1),$=t(L.currentRoute.value.query.area?L.currentRoute.value.query.area:"ALL"),U=[{label:A("general.type.all"),value:"ALL"},{label:A("general.type.china"),value:"ZH"},{label:A("general.type.western"),value:"EA"},{label:A("general.type.japan"),value:"JP"},{label:A("general.type.korea"),value:"KR"}],x=(a,l=30,r=0)=>{e(a,l,r).then((e=>{_.value=e.total,N.value=[],e.albums?e.albums.forEach((e=>{N.value.push({id:e.id,cover:e.picUrl,name:e.name,artist:e.artists,time:g(e.publishTime)})})):$message.error(A("general.message.acquisitionFailed")),"undefined"!=typeof $scrollToTop&&$scrollToTop()}))};u((()=>L.currentRoute.value),(e=>{$.value=e.query.area?e.query.area:"ALL",S.value=Number(e.query.page?e.query.page:1),"new-album"==e.name&&x($.value,P.value,(S.value-1)*P.value)}));const E=e=>{P.value=e,x($.value,e,(S.value-1)*P.value)},F=e=>{L.push({path:"/new-album",query:{area:$.value,page:e}})};return s((()=>{$setSiteTitle(A("home.title.newAlbum")),x($.value,P.value,(S.value-1)*P.value)})),(e,a)=>{const l=q,r=d;return o(),n("div",T,[i("div",k,[i("span",R,m(e.$t("home.title.newAlbum")),1)]),p(r,{class:"category"},{default:v((()=>[(o(),n(j,null,f(U,(e=>p(l,{class:"tag",round:"",key:e,bordered:!1,type:e.value==c($)?"primary":"default",onClick:a=>{return l=e.value,void L.push({path:"/new-album",query:{area:l,page:1}});var l}},{default:v((()=>[h(m(e.label),1)])),_:2},1032,["type","onClick"]))),64))])),_:1}),p(w,{listData:c(N),listType:"album"},null,8,["listData"]),c(N)[0]?(o(),b(C,{key:0,pageNumber:c(S),totalCount:c(_),onPageSizeChange:E,onPageNumberChange:F},null,8,["pageNumber","totalCount"])):y("",!0)])}}},[["__scopeId","data-v-f2fcd008"]]);export{A as default};
