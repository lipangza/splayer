import{d as a,aO as e,b as s,f as t,Z as l,o as i,bM as n,i as o,j as r,aC as d,m as c,n as m,ag as u,k as p,ah as y,J as g,ae as _,H as f,af as v,ai as h,a7 as b,a8 as k,a5 as M,aA as F,aB as S,aS as w,ar as x,bN as C,a6 as z,bC as j,K as E,as as R,y as A,r as L,X as P,T as D,aV as H,c9 as O,aK as I,cw as T,a9 as B,cx as K,cy as N,cz as V,cA as G,cB as J,cC as X,cD as Z,aH as $,u as q,cE as Q}from"./stores-fvLrIm8G.js";import{_ as U}from"./CoverList-CGbqqvd5.js";import{_ as W}from"./ArtistList-DRvsCxLi.js";import{p as Y,_ as aa,u as ea}from"./index-CugtlCeX.js";import{_ as sa}from"./SongListCard-ComNNw_n.js";import{a as ta}from"./video-BhcaJg-R.js";import"./album-DzRjhu8w.js";const la={key:0,class:"artists text-hidden"},ia={key:1,class:"album text-hidden"},na={class:"menu-icon"},oa={class:"radio"},ra=E(a({__name:"PersonalFM",setup(a){const E=e(),R=s(),A=t(()=>R.personalFmMode&&R.playStatus?"Pause":"Play"),L=()=>{R.personalFmMode?Y.playOrPause():(R.personalFmMode=!0,R.playHeartbeatMode=!1,Y.resetStatus(),Y.initPlayer())},P=l(()=>{R.personalFmMode=!0,R.playHeartbeatMode=!1,Y.nextOrPrev("next")},300);return i(Y.initPersonalFM),(a,e)=>{const s=u,t=h,l=M,i=z,D=x,H=d,O=n("debounce");return r(),o(H,{class:"personal-fm"},{default:c(()=>[m(_,{name:"fade",mode:"out-in"},{default:c(()=>[(r(),o(s,{key:p(E).personalFMSong?.id,src:p(E).personalFMSong?.coverSize?.m,class:"cover","preview-disabled":"",lazy:"",onLoad:p(y)},{placeholder:c(()=>e[1]||(e[1]=[g("div",{class:"cover-loading"},[g("img",{src:aa,class:"loading-img",alt:"loading-img"})],-1)])),_:1},8,["src","onLoad"]))]),_:1}),m(_,{name:"fade",mode:"out-in"},{default:c(()=>[(r(),f("div",{key:p(E).personalFMSong?.id,class:"info"},[m(t,{class:"name text-hidden"},{default:c(()=>[b(k(p(E).personalFMSong?.name||"未知曲目"),1)]),_:1}),Array.isArray(p(E).personalFMSong?.artists)?(r(),f("div",la,[m(l,{name:"Artist",depth:3}),(r(!0),f(F,null,S(p(E).personalFMSong.artists,a=>(r(),o(t,{key:a.id,class:"ar"},{default:c(()=>[b(k(a.name),1)]),_:2},1024))),128))])):v("",!0),p(w)(p(E).personalFMSong.album)?(r(),f("div",ia,[m(l,{name:"Album",depth:3}),m(t,{class:"album-text"},{default:c(()=>[b(k(p(E).personalFMSong.album?.name||"未知专辑"),1)]),_:1})])):v("",!0),m(D,{class:"menu",align:"center"},{default:c(()=>[m(i,{loading:p(R).personalFmMode&&p(R).playLoading,focusable:!1,class:"play",strong:"",secondary:"",circle:"",onClick:j(L,["stop"])},{icon:c(()=>[m(_,{name:"fade",mode:"out-in"},{default:c(()=>[(r(),o(l,{key:p(A),name:p(A),size:32},null,8,["name"]))]),_:1})]),_:1},8,["loading"]),g("div",{class:"menu-icon",onClick:e[0]||(e[0]=j((...a)=>p(P)&&p(P)(...a),["stop"]))},[m(l,{size:"26",name:"SkipNext"})]),C((r(),f("div",na,[m(l,{class:"icon",size:"18",name:"ThumbDown"})])),[[O,()=>p(Y).personalFMTrash(p(E).personalFMSong?.id)]])]),_:1}),g("div",oa,[m(l,{depth:3,name:"Radio"}),m(t,{depth:3},{default:c(()=>e[2]||(e[2]=[b("私人FM")])),_:1,__:[2]})])]))]),_:1})]),_:1})}}}),[["__scopeId","data-v-22c0290f"]]),da={class:"home-online"},ca=E(a({__name:"HomeOnline",setup(a){const s=ea(),l=R(),n=e(),d=t(()=>{const a=(new Date).getDate();return A("div",{class:"date"},[A("div",{class:"date-icon"},[A(M,{name:"Calendar-Empty",size:30,depth:2}),A(h,null,()=>a)]),A(h,{class:"name"},()=>["每日推荐"])])}),u=L({playlist:{name:P()?"专属歌单":"推荐歌单",list:[],type:"playlist",path:"/discover/playlists"},radar:{name:"雷达歌单",list:[],type:"playlist"},artist:{name:"歌手推荐",list:[],type:"artist",path:"/discover/artists"},video:{name:"推荐 MV",list:[],type:"video",cols:"2 600:2 800:3 900:4 1200:5 1400:6"},radio:{name:"推荐播客",list:[],type:"radio"},album:{name:"新碟上架",list:[],type:"album",path:"/discover/new"}}),y=async()=>{try{await T(50);try{const a=await B(K,{key:"playlistRec",time:10},"playlist",P()?21:20);u.value.playlist.list=N(a.result?.filter(a=>!a.name.includes("私人雷达")))}catch(a){console.error("Error getting playlist:",a)}try{const a=await B(V,{key:"radarRec",time:30});u.value.radar.list=N(a)}catch(a){console.error("Error getting radar:",a)}try{const a=await B(G,{key:"artistRec",time:10},6);u.value.artist.list=J(a.artists)}catch(a){console.error("Error getting artist:",a)}try{const a=await B(ta,{key:"videoRec",time:10});u.value.video.list=N(a.data)}catch(a){console.error("Error getting video:",a)}try{const a=await B(X,{key:"radioRec",time:10});u.value.radio.list=N(a.djRadios)}catch(a){console.error("Error getting radio:",a)}try{const a=await B(Z,{key:"albumRec",time:10});u.value.album.list=N(a.albums)}catch(a){console.error("Error getting album:",a)}}catch(a){window.$message.error("个性化推荐获取出错"),console.error("Error getting personalized data:",a)}};return i(()=>{y(),D(y)}),(a,e)=>{const t=sa,i=x,y=O,g=ra,_=H,w=I,C=W,z=U;return r(),f("div",da,[p(P)()?(r(),o(_,{key:0,cols:2,"x-gap":20,class:"main-rec"},{default:c(()=>[m(y,null,{default:c(()=>[m(i,{size:20,class:"rec-list",justify:"space-between",vertical:""},{default:c(()=>[m(t,{data:p(n).dailySongsData.list,title:p(d),height:90,description:"根据你的音乐口味 · 每日更新",size:"small",onClick:e[0]||(e[0]=a=>p(s).push({name:"daily-songs"}))},null,8,["data","title"]),m(t,{data:p(l).likeSongsList.data,height:90,title:"我喜欢的音乐",description:"发现你独特的音乐品味",size:"small",onClick:e[1]||(e[1]=a=>p(s).push({name:"like-songs"}))},null,8,["data"])]),_:1})]),_:1}),m(y,null,{default:c(()=>[m(g)]),_:1})]),_:1})):v("",!0),(r(!0),f(F,null,S(p(u),(a,e)=>(r(),f("div",{key:e,class:"rec-public"},[m(i,{class:"title",align:"center",justify:"space-between",onClick:e=>p(s).push({path:a.path??void 0})},{default:c(()=>[m(w,{prefix:"bar"},{default:c(()=>[m(p(h),null,{default:c(()=>[b(k(a.name),1)]),_:2},1024),a.path?(r(),o(M,{key:0,size:26,name:"Right"})):v("",!0)]),_:2},1024)]),_:2},1032,["onClick"]),"artist"===a.type?(r(),o(C,{key:0,data:a.list,loading:!0},null,8,["data"])):(r(),o(z,{key:1,data:a.list,type:a.type,cols:a.cols,loading:!0},null,8,["data","type","cols"]))]))),128))])}}}),[["__scopeId","data-v-ebe1b84b"]]),ma={class:"home-local"};const ua=E({},[["render",function(a,e){const s=$;return r(),f("div",ma,[m(s,null,{default:c(()=>e[0]||(e[0]=[b("还没开发完呢~")])),_:1,__:[0]})])}]]),pa={class:"home"},ya={class:"welcome"},ga=E(a({__name:"index",setup(a){const e=q(),s=t(Q);return(a,t)=>{const l=$,i=h;return r(),f("div",pa,[g("div",ya,[m(l,null,{default:c(()=>[b(k(p(s)),1)]),_:1}),m(i,{depth:"3"},{default:c(()=>t[0]||(t[0]=[b("由此开启好心情 ~")])),_:1,__:[0]})]),p(e).useOnlineService?(r(),o(ca,{key:0})):(r(),o(ua,{key:1}))])}}}),[["__scopeId","data-v-a19bf054"]]);export{ga as default};
