const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-DhuJL4St.js","./stores-De5JHsxi.js","./stores-BKXLVtws.css","./CoverList-ClOCTyga.js","./album-9FZAS1rf.js","./CoverList-BABJX83Y.css","./ArtistList-D2XE8tb0.js","./ArtistList-CIJGlnf5.css","./SongListCard-BHFfzWYu.js","./SongListCard-DZb6RJ5j.css","./video-CIYgzO13.js","./index-Cjz3FMO4.css","./layout-BXwnruqK.js","./layout-Bv48HNPF.css","./songs-Ct62pufA.js","./SongList-DlSTL_cD.js","./SongList-wAlf_Op8.css","./playlists-T6auUEt9.js","./artists-D2DLSznN.js","./albums-CNrdiKeI.js","./videos-B28fkuvo.js","./radios-B8VmoOxL.js","./layout-BKk2CmkW.js","./layout-BOPHNNbw.css","./playlists-Dxvm9Gq5.js","./playlists-DAq_NWLc.css","./toplists-CftNRZrA.js","./toplists-DkCAW--4.css","./artists-BmYTG8r_.js","./artists-D-V6wLaq.css","./new-BfRpdXuU.js","./new-aSGcOOZV.css","./layout-C9Kq6xlB.js","./layout-BsnwsEgL.css","./songs-DjeJrHWR.js","./albums-DqKz6Est.js","./videos-CyFPbfCZ.js","./Video-CP9Le60l.js","./Video-BvswMWSB.css","./album-g2ZdDyvD.js","./album-Bb5nYrHx.css","./playlist-CVgJnpU8.js","./playlist-CqJONgAY.css","./radio-C4xxn-VT.js","./radio-BvE-BUCl.css","./hot-CS9HGzwm.js","./hot-DEtol2cE.css","./type-B59BXDw8.js","./type-DkRrbagq.css","./liked-DPtdEVy5.js","./liked-Dap1XDV2.css","./Cloud-BEo9e65N.js","./Cloud-C1Mug7nd.css","./DailySongs-DByAlNLQ.js","./DailySongs-DGEtxLSO.css","./layout-yaUZVQUE.js","./layout-E9avbT1s.css","./playlists-Bpr2H9rz.js","./playlists-CL1LP2tK.css","./albums-BMglM_8E.js","./artists-DddcLh5Y.js","./videos-CPORgdqE.js","./radios-C-uPeqFL.js","./layout-PDfyViMd.js","./layout-DwxLj5v3.css","./song-Dy61y4-V.js","./artists-DlQqydYa.js","./artists-FGDUkBee.css","./albums-bSf1WGQd.js","./albums-DnSBDEh3.css","./History-DyKPdRab.js","./History-D9EfF4aW.css","./403-CWIDZH1A.js","./404-AuncBDQs.js","./500-DELy7uMe.js"])))=>i.map(i=>d[i]);
import{c as e,a as t,u as r,d as n,b as i,e as a,r as s,f as o,w as l,g as u,o as c,h as d,i as h,j as f,k as p,l as m,m as y,z as g,n as v,p as _,q as b,_ as w,N as x,s as I,t as T,v as E,x as S,y as A,A as k,B as C,C as P,D as R,E as M,F as L,G as O,H as F,I as D,J as N,K as B,L as U,M as j,O as G,P as z,Q as H,R as V,S as $,T as X,U as q,V as W,W as Y,X as K,Y as Z,Z as Q,$ as J,a0 as ee,a1 as te,a2 as re,a3 as ne,a4 as ie,a5 as ae,a6 as se,a7 as oe,a8 as le,a9 as ue,aa as ce,ab as de,ac as he,ad as fe,ae as pe,af as me,ag as ye,ah as ge,ai as ve,aj as _e,ak as be,al as we,am as xe,an as Ie,ao as Te,ap as Ee,aq as Se,ar as Ae,as as ke,at as Ce,au as Pe,av as Re,aw as Me,ax as Le,ay as Oe,az as Fe,aA as De,aB as Ne,aC as Be,aD as Ue,aE as je,aF as Ge,aG as ze,aH as He,aI as Ve,aJ as $e,aK as Xe,aL as qe,aM as We,aN as Ye,aO as Ke,aP as Ze,aQ as Qe,aR as Je,aS as et,aT as tt,aU as rt,aV as nt,aW as it,aX as at,aY as st,aZ as ot,a_ as lt,a$ as ut,b0 as ct,b1 as dt,b2 as ht,b3 as ft,b4 as pt,b5 as mt,b6 as yt,b7 as gt,b8 as vt,b9 as _t,ba as bt,bb as wt,bc as xt,bd as It,be as Tt,bf as Et,bg as St,bh as At,bi as kt,bj as Ct,bk as Pt,bl as Rt,bm as Mt,bn as Lt,bo as Ot,bp as Ft,bq as Dt,br as Nt,bs as Bt,bt as Ut,bu as jt,bv as Gt,bw as zt,bx as Ht,by as Vt,bz as $t,bA as Xt,bB as qt,bC as Wt,bD as Yt,bE as Kt,bF as Zt,bG as Qt,bH as Jt,bI as er,bJ as tr,bK as rr,bL as nr,bM as ir,bN as ar,bO as sr,bP as or,bQ as lr,bR as ur,bS as cr,bT as dr,bU as hr,bV as fr,bW as pr,bX as mr,bY as yr,bZ as gr,b_ as vr,b$ as _r,c0 as br,c1 as wr,c2 as xr,c3 as Ir,c4 as Tr,c5 as Er,c6 as Sr,c7 as Ar,c8 as kr,c9 as Cr,ca as Pr,cb as Rr,cc as Mr,cd as Lr,ce as Or,cf as Fr,cg as Dr,ch as Nr,ci as Br,cj as Ur,ck as jr,cl as Gr,cm as zr,cn as Hr,co as Vr,cp as $r,cq as Xr,cr as qr,cs as Wr,ct as Yr,cu as Kr,cv as Zr,cw as Qr}from"./stores-De5JHsxi.js";
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(e){return e<0?-1:0===e?0:1}function en(e,t,r){return(1-r)*e+r*t}function tn(e,t,r){return r<e?e:r>t?t:r}function rn(e){return(e%=360)<0&&(e+=360),e}function nn(e){return(e%=360)<0&&(e+=360),e}function an(e,t){return 180-Math.abs(Math.abs(e-t)-180)}function sn(e,t){return[e[0]*t[0][0]+e[1]*t[0][1]+e[2]*t[0][2],e[0]*t[1][0]+e[1]*t[1][1]+e[2]*t[1][2],e[0]*t[2][0]+e[1]*t[2][1]+e[2]*t[2][2]]}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on=[[.41233895,.35762064,.18051042],[.2126,.7152,.0722],[.01932141,.11916382,.95034478]],ln=[[3.2413774792388685,-1.5376652402851851,-.49885366846268053],[-.9691452513005321,1.8758853451067872,.04156585616912061],[.05562093689691305,-.20395524564742123,1.0571799111220335]],un=[95.047,100,108.883];function cn(e,t,r){return(255<<24|(255&e)<<16|(255&t)<<8|255&r)>>>0}function dn(e){return cn(bn(e[0]),bn(e[1]),bn(e[2]))}function hn(e){return e>>16&255}function fn(e){return e>>8&255}function pn(e){return 255&e}function mn(e,t,r){const n=ln,i=n[0][0]*e+n[0][1]*t+n[0][2]*r,a=n[1][0]*e+n[1][1]*t+n[1][2]*r,s=n[2][0]*e+n[2][1]*t+n[2][2]*r;return cn(bn(i),bn(a),bn(s))}function yn(e){const t=function(e){return sn([_n(hn(e)),_n(fn(e)),_n(pn(e))],on)}(e)[1];return 116*wn(t/100)-16}function gn(e){return 100*xn((e+16)/116)}function vn(e){return 116*wn(e/100)-16}function _n(e){const t=e/255;return t<=.040449936?t/12.92*100:100*Math.pow((t+.055)/1.055,2.4)}function bn(e){const t=e/100;let r=0;return r=t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,n=0,i=255,(a=Math.round(255*r))<n?n:a>i?i:a;var n,i,a}function wn(e){const t=24389/27;return e>216/24389?Math.pow(e,1/3):(t*e+16)/116}function xn(e){const t=e*e*e;return t>216/24389?t:(116*e-16)/(24389/27)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let In=class e{static make(t=function(){return un}(),r=200/Math.PI*gn(50)/100,n=50,i=2,a=!1){const s=t,o=.401288*s[0]+.650173*s[1]+-.051461*s[2],l=-.250268*s[0]+1.204414*s[1]+.045854*s[2],u=-.002079*s[0]+.048952*s[1]+.953127*s[2],c=.8+i/10,d=c>=.9?en(.59,.69,10*(c-.9)):en(.525,.59,10*(c-.8));let h=a?1:c*(1-1/3.6*Math.exp((-r-42)/92));h=h>1?1:h<0?0:h;const f=c,p=[h*(100/o)+1-h,h*(100/l)+1-h,h*(100/u)+1-h],m=1/(5*r+1),y=m*m*m*m,g=1-y,v=y*r+.1*g*g*Math.cbrt(5*r),_=gn(n)/t[1],b=1.48+Math.sqrt(_),w=.725/Math.pow(_,.2),x=w,I=[Math.pow(v*p[0]*o/100,.42),Math.pow(v*p[1]*l/100,.42),Math.pow(v*p[2]*u/100,.42)],T=[400*I[0]/(I[0]+27.13),400*I[1]/(I[1]+27.13),400*I[2]/(I[2]+27.13)];return new e(_,(2*T[0]+T[1]+.05*T[2])*w,w,x,d,f,p,v,Math.pow(v,.25),b)}constructor(e,t,r,n,i,a,s,o,l,u){this.n=e,this.aw=t,this.nbb=r,this.ncb=n,this.c=i,this.nc=a,this.rgbD=s,this.fl=o,this.fLRoot=l,this.z=u}};In.DEFAULT=In.make();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Tn=class e{constructor(e,t,r,n,i,a,s,o,l){this.hue=e,this.chroma=t,this.j=r,this.q=n,this.m=i,this.s=a,this.jstar=s,this.astar=o,this.bstar=l}distance(e){const t=this.jstar-e.jstar,r=this.astar-e.astar,n=this.bstar-e.bstar,i=Math.sqrt(t*t+r*r+n*n);return 1.41*Math.pow(i,.63)}static fromInt(t){return e.fromIntInViewingConditions(t,In.DEFAULT)}static fromIntInViewingConditions(t,r){const n=(65280&t)>>8,i=255&t,a=_n((16711680&t)>>16),s=_n(n),o=_n(i),l=.41233895*a+.35762064*s+.18051042*o,u=.2126*a+.7152*s+.0722*o,c=.01932141*a+.11916382*s+.95034478*o,d=.401288*l+.650173*u-.051461*c,h=-.250268*l+1.204414*u+.045854*c,f=-.002079*l+.048952*u+.953127*c,p=r.rgbD[0]*d,m=r.rgbD[1]*h,y=r.rgbD[2]*f,g=Math.pow(r.fl*Math.abs(p)/100,.42),v=Math.pow(r.fl*Math.abs(m)/100,.42),_=Math.pow(r.fl*Math.abs(y)/100,.42),b=400*Jr(p)*g/(g+27.13),w=400*Jr(m)*v/(v+27.13),x=400*Jr(y)*_/(_+27.13),I=(11*b+-12*w+x)/11,T=(b+w-2*x)/9,E=(20*b+20*w+21*x)/20,S=(40*b+20*w+x)/20,A=180*Math.atan2(T,I)/Math.PI,k=A<0?A+360:A>=360?A-360:A,C=k*Math.PI/180,P=S*r.nbb,R=100*Math.pow(P/r.aw,r.c*r.z),M=4/r.c*Math.sqrt(R/100)*(r.aw+4)*r.fLRoot,L=k<20.14?k+360:k,O=5e4/13*(.25*(Math.cos(L*Math.PI/180+2)+3.8))*r.nc*r.ncb*Math.sqrt(I*I+T*T)/(E+.305),F=Math.pow(O,.9)*Math.pow(1.64-Math.pow(.29,r.n),.73),D=F*Math.sqrt(R/100),N=D*r.fLRoot,B=50*Math.sqrt(F*r.c/(r.aw+4)),U=(1+100*.007)*R/(1+.007*R),j=1/.0228*Math.log(1+.0228*N),G=j*Math.cos(C),z=j*Math.sin(C);return new e(k,D,R,M,N,B,U,G,z)}static fromJch(t,r,n){return e.fromJchInViewingConditions(t,r,n,In.DEFAULT)}static fromJchInViewingConditions(t,r,n,i){const a=4/i.c*Math.sqrt(t/100)*(i.aw+4)*i.fLRoot,s=r*i.fLRoot,o=r/Math.sqrt(t/100),l=50*Math.sqrt(o*i.c/(i.aw+4)),u=n*Math.PI/180,c=(1+100*.007)*t/(1+.007*t),d=1/.0228*Math.log(1+.0228*s),h=d*Math.cos(u),f=d*Math.sin(u);return new e(n,r,t,a,s,l,c,h,f)}static fromUcs(t,r,n){return e.fromUcsInViewingConditions(t,r,n,In.DEFAULT)}static fromUcsInViewingConditions(t,r,n,i){const a=r,s=n,o=Math.sqrt(a*a+s*s),l=(Math.exp(.0228*o)-1)/.0228/i.fLRoot;let u=Math.atan2(s,a)*(180/Math.PI);u<0&&(u+=360);const c=t/(1-.007*(t-100));return e.fromJchInViewingConditions(c,l,u,i)}toInt(){return this.viewed(In.DEFAULT)}viewed(e){const t=0===this.chroma||0===this.j?0:this.chroma/Math.sqrt(this.j/100),r=Math.pow(t/Math.pow(1.64-Math.pow(.29,e.n),.73),1/.9),n=this.hue*Math.PI/180,i=.25*(Math.cos(n+2)+3.8),a=e.aw*Math.pow(this.j/100,1/e.c/e.z),s=i*(5e4/13)*e.nc*e.ncb,o=a/e.nbb,l=Math.sin(n),u=Math.cos(n),c=23*(o+.305)*r/(23*s+11*r*u+108*r*l),d=c*u,h=c*l,f=(460*o+451*d+288*h)/1403,p=(460*o-891*d-261*h)/1403,m=(460*o-220*d-6300*h)/1403,y=Math.max(0,27.13*Math.abs(f)/(400-Math.abs(f))),g=Jr(f)*(100/e.fl)*Math.pow(y,1/.42),v=Math.max(0,27.13*Math.abs(p)/(400-Math.abs(p))),_=Jr(p)*(100/e.fl)*Math.pow(v,1/.42),b=Math.max(0,27.13*Math.abs(m)/(400-Math.abs(m))),w=Jr(m)*(100/e.fl)*Math.pow(b,1/.42),x=g/e.rgbD[0],I=_/e.rgbD[1],T=w/e.rgbD[2];return mn(1.86206786*x-1.01125463*I+.14918677*T,.38752654*x+.62144744*I-.00897398*T,-.0158415*x-.03412294*I+1.04996444*T)}static fromXyzInViewingConditions(t,r,n,i){const a=.401288*t+.650173*r-.051461*n,s=-.250268*t+1.204414*r+.045854*n,o=-.002079*t+.048952*r+.953127*n,l=i.rgbD[0]*a,u=i.rgbD[1]*s,c=i.rgbD[2]*o,d=Math.pow(i.fl*Math.abs(l)/100,.42),h=Math.pow(i.fl*Math.abs(u)/100,.42),f=Math.pow(i.fl*Math.abs(c)/100,.42),p=400*Jr(l)*d/(d+27.13),m=400*Jr(u)*h/(h+27.13),y=400*Jr(c)*f/(f+27.13),g=(11*p+-12*m+y)/11,v=(p+m-2*y)/9,_=(20*p+20*m+21*y)/20,b=(40*p+20*m+y)/20,w=180*Math.atan2(v,g)/Math.PI,x=w<0?w+360:w>=360?w-360:w,I=x*Math.PI/180,T=b*i.nbb,E=100*Math.pow(T/i.aw,i.c*i.z),S=4/i.c*Math.sqrt(E/100)*(i.aw+4)*i.fLRoot,A=x<20.14?x+360:x,k=5e4/13*(1/4*(Math.cos(A*Math.PI/180+2)+3.8))*i.nc*i.ncb*Math.sqrt(g*g+v*v)/(_+.305),C=Math.pow(k,.9)*Math.pow(1.64-Math.pow(.29,i.n),.73),P=C*Math.sqrt(E/100),R=P*i.fLRoot,M=50*Math.sqrt(C*i.c/(i.aw+4)),L=(1+100*.007)*E/(1+.007*E),O=Math.log(1+.0228*R)/.0228,F=O*Math.cos(I),D=O*Math.sin(I);return new e(x,P,E,S,R,M,L,F,D)}xyzInViewingConditions(e){const t=0===this.chroma||0===this.j?0:this.chroma/Math.sqrt(this.j/100),r=Math.pow(t/Math.pow(1.64-Math.pow(.29,e.n),.73),1/.9),n=this.hue*Math.PI/180,i=.25*(Math.cos(n+2)+3.8),a=e.aw*Math.pow(this.j/100,1/e.c/e.z),s=i*(5e4/13)*e.nc*e.ncb,o=a/e.nbb,l=Math.sin(n),u=Math.cos(n),c=23*(o+.305)*r/(23*s+11*r*u+108*r*l),d=c*u,h=c*l,f=(460*o+451*d+288*h)/1403,p=(460*o-891*d-261*h)/1403,m=(460*o-220*d-6300*h)/1403,y=Math.max(0,27.13*Math.abs(f)/(400-Math.abs(f))),g=Jr(f)*(100/e.fl)*Math.pow(y,1/.42),v=Math.max(0,27.13*Math.abs(p)/(400-Math.abs(p))),_=Jr(p)*(100/e.fl)*Math.pow(v,1/.42),b=Math.max(0,27.13*Math.abs(m)/(400-Math.abs(m))),w=Jr(m)*(100/e.fl)*Math.pow(b,1/.42),x=g/e.rgbD[0],I=_/e.rgbD[1],T=w/e.rgbD[2];return[1.86206786*x-1.01125463*I+.14918677*T,.38752654*x+.62144744*I-.00897398*T,-.0158415*x-.03412294*I+1.04996444*T]}},En=class e{static sanitizeRadians(e){return(e+8*Math.PI)%(2*Math.PI)}static trueDelinearized(e){const t=e/100;let r=0;return r=t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,255*r}static chromaticAdaptation(e){const t=Math.pow(Math.abs(e),.42);return 400*Jr(e)*t/(t+27.13)}static hueOf(t){const r=sn(t,e.SCALED_DISCOUNT_FROM_LINRGB),n=e.chromaticAdaptation(r[0]),i=e.chromaticAdaptation(r[1]),a=e.chromaticAdaptation(r[2]),s=(11*n+-12*i+a)/11,o=(n+i-2*a)/9;return Math.atan2(o,s)}static areInCyclicOrder(t,r,n){return e.sanitizeRadians(r-t)<e.sanitizeRadians(n-t)}static intercept(e,t,r){return(t-e)/(r-e)}static lerpPoint(e,t,r){return[e[0]+(r[0]-e[0])*t,e[1]+(r[1]-e[1])*t,e[2]+(r[2]-e[2])*t]}static setCoordinate(t,r,n,i){const a=e.intercept(t[i],r,n[i]);return e.lerpPoint(t,a,n)}static isBounded(e){return 0<=e&&e<=100}static nthVertex(t,r){const n=e.Y_FROM_LINRGB[0],i=e.Y_FROM_LINRGB[1],a=e.Y_FROM_LINRGB[2],s=r%4<=1?0:100,o=r%2==0?0:100;if(r<4){const r=s,l=o,u=(t-r*i-l*a)/n;return e.isBounded(u)?[u,r,l]:[-1,-1,-1]}if(r<8){const r=s,l=o,u=(t-l*n-r*a)/i;return e.isBounded(u)?[l,u,r]:[-1,-1,-1]}{const r=s,l=o,u=(t-r*n-l*i)/a;return e.isBounded(u)?[r,l,u]:[-1,-1,-1]}}static bisectToSegment(t,r){let n=[-1,-1,-1],i=n,a=0,s=0,o=!1,l=!0;for(let u=0;u<12;u++){const c=e.nthVertex(t,u);if(c[0]<0)continue;const d=e.hueOf(c);o?(l||e.areInCyclicOrder(a,d,s))&&(l=!1,e.areInCyclicOrder(a,r,d)?(i=c,s=d):(n=c,a=d)):(n=c,i=c,a=d,s=d,o=!0)}return[n,i]}static midpoint(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2,(e[2]+t[2])/2]}static criticalPlaneBelow(e){return Math.floor(e-.5)}static criticalPlaneAbove(e){return Math.ceil(e-.5)}static bisectToLimit(t,r){const n=e.bisectToSegment(t,r);let i=n[0],a=e.hueOf(i),s=n[1];for(let o=0;o<3;o++)if(i[o]!==s[o]){let t=-1,n=255;i[o]<s[o]?(t=e.criticalPlaneBelow(e.trueDelinearized(i[o])),n=e.criticalPlaneAbove(e.trueDelinearized(s[o]))):(t=e.criticalPlaneAbove(e.trueDelinearized(i[o])),n=e.criticalPlaneBelow(e.trueDelinearized(s[o])));for(let l=0;l<8&&!(Math.abs(n-t)<=1);l++){const l=Math.floor((t+n)/2),u=e.CRITICAL_PLANES[l],c=e.setCoordinate(i,u,s,o),d=e.hueOf(c);e.areInCyclicOrder(a,r,d)?(s=c,n=l):(i=c,a=d,t=l)}}return e.midpoint(i,s)}static inverseChromaticAdaptation(e){const t=Math.abs(e),r=Math.max(0,27.13*t/(400-t));return Jr(e)*Math.pow(r,1/.42)}static findResultByJ(t,r,n){let i=11*Math.sqrt(n);const a=In.DEFAULT,s=1/Math.pow(1.64-Math.pow(.29,a.n),.73),o=.25*(Math.cos(t+2)+3.8)*(5e4/13)*a.nc*a.ncb,l=Math.sin(t),u=Math.cos(t);for(let c=0;c<5;c++){const t=i/100,d=0===r||0===i?0:r/Math.sqrt(t),h=Math.pow(d*s,1/.9),f=a.aw*Math.pow(t,1/a.c/a.z)/a.nbb,p=23*(f+.305)*h/(23*o+11*h*u+108*h*l),m=p*u,y=p*l,g=(460*f+451*m+288*y)/1403,v=(460*f-891*m-261*y)/1403,_=(460*f-220*m-6300*y)/1403,b=sn([e.inverseChromaticAdaptation(g),e.inverseChromaticAdaptation(v),e.inverseChromaticAdaptation(_)],e.LINRGB_FROM_SCALED_DISCOUNT);if(b[0]<0||b[1]<0||b[2]<0)return 0;const w=e.Y_FROM_LINRGB[0],x=e.Y_FROM_LINRGB[1],I=e.Y_FROM_LINRGB[2],T=w*b[0]+x*b[1]+I*b[2];if(T<=0)return 0;if(4===c||Math.abs(T-n)<.002)return b[0]>100.01||b[1]>100.01||b[2]>100.01?0:dn(b);i-=(T-n)*i/(2*T)}return 0}static solveToInt(t,r,n){if(r<1e-4||n<1e-4||n>99.9999)return function(e){const t=bn(gn(e));return cn(t,t,t)}(n);const i=(t=nn(t))/180*Math.PI,a=gn(n),s=e.findResultByJ(i,r,a);if(0!==s)return s;return dn(e.bisectToLimit(a,i))}static solveToCam(t,r,n){return Tn.fromInt(e.solveToInt(t,r,n))}};
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En.SCALED_DISCOUNT_FROM_LINRGB=[[.001200833568784504,.002389694492170889,.0002795742885861124],[.0005891086651375999,.0029785502573438758,.0003270666104008398],[.00010146692491640572,.0005364214359186694,.0032979401770712076]],En.LINRGB_FROM_SCALED_DISCOUNT=[[1373.2198709594231,-1100.4251190754821,-7.278681089101213],[-271.815969077903,559.6580465940733,-32.46047482791194],[1.9622899599665666,-57.173814538844006,308.7233197812385]],En.Y_FROM_LINRGB=[.2126,.7152,.0722],En.CRITICAL_PLANES=[.015176349177441876,.045529047532325624,.07588174588720938,.10623444424209313,.13658714259697685,.16693984095186062,.19729253930674434,.2276452376616281,.2579979360165119,.28835063437139563,.3188300904430532,.350925934958123,.3848314933096426,.42057480301049466,.458183274052838,.4976837250274023,.5391024159806381,.5824650784040898,.6277969426914107,.6751227633498623,.7244668422128921,.775853049866786,.829304845476233,.8848452951698498,.942497089126609,1.0022825574869039,1.0642236851973577,1.1283421258858297,1.1946592148522128,1.2631959812511864,1.3339731595349034,1.407011200216447,1.4823302800086415,1.5599503113873272,1.6398909516233677,1.7221716113234105,1.8068114625156377,1.8938294463134073,1.9832442801866852,2.075074464868551,2.1693382909216234,2.2660538449872063,2.36523901573795,2.4669114995532007,2.5710888059345764,2.6777882626779785,2.7870270208169257,2.898822059350997,3.0131901897720907,3.1301480604002863,3.2497121605402226,3.3718988244681087,3.4967242352587946,3.624204428461639,3.754355295633311,3.887192587735158,4.022731918402185,4.160988767090289,4.301978482107941,4.445716283538092,4.592217266055746,4.741496401646282,4.893568542229298,5.048448422192488,5.20615066083972,5.3666897647573375,5.5300801301023865,5.696336044816294,5.865471690767354,6.037501145825082,6.212438385869475,6.390297286737924,6.571091626112461,6.7548350853498045,6.941541251256611,7.131223617812143,7.323895587840543,7.5195704746346665,7.7182615035334345,7.919981813454504,8.124744458384042,8.332562408825165,8.543448553206703,8.757415699253682,8.974476575321063,9.194643831691977,9.417930041841839,9.644347703669503,9.873909240696694,10.106627003236781,10.342513269534024,10.58158024687427,10.8238400726681,11.069304815507364,11.317986476196008,11.569896988756009,11.825048221409341,12.083451977536606,12.345119996613247,12.610063955123938,12.878295467455942,13.149826086772048,13.42466730586372,13.702830557985108,13.984327217668513,14.269168601521828,14.55736596900856,14.848930523210871,15.143873411576273,15.44220572664832,15.743938506781891,16.04908273684337,16.35764934889634,16.66964922287304,16.985093187232053,17.30399201960269,17.62635644741625,17.95219714852476,18.281524751807332,18.614349837764564,18.95068293910138,19.290534541298456,19.633915083172692,19.98083495742689,20.331304511189067,20.685334046541502,21.042933821039977,21.404114048223256,21.76888489811322,22.137256497705877,22.50923893145328,22.884842241736916,23.264076429332462,23.6469514538663,24.033477234264016,24.42366364919083,24.817520537484558,25.21505769858089,25.61628489293138,26.021211842414342,26.429848230738664,26.842203703840827,27.258287870275353,27.678110301598522,28.10168053274597,28.529008062403893,28.96010235337422,29.39497283293396,29.83362889318845,30.276079891419332,30.722335150426627,31.172403958865512,31.62629557157785,32.08401920991837,32.54558406207592,33.010999283389665,33.4802739966603,33.953417292456834,34.430438229418264,34.911345834551085,35.39614910352207,35.88485700094671,36.37747846067349,36.87402238606382,37.37449765026789,37.87891309649659,38.38727753828926,38.89959975977785,39.41588851594697,39.93615253289054,40.460400508064545,40.98864111053629,41.520882981230194,42.05713473317016,42.597404951718396,43.141702194811224,43.6900349931913,44.24241185063697,44.798841244188324,45.35933162437017,45.92389141541209,46.49252901546552,47.065252796817916,47.64207110610409,48.22299226451468,48.808024568002054,49.3971762874833,49.9904556690408,50.587870934119984,51.189430279724725,51.79514187861014,52.40501387947288,53.0190544071392,53.637271562750364,54.259673423945976,54.88626804504493,55.517063457223934,56.15206766869424,56.79128866487574,57.43473440856916,58.08241284012621,58.734331877617365,59.39049941699807,60.05092333227251,60.715611475655585,61.38457167773311,62.057811747619894,62.7353394731159,63.417162620860914,64.10328893648692,64.79372614476921,65.48848194977529,66.18756403501224,66.89098006357258,67.59873767827808,68.31084450182222,69.02730813691093,69.74813616640164,70.47333615344107,71.20291564160104,71.93688215501312,72.67524319850172,73.41800625771542,74.16517879925733,74.9167682708136,75.67278210128072,76.43322770089146,77.1981124613393,77.96744375590167,78.74122893956174,79.51947534912904,80.30219030335869,81.08938110306934,81.88105503125999,82.67721935322541,83.4778813166706,84.28304815182372,85.09272707154808,85.90692527145302,86.72564993000343,87.54890820862819,88.3767072518277,89.2090541872801,90.04595612594655,90.88742016217518,91.73345337380438,92.58406282226491,93.43925555268066,94.29903859396902,95.16341895893969,96.03240364439274,96.9059996312159,97.78421388448044,98.6670533535366,99.55452497210776];
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Sn=class e{static from(t,r,n){return new e(En.solveToInt(t,r,n))}static fromInt(t){return new e(t)}toInt(){return this.argb}get hue(){return this.internalHue}set hue(e){this.setInternalState(En.solveToInt(e,this.internalChroma,this.internalTone))}get chroma(){return this.internalChroma}set chroma(e){this.setInternalState(En.solveToInt(this.internalHue,e,this.internalTone))}get tone(){return this.internalTone}set tone(e){this.setInternalState(En.solveToInt(this.internalHue,this.internalChroma,e))}constructor(e){this.argb=e;const t=Tn.fromInt(e);this.internalHue=t.hue,this.internalChroma=t.chroma,this.internalTone=yn(e),this.argb=e}setInternalState(e){const t=Tn.fromInt(e);this.internalHue=t.hue,this.internalChroma=t.chroma,this.internalTone=yn(e),this.argb=e}inViewingConditions(t){const r=Tn.fromInt(this.toInt()).xyzInViewingConditions(t),n=Tn.fromXyzInViewingConditions(r[0],r[1],r[2],In.make());return e.from(n.hue,n.chroma,vn(r[1]))}};
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{static harmonize(e,t){const r=Sn.fromInt(e),n=Sn.fromInt(t),i=an(r.hue,n.hue),a=Math.min(.5*i,15),s=nn(r.hue+a*(o=r.hue,nn(n.hue-o)<=180?1:-1));var o;return Sn.from(s,r.chroma,r.tone).toInt()}static hctHue(e,t,r){const n=An.cam16Ucs(e,t,r),i=Tn.fromInt(n),a=Tn.fromInt(e);return Sn.from(i.hue,a.chroma,yn(e)).toInt()}static cam16Ucs(e,t,r){const n=Tn.fromInt(e),i=Tn.fromInt(t),a=n.jstar,s=n.astar,o=n.bstar,l=a+(i.jstar-a)*r,u=s+(i.astar-s)*r,c=o+(i.bstar-o)*r;return Tn.fromUcs(l,u,c).toInt()}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kn=class e{static ratioOfTones(t,r){return t=tn(0,100,t),r=tn(0,100,r),e.ratioOfYs(gn(t),gn(r))}static ratioOfYs(e,t){const r=e>t?e:t;return(r+5)/((r===t?e:t)+5)}static lighter(t,r){if(t<0||t>100)return-1;const n=gn(t),i=r*(n+5)-5,a=e.ratioOfYs(i,n),s=Math.abs(a-r);if(a<r&&s>.04)return-1;const o=vn(i)+.4;return o<0||o>100?-1:o}static darker(t,r){if(t<0||t>100)return-1;const n=gn(t),i=(n+5)/r-5,a=e.ratioOfYs(n,i),s=Math.abs(a-r);if(a<r&&s>.04)return-1;const o=vn(i)-.4;return o<0||o>100?-1:o}static lighterUnsafe(t,r){const n=e.lighter(t,r);return n<0?100:n}static darkerUnsafe(t,r){const n=e.darker(t,r);return n<0?0:n}},Cn=class e{static isDisliked(e){const t=Math.round(e.hue)>=90&&Math.round(e.hue)<=111,r=Math.round(e.chroma)>16,n=Math.round(e.tone)<65;return t&&r&&n}static fixIfDisliked(t){return e.isDisliked(t)?Sn.from(t.hue,t.chroma,70):t}},Pn=class e{static fromPalette(t){return new e(t.name??"",t.palette,t.tone,t.isBackground??!1,t.background,t.secondBackground,t.contrastCurve,t.toneDeltaPair)}constructor(e,t,r,n,i,a,s,o){if(this.name=e,this.palette=t,this.tone=r,this.isBackground=n,this.background=i,this.secondBackground=a,this.contrastCurve=s,this.toneDeltaPair=o,this.hctCache=new Map,!i&&a)throw new Error(`Color ${e} has secondBackgrounddefined, but background is not defined.`);if(!i&&s)throw new Error(`Color ${e} has contrastCurvedefined, but background is not defined.`);if(i&&!s)throw new Error(`Color ${e} has backgrounddefined, but contrastCurve is not defined.`)}getArgb(e){return this.getHct(e).toInt()}getHct(e){const t=this.hctCache.get(e);if(null!=t)return t;const r=this.getTone(e),n=this.palette(e).getHct(r);return this.hctCache.size>4&&this.hctCache.clear(),this.hctCache.set(e,n),n}getTone(t){const r=t.contrastLevel<0;if(this.toneDeltaPair){const n=this.toneDeltaPair(t),i=n.roleA,a=n.roleB,s=n.delta,o=n.polarity,l=n.stayTogether,u=this.background(t).getTone(t),c="nearer"===o||"lighter"===o&&!t.isDark||"darker"===o&&t.isDark,d=c?i:a,h=c?a:i,f=this.name===d.name,p=t.isDark?1:-1,m=d.contrastCurve.get(t.contrastLevel),y=h.contrastCurve.get(t.contrastLevel),g=d.tone(t);let v=kn.ratioOfTones(u,g)>=m?g:e.foregroundTone(u,m);const _=h.tone(t);let b=kn.ratioOfTones(u,_)>=y?_:e.foregroundTone(u,y);return r&&(v=e.foregroundTone(u,m),b=e.foregroundTone(u,y)),(b-v)*p>=s||(b=tn(0,100,v+s*p),(b-v)*p>=s||(v=tn(0,100,b-s*p))),50<=v&&v<60?p>0?(v=60,b=Math.max(b,v+s*p)):(v=49,b=Math.min(b,v+s*p)):50<=b&&b<60&&(l?p>0?(v=60,b=Math.max(b,v+s*p)):(v=49,b=Math.min(b,v+s*p)):b=p>0?60:49),f?v:b}{let n=this.tone(t);if(null==this.background)return n;const i=this.background(t).getTone(t),a=this.contrastCurve.get(t.contrastLevel);if(kn.ratioOfTones(i,n)>=a||(n=e.foregroundTone(i,a)),r&&(n=e.foregroundTone(i,a)),this.isBackground&&50<=n&&n<60&&(n=kn.ratioOfTones(49,i)>=a?49:60),this.secondBackground){const[r,i]=[this.background,this.secondBackground],[s,o]=[r(t).getTone(t),i(t).getTone(t)],[l,u]=[Math.max(s,o),Math.min(s,o)];if(kn.ratioOfTones(l,n)>=a&&kn.ratioOfTones(u,n)>=a)return n;const c=kn.lighter(l,a),d=kn.darker(u,a),h=[];-1!==c&&h.push(c),-1!==d&&h.push(d);return e.tonePrefersLightForeground(s)||e.tonePrefersLightForeground(o)?c<0?100:c:1===h.length?h[0]:d<0?0:d}return n}}static foregroundTone(t,r){const n=kn.lighterUnsafe(t,r),i=kn.darkerUnsafe(t,r),a=kn.ratioOfTones(n,t),s=kn.ratioOfTones(i,t);if(e.tonePrefersLightForeground(t)){const e=Math.abs(a-s)<.1&&a<r&&s<r;return a>=r||a>=s||e?n:i}return s>=r||s>=a?i:n}static tonePrefersLightForeground(e){return Math.round(e)<60}static toneAllowsLightForeground(e){return Math.round(e)<=49}static enableLightForeground(t){return e.tonePrefersLightForeground(t)&&!e.toneAllowsLightForeground(t)?49:t}},Rn=class e{static fromInt(t){const r=Sn.fromInt(t);return e.fromHct(r)}static fromHct(t){return new e(t.hue,t.chroma,t)}static fromHueAndChroma(t,r){const n=new Mn(t,r).create();return new e(t,r,n)}constructor(e,t,r){this.hue=e,this.chroma=t,this.keyColor=r,this.cache=new Map}tone(e){let t=this.cache.get(e);return void 0===t&&(t=Sn.from(this.hue,this.chroma,e).toInt(),this.cache.set(e,t)),t}getHct(e){return Sn.fromInt(this.tone(e))}};
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e,t){this.hue=e,this.requestedChroma=t,this.chromaCache=new Map,this.maxChromaValue=200}create(){let e=0,t=100;for(;e<t;){const r=Math.floor((e+t)/2),n=this.maxChroma(r)<this.maxChroma(r+1);if(this.maxChroma(r)>=this.requestedChroma-.01)if(Math.abs(e-50)<Math.abs(t-50))t=r;else{if(e===r)return Sn.from(this.hue,this.requestedChroma,e);e=r}else n?e=r+1:t=r}return Sn.from(this.hue,this.requestedChroma,e)}maxChroma(e){if(this.chromaCache.has(e))return this.chromaCache.get(e);const t=Sn.from(this.hue,this.maxChromaValue,e).chroma;return this.chromaCache.set(e,t),t}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ln=class{constructor(e,t,r,n){this.low=e,this.normal=t,this.medium=r,this.high=n}get(e){return e<=-1?this.low:e<0?en(this.low,this.normal,(e- -1)/1):e<.5?en(this.normal,this.medium,(e-0)/.5):e<1?en(this.medium,this.high,(e-.5)/.5):this.high}},On=class{constructor(e,t,r,n,i){this.roleA=e,this.roleB=t,this.delta=r,this.polarity=n,this.stayTogether=i}};
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Fn,Dn;
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Nn(e){return e.variant===Fn.FIDELITY||e.variant===Fn.CONTENT}function Bn(e){return e.variant===Fn.MONOCHROME}(Dn=Fn||(Fn={}))[Dn.MONOCHROME=0]="MONOCHROME",Dn[Dn.NEUTRAL=1]="NEUTRAL",Dn[Dn.TONAL_SPOT=2]="TONAL_SPOT",Dn[Dn.VIBRANT=3]="VIBRANT",Dn[Dn.EXPRESSIVE=4]="EXPRESSIVE",Dn[Dn.FIDELITY=5]="FIDELITY",Dn[Dn.CONTENT=6]="CONTENT",Dn[Dn.RAINBOW=7]="RAINBOW",Dn[Dn.FRUIT_SALAD=8]="FRUIT_SALAD";let Un=class e{static highestSurface(t){return t.isDark?e.surfaceBright:e.surfaceDim}};Un.contentAccentToneDelta=15,Un.primaryPaletteKeyColor=Pn.fromPalette({name:"primary_palette_key_color",palette:e=>e.primaryPalette,tone:e=>e.primaryPalette.keyColor.tone}),Un.secondaryPaletteKeyColor=Pn.fromPalette({name:"secondary_palette_key_color",palette:e=>e.secondaryPalette,tone:e=>e.secondaryPalette.keyColor.tone}),Un.tertiaryPaletteKeyColor=Pn.fromPalette({name:"tertiary_palette_key_color",palette:e=>e.tertiaryPalette,tone:e=>e.tertiaryPalette.keyColor.tone}),Un.neutralPaletteKeyColor=Pn.fromPalette({name:"neutral_palette_key_color",palette:e=>e.neutralPalette,tone:e=>e.neutralPalette.keyColor.tone}),Un.neutralVariantPaletteKeyColor=Pn.fromPalette({name:"neutral_variant_palette_key_color",palette:e=>e.neutralVariantPalette,tone:e=>e.neutralVariantPalette.keyColor.tone}),Un.background=Pn.fromPalette({name:"background",palette:e=>e.neutralPalette,tone:e=>e.isDark?6:98,isBackground:!0}),Un.onBackground=Pn.fromPalette({name:"on_background",palette:e=>e.neutralPalette,tone:e=>e.isDark?90:10,background:e=>Un.background,contrastCurve:new Ln(3,3,4.5,7)}),Un.surface=Pn.fromPalette({name:"surface",palette:e=>e.neutralPalette,tone:e=>e.isDark?6:98,isBackground:!0}),Un.surfaceDim=Pn.fromPalette({name:"surface_dim",palette:e=>e.neutralPalette,tone:e=>e.isDark?6:new Ln(87,87,80,75).get(e.contrastLevel),isBackground:!0}),Un.surfaceBright=Pn.fromPalette({name:"surface_bright",palette:e=>e.neutralPalette,tone:e=>e.isDark?new Ln(24,24,29,34).get(e.contrastLevel):98,isBackground:!0}),Un.surfaceContainerLowest=Pn.fromPalette({name:"surface_container_lowest",palette:e=>e.neutralPalette,tone:e=>e.isDark?new Ln(4,4,2,0).get(e.contrastLevel):100,isBackground:!0}),Un.surfaceContainerLow=Pn.fromPalette({name:"surface_container_low",palette:e=>e.neutralPalette,tone:e=>e.isDark?new Ln(10,10,11,12).get(e.contrastLevel):new Ln(96,96,96,95).get(e.contrastLevel),isBackground:!0}),Un.surfaceContainer=Pn.fromPalette({name:"surface_container",palette:e=>e.neutralPalette,tone:e=>e.isDark?new Ln(12,12,16,20).get(e.contrastLevel):new Ln(94,94,92,90).get(e.contrastLevel),isBackground:!0}),Un.surfaceContainerHigh=Pn.fromPalette({name:"surface_container_high",palette:e=>e.neutralPalette,tone:e=>e.isDark?new Ln(17,17,21,25).get(e.contrastLevel):new Ln(92,92,88,85).get(e.contrastLevel),isBackground:!0}),Un.surfaceContainerHighest=Pn.fromPalette({name:"surface_container_highest",palette:e=>e.neutralPalette,tone:e=>e.isDark?new Ln(22,22,26,30).get(e.contrastLevel):new Ln(90,90,84,80).get(e.contrastLevel),isBackground:!0}),Un.onSurface=Pn.fromPalette({name:"on_surface",palette:e=>e.neutralPalette,tone:e=>e.isDark?90:10,background:e=>Un.highestSurface(e),contrastCurve:new Ln(4.5,7,11,21)}),Un.surfaceVariant=Pn.fromPalette({name:"surface_variant",palette:e=>e.neutralVariantPalette,tone:e=>e.isDark?30:90,isBackground:!0}),Un.onSurfaceVariant=Pn.fromPalette({name:"on_surface_variant",palette:e=>e.neutralVariantPalette,tone:e=>e.isDark?80:30,background:e=>Un.highestSurface(e),contrastCurve:new Ln(3,4.5,7,11)}),Un.inverseSurface=Pn.fromPalette({name:"inverse_surface",palette:e=>e.neutralPalette,tone:e=>e.isDark?90:20}),Un.inverseOnSurface=Pn.fromPalette({name:"inverse_on_surface",palette:e=>e.neutralPalette,tone:e=>e.isDark?20:95,background:e=>Un.inverseSurface,contrastCurve:new Ln(4.5,7,11,21)}),Un.outline=Pn.fromPalette({name:"outline",palette:e=>e.neutralVariantPalette,tone:e=>e.isDark?60:50,background:e=>Un.highestSurface(e),contrastCurve:new Ln(1.5,3,4.5,7)}),Un.outlineVariant=Pn.fromPalette({name:"outline_variant",palette:e=>e.neutralVariantPalette,tone:e=>e.isDark?30:80,background:e=>Un.highestSurface(e),contrastCurve:new Ln(1,1,3,4.5)}),Un.shadow=Pn.fromPalette({name:"shadow",palette:e=>e.neutralPalette,tone:e=>0}),Un.scrim=Pn.fromPalette({name:"scrim",palette:e=>e.neutralPalette,tone:e=>0}),Un.surfaceTint=Pn.fromPalette({name:"surface_tint",palette:e=>e.primaryPalette,tone:e=>e.isDark?80:40,isBackground:!0}),Un.primary=Pn.fromPalette({name:"primary",palette:e=>e.primaryPalette,tone:e=>Bn(e)?e.isDark?100:0:e.isDark?80:40,isBackground:!0,background:e=>Un.highestSurface(e),contrastCurve:new Ln(3,4.5,7,7),toneDeltaPair:e=>new On(Un.primaryContainer,Un.primary,10,"nearer",!1)}),Un.onPrimary=Pn.fromPalette({name:"on_primary",palette:e=>e.primaryPalette,tone:e=>Bn(e)?e.isDark?10:90:e.isDark?20:100,background:e=>Un.primary,contrastCurve:new Ln(4.5,7,11,21)}),Un.primaryContainer=Pn.fromPalette({name:"primary_container",palette:e=>e.primaryPalette,tone:e=>Nn(e)?e.sourceColorHct.tone:Bn(e)?e.isDark?85:25:e.isDark?30:90,isBackground:!0,background:e=>Un.highestSurface(e),contrastCurve:new Ln(1,1,3,4.5),toneDeltaPair:e=>new On(Un.primaryContainer,Un.primary,10,"nearer",!1)}),Un.onPrimaryContainer=Pn.fromPalette({name:"on_primary_container",palette:e=>e.primaryPalette,tone:e=>Nn(e)?Pn.foregroundTone(Un.primaryContainer.tone(e),4.5):Bn(e)?e.isDark?0:100:e.isDark?90:30,background:e=>Un.primaryContainer,contrastCurve:new Ln(3,4.5,7,11)}),Un.inversePrimary=Pn.fromPalette({name:"inverse_primary",palette:e=>e.primaryPalette,tone:e=>e.isDark?40:80,background:e=>Un.inverseSurface,contrastCurve:new Ln(3,4.5,7,7)}),Un.secondary=Pn.fromPalette({name:"secondary",palette:e=>e.secondaryPalette,tone:e=>e.isDark?80:40,isBackground:!0,background:e=>Un.highestSurface(e),contrastCurve:new Ln(3,4.5,7,7),toneDeltaPair:e=>new On(Un.secondaryContainer,Un.secondary,10,"nearer",!1)}),Un.onSecondary=Pn.fromPalette({name:"on_secondary",palette:e=>e.secondaryPalette,tone:e=>Bn(e)?e.isDark?10:100:e.isDark?20:100,background:e=>Un.secondary,contrastCurve:new Ln(4.5,7,11,21)}),Un.secondaryContainer=Pn.fromPalette({name:"secondary_container",palette:e=>e.secondaryPalette,tone:e=>{const t=e.isDark?30:90;return Bn(e)?e.isDark?30:85:Nn(e)?function(e,t,r,n){let i=r,a=Sn.from(e,t,r);if(a.chroma<t){let r=a.chroma;for(;a.chroma<t;){i+=n?-1:1;const s=Sn.from(e,t,i);if(r>s.chroma)break;if(Math.abs(s.chroma-t)<.4)break;Math.abs(s.chroma-t)<Math.abs(a.chroma-t)&&(a=s),r=Math.max(r,s.chroma)}}return i}(e.secondaryPalette.hue,e.secondaryPalette.chroma,t,!e.isDark):t},isBackground:!0,background:e=>Un.highestSurface(e),contrastCurve:new Ln(1,1,3,4.5),toneDeltaPair:e=>new On(Un.secondaryContainer,Un.secondary,10,"nearer",!1)}),Un.onSecondaryContainer=Pn.fromPalette({name:"on_secondary_container",palette:e=>e.secondaryPalette,tone:e=>Bn(e)?e.isDark?90:10:Nn(e)?Pn.foregroundTone(Un.secondaryContainer.tone(e),4.5):e.isDark?90:30,background:e=>Un.secondaryContainer,contrastCurve:new Ln(3,4.5,7,11)}),Un.tertiary=Pn.fromPalette({name:"tertiary",palette:e=>e.tertiaryPalette,tone:e=>Bn(e)?e.isDark?90:25:e.isDark?80:40,isBackground:!0,background:e=>Un.highestSurface(e),contrastCurve:new Ln(3,4.5,7,7),toneDeltaPair:e=>new On(Un.tertiaryContainer,Un.tertiary,10,"nearer",!1)}),Un.onTertiary=Pn.fromPalette({name:"on_tertiary",palette:e=>e.tertiaryPalette,tone:e=>Bn(e)?e.isDark?10:90:e.isDark?20:100,background:e=>Un.tertiary,contrastCurve:new Ln(4.5,7,11,21)}),Un.tertiaryContainer=Pn.fromPalette({name:"tertiary_container",palette:e=>e.tertiaryPalette,tone:e=>{if(Bn(e))return e.isDark?60:49;if(!Nn(e))return e.isDark?30:90;const t=e.tertiaryPalette.getHct(e.sourceColorHct.tone);return Cn.fixIfDisliked(t).tone},isBackground:!0,background:e=>Un.highestSurface(e),contrastCurve:new Ln(1,1,3,4.5),toneDeltaPair:e=>new On(Un.tertiaryContainer,Un.tertiary,10,"nearer",!1)}),Un.onTertiaryContainer=Pn.fromPalette({name:"on_tertiary_container",palette:e=>e.tertiaryPalette,tone:e=>Bn(e)?e.isDark?0:100:Nn(e)?Pn.foregroundTone(Un.tertiaryContainer.tone(e),4.5):e.isDark?90:30,background:e=>Un.tertiaryContainer,contrastCurve:new Ln(3,4.5,7,11)}),Un.error=Pn.fromPalette({name:"error",palette:e=>e.errorPalette,tone:e=>e.isDark?80:40,isBackground:!0,background:e=>Un.highestSurface(e),contrastCurve:new Ln(3,4.5,7,7),toneDeltaPair:e=>new On(Un.errorContainer,Un.error,10,"nearer",!1)}),Un.onError=Pn.fromPalette({name:"on_error",palette:e=>e.errorPalette,tone:e=>e.isDark?20:100,background:e=>Un.error,contrastCurve:new Ln(4.5,7,11,21)}),Un.errorContainer=Pn.fromPalette({name:"error_container",palette:e=>e.errorPalette,tone:e=>e.isDark?30:90,isBackground:!0,background:e=>Un.highestSurface(e),contrastCurve:new Ln(1,1,3,4.5),toneDeltaPair:e=>new On(Un.errorContainer,Un.error,10,"nearer",!1)}),Un.onErrorContainer=Pn.fromPalette({name:"on_error_container",palette:e=>e.errorPalette,tone:e=>Bn(e)?e.isDark?90:10:e.isDark?90:30,background:e=>Un.errorContainer,contrastCurve:new Ln(3,4.5,7,11)}),Un.primaryFixed=Pn.fromPalette({name:"primary_fixed",palette:e=>e.primaryPalette,tone:e=>Bn(e)?40:90,isBackground:!0,background:e=>Un.highestSurface(e),contrastCurve:new Ln(1,1,3,4.5),toneDeltaPair:e=>new On(Un.primaryFixed,Un.primaryFixedDim,10,"lighter",!0)}),Un.primaryFixedDim=Pn.fromPalette({name:"primary_fixed_dim",palette:e=>e.primaryPalette,tone:e=>Bn(e)?30:80,isBackground:!0,background:e=>Un.highestSurface(e),contrastCurve:new Ln(1,1,3,4.5),toneDeltaPair:e=>new On(Un.primaryFixed,Un.primaryFixedDim,10,"lighter",!0)}),Un.onPrimaryFixed=Pn.fromPalette({name:"on_primary_fixed",palette:e=>e.primaryPalette,tone:e=>Bn(e)?100:10,background:e=>Un.primaryFixedDim,secondBackground:e=>Un.primaryFixed,contrastCurve:new Ln(4.5,7,11,21)}),Un.onPrimaryFixedVariant=Pn.fromPalette({name:"on_primary_fixed_variant",palette:e=>e.primaryPalette,tone:e=>Bn(e)?90:30,background:e=>Un.primaryFixedDim,secondBackground:e=>Un.primaryFixed,contrastCurve:new Ln(3,4.5,7,11)}),Un.secondaryFixed=Pn.fromPalette({name:"secondary_fixed",palette:e=>e.secondaryPalette,tone:e=>Bn(e)?80:90,isBackground:!0,background:e=>Un.highestSurface(e),contrastCurve:new Ln(1,1,3,4.5),toneDeltaPair:e=>new On(Un.secondaryFixed,Un.secondaryFixedDim,10,"lighter",!0)}),Un.secondaryFixedDim=Pn.fromPalette({name:"secondary_fixed_dim",palette:e=>e.secondaryPalette,tone:e=>Bn(e)?70:80,isBackground:!0,background:e=>Un.highestSurface(e),contrastCurve:new Ln(1,1,3,4.5),toneDeltaPair:e=>new On(Un.secondaryFixed,Un.secondaryFixedDim,10,"lighter",!0)}),Un.onSecondaryFixed=Pn.fromPalette({name:"on_secondary_fixed",palette:e=>e.secondaryPalette,tone:e=>10,background:e=>Un.secondaryFixedDim,secondBackground:e=>Un.secondaryFixed,contrastCurve:new Ln(4.5,7,11,21)}),Un.onSecondaryFixedVariant=Pn.fromPalette({name:"on_secondary_fixed_variant",palette:e=>e.secondaryPalette,tone:e=>Bn(e)?25:30,background:e=>Un.secondaryFixedDim,secondBackground:e=>Un.secondaryFixed,contrastCurve:new Ln(3,4.5,7,11)}),Un.tertiaryFixed=Pn.fromPalette({name:"tertiary_fixed",palette:e=>e.tertiaryPalette,tone:e=>Bn(e)?40:90,isBackground:!0,background:e=>Un.highestSurface(e),contrastCurve:new Ln(1,1,3,4.5),toneDeltaPair:e=>new On(Un.tertiaryFixed,Un.tertiaryFixedDim,10,"lighter",!0)}),Un.tertiaryFixedDim=Pn.fromPalette({name:"tertiary_fixed_dim",palette:e=>e.tertiaryPalette,tone:e=>Bn(e)?30:80,isBackground:!0,background:e=>Un.highestSurface(e),contrastCurve:new Ln(1,1,3,4.5),toneDeltaPair:e=>new On(Un.tertiaryFixed,Un.tertiaryFixedDim,10,"lighter",!0)}),Un.onTertiaryFixed=Pn.fromPalette({name:"on_tertiary_fixed",palette:e=>e.tertiaryPalette,tone:e=>Bn(e)?100:10,background:e=>Un.tertiaryFixedDim,secondBackground:e=>Un.tertiaryFixed,contrastCurve:new Ln(4.5,7,11,21)}),Un.onTertiaryFixedVariant=Pn.fromPalette({name:"on_tertiary_fixed_variant",palette:e=>e.tertiaryPalette,tone:e=>Bn(e)?90:30,background:e=>Un.tertiaryFixedDim,secondBackground:e=>Un.tertiaryFixed,contrastCurve:new Ln(3,4.5,7,11)});
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let jn=class e{static of(t){return new e(t,!1)}static contentOf(t){return new e(t,!0)}static fromColors(t){return e.createPaletteFromColors(!1,t)}static contentFromColors(t){return e.createPaletteFromColors(!0,t)}static createPaletteFromColors(t,r){const n=new e(r.primary,t);if(r.secondary){const i=new e(r.secondary,t);n.a2=i.a1}if(r.tertiary){const i=new e(r.tertiary,t);n.a3=i.a1}if(r.error){const i=new e(r.error,t);n.error=i.a1}if(r.neutral){const i=new e(r.neutral,t);n.n1=i.n1}if(r.neutralVariant){const i=new e(r.neutralVariant,t);n.n2=i.n2}return n}constructor(e,t){const r=Sn.fromInt(e),n=r.hue,i=r.chroma;t?(this.a1=Rn.fromHueAndChroma(n,i),this.a2=Rn.fromHueAndChroma(n,i/3),this.a3=Rn.fromHueAndChroma(n+60,i/2),this.n1=Rn.fromHueAndChroma(n,Math.min(i/12,4)),this.n2=Rn.fromHueAndChroma(n,Math.min(i/6,8))):(this.a1=Rn.fromHueAndChroma(n,Math.max(48,i)),this.a2=Rn.fromHueAndChroma(n,16),this.a3=Rn.fromHueAndChroma(n+60,24),this.n1=Rn.fromHueAndChroma(n,4),this.n2=Rn.fromHueAndChroma(n,8)),this.error=Rn.fromHueAndChroma(25,84)}};
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{fromInt(e){return function(e){const t=_n(hn(e)),r=_n(fn(e)),n=_n(pn(e)),i=on,a=i[0][0]*t+i[0][1]*r+i[0][2]*n,s=i[1][0]*t+i[1][1]*r+i[1][2]*n,o=i[2][0]*t+i[2][1]*r+i[2][2]*n,l=s/un[1],u=o/un[2],c=wn(a/un[0]),d=wn(l);return[116*d-16,500*(c-d),200*(d-wn(u))]}(e)}toInt(e){return function(e,t,r){const n=un,i=(e+16)/116,a=i-r/200,s=xn(t/500+i),o=xn(i),l=xn(a);return mn(s*n[0],o*n[1],l*n[2])}(e[0],e[1],e[2])}distance(e,t){const r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{static quantize(e,t,r){const n=new Map,i=new Array,a=new Array,s=new Gn;let o=0;for(let g=0;g<e.length;g++){const t=e[g],r=n.get(t);void 0===r?(o++,i.push(s.fromInt(t)),a.push(t),n.set(t,1)):n.set(t,r+1)}const l=new Array;for(let g=0;g<o;g++){const e=a[g],t=n.get(e);void 0!==t&&(l[g]=t)}let u=Math.min(r,o);t.length>0&&(u=Math.min(u,t.length));const c=new Array;for(let g=0;g<t.length;g++)c.push(s.fromInt(t[g]));const d=u-c.length;if(0===t.length&&d>0)for(let g=0;g<d;g++){const e=100*Math.random(),t=201*Math.random()-100,r=201*Math.random()-100;c.push(new Array(e,t,r))}const h=new Array;for(let g=0;g<o;g++)h.push(Math.floor(Math.random()*u));const f=new Array;for(let g=0;g<u;g++){f.push(new Array);for(let e=0;e<u;e++)f[g].push(0)}const p=new Array;for(let g=0;g<u;g++){p.push(new Array);for(let e=0;e<u;e++)p[g].push(new Hn)}const m=new Array;for(let g=0;g<u;g++)m.push(0);for(let g=0;g<10;g++){for(let i=0;i<u;i++){for(let e=i+1;e<u;e++){const t=s.distance(c[i],c[e]);p[e][i].distance=t,p[e][i].index=i,p[i][e].distance=t,p[i][e].index=e}p[i].sort();for(let e=0;e<u;e++)f[i][e]=p[i][e].index}let e=0;for(let a=0;a<o;a++){const t=i[a],r=h[a],n=c[r],o=s.distance(t,n);let l=o,d=-1;for(let e=0;e<u;e++){if(p[r][e].distance>=4*o)continue;const n=s.distance(t,c[e]);n<l&&(l=n,d=e)}if(-1!==d){Math.abs(Math.sqrt(l)-Math.sqrt(o))>3&&(e++,h[a]=d)}}if(0===e&&0!==g)break;const t=new Array(u).fill(0),r=new Array(u).fill(0),n=new Array(u).fill(0);for(let i=0;i<u;i++)m[i]=0;for(let a=0;a<o;a++){const e=h[a],s=i[a],o=l[a];m[e]+=o,t[e]+=s[0]*o,r[e]+=s[1]*o,n[e]+=s[2]*o}for(let i=0;i<u;i++){const e=m[i];if(0===e){c[i]=[0,0,0];continue}const a=t[i]/e,s=r[i]/e,o=n[i]/e;c[i]=[a,s,o]}}const y=new Map;for(let g=0;g<u;g++){const e=m[g];if(0===e)continue;const t=s.toInt(c[g]);y.has(t)||y.set(t,e)}return y}}class Hn{constructor(){this.distance=-1,this.index=-1}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{static quantize(e){const t=new Map;for(let r=0;r<e.length;r++){const n=e[r];(n>>24&255)<255||t.set(n,(t.get(n)??0)+1)}return t}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n=33,Xn=35937,qn="red",Wn="green",Yn="blue";class Kn{constructor(e=[],t=[],r=[],n=[],i=[],a=[]){this.weights=e,this.momentsR=t,this.momentsG=r,this.momentsB=n,this.moments=i,this.cubes=a}quantize(e,t){this.constructHistogram(e),this.computeMoments();const r=this.createBoxes(t);return this.createResult(r.resultCount)}constructHistogram(e){this.weights=Array.from({length:Xn}).fill(0),this.momentsR=Array.from({length:Xn}).fill(0),this.momentsG=Array.from({length:Xn}).fill(0),this.momentsB=Array.from({length:Xn}).fill(0),this.moments=Array.from({length:Xn}).fill(0);const t=Vn.quantize(e);for(const[r,n]of t.entries()){const e=hn(r),t=fn(r),i=pn(r),a=3,s=1+(e>>a),o=1+(t>>a),l=1+(i>>a),u=this.getIndex(s,o,l);this.weights[u]=(this.weights[u]??0)+n,this.momentsR[u]+=n*e,this.momentsG[u]+=n*t,this.momentsB[u]+=n*i,this.moments[u]+=n*(e*e+t*t+i*i)}}computeMoments(){for(let e=1;e<$n;e++){const t=Array.from({length:$n}).fill(0),r=Array.from({length:$n}).fill(0),n=Array.from({length:$n}).fill(0),i=Array.from({length:$n}).fill(0),a=Array.from({length:$n}).fill(0);for(let s=1;s<$n;s++){let o=0,l=0,u=0,c=0,d=0;for(let h=1;h<$n;h++){const f=this.getIndex(e,s,h);o+=this.weights[f],l+=this.momentsR[f],u+=this.momentsG[f],c+=this.momentsB[f],d+=this.moments[f],t[h]+=o,r[h]+=l,n[h]+=u,i[h]+=c,a[h]+=d;const p=this.getIndex(e-1,s,h);this.weights[f]=this.weights[p]+t[h],this.momentsR[f]=this.momentsR[p]+r[h],this.momentsG[f]=this.momentsG[p]+n[h],this.momentsB[f]=this.momentsB[p]+i[h],this.moments[f]=this.moments[p]+a[h]}}}}createBoxes(e){this.cubes=Array.from({length:e}).fill(0).map((()=>new Zn));const t=Array.from({length:e}).fill(0);this.cubes[0].r0=0,this.cubes[0].g0=0,this.cubes[0].b0=0,this.cubes[0].r1=32,this.cubes[0].g1=32,this.cubes[0].b1=32;let r=e,n=0;for(let i=1;i<e;i++){this.cut(this.cubes[n],this.cubes[i])?(t[n]=this.cubes[n].vol>1?this.variance(this.cubes[n]):0,t[i]=this.cubes[i].vol>1?this.variance(this.cubes[i]):0):(t[n]=0,i--),n=0;let e=t[0];for(let r=1;r<=i;r++)t[r]>e&&(e=t[r],n=r);if(e<=0){r=i+1;break}}return new Qn(e,r)}createResult(e){const t=[];for(let r=0;r<e;++r){const e=this.cubes[r],n=this.volume(e,this.weights);if(n>0){const r=255<<24|(255&Math.round(this.volume(e,this.momentsR)/n))<<16|(255&Math.round(this.volume(e,this.momentsG)/n))<<8|255&Math.round(this.volume(e,this.momentsB)/n);t.push(r)}}return t}variance(e){const t=this.volume(e,this.momentsR),r=this.volume(e,this.momentsG),n=this.volume(e,this.momentsB);return this.moments[this.getIndex(e.r1,e.g1,e.b1)]-this.moments[this.getIndex(e.r1,e.g1,e.b0)]-this.moments[this.getIndex(e.r1,e.g0,e.b1)]+this.moments[this.getIndex(e.r1,e.g0,e.b0)]-this.moments[this.getIndex(e.r0,e.g1,e.b1)]+this.moments[this.getIndex(e.r0,e.g1,e.b0)]+this.moments[this.getIndex(e.r0,e.g0,e.b1)]-this.moments[this.getIndex(e.r0,e.g0,e.b0)]-(t*t+r*r+n*n)/this.volume(e,this.weights)}cut(e,t){const r=this.volume(e,this.momentsR),n=this.volume(e,this.momentsG),i=this.volume(e,this.momentsB),a=this.volume(e,this.weights),s=this.maximize(e,qn,e.r0+1,e.r1,r,n,i,a),o=this.maximize(e,Wn,e.g0+1,e.g1,r,n,i,a),l=this.maximize(e,Yn,e.b0+1,e.b1,r,n,i,a);let u;const c=s.maximum,d=o.maximum,h=l.maximum;if(c>=d&&c>=h){if(s.cutLocation<0)return!1;u=qn}else u=d>=c&&d>=h?Wn:Yn;switch(t.r1=e.r1,t.g1=e.g1,t.b1=e.b1,u){case qn:e.r1=s.cutLocation,t.r0=e.r1,t.g0=e.g0,t.b0=e.b0;break;case Wn:e.g1=o.cutLocation,t.r0=e.r0,t.g0=e.g1,t.b0=e.b0;break;case Yn:e.b1=l.cutLocation,t.r0=e.r0,t.g0=e.g0,t.b0=e.b1;break;default:throw new Error("unexpected direction "+u)}return e.vol=(e.r1-e.r0)*(e.g1-e.g0)*(e.b1-e.b0),t.vol=(t.r1-t.r0)*(t.g1-t.g0)*(t.b1-t.b0),!0}maximize(e,t,r,n,i,a,s,o){const l=this.bottom(e,t,this.momentsR),u=this.bottom(e,t,this.momentsG),c=this.bottom(e,t,this.momentsB),d=this.bottom(e,t,this.weights);let h=0,f=-1,p=0,m=0,y=0,g=0;for(let v=r;v<n;v++){if(p=l+this.top(e,t,v,this.momentsR),m=u+this.top(e,t,v,this.momentsG),y=c+this.top(e,t,v,this.momentsB),g=d+this.top(e,t,v,this.weights),0===g)continue;let r=1*(p*p+m*m+y*y),n=1*g,_=r/n;p=i-p,m=a-m,y=s-y,g=o-g,0!==g&&(r=1*(p*p+m*m+y*y),n=1*g,_+=r/n,_>h&&(h=_,f=v))}return new Jn(f,h)}volume(e,t){return t[this.getIndex(e.r1,e.g1,e.b1)]-t[this.getIndex(e.r1,e.g1,e.b0)]-t[this.getIndex(e.r1,e.g0,e.b1)]+t[this.getIndex(e.r1,e.g0,e.b0)]-t[this.getIndex(e.r0,e.g1,e.b1)]+t[this.getIndex(e.r0,e.g1,e.b0)]+t[this.getIndex(e.r0,e.g0,e.b1)]-t[this.getIndex(e.r0,e.g0,e.b0)]}bottom(e,t,r){switch(t){case qn:return-r[this.getIndex(e.r0,e.g1,e.b1)]+r[this.getIndex(e.r0,e.g1,e.b0)]+r[this.getIndex(e.r0,e.g0,e.b1)]-r[this.getIndex(e.r0,e.g0,e.b0)];case Wn:return-r[this.getIndex(e.r1,e.g0,e.b1)]+r[this.getIndex(e.r1,e.g0,e.b0)]+r[this.getIndex(e.r0,e.g0,e.b1)]-r[this.getIndex(e.r0,e.g0,e.b0)];case Yn:return-r[this.getIndex(e.r1,e.g1,e.b0)]+r[this.getIndex(e.r1,e.g0,e.b0)]+r[this.getIndex(e.r0,e.g1,e.b0)]-r[this.getIndex(e.r0,e.g0,e.b0)];default:throw new Error("unexpected direction $direction")}}top(e,t,r,n){switch(t){case qn:return n[this.getIndex(r,e.g1,e.b1)]-n[this.getIndex(r,e.g1,e.b0)]-n[this.getIndex(r,e.g0,e.b1)]+n[this.getIndex(r,e.g0,e.b0)];case Wn:return n[this.getIndex(e.r1,r,e.b1)]-n[this.getIndex(e.r1,r,e.b0)]-n[this.getIndex(e.r0,r,e.b1)]+n[this.getIndex(e.r0,r,e.b0)];case Yn:return n[this.getIndex(e.r1,e.g1,r)]-n[this.getIndex(e.r1,e.g0,r)]-n[this.getIndex(e.r0,e.g1,r)]+n[this.getIndex(e.r0,e.g0,r)];default:throw new Error("unexpected direction $direction")}}getIndex(e,t,r){return(e<<10)+(e<<6)+e+(t<<5)+t+r}}class Zn{constructor(e=0,t=0,r=0,n=0,i=0,a=0,s=0){this.r0=e,this.r1=t,this.g0=r,this.g1=n,this.b0=i,this.b1=a,this.vol=s}}class Qn{constructor(e,t){this.requestedCount=e,this.resultCount=t}}class Jn{constructor(e,t){this.cutLocation=e,this.maximum=t}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{static quantize(e,t){const r=(new Kn).quantize(e,t);return zn.quantize(e,r,t)}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ti=class e{get primary(){return this.props.primary}get onPrimary(){return this.props.onPrimary}get primaryContainer(){return this.props.primaryContainer}get onPrimaryContainer(){return this.props.onPrimaryContainer}get secondary(){return this.props.secondary}get onSecondary(){return this.props.onSecondary}get secondaryContainer(){return this.props.secondaryContainer}get onSecondaryContainer(){return this.props.onSecondaryContainer}get tertiary(){return this.props.tertiary}get onTertiary(){return this.props.onTertiary}get tertiaryContainer(){return this.props.tertiaryContainer}get onTertiaryContainer(){return this.props.onTertiaryContainer}get error(){return this.props.error}get onError(){return this.props.onError}get errorContainer(){return this.props.errorContainer}get onErrorContainer(){return this.props.onErrorContainer}get background(){return this.props.background}get onBackground(){return this.props.onBackground}get surface(){return this.props.surface}get onSurface(){return this.props.onSurface}get surfaceVariant(){return this.props.surfaceVariant}get onSurfaceVariant(){return this.props.onSurfaceVariant}get outline(){return this.props.outline}get outlineVariant(){return this.props.outlineVariant}get shadow(){return this.props.shadow}get scrim(){return this.props.scrim}get inverseSurface(){return this.props.inverseSurface}get inverseOnSurface(){return this.props.inverseOnSurface}get inversePrimary(){return this.props.inversePrimary}static light(t){return e.lightFromCorePalette(jn.of(t))}static dark(t){return e.darkFromCorePalette(jn.of(t))}static lightContent(t){return e.lightFromCorePalette(jn.contentOf(t))}static darkContent(t){return e.darkFromCorePalette(jn.contentOf(t))}static lightFromCorePalette(t){return new e({primary:t.a1.tone(40),onPrimary:t.a1.tone(100),primaryContainer:t.a1.tone(90),onPrimaryContainer:t.a1.tone(10),secondary:t.a2.tone(40),onSecondary:t.a2.tone(100),secondaryContainer:t.a2.tone(90),onSecondaryContainer:t.a2.tone(10),tertiary:t.a3.tone(40),onTertiary:t.a3.tone(100),tertiaryContainer:t.a3.tone(90),onTertiaryContainer:t.a3.tone(10),error:t.error.tone(40),onError:t.error.tone(100),errorContainer:t.error.tone(90),onErrorContainer:t.error.tone(10),background:t.n1.tone(99),onBackground:t.n1.tone(10),surface:t.n1.tone(99),onSurface:t.n1.tone(10),surfaceVariant:t.n2.tone(90),onSurfaceVariant:t.n2.tone(30),outline:t.n2.tone(50),outlineVariant:t.n2.tone(80),shadow:t.n1.tone(0),scrim:t.n1.tone(0),inverseSurface:t.n1.tone(20),inverseOnSurface:t.n1.tone(95),inversePrimary:t.a1.tone(80)})}static darkFromCorePalette(t){return new e({primary:t.a1.tone(80),onPrimary:t.a1.tone(20),primaryContainer:t.a1.tone(30),onPrimaryContainer:t.a1.tone(90),secondary:t.a2.tone(80),onSecondary:t.a2.tone(20),secondaryContainer:t.a2.tone(30),onSecondaryContainer:t.a2.tone(90),tertiary:t.a3.tone(80),onTertiary:t.a3.tone(20),tertiaryContainer:t.a3.tone(30),onTertiaryContainer:t.a3.tone(90),error:t.error.tone(80),onError:t.error.tone(20),errorContainer:t.error.tone(30),onErrorContainer:t.error.tone(80),background:t.n1.tone(10),onBackground:t.n1.tone(90),surface:t.n1.tone(10),onSurface:t.n1.tone(90),surfaceVariant:t.n2.tone(30),onSurfaceVariant:t.n2.tone(80),outline:t.n2.tone(60),outlineVariant:t.n2.tone(30),shadow:t.n1.tone(0),scrim:t.n1.tone(0),inverseSurface:t.n1.tone(90),inverseOnSurface:t.n1.tone(20),inversePrimary:t.a1.tone(40)})}constructor(e){this.props=e}toJSON(){return{...this.props}}};
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri={desired:4,fallbackColorARGB:4282549748,filter:!0};function ni(e,t){return e.score>t.score?-1:e.score<t.score?1:0}class ii{constructor(){}static score(e,t){const{desired:r,fallbackColorARGB:n,filter:i}={...ri,...t},a=[],s=new Array(360).fill(0);let o=0;for(const[h,f]of e.entries()){const e=Sn.fromInt(h);a.push(e);s[Math.floor(e.hue)]+=f,o+=f}const l=new Array(360).fill(0);for(let h=0;h<360;h++){const e=s[h]/o;for(let t=h-14;t<h+16;t++){l[rn(t)]+=e}}const u=new Array;for(const h of a){const e=l[rn(Math.round(h.hue))];if(i&&(h.chroma<ii.CUTOFF_CHROMA||e<=ii.CUTOFF_EXCITED_PROPORTION))continue;const t=100*e*ii.WEIGHT_PROPORTION,r=h.chroma<ii.TARGET_CHROMA?ii.WEIGHT_CHROMA_BELOW:ii.WEIGHT_CHROMA_ABOVE,n=t+(h.chroma-ii.TARGET_CHROMA)*r;u.push({hct:h,score:n})}u.sort(ni);const c=[];for(let h=90;h>=15;h--){c.length=0;for(const{hct:e}of u){if(c.find((t=>an(e.hue,t.hue)<h))||c.push(e),c.length>=r)break}if(c.length>=r)break}const d=[];0===c.length&&d.push(n);for(const h of c)d.push(h.toInt());return d}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ai(e,t=[]){const r=jn.of(e);return{source:e,schemes:{light:ti.light(e),dark:ti.dark(e)},palettes:{primary:r.a1,secondary:r.a2,tertiary:r.a3,neutral:r.n1,neutralVariant:r.n2,error:r.error},customColors:t.map((t=>function(e,t){let r=t.value;const n=r,i=e;t.blend&&(r=An.harmonize(n,i));const a=jn.of(r),s=a.a1;return{color:t,value:r,light:{color:s.tone(40),onColor:s.tone(100),colorContainer:s.tone(90),onColorContainer:s.tone(10)},dark:{color:s.tone(80),onColor:s.tone(20),colorContainer:s.tone(30),onColorContainer:s.tone(90)}}}(e,t)))}}ii.TARGET_CHROMA=48,ii.WEIGHT_PROPORTION=.7,ii.WEIGHT_CHROMA_ABOVE=.3,ii.WEIGHT_CHROMA_BELOW=.1,ii.CUTOFF_CHROMA=5,ii.CUTOFF_EXCITED_PROPORTION=.01;const si=(e,t,r)=>{const n=e=>e.toString(16).padStart(2,"0");return`#${n(e)}${n(t)}${n(r)}`.toUpperCase()},oi=(e,t,r)=>{e/=255,t/=255,r/=255;const n=Math.max(e,t,r),i=Math.min(e,t,r),a=n-i;let s=0,o=0;const l=(n+i)/2;if(0!==a){switch(o=a/(1-Math.abs(2*l-1)),n){case e:s=(t-r)/a%6;break;case t:s=(r-e)/a+2;break;case r:s=(e-t)/a+4}s*=60,s<0&&(s+=360)}return{h:Math.round(s),s:Math.round(100*o),l:Math.round(100*l)}};
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function li(e){return e<0?-1:0===e?0:1}function ui(e,t,r){return(1-r)*e+r*t}function ci(e,t,r){return r<e?e:r>t?t:r}function di(e,t){return[e[0]*t[0][0]+e[1]*t[0][1]+e[2]*t[0][2],e[0]*t[1][0]+e[1]*t[1][1]+e[2]*t[1][2],e[0]*t[2][0]+e[1]*t[2][1]+e[2]*t[2][2]]}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi=[[.41233895,.35762064,.18051042],[.2126,.7152,.0722],[.01932141,.11916382,.95034478]],fi=[[3.2413774792388685,-1.5376652402851851,-.49885366846268053],[-.9691452513005321,1.8758853451067872,.04156585616912061],[.05562093689691305,-.20395524564742123,1.0571799111220335]],pi=[95.047,100,108.883];function mi(e,t,r){return(255<<24|(255&e)<<16|(255&t)<<8|255&r)>>>0}function yi(e){return mi(Ti(e[0]),Ti(e[1]),Ti(e[2]))}function gi(e){return e>>16&255}function vi(e){return e>>8&255}function _i(e){return 255&e}function bi(e){const t=function(e){return di([Ii(gi(e)),Ii(vi(e)),Ii(_i(e))],hi)}(e)[1];return 116*Ei(t/100)-16}function wi(e){return 100*function(e){const t=24389/27,r=e*e*e;return r>216/24389?r:(116*e-16)/t}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */((e+16)/116)}function xi(e){return 116*Ei(e/100)-16}function Ii(e){const t=e/255;return t<=.040449936?t/12.92*100:100*Math.pow((t+.055)/1.055,2.4)}function Ti(e){const t=e/100;let r=0;return r=t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,n=0,i=255,(a=Math.round(255*r))<n?n:a>i?i:a;var n,i,a}function Ei(e){const t=24389/27;return e>216/24389?Math.pow(e,1/3):(t*e+16)/116}class Si{static make(e=function(){return pi}(),t=200/Math.PI*wi(50)/100,r=50,n=2,i=!1){const a=e,s=.401288*a[0]+.650173*a[1]+-.051461*a[2],o=-.250268*a[0]+1.204414*a[1]+.045854*a[2],l=-.002079*a[0]+.048952*a[1]+.953127*a[2],u=.8+n/10,c=u>=.9?ui(.59,.69,10*(u-.9)):ui(.525,.59,10*(u-.8));let d=i?1:u*(1-1/3.6*Math.exp((-t-42)/92));d=d>1?1:d<0?0:d;const h=u,f=[d*(100/s)+1-d,d*(100/o)+1-d,d*(100/l)+1-d],p=1/(5*t+1),m=p*p*p*p,y=1-m,g=m*t+.1*y*y*Math.cbrt(5*t),v=wi(r)/e[1],_=1.48+Math.sqrt(v),b=.725/Math.pow(v,.2),w=b,x=[Math.pow(g*f[0]*s/100,.42),Math.pow(g*f[1]*o/100,.42),Math.pow(g*f[2]*l/100,.42)],I=[400*x[0]/(x[0]+27.13),400*x[1]/(x[1]+27.13),400*x[2]/(x[2]+27.13)];return new Si(v,(2*I[0]+I[1]+.05*I[2])*b,b,w,c,h,f,g,Math.pow(g,.25),_)}constructor(e,t,r,n,i,a,s,o,l,u){this.n=e,this.aw=t,this.nbb=r,this.ncb=n,this.c=i,this.nc=a,this.rgbD=s,this.fl=o,this.fLRoot=l,this.z=u}}Si.DEFAULT=Si.make();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ai{constructor(e,t,r,n,i,a,s,o,l){this.hue=e,this.chroma=t,this.j=r,this.q=n,this.m=i,this.s=a,this.jstar=s,this.astar=o,this.bstar=l}distance(e){const t=this.jstar-e.jstar,r=this.astar-e.astar,n=this.bstar-e.bstar,i=Math.sqrt(t*t+r*r+n*n);return 1.41*Math.pow(i,.63)}static fromInt(e){return Ai.fromIntInViewingConditions(e,Si.DEFAULT)}static fromIntInViewingConditions(e,t){const r=(65280&e)>>8,n=255&e,i=Ii((16711680&e)>>16),a=Ii(r),s=Ii(n),o=.41233895*i+.35762064*a+.18051042*s,l=.2126*i+.7152*a+.0722*s,u=.01932141*i+.11916382*a+.95034478*s,c=.401288*o+.650173*l-.051461*u,d=-.250268*o+1.204414*l+.045854*u,h=-.002079*o+.048952*l+.953127*u,f=t.rgbD[0]*c,p=t.rgbD[1]*d,m=t.rgbD[2]*h,y=Math.pow(t.fl*Math.abs(f)/100,.42),g=Math.pow(t.fl*Math.abs(p)/100,.42),v=Math.pow(t.fl*Math.abs(m)/100,.42),_=400*li(f)*y/(y+27.13),b=400*li(p)*g/(g+27.13),w=400*li(m)*v/(v+27.13),x=(11*_+-12*b+w)/11,I=(_+b-2*w)/9,T=(20*_+20*b+21*w)/20,E=(40*_+20*b+w)/20,S=180*Math.atan2(I,x)/Math.PI,A=S<0?S+360:S>=360?S-360:S,k=A*Math.PI/180,C=E*t.nbb,P=100*Math.pow(C/t.aw,t.c*t.z),R=4/t.c*Math.sqrt(P/100)*(t.aw+4)*t.fLRoot,M=A<20.14?A+360:A,L=5e4/13*(.25*(Math.cos(M*Math.PI/180+2)+3.8))*t.nc*t.ncb*Math.sqrt(x*x+I*I)/(T+.305),O=Math.pow(L,.9)*Math.pow(1.64-Math.pow(.29,t.n),.73),F=O*Math.sqrt(P/100),D=F*t.fLRoot,N=50*Math.sqrt(O*t.c/(t.aw+4)),B=(1+100*.007)*P/(1+.007*P),U=1/.0228*Math.log(1+.0228*D),j=U*Math.cos(k),G=U*Math.sin(k);return new Ai(A,F,P,R,D,N,B,j,G)}static fromJch(e,t,r){return Ai.fromJchInViewingConditions(e,t,r,Si.DEFAULT)}static fromJchInViewingConditions(e,t,r,n){const i=4/n.c*Math.sqrt(e/100)*(n.aw+4)*n.fLRoot,a=t*n.fLRoot,s=t/Math.sqrt(e/100),o=50*Math.sqrt(s*n.c/(n.aw+4)),l=r*Math.PI/180,u=(1+100*.007)*e/(1+.007*e),c=1/.0228*Math.log(1+.0228*a),d=c*Math.cos(l),h=c*Math.sin(l);return new Ai(r,t,e,i,a,o,u,d,h)}static fromUcs(e,t,r){return Ai.fromUcsInViewingConditions(e,t,r,Si.DEFAULT)}static fromUcsInViewingConditions(e,t,r,n){const i=t,a=r,s=Math.sqrt(i*i+a*a),o=(Math.exp(.0228*s)-1)/.0228/n.fLRoot;let l=Math.atan2(a,i)*(180/Math.PI);l<0&&(l+=360);const u=e/(1-.007*(e-100));return Ai.fromJchInViewingConditions(u,o,l,n)}toInt(){return this.viewed(Si.DEFAULT)}viewed(e){const t=0===this.chroma||0===this.j?0:this.chroma/Math.sqrt(this.j/100),r=Math.pow(t/Math.pow(1.64-Math.pow(.29,e.n),.73),1/.9),n=this.hue*Math.PI/180,i=.25*(Math.cos(n+2)+3.8),a=e.aw*Math.pow(this.j/100,1/e.c/e.z),s=i*(5e4/13)*e.nc*e.ncb,o=a/e.nbb,l=Math.sin(n),u=Math.cos(n),c=23*(o+.305)*r/(23*s+11*r*u+108*r*l),d=c*u,h=c*l,f=(460*o+451*d+288*h)/1403,p=(460*o-891*d-261*h)/1403,m=(460*o-220*d-6300*h)/1403,y=Math.max(0,27.13*Math.abs(f)/(400-Math.abs(f))),g=li(f)*(100/e.fl)*Math.pow(y,1/.42),v=Math.max(0,27.13*Math.abs(p)/(400-Math.abs(p))),_=li(p)*(100/e.fl)*Math.pow(v,1/.42),b=Math.max(0,27.13*Math.abs(m)/(400-Math.abs(m))),w=li(m)*(100/e.fl)*Math.pow(b,1/.42),x=g/e.rgbD[0],I=_/e.rgbD[1],T=w/e.rgbD[2],E=function(e,t,r){const n=fi,i=n[0][0]*e+n[0][1]*t+n[0][2]*r,a=n[1][0]*e+n[1][1]*t+n[1][2]*r,s=n[2][0]*e+n[2][1]*t+n[2][2]*r;return mi(Ti(i),Ti(a),Ti(s))}(1.86206786*x-1.01125463*I+.14918677*T,.38752654*x+.62144744*I-.00897398*T,-.0158415*x-.03412294*I+1.04996444*T);return E}static fromXyzInViewingConditions(e,t,r,n){const i=.401288*e+.650173*t-.051461*r,a=-.250268*e+1.204414*t+.045854*r,s=-.002079*e+.048952*t+.953127*r,o=n.rgbD[0]*i,l=n.rgbD[1]*a,u=n.rgbD[2]*s,c=Math.pow(n.fl*Math.abs(o)/100,.42),d=Math.pow(n.fl*Math.abs(l)/100,.42),h=Math.pow(n.fl*Math.abs(u)/100,.42),f=400*li(o)*c/(c+27.13),p=400*li(l)*d/(d+27.13),m=400*li(u)*h/(h+27.13),y=(11*f+-12*p+m)/11,g=(f+p-2*m)/9,v=(20*f+20*p+21*m)/20,_=(40*f+20*p+m)/20,b=180*Math.atan2(g,y)/Math.PI,w=b<0?b+360:b>=360?b-360:b,x=w*Math.PI/180,I=_*n.nbb,T=100*Math.pow(I/n.aw,n.c*n.z),E=4/n.c*Math.sqrt(T/100)*(n.aw+4)*n.fLRoot,S=w<20.14?w+360:w,A=5e4/13*(1/4*(Math.cos(S*Math.PI/180+2)+3.8))*n.nc*n.ncb*Math.sqrt(y*y+g*g)/(v+.305),k=Math.pow(A,.9)*Math.pow(1.64-Math.pow(.29,n.n),.73),C=k*Math.sqrt(T/100),P=C*n.fLRoot,R=50*Math.sqrt(k*n.c/(n.aw+4)),M=(1+100*.007)*T/(1+.007*T),L=Math.log(1+.0228*P)/.0228,O=L*Math.cos(x),F=L*Math.sin(x);return new Ai(w,C,T,E,P,R,M,O,F)}xyzInViewingConditions(e){const t=0===this.chroma||0===this.j?0:this.chroma/Math.sqrt(this.j/100),r=Math.pow(t/Math.pow(1.64-Math.pow(.29,e.n),.73),1/.9),n=this.hue*Math.PI/180,i=.25*(Math.cos(n+2)+3.8),a=e.aw*Math.pow(this.j/100,1/e.c/e.z),s=i*(5e4/13)*e.nc*e.ncb,o=a/e.nbb,l=Math.sin(n),u=Math.cos(n),c=23*(o+.305)*r/(23*s+11*r*u+108*r*l),d=c*u,h=c*l,f=(460*o+451*d+288*h)/1403,p=(460*o-891*d-261*h)/1403,m=(460*o-220*d-6300*h)/1403,y=Math.max(0,27.13*Math.abs(f)/(400-Math.abs(f))),g=li(f)*(100/e.fl)*Math.pow(y,1/.42),v=Math.max(0,27.13*Math.abs(p)/(400-Math.abs(p))),_=li(p)*(100/e.fl)*Math.pow(v,1/.42),b=Math.max(0,27.13*Math.abs(m)/(400-Math.abs(m))),w=li(m)*(100/e.fl)*Math.pow(b,1/.42),x=g/e.rgbD[0],I=_/e.rgbD[1],T=w/e.rgbD[2];return[1.86206786*x-1.01125463*I+.14918677*T,.38752654*x+.62144744*I-.00897398*T,-.0158415*x-.03412294*I+1.04996444*T]}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{static sanitizeRadians(e){return(e+8*Math.PI)%(2*Math.PI)}static trueDelinearized(e){const t=e/100;let r=0;return r=t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,255*r}static chromaticAdaptation(e){const t=Math.pow(Math.abs(e),.42);return 400*li(e)*t/(t+27.13)}static hueOf(e){const t=di(e,ki.SCALED_DISCOUNT_FROM_LINRGB),r=ki.chromaticAdaptation(t[0]),n=ki.chromaticAdaptation(t[1]),i=ki.chromaticAdaptation(t[2]),a=(11*r+-12*n+i)/11,s=(r+n-2*i)/9;return Math.atan2(s,a)}static areInCyclicOrder(e,t,r){return ki.sanitizeRadians(t-e)<ki.sanitizeRadians(r-e)}static intercept(e,t,r){return(t-e)/(r-e)}static lerpPoint(e,t,r){return[e[0]+(r[0]-e[0])*t,e[1]+(r[1]-e[1])*t,e[2]+(r[2]-e[2])*t]}static setCoordinate(e,t,r,n){const i=ki.intercept(e[n],t,r[n]);return ki.lerpPoint(e,i,r)}static isBounded(e){return 0<=e&&e<=100}static nthVertex(e,t){const r=ki.Y_FROM_LINRGB[0],n=ki.Y_FROM_LINRGB[1],i=ki.Y_FROM_LINRGB[2],a=t%4<=1?0:100,s=t%2==0?0:100;if(t<4){const t=a,o=s,l=(e-t*n-o*i)/r;return ki.isBounded(l)?[l,t,o]:[-1,-1,-1]}if(t<8){const t=a,o=s,l=(e-o*r-t*i)/n;return ki.isBounded(l)?[o,l,t]:[-1,-1,-1]}{const t=a,o=s,l=(e-t*r-o*n)/i;return ki.isBounded(l)?[t,o,l]:[-1,-1,-1]}}static bisectToSegment(e,t){let r=[-1,-1,-1],n=r,i=0,a=0,s=!1,o=!0;for(let l=0;l<12;l++){const u=ki.nthVertex(e,l);if(u[0]<0)continue;const c=ki.hueOf(u);s?(o||ki.areInCyclicOrder(i,c,a))&&(o=!1,ki.areInCyclicOrder(i,t,c)?(n=u,a=c):(r=u,i=c)):(r=u,n=u,i=c,a=c,s=!0)}return[r,n]}static midpoint(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2,(e[2]+t[2])/2]}static criticalPlaneBelow(e){return Math.floor(e-.5)}static criticalPlaneAbove(e){return Math.ceil(e-.5)}static bisectToLimit(e,t){const r=ki.bisectToSegment(e,t);let n=r[0],i=ki.hueOf(n),a=r[1];for(let s=0;s<3;s++)if(n[s]!==a[s]){let e=-1,r=255;n[s]<a[s]?(e=ki.criticalPlaneBelow(ki.trueDelinearized(n[s])),r=ki.criticalPlaneAbove(ki.trueDelinearized(a[s]))):(e=ki.criticalPlaneAbove(ki.trueDelinearized(n[s])),r=ki.criticalPlaneBelow(ki.trueDelinearized(a[s])));for(let o=0;o<8&&!(Math.abs(r-e)<=1);o++){const o=Math.floor((e+r)/2),l=ki.CRITICAL_PLANES[o],u=ki.setCoordinate(n,l,a,s),c=ki.hueOf(u);ki.areInCyclicOrder(i,t,c)?(a=u,r=o):(n=u,i=c,e=o)}}return ki.midpoint(n,a)}static inverseChromaticAdaptation(e){const t=Math.abs(e),r=Math.max(0,27.13*t/(400-t));return li(e)*Math.pow(r,1/.42)}static findResultByJ(e,t,r){let n=11*Math.sqrt(r);const i=Si.DEFAULT,a=1/Math.pow(1.64-Math.pow(.29,i.n),.73),s=.25*(Math.cos(e+2)+3.8)*(5e4/13)*i.nc*i.ncb,o=Math.sin(e),l=Math.cos(e);for(let u=0;u<5;u++){const e=n/100,c=0===t||0===n?0:t/Math.sqrt(e),d=Math.pow(c*a,1/.9),h=i.aw*Math.pow(e,1/i.c/i.z)/i.nbb,f=23*(h+.305)*d/(23*s+11*d*l+108*d*o),p=f*l,m=f*o,y=(460*h+451*p+288*m)/1403,g=(460*h-891*p-261*m)/1403,v=(460*h-220*p-6300*m)/1403,_=di([ki.inverseChromaticAdaptation(y),ki.inverseChromaticAdaptation(g),ki.inverseChromaticAdaptation(v)],ki.LINRGB_FROM_SCALED_DISCOUNT);if(_[0]<0||_[1]<0||_[2]<0)return 0;const b=ki.Y_FROM_LINRGB[0],w=ki.Y_FROM_LINRGB[1],x=ki.Y_FROM_LINRGB[2],I=b*_[0]+w*_[1]+x*_[2];if(I<=0)return 0;if(4===u||Math.abs(I-r)<.002)return _[0]>100.01||_[1]>100.01||_[2]>100.01?0:yi(_);n-=(I-r)*n/(2*I)}return 0}static solveToInt(e,t,r){if(t<1e-4||r<1e-4||r>99.9999)return function(e){const t=Ti(wi(e));return mi(t,t,t)}(r);var n;n=e,(n%=360)<0&&(n+=360);const i=(e=n)/180*Math.PI,a=wi(r),s=ki.findResultByJ(i,t,a);if(0!==s)return s;return yi(ki.bisectToLimit(a,i))}static solveToCam(e,t,r){return Ai.fromInt(ki.solveToInt(e,t,r))}}ki.SCALED_DISCOUNT_FROM_LINRGB=[[.001200833568784504,.002389694492170889,.0002795742885861124],[.0005891086651375999,.0029785502573438758,.0003270666104008398],[.00010146692491640572,.0005364214359186694,.0032979401770712076]],ki.LINRGB_FROM_SCALED_DISCOUNT=[[1373.2198709594231,-1100.4251190754821,-7.278681089101213],[-271.815969077903,559.6580465940733,-32.46047482791194],[1.9622899599665666,-57.173814538844006,308.7233197812385]],ki.Y_FROM_LINRGB=[.2126,.7152,.0722],ki.CRITICAL_PLANES=[.015176349177441876,.045529047532325624,.07588174588720938,.10623444424209313,.13658714259697685,.16693984095186062,.19729253930674434,.2276452376616281,.2579979360165119,.28835063437139563,.3188300904430532,.350925934958123,.3848314933096426,.42057480301049466,.458183274052838,.4976837250274023,.5391024159806381,.5824650784040898,.6277969426914107,.6751227633498623,.7244668422128921,.775853049866786,.829304845476233,.8848452951698498,.942497089126609,1.0022825574869039,1.0642236851973577,1.1283421258858297,1.1946592148522128,1.2631959812511864,1.3339731595349034,1.407011200216447,1.4823302800086415,1.5599503113873272,1.6398909516233677,1.7221716113234105,1.8068114625156377,1.8938294463134073,1.9832442801866852,2.075074464868551,2.1693382909216234,2.2660538449872063,2.36523901573795,2.4669114995532007,2.5710888059345764,2.6777882626779785,2.7870270208169257,2.898822059350997,3.0131901897720907,3.1301480604002863,3.2497121605402226,3.3718988244681087,3.4967242352587946,3.624204428461639,3.754355295633311,3.887192587735158,4.022731918402185,4.160988767090289,4.301978482107941,4.445716283538092,4.592217266055746,4.741496401646282,4.893568542229298,5.048448422192488,5.20615066083972,5.3666897647573375,5.5300801301023865,5.696336044816294,5.865471690767354,6.037501145825082,6.212438385869475,6.390297286737924,6.571091626112461,6.7548350853498045,6.941541251256611,7.131223617812143,7.323895587840543,7.5195704746346665,7.7182615035334345,7.919981813454504,8.124744458384042,8.332562408825165,8.543448553206703,8.757415699253682,8.974476575321063,9.194643831691977,9.417930041841839,9.644347703669503,9.873909240696694,10.106627003236781,10.342513269534024,10.58158024687427,10.8238400726681,11.069304815507364,11.317986476196008,11.569896988756009,11.825048221409341,12.083451977536606,12.345119996613247,12.610063955123938,12.878295467455942,13.149826086772048,13.42466730586372,13.702830557985108,13.984327217668513,14.269168601521828,14.55736596900856,14.848930523210871,15.143873411576273,15.44220572664832,15.743938506781891,16.04908273684337,16.35764934889634,16.66964922287304,16.985093187232053,17.30399201960269,17.62635644741625,17.95219714852476,18.281524751807332,18.614349837764564,18.95068293910138,19.290534541298456,19.633915083172692,19.98083495742689,20.331304511189067,20.685334046541502,21.042933821039977,21.404114048223256,21.76888489811322,22.137256497705877,22.50923893145328,22.884842241736916,23.264076429332462,23.6469514538663,24.033477234264016,24.42366364919083,24.817520537484558,25.21505769858089,25.61628489293138,26.021211842414342,26.429848230738664,26.842203703840827,27.258287870275353,27.678110301598522,28.10168053274597,28.529008062403893,28.96010235337422,29.39497283293396,29.83362889318845,30.276079891419332,30.722335150426627,31.172403958865512,31.62629557157785,32.08401920991837,32.54558406207592,33.010999283389665,33.4802739966603,33.953417292456834,34.430438229418264,34.911345834551085,35.39614910352207,35.88485700094671,36.37747846067349,36.87402238606382,37.37449765026789,37.87891309649659,38.38727753828926,38.89959975977785,39.41588851594697,39.93615253289054,40.460400508064545,40.98864111053629,41.520882981230194,42.05713473317016,42.597404951718396,43.141702194811224,43.6900349931913,44.24241185063697,44.798841244188324,45.35933162437017,45.92389141541209,46.49252901546552,47.065252796817916,47.64207110610409,48.22299226451468,48.808024568002054,49.3971762874833,49.9904556690408,50.587870934119984,51.189430279724725,51.79514187861014,52.40501387947288,53.0190544071392,53.637271562750364,54.259673423945976,54.88626804504493,55.517063457223934,56.15206766869424,56.79128866487574,57.43473440856916,58.08241284012621,58.734331877617365,59.39049941699807,60.05092333227251,60.715611475655585,61.38457167773311,62.057811747619894,62.7353394731159,63.417162620860914,64.10328893648692,64.79372614476921,65.48848194977529,66.18756403501224,66.89098006357258,67.59873767827808,68.31084450182222,69.02730813691093,69.74813616640164,70.47333615344107,71.20291564160104,71.93688215501312,72.67524319850172,73.41800625771542,74.16517879925733,74.9167682708136,75.67278210128072,76.43322770089146,77.1981124613393,77.96744375590167,78.74122893956174,79.51947534912904,80.30219030335869,81.08938110306934,81.88105503125999,82.67721935322541,83.4778813166706,84.28304815182372,85.09272707154808,85.90692527145302,86.72564993000343,87.54890820862819,88.3767072518277,89.2090541872801,90.04595612594655,90.88742016217518,91.73345337380438,92.58406282226491,93.43925555268066,94.29903859396902,95.16341895893969,96.03240364439274,96.9059996312159,97.78421388448044,98.6670533535366,99.55452497210776];
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ci{static from(e,t,r){return new Ci(ki.solveToInt(e,t,r))}static fromInt(e){return new Ci(e)}toInt(){return this.argb}get hue(){return this.internalHue}set hue(e){this.setInternalState(ki.solveToInt(e,this.internalChroma,this.internalTone))}get chroma(){return this.internalChroma}set chroma(e){this.setInternalState(ki.solveToInt(this.internalHue,e,this.internalTone))}get tone(){return this.internalTone}set tone(e){this.setInternalState(ki.solveToInt(this.internalHue,this.internalChroma,e))}constructor(e){this.argb=e;const t=Ai.fromInt(e);this.internalHue=t.hue,this.internalChroma=t.chroma,this.internalTone=bi(e),this.argb=e}setInternalState(e){const t=Ai.fromInt(e);this.internalHue=t.hue,this.internalChroma=t.chroma,this.internalTone=bi(e),this.argb=e}inViewingConditions(e){const t=Ai.fromInt(this.toInt()).xyzInViewingConditions(e),r=Ai.fromXyzInViewingConditions(t[0],t[1],t[2],Si.make());return Ci.from(r.hue,r.chroma,xi(t[1]))}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{static ratioOfTones(e,t){return e=ci(0,100,e),t=ci(0,100,t),Pi.ratioOfYs(wi(e),wi(t))}static ratioOfYs(e,t){const r=e>t?e:t;return(r+5)/((r===t?e:t)+5)}static lighter(e,t){if(e<0||e>100)return-1;const r=wi(e),n=t*(r+5)-5,i=Pi.ratioOfYs(n,r),a=Math.abs(i-t);if(i<t&&a>.04)return-1;const s=xi(n)+.4;return s<0||s>100?-1:s}static darker(e,t){if(e<0||e>100)return-1;const r=wi(e),n=(r+5)/t-5,i=Pi.ratioOfYs(r,n),a=Math.abs(i-t);if(i<t&&a>.04)return-1;const s=xi(n)-.4;return s<0||s>100?-1:s}static lighterUnsafe(e,t){const r=Pi.lighter(e,t);return r<0?100:r}static darkerUnsafe(e,t){const r=Pi.darker(e,t);return r<0?0:r}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{static isDisliked(e){const t=Math.round(e.hue)>=90&&Math.round(e.hue)<=111,r=Math.round(e.chroma)>16,n=Math.round(e.tone)<65;return t&&r&&n}static fixIfDisliked(e){return Ri.isDisliked(e)?Ci.from(e.hue,e.chroma,70):e}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{static fromPalette(e){return new Mi(e.name??"",e.palette,e.tone,e.isBackground??!1,e.background,e.secondBackground,e.contrastCurve,e.toneDeltaPair)}constructor(e,t,r,n,i,a,s,o){if(this.name=e,this.palette=t,this.tone=r,this.isBackground=n,this.background=i,this.secondBackground=a,this.contrastCurve=s,this.toneDeltaPair=o,this.hctCache=new Map,!i&&a)throw new Error(`Color ${e} has secondBackgrounddefined, but background is not defined.`);if(!i&&s)throw new Error(`Color ${e} has contrastCurvedefined, but background is not defined.`);if(i&&!s)throw new Error(`Color ${e} has backgrounddefined, but contrastCurve is not defined.`)}getArgb(e){return this.getHct(e).toInt()}getHct(e){const t=this.hctCache.get(e);if(null!=t)return t;const r=this.getTone(e),n=this.palette(e).getHct(r);return this.hctCache.size>4&&this.hctCache.clear(),this.hctCache.set(e,n),n}getTone(e){const t=e.contrastLevel<0;if(this.toneDeltaPair){const r=this.toneDeltaPair(e),n=r.roleA,i=r.roleB,a=r.delta,s=r.polarity,o=r.stayTogether,l=this.background(e).getTone(e),u="nearer"===s||"lighter"===s&&!e.isDark||"darker"===s&&e.isDark,c=u?n:i,d=u?i:n,h=this.name===c.name,f=e.isDark?1:-1,p=c.contrastCurve.getContrast(e.contrastLevel),m=d.contrastCurve.getContrast(e.contrastLevel),y=c.tone(e);let g=Pi.ratioOfTones(l,y)>=p?y:Mi.foregroundTone(l,p);const v=d.tone(e);let _=Pi.ratioOfTones(l,v)>=m?v:Mi.foregroundTone(l,m);return t&&(g=Mi.foregroundTone(l,p),_=Mi.foregroundTone(l,m)),(_-g)*f>=a||(_=ci(0,100,g+a*f),(_-g)*f>=a||(g=ci(0,100,_-a*f))),50<=g&&g<60?f>0?(g=60,_=Math.max(_,g+a*f)):(g=49,_=Math.min(_,g+a*f)):50<=_&&_<60&&(o?f>0?(g=60,_=Math.max(_,g+a*f)):(g=49,_=Math.min(_,g+a*f)):_=f>0?60:49),h?g:_}{let r=this.tone(e);if(null==this.background)return r;const n=this.background(e).getTone(e),i=this.contrastCurve.getContrast(e.contrastLevel);if(Pi.ratioOfTones(n,r)>=i||(r=Mi.foregroundTone(n,i)),t&&(r=Mi.foregroundTone(n,i)),this.isBackground&&50<=r&&r<60&&(r=Pi.ratioOfTones(49,n)>=i?49:60),this.secondBackground){const[t,n]=[this.background,this.secondBackground],[a,s]=[t(e).getTone(e),n(e).getTone(e)],[o,l]=[Math.max(a,s),Math.min(a,s)];if(Pi.ratioOfTones(o,r)>=i&&Pi.ratioOfTones(l,r)>=i)return r;const u=Pi.lighter(o,i),c=Pi.darker(l,i),d=[];-1!==u&&d.push(u),-1!==c&&d.push(c);return Mi.tonePrefersLightForeground(a)||Mi.tonePrefersLightForeground(s)?u<0?100:u:1===d.length?d[0]:c<0?0:c}return r}}static foregroundTone(e,t){const r=Pi.lighterUnsafe(e,t),n=Pi.darkerUnsafe(e,t),i=Pi.ratioOfTones(r,e),a=Pi.ratioOfTones(n,e);if(Mi.tonePrefersLightForeground(e)){const e=Math.abs(i-a)<.1&&i<t&&a<t;return i>=t||i>=a||e?r:n}return a>=t||a>=i?n:r}static tonePrefersLightForeground(e){return Math.round(e)<60}static toneAllowsLightForeground(e){return Math.round(e)<=49}static enableLightForeground(e){return Mi.tonePrefersLightForeground(e)&&!Mi.toneAllowsLightForeground(e)?49:e}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Li;!function(e){e[e.MONOCHROME=0]="MONOCHROME",e[e.NEUTRAL=1]="NEUTRAL",e[e.TONAL_SPOT=2]="TONAL_SPOT",e[e.VIBRANT=3]="VIBRANT",e[e.EXPRESSIVE=4]="EXPRESSIVE",e[e.FIDELITY=5]="FIDELITY",e[e.CONTENT=6]="CONTENT",e[e.RAINBOW=7]="RAINBOW",e[e.FRUIT_SALAD=8]="FRUIT_SALAD"}(Li||(Li={}));
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Oi{constructor(e,t,r,n){this.low=e,this.normal=t,this.medium=r,this.high=n}getContrast(e){return e<=-1?this.low:e<0?ui(this.low,this.normal,(e- -1)/1):e<.5?ui(this.normal,this.medium,(e-0)/.5):e<1?ui(this.medium,this.high,(e-.5)/.5):this.high}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,t,r,n,i){this.roleA=e,this.roleB=t,this.delta=r,this.polarity=n,this.stayTogether=i}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(e){return e.variant===Li.FIDELITY||e.variant===Li.CONTENT}function Ni(e){return e.variant===Li.MONOCHROME}function Bi(e,t){const r=e.inViewingConditions(function(e){return Si.make(void 0,void 0,e.isDark?30:80,void 0,void 0)}(t));return Mi.tonePrefersLightForeground(e.tone)&&!Mi.toneAllowsLightForeground(r.tone)?Mi.enableLightForeground(e.tone):Mi.enableLightForeground(r.tone)}class Ui{static highestSurface(e){return e.isDark?Ui.surfaceBright:Ui.surfaceDim}}Ui.contentAccentToneDelta=15,Ui.primaryPaletteKeyColor=Mi.fromPalette({name:"primary_palette_key_color",palette:e=>e.primaryPalette,tone:e=>e.primaryPalette.keyColor.tone}),Ui.secondaryPaletteKeyColor=Mi.fromPalette({name:"secondary_palette_key_color",palette:e=>e.secondaryPalette,tone:e=>e.secondaryPalette.keyColor.tone}),Ui.tertiaryPaletteKeyColor=Mi.fromPalette({name:"tertiary_palette_key_color",palette:e=>e.tertiaryPalette,tone:e=>e.tertiaryPalette.keyColor.tone}),Ui.neutralPaletteKeyColor=Mi.fromPalette({name:"neutral_palette_key_color",palette:e=>e.neutralPalette,tone:e=>e.neutralPalette.keyColor.tone}),Ui.neutralVariantPaletteKeyColor=Mi.fromPalette({name:"neutral_variant_palette_key_color",palette:e=>e.neutralVariantPalette,tone:e=>e.neutralVariantPalette.keyColor.tone}),Ui.background=Mi.fromPalette({name:"background",palette:e=>e.neutralPalette,tone:e=>e.isDark?6:98,isBackground:!0}),Ui.onBackground=Mi.fromPalette({name:"on_background",palette:e=>e.neutralPalette,tone:e=>e.isDark?90:10,background:e=>Ui.background,contrastCurve:new Oi(3,3,4.5,7)}),Ui.surface=Mi.fromPalette({name:"surface",palette:e=>e.neutralPalette,tone:e=>e.isDark?6:98,isBackground:!0}),Ui.surfaceDim=Mi.fromPalette({name:"surface_dim",palette:e=>e.neutralPalette,tone:e=>e.isDark?6:87,isBackground:!0}),Ui.surfaceBright=Mi.fromPalette({name:"surface_bright",palette:e=>e.neutralPalette,tone:e=>e.isDark?24:98,isBackground:!0}),Ui.surfaceContainerLowest=Mi.fromPalette({name:"surface_container_lowest",palette:e=>e.neutralPalette,tone:e=>e.isDark?4:100,isBackground:!0}),Ui.surfaceContainerLow=Mi.fromPalette({name:"surface_container_low",palette:e=>e.neutralPalette,tone:e=>e.isDark?10:96,isBackground:!0}),Ui.surfaceContainer=Mi.fromPalette({name:"surface_container",palette:e=>e.neutralPalette,tone:e=>e.isDark?12:94,isBackground:!0}),Ui.surfaceContainerHigh=Mi.fromPalette({name:"surface_container_high",palette:e=>e.neutralPalette,tone:e=>e.isDark?17:92,isBackground:!0}),Ui.surfaceContainerHighest=Mi.fromPalette({name:"surface_container_highest",palette:e=>e.neutralPalette,tone:e=>e.isDark?22:90,isBackground:!0}),Ui.onSurface=Mi.fromPalette({name:"on_surface",palette:e=>e.neutralPalette,tone:e=>e.isDark?90:10,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(4.5,7,11,21)}),Ui.surfaceVariant=Mi.fromPalette({name:"surface_variant",palette:e=>e.neutralVariantPalette,tone:e=>e.isDark?30:90,isBackground:!0}),Ui.onSurfaceVariant=Mi.fromPalette({name:"on_surface_variant",palette:e=>e.neutralVariantPalette,tone:e=>e.isDark?80:30,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(3,4.5,7,11)}),Ui.inverseSurface=Mi.fromPalette({name:"inverse_surface",palette:e=>e.neutralPalette,tone:e=>e.isDark?90:20}),Ui.inverseOnSurface=Mi.fromPalette({name:"inverse_on_surface",palette:e=>e.neutralPalette,tone:e=>e.isDark?20:95,background:e=>Ui.inverseSurface,contrastCurve:new Oi(4.5,7,11,21)}),Ui.outline=Mi.fromPalette({name:"outline",palette:e=>e.neutralVariantPalette,tone:e=>e.isDark?60:50,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(1.5,3,4.5,7)}),Ui.outlineVariant=Mi.fromPalette({name:"outline_variant",palette:e=>e.neutralVariantPalette,tone:e=>e.isDark?30:80,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(1,1,3,7)}),Ui.shadow=Mi.fromPalette({name:"shadow",palette:e=>e.neutralPalette,tone:e=>0}),Ui.scrim=Mi.fromPalette({name:"scrim",palette:e=>e.neutralPalette,tone:e=>0}),Ui.surfaceTint=Mi.fromPalette({name:"surface_tint",palette:e=>e.primaryPalette,tone:e=>e.isDark?80:40,isBackground:!0}),Ui.primary=Mi.fromPalette({name:"primary",palette:e=>e.primaryPalette,tone:e=>Ni(e)?e.isDark?100:0:e.isDark?80:40,isBackground:!0,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(3,4.5,7,11),toneDeltaPair:e=>new Fi(Ui.primaryContainer,Ui.primary,15,"nearer",!1)}),Ui.onPrimary=Mi.fromPalette({name:"on_primary",palette:e=>e.primaryPalette,tone:e=>Ni(e)?e.isDark?10:90:e.isDark?20:100,background:e=>Ui.primary,contrastCurve:new Oi(4.5,7,11,21)}),Ui.primaryContainer=Mi.fromPalette({name:"primary_container",palette:e=>e.primaryPalette,tone:e=>Di(e)?Bi(e.sourceColorHct,e):Ni(e)?e.isDark?85:25:e.isDark?30:90,isBackground:!0,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(1,1,3,7),toneDeltaPair:e=>new Fi(Ui.primaryContainer,Ui.primary,15,"nearer",!1)}),Ui.onPrimaryContainer=Mi.fromPalette({name:"on_primary_container",palette:e=>e.primaryPalette,tone:e=>Di(e)?Mi.foregroundTone(Ui.primaryContainer.tone(e),4.5):Ni(e)?e.isDark?0:100:e.isDark?90:10,background:e=>Ui.primaryContainer,contrastCurve:new Oi(4.5,7,11,21)}),Ui.inversePrimary=Mi.fromPalette({name:"inverse_primary",palette:e=>e.primaryPalette,tone:e=>e.isDark?40:80,background:e=>Ui.inverseSurface,contrastCurve:new Oi(3,4.5,7,11)}),Ui.secondary=Mi.fromPalette({name:"secondary",palette:e=>e.secondaryPalette,tone:e=>e.isDark?80:40,isBackground:!0,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(3,4.5,7,11),toneDeltaPair:e=>new Fi(Ui.secondaryContainer,Ui.secondary,15,"nearer",!1)}),Ui.onSecondary=Mi.fromPalette({name:"on_secondary",palette:e=>e.secondaryPalette,tone:e=>Ni(e)?e.isDark?10:100:e.isDark?20:100,background:e=>Ui.secondary,contrastCurve:new Oi(4.5,7,11,21)}),Ui.secondaryContainer=Mi.fromPalette({name:"secondary_container",palette:e=>e.secondaryPalette,tone:e=>{const t=e.isDark?30:90;if(Ni(e))return e.isDark?30:85;if(!Di(e))return t;let r=function(e,t,r,n){let i=r,a=Ci.from(e,t,r);if(a.chroma<t){let r=a.chroma;for(;a.chroma<t;){i+=n?-1:1;const s=Ci.from(e,t,i);if(r>s.chroma)break;if(Math.abs(s.chroma-t)<.4)break;Math.abs(s.chroma-t)<Math.abs(a.chroma-t)&&(a=s),r=Math.max(r,s.chroma)}}return i}(e.secondaryPalette.hue,e.secondaryPalette.chroma,t,!e.isDark);return r=Bi(e.secondaryPalette.getHct(r),e),r},isBackground:!0,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(1,1,3,7),toneDeltaPair:e=>new Fi(Ui.secondaryContainer,Ui.secondary,15,"nearer",!1)}),Ui.onSecondaryContainer=Mi.fromPalette({name:"on_secondary_container",palette:e=>e.secondaryPalette,tone:e=>Di(e)?Mi.foregroundTone(Ui.secondaryContainer.tone(e),4.5):e.isDark?90:10,background:e=>Ui.secondaryContainer,contrastCurve:new Oi(4.5,7,11,21)}),Ui.tertiary=Mi.fromPalette({name:"tertiary",palette:e=>e.tertiaryPalette,tone:e=>Ni(e)?e.isDark?90:25:e.isDark?80:40,isBackground:!0,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(3,4.5,7,11),toneDeltaPair:e=>new Fi(Ui.tertiaryContainer,Ui.tertiary,15,"nearer",!1)}),Ui.onTertiary=Mi.fromPalette({name:"on_tertiary",palette:e=>e.tertiaryPalette,tone:e=>Ni(e)?e.isDark?10:90:e.isDark?20:100,background:e=>Ui.tertiary,contrastCurve:new Oi(4.5,7,11,21)}),Ui.tertiaryContainer=Mi.fromPalette({name:"tertiary_container",palette:e=>e.tertiaryPalette,tone:e=>{if(Ni(e))return e.isDark?60:49;if(!Di(e))return e.isDark?30:90;const t=Bi(e.tertiaryPalette.getHct(e.sourceColorHct.tone),e),r=e.tertiaryPalette.getHct(t);return Ri.fixIfDisliked(r).tone},isBackground:!0,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(1,1,3,7),toneDeltaPair:e=>new Fi(Ui.tertiaryContainer,Ui.tertiary,15,"nearer",!1)}),Ui.onTertiaryContainer=Mi.fromPalette({name:"on_tertiary_container",palette:e=>e.tertiaryPalette,tone:e=>Ni(e)?e.isDark?0:100:Di(e)?Mi.foregroundTone(Ui.tertiaryContainer.tone(e),4.5):e.isDark?90:10,background:e=>Ui.tertiaryContainer,contrastCurve:new Oi(4.5,7,11,21)}),Ui.error=Mi.fromPalette({name:"error",palette:e=>e.errorPalette,tone:e=>e.isDark?80:40,isBackground:!0,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(3,4.5,7,11),toneDeltaPair:e=>new Fi(Ui.errorContainer,Ui.error,15,"nearer",!1)}),Ui.onError=Mi.fromPalette({name:"on_error",palette:e=>e.errorPalette,tone:e=>e.isDark?20:100,background:e=>Ui.error,contrastCurve:new Oi(4.5,7,11,21)}),Ui.errorContainer=Mi.fromPalette({name:"error_container",palette:e=>e.errorPalette,tone:e=>e.isDark?30:90,isBackground:!0,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(1,1,3,7),toneDeltaPair:e=>new Fi(Ui.errorContainer,Ui.error,15,"nearer",!1)}),Ui.onErrorContainer=Mi.fromPalette({name:"on_error_container",palette:e=>e.errorPalette,tone:e=>e.isDark?90:10,background:e=>Ui.errorContainer,contrastCurve:new Oi(4.5,7,11,21)}),Ui.primaryFixed=Mi.fromPalette({name:"primary_fixed",palette:e=>e.primaryPalette,tone:e=>Ni(e)?40:90,isBackground:!0,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(1,1,3,7),toneDeltaPair:e=>new Fi(Ui.primaryFixed,Ui.primaryFixedDim,10,"lighter",!0)}),Ui.primaryFixedDim=Mi.fromPalette({name:"primary_fixed_dim",palette:e=>e.primaryPalette,tone:e=>Ni(e)?30:80,isBackground:!0,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(1,1,3,7),toneDeltaPair:e=>new Fi(Ui.primaryFixed,Ui.primaryFixedDim,10,"lighter",!0)}),Ui.onPrimaryFixed=Mi.fromPalette({name:"on_primary_fixed",palette:e=>e.primaryPalette,tone:e=>Ni(e)?100:10,background:e=>Ui.primaryFixedDim,secondBackground:e=>Ui.primaryFixed,contrastCurve:new Oi(4.5,7,11,21)}),Ui.onPrimaryFixedVariant=Mi.fromPalette({name:"on_primary_fixed_variant",palette:e=>e.primaryPalette,tone:e=>Ni(e)?90:30,background:e=>Ui.primaryFixedDim,secondBackground:e=>Ui.primaryFixed,contrastCurve:new Oi(3,4.5,7,11)}),Ui.secondaryFixed=Mi.fromPalette({name:"secondary_fixed",palette:e=>e.secondaryPalette,tone:e=>Ni(e)?80:90,isBackground:!0,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(1,1,3,7),toneDeltaPair:e=>new Fi(Ui.secondaryFixed,Ui.secondaryFixedDim,10,"lighter",!0)}),Ui.secondaryFixedDim=Mi.fromPalette({name:"secondary_fixed_dim",palette:e=>e.secondaryPalette,tone:e=>Ni(e)?70:80,isBackground:!0,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(1,1,3,7),toneDeltaPair:e=>new Fi(Ui.secondaryFixed,Ui.secondaryFixedDim,10,"lighter",!0)}),Ui.onSecondaryFixed=Mi.fromPalette({name:"on_secondary_fixed",palette:e=>e.secondaryPalette,tone:e=>10,background:e=>Ui.secondaryFixedDim,secondBackground:e=>Ui.secondaryFixed,contrastCurve:new Oi(4.5,7,11,21)}),Ui.onSecondaryFixedVariant=Mi.fromPalette({name:"on_secondary_fixed_variant",palette:e=>e.secondaryPalette,tone:e=>Ni(e)?25:30,background:e=>Ui.secondaryFixedDim,secondBackground:e=>Ui.secondaryFixed,contrastCurve:new Oi(3,4.5,7,11)}),Ui.tertiaryFixed=Mi.fromPalette({name:"tertiary_fixed",palette:e=>e.tertiaryPalette,tone:e=>Ni(e)?40:90,isBackground:!0,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(1,1,3,7),toneDeltaPair:e=>new Fi(Ui.tertiaryFixed,Ui.tertiaryFixedDim,10,"lighter",!0)}),Ui.tertiaryFixedDim=Mi.fromPalette({name:"tertiary_fixed_dim",palette:e=>e.tertiaryPalette,tone:e=>Ni(e)?30:80,isBackground:!0,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(1,1,3,7),toneDeltaPair:e=>new Fi(Ui.tertiaryFixed,Ui.tertiaryFixedDim,10,"lighter",!0)}),Ui.onTertiaryFixed=Mi.fromPalette({name:"on_tertiary_fixed",palette:e=>e.tertiaryPalette,tone:e=>Ni(e)?100:10,background:e=>Ui.tertiaryFixedDim,secondBackground:e=>Ui.tertiaryFixed,contrastCurve:new Oi(4.5,7,11,21)}),Ui.onTertiaryFixedVariant=Mi.fromPalette({name:"on_tertiary_fixed_variant",palette:e=>e.tertiaryPalette,tone:e=>Ni(e)?90:30,background:e=>Ui.tertiaryFixedDim,secondBackground:e=>Ui.tertiaryFixed,contrastCurve:new Oi(3,4.5,7,11)});
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ji{static fromInt(e){const t=Ci.fromInt(e);return ji.fromHct(t)}static fromHct(e){return new ji(e.hue,e.chroma,e)}static fromHueAndChroma(e,t){return new ji(e,t,ji.createKeyColor(e,t))}constructor(e,t,r){this.hue=e,this.chroma=t,this.keyColor=r,this.cache=new Map}static createKeyColor(e,t){let r=Ci.from(e,t,50),n=Math.abs(r.chroma-t);for(let i=1;i<50;i+=1){if(Math.round(t)===Math.round(r.chroma))return r;const a=Ci.from(e,t,50+i),s=Math.abs(a.chroma-t);s<n&&(n=s,r=a);const o=Ci.from(e,t,50-i),l=Math.abs(o.chroma-t);l<n&&(n=l,r=o)}return r}tone(e){let t=this.cache.get(e);return void 0===t&&(t=Ci.from(this.hue,this.chroma,e).toInt(),this.cache.set(e,t)),t}getHct(e){return Ci.fromInt(this.tone(e))}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{static of(e){return new Gi(e,!1)}static contentOf(e){return new Gi(e,!0)}static fromColors(e){return Gi.createPaletteFromColors(!1,e)}static contentFromColors(e){return Gi.createPaletteFromColors(!0,e)}static createPaletteFromColors(e,t){const r=new Gi(t.primary,e);if(t.secondary){const n=new Gi(t.secondary,e);r.a2=n.a1}if(t.tertiary){const n=new Gi(t.tertiary,e);r.a3=n.a1}if(t.error){const n=new Gi(t.error,e);r.error=n.a1}if(t.neutral){const n=new Gi(t.neutral,e);r.n1=n.n1}if(t.neutralVariant){const n=new Gi(t.neutralVariant,e);r.n2=n.n2}return r}constructor(e,t){const r=Ci.fromInt(e),n=r.hue,i=r.chroma;t?(this.a1=ji.fromHueAndChroma(n,i),this.a2=ji.fromHueAndChroma(n,i/3),this.a3=ji.fromHueAndChroma(n+60,i/2),this.n1=ji.fromHueAndChroma(n,Math.min(i/12,4)),this.n2=ji.fromHueAndChroma(n,Math.min(i/6,8))):(this.a1=ji.fromHueAndChroma(n,Math.max(48,i)),this.a2=ji.fromHueAndChroma(n,16),this.a3=ji.fromHueAndChroma(n+60,24),this.n1=ji.fromHueAndChroma(n,4),this.n2=ji.fromHueAndChroma(n,8)),this.error=ji.fromHueAndChroma(25,84)}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{get primary(){return this.props.primary}get onPrimary(){return this.props.onPrimary}get primaryContainer(){return this.props.primaryContainer}get onPrimaryContainer(){return this.props.onPrimaryContainer}get secondary(){return this.props.secondary}get onSecondary(){return this.props.onSecondary}get secondaryContainer(){return this.props.secondaryContainer}get onSecondaryContainer(){return this.props.onSecondaryContainer}get tertiary(){return this.props.tertiary}get onTertiary(){return this.props.onTertiary}get tertiaryContainer(){return this.props.tertiaryContainer}get onTertiaryContainer(){return this.props.onTertiaryContainer}get error(){return this.props.error}get onError(){return this.props.onError}get errorContainer(){return this.props.errorContainer}get onErrorContainer(){return this.props.onErrorContainer}get background(){return this.props.background}get onBackground(){return this.props.onBackground}get surface(){return this.props.surface}get onSurface(){return this.props.onSurface}get surfaceVariant(){return this.props.surfaceVariant}get onSurfaceVariant(){return this.props.onSurfaceVariant}get outline(){return this.props.outline}get outlineVariant(){return this.props.outlineVariant}get shadow(){return this.props.shadow}get scrim(){return this.props.scrim}get inverseSurface(){return this.props.inverseSurface}get inverseOnSurface(){return this.props.inverseOnSurface}get inversePrimary(){return this.props.inversePrimary}static light(e){return zi.lightFromCorePalette(Gi.of(e))}static dark(e){return zi.darkFromCorePalette(Gi.of(e))}static lightContent(e){return zi.lightFromCorePalette(Gi.contentOf(e))}static darkContent(e){return zi.darkFromCorePalette(Gi.contentOf(e))}static lightFromCorePalette(e){return new zi({primary:e.a1.tone(40),onPrimary:e.a1.tone(100),primaryContainer:e.a1.tone(90),onPrimaryContainer:e.a1.tone(10),secondary:e.a2.tone(40),onSecondary:e.a2.tone(100),secondaryContainer:e.a2.tone(90),onSecondaryContainer:e.a2.tone(10),tertiary:e.a3.tone(40),onTertiary:e.a3.tone(100),tertiaryContainer:e.a3.tone(90),onTertiaryContainer:e.a3.tone(10),error:e.error.tone(40),onError:e.error.tone(100),errorContainer:e.error.tone(90),onErrorContainer:e.error.tone(10),background:e.n1.tone(99),onBackground:e.n1.tone(10),surface:e.n1.tone(99),onSurface:e.n1.tone(10),surfaceVariant:e.n2.tone(90),onSurfaceVariant:e.n2.tone(30),outline:e.n2.tone(50),outlineVariant:e.n2.tone(80),shadow:e.n1.tone(0),scrim:e.n1.tone(0),inverseSurface:e.n1.tone(20),inverseOnSurface:e.n1.tone(95),inversePrimary:e.a1.tone(80)})}static darkFromCorePalette(e){return new zi({primary:e.a1.tone(80),onPrimary:e.a1.tone(20),primaryContainer:e.a1.tone(30),onPrimaryContainer:e.a1.tone(90),secondary:e.a2.tone(80),onSecondary:e.a2.tone(20),secondaryContainer:e.a2.tone(30),onSecondaryContainer:e.a2.tone(90),tertiary:e.a3.tone(80),onTertiary:e.a3.tone(20),tertiaryContainer:e.a3.tone(30),onTertiaryContainer:e.a3.tone(90),error:e.error.tone(80),onError:e.error.tone(20),errorContainer:e.error.tone(30),onErrorContainer:e.error.tone(80),background:e.n1.tone(10),onBackground:e.n1.tone(90),surface:e.n1.tone(10),onSurface:e.n1.tone(90),surfaceVariant:e.n2.tone(30),onSurfaceVariant:e.n2.tone(80),outline:e.n2.tone(60),outlineVariant:e.n2.tone(30),shadow:e.n1.tone(0),scrim:e.n1.tone(0),inverseSurface:e.n1.tone(90),inverseOnSurface:e.n1.tone(20),inversePrimary:e.a1.tone(40)})}constructor(e){this.props=e}toJSON(){return{...this.props}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(e){return parseInt(e,16)}const Vi=(e,t={type:"rgb"})=>{const r=function(e){const t=3===(e=e.replace("#","")).length,r=6===e.length,n=8===e.length;if(!t&&!r&&!n)throw new Error("unexpected hex "+e);let i=0,a=0,s=0;return t?(i=Hi(e.slice(0,1).repeat(2)),a=Hi(e.slice(1,2).repeat(2)),s=Hi(e.slice(2,3).repeat(2))):r?(i=Hi(e.slice(0,2)),a=Hi(e.slice(2,4)),s=Hi(e.slice(4,6))):n&&(i=Hi(e.slice(2,4)),a=Hi(e.slice(4,6)),s=Hi(e.slice(6,8))),(255<<24|(255&i)<<16|(255&a)<<8|255&s)>>>0}(e),{type:n}=t,i={light:zi.light(r).toJSON(),dark:zi.dark(r).toJSON()},a=Gi.of(r);return Object.assign(i.light,{"surface-dim":a.n1.tone(87),"surface-bright":a.n1.tone(98),"surface-container-lowest":a.n1.tone(100),"surface-container-low":a.n1.tone(96),"surface-container":a.n1.tone(94),"surface-container-high":a.n1.tone(92),"surface-container-highest":a.n1.tone(90),"surface-tint-color":i.light.primary}),Object.assign(i.dark,{"surface-dim":a.n1.tone(6),"surface-bright":a.n1.tone(24),"surface-container-lowest":a.n1.tone(4),"surface-container-low":a.n1.tone(10),"surface-container":a.n1.tone(12),"surface-container-high":a.n1.tone(17),"surface-container-highest":a.n1.tone(22),"surface-tint-color":i.dark.primary}),((e,t)=>{for(const n in e)if(e.hasOwnProperty(n)){const i=e[n];for(const e in i)if(i.hasOwnProperty(e)){const n=i[e];if("number"==typeof n){const a={r:gi(r=n),g:vi(r),b:_i(r)};"rgb"===t?i[e]=a:"hsl"===t?i[e]=oi(a.r,a.g,a.b):"hex"===t&&(i[e]=si(a.r,a.g,a.b))}}}var r})(i,n),i},$i=e=>{const[r,n,i]=[...t(e)];return{r:r,g:n,b:i}},Xi=(e,t)=>{if(!e.startsWith("--"))throw new Error("Variable name must start with '--'");const r=document.body;getComputedStyle(r).getPropertyValue(e).trim()!==t&&r.style.setProperty(e,t)},qi=(e,t)=>{const n=r(),i="string"==typeof e?Vi(e):e;if(!i)throw new Error("Color data not found");const a=i[t],s={};!n.themeGlobalColor&&a&&(a.background="dark"===t?{r:16,g:16,b:20}:{r:239,g:239,b:239},a["surface-container"]="dark"===t?{r:24,g:24,b:28}:{r:255,g:255,b:255});for(const r in a){const e=a[r];if("object"==typeof e&&"r"in e&&"g"in e&&"b"in e){const t=si(e.r,e.g,e.b);s[`${r}-hex`]=t,s[r]=`${e.r}, ${e.g}, ${e.b}`,Xi(`--${r}`,`${e.r}, ${e.g}, ${e.b}`),Xi(`--${r}-hex`,t)}else console.error(`Invalid color data for key: ${r}`)}return s},Wi={default:{label:"default",name:"默认",color:"#fe7971"},orange:{label:"orange",name:"橙色",color:"#ff8c00"},blue:{label:"blue",name:"蓝色",color:"#3b5998"},pink:{label:"pink",name:"粉色",color:"#e91e63"},brown:{label:"brown",name:"棕色",color:"#795548"},indigo:{label:"indigo",name:"靛青色",color:"#3f51b5"},green:{label:"green",name:"绿色",color:"#2ecc71"},purple:{label:"purple",name:"紫色",color:"#9c27b0"},yellow:{label:"yellow",name:"黄色",color:"#FBC02D"},teal:{label:"teal",name:"青色",color:"#009688"},custom:{label:"custom",name:"自定义",color:""}},Yi=n({__name:"Provider",setup(e){const t=i(),L=r(),O=a(),F=s({}),D=o((()=>"auto"===L.themeMode?"dark"===O.value?_:null:"dark"===L.themeMode?_:null)),N=()=>{try{const e=(()=>{const e=D.value?"dark":"light";if(L.themeFollowCover&&t.songCoverTheme){const r=t.songCoverTheme;return r?qi(r,e):{}}return"custom"!==L.themeColorType?qi(Wi[L.themeColorType].color,e):qi(L.themeCustomColor,e)})();if(!e||0===Object.keys(e).length)return void(F.value={});F.value=L.themeGlobalColor?{common:{fontFamily:`${"default"===L.globalFont?"v-sans":L.globalFont}, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"`,primaryColor:`rgb(${e.primary})`,primaryColorHover:`rgba(${e.primary}, 0.78)`,primaryColorPressed:`rgba(${e.primary}, 0.26)`,primaryColorSuppl:`rgba(${e.primary}, 0.12)`,textColorBase:e.primary,textColor1:`rgb(${e.primary})`,textColor2:`rgba(${e.primary}, 0.82)`,textColor3:`rgba(${e.primary}, 0.52)`,bodyColor:`rgb(${e.background})`,cardColor:`rgb(${e["surface-container"]})`,tagColor:`rgb(${e["surface-container"]})`,modalColor:`rgb(${e["surface-container"]})`,popoverColor:`rgb(${e["surface-container"]})`,buttonColor2:`rgba(${e.primary}, 0.08)`,buttonColor2Hover:`rgba(${e.primary}, 0.12)`,buttonColor2Pressed:`rgba(${e.primary}, 0.08)`,iconColor:`rgb(${e.primary})`,iconColorHover:`rgba(${e.primary}, 0.475)`,closeIconColor:`rgba(${e.primary}, 0.58)`,hoverColor:`rgba(${e.primary}, 0.09)`,borderColor:`rgba(${e.primary}, 0.09)`,textColorDisabled:`rgba(${e.primary}, 0.3)`,placeholderColorDisabled:`rgba(${e.primary}, 0.3)`,iconColorDisabled:`rgba(${e.primary}, 0.3)`},Card:{borderColor:`rgba(${e.primary}, 0.09)`},Button:{textColorHover:`rgba(${e.primary}, 0.78)`,textColorFocus:`rgba(${e.primary}, 0.58)`,colorPrimary:`rgba(${e.primary}, 0.9)`,colorHoverPrimary:`rgb(${e.primary})`,colorPressedPrimary:`rgba(${e.primary}, 0.8)`,colorFocusPrimary:`rgb(${e.primary})`},Slider:{handleColor:`rgb(${e.primary})`,fillColor:`rgb(${e.primary})`,fillColorHover:`rgb(${e.primary})`,railColor:`rgba(${e.primary}, 0.2)`,railColorHover:`rgba(${e.primary}, 0.3)`},Switch:{railColorActive:`rgba(${e.primary}, 0.8)`},Input:{color:`rgba(${e.primary}, 0.1)`,colorFocus:`rgb(${e["surface-container"]})`,placeholderColor:`rgba(${e.primary}, 0.58)`,border:`1px solid rgba(${e.primary}, 0.1)`,clearColor:`rgba(${e.primary}, 0.38)`,clearColorHover:`rgba(${e.primary}, 0.48)`,clearColorPressed:`rgba(${e.primary}, 0.3)`},Icon:{color:`rgb(${e.primary})`},Empty:{textColor:`rgba(${e.primary}, 0.38)`},Divider:{color:`rgba(${e.primary}, 0.09)`},Dropdown:{dividerColor:`rgba(${e.primary}, 0.09)`},Layout:{siderBorderColor:`rgba(${e.primary}, 0.09)`},Tabs:{colorSegment:`rgba(${e.primary}, 0.08)`,tabColorSegment:`rgba(${e.primary}, 0.12)`},Drawer:{headerBorderBottom:`1px solid rgba(${e.primary}, 0.09)`,footerBorderTop:`1px solid rgba(${e.primary}, 0.09)`},Menu:{dividerColor:`rgba(${e.primary}, 0.09)`},Progress:{railColor:`rgba(${e.primary}, 0.16)`},Popover:{color:`rgb(${e["surface-container"]})`}}:{common:{fontFamily:`${"default"===L.globalFont?"v-sans":L.globalFont}, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"`,primaryColor:`rgb(${e.primary})`,primaryColorHover:`rgba(${e.primary}, 0.78)`,primaryColorPressed:`rgba(${e.primary}, 0.26)`,primaryColorSuppl:`rgba(${e.primary}, 0.12)`},Icon:{color:`rgb(${e.primary})`},Slider:{handleColor:`rgb(${e.primary})`,fillColor:`rgb(${e.primary})`,fillColorHover:`rgb(${e.primary})`,railColor:`rgba(${e.primary}, 0.2)`,railColorHover:`rgba(${e.primary}, 0.3)`},Popover:{color:`rgb(${e["surface-container"]})`}}}catch(e){F.value={},console.error("切换主题色出现错误：",e),window.$message.error("切换主题色出现错误，已使用默认配置")}},B=n({setup(){window.$loadingBar=k(),window.$notification=C(),window.$message=P(),window.$dialog=R(),window.$modal=M()},render:()=>b("div",{className:"main-tools"})});return l((()=>[L.themeColorType,L.themeFollowCover,L.themeGlobalColor,L.globalFont,t.songCoverTheme?.main,D.value]),(()=>N())),u((()=>L.themeCustomColor),(()=>{N()}),{debounce:500,maxWait:1e3}),c((()=>{N()})),(e,t)=>{const r=w,n=x,i=I,a=T,s=E,o=S,l=A;return d(),h(l,{locale:y(g),"date-locale":y(v),theme:y(D),"theme-overrides":y(F),abstract:"","inline-theme-disabled":"","preflight-style-disabled":""},{default:f((()=>[p(r),p(o,null,{default:f((()=>[p(s,null,{default:f((()=>[p(a,null,{default:f((()=>[p(i,{max:1,placement:"bottom"},{default:f((()=>[p(n,null,{default:f((()=>[m(e.$slots,"default"),p(y(B))])),_:3})])),_:3})])),_:3})])),_:3})])),_:3})])),_:3},8,["locale","date-locale","theme","theme-overrides"])}}}),Ki=B(n({__name:"PlayerSpectrum",props:{show:{type:Boolean},height:{},radius:{},color:{}},setup(e){const t=e,r=i(),n=s(null),a=s(!0),o=(e,t,r,n,i,a)=>{e.beginPath(),e.moveTo(t+a,r),e.lineTo(t+n-a,r),e.quadraticCurveTo(t+n,r,t+n,r+a),e.lineTo(t+n,r+i-a),e.quadraticCurveTo(t+n,r+i,t+n-a,r+i),e.lineTo(t+a,r+i),e.quadraticCurveTo(t,r+i,t,r+i-a),e.lineTo(t,r+a),e.quadraticCurveTo(t,r,t+a,r),e.closePath(),e.fill()},{pause:l,resume:u}=L((()=>{(e=>{if(!e)return;if(!a.value||!n.value)return;e=e.slice(10),n.value.width=document.body.clientWidth>=1600?1600:document.body.clientWidth,n.value.height=t.height||80;const i=n.value.getContext("2d"),s=n.value.width,l=n.value.height,u=r.spectrumsData.length/2.5,c=t.radius||2.5,d=s/u/2;if(i){i.clearRect(0,0,s,l);for(let r=0;r<u;r++){const n=e[r]/255*l,a=r*d+s/2,u=s/2-(r+1)*d,h=l-n;i.fillStyle=t.color||"#efefef",n>0&&(o(i,a,h,d-3,n,c),o(i,u,h,d-3,n,c))}}})(r.spectrumsData)}));return c((()=>{u()})),O((()=>{l()})),(e,t)=>(d(),F("div",{style:N({opacity:e.show?"0.6":"0.1"}),class:"player-spectrum"},[D("canvas",{ref_key:"canvasRef",ref:n,style:N({height:e.height+"px"}),class:"spectrum-line"},null,4)],4))}}),[["__scopeId","data-v-bb5bcafe"]]),Zi="undefined"!=typeof document;function Qi(e){return"object"==typeof e||"displayName"in e||"props"in e||"__vccOpts"in e}const Ji=Object.assign;function ea(e,t){const r={};for(const n in t){const i=t[n];r[n]=ra(i)?i.map(e):e(i)}return r}const ta=()=>{},ra=Array.isArray,na=/#/g,ia=/&/g,aa=/\//g,sa=/=/g,oa=/\?/g,la=/\+/g,ua=/%5B/g,ca=/%5D/g,da=/%5E/g,ha=/%60/g,fa=/%7B/g,pa=/%7C/g,ma=/%7D/g,ya=/%20/g;function ga(e){return encodeURI(""+e).replace(pa,"|").replace(ua,"[").replace(ca,"]")}function va(e){return ga(e).replace(la,"%2B").replace(ya,"+").replace(na,"%23").replace(ia,"%26").replace(ha,"`").replace(fa,"{").replace(ma,"}").replace(da,"^")}function _a(e){return null==e?"":function(e){return ga(e).replace(na,"%23").replace(oa,"%3F")}(e).replace(aa,"%2F")}function ba(e){try{return decodeURIComponent(""+e)}catch(t){}return""+e}const wa=/\/$/;function xa(e,t,r="/"){let n,i={},a="",s="";const o=t.indexOf("#");let l=t.indexOf("?");return o<l&&o>=0&&(l=-1),l>-1&&(n=t.slice(0,l),a=t.slice(l+1,o>-1?o:t.length),i=e(a)),o>-1&&(n=n||t.slice(0,o),s=t.slice(o,t.length)),n=function(e,t){if(e.startsWith("/"))return e;if(!e)return t;const r=t.split("/"),n=e.split("/"),i=n[n.length-1];".."!==i&&"."!==i||n.push("");let a,s,o=r.length-1;for(a=0;a<n.length;a++)if(s=n[a],"."!==s){if(".."!==s)break;o>1&&o--}return r.slice(0,o).join("/")+"/"+n.slice(a).join("/")}(null!=n?n:t,r),{fullPath:n+(a&&"?")+a+s,path:n,query:i,hash:ba(s)}}function Ia(e,t){return t&&e.toLowerCase().startsWith(t.toLowerCase())?e.slice(t.length)||"/":e}function Ta(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Ea(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!Sa(e[r],t[r]))return!1;return!0}function Sa(e,t){return ra(e)?Aa(e,t):ra(t)?Aa(t,e):e===t}function Aa(e,t){return ra(t)?e.length===t.length&&e.every(((e,r)=>e===t[r])):1===e.length&&e[0]===t}const ka={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Ca,Pa,Ra,Ma;function La(e){if(!e)if(Zi){const t=document.querySelector("base");e=(e=t&&t.getAttribute("href")||"/").replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return"/"!==e[0]&&"#"!==e[0]&&(e="/"+e),e.replace(wa,"")}(Pa=Ca||(Ca={})).pop="pop",Pa.push="push",(Ma=Ra||(Ra={})).back="back",Ma.forward="forward",Ma.unknown="";const Oa=/^[^#]+#/;function Fa(e,t){return e.replace(Oa,"#")+t}const Da=()=>({left:window.scrollX,top:window.scrollY});function Na(e){let t;if("el"in e){const r=e.el,n="string"==typeof r&&r.startsWith("#"),i="string"==typeof r?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!i)return;t=function(e,t){const r=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-r.left-(t.left||0),top:n.top-r.top-(t.top||0)}}(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(null!=t.left?t.left:window.scrollX,null!=t.top?t.top:window.scrollY)}function Ba(e,t){return(history.state?history.state.position-t:-1)+e}const Ua=new Map;function ja(e,t){const{pathname:r,search:n,hash:i}=t,a=e.indexOf("#");if(a>-1){let t=i.includes(e.slice(a))?e.slice(a).length:1,r=i.slice(t);return"/"!==r[0]&&(r="/"+r),Ia(r,"")}return Ia(r,e)+n+i}function Ga(e,t,r,n=!1,i=!1){return{back:e,current:t,forward:r,replaced:n,position:window.history.length,scroll:i?Da():null}}function za(e){const{history:t,location:r}=window,n={value:ja(e,r)},i={value:t.state};function a(n,a,s){const o=e.indexOf("#"),l=o>-1?(r.host&&document.querySelector("base")?e:e.slice(o))+n:location.protocol+"//"+location.host+e+n;try{t[s?"replaceState":"pushState"](a,"",l),i.value=a}catch(u){console.error(u),r[s?"replace":"assign"](l)}}return i.value||a(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0),{location:n,state:i,push:function(e,r){const s=Ji({},i.value,t.state,{forward:e,scroll:Da()});a(s.current,s,!0),a(e,Ji({},Ga(n.value,e,null),{position:s.position+1},r),!1),n.value=e},replace:function(e,r){a(e,Ji({},t.state,Ga(i.value.back,e,i.value.forward,!0),r,{position:i.value.position}),!0),n.value=e}}}function Ha(e){const t=za(e=La(e)),r=function(e,t,r,n){let i=[],a=[],s=null;const o=({state:a})=>{const o=ja(e,location),l=r.value,u=t.value;let c=0;if(a){if(r.value=o,t.value=a,s&&s===l)return void(s=null);c=u?a.position-u.position:0}else n(o);i.forEach((e=>{e(r.value,l,{delta:c,type:Ca.pop,direction:c?c>0?Ra.forward:Ra.back:Ra.unknown})}))};function l(){const{history:e}=window;e.state&&e.replaceState(Ji({},e.state,{scroll:Da()}),"")}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",l,{passive:!0}),{pauseListeners:function(){s=r.value},listen:function(e){i.push(e);const t=()=>{const t=i.indexOf(e);t>-1&&i.splice(t,1)};return a.push(t),t},destroy:function(){for(const e of a)e();a=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",l)}}}(e,t.state,t.location,t.replace);const n=Ji({location:"",base:e,go:function(e,t=!0){t||r.pauseListeners(),history.go(e)},createHref:Fa.bind(null,e)},t,r);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>t.state.value}),n}function Va(e){return"string"==typeof e||"symbol"==typeof e}const $a=Symbol("");var Xa,qa;function Wa(e,t){return Ji(new Error,{type:e,[$a]:!0},t)}function Ya(e,t){return e instanceof Error&&$a in e&&(null==t||!!(e.type&t))}(qa=Xa||(Xa={}))[qa.aborted=4]="aborted",qa[qa.cancelled=8]="cancelled",qa[qa.duplicated=16]="duplicated";const Ka="[^/]+?",Za={sensitive:!1,strict:!1,start:!0,end:!0},Qa=/[.+*?^${}()[\]/\\]/g;function Ja(e,t){let r=0;for(;r<e.length&&r<t.length;){const n=t[r]-e[r];if(n)return n;r++}return e.length<t.length?1===e.length&&80===e[0]?-1:1:e.length>t.length?1===t.length&&80===t[0]?1:-1:0}function es(e,t){let r=0;const n=e.score,i=t.score;for(;r<n.length&&r<i.length;){const e=Ja(n[r],i[r]);if(e)return e;r++}if(1===Math.abs(i.length-n.length)){if(ts(n))return 1;if(ts(i))return-1}return i.length-n.length}function ts(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const rs={type:0,value:""},ns=/[a-zA-Z0-9_]/;function is(e,t,r){const n=function(e,t){const r=Ji({},Za,t),n=[];let i=r.start?"^":"";const a=[];for(const l of e){const e=l.length?[]:[90];r.strict&&!l.length&&(i+="/");for(let t=0;t<l.length;t++){const n=l[t];let s=40+(r.sensitive?.25:0);if(0===n.type)t||(i+="/"),i+=n.value.replace(Qa,"\\$&"),s+=40;else if(1===n.type){const{value:e,repeatable:r,optional:u,regexp:c}=n;a.push({name:e,repeatable:r,optional:u});const d=c||Ka;if(d!==Ka){s+=10;try{new RegExp(`(${d})`)}catch(o){throw new Error(`Invalid custom RegExp for param "${e}" (${d}): `+o.message)}}let h=r?`((?:${d})(?:/(?:${d}))*)`:`(${d})`;t||(h=u&&l.length<2?`(?:/${h})`:"/"+h),u&&(h+="?"),i+=h,s+=20,u&&(s+=-8),r&&(s+=-20),".*"===d&&(s+=-50)}e.push(s)}n.push(e)}if(r.strict&&r.end){const e=n.length-1;n[e][n[e].length-1]+=.7000000000000001}r.strict||(i+="/?"),r.end?i+="$":r.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const s=new RegExp(i,r.sensitive?"":"i");return{re:s,score:n,keys:a,parse:function(e){const t=e.match(s),r={};if(!t)return null;for(let n=1;n<t.length;n++){const e=t[n]||"",i=a[n-1];r[i.name]=e&&i.repeatable?e.split("/"):e}return r},stringify:function(t){let r="",n=!1;for(const i of e){n&&r.endsWith("/")||(r+="/"),n=!1;for(const e of i)if(0===e.type)r+=e.value;else if(1===e.type){const{value:a,repeatable:s,optional:o}=e,l=a in t?t[a]:"";if(ra(l)&&!s)throw new Error(`Provided param "${a}" is an array but it is not repeatable (* or + modifiers)`);const u=ra(l)?l.join("/"):l;if(!u){if(!o)throw new Error(`Missing required param "${a}"`);i.length<2&&(r.endsWith("/")?r=r.slice(0,-1):n=!0)}r+=u}}return r||"/"}}}(function(e){if(!e)return[[]];if("/"===e)return[[rs]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(e){throw new Error(`ERR (${r})/"${u}": ${e}`)}let r=0,n=r;const i=[];let a;function s(){a&&i.push(a),a=[]}let o,l=0,u="",c="";function d(){u&&(0===r?a.push({type:0,value:u}):1===r||2===r||3===r?(a.length>1&&("*"===o||"+"===o)&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:u,regexp:c,repeatable:"*"===o||"+"===o,optional:"*"===o||"?"===o})):t("Invalid state to consume buffer"),u="")}function h(){u+=o}for(;l<e.length;)if(o=e[l++],"\\"!==o||2===r)switch(r){case 0:"/"===o?(u&&d(),s()):":"===o?(d(),r=1):h();break;case 4:h(),r=n;break;case 1:"("===o?r=2:ns.test(o)?h():(d(),r=0,"*"!==o&&"?"!==o&&"+"!==o&&l--);break;case 2:")"===o?"\\"==c[c.length-1]?c=c.slice(0,-1)+o:r=3:c+=o;break;case 3:d(),r=0,"*"!==o&&"?"!==o&&"+"!==o&&l--,c="";break;default:t("Unknown state")}else n=r,r=4;return 2===r&&t(`Unfinished custom RegExp for param "${u}"`),d(),s(),i}(e.path),r),i=Ji(n,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function as(e,t){const r=[],n=new Map;function i(e,r,n){const o=!n,l=os(e);l.aliasOf=n&&n.record;const u=ds(t,e),c=[l];if("alias"in e){const t="string"==typeof e.alias?[e.alias]:e.alias;for(const e of t)c.push(os(Ji({},l,{components:n?n.record.components:l.components,path:e,aliasOf:n?n.record:l})))}let d,h;for(const t of c){const{path:c}=t;if(r&&"/"!==c[0]){const e=r.record.path,n="/"===e[e.length-1]?"":"/";t.path=r.record.path+(c&&n+c)}if(d=is(t,r,u),n?n.alias.push(d):(h=h||d,h!==d&&h.alias.push(d),o&&e.name&&!us(d)&&a(e.name)),hs(d)&&s(d),l.children){const e=l.children;for(let t=0;t<e.length;t++)i(e[t],d,n&&n.children[t])}n=n||d}return h?()=>{a(h)}:ta}function a(e){if(Va(e)){const t=n.get(e);t&&(n.delete(e),r.splice(r.indexOf(t),1),t.children.forEach(a),t.alias.forEach(a))}else{const t=r.indexOf(e);t>-1&&(r.splice(t,1),e.record.name&&n.delete(e.record.name),e.children.forEach(a),e.alias.forEach(a))}}function s(e){const t=function(e,t){let r=0,n=t.length;for(;r!==n;){const i=r+n>>1;es(e,t[i])<0?n=i:r=i+1}const i=function(e){let t=e;for(;t=t.parent;)if(hs(t)&&0===es(e,t))return t;return}(e);i&&(n=t.lastIndexOf(i,n-1));return n}(e,r);r.splice(t,0,e),e.record.name&&!us(e)&&n.set(e.record.name,e)}return t=ds({strict:!1,end:!0,sensitive:!1},t),e.forEach((e=>i(e))),{addRoute:i,resolve:function(e,t){let i,a,s,o={};if("name"in e&&e.name){if(i=n.get(e.name),!i)throw Wa(1,{location:e});s=i.record.name,o=Ji(ss(t.params,i.keys.filter((e=>!e.optional)).concat(i.parent?i.parent.keys.filter((e=>e.optional)):[]).map((e=>e.name))),e.params&&ss(e.params,i.keys.map((e=>e.name)))),a=i.stringify(o)}else if(null!=e.path)a=e.path,i=r.find((e=>e.re.test(a))),i&&(o=i.parse(a),s=i.record.name);else{if(i=t.name?n.get(t.name):r.find((e=>e.re.test(t.path))),!i)throw Wa(1,{location:e,currentLocation:t});s=i.record.name,o=Ji({},t.params,e.params),a=i.stringify(o)}const l=[];let u=i;for(;u;)l.unshift(u.record),u=u.parent;return{name:s,path:a,params:o,matched:l,meta:cs(l)}},removeRoute:a,clearRoutes:function(){r.length=0,n.clear()},getRoutes:function(){return r},getRecordMatcher:function(e){return n.get(e)}}}function ss(e,t){const r={};for(const n of t)n in e&&(r[n]=e[n]);return r}function os(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:ls(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function ls(e){const t={},r=e.props||!1;if("component"in e)t.default=r;else for(const n in e.components)t[n]="object"==typeof r?r[n]:r;return t}function us(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function cs(e){return e.reduce(((e,t)=>Ji(e,t.meta)),{})}function ds(e,t){const r={};for(const n in e)r[n]=n in t?t[n]:e[n];return r}function hs({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function fs(e){const t={};if(""===e||"?"===e)return t;const r=("?"===e[0]?e.slice(1):e).split("&");for(let n=0;n<r.length;++n){const e=r[n].replace(la," "),i=e.indexOf("="),a=ba(i<0?e:e.slice(0,i)),s=i<0?null:ba(e.slice(i+1));if(a in t){let e=t[a];ra(e)||(e=t[a]=[e]),e.push(s)}else t[a]=s}return t}function ps(e){let t="";for(let r in e){const n=e[r];if(r=va(r).replace(sa,"%3D"),null==n){void 0!==n&&(t+=(t.length?"&":"")+r);continue}(ra(n)?n.map((e=>e&&va(e))):[n&&va(n)]).forEach((e=>{void 0!==e&&(t+=(t.length?"&":"")+r,null!=e&&(t+="="+e))}))}return t}function ms(e){const t={};for(const r in e){const n=e[r];void 0!==n&&(t[r]=ra(n)?n.map((e=>null==e?null:""+e)):null==n?n:""+n)}return t}const ys=Symbol(""),gs=Symbol(""),vs=Symbol(""),_s=Symbol(""),bs=Symbol("");function ws(){let e=[];return{add:function(t){return e.push(t),()=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)}},list:()=>e.slice(),reset:function(){e=[]}}}function xs(e,t,r){const n=()=>{e[t].delete(r)};H(n),V(n),$((()=>{e[t].add(r)})),e[t].add(r)}function Is(e){const t=G(ys,{}).value;t&&xs(t,"leaveGuards",e)}function Ts(e){const t=G(ys,{}).value;t&&xs(t,"updateGuards",e)}function Es(e,t,r,n,i,a=e=>e()){const s=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise(((o,l)=>{const u=e=>{var a;!1===e?l(Wa(4,{from:r,to:t})):e instanceof Error?l(e):"string"==typeof(a=e)||a&&"object"==typeof a?l(Wa(2,{from:t,to:e})):(s&&n.enterCallbacks[i]===s&&"function"==typeof e&&s.push(e),o())},c=a((()=>e.call(n&&n.instances[i],t,r,u)));let d=Promise.resolve(c);e.length<3&&(d=d.then(u)),d.catch((e=>l(e)))}))}function Ss(e,t,r,n,i=e=>e()){const a=[];for(const s of e)for(const e in s.components){let o=s.components[e];if("beforeRouteEnter"===t||s.instances[e])if(Qi(o)){const l=(o.__vccOpts||o)[t];l&&a.push(Es(l,r,n,s,e,i))}else{let l=o();a.push((()=>l.then((a=>{if(!a)throw new Error(`Couldn't resolve component "${e}" at "${s.path}"`);const o=(l=a).__esModule||"Module"===l[Symbol.toStringTag]||l.default&&Qi(l.default)?a.default:a;var l;s.mods[e]=a,s.components[e]=o;const u=(o.__vccOpts||o)[t];return u&&Es(u,r,n,s,e,i)()}))))}}return a}function As(e){const t=G(vs),r=G(_s),n=o((()=>{const r=y(e.to);return t.resolve(r)})),i=o((()=>{const{matched:e}=n.value,{length:t}=e,i=e[t-1],a=r.matched;if(!i||!a.length)return-1;const s=a.findIndex(Ta.bind(null,i));if(s>-1)return s;const o=Ps(e[t-2]);return t>1&&Ps(i)===o&&a[a.length-1].path!==o?a.findIndex(Ta.bind(null,e[t-2])):s})),a=o((()=>i.value>-1&&function(e,t){for(const r in t){const n=t[r],i=e[r];if("string"==typeof n){if(n!==i)return!1}else if(!ra(i)||i.length!==n.length||n.some(((e,t)=>e!==i[t])))return!1}return!0}(r.params,n.value.params))),s=o((()=>i.value>-1&&i.value===r.matched.length-1&&Ea(r.params,n.value.params)));return{route:n,href:o((()=>n.value.href)),isActive:a,isExactActive:s,navigate:function(r={}){if(function(e){if(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)return;if(e.defaultPrevented)return;if(void 0!==e.button&&0!==e.button)return;if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}e.preventDefault&&e.preventDefault();return!0}(r)){const r=t[y(e.replace)?"replace":"push"](y(e.to)).catch(ta);return e.viewTransition&&"undefined"!=typeof document&&"startViewTransition"in document&&document.startViewTransition((()=>r)),r}return Promise.resolve()}}}const ks=n({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:As,setup(e,{slots:t}){const r=X(As(e)),{options:n}=G(vs),i=o((()=>({[Rs(e.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[Rs(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive})));return()=>{const n=t.default&&(1===(a=t.default(r)).length?a[0]:a);var a;return e.custom?n:b("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:i.value},n)}}}),Cs=ks;function Ps(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Rs=(e,t,r)=>null!=e?e:null!=t?t:r;function Ms(e,t){if(!e)return null;const r=e(t);return 1===r.length?r[0]:r}const Ls=n({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:r}){const n=G(bs),i=o((()=>e.route||n.value)),a=G(gs,0),u=o((()=>{let e=y(a);const{matched:t}=i.value;let r;for(;(r=t[e])&&!r.components;)e++;return e})),c=o((()=>i.value.matched[u.value]));q(gs,o((()=>u.value+1))),q(ys,c),q(bs,i);const d=s();return l((()=>[d.value,c.value,e.name]),(([e,t,r],[n,i,a])=>{t&&(t.instances[r]=e,i&&i!==t&&e&&e===n&&(t.leaveGuards.size||(t.leaveGuards=i.leaveGuards),t.updateGuards.size||(t.updateGuards=i.updateGuards))),!e||!t||i&&Ta(t,i)&&n||(t.enterCallbacks[r]||[]).forEach((t=>t(e)))}),{flush:"post"}),()=>{const n=i.value,a=e.name,s=c.value,o=s&&s.components[a];if(!o)return Ms(r.default,{Component:o,route:n});const l=s.props[a],u=l?!0===l?n.params:"function"==typeof l?l(n):l:null,h=b(o,Ji({},u,t,{onVnodeUnmounted:e=>{e.component.isUnmounted&&(s.instances[a]=null)},ref:d}));return Ms(r.default,{Component:h,route:n})||h}}});function Os(){return G(vs)}const Fs=[{path:"",name:"home",component:()=>W((()=>import("./index-DhuJL4St.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]),import.meta.url)},{path:"/search",name:"search",component:()=>W((()=>import("./layout-BXwnruqK.js")),__vite__mapDeps([12,1,2,13]),import.meta.url),beforeEnter:(e,t,r)=>{e.query.keyword?r():r({path:"/403"})},redirect:"/search/songs",children:[{path:"songs",name:"search-songs",component:()=>W((()=>import("./songs-Ct62pufA.js")),__vite__mapDeps([14,1,2,15,16]),import.meta.url)},{path:"playlists",name:"search-playlists",component:()=>W((()=>import("./playlists-T6auUEt9.js")),__vite__mapDeps([17,1,2,3,4,5]),import.meta.url)},{path:"artists",name:"search-artists",component:()=>W((()=>import("./artists-D2DLSznN.js")),__vite__mapDeps([18,1,2,6,7]),import.meta.url)},{path:"albums",name:"search-albums",component:()=>W((()=>import("./albums-CNrdiKeI.js")),__vite__mapDeps([19,1,2,3,4,5]),import.meta.url)},{path:"videos",name:"search-videos",component:()=>W((()=>import("./videos-B28fkuvo.js")),__vite__mapDeps([20,1,2,3,4,5]),import.meta.url)},{path:"radios",name:"search-radios",component:()=>W((()=>import("./radios-B8VmoOxL.js")),__vite__mapDeps([21,1,2,3,4,5]),import.meta.url)}]},{path:"/discover",name:"discover",component:()=>W((()=>import("./layout-BKk2CmkW.js")),__vite__mapDeps([22,1,2,23]),import.meta.url),redirect:"/discover/playlists",children:[{path:"playlists",name:"discover-playlists",component:()=>W((()=>import("./playlists-Dxvm9Gq5.js")),__vite__mapDeps([24,3,1,2,4,5,25]),import.meta.url)},{path:"toplists",name:"discover-toplists",component:()=>W((()=>import("./toplists-CftNRZrA.js")),__vite__mapDeps([26,3,1,2,4,5,8,9,27]),import.meta.url)},{path:"artists",name:"discover-artists",component:()=>W((()=>import("./artists-BmYTG8r_.js")),__vite__mapDeps([28,6,1,2,7,29]),import.meta.url)},{path:"new",name:"discover-new",component:()=>W((()=>import("./new-BfRpdXuU.js")),__vite__mapDeps([30,15,1,2,16,3,4,5,31]),import.meta.url)}]},{path:"/artist",name:"artist",beforeEnter:(e,t,r)=>{e.query.id?r():r({path:"/403"})},component:()=>W((()=>import("./layout-C9Kq6xlB.js")),__vite__mapDeps([32,1,2,33]),import.meta.url),redirect:"/artist/songs",children:[{path:"songs",name:"artist-songs",component:()=>W((()=>import("./songs-DjeJrHWR.js")),__vite__mapDeps([34,15,1,2,16]),import.meta.url)},{path:"albums",name:"artist-albums",component:()=>W((()=>import("./albums-DqKz6Est.js")),__vite__mapDeps([35,3,1,2,4,5]),import.meta.url)},{path:"videos",name:"artist-videos",component:()=>W((()=>import("./videos-CyFPbfCZ.js")),__vite__mapDeps([36,3,1,2,4,5]),import.meta.url)}]},{path:"/video",name:"video",beforeEnter:(e,t,r)=>{e.query.id?r():r({path:"/403"})},component:()=>W((()=>import("./Video-CP9Le60l.js")),__vite__mapDeps([37,1,2,10,38]),import.meta.url)},{path:"/album",name:"album",beforeEnter:(e,t,r)=>{e.query.id?r():r({path:"/403"})},component:()=>W((()=>import("./album-g2ZdDyvD.js")),__vite__mapDeps([39,15,1,2,16,4,40]),import.meta.url)},{path:"/playlist",name:"playlist",beforeEnter:(e,t,r)=>{e.query.id?r():r({path:"/403"})},component:()=>W((()=>import("./playlist-CVgJnpU8.js")),__vite__mapDeps([41,15,1,2,16,42]),import.meta.url)},{path:"/radio",name:"radio",beforeEnter:(e,t,r)=>{e.query.id?r():r({path:"/403"})},component:()=>W((()=>import("./radio-C4xxn-VT.js")),__vite__mapDeps([43,15,1,2,16,44]),import.meta.url)},{path:"/radio-hot",name:"radio-hot",component:()=>W((()=>import("./hot-CS9HGzwm.js")),__vite__mapDeps([45,3,1,2,4,5,46]),import.meta.url)},{path:"/radio-type",name:"radio-type",beforeEnter:(e,t,r)=>{e.query.id&&e.query.name?r():r({path:"/403"})},component:()=>W((()=>import("./type-B59BXDw8.js")),__vite__mapDeps([47,3,1,2,4,5,48]),import.meta.url)},{path:"/like-songs",name:"like-songs",meta:{needLogin:!0},component:()=>W((()=>import("./liked-DPtdEVy5.js")),__vite__mapDeps([49,15,1,2,16,50]),import.meta.url)},{path:"/cloud",name:"cloud",meta:{needLogin:!0},component:()=>W((()=>import("./Cloud-BEo9e65N.js")),__vite__mapDeps([51,15,1,2,16,52]),import.meta.url)},{path:"/daily-songs",name:"daily-songs",meta:{needLogin:!0},component:()=>W((()=>import("./DailySongs-DByAlNLQ.js")),__vite__mapDeps([53,15,1,2,16,54]),import.meta.url)},{path:"/like",name:"like",meta:{needLogin:!0},component:()=>W((()=>import("./layout-yaUZVQUE.js")),__vite__mapDeps([55,1,2,56]),import.meta.url),redirect:"/like/playlists",children:[{path:"playlists",name:"like-playlists",component:()=>W((()=>import("./playlists-Bpr2H9rz.js")),__vite__mapDeps([57,3,1,2,4,5,58]),import.meta.url)},{path:"albums",name:"like-albums",component:()=>W((()=>import("./albums-BMglM_8E.js")),__vite__mapDeps([59,3,1,2,4,5]),import.meta.url)},{path:"artists",name:"like-artists",component:()=>W((()=>import("./artists-DddcLh5Y.js")),__vite__mapDeps([60,6,1,2,7]),import.meta.url)},{path:"videos",name:"like-videos",component:()=>W((()=>import("./videos-CPORgdqE.js")),__vite__mapDeps([61,3,1,2,4,5]),import.meta.url)},{path:"radios",name:"like-radios",component:()=>W((()=>import("./radios-C-uPeqFL.js")),__vite__mapDeps([62,3,1,2,4,5]),import.meta.url)}]},{path:"/local",name:"local",meta:{needApp:!0},component:()=>W((()=>import("./layout-PDfyViMd.js")),__vite__mapDeps([63,1,2,64]),import.meta.url),redirect:"/local/songs",children:[{path:"songs",name:"local-songs",component:()=>W((()=>import("./song-Dy61y4-V.js")),__vite__mapDeps([65,15,1,2,16]),import.meta.url)},{path:"artists",name:"local-artists",component:()=>W((()=>import("./artists-DlQqydYa.js")),__vite__mapDeps([66,15,1,2,16,67]),import.meta.url)},{path:"albums",name:"local-albums",component:()=>W((()=>import("./albums-bSf1WGQd.js")),__vite__mapDeps([68,15,1,2,16,69]),import.meta.url)}]},{path:"/history",name:"history",component:()=>W((()=>import("./History-DyKPdRab.js")),__vite__mapDeps([70,15,1,2,16,71]),import.meta.url)},{path:"/403",name:"403",component:()=>W((()=>import("./403-CWIDZH1A.js")),__vite__mapDeps([72,1,2]),import.meta.url)},{path:"/404",name:"404",component:()=>W((()=>import("./404-AuncBDQs.js")),__vite__mapDeps([73,1,2]),import.meta.url)},{path:"/500",name:"500",component:()=>W((()=>import("./500-DELy7uMe.js")),__vite__mapDeps([74,1,2]),import.meta.url)}],Ds=function(e){const t=as(e.routes,e),r=e.parseQuery||fs,n=e.stringifyQuery||ps,i=e.history,a=ws(),s=ws(),o=ws(),l=U(ka);let u=ka;Zi&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=ea.bind(null,(e=>""+e)),d=ea.bind(null,_a),h=ea.bind(null,ba);function f(e,a){if(a=Ji({},a||l.value),"string"==typeof e){const n=xa(r,e,a.path),s=t.resolve({path:n.path},a),o=i.createHref(n.fullPath);return Ji(n,s,{params:h(s.params),hash:ba(n.hash),redirectedFrom:void 0,href:o})}let s;if(null!=e.path)s=Ji({},e,{path:xa(r,e.path,a.path).path});else{const t=Ji({},e.params);for(const e in t)null==t[e]&&delete t[e];s=Ji({},e,{params:d(t)}),a.params=d(a.params)}const o=t.resolve(s,a),u=e.hash||"";o.params=c(h(o.params));const f=function(e,t){const r=t.query?e(t.query):"";return t.path+(r&&"?")+r+(t.hash||"")}(n,Ji({},e,{hash:(p=u,ga(p).replace(fa,"{").replace(ma,"}").replace(da,"^")),path:o.path}));var p;const m=i.createHref(f);return Ji({fullPath:f,hash:u,query:n===ps?ms(e.query):e.query||{}},o,{redirectedFrom:void 0,href:m})}function p(e){return"string"==typeof e?xa(r,e,l.value.path):Ji({},e)}function m(e,t){if(u!==e)return Wa(8,{from:t,to:e})}function g(e){return _(e)}function v(e){const t=e.matched[e.matched.length-1];if(t&&t.redirect){const{redirect:r}=t;let n="function"==typeof r?r(e):r;return"string"==typeof n&&(n=n.includes("?")||n.includes("#")?n=p(n):{path:n},n.params={}),Ji({query:e.query,hash:e.hash,params:null!=n.path?{}:e.params},n)}}function _(e,t){const r=u=f(e),i=l.value,a=e.state,s=e.force,o=!0===e.replace,c=v(r);if(c)return _(Ji(p(c),{state:"object"==typeof c?Ji({},a,c.state):a,force:s,replace:o}),t||r);const d=r;let h;return d.redirectedFrom=t,!s&&function(e,t,r){const n=t.matched.length-1,i=r.matched.length-1;return n>-1&&n===i&&Ta(t.matched[n],r.matched[i])&&Ea(t.params,r.params)&&e(t.query)===e(r.query)&&t.hash===r.hash}(n,i,r)&&(h=Wa(16,{to:d,from:i}),M(i,i,!0,!1)),(h?Promise.resolve(h):x(d,i)).catch((e=>Ya(e)?Ya(e,2)?e:R(e):P(e,d,i))).then((e=>{if(e){if(Ya(e,2))return _(Ji({replace:o},p(e.to),{state:"object"==typeof e.to?Ji({},a,e.to.state):a,force:s}),t||d)}else e=T(d,i,!0,o,a);return I(d,i,e),e}))}function b(e,t){const r=m(e,t);return r?Promise.reject(r):Promise.resolve()}function w(e){const t=F.values().next().value;return t&&"function"==typeof t.runWithContext?t.runWithContext(e):e()}function x(e,t){let r;const[n,i,o]=function(e,t){const r=[],n=[],i=[],a=Math.max(t.matched.length,e.matched.length);for(let s=0;s<a;s++){const a=t.matched[s];a&&(e.matched.find((e=>Ta(e,a)))?n.push(a):r.push(a));const o=e.matched[s];o&&(t.matched.find((e=>Ta(e,o)))||i.push(o))}return[r,n,i]}(e,t);r=Ss(n.reverse(),"beforeRouteLeave",e,t);for(const a of n)a.leaveGuards.forEach((n=>{r.push(Es(n,e,t))}));const l=b.bind(null,e,t);return r.push(l),N(r).then((()=>{r=[];for(const n of a.list())r.push(Es(n,e,t));return r.push(l),N(r)})).then((()=>{r=Ss(i,"beforeRouteUpdate",e,t);for(const n of i)n.updateGuards.forEach((n=>{r.push(Es(n,e,t))}));return r.push(l),N(r)})).then((()=>{r=[];for(const n of o)if(n.beforeEnter)if(ra(n.beforeEnter))for(const i of n.beforeEnter)r.push(Es(i,e,t));else r.push(Es(n.beforeEnter,e,t));return r.push(l),N(r)})).then((()=>(e.matched.forEach((e=>e.enterCallbacks={})),r=Ss(o,"beforeRouteEnter",e,t,w),r.push(l),N(r)))).then((()=>{r=[];for(const n of s.list())r.push(Es(n,e,t));return r.push(l),N(r)})).catch((e=>Ya(e,8)?e:Promise.reject(e)))}function I(e,t,r){o.list().forEach((n=>w((()=>n(e,t,r)))))}function T(e,t,r,n,a){const s=m(e,t);if(s)return s;const o=t===ka,u=Zi?history.state:{};r&&(n||o?i.replace(e.fullPath,Ji({scroll:o&&u&&u.scroll},a)):i.push(e.fullPath,a)),l.value=e,M(e,t,r,o),R()}let E;function S(){E||(E=i.listen(((e,t,r)=>{if(!D.listening)return;const n=f(e),a=v(n);if(a)return void _(Ji(a,{replace:!0,force:!0}),n).catch(ta);u=n;const s=l.value;Zi&&function(e,t){Ua.set(e,t)}(Ba(s.fullPath,r.delta),Da()),x(n,s).catch((e=>Ya(e,12)?e:Ya(e,2)?(_(Ji(p(e.to),{force:!0}),n).then((e=>{Ya(e,20)&&!r.delta&&r.type===Ca.pop&&i.go(-1,!1)})).catch(ta),Promise.reject()):(r.delta&&i.go(-r.delta,!1),P(e,n,s)))).then((e=>{(e=e||T(n,s,!1))&&(r.delta&&!Ya(e,8)?i.go(-r.delta,!1):r.type===Ca.pop&&Ya(e,20)&&i.go(-1,!1)),I(n,s,e)})).catch(ta)})))}let A,k=ws(),C=ws();function P(e,t,r){R(e);const n=C.list();return n.length?n.forEach((n=>n(e,t,r))):console.error(e),Promise.reject(e)}function R(e){return A||(A=!e,S(),k.list().forEach((([t,r])=>e?r(e):t())),k.reset()),e}function M(t,r,n,i){const{scrollBehavior:a}=e;if(!Zi||!a)return Promise.resolve();const s=!n&&function(e){const t=Ua.get(e);return Ua.delete(e),t}(Ba(t.fullPath,0))||(i||!n)&&history.state&&history.state.scroll||null;return z().then((()=>a(t,r,s))).then((e=>e&&Na(e))).catch((e=>P(e,t,r)))}const L=e=>i.go(e);let O;const F=new Set,D={currentRoute:l,listening:!0,addRoute:function(e,r){let n,i;return Va(e)?(n=t.getRecordMatcher(e),i=r):i=e,t.addRoute(i,n)},removeRoute:function(e){const r=t.getRecordMatcher(e);r&&t.removeRoute(r)},clearRoutes:t.clearRoutes,hasRoute:function(e){return!!t.getRecordMatcher(e)},getRoutes:function(){return t.getRoutes().map((e=>e.record))},resolve:f,options:e,push:g,replace:function(e){return g(Ji(p(e),{replace:!0}))},go:L,back:()=>L(-1),forward:()=>L(1),beforeEach:a.add,beforeResolve:s.add,afterEach:o.add,onError:C.add,isReady:function(){return A&&l.value!==ka?Promise.resolve():new Promise(((e,t)=>{k.add([e,t])}))},install(e){e.component("RouterLink",Cs),e.component("RouterView",Ls),e.config.globalProperties.$router=this,Object.defineProperty(e.config.globalProperties,"$route",{enumerable:!0,get:()=>y(l)}),Zi&&!O&&l.value===ka&&(O=!0,g(i.location).catch((e=>{})));const t={};for(const n in ka)Object.defineProperty(t,n,{get:()=>l.value[n],enumerable:!0});e.provide(vs,this),e.provide(_s,j(t)),e.provide(bs,l);const r=e.unmount;F.add(e),e.unmount=function(){F.delete(e),F.size<1&&(u=ka,E&&E(),E=null,l.value=ka,O=!1,A=!1),r()}}};function N(e){return e.reduce(((e,t)=>e.then((()=>w(t)))),Promise.resolve())}return D}({history:(Ns="./",(Ns=location.host?Ns||location.pathname+location.search:"").includes("#")||(Ns+="#"),Ha(Ns)),routes:Fs});var Ns;Ds.beforeEach(((e,t,r)=>{if(Y||e.path===t.path||window.$loadingBar.start(),e.meta.needLogin&&!K())return Y||window.$loadingBar.error(),window.$message.warning("请登录后使用"),void cd();e.meta.needApp&&!Y&&(window.$message.warning("该功能为客户端独占功能"),r("/403")),r()})),Ds.afterEach((()=>{window.$loadingBar.finish()}));const Bs={required:!0,message:"请填写必要信息",trigger:["blur"]},Us={required:!0,type:"number",message:"请输入数字",trigger:["input","blur"]},js={required:!0,type:"number",message:"请输入正确的手机号",trigger:["input","blur"],validator:(e,t)=>t?!!/^1(3\d|4[5-9]|5[0-35-9]|6[567]|7[0-8]|8\d|9[0-35-9])\d{8}$/.test(t)||new Error("请输入正确的手机号"):new Error("请输入手机号")},Gs={class:"login-phone"},zs=B(n({__name:"LoginPhone",emits:["saveLogin"],setup(e,{emit:t}){const r=t,n=s(null),i=s({country:86,phone:null,captcha:null}),a=o((()=>({country:{...Us,message:"请选择国家"},phone:86===i.value.country?{...js,key:"phone"}:{...Us,key:"phone",message:"请输入手机号"},captcha:{...Us,message:"请输入正确的验证码"}}))),l=s(60),u=s("获取验证码"),h=s(!1),m=s([]),g=async e=>{e.preventDefault(),await(n.value?.validate((e=>e),(e=>"phone"===e?.key))),h.value=!0;200===(await ae(i.value.phone,i.value.country)).code?(_(),window.$message.success("验证码发送成功")):(h.value=!1,window.$message.error("验证码发送失败，请重试"))},{pause:v,resume:_}=Z((()=>{l.value--,u.value=`${l.value} s`,l.value<=0&&(v(),l.value=60,u.value="重新获取",h.value=!1)}),1e3,{immediate:!1}),b=Q((async e=>{e.preventDefault(),await(n.value?.validate());if(200!==(await J(i.value.phone,i.value.captcha,i.value.country)).code)return void window.$message.error("验证码错误，请重试");const t=await ee(i.value.phone,i.value.captcha,i.value.country);200===t.code?t.cookie&&t.cookie.includes("MUSIC_U")?(t.cookie=t.cookie.replaceAll(" HTTPOnly",""),r("saveLogin",t,"phone")):window.$message.error("登录出错，请重试"):window.$message.error("登录失败，请重试")}),300);return c((()=>{(async()=>{try{const e=(await ne(ie,{storage:"localStorage",key:"countryListData",time:0})).data.map((e=>({type:"group",label:e.label,key:e.label,children:e.countryList.map((e=>({label:`${e.zh} (+${e.code})`,value:Number(e.code)})))})));m.value=e}catch(e){console.error("获取国家列表失败：",e),m.value=[{key:"86",label:"中国 (+86)",value:86}]}})()})),(e,t)=>{const r=se,s=oe,o=le,l=ue,c=ce,v=de;return d(),F("div",Gs,[p(v,{ref_key:"phoneFormRef",ref:n,model:y(i),rules:y(a),class:"phone-form"},{default:f((()=>[p(s,{label:"国家",path:"country"},{default:f((()=>[p(r,{value:y(i).country,"onUpdate:value":t[0]||(t[0]=e=>y(i).country=e),filterable:"",options:y(m)},null,8,["value","options"])])),_:1}),p(s,{label:"手机号",path:"phone"},{default:f((()=>[p(l,{value:y(i).phone,"onUpdate:value":t[1]||(t[1]=e=>y(i).phone=e),"show-button":!1,placeholder:"请输入手机号","passively-activated":"",clearable:""},{prefix:f((()=>[p(o,{name:"Phone",depth:3})])),_:1},8,["value"])])),_:1}),p(s,{label:"验证码",path:"captcha"},{default:f((()=>[p(l,{value:y(i).captcha,"onUpdate:value":t[2]||(t[2]=e=>y(i).captcha=e),"show-button":!1,disabled:null===y(i).phone,placeholder:"请输入短信验证码","passively-activated":"",clearable:""},{prefix:f((()=>[p(o,{name:"Password",depth:3})])),_:1},8,["value","disabled"]),p(c,{disabled:y(h),class:"send",type:"primary",onClick:g},{default:f((()=>[te(re(y(u)),1)])),_:1},8,["disabled"])])),_:1}),p(s,{"show-label":!1},{default:f((()=>[p(c,{class:"login",type:"primary",onClick:y(b)},{default:f((()=>t[3]||(t[3]=[te(" 登录 ")]))),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])])}}}),[["__scopeId","data-v-387e755a"]]),Hs=""+new URL("../images/avatar.jpg?assest",import.meta.url).href,Vs={class:"login-qrcode"},$s={class:"qr-img"},Xs={key:0,class:"login-data"},qs=B(n({__name:"LoginQRCode",props:{pause:{type:Boolean}},emits:["saveLogin"],setup(e,{emit:t}){const r=e,n=t,i={800:"二维码过期，即将重试",801:"请打开云音乐 APP 扫码登录",802:"扫描成功，请在客户端确认登录",803:"登录成功"},a=s(""),l=s(""),u=s(801),m=o((()=>i[u.value]||"遇到未知状态，请重试")),g=s(""),v=s(""),_=async()=>{try{b(),u.value=801,g.value="",v.value="";const e=await ye();a.value=`https://music.163.com/login?codekey=${e.data.unikey}`,l.value=e.data.unikey,w()}catch(e){b(),console.error("二维码获取失败：",e)}},{pause:b,resume:w}=Z((async()=>{if(!l.value||r.pause)return;const{code:e,cookie:t,nickname:i,avatarUrl:a}=await we(l.value);switch(e){case 800:u.value=800,_();break;case 801:u.value=801;break;case 802:u.value=802,g.value=i,v.value=a;break;case 803:u.value=803,b(),t&&t.includes("MUSIC_U")?n("saveLogin",{code:200,cookie:t},"qr"):(window.$message.error("登录出错，请重试"),_())}}),1e3,{immediate:!1});return c(_),O(b),(e,t)=>{const r=ge,n=ve,i=_e,s=be;return d(),F("div",Vs,[D("div",$s,[y(a)?(d(),F("div",{key:0,class:he(["qr",{success:802===y(u),error:800===y(u)}])},[p(r,{value:y(a),size:160,"icon-size":30,"icon-src":"/icons/favicon.png?assest","error-correction-level":"H"},null,8,["value"]),p(me,{name:"fade",mode:"out-in"},{default:f((()=>[y(g)?(d(),F("div",Xs,[p(n,{src:y(v).replace(/^http:/,"https:")+"?param=100y100",class:"cover","preview-disabled":"",onLoad:y(fe)},{placeholder:f((()=>t[0]||(t[0]=[D("div",{class:"cover-loading"},[D("img",{src:Hs,class:"loading-img",alt:"loading-img"})],-1)]))),_:1},8,["src","onLoad"]),p(i,null,{default:f((()=>[te(re(y(g)),1)])),_:1})])):pe("",!0)])),_:1})],2)):(d(),h(s,{key:1,class:"qr"}))]),p(i,{class:"tip",depth:"3"},{default:f((()=>[te(re(y(m)),1)])),_:1})])}}}),[["__scopeId","data-v-dc330841"]]),Ws=""+new URL("../icons/favicon.png?assest",import.meta.url).href,Ys={class:"login-uid"},Ks=n({__name:"LoginUID",emits:["close","saveLogin"],setup(e,{emit:t}){const r=t,n=s(),i=s(null),a=async()=>{if(n.value){i.value=window.$message.loading("正在尝试登录",{duration:0});try{const e=await Ie(n.value);window.$message.success("登录成功"),r("saveLogin",e,"uid"),r("close")}catch(e){window.$message.error("登录失败，请重试"),console.error("UID 登录出错：",e)}finally{i.value?.destroy(),i.value=null}}else window.$message.warning("请输入 UID")};return(e,t)=>{const r=le,s=Te,o=Ee,l=ue,u=ce;return d(),F("div",Ys,[p(o,{bordered:!1,title:"如何获取 UID"},{icon:f((()=>[p(r,{name:"Help"})])),default:f((()=>[t[2]||(t[2]=te(" 可前往 ")),p(s,{href:"https://music.163.com/",target:"_blank"},{default:f((()=>t[1]||(t[1]=[te("网易云音乐")]))),_:1}),t[3]||(t[3]=te(" 官网登录并前往个人中心，即可从地址栏获取到 UID，也可在客户端分享链接中获取 UID。 "))])),_:1}),p(l,{value:y(n),"onUpdate:value":t[0]||(t[0]=e=>xe(n)?n.value=e:null),"show-button":!1,placeholder:"请输入 UID"},null,8,["value"]),p(u,{loading:!!y(i),type:"primary",onClick:a},{default:f((()=>t[4]||(t[4]=[te("登录")]))),_:1},8,["loading"])])}}}),Zs=B(Ks,[["__scopeId","data-v-aa2b1405"]]),Qs={class:"login-cookie"},Js=B(n({__name:"LoginCookie",emits:["close","saveLogin"],setup(e,{emit:t}){const r=t,n=s(),i=()=>{window.$dialog.info({title:"使用前告知",content:"请知悉，该功能仍旧无法确保账号的安全性！请自行决定是否使用！如遇打开窗口后页面出现白屏或者无法点击等情况，请关闭后再试。在登录完成后，请点击菜单栏中的 “登录完成” 按钮以完成登录（ 通常位于窗口的左上角，macOS 位于顶部的全局菜单栏中 ）",positiveText:"我已了解",negativeText:"取消",onPositiveClick:()=>window.electron.ipcRenderer.send("open-login-web")})},a=async()=>{if(n.value)if(n.value=n.value.trim(),n.value.endsWith(";"),n.value.includes("MUSIC_U")&&n.value.endsWith(";"))try{window.$message.success("登录成功"),r("saveLogin",{code:200,cookie:n.value},"cookie"),r("close")}catch(e){window.$message.error("登录失败，请重试"),console.error("Cookie 登录出错：",e)}else window.$message.warning("请输入有效的 Cookie");else window.$message.warning("请输入 Cookie")};return c((()=>{Y&&window.electron.ipcRenderer.on("send-cookies",((e,t)=>{t&&(n.value=t,a())}))})),(e,t)=>{const r=le,s=Te,o=Ee,l=Se,u=ce,c=Ae;return d(),F("div",Qs,[p(o,{bordered:!1,title:"如何获取 Cookie"},{icon:f((()=>[p(r,{name:"Help"})])),default:f((()=>[t[2]||(t[2]=te(" 可在官方的 ")),p(s,{href:"https://music.163.com/",target:"_blank"},{default:f((()=>t[1]||(t[1]=[te("网页端")]))),_:1}),t[3]||(t[3]=te(" 或点击下方的自动获取，只需要 Cookie 中的 ")),t[4]||(t[4]=D("code",null,"MUSIC_U",-1)),t[5]||(t[5]=te(" 字段即可，例如： ")),t[6]||(t[6]=D("code",null,"MUSIC_U=00C7...;",-1)),t[7]||(t[7]=D("br",null,null,-1)),t[8]||(t[8]=te("请注意：必须以 ")),t[9]||(t[9]=D("code",null,";",-1)),t[10]||(t[10]=te(" 结束 "))])),_:1}),p(l,{value:y(n),"onUpdate:value":t[0]||(t[0]=e=>xe(n)?n.value=e:null),autosize:{minRows:3,maxRows:6},type:"textarea",placeholder:"请输入 Cookie"},null,8,["value"]),p(c,{class:"menu"},{default:f((()=>[y(Y)?(d(),h(u,{key:0,type:"primary",onClick:i},{default:f((()=>t[11]||(t[11]=[te("自动获取")]))),_:1})):pe("",!0),p(u,{type:"primary",onClick:a},{default:f((()=>t[12]||(t[12]=[te("登录")]))),_:1})])),_:1})])}}}),[["__scopeId","data-v-fa23d307"]]),eo={class:"login"},to=B(n({__name:"Login",emits:["close"],setup(e,{emit:t}){const r=t,n=ke(),i=s(!1),a=async(e,t="qr")=>{e&&(200===e.code?(r("close"),n.userLoginStatus=!0,n.loginType=t,window.$message.success("登录成功"),"uid"!==t&&Re(e.cookie),localStorage.setItem("lastLoginTime",Date.now().toString()),"uid"!==t?await Me():await Le(e?.profile)):window.$message.error(e.msg??e.message??"账号或密码错误，请重试"))},o=(e="uid")=>{i.value=!0;const t=window.$modal.create({title:"uid"===e?"UID 登录":"Cookie 登录",preset:"card",transformOrigin:"center",style:{width:"400px"},content:()=>b("uid"===e?Zs:Js,{onClose:()=>t.destroy(),onSaveLogin:a}),onClose:()=>{i.value=!1,t.destroy()}})};return Ce((()=>{n.userLoginStatus&&(window.$message.warning("已登录，请勿再次操作"),r("close"))})),(e,t)=>{const n=qs,s=Oe,l=zs,u=Pe,c=ce,h=Fe,m=Ae,g=le;return d(),F("div",eo,[t[6]||(t[6]=D("img",{src:Ws,alt:"logo",class:"logo"},null,-1)),p(u,{class:"login-tabs","default-value":"login-qr",type:"segment",animated:""},{default:f((()=>[p(s,{name:"login-qr",tab:"扫码登录"},{default:f((()=>[p(n,{pause:y(i),onSaveLogin:a},null,8,["pause"])])),_:1}),p(s,{name:"login-phone",tab:"验证码登录"},{default:f((()=>[p(l,{onSaveLogin:a})])),_:1})])),_:1}),p(m,{align:"center",class:"other"},{default:f((()=>[p(c,{focusable:!1,size:"small",quaternary:"",round:"",onClick:t[0]||(t[0]=e=>o("uid"))},{default:f((()=>t[3]||(t[3]=[te(" UID 登录 ")]))),_:1}),p(h,{vertical:""}),p(c,{focusable:!1,size:"small",quaternary:"",round:"",onClick:t[1]||(t[1]=e=>o("cookie"))},{default:f((()=>t[4]||(t[4]=[te(" Cookie 登录 ")]))),_:1})])),_:1}),p(c,{focusable:!1,class:"close",strong:"",secondary:"",round:"",onClick:t[2]||(t[2]=e=>r("close"))},{icon:f((()=>[p(g,{name:"WindowClose"})])),default:f((()=>[t[5]||(t[5]=te(" 取消 "))])),_:1})])}}}),[["__scopeId","data-v-0b1eb853"]]),ro={class:"jump-artist"},no={key:0,class:"ar-list"},io={key:1,class:"ar-list"},ao=n({__name:"JumpArtist",props:{artist:{}},emits:["close"],setup(e,{emit:t}){const n=e,i=t,a=Os(),o=r(),l=s([]);return c((async()=>{if(!n.artist)return;const e=(e,t)=>{if(!e)return;const r=e.filter((e=>e.artistName===t)).map((e=>({id:e.artistId,name:e.artistName,cover:e.artistAvatarPicUrl})));l.value.push(...r)};if("string"==typeof n.artist){let t=[];if(o.localSeparators.some((e=>n.artist.includes(e))))o.localSeparators.forEach((e=>{t=t.concat(n.artist.split(e))})),t=Ue(t.map((e=>e.trim())).filter((e=>e&&e!==n.artist))),t.map((async t=>{const r=await Be(t);e(r.data.list,t)}));else{const t=n.artist.trim(),r=await Be(t);e(r.data.list,t)}}else Array.isArray(n.artist)&&(l.value=n.artist)})),(e,t)=>{const r=Ee,n=je,s=_e,o=Ge,u=be;return d(),F("div",ro,[p(me,{name:"fade",mode:"out-in"},{default:f((()=>[y(l)?.length?(d(),F("div",no,["string"==typeof e.artist?(d(),h(r,{key:0,"show-icon":!1},{default:f((()=>t[0]||(t[0]=[te(" 以下结果来自在线搜索，仅供参考 ")]))),_:1})):pe("",!0),(d(!0),F(De,null,Ne(y(l),((e,t)=>(d(),h(o,{key:t,class:"ar-item",hoverable:"",onClick:t=>{var r;(r=e.id)&&(i("close"),a.push({name:"artist",query:{id:r}}))}},{default:f((()=>[p(n,{src:e.cover||"/images/artist.jpg?assest",class:"cover",round:""},null,8,["src"]),p(s,{class:"name"},{default:f((()=>[te(re(e.name),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])):(d(),F("div",io,[p(u,{class:"ar-item",repeat:2,text:""})]))])),_:1})])}}}),so=B(ao,[["__scopeId","data-v-45a55e9d"]]),oo={class:"user-agreement"},lo=B(n({__name:"UserAgreement",emits:["close"],setup(e,{emit:t}){const r=t,n=s(null),i=ze(n),a=()=>{window.electron.ipcRenderer.send("win-close")};return(e,t)=>{const s=He,o=Ve,l=Ae,u=$e,c=Xe,m=qe,g=We,v=Te,_=Ge,b=Ye,w=ce;return d(),F("div",oo,[p(s,{class:"title"},{default:f((()=>t[1]||(t[1]=[te("用户协议")]))),_:1}),p(b,{class:"scrollbar"},{default:f((()=>[p(l,{class:"date",justify:"center"},{default:f((()=>[p(o,{round:""},{default:f((()=>t[2]||(t[2]=[te("生效日期：2024 年 7 月 16 日")]))),_:1}),p(o,{type:"warning",round:""},{default:f((()=>t[3]||(t[3]=[te("更新日期：2024 年 9 月 28 日")]))),_:1})])),_:1}),p(u,null,{default:f((()=>t[4]||(t[4]=[te(" 欢迎使用 SPlayer（以下简称“本软件”）。本软件是一个本地音乐播放软件，可能会调用第三方 API 来增强其功能。请在使用本软件前仔细阅读本用户协议。本协议是您（以下简称“用户”）与 SPlayer 开发团队（以下简称“开发者”）之间的法律协议。一旦您下载、安装或使用本软件，即表示您同意接受本协议的所有条款和条件。 ")]))),_:1}),p(c,{prefix:"bar"},{default:f((()=>t[5]||(t[5]=[te(" 软件使用 ")]))),_:1}),p(g,null,{default:f((()=>[p(m,null,{default:f((()=>t[6]||(t[6]=[te("本软件是一款本地音乐播放软件，允许用户播放存储在设备上的音频文件。")]))),_:1}),p(m,null,{default:f((()=>t[7]||(t[7]=[te("开发者保留随时修改、更新或终止软件及其功能的权利，而无需提前通知用户。")]))),_:1}),p(m,null,{default:f((()=>t[8]||(t[8]=[te("用户必须年满 18 岁或在父母或监护人的监督下使用本软件。")]))),_:1})])),_:1}),p(c,{prefix:"bar"},{default:f((()=>t[9]||(t[9]=[te(" 开源许可 ")]))),_:1}),p(g,null,{default:f((()=>[p(m,null,{default:f((()=>t[10]||(t[10]=[te("本软件是基于 AGPL-3.0 许可发布的开源软件。")]))),_:1}),p(m,null,{default:f((()=>t[11]||(t[11]=[te("用户在使用、修改和分发 SPlayer 时，必须遵守 AGPL-3.0 许可的条款和条件。")]))),_:1}),p(m,null,{default:f((()=>[t[13]||(t[13]=te(" AGPL-3.0 许可的详细信息可以在以下链接找到： ")),p(v,{href:"https://www.gnu.org/licenses/agpl-3.0.html",target:"_blank"},{default:f((()=>t[12]||(t[12]=[te(" GNU Affero General Public License v3.0 ")]))),_:1})])),_:1})])),_:1}),p(c,{prefix:"bar"},{default:f((()=>t[14]||(t[14]=[te(" 第三方 ")]))),_:1}),p(g,null,{default:f((()=>[p(m,null,{default:f((()=>t[15]||(t[15]=[te("本软件可能会调用第三方 API 以提供额外功能（例如，歌词显示、专辑封面获取等）。")]))),_:1}),p(m,null,{default:f((()=>t[16]||(t[16]=[te(" 开发者不对第三方 API 的准确性、完整性或合法性负责。用户使用第三方 API 时，应遵守第三方提供商的服务条款和隐私政策。 ")]))),_:1}),p(m,null,{default:f((()=>t[17]||(t[17]=[te("由于第三方 API 引起的任何问题或纠纷，开发者不承担任何责任。")]))),_:1})])),_:1}),p(c,{prefix:"bar"},{default:f((()=>t[18]||(t[18]=[te(" 用户责任 ")]))),_:1}),p(g,null,{default:f((()=>[p(m,null,{default:f((()=>t[19]||(t[19]=[te(" 用户应遵守所有适用的法律法规，确保通过合法手段获取音乐文件，并在使用本软件时不侵犯任何第三方的版权或其他合法权益。 ")]))),_:1}),p(m,null,{default:f((()=>t[20]||(t[20]=[te(" 用户不得使用本软件进行任何非法活动，包括但不限于侵犯版权、传播恶意软件、非法获取数据等。 ")]))),_:1})])),_:1}),p(c,{prefix:"bar"},{default:f((()=>t[21]||(t[21]=[te(" 知识产权 ")]))),_:1}),p(g,null,{default:f((()=>[p(m,null,{default:f((()=>t[22]||(t[22]=[te(" 除了根据 AGPL-3.0 许可使用的开源部分外，本软件及其所有内容（包括但不限于软件、标识、图形、用户界面、脚本和服务名称）均为开发者或其许可方的财产，受知识产权法保护。 ")]))),_:1}),p(m,null,{default:f((()=>t[23]||(t[23]=[te(" 未经开发者书面许可，用户不得复制、修改、分发、出售或租赁本软件及其内容。 ")]))),_:1})])),_:1}),p(c,{prefix:"bar"},{default:f((()=>t[24]||(t[24]=[te(" 免责声明 ")]))),_:1}),p(g,null,{default:f((()=>[p(m,null,{default:f((()=>t[25]||(t[25]=[te(" 本软件按“现状”提供，不提供任何形式的明示或暗示保证，包括但不限于适销性、特定用途适用性和非侵权性。 ")]))),_:1}),p(m,null,{default:f((()=>t[26]||(t[26]=[te(" 开发者不保证本软件的功能不会中断或无错误，也不保证本软件适用于用户的特定需求。 ")]))),_:1}),p(m,null,{default:f((()=>t[27]||(t[27]=[te(" 用户使用本软件过程中产生的任何直接或间接损失，开发者不承担任何责任。 ")]))),_:1})])),_:1}),p(c,{prefix:"bar"},{default:f((()=>t[28]||(t[28]=[te(" 责任限制 ")]))),_:1}),p(g,null,{default:f((()=>[p(m,null,{default:f((()=>t[29]||(t[29]=[te(" 在适用法律允许的最大范围内，开发者对因使用或无法使用本软件而导致的任何间接、偶然、特殊、继发或惩罚性损害不承担责任，即使开发者已被告知此类损害的可能性。 ")]))),_:1}),p(m,null,{default:f((()=>t[30]||(t[30]=[te(" 在任何情况下，开发者对用户的全部责任，不论是合同、侵权（包括过失）或其他方面的责任，总额不超过用户为使用本软件所支付的费用（如果有）。 ")]))),_:1})])),_:1}),p(c,{prefix:"bar"},{default:f((()=>t[31]||(t[31]=[te(" 终止 ")]))),_:1}),p(g,null,{default:f((()=>[p(m,null,{default:f((()=>t[32]||(t[32]=[te(" 开发者有权在不提前通知的情况下，因任何原因或无原因终止本协议。 ")]))),_:1}),p(m,null,{default:f((()=>t[33]||(t[33]=[te(" 本协议终止后，用户应停止使用本软件并删除其所有副本。 ")]))),_:1})])),_:1}),p(c,{prefix:"bar"},{default:f((()=>t[34]||(t[34]=[te(" 隐私政策 ")]))),_:1}),p(g,null,{default:f((()=>[p(m,null,{default:f((()=>t[35]||(t[35]=[te(" 本软件可能会收集和使用用户的某些信息，以提供和改进软件服务。 ")]))),_:1}),p(m,null,{default:f((()=>t[36]||(t[36]=[te(" 开发者承诺保护用户的隐私，不会将用户信息出售给第三方。详细的隐私政策请参考我们的隐私声明。 ")]))),_:1})])),_:1}),p(c,{prefix:"bar"},{default:f((()=>t[37]||(t[37]=[te(" 更新与变更 ")]))),_:1}),p(g,null,{default:f((()=>[p(m,null,{default:f((()=>t[38]||(t[38]=[te(" 开发者保留随时更新和修改本协议的权利。 ")]))),_:1}),p(m,null,{default:f((()=>t[39]||(t[39]=[te(" 更新后的协议将通过适当的方式通知用户，包括但不限于在本软件中发布或通过电子邮件发送通知。 ")]))),_:1})])),_:1}),p(c,{prefix:"bar"},{default:f((()=>t[40]||(t[40]=[te(" 其他 ")]))),_:1}),p(g,null,{default:f((()=>[p(m,null,{default:f((()=>t[41]||(t[41]=[te(" 本协议受中华人民共和国法律管辖，不考虑其法律冲突条款。")]))),_:1}),p(m,null,{default:f((()=>t[42]||(t[42]=[te(" 如果本协议的任何条款被视为无效或不可执行，该条款将被修改以反映双方的意图，其余条款仍然完全有效。 ")]))),_:1}),p(m,null,{default:f((()=>t[43]||(t[43]=[te(" 本协议构成您与开发者之间关于使用本软件的完整协议，并取代之前的所有口头或书面协议和陈述。 ")]))),_:1})])),_:1}),p(_,{ref_key:"readOverRef",ref:n},{default:f((()=>t[44]||(t[44]=[te(" 若你（使用者）接受以上协议，请点击下面的“同意并使用”按钮签署本协议，若不接受，请点击“不同意”后软件将退出并清除本软件的所有数据。 ")]))),_:1},512)])),_:1}),p(l,{justify:"center"},{default:f((()=>[y(Y)?(d(),h(w,{key:0,type:"error",onClick:a},{default:f((()=>t[45]||(t[45]=[te("不同意")]))),_:1})):pe("",!0),p(w,{type:"success",onClick:t[0]||(t[0]=e=>r("close")),disabled:!y(i)},{default:f((()=>[te(re(y(i)?"同意并使用":"请先完整阅读"),1)])),_:1},8,["disabled"])])),_:1})])}}}),[["__scopeId","data-v-9c805f6a"]]);const uo=new class{blobURLs;constructor(){this.blobURLs=new Map}createBlobURL(e,t,r){try{if(this.blobURLs.has(r))return this.blobURLs.get(r);const n=new Blob([e],{type:t}),i=URL.createObjectURL(n);return this.blobURLs.set(r,i),i}catch(n){throw console.error("❌ Error creating Blob URL:",n),n}}revokeBlobURL(e){try{const t=this.blobURLs.get(e);t&&(URL.revokeObjectURL(t),this.blobURLs.delete(e))}catch(t){console.error("❌ Error revoking Blob URL:",t)}}revokeAllBlobURLs(){try{this.blobURLs.forEach((e=>{URL.revokeObjectURL(e)})),this.blobURLs.clear()}catch(e){console.error("❌ Error revoking all Blob URLs:",e)}}},co={class:"song-info-editor"},ho=n({__name:"SongInfoEditor",props:{song:{}},emits:["close"],setup(e,{emit:t}){const r=e,n=t,i=ke(),a=Ke(),o=ot("local"),l=s(null),u=s({name:"",fileName:"",artist:"",album:""}),h={name:Bs,artist:Bs,album:Bs},m=s("/images/song.jpg?assest"),g=Q((async()=>{try{if(!r.song||!u.value.md5)return;const{result:e}=await Ze(u.value.name||"",u.value.artist||"",u.value.album||"",u.value.duration||0,u.value.md5),t=e.songs?.[0];if(Qe(t))return void window.$message.error("无法匹配，请修改信息后重试");{const e=Je([t])[0];u.value={...u.value,name:e.name,artist:et(e.artists)?e.artists.map((e=>e.name)).join(" / "):e.artists,album:tt(e.album)?e.album.name:e.album,alia:e.alia};const r=await rt(e.id);u.value.lyric=r.lrc.lyric,window.$message.success("匹配成功")}}catch(e){console.error("Error online matching:",e),window.$message.error("匹配出错，请重试")}}),300,{leading:!0,trailing:!1}),v=async()=>{const e=await window.electron.ipcRenderer.invoke("choose-image");e&&(m.value=e)},_=Q((async e=>{try{if(!l.value)return;await(l.value?.validate());const t={...u.value,cover:m.value.startsWith("blob:")||"/images/song.jpg?assest"===m.value?null:m.value};e.path,await window.electron.ipcRenderer.invoke("set-music-metadata",e.path,t),window.$message.success("歌曲信息修改成功"),(e=>{const t={name:e.name,artists:e.artist,album:e.album,alia:e.alia,cover:m.value||""};a.playSong?.id===r.song.id&&(a.playSong={...a.playSong,...t});const n=i.playList.findIndex((e=>e.id===r.song.id));-1!==n&&(i.playList[n]={...i.playList[n],...t}),o.emit()})(t),n("close")}catch(t){console.error("Error saving song info:",t),window.$message.error("歌曲信息修改失败，请重试")}}),300);return c((async()=>{if(!r.song||!r.song.path)return;const e=r.song.path,t=await window.electron.ipcRenderer.invoke("get-music-metadata",e),{fileName:n,fileSize:i,common:a,format:s,md5:o}=t;u.value={fileName:n,name:a.title||"",artist:a.artist||"",album:a.album||"",alia:a.comment?.[0]||"",lyric:a.lyrics?.[0]||"",type:s.codec,duration:s.duration?Number(s.duration.toFixed(2)):0,size:i,br:s.bitrate?Math.floor(s.bitrate/1e3||0):0,frequency:s.sampleRate,md5:o};const l=a.picture?.[0]?.data||"",c=a.picture?.[0]?.format||"";l&&(m.value=uo.createBlobURL(l,c,e))})),(e,t)=>{const r=_e,i=le,a=ce,s=Ae,o=Se,c=oe,b=it,w=ue,x=at,I=st,T=de,E=Ye,S=Oe,A=ve,k=Pe;return d(),F("div",co,[p(k,{type:"segment",animated:""},{default:f((()=>[p(S,{name:"info",tab:"信息","display-directive":"show"},{default:f((()=>[p(s,{class:"match",justify:"space-between",align:"center"},{default:f((()=>[p(r,null,{default:f((()=>t[14]||(t[14]=[te("不想手动填写标签？")]))),_:1}),p(a,{type:"primary",strong:"",secondary:"",onClick:y(g)},{icon:f((()=>[p(i,{name:"AutoFix"})])),default:f((()=>[t[15]||(t[15]=te(" 自动匹配标签 "))])),_:1},8,["onClick"])])),_:1}),p(E,{class:"scrollbar"},{default:f((()=>[p(T,{ref_key:"infoFormRef",ref:l,model:y(u),rules:h,class:"phone-form"},{default:f((()=>[p(c,{label:"文件名",path:"fileName"},{default:f((()=>[p(o,{value:y(u).fileName,"onUpdate:value":t[0]||(t[0]=e=>y(u).fileName=e),disabled:""},null,8,["value"])])),_:1}),p(c,{label:"歌曲名",path:"name"},{default:f((()=>[p(o,{value:y(u).name,"onUpdate:value":t[1]||(t[1]=e=>y(u).name=e),placeholder:"请输入歌曲名",clearable:""},null,8,["value"])])),_:1}),p(c,{label:"歌手",path:"artist"},{default:f((()=>[p(o,{value:y(u).artist,"onUpdate:value":t[2]||(t[2]=e=>y(u).artist=e),placeholder:"请输入歌手名",clearable:""},null,8,["value"])])),_:1}),p(c,{label:"专辑",path:"album"},{default:f((()=>[p(o,{value:y(u).album,"onUpdate:value":t[3]||(t[3]=e=>y(u).album=e),placeholder:"请输入专辑名",clearable:""},null,8,["value"])])),_:1}),p(c,{label:"别名",path:"alia"},{default:f((()=>[p(o,{value:y(u).alia,"onUpdate:value":t[4]||(t[4]=e=>y(u).alia=e),placeholder:"请输入别名",clearable:""},null,8,["value"])])),_:1}),p(c,{label:"歌词",path:"lyric"},{default:f((()=>[p(o,{value:y(u).lyric,"onUpdate:value":t[5]||(t[5]=e=>y(u).lyric=e),autosize:{minRows:3,maxRows:6},placeholder:"请输入歌词",type:"textarea"},null,8,["value"])])),_:1}),p(I,{cols:24,"x-gap":24},{default:f((()=>[p(b,{span:12,label:"类型",path:"type"},{default:f((()=>[p(o,{value:y(u).type,"onUpdate:value":t[6]||(t[6]=e=>y(u).type=e),disabled:""},null,8,["value"])])),_:1}),p(b,{span:12,label:"码率",path:"br"},{default:f((()=>[p(w,{value:y(u).br,"onUpdate:value":t[7]||(t[7]=e=>y(u).br=e),"show-button":!1,style:{width:"100%"},disabled:""},{suffix:f((()=>[p(r,{depth:"3"},{default:f((()=>t[16]||(t[16]=[te("kbps")]))),_:1})])),_:1},8,["value"])])),_:1}),p(b,{span:12,label:"时长",path:"duration"},{default:f((()=>[p(w,{value:y(u).duration,"onUpdate:value":t[8]||(t[8]=e=>y(u).duration=e),"show-button":!1,style:{width:"100%"},disabled:""},{suffix:f((()=>[p(r,{depth:"3"},{default:f((()=>t[17]||(t[17]=[te("s")]))),_:1})])),_:1},8,["value"])])),_:1}),p(b,{span:12,label:"频率",path:"br"},{default:f((()=>[p(w,{value:y(u).frequency,"onUpdate:value":t[9]||(t[9]=e=>y(u).frequency=e),"show-button":!1,style:{width:"100%"},disabled:""},{suffix:f((()=>[p(r,{depth:"3"},{default:f((()=>t[18]||(t[18]=[te("Hz")]))),_:1})])),_:1},8,["value"])])),_:1}),p(b,{span:12,label:"路径",path:"path"},{default:f((()=>[p(x,null,{default:f((()=>[p(o,{value:e.song.path,disabled:""},null,8,["value"]),p(a,{type:"primary",ghost:"",onClick:t[10]||(t[10]=t=>y(nt)(e.song.path))},{icon:f((()=>[p(i,{name:"Copy"})])),_:1})])),_:1})])),_:1}),p(b,{span:12,label:"MD5",path:"md5"},{default:f((()=>[p(x,null,{default:f((()=>[p(o,{value:y(u).md5,disabled:""},null,8,["value"]),p(a,{type:"primary",ghost:"",onClick:t[11]||(t[11]=e=>y(nt)(y(u).md5))},{icon:f((()=>[p(i,{name:"Copy"})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])])),_:1})])),_:1}),p(S,{name:"cover",tab:"封面","display-directive":"show"},{default:f((()=>[p(A,{src:y(m),"preview-disabled":!0,width:"300",height:"300",class:"cover",onClick:v},null,8,["src"]),p(s,{class:"menu",justify:"center"},{default:f((()=>[p(r,{depth:"3"},{default:f((()=>t[19]||(t[19]=[te("点击封面以更换")]))),_:1})])),_:1})])),_:1})])),_:1}),p(s,{class:"menu",justify:"center"},{default:f((()=>[p(a,{class:"btn",strong:"",secondary:"",onClick:t[12]||(t[12]=e=>n("close"))},{default:f((()=>t[20]||(t[20]=[te("取消")]))),_:1}),p(a,{class:"btn",type:"primary",onClick:t[13]||(t[13]=t=>y(_)(e.song))},{default:f((()=>t[21]||(t[21]=[te("保存修改")]))),_:1})])),_:1})])}}}),fo=B(ho,[["__scopeId","data-v-619f427e"]]),po=""+new URL("../images/album.jpg?assest",import.meta.url).href,mo={class:"playlist-add"},yo=n({__name:"PlaylistAdd",props:{data:{},isLocal:{type:Boolean}},emits:["close"],setup(e,{emit:t}){const r=e,n=t,i=ke(),a=s(),l=o((()=>i.userLikeData.playlists.filter((e=>e.userId===i.userData?.userId))||[])),u=Q((async(e,t)=>{if(2===K())return void window.$message.warning("该登录模式暂不支持该操作");a.value=window.$message.loading("正在添加歌曲至歌单",{duration:0});const i=r.data.map((e=>e.id)).filter((e=>0!==e)),s=await lt(e,i);if(a.value&&a.value.destroy(),200===s.status){if(200!==s.body?.code)return void window.$message.error(s.body?.message||"添加失败，请重试");n("close"),window.$message.success("添加歌曲至歌单成功"),0===t&&await ut(),await ct()}else window.$message.error(s?.message||"添加失败，请重试")}),500,{leading:!0,trailing:!1});return(e,t)=>{const r=le,n=dt,i=ht,a=ve,s=_e,o=ft,c=Ye,m=Oe,g=pt,v=Pe;return d(),F("div",mo,[p(v,{"default-value":e.isLocal?"local":"online",type:"segment",animated:""},{default:f((()=>[p(m,{disabled:e.isLocal,name:"online",tab:"在线歌单"},{default:f((()=>[p(c,{style:{"max-height":"70vh"}},{default:f((()=>[p(o,{class:"playlists-list",hoverable:"",clickable:""},{default:f((()=>[p(i,{class:"playlist add",onClick:y(yd)},{prefix:f((()=>[p(r,{name:"Add",size:20})])),default:f((()=>[p(n,{title:"创建新歌单"})])),_:1},8,["onClick"]),(d(!0),F(De,null,Ne(y(l),((e,r)=>(d(),h(i,{key:r,class:"playlist",onClick:t=>y(u)(e?.id,r)},{prefix:f((()=>[p(a,{src:e?.coverSize?.s||"/images/album.jpg?assest",class:"cover","preview-disabled":"",lazy:"",onLoad:y(fe)},{placeholder:f((()=>t[0]||(t[0]=[D("div",{class:"cover-loading"},[D("img",{class:"loading-img",src:po,alt:"loading-img"})],-1)]))),_:2},1032,["src","onLoad"])])),default:f((()=>[p(n,{title:0===r?"我喜欢的音乐":e.name},{description:f((()=>[p(s,{depth:"3",class:"size"},{default:f((()=>[te(re(e.count)+" 首音乐",1)])),_:2},1024)])),_:2},1032,["title"])])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1},8,["disabled"]),p(m,{name:"local",tab:"本地歌单"},{default:f((()=>[p(g,{description:"暂未实现"})])),_:1})])),_:1},8,["default-value"])])}}}),go=B(yo,[["__scopeId","data-v-4c8f187b"]]),vo={class:"batch-list"},_o=B(n({__name:"batchList",props:{data:{},isLocal:{type:Boolean},playListId:{}},setup(e){const t=e,r=s(0),n=s([]),i=o((()=>[{type:"selection",disabled:e=>!e.id},{title:"#",key:"key",width:80},{title:"标题",key:"name",ellipsis:{tooltip:!0}},{title:"歌手",key:"artists",ellipsis:{tooltip:!0}},{title:"专辑",key:"album",ellipsis:{tooltip:!0}}])),a=o((()=>t.data.map(((e,t)=>({key:t+1,id:e?.id,name:e?.name||"未知曲目",artists:et(e?.artists)?e?.artists.map((e=>e.name)).join(" / "):e?.artists||"未知歌手",album:tt(e?.album)?e?.album.name:e?.album||"未知专辑",origin:e}))))),l=(e,t)=>{r.value=e.length,n.value=t.map((e=>e.origin)).filter((e=>e))};return(e,t)=>{const s=yt,o=_e,u=le,c=ce,m=Ae;return d(),F("div",vo,[p(s,{columns:y(i),data:y(a),"max-height":"60vh","virtual-scroll":"","onUpdate:checkedRowKeys":l},null,8,["columns","data"]),p(m,{class:"batch-footer",justify:"space-between",align:"center"},{default:f((()=>[p(o,{depth:3,class:"count"},{default:f((()=>[te("已选择 "+re(y(r))+" 首",1)])),_:1}),p(m,{class:"menu"},{default:f((()=>[e.playListId?(d(),h(c,{key:0,disabled:!y(r),type:"error",strong:"",secondary:"",onClick:t[0]||(t[0]=t=>y(mt)(e.playListId,y(n).map((e=>e.id))))},{icon:f((()=>[p(u,{name:"Delete"})])),default:f((()=>[t[2]||(t[2]=te(" 删除选中的歌曲 "))])),_:1},8,["disabled"])):pe("",!0),p(c,{disabled:!y(r),type:"primary",strong:"",secondary:"",onClick:t[1]||(t[1]=t=>y(fd)(y(n),e.isLocal))},{icon:f((()=>[p(u,{name:"AddList"})])),default:f((()=>[t[3]||(t[3]=te(" 添加到歌单 "))])),_:1},8,["disabled"])])),_:1})])),_:1})])}}}),[["__scopeId","data-v-a64aecd2"]]),bo=""+new URL("../images/song.jpg?assest",import.meta.url).href,wo={key:0,class:"data"},xo={key:0,class:"artists text-hidden"},Io={key:1,class:"artists text-hidden"},To={class:"album text-hidden"},Eo={key:1,class:"data"},So=B(n({__name:"SongDataCard",props:{data:{},canJump:{type:Boolean}},setup:e=>(e,t)=>{const r=ve,n=_e,i=le,a=be,s=Ge;return d(),h(s,{class:"song-data-card"},{default:f((()=>[p(r,{src:e.data?.coverSize?.s||e.data?.cover,class:"cover","preview-disabled":"",lazy:"",onLoad:y(fe)},{placeholder:f((()=>t[0]||(t[0]=[D("div",{class:"cover-loading"},[D("img",{src:bo,class:"loading-img",alt:"loading-img"})],-1)]))),_:1},8,["src","onLoad"]),p(me,{name:"fade",mode:"out-in"},{default:f((()=>[e.data?(d(),F("div",wo,[p(n,{class:"name"},{default:f((()=>[te(re(e.data.name||"未知曲目"),1)])),_:1}),Array.isArray(e.data.artists)?(d(),F("div",xo,[p(i,{name:"Artist",depth:3}),(d(!0),F(De,null,Ne(e.data.artists,(e=>(d(),h(n,{key:e.id,class:"ar"},{default:f((()=>[te(re(e.name),1)])),_:2},1024)))),128))])):(d(),F("div",Io,[p(i,{name:"Artist",depth:3}),p(n,{class:"ar"},{default:f((()=>[te(re(e.data.artists||"未知艺术家"),1)])),_:1})])),D("div",To,[p(i,{name:"Album",depth:3}),y(tt)(e.data.album)?(d(),h(n,{key:0,class:"album-text"},{default:f((()=>[te(re(e.data.album?.name||"未知专辑"),1)])),_:1})):(d(),h(n,{key:1,class:"album-text"},{default:f((()=>[te(re(e.data.album||"未知专辑"),1)])),_:1}))])])):(d(),F("div",Eo,[p(a,{text:"",round:"",repeat:2})]))])),_:1})])),_:1})}}),[["__scopeId","data-v-426e153f"]]),Ao=(e=50,t=0)=>gt({url:"/user/cloud",params:{limit:e,offset:t,timestamp:Date.now()}}),ko=e=>gt({url:"/user/cloud/del",params:{id:e,timestamp:Date.now()}}),Co=(e,t,r,n,i,a,s,o)=>gt({url:"/cloud/import",method:"POST",params:{id:a,song:e,fileType:t,fileSize:r,bitrate:n,md5:i,artist:s,album:o,timestamp:Date.now()}}),Po={class:"cloud-match"},Ro=n({__name:"CloudMatch",props:{id:{},index:{}},emits:["close"],setup(e,{emit:t}){const r=e,n=t,i=ke(),a=s(!1),o=s(null),l=s(null),u=s({sid:r.id,asid:null}),c={asid:{...Us,message:"请输入歌曲 ID"}},h=Q((async()=>{const e=u.value.asid;if(!e)return void window.$message.warning("请输入歌曲 ID");const{songs:t}=await vt(e);t?.length?(window.$message.success("验证成功"),a.value=!0,o.value=Je(t)[0]):window.$message.warning("未找到该歌曲，请重试")}),300,{leading:!0,trailing:!1}),m=Q((async()=>{const e=i.userData.userId;if(!u.value.asid||!e)return void window.$message.warning("获取必要信息失败，请重试");if(u.value.sid===u.value.asid)return void window.$message.warning("与原歌曲 ID 一致，无需纠正");if(!a.value)return void window.$message.warning("歌曲未通过验证，请重试");const t=await(s=e,l=u.value.sid,c=u.value.asid,gt({url:"/cloud/match",params:{uid:s,sid:l,asid:c,timestamp:Date.now()}}));var s,l,c;200===t.code?(n("close"),o.value&&(i.cloudPlayList[r.index]=o.value,i.setCloudPlayList(i.cloudPlayList)),window.$message.success("歌曲信息纠正成功")):window.$message.error(t.message||"纠正失败，请重试")}),300,{leading:!0,trailing:!1});return(e,t)=>{const r=ue,i=oe,s=ce,g=Ae,v=de,_=So,b=_t;return d(),F("div",Po,[p(v,{ref_key:"matchFormRef",ref:l,model:y(u),rules:c},{default:f((()=>[p(i,{path:"sid",label:"原歌曲 ID"},{default:f((()=>[p(r,{value:y(u).sid,"onUpdate:value":t[0]||(t[0]=e=>y(u).sid=e),"show-button":!1,disabled:""},null,8,["value"])])),_:1}),p(i,{path:"asid",label:"匹配的 ID"},{default:f((()=>[p(g,{size:12,wrap:!1,class:"input"},{default:f((()=>[p(r,{value:y(u).asid,"onUpdate:value":t[1]||(t[1]=e=>y(u).asid=e),"show-button":!1,placeholder:"请输入要匹配的歌曲 ID",onInput:t[2]||(t[2]=e=>a.value=!1)},null,8,["value"]),p(s,{disabled:!y(u).asid||y(a),type:y(a)?"success":"primary",onClick:y(h)},{default:f((()=>[te(re(y(a)?"验证成功":"验证"),1)])),_:1},8,["disabled","type","onClick"])])),_:1})])),_:1})])),_:1},8,["model"]),p(b,{show:y(a)},{default:f((()=>[p(_,{data:y(o)},null,8,["data"])])),_:1},8,["show"]),p(g,{class:"menu",justify:"end"},{default:f((()=>[p(s,{strong:"",secondary:"",onClick:t[3]||(t[3]=e=>n("close"))},{default:f((()=>t[4]||(t[4]=[te(" 取消 ")]))),_:1}),p(s,{type:"primary",strong:"",secondary:"",onClick:y(m)},{default:f((()=>t[5]||(t[5]=[te(" 确认纠正 ")]))),_:1},8,["onClick"])])),_:1})])}}}),Mo=B(Ro,[["__scopeId","data-v-f6450d1a"]]),Lo={class:"create-playlist"},Oo=n({__name:"CreatePlaylist",emits:["close"],setup(e,{emit:t}){const r=t,n=ke(),i=s(1===K()?"online":"local"),a=s(null),o=s({name:"",type:"NORMAL",privacy:!1}),l={name:Bs},u=[{label:"普通歌单",value:"NORMAL"},{label:"视频歌单",disabled:!0,value:"VIDEO"},{label:"共享歌单",disabled:!0,value:"SHARED"}],c=Q((async e=>{if(e.preventDefault(),"online"===i.value){await(a.value?.validate((e=>e)));const e=await bt(o.value.name,o.value.privacy,o.value.type);200===e.code?(r("close"),window.$message.success("新建歌单成功"),n.userData.createdPlaylistCount&&n.userData.createdPlaylistCount++,await ct()):window.$message.error(e.message||"新建歌单失败，请重试")}}),300,{leading:!0,trailing:!1});return(e,t)=>{const r=Se,n=oe,s=se,h=wt,m=de,g=Oe,v=pt,_=Pe,b=ce;return d(),F("div",Lo,[p(_,{value:y(i),"onUpdate:value":t[3]||(t[3]=e=>xe(i)?i.value=e:null),type:"segment",animated:""},{default:f((()=>[p(g,{disabled:1!==y(K)(),name:"online",tab:"在线歌单"},{default:f((()=>[p(m,{ref_key:"onlineFormRef",ref:a,model:y(o),rules:l},{default:f((()=>[p(n,{label:"歌单名称",path:"name"},{default:f((()=>[p(r,{value:y(o).name,"onUpdate:value":t[0]||(t[0]=e=>y(o).name=e),placeholder:"请输入歌单名称"},null,8,["value"])])),_:1}),p(n,{label:"歌单类型",path:"type"},{default:f((()=>[p(s,{value:y(o).type,"onUpdate:value":t[1]||(t[1]=e=>y(o).type=e),options:u},null,8,["value"])])),_:1}),p(n,{label:"设为隐私歌单",path:"privacy","label-placement":"left"},{default:f((()=>[p(h,{value:y(o).privacy,"onUpdate:value":t[2]||(t[2]=e=>y(o).privacy=e)},null,8,["value"])])),_:1})])),_:1},8,["model"])])),_:1},8,["disabled"]),p(g,{name:"local",tab:"本地歌单"},{default:f((()=>[p(v,{description:"暂未实现"})])),_:1})])),_:1},8,["value"]),p(b,{class:"create",type:"primary",onClick:y(c)},{default:f((()=>t[4]||(t[4]=[te(" 新建 ")]))),_:1},8,["onClick"])])}}}),Fo=B(Oo,[["__scopeId","data-v-0bde5c2d"]]),Do={class:"update-playlist"},No=n({__name:"UpdatePlaylist",props:{id:{},data:{}},emits:["success"],setup(e,{emit:t}){const r=e,n=t,i=ke(),a=o((()=>i.userLikeData.playlists?.[0]?.id===r.id)),l=s(null),u=s({name:a.value?"我喜欢的音乐":r.data.name,desc:r.data.description,tags:r.data.tags}),h={name:Bs},m=o((()=>Qe(i.catData?.cats)?[]:Object.keys(i.catData?.type).map((e=>({type:"group",key:e,label:i.catData?.type[e],children:i.catData?.cats?.filter((t=>t.category===Number(e))).map((e=>({label:e.name,value:e.name})))}))))),g=e=>{It(e)>3&&(u.value.tags=e.slice(0,3),window.$message.warning("最多只能有3个标签"))},v=Q((async e=>{e.preventDefault(),await(l.value?.validate((e=>e)));const t=await xt(r.id,u.value.name,u.value.desc??"",u.value.tags??[]);200===t.code?(n("success"),window.$message.success("歌单编辑成功"),await ct()):window.$message.error(t.message||"歌单编辑失败，请重试")}),300,{leading:!0,trailing:!1});return c((()=>i.getPlaylistCatList())),(e,t)=>{const r=Se,n=oe,i=se,s=de,o=ce;return d(),F("div",Do,[p(s,{ref_key:"updateFormRef",ref:l,model:y(u),rules:h},{default:f((()=>[p(n,{label:"歌单名",path:"name"},{default:f((()=>[p(r,{value:y(u).name,"onUpdate:value":t[0]||(t[0]=e=>y(u).name=e),disabled:y(a),placeholder:"请输入歌单名"},null,8,["value","disabled"])])),_:1}),p(n,{label:"歌单描述",path:"desc"},{default:f((()=>[p(r,{value:y(u).desc,"onUpdate:value":t[1]||(t[1]=e=>y(u).desc=e),autosize:{minRows:3,maxRows:6},maxlength:800,placeholder:"请输入歌单描述",type:"textarea","show-count":"",clearable:""},null,8,["value"])])),_:1}),p(n,{label:"歌单分类",path:"tags"},{default:f((()=>[p(i,{value:y(u).tags,"onUpdate:value":[t[2]||(t[2]=e=>y(u).tags=e),g],options:y(m),placeholder:"请选择歌单标签",filterable:"",multiple:""},null,8,["value","options"])])),_:1})])),_:1},8,["model"]),p(o,{class:"create",type:"primary",onClick:y(v)},{default:f((()=>t[3]||(t[3]=[te(" 编辑 ")]))),_:1},8,["onClick"])])}}}),Bo=B(No,[["__scopeId","data-v-f09a3ee0"]]);var Uo,jo={exports:{}};Uo=jo,function(){function e(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function t(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){s(n.response,t,r)},n.onerror=function(){console.error("could not download file")},n.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(r){}return 200<=t.status&&299>=t.status}function n(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(r){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof Tt&&Tt.global===Tt?Tt:void 0,a=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(e,a,s){var o=i.URL||i.webkitURL,l=document.createElement("a");a=a||e.name||"download",l.download=a,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?n(l):r(l.href)?t(e,a,s):n(l,l.target="_blank")):(l.href=o.createObjectURL(e),setTimeout((function(){o.revokeObjectURL(l.href)}),4e4),setTimeout((function(){n(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(i,a,s){if(a=a||i.name||"download","string"!=typeof i)navigator.msSaveOrOpenBlob(e(i,s),a);else if(r(i))t(i,a,s);else{var o=document.createElement("a");o.href=i,o.target="_blank",setTimeout((function(){n(o)}))}}:function(e,r,n,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof e)return t(e,r,n);var o="application/octet-stream"===e.type,l=/constructor/i.test(i.HTMLElement)||i.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||o&&l||a)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=e:location=e,s=null},c.readAsDataURL(e)}else{var d=i.URL||i.webkitURL,h=d.createObjectURL(e);s?s.location=h:location.href=h,s=null,setTimeout((function(){d.revokeObjectURL(h)}),4e4)}});i.saveAs=s.saveAs=s,Uo.exports=s}();var Go,zo=jo.exports,Ho={};
/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
Go=Ho,function(){var e=function(){this.init()};e.prototype={init:function(){var e=this||t;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var r=this||t;if(e=parseFloat(e),r.ctx||u(),void 0!==e&&e>=0&&e<=1){if(r._volume=e,r._muted)return r;r.usingWebAudio&&r.masterGain.gain.setValueAtTime(e,t.ctx.currentTime);for(var n=0;n<r._howls.length;n++)if(!r._howls[n]._webAudio)for(var i=r._howls[n]._getSoundIds(),a=0;a<i.length;a++){var s=r._howls[n]._soundById(i[a]);s&&s._node&&(s._node.volume=s._volume*e)}return r}return r._volume},mute:function(e){var r=this||t;r.ctx||u(),r._muted=e,r.usingWebAudio&&r.masterGain.gain.setValueAtTime(e?0:r._volume,t.ctx.currentTime);for(var n=0;n<r._howls.length;n++)if(!r._howls[n]._webAudio)for(var i=r._howls[n]._getSoundIds(),a=0;a<i.length;a++){var s=r._howls[n]._soundById(i[a]);s&&s._node&&(s._node.muted=!!e||s._muted)}return r},stop:function(){for(var e=this||t,r=0;r<e._howls.length;r++)e._howls[r].stop();return e},unload:function(){for(var e=this||t,r=e._howls.length-1;r>=0;r--)e._howls[r].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,u()),e},codecs:function(e){return(this||t)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||t;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(r){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(r){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||t,r=null;try{r="undefined"!=typeof Audio?new Audio:null}catch(c){return e}if(!r||"function"!=typeof r.canPlayType)return e;var n=r.canPlayType("audio/mpeg;").replace(/^no$/,""),i=e._navigator?e._navigator.userAgent:"",a=i.match(/OPR\/(\d+)/g),s=a&&parseInt(a[0].split("/")[1],10)<33,o=-1!==i.indexOf("Safari")&&-1===i.indexOf("Chrome"),l=i.match(/Version\/(.*?) /),u=o&&l&&parseInt(l[1],10)<15;return e._codecs={mp3:!(s||!n&&!r.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!r.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!r.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!r.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(r.canPlayType('audio/wav; codecs="1"')||r.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!r.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!r.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(r.canPlayType("audio/x-m4a;")||r.canPlayType("audio/m4a;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(r.canPlayType("audio/x-m4b;")||r.canPlayType("audio/m4b;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(r.canPlayType("audio/x-mp4;")||r.canPlayType("audio/mp4;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(u||!r.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(u||!r.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!r.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(r.canPlayType("audio/x-flac;")||r.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||t;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var r=function(t){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var n=new Audio;n._unlocked=!0,e._releaseHtml5Audio(n)}catch(u){e.noAudio=!0;break}for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var a=e._howls[i]._getSoundIds(),s=0;s<a.length;s++){var o=e._howls[i]._soundById(a[s]);o&&o._node&&!o._node._unlocked&&(o._node._unlocked=!0,o._node.load())}e._autoResume();var l=e.ctx.createBufferSource();l.buffer=e._scratchBuffer,l.connect(e.ctx.destination),void 0===l.start?l.noteOn(0):l.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),l.onended=function(){l.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",r,!0),document.removeEventListener("touchend",r,!0),document.removeEventListener("click",r,!0),document.removeEventListener("keydown",r,!0);for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("unlock")}};return document.addEventListener("touchstart",r,!0),document.addEventListener("touchend",r,!0),document.addEventListener("click",r,!0),document.addEventListener("keydown",r,!0),e}},_obtainHtml5Audio:function(){var e=this||t;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var r=(new Audio).play();return r&&"undefined"!=typeof Promise&&(r instanceof Promise||"function"==typeof r.then)&&r.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(e){var r=this||t;return e._unlocked&&r._html5AudioPool.push(e),r},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&t.usingWebAudio){for(var r=0;r<e._howls.length;r++)if(e._howls[r]._webAudio)for(var n=0;n<e._howls[r]._sounds.length;n++)if(!e._howls[r]._sounds[n]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout((function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var t=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(t,t)}}),3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&t.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then((function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")})),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var t=new e,r=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};r.prototype={init:function(e){var r=this;return t.ctx||u(),r._autoplay=e.autoplay||!1,r._format="string"!=typeof e.format?e.format:[e.format],r._html5=e.html5||!1,r._muted=e.mute||!1,r._loop=e.loop||!1,r._pool=e.pool||5,r._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,r._rate=e.rate||1,r._sprite=e.sprite||{},r._src="string"!=typeof e.src?e.src:[e.src],r._volume=void 0!==e.volume?e.volume:1,r._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},r._duration=0,r._state="unloaded",r._sounds=[],r._endTimers={},r._queue=[],r._playLock=!1,r._onend=e.onend?[{fn:e.onend}]:[],r._onfade=e.onfade?[{fn:e.onfade}]:[],r._onload=e.onload?[{fn:e.onload}]:[],r._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],r._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],r._onpause=e.onpause?[{fn:e.onpause}]:[],r._onplay=e.onplay?[{fn:e.onplay}]:[],r._onstop=e.onstop?[{fn:e.onstop}]:[],r._onmute=e.onmute?[{fn:e.onmute}]:[],r._onvolume=e.onvolume?[{fn:e.onvolume}]:[],r._onrate=e.onrate?[{fn:e.onrate}]:[],r._onseek=e.onseek?[{fn:e.onseek}]:[],r._onunlock=e.onunlock?[{fn:e.onunlock}]:[],r._onresume=[],r._webAudio=t.usingWebAudio&&!r._html5,void 0!==t.ctx&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(r),r._autoplay&&r._queue.push({event:"play",action:function(){r.play()}}),r._preload&&"none"!==r._preload&&r.load(),r},load:function(){var e=this,r=null;if(t.noAudio)e._emit("loaderror",null,"No audio support.");else{"string"==typeof e._src&&(e._src=[e._src]);for(var i=0;i<e._src.length;i++){var s,o;if(e._format&&e._format[i])s=e._format[i];else{if("string"!=typeof(o=e._src[i])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(s=/^data:audio\/([^;,]+);/i.exec(o))||(s=/\.([^.]+)$/.exec(o.split("?",1)[0])),s&&(s=s[1].toLowerCase())}if(s||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),s&&t.codecs(s)){r=e._src[i];break}}if(r)return e._src=r,e._state="loading","https:"===window.location.protocol&&"http:"===r.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new n(e),e._webAudio&&a(e),e;e._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,r){var n=this,i=null;if("number"==typeof e)i=e,e=null;else{if("string"==typeof e&&"loaded"===n._state&&!n._sprite[e])return null;if(void 0===e&&(e="__default",!n._playLock)){for(var a=0,s=0;s<n._sounds.length;s++)n._sounds[s]._paused&&!n._sounds[s]._ended&&(a++,i=n._sounds[s]._id);1===a?e=null:i=null}}var o=i?n._soundById(i):n._inactiveSound();if(!o)return null;if(i&&!e&&(e=o._sprite||"__default"),"loaded"!==n._state){o._sprite=e,o._ended=!1;var l=o._id;return n._queue.push({event:"play",action:function(){n.play(l)}}),l}if(i&&!o._paused)return r||n._loadQueue("play"),o._id;n._webAudio&&t._autoResume();var u=Math.max(0,o._seek>0?o._seek:n._sprite[e][0]/1e3),c=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-u),d=1e3*c/Math.abs(o._rate),h=n._sprite[e][0]/1e3,f=(n._sprite[e][0]+n._sprite[e][1])/1e3;o._sprite=e,o._ended=!1;var p=function(){o._paused=!1,o._seek=u,o._start=h,o._stop=f,o._loop=!(!o._loop&&!n._sprite[e][2])};if(!(u>=f)){var m=o._node;if(n._webAudio){var y=function(){n._playLock=!1,p(),n._refreshBuffer(o);var e=o._muted||n._muted?0:o._volume;m.gain.setValueAtTime(e,t.ctx.currentTime),o._playStart=t.ctx.currentTime,void 0===m.bufferSource.start?o._loop?m.bufferSource.noteGrainOn(0,u,86400):m.bufferSource.noteGrainOn(0,u,c):o._loop?m.bufferSource.start(0,u,86400):m.bufferSource.start(0,u,c),d!==1/0&&(n._endTimers[o._id]=setTimeout(n._ended.bind(n,o),d)),r||setTimeout((function(){n._emit("play",o._id),n._loadQueue()}),0)};"running"===t.state&&"interrupted"!==t.ctx.state?y():(n._playLock=!0,n.once("resume",y),n._clearTimer(o._id))}else{var g=function(){m.currentTime=u,m.muted=o._muted||n._muted||t._muted||m.muted,m.volume=o._volume*t.volume(),m.playbackRate=o._rate;try{var i=m.play();if(i&&"undefined"!=typeof Promise&&(i instanceof Promise||"function"==typeof i.then)?(n._playLock=!0,p(),i.then((function(){n._playLock=!1,m._unlocked=!0,r?n._loadQueue():n._emit("play",o._id)})).catch((function(){n._playLock=!1,n._emit("playerror",o._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),o._ended=!0,o._paused=!0}))):r||(n._playLock=!1,p(),n._emit("play",o._id)),m.playbackRate=o._rate,m.paused)return void n._emit("playerror",o._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||o._loop?n._endTimers[o._id]=setTimeout(n._ended.bind(n,o),d):(n._endTimers[o._id]=function(){n._ended(o),m.removeEventListener("ended",n._endTimers[o._id],!1)},m.addEventListener("ended",n._endTimers[o._id],!1))}catch(a){n._emit("playerror",o._id,a)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===m.src&&(m.src=n._src,m.load());var v=window&&window.ejecta||!m.readyState&&t._navigator.isCocoonJS;if(m.readyState>=3||v)g();else{n._playLock=!0,n._state="loading";var _=function(){n._state="loaded",g(),m.removeEventListener(t._canPlayEvent,_,!1)};m.addEventListener(t._canPlayEvent,_,!1),n._clearTimer(o._id)}}return o._id}n._ended(o)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var r=t._getSoundIds(e),n=0;n<r.length;n++){t._clearTimer(r[n]);var i=t._soundById(r[n]);if(i&&!i._paused&&(i._seek=t.seek(r[n]),i._rateSeek=0,i._paused=!0,t._stopFade(r[n]),i._node))if(t._webAudio){if(!i._node.bufferSource)continue;void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),t._cleanBuffer(i._node)}else isNaN(i._node.duration)&&i._node.duration!==1/0||i._node.pause();arguments[1]||t._emit("pause",i?i._id:null)}return t},stop:function(e,t){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"stop",action:function(){r.stop(e)}}),r;for(var n=r._getSoundIds(e),i=0;i<n.length;i++){r._clearTimer(n[i]);var a=r._soundById(n[i]);a&&(a._seek=a._start||0,a._rateSeek=0,a._paused=!0,a._ended=!0,r._stopFade(n[i]),a._node&&(r._webAudio?a._node.bufferSource&&(void 0===a._node.bufferSource.stop?a._node.bufferSource.noteOff(0):a._node.bufferSource.stop(0),r._cleanBuffer(a._node)):isNaN(a._node.duration)&&a._node.duration!==1/0||(a._node.currentTime=a._start||0,a._node.pause(),a._node.duration===1/0&&r._clearSound(a._node))),t||r._emit("stop",a._id))}return r},mute:function(e,r){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(e,r)}}),n;if(void 0===r){if("boolean"!=typeof e)return n._muted;n._muted=e}for(var i=n._getSoundIds(r),a=0;a<i.length;a++){var s=n._soundById(i[a]);s&&(s._muted=e,s._interval&&n._stopFade(s._id),n._webAudio&&s._node?s._node.gain.setValueAtTime(e?0:s._volume,t.ctx.currentTime):s._node&&(s._node.muted=!!t._muted||e),n._emit("mute",s._id))}return n},volume:function(){var e,r,n,i=this,a=arguments;if(0===a.length)return i._volume;if(1===a.length||2===a.length&&void 0===a[1]?i._getSoundIds().indexOf(a[0])>=0?r=parseInt(a[0],10):e=parseFloat(a[0]):a.length>=2&&(e=parseFloat(a[0]),r=parseInt(a[1],10)),!(void 0!==e&&e>=0&&e<=1))return(n=r?i._soundById(r):i._sounds[0])?n._volume:0;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"volume",action:function(){i.volume.apply(i,a)}}),i;void 0===r&&(i._volume=e),r=i._getSoundIds(r);for(var s=0;s<r.length;s++)(n=i._soundById(r[s]))&&(n._volume=e,a[2]||i._stopFade(r[s]),i._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(e,t.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=e*t.volume()),i._emit("volume",n._id));return i},fade:function(e,r,n,i){var a=this;if("loaded"!==a._state||a._playLock)return a._queue.push({event:"fade",action:function(){a.fade(e,r,n,i)}}),a;e=Math.min(Math.max(0,parseFloat(e)),1),r=Math.min(Math.max(0,parseFloat(r)),1),n=parseFloat(n),a.volume(e,i);for(var s=a._getSoundIds(i),o=0;o<s.length;o++){var l=a._soundById(s[o]);if(l){if(i||a._stopFade(s[o]),a._webAudio&&!l._muted){var u=t.ctx.currentTime,c=u+n/1e3;l._volume=e,l._node.gain.setValueAtTime(e,u),l._node.gain.linearRampToValueAtTime(r,c)}a._startFadeInterval(l,e,r,n,s[o],void 0===i)}}return a},_startFadeInterval:function(e,t,r,n,i,a){var s=this,o=t,l=r-t,u=Math.abs(l/.01),c=Math.max(4,u>0?n/u:n),d=Date.now();e._fadeTo=r,e._interval=setInterval((function(){var i=(Date.now()-d)/n;d=Date.now(),o+=l*i,o=Math.round(100*o)/100,o=l<0?Math.max(r,o):Math.min(r,o),s._webAudio?e._volume=o:s.volume(o,e._id,!0),a&&(s._volume=o),(r<t&&o<=r||r>t&&o>=r)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,s.volume(r,e._id),s._emit("fade",e._id))}),c)},_stopFade:function(e){var r=this,n=r._soundById(e);return n&&n._interval&&(r._webAudio&&n._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(n._interval),n._interval=null,r.volume(n._fadeTo,e),n._fadeTo=null,r._emit("fade",e)),r},loop:function(){var e,t,r,n=this,i=arguments;if(0===i.length)return n._loop;if(1===i.length){if("boolean"!=typeof i[0])return!!(r=n._soundById(parseInt(i[0],10)))&&r._loop;e=i[0],n._loop=e}else 2===i.length&&(e=i[0],t=parseInt(i[1],10));for(var a=n._getSoundIds(t),s=0;s<a.length;s++)(r=n._soundById(a[s]))&&(r._loop=e,n._webAudio&&r._node&&r._node.bufferSource&&(r._node.bufferSource.loop=e,e&&(r._node.bufferSource.loopStart=r._start||0,r._node.bufferSource.loopEnd=r._stop,n.playing(a[s])&&(n.pause(a[s],!0),n.play(a[s],!0)))));return n},rate:function(){var e,r,n,i=this,a=arguments;if(0===a.length?r=i._sounds[0]._id:1===a.length?i._getSoundIds().indexOf(a[0])>=0?r=parseInt(a[0],10):e=parseFloat(a[0]):2===a.length&&(e=parseFloat(a[0]),r=parseInt(a[1],10)),"number"!=typeof e)return(n=i._soundById(r))?n._rate:i._rate;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"rate",action:function(){i.rate.apply(i,a)}}),i;void 0===r&&(i._rate=e),r=i._getSoundIds(r);for(var s=0;s<r.length;s++)if(n=i._soundById(r[s])){i.playing(r[s])&&(n._rateSeek=i.seek(r[s]),n._playStart=i._webAudio?t.ctx.currentTime:n._playStart),n._rate=e,i._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(e,t.ctx.currentTime):n._node&&(n._node.playbackRate=e);var o=i.seek(r[s]),l=1e3*((i._sprite[n._sprite][0]+i._sprite[n._sprite][1])/1e3-o)/Math.abs(n._rate);!i._endTimers[r[s]]&&n._paused||(i._clearTimer(r[s]),i._endTimers[r[s]]=setTimeout(i._ended.bind(i,n),l)),i._emit("rate",n._id)}return i},seek:function(){var e,r,n=this,i=arguments;if(0===i.length?n._sounds.length&&(r=n._sounds[0]._id):1===i.length?n._getSoundIds().indexOf(i[0])>=0?r=parseInt(i[0],10):n._sounds.length&&(r=n._sounds[0]._id,e=parseFloat(i[0])):2===i.length&&(e=parseFloat(i[0]),r=parseInt(i[1],10)),void 0===r)return 0;if("number"==typeof e&&("loaded"!==n._state||n._playLock))return n._queue.push({event:"seek",action:function(){n.seek.apply(n,i)}}),n;var a=n._soundById(r);if(a){if(!("number"==typeof e&&e>=0)){if(n._webAudio){var s=n.playing(r)?t.ctx.currentTime-a._playStart:0,o=a._rateSeek?a._rateSeek-a._seek:0;return a._seek+(o+s*Math.abs(a._rate))}return a._node.currentTime}var l=n.playing(r);l&&n.pause(r,!0),a._seek=e,a._ended=!1,n._clearTimer(r),n._webAudio||!a._node||isNaN(a._node.duration)||(a._node.currentTime=e);var u=function(){l&&n.play(r,!0),n._emit("seek",r)};if(l&&!n._webAudio){var c=function(){n._playLock?setTimeout(c,0):u()};setTimeout(c,0)}else u()}return n},playing:function(e){var t=this;if("number"==typeof e){var r=t._soundById(e);return!!r&&!r._paused}for(var n=0;n<t._sounds.length;n++)if(!t._sounds[n]._paused)return!0;return!1},duration:function(e){var t=this,r=t._duration,n=t._soundById(e);return n&&(r=t._sprite[n._sprite][1]/1e3),r},state:function(){return this._state},unload:function(){for(var e=this,r=e._sounds,n=0;n<r.length;n++)r[n]._paused||e.stop(r[n]._id),e._webAudio||(e._clearSound(r[n]._node),r[n]._node.removeEventListener("error",r[n]._errorFn,!1),r[n]._node.removeEventListener(t._canPlayEvent,r[n]._loadFn,!1),r[n]._node.removeEventListener("ended",r[n]._endFn,!1),t._releaseHtml5Audio(r[n]._node)),delete r[n]._node,e._clearTimer(r[n]._id);var a=t._howls.indexOf(e);a>=0&&t._howls.splice(a,1);var s=!0;for(n=0;n<t._howls.length;n++)if(t._howls[n]._src===e._src||e._src.indexOf(t._howls[n]._src)>=0){s=!1;break}return i&&s&&delete i[e._src],t.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,r,n){var i=this["_on"+e];return"function"==typeof t&&i.push(n?{id:r,fn:t,once:n}:{id:r,fn:t}),this},off:function(e,t,r){var n=this,i=n["_on"+e],a=0;if("number"==typeof t&&(r=t,t=null),t||r)for(a=0;a<i.length;a++){var s=r===i[a].id;if(t===i[a].fn&&s||!t&&s){i.splice(a,1);break}}else if(e)n["_on"+e]=[];else{var o=Object.keys(n);for(a=0;a<o.length;a++)0===o[a].indexOf("_on")&&Array.isArray(n[o[a]])&&(n[o[a]]=[])}return n},once:function(e,t,r){return this.on(e,t,r,1),this},_emit:function(e,t,r){for(var n=this,i=n["_on"+e],a=i.length-1;a>=0;a--)i[a].id&&i[a].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,r)}.bind(n,i[a].fn),0),i[a].once&&n.off(e,i[a].fn,i[a].id));return n._loadQueue(e),n},_loadQueue:function(e){var t=this;if(t._queue.length>0){var r=t._queue[0];r.event===e&&(t._queue.shift(),t._loadQueue()),e||r.action()}return t},_ended:function(e){var r=this,n=e._sprite;if(!r._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(r._ended.bind(r,e),100),r;var i=!(!e._loop&&!r._sprite[n][2]);if(r._emit("end",e._id),!r._webAudio&&i&&r.stop(e._id,!0).play(e._id),r._webAudio&&i){r._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=t.ctx.currentTime;var a=1e3*(e._stop-e._start)/Math.abs(e._rate);r._endTimers[e._id]=setTimeout(r._ended.bind(r,e),a)}return r._webAudio&&!i&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,r._clearTimer(e._id),r._cleanBuffer(e._node),t._autoSuspend()),r._webAudio||i||r.stop(e._id,!0),r},_clearTimer:function(e){var t=this;if(t._endTimers[e]){if("function"!=typeof t._endTimers[e])clearTimeout(t._endTimers[e]);else{var r=t._soundById(e);r&&r._node&&r._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function(e){for(var t=this,r=0;r<t._sounds.length;r++)if(e===t._sounds[r]._id)return t._sounds[r];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new n(e)},_drain:function(){var e=this,t=e._pool,r=0,n=0;if(!(e._sounds.length<t)){for(n=0;n<e._sounds.length;n++)e._sounds[n]._ended&&r++;for(n=e._sounds.length-1;n>=0;n--){if(r<=t)return;e._sounds[n]._ended&&(e._webAudio&&e._sounds[n]._node&&e._sounds[n]._node.disconnect(0),e._sounds.splice(n,1),r--)}}},_getSoundIds:function(e){if(void 0===e){for(var t=[],r=0;r<this._sounds.length;r++)t.push(this._sounds[r]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=t.ctx.createBufferSource(),e._node.bufferSource.buffer=i[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,t.ctx.currentTime),this},_cleanBuffer:function(e){var r=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(!e.bufferSource)return this;if(t._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),r))try{e.bufferSource.buffer=t._scratchBuffer}catch(n){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var n=function(e){this._parent=e,this.init()};n.prototype={init:function(){var e=this,r=e._parent;return e._muted=r._muted,e._loop=r._loop,e._volume=r._volume,e._rate=r._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++t._counter,r._sounds.push(e),e.create(),e},create:function(){var e=this,r=e._parent,n=t._muted||e._muted||e._parent._muted?0:e._volume;return r._webAudio?(e._node=void 0===t.ctx.createGain?t.ctx.createGainNode():t.ctx.createGain(),e._node.gain.setValueAtTime(n,t.ctx.currentTime),e._node.paused=!0,e._node.connect(t.masterGain)):t.noAudio||(e._node=t._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(t._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=r._src,e._node.preload=!0===r._preload?"auto":r._preload,e._node.volume=n*t.volume(),e._node.load()),e},reset:function(){var e=this,r=e._parent;return e._muted=r._muted,e._loop=r._loop,e._volume=r._volume,e._rate=r._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++t._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,r=e._parent;r._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(r._sprite).length&&(r._sprite={__default:[0,1e3*r._duration]}),"loaded"!==r._state&&(r._state="loaded",r._emit("load"),r._loadQueue()),e._node.removeEventListener(t._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,t=e._parent;t._duration===1/0&&(t._duration=Math.ceil(10*e._node.duration)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=1e3*t._duration),t._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var i={},a=function(e){var t=e._src;if(i[t])return e._duration=i[t].duration,void l(e);if(/^data:[^;]+;base64,/.test(t)){for(var r=atob(t.split(",")[1]),n=new Uint8Array(r.length),a=0;a<r.length;++a)n[a]=r.charCodeAt(a);o(n.buffer,e)}else{var u=new XMLHttpRequest;u.open(e._xhr.method,t,!0),u.withCredentials=e._xhr.withCredentials,u.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach((function(t){u.setRequestHeader(t,e._xhr.headers[t])})),u.onload=function(){var t=(u.status+"")[0];"0"===t||"2"===t||"3"===t?o(u.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+u.status+".")},u.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete i[t],e.load())},s(u)}},s=function(e){try{e.send()}catch(t){e.onerror()}},o=function(e,r){var n=function(){r._emit("loaderror",null,"Decoding audio data failed.")},a=function(e){e&&r._sounds.length>0?(i[r._src]=e,l(r,e)):n()};"undefined"!=typeof Promise&&1===t.ctx.decodeAudioData.length?t.ctx.decodeAudioData(e).then(a).catch(n):t.ctx.decodeAudioData(e,a,n)},l=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},u=function(){if(t.usingWebAudio){try{"undefined"!=typeof AudioContext?t.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch(a){t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),r=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=r?parseInt(r[1],10):null;if(e&&n&&n<9){var i=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!i&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=void 0===t.ctx.createGain?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};Go.Howler=t,Go.Howl=r,void 0!==Tt?(Tt.HowlerGlobal=e,Tt.Howler=t,Tt.Howl=r,Tt.Sound=n):"undefined"!=typeof window&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=r,window.Sound=n)}(),
/*!
   *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
   *  
   *  howler.js v2.2.4
   *  howlerjs.com
   *
   *  (c) 2013-2020, James Simpson of GoldFire Studios
   *  goldfirestudios.com
   *
   *  MIT License
   */
function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;for(var r=t._howls.length-1;r>=0;r--)t._howls[r].stereo(e);return t},HowlerGlobal.prototype.pos=function(e,t,r){var n=this;return n.ctx&&n.ctx.listener?(t="number"!=typeof t?n._pos[1]:t,r="number"!=typeof r?n._pos[2]:r,"number"!=typeof e?n._pos:(n._pos=[e,t,r],void 0!==n.ctx.listener.positionX?(n.ctx.listener.positionX.setTargetAtTime(n._pos[0],Howler.ctx.currentTime,.1),n.ctx.listener.positionY.setTargetAtTime(n._pos[1],Howler.ctx.currentTime,.1),n.ctx.listener.positionZ.setTargetAtTime(n._pos[2],Howler.ctx.currentTime,.1)):n.ctx.listener.setPosition(n._pos[0],n._pos[1],n._pos[2]),n)):n},HowlerGlobal.prototype.orientation=function(e,t,r,n,i,a){var s=this;if(!s.ctx||!s.ctx.listener)return s;var o=s._orientation;return t="number"!=typeof t?o[1]:t,r="number"!=typeof r?o[2]:r,n="number"!=typeof n?o[3]:n,i="number"!=typeof i?o[4]:i,a="number"!=typeof a?o[5]:a,"number"!=typeof e?o:(s._orientation=[e,t,r,n,i,a],void 0!==s.ctx.listener.forwardX?(s.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),s.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),s.ctx.listener.forwardZ.setTargetAtTime(r,Howler.ctx.currentTime,.1),s.ctx.listener.upX.setTargetAtTime(n,Howler.ctx.currentTime,.1),s.ctx.listener.upY.setTargetAtTime(i,Howler.ctx.currentTime,.1),s.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,.1)):s.ctx.listener.setOrientation(e,t,r,n,i,a),s)},Howl.prototype.init=function(e){return function(t){var r=this;return r._orientation=t.orientation||[1,0,0],r._stereo=t.stereo||null,r._pos=t.pos||null,r._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},r._onstereo=t.onstereo?[{fn:t.onstereo}]:[],r._onpos=t.onpos?[{fn:t.onpos}]:[],r._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,r){var n=this;if(!n._webAudio)return n;if("loaded"!==n._state)return n._queue.push({event:"stereo",action:function(){n.stereo(t,r)}}),n;var i=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===r){if("number"!=typeof t)return n._stereo;n._stereo=t,n._pos=[t,0,0]}for(var a=n._getSoundIds(r),s=0;s<a.length;s++){var o=n._soundById(a[s]);if(o){if("number"!=typeof t)return o._stereo;o._stereo=t,o._pos=[t,0,0],o._node&&(o._pannerAttr.panningModel="equalpower",o._panner&&o._panner.pan||e(o,i),"spatial"===i?void 0!==o._panner.positionX?(o._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),o._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),o._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):o._panner.setPosition(t,0,0):o._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),n._emit("stereo",o._id)}}return n},Howl.prototype.pos=function(t,r,n,i){var a=this;if(!a._webAudio)return a;if("loaded"!==a._state)return a._queue.push({event:"pos",action:function(){a.pos(t,r,n,i)}}),a;if(r="number"!=typeof r?0:r,n="number"!=typeof n?-.5:n,void 0===i){if("number"!=typeof t)return a._pos;a._pos=[t,r,n]}for(var s=a._getSoundIds(i),o=0;o<s.length;o++){var l=a._soundById(s[o]);if(l){if("number"!=typeof t)return l._pos;l._pos=[t,r,n],l._node&&(l._panner&&!l._panner.pan||e(l,"spatial"),void 0!==l._panner.positionX?(l._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(r,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):l._panner.setPosition(t,r,n)),a._emit("pos",l._id)}}return a},Howl.prototype.orientation=function(t,r,n,i){var a=this;if(!a._webAudio)return a;if("loaded"!==a._state)return a._queue.push({event:"orientation",action:function(){a.orientation(t,r,n,i)}}),a;if(r="number"!=typeof r?a._orientation[1]:r,n="number"!=typeof n?a._orientation[2]:n,void 0===i){if("number"!=typeof t)return a._orientation;a._orientation=[t,r,n]}for(var s=a._getSoundIds(i),o=0;o<s.length;o++){var l=a._soundById(s[o]);if(l){if("number"!=typeof t)return l._orientation;l._orientation=[t,r,n],l._node&&(l._panner||(l._pos||(l._pos=a._pos||[0,0,-.5]),e(l,"spatial")),void 0!==l._panner.orientationX?(l._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.orientationY.setValueAtTime(r,Howler.ctx.currentTime),l._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):l._panner.setOrientation(t,r,n)),a._emit("orientation",l._id)}}return a},Howl.prototype.pannerAttr=function(){var t,r,n,i=this,a=arguments;if(!i._webAudio)return i;if(0===a.length)return i._pannerAttr;if(1===a.length){if("object"!=typeof a[0])return(n=i._soundById(parseInt(a[0],10)))?n._pannerAttr:i._pannerAttr;t=a[0],void 0===r&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),i._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:i._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:i._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:i._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:i._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:i._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:i._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:i._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:i._panningModel})}else 2===a.length&&(t=a[0],r=parseInt(a[1],10));for(var s=i._getSoundIds(r),o=0;o<s.length;o++)if(n=i._soundById(s[o])){var l=n._pannerAttr;l={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:l.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:l.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:l.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:l.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:l.maxDistance,refDistance:void 0!==t.refDistance?t.refDistance:l.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:l.rolloffFactor,panningModel:void 0!==t.panningModel?t.panningModel:l.panningModel};var u=n._panner;u||(n._pos||(n._pos=i._pos||[0,0,-.5]),e(n,"spatial"),u=n._panner),u.coneInnerAngle=l.coneInnerAngle,u.coneOuterAngle=l.coneOuterAngle,u.coneOuterGain=l.coneOuterGain,u.distanceModel=l.distanceModel,u.maxDistance=l.maxDistance,u.refDistance=l.refDistance,u.rolloffFactor=l.rolloffFactor,u.panningModel=l.panningModel}return i},Sound.prototype.init=function(e){return function(){var t=this,r=t._parent;t._orientation=r._orientation,t._stereo=r._stereo,t._pos=r._pos,t._pannerAttr=r._pannerAttr,e.call(this),t._stereo?r.stereo(t._stereo):t._pos&&r.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this,r=t._parent;return t._orientation=r._orientation,t._stereo=r._stereo,t._pos=r._pos,t._pannerAttr=r._pannerAttr,t._stereo?r.stereo(t._stereo):t._pos?r.pos(t._pos[0],t._pos[1],t._pos[2],t._id):t._panner&&(t._panner.disconnect(0),t._panner=void 0,r._refreshBuffer(t)),e.call(this)}}(Sound.prototype.reset);var e=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}();const Vo=""+new URL("amll_lyric_bg-Dy4VPaCX.wasm",import.meta.url).href;let $o;const Xo=new Array(128).fill(void 0);function qo(e){return Xo[e]}Xo.push(void 0,null,!0,!1);let Wo=Xo.length;function Yo(e){const t=qo(e);return function(e){e<132||(Xo[e]=Wo,Wo=e)}(e),t}function Ko(e){Wo===Xo.length&&Xo.push(Xo.length+1);const t=Wo;return Wo=Xo[t],Xo[t]=e,t}let Zo=new("undefined"==typeof TextDecoder?(0,module.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});Zo.decode();let Qo=null;function Jo(){return null!==Qo&&0!==Qo.byteLength||(Qo=new Uint8Array($o.memory.buffer)),Qo}function el(e,t){return e>>>=0,Zo.decode(Jo().subarray(e,e+t))}let tl=0;let rl=new("undefined"==typeof TextEncoder?(0,module.require)("util").TextEncoder:TextEncoder)("utf-8");const nl="function"==typeof rl.encodeInto?function(e,t){return rl.encodeInto(e,t)}:function(e,t){const r=rl.encode(e);return t.set(r),{read:e.length,written:r.length}};function il(e,t,r){if(void 0===r){const r=rl.encode(e),n=t(r.length,1)>>>0;return Jo().subarray(n,n+r.length).set(r),tl=r.length,n}let n=e.length,i=t(n,1)>>>0;const a=Jo();let s=0;for(;s<n;s++){const t=e.charCodeAt(s);if(t>127)break;a[i+s]=t}if(s!==n){0!==s&&(e=e.slice(s)),i=r(i,n,n=s+3*e.length,1)>>>0;const t=Jo().subarray(i+s,i+n);s+=nl(e,t).written,i=r(i,n,s,1)>>>0}return tl=s,i}function al(e){return null==e}let sl=null;function ol(){return(null===sl||!0===sl.buffer.detached||void 0===sl.buffer.detached&&sl.buffer!==$o.memory.buffer)&&(sl=new DataView($o.memory.buffer)),sl}function ll(e){const t=typeof e;if("number"==t||"boolean"==t||null==e)return`${e}`;if("string"==t)return`"${e}"`;if("symbol"==t){const t=e.description;return null==t?"Symbol":`Symbol(${t})`}if("function"==t){const t=e.name;return"string"==typeof t&&t.length>0?`Function(${t})`:"Function"}if(Array.isArray(e)){const t=e.length;let r="[";t>0&&(r+=ll(e[0]));for(let n=1;n<t;n++)r+=", "+ll(e[n]);return r+="]",r}const r=/\[object ([^\]]+)\]/.exec(toString.call(e));let n;if(!(r.length>1))return toString.call(e);if(n=r[1],"Object"==n)try{return"Object("+JSON.stringify(e)+")"}catch(i){return"Object"}return e instanceof Error?`${e.name}: ${e.message}\n${e.stack}`:n}function ul(e){const t=il(e,$o.__wbindgen_malloc,$o.__wbindgen_realloc),r=tl;return Yo($o.parseLrc(t,r))}function cl(e,t){try{return e.apply(this,t)}catch(r){$o.__wbindgen_exn_store(Ko(r))}}URL=globalThis.URL;const dl=await(async(e={},t)=>{let r;if(t.startsWith("data:")){const n=t.replace(/^data:.*?base64,/,"");let i;if("function"==typeof Buffer&&"function"==typeof Buffer.from)i=Buffer.from(n,"base64");else{if("function"!=typeof atob)throw new Error("Cannot decode base64-encoded data URL");{const e=atob(n);i=new Uint8Array(e.length);for(let t=0;t<e.length;t++)i[t]=e.charCodeAt(t)}}r=await WebAssembly.instantiate(i,e)}else{const n=await fetch(t),i=n.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&i.startsWith("application/wasm"))r=await WebAssembly.instantiateStreaming(n,e);else{const t=await n.arrayBuffer();r=await WebAssembly.instantiate(t,e)}}return r.instance.exports})({"./amll_lyric_bg.js":{__wbindgen_object_drop_ref:function(e){Yo(e)},__wbindgen_is_bigint:function(e){return"bigint"==typeof qo(e)},__wbindgen_bigint_from_u64:function(e){return Ko(BigInt.asUintN(64,e))},__wbindgen_jsval_eq:function(e,t){return qo(e)===qo(t)},__wbindgen_error_new:function(e,t){return Ko(new Error(el(e,t)))},__wbindgen_is_object:function(e){const t=qo(e);return"object"==typeof t&&null!==t},__wbindgen_is_undefined:function(e){return void 0===qo(e)},__wbindgen_in:function(e,t){return qo(e)in qo(t)},__wbindgen_string_get:function(e,t){const r=qo(t),n="string"==typeof r?r:void 0;var i=al(n)?0:il(n,$o.__wbindgen_malloc,$o.__wbindgen_realloc),a=tl;ol().setInt32(e+4,a,!0),ol().setInt32(e+0,i,!0)},__wbindgen_boolean_get:function(e){const t=qo(e);return"boolean"==typeof t?t?1:0:2},__wbindgen_jsval_loose_eq:function(e,t){return qo(e)==qo(t)},__wbindgen_number_get:function(e,t){const r=qo(t),n="number"==typeof r?r:void 0;ol().setFloat64(e+8,al(n)?0:n,!0),ol().setInt32(e+0,!al(n),!0)},__wbindgen_as_number:function(e){return+qo(e)},__wbindgen_number_new:function(e){return Ko(e)},__wbindgen_object_clone_ref:function(e){return Ko(qo(e))},__wbindgen_string_new:function(e,t){return Ko(el(e,t))},__wbg_getwithrefkey_edc2c8960f0f1191:function(e,t){return Ko(qo(e)[qo(t)])},__wbg_set_f975102236d3c502:function(e,t,r){qo(e)[Yo(t)]=Yo(r)},__wbg_call_1084a111329e68ce:function(){return cl((function(e,t){return Ko(qo(e).call(qo(t)))}),arguments)},__wbg_get_3baa728f9d58d3f6:function(e,t){return Ko(qo(e)[t>>>0])},__wbg_length_ae22078168b726f5:function(e){return qo(e).length},__wbg_new_a220cf903aa02ca2:function(){return Ko(new Array)},__wbindgen_is_function:function(e){return"function"==typeof qo(e)},__wbg_next_de3e9db4440638b2:function(e){return Ko(qo(e).next)},__wbg_next_f9cb570345655b9a:function(){return cl((function(e){return Ko(qo(e).next())}),arguments)},__wbg_done_bfda7aa8f252b39f:function(e){return qo(e).done},__wbg_value_6d39332ab4788d86:function(e){return Ko(qo(e).value)},__wbg_iterator_888179a48810a9fe:function(){return Ko(Symbol.iterator)},__wbg_get_224d16597dbbfd96:function(){return cl((function(e,t){return Ko(Reflect.get(qo(e),qo(t)))}),arguments)},__wbg_new_525245e2b9901204:function(){return Ko(new Object)},__wbg_set_673dda6c73d19609:function(e,t,r){qo(e)[t>>>0]=Yo(r)},__wbg_isArray_8364a5371e9737d8:function(e){return Array.isArray(qo(e))},__wbg_instanceof_ArrayBuffer_61dfc3198373c902:function(e){let t;try{t=qo(e)instanceof ArrayBuffer}catch(r){t=!1}return t},__wbg_isSafeInteger_7f1ed56200d90674:function(e){return Number.isSafeInteger(qo(e))},__wbg_buffer_b7b08af79b0b0974:function(e){return Ko(qo(e).buffer)},__wbg_new_ea1883e1e5e86686:function(e){return Ko(new Uint8Array(qo(e)))},__wbg_set_d1e79e2388520f18:function(e,t,r){qo(e).set(qo(t),r>>>0)},__wbg_length_8339fcf5d8ecd12e:function(e){return qo(e).length},__wbg_instanceof_Uint8Array_247a91427532499e:function(e){let t;try{t=qo(e)instanceof Uint8Array}catch(r){t=!1}return t},__wbindgen_bigint_get_as_i64:function(e,t){const r=qo(t),n="bigint"==typeof r?r:void 0;ol().setBigInt64(e+8,al(n)?BigInt(0):n,!0),ol().setInt32(e+0,!al(n),!0)},__wbindgen_debug_string:function(e,t){const r=il(ll(qo(t)),$o.__wbindgen_malloc,$o.__wbindgen_realloc),n=tl;ol().setInt32(e+4,n,!0),ol().setInt32(e+0,r,!0)},__wbindgen_throw:function(e,t){throw new Error(el(e,t))},__wbindgen_memory:function(){return Ko($o.memory)}}},Vo),hl=dl.memory,fl=dl.stringifyAss,pl=dl.decryptQrcHex,ml=dl.parseEslrc,yl=dl.stringifyEslrc,gl=dl.parseLrc,vl=dl.stringifyLrc,_l=dl.parseLys,bl=dl.stringifyLys,wl=dl.parseQrc,xl=dl.stringifyQrc,Il=dl.parseTTML,Tl=dl.stringifyTTML,El=dl.parseYrc,Sl=dl.stringifyYrc,Al=dl.wasm_start,kl=dl.__wbindgen_malloc,Cl=dl.__wbindgen_realloc,Pl=dl.__wbindgen_add_to_stack_pointer,Rl=dl.__wbindgen_free,Ml=dl.__wbindgen_exn_store,Ll=dl.__wbindgen_start,Ol=Object.freeze(Object.defineProperty({__proto__:null,__wbindgen_add_to_stack_pointer:Pl,__wbindgen_exn_store:Ml,__wbindgen_free:Rl,__wbindgen_malloc:kl,__wbindgen_realloc:Cl,__wbindgen_start:Ll,decryptQrcHex:pl,memory:hl,parseEslrc:ml,parseLrc:gl,parseLys:_l,parseQrc:wl,parseTTML:Il,parseYrc:El,stringifyAss:fl,stringifyEslrc:yl,stringifyLrc:vl,stringifyLys:bl,stringifyQrc:xl,stringifyTTML:Tl,stringifyYrc:Sl,wasm_start:Al},Symbol.toStringTag,{value:"Module"}));$o=Ol,Ll();const Fl=()=>r().excludeKeywords,Dl=()=>{Ke().songLyric={lrcData:[],lrcAMData:[],yrcData:[],yrcAMData:[]}},Nl=e=>{const t=Ke();if(200!==e.code)return void Dl();let r=[],n=[],i=[],a=[],s=[],o=[],l=[],u=[];e?.lrc?.lyric&&(i=ul(e.lrc.lyric),r=Bl(i),e?.tlyric?.lyric&&(a=ul(e.tlyric.lyric),r=jl(r,Bl(a),"tran")),e?.romalrc?.lyric&&(s=ul(e.romalrc.lyric),r=jl(r,Bl(s),"roma"))),e?.yrc?.lyric&&(o=function(e){const t=il(e,$o.__wbindgen_malloc,$o.__wbindgen_realloc),r=tl;return Yo($o.parseYrc(t,r))}(e.yrc.lyric),n=Ul(o),e?.ytlrc?.lyric&&(l=ul(e.ytlrc.lyric),n=jl(n,Bl(l),"tran")),e?.yromalrc?.lyric&&(u=ul(e.yromalrc.lyric),n=jl(n,Bl(u),"roma"))),t.songLyric={lrcData:r,yrcData:n,lrcAMData:Gl(i,a,s),yrcAMData:Gl(o,l,u)}},Bl=e=>{if(!e)return[];return e.map((e=>{const t=e.words,r=Et(t[0].startTime),n=t[0].word.trim();return!n||Fl().some((e=>n.includes(e)))?null:{time:r,content:n}})).filter((e=>null!==e))},Ul=e=>{if(!e)return[];return e.map((e=>{const t=e.words,r=Et(t[0].startTime),n=Et(t[t.length-1].endTime),i=t.map((e=>({time:Et(e.startTime),endTime:Et(e.endTime),duration:Et(e.endTime-e.startTime),content:e.word.trim(),endsWithSpace:e.word.endsWith(" ")}))),a=i.map((e=>e.content+(e.endsWithSpace?" ":""))).join("");return!a||Fl().some((e=>a.includes(e)))?null:{time:r,endTime:n,content:a,contents:i}})).filter((e=>null!==e))},jl=(e,t,r)=>{const n=e;return n.length&&t.length&&n.forEach((e=>{t.forEach((t=>{(e.time===t.time||Math.abs(e.time-t.time)<.6)&&(e[r]=t.content)}))})),n},Gl=(e,t,r)=>e.map(((e,n,i)=>({words:e.words,startTime:e.words[0]?.startTime??0,endTime:i[n+1]?.words?.[0]?.startTime??e.words?.[e.words.length-1]?.endTime??1/0,translatedLyric:t?.[n]?.words?.[0]?.word??"",romanLyric:r?.[n]?.words?.[0]?.word??"",isBG:e.isBG??!1,isDuet:e.isDuet??!1}))),zl=["mp3","flac","webm","ogg","wav"];const Hl=new class{player;playerInterval;audioContext=null;analyser=null;dataArray=null;source=null;testNumber=0;message=null;constructor(){this.player=new Ho.Howl({src:[""],format:zl,autoplay:!1}),this.initMediaSession()}resetStatus(){const e=i(),t=Ke();e.$patch({currentTime:0,duration:0,progress:0,chorus:0,currentTimeOffset:0,lyricIndex:-1,playStatus:!1,playLoading:!1}),t.$patch({playPlaylistId:0,playSong:{}})}getPlaySongData(){const e=ke(),t=Ke(),r=i();if(r.personalFmMode)return t.personalFMSong;const n=e.playList;return n.length?n[r.playIndex]:null}getFadeTime(){const e=r(),{songVolumeFade:t,songVolumeFadeTime:n}=e;return t?n:0}handlePlayStatus(){const e=Ke(),t=i(),n=r();clearInterval(this.playerInterval),this.playerInterval=setInterval((()=>{if(!this.player.playing())return;const r=this.getSeek(),i=this.player.duration(),a=Ot(r,i),s=!e.songLyric.yrcData.length||!n.showYrc?e.songLyric.lrcData:e.songLyric.yrcData,o=t.currentTimeOffset,l=s?.findIndex((e=>e?.time>=r+o)),u=-1===l?s.length-1:l-1;t.$patch({currentTime:r,duration:i,progress:a,lyricIndex:u}),Y&&(window.electron.ipcRenderer.send("play-lyric-change",{index:u,lyric:St(n.showYrc&&e.songLyric.yrcData?.length?e.songLyric.yrcData:e.songLyric.lrcData)}),n.showTaskbarProgress&&window.electron.ipcRenderer.send("set-bar",a))}),250)}async getOnlineUrl(e){const t=r(),n=await At(e,t.songLevel),i=n.data?.[0];if(!i||!i?.url)return null;if(null!==i?.freeTrialInfo){if(!t.playSongDemo)return null;window.$message.warning("当前歌曲仅可试听，请开通会员后重试")}return Y?i.url:i.url.replace(/^http:/,"https:")}async getUnlockSongUrl(e){try{const t=e.id,r=Array.isArray(e.artists)?e.artists[0].name:e.artists,n=e.name+"-"+r;if(!t||!n)return null;const[i,a]=await Promise.all([kt(t,n,"netease"),kt(t,n,"kuwo")]);return 200===i.code&&""!==i.url?i.url:200===a.code&&""!==a.url?a.url:null}catch(t){return console.error("Error in getUnlockSongUrl",t),null}}async createPlayer(e,t=!0,n=0){const a=ke(),s=Ke(),o=i(),l=r(),{id:u,path:c,type:d}=s.playSong;Ho.Howler.unload(),this.player=new Ho.Howl({src:e,format:zl,html5:!0,autoplay:t,preload:"metadata",pool:1,volume:o.playVolume,rate:o.playRate}),this.playerEvent({seek:n}),l.showSpectrums||this.toggleOutputDevice(),t&&this.play(),"radio"===d||c?Dl():(this.getLyricData(u),this.getChorus(u)),this.playerInterval||this.handlePlayStatus(),"radio"!==d&&a.setHistory(s.playSong),c||this.getCoverColor(s.songCover),c||this.updateMediaSession()}playerEvent(e={seek:0}){const t=ke(),n=i(),a=r(),s=this.getPlaySongData(),{seek:o}=e;this.player.once("load",(()=>{if(a.showSpectrums){this.getAudioDom().crossOrigin="anonymous"}o&&n.duration-n.currentTime>2&&this.setSeek(o),n.playLoading=!1,Y&&(window.electron.ipcRenderer.send("play-song-change",this.getPlayerInfo()),window.electron.ipcRenderer.send("like-status-change",t.isLikeSong(s?.id||0)))})),this.player.on("play",(()=>{window.document.title=this.getPlayerInfo()||"SPlayer",Y&&(window.electron.ipcRenderer.send("play-status-change",!0),window.electron.ipcRenderer.send("play-song-change",this.getPlayerInfo()))})),this.player.on("pause",(()=>{Y||(window.document.title="SPlayer"),Y&&window.electron.ipcRenderer.send("play-status-change",!1)})),this.player.on("end",(()=>{this.nextOrPrev("next")})),this.player.on("loaderror",((e,t)=>{this.errorNext(t),console.error("❌ song error:",e,s,t)}))}initMediaSession(){"mediaSession"in navigator&&(navigator.mediaSession.setActionHandler("play",(()=>this.play())),navigator.mediaSession.setActionHandler("pause",(()=>this.pause())),navigator.mediaSession.setActionHandler("previoustrack",(()=>this.nextOrPrev("prev"))),navigator.mediaSession.setActionHandler("nexttrack",(()=>this.nextOrPrev("next"))),navigator.mediaSession.setActionHandler("seekto",(e=>{e.seekTime&&this.setSeek(e.seekTime)})))}updateMediaSession(){if(!("mediaSession"in navigator))return;const e=Ke(),t=r(),n=this.getPlaySongData();if(!n)return;const i="radio"===n.type,a={title:n.name,artist:i?"播客电台":Array.isArray(n.artists)?n.artists.map((e=>e.name)).join(" / "):String(n.artists),album:i?"播客电台":"object"==typeof n.album?n.album.name:String(n.album),artwork:t.smtcOutputHighQualityCover?[{src:e.getSongCover("xl"),sizes:"1920x1920",type:"image/jpeg"}]:[{src:e.getSongCover("cover"),sizes:"512x512",type:"image/jpeg"},{src:e.getSongCover("s"),sizes:"100x100",type:"image/jpeg"},{src:e.getSongCover("m"),sizes:"300x300",type:"image/jpeg"},{src:e.getSongCover("l"),sizes:"1024x1024",type:"image/jpeg"},{src:e.getSongCover("xl"),sizes:"1920x1920",type:"image/jpeg"}]};navigator.mediaSession.metadata=new window.MediaMetadata(a)}generateSpectrumData(){const e=i();this.analyser&&this.dataArray||this.initSpectrumData();const t=()=>{this.analyser&&this.dataArray&&(this.analyser.getByteFrequencyData(this.dataArray),e.spectrumsData=Array.from(this.dataArray)),requestAnimationFrame(t)};t()}async getLyricData(e){if(!e)return void Dl();const t=await rt(e);Nl(t)}async getChorus(e){const t=i(),r=await Ct(e);if(200!==r?.code||0===r?.chorus?.length)return void(t.chorus=0);const n=r?.chorus?.[0]?.startTime,a=(n/1e3/t.duration*100).toFixed(2);t.chorus=Number(a)}async errorNext(e){const t=ke();if(this.testNumber++,this.testNumber>5)return this.testNumber=0,this.resetStatus(),void window.$message.error("当前重试次数过多，请稍后再试");2!==e?t.playList.length>1?await this.nextOrPrev("next"):(window.$message.error("当前列表暂无可播放歌曲"),this.cleanPlayList()):await this.initPlayer(!0,this.getSeek())}getAudioDom(){const e=this.player._sounds[0]._node;if(!e)throw new Error("Audio Dom is null");return e}async parseLocalMusicInfo(e){try{const t=Ke(),r=await window.electron.ipcRenderer.invoke("get-music-cover",e);if(r){const{data:n,format:i}=r,a=uo.createBlobURL(n,i,e);a&&(t.playSong.cover=a)}else t.playSong.cover="/images/song.jpg?assest";this.getCoverColor(t.playSong.cover);(e=>{if(!e)return void Dl();const t=Ke(),r=ul(e),n=Bl(r),i=[];for(let a=0;a<n.length;a++){const e=n[a],t=i.find((t=>t.time===e.time));t?t.tran=e.content:i.push(e)}t.songLyric={lrcData:i,lrcAMData:i.map(((e,t,r)=>({words:[{startTime:e.time,endTime:0,word:e.content}],startTime:1e3*e.time,endTime:1e3*r[t+1]?.time,translatedLyric:e.tran??"",romanLyric:e.roma??"",isBG:!1,isDuet:!1}))),yrcData:[],yrcAMData:[]}})(await window.electron.ipcRenderer.invoke("get-music-lyric",e)),this.updateMediaSession()}catch(t){window.$message.error("获取本地歌曲元信息失败"),console.error("Failed to parse local music info:",t)}}getPlayerInfo(e,t="/"){const r=e||this.getPlaySongData();if(!r)return null;return`${`${r.name||"未知歌曲"}`} - ${"radio"===r.type?"播客电台":Array.isArray(r.artists)?r.artists.map((e=>e.name)).join(t):String(r?.artists||"未知歌手")}`}async initPlayer(e=!0,t=0){const n=ke(),a=Ke(),s=i(),o=r();try{const r=this.getPlaySongData();if(!r)return;const{id:i,dj:l,path:u,type:c}=r;if(a.playSong=r,s.playLoading=!0,u)await this.createPlayer(u,e,t),await this.parseLocalMusicInfo(u);else if(i&&n.playList.length){const a="radio"===c?l?.id:i;if(!a)throw new Error("Get song id error");const u=await this.getOnlineUrl(a);if(u)s.playUblock=!1,await this.createPlayer(u,e,t);else{if(!Y||"radio"===c||!o.useSongUnlock)return 1===n.playList.length?(this.resetStatus(),void window.$message.warning("当前播放列表已无可播放歌曲，请更换")):(window.$message.error("该歌曲无法播放，跳至下一首"),void this.nextOrPrev());{const i=await this.getUnlockSongUrl(r);i?(s.playUblock=!0,await this.createPlayer(i,e,t)):(s.playUblock=!1,s.playIndex===n.playList.length-1?(s.$patch({playStatus:!1,playLoading:!1}),window.$message.warning("当前列表歌曲无法播放，请更换歌曲")):(window.$message.error("该歌曲暂无音源，跳至下一首"),this.nextOrPrev("next")))}}}}catch(l){console.error("❌ 初始化音乐播放器出错：",l),window.$message.error("播放器遇到错误，请尝试软件热重载")}}async play(){const e=i();this.player.playing()?e.playStatus=!0:(this.player.play(),e.playStatus=!0,await new Promise((t=>{this.player.once("play",(()=>{this.player.fade(0,e.playVolume,this.getFadeTime()),t()}))})))}async pause(e=!0){const t=i();"loaded"===this.player.state()&&await new Promise((r=>{this.player.fade(t.playVolume,0,this.getFadeTime()),this.player.once("fade",(()=>{this.player.pause(),e&&(t.playStatus=!1),r()}))}))}async playOrPause(){i().playStatus?await this.pause():await this.play()}async nextOrPrev(e="next",t=!0){try{const r=i(),n=ke(),a=Ke(),{playList:s}=n,{playSong:o}=a,{playSongMode:l,playHeartbeatMode:u}=r,c=s.length;if(0===c)throw new Error("Play list is empty");if(this.scrobbleSong(),r.personalFmMode)return void(await this.initPersonalFM(!0));if(1===c&&(r.lyricIndex=-1,this.setSeek(0),await this.play()),"repeat"===l||u||"radio"===o.type)r.playIndex+="next"===e?1:-1;else{if("shuffle"!==l){if("repeat-once"===l)return r.lyricIndex=-1,this.setSeek(0),void(await this.play());throw new Error("The play mode is not supported")}{let e;do{e=Math.floor(Math.random()*c)}while(e===r.playIndex);r.playIndex=e}}r.playIndex<0?r.playIndex=c-1:r.playIndex>=c&&(r.playIndex=0),await this.pause(!1),await this.initPlayer(t)}catch(r){throw console.error("Error in nextOrPrev:",r),r}}togglePlayMode(e){const t=i();if(t.playHeartbeatMode&&this.toggleHeartMode(!1),e)t.playSongMode=e;else switch(t.playSongMode){case"repeat":t.playSongMode="repeat-once";break;case"shuffle":default:t.playSongMode="repeat";break;case"repeat-once":t.playSongMode="shuffle"}this.playModeSyncIpc()}playModeSyncIpc(){const e=i();Y&&window.electron.ipcRenderer.send("play-mode-change",e.playSongMode)}setSeek(e){const t=i();this.player.seek(e),t.currentTime=e}getSeek(){return this.player.seek()}setRate(e){const t=i();this.player.rate(e),t.playRate=e}setVolume(e){const t=i(),r=.05;if("number"==typeof e)e=Math.max(0,Math.min(e,1));else if("up"===e||"down"===e)t.playVolume=Math.max(0,Math.min(t.playVolume+("up"===e?r:-.05),1));else{const n=e.deltaY>0?-.05:r;t.playVolume=Math.max(0,Math.min(t.playVolume+n,1))}this.player.volume(t.playVolume)}toggleMute(){const e=i();0===e.playVolume?e.playVolume=e.playVolumeMute:(e.playVolumeMute=this.player.volume(),e.playVolume=0),this.player.volume(e.playVolume)}async getCoverColor(r){if(!r)return;const n=i(),a=new Image;a.crossOrigin="Anonymous",a.src=r,a.onload=()=>{const r=(r=>{if(!r)return null;const n=document.createElement("canvas");n.width=50,n.height=50;const i=n.getContext("2d");if(!i)return null;i.drawImage(r,0,0,r.naturalWidth,r.naturalHeight,0,0,50,50);const a=e(i.getImageData(0,0,50,50).data,4).map((e=>(e[3]<<24>>>0|e[0]<<16>>>0|e[1]<<8>>>0|e[2])>>>0)),s=ei.quantize(a,128),o=Array.from(s).sort(((e,t)=>t[1]-e[1]));if(o.slice(0,5).map((e=>t(e[0]))).every((e=>Math.max(...e)-Math.min(...e)<5)))return{main:{r:239,g:239,b:239},light:{primary:{r:10,g:10,b:10},background:{r:238,g:238,b:238},"surface-container":{r:212,g:212,b:212}},dark:{primary:{r:239,g:239,b:239},background:{r:31,g:31,b:31},"surface-container":{r:39,g:39,b:39}}};const l=ai(ii.score(new Map(o.slice(0,50)))[0]),u="secondary";return n.remove(),{main:$i(Sn.from(l.palettes[u].hue,l.palettes[u].chroma,90).toInt()),light:{primary:$i(Sn.from(l.palettes[u].hue,l.palettes[u].chroma,10).toInt()),background:$i(Sn.from(l.palettes[u].hue,l.palettes[u].chroma,94).toInt()),"surface-container":$i(Sn.from(l.palettes[u].hue,l.palettes[u].chroma,90).toInt())},dark:{primary:$i(Sn.from(l.palettes[u].hue,l.palettes[u].chroma,90).toInt()),background:$i(Sn.from(l.palettes[u].hue,l.palettes[u].chroma,20).toInt()),"surface-container":$i(Sn.from(l.palettes[u].hue,l.palettes[u].chroma,16).toInt())}}})(a);r&&(n.songCoverTheme=r),a.remove()}}async updatePlayList(e,t,r,n={showTip:!0,scrobble:!0,play:!0}){if(!e||!e.length)return;const a=ke(),s=Ke(),o=i(),{showTip:l,scrobble:u,play:c}=n;u&&this.scrobbleSong(),await a.setPlayList(St(e)),o.playHeartbeatMode&&this.toggleHeartMode(!1),o.personalFmMode&&(o.personalFmMode=!1),t&&"object"==typeof t&&"id"in t?s.playSong.id===t.id?c&&await this.play():(o.playIndex=e.findIndex((e=>e.id===t.id)),await this.pause(!1),await this.initPlayer()):(o.playIndex="shuffle"===o.playSongMode?Math.floor(Math.random()*e.length):0,await this.pause(!1),await this.initPlayer()),s.playPlaylistId=r??0,l&&window.$message.success("已开始播放")}async addNextSong(e,t=!1){const r=ke(),n=Ke(),a=i();if(a.personalFmMode&&(a.personalFmMode=!1),n.playSong.id===e.id)return this.play(),void window.$message.success("已开始播放");const s=await r.setNextPlaySong(e,a.playIndex);s<0||(t?this.togglePlayIndex(s,!0):window.$message.success("已添加至下一首播放"))}async togglePlayIndex(e,t=!1){const r=ke(),n=i(),{playList:a}=r;e>=a.length||(t||n.playIndex!==e?(n.playIndex=e,this.resetStatus(),await this.initPlayer()):this.play())}removeSongIndex(e){const t=ke(),r=i(),{playList:n}=t;if(e>=n.length)return;if(1===n.length)return void this.cleanPlayList();const a=r.playIndex===e,s=St(n);e===n.length-1?r.playIndex=0:r.playIndex>e&&r.playIndex--,s.splice(e,1),t.setPlayList(s),a&&this.initPlayer(r.playStatus)}async cleanPlayList(){const e=ke(),t=Ke(),r=i();Ho.Howler.unload(),this.resetStatus(),r.$patch({playListShow:!1,showFullPlayer:!1,playHeartbeatMode:!1,personalFmMode:!1,playIndex:-1}),t.resetMusicData(),e.setPlayList([]),window.$message.success("已清空播放列表")}toggleOutputDevice(e){try{const t=r(),n=e??t.playDevice;if(!this.player?._sounds.length)return;const i=this.getAudioDom();n&&i?.setSinkId&&i.setSinkId(n)}catch(t){console.error("Failed to change audio output device:",t)}}initSpectrumData(){try{if(this.audioContext)return;this.audioContext=new(window.AudioContext||window.webkitAudioContext);const e=this.getAudioDom();this.source=this.audioContext.createMediaElementSource(e),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=512,this.source.connect(this.analyser),this.analyser.connect(this.audioContext.destination);const t=this.analyser.frequencyBinCount;this.dataArray=new Uint8Array(t),this.generateSpectrumData()}catch(e){console.error("🎼 Initialize music spectrum failed:",e)}}toggleDesktopLyric(){const e=i(),t=!e.showDesktopLyric;e.showDesktopLyric=t,window.electron.ipcRenderer.send("change-desktop-lyric",t),window.$message.success((t?"已开启":"已关闭")+"桌面歌词")}async toggleHeartMode(e=!0){try{const t=ke(),r=Ke(),n=i();if(!e&&n.playHeartbeatMode)return n.playHeartbeatMode=!1,void window.$message.success("已退出心动模式");if(1!==K())return void(0===K()?cd(!0):window.$message.warning("该登录模式暂不支持该操作"));if(n.playHeartbeatMode)return window.$message.warning("已处于心动模式"),void this.play();this.message?.destroy(),this.message=window.$message.loading("心动模式开启中",{duration:0});const a=this.getPlaySongData(),s=await t.getUserLikePlaylist(),o=r.playPlaylistId&&0!==r.playPlaylistId?r.playPlaylistId:s?.detail?.id,l=await Pt(a?.id||0,o);if(200===l.code){this.message?.destroy();const e=Je(l.data);await this.updatePlayList(e,e[0]),n.playHeartbeatMode=!0}else this.message?.destroy(),window.$message.error(l.message||"心动模式开启出错，请重试")}catch(t){console.error("Failed to toggle heart mode:",t),this.message?.destroy(),window.$message.error("心动模式开启出错，请重试")}finally{this.message?.destroy()}}async scrobbleSong(){const e=Ke(),t=i(),n=r();try{if(!K())return;if(!n.scrobbleSong)return;const r=this.getPlaySongData();if(!r)return;const{id:i,name:a}=r,s=e.playPlaylistId,o=t.duration;await Rt(i,s,o)}catch(a){console.error("Failed to scrobble song:",a)}}async initPersonalFM(e=!1){const t=Ke(),r=i();try{const n=async()=>{const e=await Mt(),r=Je(e.data);t.personalFM.list=r,t.personalFM.playIndex=0};0===t.personalFM.list.length&&await n(),e&&(r.personalFmMode=!0,t.personalFM.playIndex<t.personalFM.list.length-1?t.personalFM.playIndex++:await n(),this.resetStatus(),await this.initPlayer())}catch(n){console.error("Failed to initialize personal FM:",n)}}async personalFMTrash(e){try{const t=i();if(!K())return void cd(!0);t.personalFmMode=!0,t.playHeartbeatMode=!1;200===(await Lt(e)).code&&(window.$message.success("已移至垃圾桶"),this.nextOrPrev("next"))}catch(t){console.error("Error adding to trash:",t),window.$message.error("移至垃圾桶失败，请重试")}}},Vl={class:"download-song"},$l=n({__name:"DownloadSong",props:{id:{}},emits:["close"],setup(e,{emit:t}){const n=e,i=t,a=r(),l=s(null),u=s(!1),m=s(a.downloadPath),g=s("h"),v=s([]),_=o((()=>l.value&&l.value?.pc)),b=(e,t)=>e&&t?Bt(e,((e,r,n)=>(t[n]&&r&&e.push({name:r.name,level:r.level,value:n,br:t[n]?.br,size:t[n]?.size}),e)),[]):[],w=async()=>{const e=await window.electron.ipcRenderer.invoke("choose-path");e&&(m.value=e)},x=async()=>{if(l.value){u.value=!0,a.downloadPath&&(m.value=a.downloadPath);try{const e=await Ut(n.id,g.value);if(200!==e.code||!e?.data?.url)return void window.$message.error(e.message||"获取下载链接失败，请重试");if(""===m.value&&Y)return void window.$notification.warning({title:"缺少配置",description:"请前往设置页配置默认下载目录",duration:5e3});const{url:t,type:r="mp3"}=e.data,a=Hl.getPlayerInfo(l.value)||"未知曲目";Y?await I(t,a,r.toLowerCase()):zo.saveAs(e.data.url,`${a}.${e.data?.type||"mp3"}`),i("close"),window.$message.success("歌曲下载成功")}catch(e){console.error("Error downloading song:",e),window.$message.error("下载歌曲出现错误，请重试")}finally{u.value=!1}}},I=async(e,t,r)=>{const{downloadMeta:i,downloadCover:s,downloadLyric:o,saveMetaFile:u}=a;let c="";if(o){const e=await rt(n.id);c=e?.lrc?.lyric||""}const d={fileName:t.replace(/[/:*?"<>|]/g,"&"),fileType:r,path:m.value,downloadMeta:i,downloadCover:s,downloadLyric:o,saveMetaFile:u,songData:St(l.value),lyric:c};if(!(await window.electron.ipcRenderer.invoke("download-file",e,d)))throw new Error("下载歌曲出现错误，请重试")};return c((()=>(async()=>{if(!n.id)return;const e=await vt(n.id);l.value=Je(e.songs)[0];const t=await Dt(n.id),r=Nt(e?.privileges?.[0]?.downloadMaxBrLevel);if(!r)return window.$message.error("获取下载信息失败，请重试");v.value=b(r,t?.data)})())),(e,t)=>{const r=_e,n=_t,a=Ee,s=So,o=Ae,c=jt,b=Gt,I=zt,T=le,E=Se,S=ce,A=at,k=Ht;return d(),F("div",Vl,[p(n,{show:!y(l)},{default:f((()=>[p(r,{class:"loading"},{default:f((()=>t[3]||(t[3]=[te(" 正在加载歌曲信息... ")]))),_:1})])),_:1},8,["show"]),p(n,{show:!!y(l)},{default:f((()=>[p(a,{type:y(_)?"info":"warning",title:y(_)?void 0:"请知悉",closable:""},{default:f((()=>[te(re(y(_)?"当前为云盘歌曲，下载的文件均为上传时的源文件":"本软件仅支持从官方途径合法合规的下载歌曲，并用于学习研究用途。本功能将严格按照相应账户的权限来提供基础的下载功能"),1)])),_:1},8,["type","title"]),p(s,{data:y(l)},null,8,["data"]),p(k,{"default-expanded-names":["path"],"arrow-placement":"right"},{default:f((()=>[p(I,{title:"音质选择",name:"level"},{default:f((()=>[p(b,{value:y(g),"onUpdate:value":t[0]||(t[0]=e=>xe(g)?g.value=e:null),name:"level"},{default:f((()=>[p(o,null,{default:f((()=>[(d(!0),F(De,null,Ne(y(v),((e,t)=>(d(),h(c,{key:t,value:e.value},{default:f((()=>[p(o,null,{default:f((()=>[p(r,{class:"name"},{default:f((()=>[te(re(e.name),1)])),_:2},1024),p(r,{depth:"3"},{default:f((()=>[te(re(y(Ft)(e.size||0)),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["value"])))),128))])),_:1})])),_:1},8,["value"])])),_:1}),y(Y)?(d(),h(I,{key:0,title:"本次下载路径",name:"path"},{default:f((()=>[p(A,null,{default:f((()=>[p(E,{value:y(m)||"未配置下载目录",disabled:""},{prefix:f((()=>[p(T,{name:"Folder"})])),_:1},8,["value"]),p(S,{type:"primary",strong:"",secondary:"",onClick:w},{icon:f((()=>[p(T,{name:"Folder"})])),_:1}),p(S,{type:"primary",strong:"",secondary:"",onClick:t[1]||(t[1]=e=>y(_d)("local"))},{icon:f((()=>[p(T,{name:"Settings"})])),default:f((()=>[t[4]||(t[4]=te(" 更多设置 "))])),_:1})])),_:1})])),_:1})):pe("",!0)])),_:1})])),_:1},8,["show"]),p(o,{class:"menu",justify:"end"},{default:f((()=>[p(S,{strong:"",secondary:"",onClick:t[2]||(t[2]=e=>i("close"))},{default:f((()=>t[5]||(t[5]=[te(" 取消 ")]))),_:1}),p(S,{loading:y(u),type:"primary",onClick:x},{default:f((()=>t[6]||(t[6]=[te(" 下载歌曲 ")]))),_:1},8,["loading"])])),_:1})])}}}),Xl=B($l,[["__scopeId","data-v-cf0ea9d4"]]),ql={name:"splayer",productName:"SPlayer",version:"3.0.0-beta.1",description:"A minimalist music player",main:"./out/main/index.js",author:"imsyy",home:"https://imsyy.top",github:"https://github.com/imsyy/SPlayer",blog:"https://blog.imsyy.top",repository:"github:imsyy/SPlayer",license:"AGPL-3.0","license-file":"LICENSE",engines:{node:">=20",npm:">=10"},type:"module",scripts:{format:"prettier --write .",lint:"npx eslint . --fix","typecheck:node":"tsc --noEmit -p tsconfig.node.json --composite false","typecheck:web":"vue-tsc --noEmit -p tsconfig.web.json --composite false",typecheck:"npm run typecheck:node && npm run typecheck:web",start:"electron-vite preview",dev:"electron-vite dev",build:"npm run typecheck && electron-vite build",postinstall:"electron-builder install-app-deps","build:web":"npm run build","build:unpack":"npm run build && electron-builder --dir","build:win":"npm run build && electron-builder --win","build:mac":"npm run build && electron-builder --mac","build:linux":"npm run build && electron-builder --linux"},dependencies:{"@applemusic-like-lyrics/core":"^0.1.3","@applemusic-like-lyrics/lyric":"^0.2.4","@applemusic-like-lyrics/vue":"^0.1.5","@electron-toolkit/preload":"^3.0.1","@electron-toolkit/utils":"^3.0.0","@imsyy/color-utils":"^1.0.2","@material/material-color-utilities":"^0.3.0","@pixi/app":"^7.4.2","@pixi/core":"^7.4.2","@pixi/display":"^7.4.2","@pixi/filter-blur":"^7.4.2","@pixi/filter-bulge-pinch":"^5.1.1","@pixi/filter-color-matrix":"^7.4.2","@pixi/sprite":"^7.4.2","@vueuse/core":"^12.0.0",NeteaseCloudMusicApi:"^4.25.0",axios:"^1.7.9","change-case":"^5.4.4",dayjs:"^1.11.13","electron-dl":"^4.0.0","electron-store":"^8.2.0","electron-updater":"^6.3.9","file-saver":"^2.0.5","font-list":"^1.5.1","get-port":"^7.1.0","github-markdown-css":"^5.8.1",howler:"^2.2.4","js-cookie":"^3.0.5",jss:"^10.10.0","jss-preset-default":"^10.10.0",localforage:"^1.10.0","lodash-es":"^4.17.21",marked:"^14.1.4",md5:"^2.3.0","music-metadata":"7.14.0",pinia:"^2.3.0","pinia-plugin-persistedstate":"^4.1.3",plyr:"^3.7.8","vue-virt-list":"^1.5.5"},devDependencies:{"@electron-toolkit/preload":"^3.0.1","@electron-toolkit/tsconfig":"^1.0.1","@electron-toolkit/utils":"^3.0.0","@fastify/cookie":"^9.4.0","@fastify/http-proxy":"^9.5.0","@fastify/multipart":"^8.3.0","@fastify/static":"^7.0.4","@types/file-saver":"^2.0.7","@types/howler":"^2.2.12","@types/js-cookie":"^3.0.6","@types/md5":"^2.3.5","@types/node":"^22.10.1","@typescript-eslint/eslint-plugin":"^8.18.0","@typescript-eslint/parser":"^8.18.0","@vitejs/plugin-vue":"^5.2.1",ajv:"^8.17.1","crypto-js":"^4.2.0",electron:"^30.5.1","electron-builder":"^25.1.8","electron-log":"^5.2.4","electron-vite":"^2.3.0",eslint:"^9.16.0","eslint-plugin-vue":"^9.32.0","fast-glob":"^3.3.2",fastify:"^4.29.0","naive-ui":"^2.40.3","node-taglib-sharp":"^5.2.3",prettier:"^3.4.2",sass:"^1.82.0",terser:"^5.37.0",typescript:"5.6.2","unplugin-auto-import":"^0.18.6","unplugin-vue-components":"^0.27.5",vite:"^5.4.11","vite-plugin-compression":"^0.5.1","vite-plugin-wasm":"^3.3.0",vue:"^3.5.13","vue-router":"^4.5.0","vue-tsc":"2.0.29"},pnpm:{overrides:{"dmg-builder":"25.1.8","electron-builder-squirrel-windows":"25.1.8"}}},Wl={class:"setting-type"},Yl={class:"set-list"},Kl=["innerHTML"],Zl={class:"set-list"},Ql=["innerHTML"],Jl={class:"set-list"},eu=B(n({__name:"AboutSetting",setup(e){const t=i(),r=[{name:"GitHub",url:ql.github,icon:"Github"},{name:"官方博客",url:ql.blog,icon:"RssFeed"}],n=s(null),a=o((()=>n.value?.[0])),l=o((()=>{const e=n.value?.slice(1);return e||[]})),u=Q((()=>{Y?(t.updateCheck=!0,window.electron.ipcRenderer.send("check-update",!0)):window.open(ql.github+"/releases","_blank")}),300,{leading:!0,trailing:!1}),m=e=>{const t=e.target;"A"===t.tagName&&(e.preventDefault(),Vt(t.href))};return c((async()=>n.value=await $t())),(e,i)=>{const s=Xe,o=le,c=_e,g=Ve,v=Ae,_=ce,b=Ge,w=_t,x=zt,I=Ht;return d(),F("div",Wl,[D("div",Yl,[p(s,{prefix:"bar"},{default:f((()=>i[0]||(i[0]=[te(" 关于软件 ")]))),_:1}),p(b,{class:"set-item"},{default:f((()=>[p(v,{align:"center",class:"about"},{default:f((()=>[p(o,{name:"SPlayer",size:"26"}),p(c,{class:"logo-name"},{default:f((()=>i[1]||(i[1]=[te("SPlayer")]))),_:1}),p(g,{bordered:!1,size:"small",type:"primary"},{default:f((()=>[te(re(y(ql).version),1)])),_:1})])),_:1}),p(_,{loading:y(t).updateCheck,type:"primary",strong:"",secondary:"",onClick:y(u)},{default:f((()=>[te(re(y(t).updateCheck?"检查更新中":"检查更新"),1)])),_:1},8,["loading","onClick"])])),_:1}),p(w,{show:!!y(n)},{default:f((()=>[p(b,{class:"set-item update-data"},{default:f((()=>[p(v,{class:"version"},{default:f((()=>[p(c,null,{default:f((()=>i[2]||(i[2]=[te("最新版本")]))),_:1}),p(g,{bordered:!1,size:"small",type:"primary"},{default:f((()=>[te(re(y(a)?.version||"v0.0.0"),1)])),_:1}),y(a)?.prerelease?(d(),h(g,{key:0,class:"test",size:"small",type:"warning"},{default:f((()=>i[3]||(i[3]=[te(" 测试版 ")]))),_:1})):pe("",!0),p(c,{depth:3,class:"time"},{default:f((()=>[te(re(y(a)?.time),1)])),_:1})])),_:1}),D("div",{class:"markdown-body",innerHTML:y(a)?.changelog,onClick:m},null,8,Kl)])),_:1})])),_:1},8,["show"])]),D("div",Zl,[p(s,{prefix:"bar"},{default:f((()=>i[4]||(i[4]=[te(" 历史版本 ")]))),_:1}),p(w,{show:y(l)?.length>0},{default:f((()=>[p(I,{accordion:""},{default:f((()=>[(d(!0),F(De,null,Ne(y(l),((e,t)=>(d(),h(x,{key:t,title:e.version,name:e.version},{default:f((()=>[p(b,{class:"set-item update-data"},{default:f((()=>[p(v,{class:"version",justify:"space-between"},{default:f((()=>[p(g,{bordered:!1,size:"small",type:"primary"},{default:f((()=>[te(re(e?.version||"v0.0.0"),1)])),_:2},1024),p(c,{depth:3,class:"time"},{default:f((()=>[te(re(e?.time),1)])),_:2},1024)])),_:2},1024),D("div",{class:"markdown-body",innerHTML:e?.changelog,onClick:m},null,8,Ql)])),_:2},1024)])),_:2},1032,["title","name"])))),128))])),_:1})])),_:1},8,["show"])]),D("div",Jl,[p(s,{prefix:"bar"},{default:f((()=>i[5]||(i[5]=[te(" 社区与资讯 ")]))),_:1}),p(v,{class:"link"},{default:f((()=>[(d(),F(De,null,Ne(r,((e,t)=>p(b,{key:t,class:"link-item",hoverable:"",onClick:t=>y(Vt)(e.url)},{default:f((()=>[p(o,{name:e.icon,size:26},null,8,["name"]),p(c,{class:"name"},{default:f((()=>[te(re(e.name),1)])),_:2},1024)])),_:2},1032,["onClick"]))),64))])),_:1})])])}}}),[["__scopeId","data-v-c2968e70"]]),tu={class:"setting-type"},ru={class:"set-list"},nu={class:"label"},iu={class:"label"},au={key:0,class:"set-list"},su={class:"label"},ou={class:"label"},lu={class:"label"},uu={class:"label"},cu={class:"set-list"},du={class:"label"},hu={class:"label"},fu=n({__name:"OtherSetting",setup(e){const t=ke(),n=r(),i=s(!1),a=o((()=>({protocol:n.proxyProtocol,server:n.proxyServe,port:n.proxyPort}))),l=Q((()=>{if("off"===n.proxyProtocol||!n.proxyServe||!n.proxyPort)return window.electron.ipcRenderer.send("remove-proxy"),void window.$message.success("成功关闭网络代理");window.electron.ipcRenderer.send("set-proxy",a.value),window.$message.success("网络代理配置完成，请重启软件")}),300),u=async()=>{i.value=!0;await window.electron.ipcRenderer.invoke("test-proxy",a.value)?window.$message.success("该代理可正常使用"):window.$message.error("代理测试失败，请重试"),i.value=!1},c=()=>{window.$dialog.warning({title:"警告",content:"此操作将重置所有设置，是否继续?",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{n.$reset(),Y&&window.electron.ipcRenderer.send("reset-setting"),window.$message.success("设置重置完成")}})},h=()=>{window.$dialog.warning({title:"高危操作",content:"此操作将重置所有设置并清除全部数据，同时将退出登录状态，是否继续?",positiveText:"确定",negativeText:"取消",onPositiveClick:async()=>{window.localStorage.clear(),window.sessionStorage.clear(),await t.deleteDB(),Y&&window.electron.ipcRenderer.send("reset-setting"),window.$message.loading("数据清除完成，软件即将热重载",{duration:3e3,onAfterLeave:()=>window.location.reload()})}})};return(e,t)=>{const r=Xe,a=_e,s=wt,o=Ge,m=Se,g=ce,v=se,_=Ae,b=ue,w=_t;return d(),F("div",tu,[D("div",ru,[p(r,{prefix:"bar"},{default:f((()=>t[5]||(t[5]=[te(" 地区解锁 ")]))),_:1}),p(o,{class:"set-item"},{default:f((()=>[D("div",nu,[p(a,{class:"name"},{default:f((()=>t[6]||(t[6]=[te("使用真实 IP 地址")]))),_:1}),p(a,{class:"tip",depth:3},{default:f((()=>t[7]||(t[7]=[te("在海外或部分地区可能会受到限制，可开启此处尝试解决")]))),_:1})]),p(s,{class:"set",value:y(n).useRealIP,"onUpdate:value":t[0]||(t[0]=e=>y(n).useRealIP=e),round:!1},null,8,["value"])])),_:1}),p(o,{class:"set-item"},{default:f((()=>[D("div",iu,[p(a,{class:"name"},{default:f((()=>t[8]||(t[8]=[te("真实 IP 地址")]))),_:1}),p(a,{class:"tip",depth:3},{default:f((()=>t[9]||(t[9]=[te("可在此处输入国内 IP")]))),_:1})]),p(m,{value:y(n).realIP,"onUpdate:value":t[1]||(t[1]=e=>y(n).realIP=e),disabled:!y(n).useRealIP,placeholder:"请填写真实 IP 地址",class:"set"},{prefix:f((()=>[p(a,{depth:"3"},{default:f((()=>t[10]||(t[10]=[te("IP")]))),_:1})])),_:1},8,["value","disabled"])])),_:1})]),y(Y)?(d(),F("div",au,[p(r,{prefix:"bar"},{default:f((()=>t[11]||(t[11]=[te(" 网络代理 ")]))),_:1}),p(o,{class:"set-item"},{default:f((()=>[D("div",su,[p(a,{class:"name"},{default:f((()=>t[12]||(t[12]=[te("网络代理")]))),_:1}),p(a,{class:"tip",depth:3},{default:f((()=>t[13]||(t[13]=[te("修改后请点击保存或重启软件以应用")]))),_:1})]),p(_,null,{default:f((()=>[p(g,{type:"primary",strong:"",secondary:"",onClick:y(l)},{default:f((()=>t[14]||(t[14]=[te(" 保存并应用 ")]))),_:1},8,["onClick"]),p(v,{value:y(n).proxyProtocol,"onUpdate:value":t[2]||(t[2]=e=>y(n).proxyProtocol=e),options:[{label:"关闭代理",value:"off"},{label:"HTTP 代理",value:"HTTP"},{label:"HTTPS 代理",value:"HTTPS"}],class:"set"},null,8,["value"])])),_:1})])),_:1}),p(o,{class:"set-item"},{default:f((()=>[D("div",ou,[p(a,{class:"name"},{default:f((()=>t[15]||(t[15]=[te("代理服务器地址")]))),_:1}),p(a,{class:"tip",depth:3},{default:f((()=>t[16]||(t[16]=[te("请填写代理服务器地址，如 127.0.0.1")]))),_:1})]),p(m,{value:y(n).proxyServe,"onUpdate:value":t[3]||(t[3]=e=>y(n).proxyServe=e),disabled:"off"===y(n).proxyProtocol,placeholder:"请填写代理服务器地址",class:"set"},{prefix:f((()=>[p(a,{depth:"3"},{default:f((()=>[te(re("off"===y(n).proxyProtocol?"-":y(n).proxyProtocol),1)])),_:1})])),_:1},8,["value","disabled"])])),_:1}),p(o,{class:"set-item"},{default:f((()=>[D("div",lu,[p(a,{class:"name"},{default:f((()=>t[17]||(t[17]=[te("代理服务器端口")]))),_:1}),p(a,{class:"tip",depth:3},{default:f((()=>t[18]||(t[18]=[te("请填写代理服务器端口，如 80")]))),_:1})]),p(b,{value:y(n).proxyPort,"onUpdate:value":t[4]||(t[4]=e=>y(n).proxyPort=e),disabled:"off"===y(n).proxyProtocol,"show-button":!1,min:1,max:65535,placeholder:"请填写代理服务器端口",class:"set"},null,8,["value","disabled"])])),_:1}),p(w,{show:"off"!==y(n).proxyProtocol},{default:f((()=>[p(o,{class:"set-item"},{default:f((()=>[D("div",uu,[p(a,{class:"name"},{default:f((()=>t[19]||(t[19]=[te("测试代理")]))),_:1}),p(a,{class:"tip",depth:3},{default:f((()=>t[20]||(t[20]=[te("测试代理配置是否可正常连通")]))),_:1})]),p(g,{loading:y(i),type:"primary",strong:"",secondary:"",onClick:u},{default:f((()=>t[21]||(t[21]=[te(" 测试代理 ")]))),_:1},8,["loading"])])),_:1})])),_:1},8,["show"])])):pe("",!0),D("div",cu,[p(r,{prefix:"bar"},{default:f((()=>t[22]||(t[22]=[te(" 重置 ")]))),_:1}),p(o,{class:"set-item"},{default:f((()=>[D("div",du,[p(a,{class:"name"},{default:f((()=>t[23]||(t[23]=[te("重置所有设置")]))),_:1}),p(a,{class:"tip",depth:3},{default:f((()=>t[24]||(t[24]=[te("重置所有设置，恢复软件默认值")]))),_:1})]),p(g,{type:"warning",strong:"",secondary:"",onClick:c},{default:f((()=>t[25]||(t[25]=[te(" 重置设置 ")]))),_:1})])),_:1}),p(o,{class:"set-item"},{default:f((()=>[D("div",hu,[p(a,{class:"name"},{default:f((()=>t[26]||(t[26]=[te("清除全部数据")]))),_:1}),p(a,{class:"tip",depth:3},{default:f((()=>t[27]||(t[27]=[te("重置所有设置，清除全部数据")]))),_:1})]),p(g,{type:"error",strong:"",secondary:"",onClick:h},{default:f((()=>t[28]||(t[28]=[te(" 清除全部 ")]))),_:1})])),_:1})])])}}}),pu={class:"setting-type"},mu={class:"set-list"},yu={class:"label"},gu={class:"label"},vu={class:"label"},_u={class:"label"},bu={class:"set-list"},wu={class:"label"},xu={class:"label"},Iu={class:"label"},Tu={class:"label"},Eu={class:"label"},Su=B(n({__name:"LocalSetting",setup(e){const t=r(),n=async()=>{const e=await window.electron.ipcRenderer.invoke("choose-path");e&&(t.downloadPath=e)};return(e,r)=>{const i=Xe,a=_e,s=wt,o=Ge,l=le,u=ce,c=Ae,m=_t;return d(),F("div",pu,[D("div",mu,[p(i,{prefix:"bar"},{default:f((()=>r[8]||(r[8]=[te(" 本地歌曲 ")]))),_:1}),p(o,{class:"set-item"},{default:f((()=>[D("div",yu,[p(a,{class:"name"},{default:f((()=>r[9]||(r[9]=[te("显示本地歌曲封面")]))),_:1}),p(a,{class:"tip",depth:3},{default:f((()=>r[10]||(r[10]=[te("当数量过多时请勿开启，会严重影响性能")]))),_:1})]),p(s,{class:"set",value:y(t).showLocalCover,"onUpdate:value":r[0]||(r[0]=e=>y(t).showLocalCover=e),round:!1},null,8,["value"])])),_:1}),p(o,{class:"set-item"},{default:f((()=>[D("div",gu,[p(a,{class:"name"},{default:f((()=>r[11]||(r[11]=[te("显示本地默认歌曲目录")]))),_:1})]),p(s,{class:"set",value:y(t).showDefaultLocalPath,"onUpdate:value":r[1]||(r[1]=e=>y(t).showDefaultLocalPath=e),round:!1},null,8,["value"])])),_:1}),p(o,{class:"set-item",id:"local-list-choose","content-style":"flex-direction: column"},{default:f((()=>[p(c,{justify:"space-between"},{default:f((()=>[D("div",vu,[p(a,{class:"name"},{default:f((()=>r[12]||(r[12]=[te("本地歌曲目录")]))),_:1}),p(a,{class:"tip",depth:3},{default:f((()=>r[13]||(r[13]=[te("可在此增删本地歌曲目录，歌曲增删实时同步")]))),_:1})]),p(u,{strong:"",secondary:"",onClick:r[2]||(r[2]=e=>y(Xt)())},{icon:f((()=>[p(l,{name:"Folder"})])),default:f((()=>[r[14]||(r[14]=te(" 更改 "))])),_:1})])),_:1}),p(m,{show:y(t).localFilesPath.length>0},{default:f((()=>[(d(!0),F(De,null,Ne(y(t).localFilesPath,((e,t)=>(d(),h(o,{key:t,class:"set-item"},{default:f((()=>[D("div",_u,[p(a,{class:"name"},{default:f((()=>[te(re(e),1)])),_:2},1024)]),p(u,{strong:"",secondary:"",onClick:e=>y(Xt)(t)},{icon:f((()=>[p(l,{name:"Delete"})])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1},8,["show"])])),_:1})]),D("div",bu,[p(i,{prefix:"bar"},{default:f((()=>r[15]||(r[15]=[te(" 下载配置 ")]))),_:1}),p(o,{class:"set-item"},{default:f((()=>[D("div",wu,[p(a,{class:"name"},{default:f((()=>r[16]||(r[16]=[te("默认下载目录")]))),_:1}),p(a,{class:"tip",depth:3},{default:f((()=>[te(re(y(t).downloadPath||"若不设置则无法进行下载"),1)])),_:1})]),p(c,null,{default:f((()=>[p(me,{name:"fade",mode:"out-in"},{default:f((()=>[y(t).downloadPath?(d(),h(u,{key:0,type:"primary",strong:"",secondary:"",onClick:r[3]||(r[3]=e=>y(t).downloadPath="")},{default:f((()=>r[17]||(r[17]=[te(" 清除选择 ")]))),_:1})):pe("",!0)])),_:1}),p(u,{strong:"",secondary:"",onClick:n},{icon:f((()=>[p(l,{name:"Folder"})])),default:f((()=>[r[18]||(r[18]=te(" 更改 "))])),_:1})])),_:1})])),_:1}),p(o,{class:"set-item"},{default:f((()=>[D("div",xu,[p(a,{class:"name"},{default:f((()=>r[19]||(r[19]=[te("下载歌曲元信息")]))),_:1}),p(a,{class:"tip",depth:3},{default:f((()=>r[20]||(r[20]=[te("为当前下载歌曲附加封面及歌词等元信息")]))),_:1})]),p(s,{class:"set",value:y(t).downloadMeta,"onUpdate:value":r[4]||(r[4]=e=>y(t).downloadMeta=e),round:!1},null,8,["value"])])),_:1}),p(o,{class:"set-item"},{default:f((()=>[D("div",Iu,[p(a,{class:"name"},{default:f((()=>r[21]||(r[21]=[te("同时下载封面")]))),_:1}),p(a,{class:"tip",depth:3},{default:f((()=>r[22]||(r[22]=[te("下载歌曲时同时下载封面")]))),_:1})]),p(s,{value:y(t).downloadCover,"onUpdate:value":r[5]||(r[5]=e=>y(t).downloadCover=e),disabled:!y(t).downloadMeta,round:!1,class:"set"},null,8,["value","disabled"])])),_:1}),p(o,{class:"set-item"},{default:f((()=>[D("div",Tu,[p(a,{class:"name"},{default:f((()=>r[23]||(r[23]=[te("同时下载歌词")]))),_:1}),p(a,{class:"tip",depth:3},{default:f((()=>r[24]||(r[24]=[te("下载歌曲时同时下载歌词")]))),_:1})]),p(s,{value:y(t).downloadLyric,"onUpdate:value":r[6]||(r[6]=e=>y(t).downloadLyric=e),disabled:!y(t).downloadMeta,round:!1,class:"set"},null,8,["value","disabled"])])),_:1}),p(o,{class:"set-item"},{default:f((()=>[D("div",Eu,[p(a,{class:"name"},{default:f((()=>r[25]||(r[25]=[te("保留元信息文件")]))),_:1}),p(a,{class:"tip",depth:3},{default:f((()=>r[26]||(r[26]=[te("是否在下载目录中保留元信息文件")]))),_:1})]),p(s,{value:y(t).saveMetaFile,"onUpdate:value":r[7]||(r[7]=e=>y(t).saveMetaFile=e),disabled:!y(t).downloadMeta,round:!1,class:"set"},null,8,["value","disabled"])])),_:1})])])}}}),[["__scopeId","data-v-6dd65471"]]),Au={class:"setting-type"},ku={class:"set-list"},Cu={class:"label"},Pu={class:"set-list"},Ru={class:"label"},Mu=n({__name:"KeyboardSetting",setup(e){const t=qt(),r=s(null),n=s(!1),i=s(""),a=s(St(t.shortcutList)),o=(e,t=!1)=>{r.value=e,n.value=t,t&&window.electron.ipcRenderer.send("unregister-all-shortcut")},l=()=>{r.value&&t.registerAllShortcuts(),r.value=null,n.value=!1},u=async e=>{if(e.preventDefault(),e.stopPropagation(),!r.value)return;if(e.code===i.value)return;if(i.value=e.code,"Backspace"===e.code)return void m("");const t=e.ctrlKey||e.metaKey,s=e.shiftKey,o=e.altKey,l=(e=>["KeyA","KeyB","KeyC","KeyD","KeyE","KeyF","KeyG","KeyH","KeyI","KeyJ","KeyK","KeyL","KeyM","KeyN","KeyO","KeyP","KeyQ","KeyR","KeyS","KeyT","KeyU","KeyV","KeyW","KeyX","KeyY","KeyZ","Digit0","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","Space","ArrowLeft","ArrowUp","ArrowRight","ArrowDown"].includes(e.code)?e.code:"")(e),u=[t&&"CmdOrCtrl",s&&"Shift",o&&"Alt",l].filter(Boolean).join("+");if(g(u))window.$message.warning("快捷键设置冲突");else if(n.value){const e=Wt(t||s||o?u:"CmdOrCtrl+Shift+"+l);if(!e)return;a.value[r.value].globalShortcut=e,await v(e),m(e)}else m(u),window.$message.success("快捷键设置成功")},m=async e=>{r.value&&(a.value[r.value][n.value?"globalShortcut":"shortcut"]=e,t.shortcutList[r.value][n.value?"globalShortcut":"shortcut"]=e)},g=e=>Kt(Object.values(t.shortcutList),(t=>Zt([t.shortcut,t.globalShortcut],e))),v=Q((async e=>{try{if(!e||!r.value)return;const t=await window.electron.ipcRenderer.invoke("is-shortcut-registered",Wt(e));t&&window.$message.warning("快捷键已被占用"),a.value[r.value].isRegistered=t}catch(t){console.error("Error checking shortcut registration:",t),window.$message.error("快捷键检查出现错误"),m("")}}),500),_=e=>{e?t.registerAllShortcuts():window.electron.ipcRenderer.send("unregister-all-shortcut")},b=()=>{window.$dialog.warning({title:"重置快捷键",content:"确定重置当前快捷键配置？",positiveText:"重置",negativeText:"取消",onPositiveClick:()=>{t.$reset(),a.value=St(t.shortcutList),window.$message.success("快捷键重置成功")}})};return c((()=>{t.registerAllShortcuts()})),(e,r)=>{const n=Xe,s=_e,c=wt,m=Ge,g=Se,v=Ae,w=dt,x=ht,I=ft,T=ce;return d(),F("div",Au,[D("div",ku,[p(n,{prefix:"bar"},{default:f((()=>r[3]||(r[3]=[te(" 全局快捷键 ")]))),_:1}),p(m,{class:"set-item"},{default:f((()=>[D("div",Cu,[p(s,{class:"name"},{default:f((()=>r[4]||(r[4]=[te("开启全局快捷键")]))),_:1}),p(s,{class:"tip",depth:3},{default:f((()=>r[5]||(r[5]=[te("可能会导致与其他软件相互冲突，请谨慎开启")]))),_:1})]),p(c,{class:"set",value:y(t).globalOpen,"onUpdate:value":[r[0]||(r[0]=e=>y(t).globalOpen=e),_],round:!1},null,8,["value"])])),_:1})]),D("div",Pu,[p(n,{prefix:"bar"},{default:f((()=>r[6]||(r[6]=[te(" 快捷键更改 ")]))),_:1}),p(m,{id:"shortcut-list",class:"set-item"},{default:f((()=>[(d(!0),F(De,null,Ne(y(a),((e,n,a)=>(d(),h(I,{key:a,class:"shortcut",hoverable:""},{default:f((()=>[p(x,null,{prefix:f((()=>[p(s,{class:"name"},{default:f((()=>[te(re(e.name),1)])),_:2},1024)])),default:f((()=>[p(w,null,{default:f((()=>[p(v,null,{default:f((()=>[p(g,{value:e.shortcut,placeholder:"快捷键为空",readonly:"",onFocus:e=>o(n),onBlur:l,onKeydown:Yt(u,["stop"]),onKeyup:r[1]||(r[1]=e=>i.value="")},null,8,["value","onFocus"]),p(g,{value:e.globalShortcut,disabled:!y(t).globalOpen,status:e?.isRegistered?"error":"success",placeholder:"快捷键为空",readonly:"",onFocus:e=>o(n,!0),onBlur:l,onKeydown:Yt(u,["stop"]),onKeyup:r[2]||(r[2]=e=>i.value="")},{prefix:f((()=>[p(s,{depth:3},{default:f((()=>r[7]||(r[7]=[te("全局")]))),_:1})])),_:2},1032,["value","disabled","status","onFocus"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),p(m,{class:"set-item"},{default:f((()=>[D("div",Ru,[p(s,{class:"name"},{default:f((()=>r[8]||(r[8]=[te("恢复默认")]))),_:1})]),p(T,{type:"primary",strong:"",secondary:"",onClick:b},{default:f((()=>r[9]||(r[9]=[te(" 恢复默认 ")]))),_:1})])),_:1})])])}}}),Lu=B(Mu,[["__scopeId","data-v-bb9cd0ab"]]),Ou={class:"setting-type"},Fu={class:"set-list"},Du={class:"label"},Nu={class:"label"},Bu={class:"label"},Uu={class:"label"},ju={class:"label"},Gu={class:"label"},zu={class:"label"},Hu={class:"label"},Vu={class:"label"},$u={class:"label"},Xu={class:"label"},qu={class:"label"},Wu={class:"label"},Yu={class:"set-list"},Ku={class:"label"},Zu={class:"label"},Qu={key:0,class:"set-list"},Ju={class:"label"},ec={class:"label"},tc={class:"label"},rc={class:"label"},nc={class:"label"},ic=B(n({__name:"LyricsSetting",setup(e){const t=i(),n=r(),a={fontSize:30,mainColor:"#fff",shadowColor:"rgba(0, 0, 0, 0.5)"},s=X({...a}),o=async()=>{if(!Y)return;const e=await window.electron.ipcRenderer.invoke("get-desktop-lyric-option");e&&Object.assign(s,e),window.electron.ipcRenderer.on("desktop-lyric-option-change",((e,t)=>{t&&!Qt(s,t)&&Object.assign(s,t)}))},l=()=>{try{if(!Y)return;St(s),window.electron.ipcRenderer.send("set-desktop-lyric-option",St(s),!0),window.$message.success("桌面歌词配置已保存")}catch(e){console.error("Failed to save options:",e),window.$message.error("桌面歌词配置保存失败"),o()}},u=()=>{try{if(!Y)return;window.electron.ipcRenderer.send("set-desktop-lyric-option",a,!0),window.$message.success("桌面歌词配置已恢复默认")}catch(e){console.error("Failed to save options:",e),window.$message.error("桌面歌词配置恢复默认失败"),o()}};return c((()=>{o()})),(e,r)=>{const i=Xe,a=_e,o=Ge,c=ce,m=ue,g=Ae,v=wt,_=se,b=_t,w=Jt;return d(),F("div",Ou,[D("div",Fu,[p(i,{prefix:"bar"},{default:f((()=>r[23]||(r[23]=[te(" 歌词设置 ")]))),_:1}),p(o,{id:"lyrics-show","content-style":{"flex-direction":"column","align-items":y(n).lyricsPosition,"--font-weight":y(n).lyricFontBold?"bold":"normal","--font-size":y(n).lyricFontSize,"--font-tran-size":y(n).lyricTranFontSize,"--font-roma-size":y(n).lyricRomaFontSize,"--transform-origin":"center"===y(n).lyricsPosition?"center":"flex-start"===y(n).lyricsPosition?"left":"right"},class:"set-item"},{default:f((()=>[(d(),F(De,null,Ne(2,(e=>D("div",{key:e,class:he(["lrc-item",{on:2===e}])},[p(a,null,{default:f((()=>r[24]||(r[24]=[te("我是一句歌词")]))),_:1}),y(n).showTran?(d(),h(a,{key:0},{default:f((()=>r[25]||(r[25]=[te("I'm the lyric")]))),_:1})):pe("",!0),y(n).showRoma?(d(),h(a,{key:1},{default:f((()=>r[26]||(r[26]=[te("wo shi yi ju ge ci")]))),_:1})):pe("",!0)],2))),64))])),_:1},8,["content-style"]),p(o,{class:"set-item"},{default:f((()=>[D("div",Du,[p(a,{class:"name"},{default:f((()=>r[27]||(r[27]=[te("歌词字体大小")]))),_:1}),p(a,{class:"tip",depth:3},{default:f((()=>r[28]||(r[28]=[te("单位 px，最小 30，最大 60")]))),_:1})]),p(g,null,{default:f((()=>[p(me,{name:"fade",mode:"out-in"},{default:f((()=>[46!==y(n).lyricFontSize?(d(),h(c,{key:0,type:"primary",strong:"",secondary:"",onClick:r[0]||(r[0]=e=>y(n).lyricFontSize=46)},{default:f((()=>r[29]||(r[29]=[te(" 恢复默认 ")]))),_:1})):pe("",!0)])),_:1}),p(m,{value:y(n).lyricFontSize,"onUpdate:value":r[1]||(r[1]=e=>y(n).lyricFontSize=e),min:30,max:60,class:"set",placeholder:"请输入歌词字体大小",onBlur:r[2]||(r[2]=e=>null===y(n).lyricFontSize?y(n).lyricFontSize=30:null)},{suffix:f((()=>r[30]||(r[30]=[te(" px ")]))),_:1},8,["value"])])),_:1})])),_:1}),p(o,{class:"set-item"},{default:f((()=>[D("div",Nu,[p(a,{class:"name"},{default:f((()=>r[31]||(r[31]=[te("翻译歌词大小")]))),_:1}),p(a,{class:"tip",depth:3},{default:f((()=>r[32]||(r[32]=[te("单位 px，最小 12，最大 40")]))),_:1})]),p(g,null,{default:f((()=>[p(me,{name:"fade",mode:"out-in"},{default:f((()=>[22!==y(n).lyricTranFontSize?(d(),h(c,{key:0,type:"primary",strong:"",secondary:"",onClick:r[3]||(r[3]=e=>y(n).lyricTranFontSize=22)},{default:f((()=>r[33]||(r[33]=[te(" 恢复默认 ")]))),_:1})):pe("",!0)])),_:1}),p(m,{value:y(n).lyricTranFontSize,"onUpdate:value":r[4]||(r[4]=e=>y(n).lyricTranFontSize=e),min:12,max:40,disabled:y(n).useAMLyrics,class:"set",placeholder:"请输入翻译歌词字体大小",onBlur:r[5]||(r[5]=e=>null===y(n).lyricTranFontSize?y(n).lyricTranFontSize=22:null)},{suffix:f((()=>r[34]||(r[34]=[te(" px ")]))),_:1},8,["value","disabled"])])),_:1})])),_:1}),p(o,{class:"set-item"},{default:f((()=>[D("div",Bu,[p(a,{class:"name"},{default:f((()=>r[35]||(r[35]=[te("音译歌词大小")]))),_:1}),p(a,{class:"tip",depth:3},{default:f((()=>r[36]||(r[36]=[te("单位 px，最小 12，最大 40")]))),_:1})]),p(g,null,{default:f((()=>[p(me,{name:"fade",mode:"out-in"},{default:f((()=>[18!==y(n).lyricRomaFontSize?(d(),h(c,{key:0,type:"primary",strong:"",secondary:"",onClick:r[6]||(r[6]=e=>y(n).lyricRomaFontSize=18)},{default:f((()=>r[37]||(r[37]=[te(" 恢复默认 ")]))),_:1})):pe("",!0)])),_:1}),p(m,{value:y(n).lyricRomaFontSize,"onUpdate:value":r[7]||(r[7]=e=>y(n).lyricRomaFontSize=e),min:12,max:40,disabled:y(n).useAMLyrics,class:"set",placeholder:"请输入歌词字体大小",onBlur:r[8]||(r[8]=e=>null===y(n).lyricRomaFontSize?y(n).lyricRomaFontSize=18:null)},{suffix:f((()=>r[38]||(r[38]=[te(" px ")]))),_:1},8,["value","disabled"])])),_:1})])),_:1}),p(o,{class:"set-item"},{default:f((()=>[D("div",Uu,[p(a,{class:"name"},{default:f((()=>r[39]||(r[39]=[te("歌词字体加粗")]))),_:1}),p(a,{class:"tip",depth:3},{default:f((()=>r[40]||(r[40]=[te("是否将歌词字体加粗显示，部分字体可能显示异常")]))),_:1})]),p(v,{value:y(n).lyricFontBold,"onUpdate:value":r[9]||(r[9]=e=>y(n).lyricFontBold=e),class:"set",round:!1},null,8,["value"])])),_:1}),p(o,{class:"set-item"},{default:f((()=>[D("div",ju,[p(a,{class:"name"},{default:f((()=>r[41]||(r[41]=[te("歌词位置")]))),_:1}),p(a,{class:"tip",depth:3},{default:f((()=>r[42]||(r[42]=[te("歌词的默认垂直位置")]))),_:1})]),p(_,{value:y(n).lyricsPosition,"onUpdate:value":r[10]||(r[10]=e=>y(n).lyricsPosition=e),disabled:y(n).useAMLyrics,options:[{label:"居左",value:"flex-start"},{label:"居中",value:"center"},{label:"居右",value:"flex-end"}],class:"set"},null,8,["value","disabled"])])),_:1}),p(o,{class:"set-item"},{default:f((()=>[D("div",Gu,[p(a,{class:"name"},{default:f((()=>r[43]||(r[43]=[te("歌词滚动位置")]))),_:1}),p(a,{class:"tip",depth:3},{default:f((()=>r[44]||(r[44]=[te("歌词高亮时所处的位置")]))),_:1})]),p(_,{value:y(n).lyricsScrollPosition,"onUpdate:value":r[11]||(r[11]=e=>y(n).lyricsScrollPosition=e),options:[{label:"靠近顶部",value:"start"},{label:"水平居中",value:"center"}],class:"set"},null,8,["value"])])),_:1}),p(o,{class:"set-item"},{default:f((()=>[D("div",zu,[p(a,{class:"name"},{default:f((()=>r[45]||(r[45]=[te("自动暂停滚动")]))),_:1}),p(a,{class:"tip",depth:3},{default:f((()=>r[46]||(r[46]=[te(" 鼠标移入歌词区域时是否暂停滚动 ")]))),_:1})]),p(v,{value:y(n).lrcMousePause,"onUpdate:value":r[12]||(r[12]=e=>y(n).lrcMousePause=e),disabled:y(n).useAMLyrics,round:!1,class:"set"},null,8,["value","disabled"])])),_:1}),p(o,{class:"set-item"},{default:f((()=>[D("div",Hu,[p(a,{class:"name"},{default:f((()=>r[47]||(r[47]=[te("显示逐字歌词")]))),_:1})]),p(v,{value:y(n).showYrc,"onUpdate:value":r[13]||(r[13]=e=>y(n).showYrc=e),class:"set",round:!1},null,8,["value"])])),_:1}),p(b,{show:y(n).showYrc},{default:f((()=>[p(o,{class:"set-item"},{default:f((()=>[D("div",Vu,[p(a,{class:"name"},{default:f((()=>r[48]||(r[48]=[te("显示逐字歌词动画")]))),_:1}),p(a,{class:"tip",depth:3},{default:f((()=>r[49]||(r[49]=[te(" 可能会造成性能问题，如遇卡顿请关闭 ")]))),_:1})]),p(v,{value:y(n).showYrcAnimation,"onUpdate:value":r[14]||(r[14]=e=>y(n).showYrcAnimation=e),disabled:y(n).useAMLyrics,round:!1,class:"set"},null,8,["value","disabled"])])),_:1})])),_:1},8,["show"]),p(o,{class:"set-item"},{default:f((()=>[D("div",$u,[p(a,{class:"name"},{default:f((()=>r[50]||(r[50]=[te("显示歌词翻译")]))),_:1})]),p(v,{value:y(n).showTran,"onUpdate:value":r[15]||(r[15]=e=>y(n).showTran=e),class:"set",round:!1,disabled:y(n).useAMLyrics},null,8,["value","disabled"])])),_:1}),p(o,{class:"set-item"},{default:f((()=>[D("div",Xu,[p(a,{class:"name"},{default:f((()=>r[51]||(r[51]=[te("显示歌词音译")]))),_:1})]),p(v,{value:y(n).showRoma,"onUpdate:value":r[16]||(r[16]=e=>y(n).showRoma=e),class:"set",round:!1,disabled:y(n).useAMLyrics},null,8,["value","disabled"])])),_:1}),p(o,{class:"set-item"},{default:f((()=>[D("div",qu,[p(a,{class:"name"},{default:f((()=>r[52]||(r[52]=[te("歌词自动模糊")]))),_:1}),p(a,{class:"tip",depth:3},{default:f((()=>r[53]||(r[53]=[te(" 是否聚焦显示当前播放行，其他行将模糊显示 ")]))),_:1})]),p(v,{value:y(n).lyricsBlur,"onUpdate:value":r[17]||(r[17]=e=>y(n).lyricsBlur=e),class:"set",round:!1},null,8,["value"])])),_:1}),p(o,{class:"set-item"},{default:f((()=>[D("div",Wu,[p(a,{class:"name"},{default:f((()=>r[54]||(r[54]=[te("歌词排除内容")]))),_:1}),p(a,{class:"tip",depth:3},{default:f((()=>r[55]||(r[55]=[te(" 歌词中包含的关键词将不会显示 ")]))),_:1})]),p(c,{type:"primary",strong:"",secondary:"",onClick:y(bd)},{default:f((()=>r[56]||(r[56]=[te("配置")]))),_:1},8,["onClick"])])),_:1})]),D("div",Yu,[p(i,{prefix:"bar"},{default:f((()=>r[57]||(r[57]=[te(" Apple Music-like Lyrics ")]))),_:1}),p(o,{class:"set-item"},{default:f((()=>[D("div",Ku,[p(a,{class:"name"},{default:f((()=>r[58]||(r[58]=[te("使用 Apple Music-like Lyrics")]))),_:1}),p(a,{class:"tip",depth:3},{default:f((()=>r[59]||(r[59]=[te(" 歌词使用 Apple Music-like Lyrics 进行渲染，需要高性能设备 ")]))),_:1})]),p(v,{value:y(n).useAMLyrics,"onUpdate:value":r[18]||(r[18]=e=>y(n).useAMLyrics=e),class:"set",round:!1},null,8,["value"])])),_:1}),p(o,{class:"set-item"},{default:f((()=>[D("div",Zu,[p(a,{class:"name"},{default:f((()=>r[60]||(r[60]=[te("歌词弹簧效果")]))),_:1}),p(a,{class:"tip",depth:3},{default:f((()=>r[61]||(r[61]=[te(" 是否使用物理弹簧算法实现歌词动画效果，需要高性能设备 ")]))),_:1})]),p(v,{value:y(n).useAMSpring,"onUpdate:value":r[19]||(r[19]=e=>y(n).useAMSpring=e),class:"set",round:!1},null,8,["value"])])),_:1})]),y(Y)?(d(),F("div",Qu,[p(i,{prefix:"bar"},{default:f((()=>r[62]||(r[62]=[te(" 桌面歌词 ")]))),_:1}),p(o,{class:"set-item"},{default:f((()=>[D("div",Ju,[p(a,{class:"name"},{default:f((()=>r[63]||(r[63]=[te("开启桌面歌词")]))),_:1}),p(a,{class:"tip",depth:3},{default:f((()=>r[64]||(r[64]=[te(" 如遇问题请向开发者反馈 ")]))),_:1})]),p(v,{value:y(t).showDesktopLyric,round:!1,class:"set","onUpdate:value":y(Hl).toggleDesktopLyric},null,8,["value","onUpdate:value"])])),_:1}),p(o,{class:"set-item"},{default:f((()=>[D("div",ec,[p(a,{class:"name"},{default:f((()=>r[65]||(r[65]=[te("桌面歌词文字大小")]))),_:1}),p(a,{class:"tip",depth:3},{default:f((()=>r[66]||(r[66]=[te("翻译或其他文字将会跟随变化")]))),_:1})]),p(_,{value:y(s).fontSize,"onUpdate:value":[r[20]||(r[20]=e=>y(s).fontSize=e),l],options:Array.from({length:41},((e,t)=>({label:`${20+t} px`,value:20+t}))),class:"set"},null,8,["value","options"])])),_:1}),p(o,{class:"set-item"},{default:f((()=>[D("div",tc,[p(a,{class:"name"},{default:f((()=>r[67]||(r[67]=[te("主题色")]))),_:1}),p(a,{class:"tip",depth:3},{default:f((()=>r[68]||(r[68]=[te("桌面歌词文字主色")]))),_:1})]),p(w,{value:y(s).mainColor,"onUpdate:value":r[21]||(r[21]=e=>y(s).mainColor=e),"show-alpha":!1,modes:["hex"],class:"set",onComplete:l},null,8,["value"])])),_:1}),p(o,{class:"set-item"},{default:f((()=>[D("div",rc,[p(a,{class:"name"},{default:f((()=>r[69]||(r[69]=[te("描边色")]))),_:1}),p(a,{class:"tip",depth:3},{default:f((()=>r[70]||(r[70]=[te("桌面歌词文字描边色")]))),_:1})]),p(w,{value:y(s).shadowColor,"onUpdate:value":r[22]||(r[22]=e=>y(s).shadowColor=e),modes:["rgb"],class:"set",onComplete:l},null,8,["value"])])),_:1}),p(o,{class:"set-item"},{default:f((()=>[D("div",nc,[p(a,{class:"name"},{default:f((()=>r[71]||(r[71]=[te("恢复默认配置")]))),_:1}),p(a,{class:"tip",depth:3},{default:f((()=>r[72]||(r[72]=[te("恢复默认桌面歌词配置")]))),_:1})]),p(c,{type:"primary",onClick:u},{default:f((()=>r[73]||(r[73]=[te("恢复默认")]))),_:1})])),_:1})])):pe("",!0)])}}}),[["__scopeId","data-v-0623f95f"]]);var ac={exports:{}};
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */!function(e,t){(function(){var r,n="Expected a function",i="__lodash_hash_undefined__",a="__lodash_placeholder__",s=16,o=32,l=64,u=128,c=256,d=1/0,h=9007199254740991,f=NaN,p=4294967295,m=[["ary",u],["bind",1],["bindKey",2],["curry",8],["curryRight",s],["flip",512],["partial",o],["partialRight",l],["rearg",c]],y="[object Arguments]",g="[object Array]",v="[object Boolean]",_="[object Date]",b="[object Error]",w="[object Function]",x="[object GeneratorFunction]",I="[object Map]",T="[object Number]",E="[object Object]",S="[object Promise]",A="[object RegExp]",k="[object Set]",C="[object String]",P="[object Symbol]",R="[object WeakMap]",M="[object ArrayBuffer]",L="[object DataView]",O="[object Float32Array]",F="[object Float64Array]",D="[object Int8Array]",N="[object Int16Array]",B="[object Int32Array]",U="[object Uint8Array]",j="[object Uint8ClampedArray]",G="[object Uint16Array]",z="[object Uint32Array]",H=/\b__p \+= '';/g,V=/\b(__p \+=) '' \+/g,$=/(__e\(.*?\)|\b__t\)) \+\n'';/g,X=/&(?:amp|lt|gt|quot|#39);/g,q=/[&<>"']/g,W=RegExp(X.source),Y=RegExp(q.source),K=/<%-([\s\S]+?)%>/g,Z=/<%([\s\S]+?)%>/g,Q=/<%=([\s\S]+?)%>/g,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ee=/^\w*$/,te=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,re=/[\\^$.*+?()[\]{}|]/g,ne=RegExp(re.source),ie=/^\s+/,ae=/\s/,se=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,oe=/\{\n\/\* \[wrapped with (.+)\] \*/,le=/,? & /,ue=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ce=/[()=,{}\[\]\/\s]/,de=/\\(\\)?/g,he=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,fe=/\w*$/,pe=/^[-+]0x[0-9a-f]+$/i,me=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,ge=/^0o[0-7]+$/i,ve=/^(?:0|[1-9]\d*)$/,_e=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,be=/($^)/,we=/['\n\r\u2028\u2029\\]/g,xe="\\ud800-\\udfff",Ie="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Te="\\u2700-\\u27bf",Ee="a-z\\xdf-\\xf6\\xf8-\\xff",Se="A-Z\\xc0-\\xd6\\xd8-\\xde",Ae="\\ufe0e\\ufe0f",ke="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ce="['’]",Pe="["+xe+"]",Re="["+ke+"]",Me="["+Ie+"]",Le="\\d+",Oe="["+Te+"]",Fe="["+Ee+"]",De="[^"+xe+ke+Le+Te+Ee+Se+"]",Ne="\\ud83c[\\udffb-\\udfff]",Be="[^"+xe+"]",Ue="(?:\\ud83c[\\udde6-\\uddff]){2}",je="[\\ud800-\\udbff][\\udc00-\\udfff]",Ge="["+Se+"]",ze="\\u200d",He="(?:"+Fe+"|"+De+")",Ve="(?:"+Ge+"|"+De+")",$e="(?:['’](?:d|ll|m|re|s|t|ve))?",Xe="(?:['’](?:D|LL|M|RE|S|T|VE))?",qe="(?:"+Me+"|"+Ne+")"+"?",We="["+Ae+"]?",Ye=We+qe+("(?:"+ze+"(?:"+[Be,Ue,je].join("|")+")"+We+qe+")*"),Ke="(?:"+[Oe,Ue,je].join("|")+")"+Ye,Ze="(?:"+[Be+Me+"?",Me,Ue,je,Pe].join("|")+")",Qe=RegExp(Ce,"g"),Je=RegExp(Me,"g"),et=RegExp(Ne+"(?="+Ne+")|"+Ze+Ye,"g"),tt=RegExp([Ge+"?"+Fe+"+"+$e+"(?="+[Re,Ge,"$"].join("|")+")",Ve+"+"+Xe+"(?="+[Re,Ge+He,"$"].join("|")+")",Ge+"?"+He+"+"+$e,Ge+"+"+Xe,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Le,Ke].join("|"),"g"),rt=RegExp("["+ze+xe+Ie+Ae+"]"),nt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,it=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],at=-1,st={};st[O]=st[F]=st[D]=st[N]=st[B]=st[U]=st[j]=st[G]=st[z]=!0,st[y]=st[g]=st[M]=st[v]=st[L]=st[_]=st[b]=st[w]=st[I]=st[T]=st[E]=st[A]=st[k]=st[C]=st[R]=!1;var ot={};ot[y]=ot[g]=ot[M]=ot[L]=ot[v]=ot[_]=ot[O]=ot[F]=ot[D]=ot[N]=ot[B]=ot[I]=ot[T]=ot[E]=ot[A]=ot[k]=ot[C]=ot[P]=ot[U]=ot[j]=ot[G]=ot[z]=!0,ot[b]=ot[w]=ot[R]=!1;var lt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ut=parseFloat,ct=parseInt,dt="object"==typeof Tt&&Tt&&Tt.Object===Object&&Tt,ht="object"==typeof self&&self&&self.Object===Object&&self,ft=dt||ht||Function("return this")(),pt=t&&!t.nodeType&&t,mt=pt&&e&&!e.nodeType&&e,yt=mt&&mt.exports===pt,gt=yt&&dt.process,vt=function(){try{var e=mt&&mt.require&&mt.require("util").types;return e||gt&&gt.binding&&gt.binding("util")}catch(t){}}(),_t=vt&&vt.isArrayBuffer,bt=vt&&vt.isDate,wt=vt&&vt.isMap,xt=vt&&vt.isRegExp,It=vt&&vt.isSet,Et=vt&&vt.isTypedArray;function St(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function At(e,t,r,n){for(var i=-1,a=null==e?0:e.length;++i<a;){var s=e[i];t(n,s,r(s),e)}return n}function kt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function Ct(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function Pt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function Rt(e,t){for(var r=-1,n=null==e?0:e.length,i=0,a=[];++r<n;){var s=e[r];t(s,r,e)&&(a[i++]=s)}return a}function Mt(e,t){return!!(null==e?0:e.length)&&zt(e,t,0)>-1}function Lt(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}function Ot(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function Ft(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function Dt(e,t,r,n){var i=-1,a=null==e?0:e.length;for(n&&a&&(r=e[++i]);++i<a;)r=t(r,e[i],i,e);return r}function Nt(e,t,r,n){var i=null==e?0:e.length;for(n&&i&&(r=e[--i]);i--;)r=t(r,e[i],i,e);return r}function Bt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var Ut=Xt("length");function jt(e,t,r){var n;return r(e,(function(e,r,i){if(t(e,r,i))return n=r,!1})),n}function Gt(e,t,r,n){for(var i=e.length,a=r+(n?1:-1);n?a--:++a<i;)if(t(e[a],a,e))return a;return-1}function zt(e,t,r){return t==t?function(e,t,r){var n=r-1,i=e.length;for(;++n<i;)if(e[n]===t)return n;return-1}(e,t,r):Gt(e,Vt,r)}function Ht(e,t,r,n){for(var i=r-1,a=e.length;++i<a;)if(n(e[i],t))return i;return-1}function Vt(e){return e!=e}function $t(e,t){var r=null==e?0:e.length;return r?Yt(e,t)/r:f}function Xt(e){return function(t){return null==t?r:t[e]}}function qt(e){return function(t){return null==e?r:e[t]}}function Wt(e,t,r,n,i){return i(e,(function(e,i,a){r=n?(n=!1,e):t(r,e,i,a)})),r}function Yt(e,t){for(var n,i=-1,a=e.length;++i<a;){var s=t(e[i]);s!==r&&(n=n===r?s:n+s)}return n}function Kt(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function Zt(e){return e?e.slice(0,fr(e)+1).replace(ie,""):e}function Qt(e){return function(t){return e(t)}}function Jt(e,t){return Ot(t,(function(t){return e[t]}))}function er(e,t){return e.has(t)}function tr(e,t){for(var r=-1,n=e.length;++r<n&&zt(t,e[r],0)>-1;);return r}function rr(e,t){for(var r=e.length;r--&&zt(t,e[r],0)>-1;);return r}var nr=qt({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),ir=qt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ar(e){return"\\"+lt[e]}function sr(e){return rt.test(e)}function or(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function lr(e,t){return function(r){return e(t(r))}}function ur(e,t){for(var r=-1,n=e.length,i=0,s=[];++r<n;){var o=e[r];o!==t&&o!==a||(e[r]=a,s[i++]=r)}return s}function cr(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}function dr(e){return sr(e)?function(e){var t=et.lastIndex=0;for(;et.test(e);)++t;return t}(e):Ut(e)}function hr(e){return sr(e)?function(e){return e.match(et)||[]}(e):function(e){return e.split("")}(e)}function fr(e){for(var t=e.length;t--&&ae.test(e.charAt(t)););return t}var pr=qt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var mr=function e(t){var ae,xe=(t=null==t?ft:mr.defaults(ft.Object(),t,mr.pick(ft,it))).Array,Ie=t.Date,Te=t.Error,Ee=t.Function,Se=t.Math,Ae=t.Object,ke=t.RegExp,Ce=t.String,Pe=t.TypeError,Re=xe.prototype,Me=Ee.prototype,Le=Ae.prototype,Oe=t["__core-js_shared__"],Fe=Me.toString,De=Le.hasOwnProperty,Ne=0,Be=(ae=/[^.]+$/.exec(Oe&&Oe.keys&&Oe.keys.IE_PROTO||""))?"Symbol(src)_1."+ae:"",Ue=Le.toString,je=Fe.call(Ae),Ge=ft._,ze=ke("^"+Fe.call(De).replace(re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),He=yt?t.Buffer:r,Ve=t.Symbol,$e=t.Uint8Array,Xe=He?He.allocUnsafe:r,qe=lr(Ae.getPrototypeOf,Ae),We=Ae.create,Ye=Le.propertyIsEnumerable,Ke=Re.splice,Ze=Ve?Ve.isConcatSpreadable:r,et=Ve?Ve.iterator:r,rt=Ve?Ve.toStringTag:r,lt=function(){try{var e=da(Ae,"defineProperty");return e({},"",{}),e}catch(t){}}(),dt=t.clearTimeout!==ft.clearTimeout&&t.clearTimeout,ht=Ie&&Ie.now!==ft.Date.now&&Ie.now,pt=t.setTimeout!==ft.setTimeout&&t.setTimeout,mt=Se.ceil,gt=Se.floor,vt=Ae.getOwnPropertySymbols,Tt=He?He.isBuffer:r,Ut=t.isFinite,qt=Re.join,yr=lr(Ae.keys,Ae),gr=Se.max,vr=Se.min,_r=Ie.now,br=t.parseInt,wr=Se.random,xr=Re.reverse,Ir=da(t,"DataView"),Tr=da(t,"Map"),Er=da(t,"Promise"),Sr=da(t,"Set"),Ar=da(t,"WeakMap"),kr=da(Ae,"create"),Cr=Ar&&new Ar,Pr={},Rr=ja(Ir),Mr=ja(Tr),Lr=ja(Er),Or=ja(Sr),Fr=ja(Ar),Dr=Ve?Ve.prototype:r,Nr=Dr?Dr.valueOf:r,Br=Dr?Dr.toString:r;function Ur(e){if(no(e)&&!Xs(e)&&!(e instanceof Hr)){if(e instanceof zr)return e;if(De.call(e,"__wrapped__"))return Ga(e)}return new zr(e)}var jr=function(){function e(){}return function(t){if(!ro(t))return{};if(We)return We(t);e.prototype=t;var n=new e;return e.prototype=r,n}}();function Gr(){}function zr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}function Hr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=p,this.__views__=[]}function Vr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function $r(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Xr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function qr(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Xr;++t<r;)this.add(e[t])}function Wr(e){var t=this.__data__=new $r(e);this.size=t.size}function Yr(e,t){var r=Xs(e),n=!r&&$s(e),i=!r&&!n&&Ks(e),a=!r&&!n&&!i&&ho(e),s=r||n||i||a,o=s?Kt(e.length,Ce):[],l=o.length;for(var u in e)!t&&!De.call(e,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||va(u,l))||o.push(u);return o}function Kr(e){var t=e.length;return t?e[Wn(0,t-1)]:r}function Zr(e,t){return Oa(Ci(e),on(t,0,e.length))}function Qr(e){return Oa(Ci(e))}function Jr(e,t,n){(n!==r&&!zs(e[t],n)||n===r&&!(t in e))&&an(e,t,n)}function en(e,t,n){var i=e[t];De.call(e,t)&&zs(i,n)&&(n!==r||t in e)||an(e,t,n)}function tn(e,t){for(var r=e.length;r--;)if(zs(e[r][0],t))return r;return-1}function rn(e,t,r,n){return hn(e,(function(e,i,a){t(n,e,r(e),a)})),n}function nn(e,t){return e&&Pi(t,Oo(t),e)}function an(e,t,r){"__proto__"==t&&lt?lt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function sn(e,t){for(var n=-1,i=t.length,a=xe(i),s=null==e;++n<i;)a[n]=s?r:Co(e,t[n]);return a}function on(e,t,n){return e==e&&(n!==r&&(e=e<=n?e:n),t!==r&&(e=e>=t?e:t)),e}function ln(e,t,n,i,a,s){var o,l=1&t,u=2&t,c=4&t;if(n&&(o=a?n(e,i,a,s):n(e)),o!==r)return o;if(!ro(e))return e;var d=Xs(e);if(d){if(o=function(e){var t=e.length,r=new e.constructor(t);t&&"string"==typeof e[0]&&De.call(e,"index")&&(r.index=e.index,r.input=e.input);return r}(e),!l)return Ci(e,o)}else{var h=pa(e),f=h==w||h==x;if(Ks(e))return Ii(e,l);if(h==E||h==y||f&&!a){if(o=u||f?{}:ya(e),!l)return u?function(e,t){return Pi(e,fa(e),t)}(e,function(e,t){return e&&Pi(t,Fo(t),e)}(o,e)):function(e,t){return Pi(e,ha(e),t)}(e,nn(o,e))}else{if(!ot[h])return a?e:{};o=function(e,t,r){var n=e.constructor;switch(t){case M:return Ti(e);case v:case _:return new n(+e);case L:return function(e,t){var r=t?Ti(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case O:case F:case D:case N:case B:case U:case j:case G:case z:return Ei(e,r);case I:return new n;case T:case C:return new n(e);case A:return function(e){var t=new e.constructor(e.source,fe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case k:return new n;case P:return i=e,Nr?Ae(Nr.call(i)):{}}var i}(e,h,l)}}s||(s=new Wr);var p=s.get(e);if(p)return p;s.set(e,o),lo(e)?e.forEach((function(r){o.add(ln(r,t,n,r,e,s))})):io(e)&&e.forEach((function(r,i){o.set(i,ln(r,t,n,i,e,s))}));var m=d?r:(c?u?ia:na:u?Fo:Oo)(e);return kt(m||e,(function(r,i){m&&(r=e[i=r]),en(o,i,ln(r,t,n,i,e,s))})),o}function un(e,t,n){var i=n.length;if(null==e)return!i;for(e=Ae(e);i--;){var a=n[i],s=t[a],o=e[a];if(o===r&&!(a in e)||!s(o))return!1}return!0}function cn(e,t,i){if("function"!=typeof e)throw new Pe(n);return Pa((function(){e.apply(r,i)}),t)}function dn(e,t,r,n){var i=-1,a=Mt,s=!0,o=e.length,l=[],u=t.length;if(!o)return l;r&&(t=Ot(t,Qt(r))),n?(a=Lt,s=!1):t.length>=200&&(a=er,s=!1,t=new qr(t));e:for(;++i<o;){var c=e[i],d=null==r?c:r(c);if(c=n||0!==c?c:0,s&&d==d){for(var h=u;h--;)if(t[h]===d)continue e;l.push(c)}else a(t,d,n)||l.push(c)}return l}Ur.templateSettings={escape:K,evaluate:Z,interpolate:Q,variable:"",imports:{_:Ur}},Ur.prototype=Gr.prototype,Ur.prototype.constructor=Ur,zr.prototype=jr(Gr.prototype),zr.prototype.constructor=zr,Hr.prototype=jr(Gr.prototype),Hr.prototype.constructor=Hr,Vr.prototype.clear=function(){this.__data__=kr?kr(null):{},this.size=0},Vr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Vr.prototype.get=function(e){var t=this.__data__;if(kr){var n=t[e];return n===i?r:n}return De.call(t,e)?t[e]:r},Vr.prototype.has=function(e){var t=this.__data__;return kr?t[e]!==r:De.call(t,e)},Vr.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=kr&&t===r?i:t,this},$r.prototype.clear=function(){this.__data__=[],this.size=0},$r.prototype.delete=function(e){var t=this.__data__,r=tn(t,e);return!(r<0)&&(r==t.length-1?t.pop():Ke.call(t,r,1),--this.size,!0)},$r.prototype.get=function(e){var t=this.__data__,n=tn(t,e);return n<0?r:t[n][1]},$r.prototype.has=function(e){return tn(this.__data__,e)>-1},$r.prototype.set=function(e,t){var r=this.__data__,n=tn(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},Xr.prototype.clear=function(){this.size=0,this.__data__={hash:new Vr,map:new(Tr||$r),string:new Vr}},Xr.prototype.delete=function(e){var t=ua(this,e).delete(e);return this.size-=t?1:0,t},Xr.prototype.get=function(e){return ua(this,e).get(e)},Xr.prototype.has=function(e){return ua(this,e).has(e)},Xr.prototype.set=function(e,t){var r=ua(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},qr.prototype.add=qr.prototype.push=function(e){return this.__data__.set(e,i),this},qr.prototype.has=function(e){return this.__data__.has(e)},Wr.prototype.clear=function(){this.__data__=new $r,this.size=0},Wr.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Wr.prototype.get=function(e){return this.__data__.get(e)},Wr.prototype.has=function(e){return this.__data__.has(e)},Wr.prototype.set=function(e,t){var r=this.__data__;if(r instanceof $r){var n=r.__data__;if(!Tr||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Xr(n)}return r.set(e,t),this.size=r.size,this};var hn=Li(bn),fn=Li(wn,!0);function pn(e,t){var r=!0;return hn(e,(function(e,n,i){return r=!!t(e,n,i)})),r}function mn(e,t,n){for(var i=-1,a=e.length;++i<a;){var s=e[i],o=t(s);if(null!=o&&(l===r?o==o&&!co(o):n(o,l)))var l=o,u=s}return u}function yn(e,t){var r=[];return hn(e,(function(e,n,i){t(e,n,i)&&r.push(e)})),r}function gn(e,t,r,n,i){var a=-1,s=e.length;for(r||(r=ga),i||(i=[]);++a<s;){var o=e[a];t>0&&r(o)?t>1?gn(o,t-1,r,n,i):Ft(i,o):n||(i[i.length]=o)}return i}var vn=Oi(),_n=Oi(!0);function bn(e,t){return e&&vn(e,t,Oo)}function wn(e,t){return e&&_n(e,t,Oo)}function xn(e,t){return Rt(t,(function(t){return Js(e[t])}))}function In(e,t){for(var n=0,i=(t=_i(t,e)).length;null!=e&&n<i;)e=e[Ua(t[n++])];return n&&n==i?e:r}function Tn(e,t,r){var n=t(e);return Xs(e)?n:Ft(n,r(e))}function En(e){return null==e?e===r?"[object Undefined]":"[object Null]":rt&&rt in Ae(e)?function(e){var t=De.call(e,rt),n=e[rt];try{e[rt]=r;var i=!0}catch(s){}var a=Ue.call(e);i&&(t?e[rt]=n:delete e[rt]);return a}(e):function(e){return Ue.call(e)}(e)}function Sn(e,t){return e>t}function An(e,t){return null!=e&&De.call(e,t)}function kn(e,t){return null!=e&&t in Ae(e)}function Cn(e,t,n){for(var i=n?Lt:Mt,a=e[0].length,s=e.length,o=s,l=xe(s),u=1/0,c=[];o--;){var d=e[o];o&&t&&(d=Ot(d,Qt(t))),u=vr(d.length,u),l[o]=!n&&(t||a>=120&&d.length>=120)?new qr(o&&d):r}d=e[0];var h=-1,f=l[0];e:for(;++h<a&&c.length<u;){var p=d[h],m=t?t(p):p;if(p=n||0!==p?p:0,!(f?er(f,m):i(c,m,n))){for(o=s;--o;){var y=l[o];if(!(y?er(y,m):i(e[o],m,n)))continue e}f&&f.push(m),c.push(p)}}return c}function Pn(e,t,n){var i=null==(e=Aa(e,t=_i(t,e)))?e:e[Ua(Qa(t))];return null==i?r:St(i,e,n)}function Rn(e){return no(e)&&En(e)==y}function Mn(e,t,n,i,a){return e===t||(null==e||null==t||!no(e)&&!no(t)?e!=e&&t!=t:function(e,t,n,i,a,s){var o=Xs(e),l=Xs(t),u=o?g:pa(e),c=l?g:pa(t),d=(u=u==y?E:u)==E,h=(c=c==y?E:c)==E,f=u==c;if(f&&Ks(e)){if(!Ks(t))return!1;o=!0,d=!1}if(f&&!d)return s||(s=new Wr),o||ho(e)?ta(e,t,n,i,a,s):function(e,t,r,n,i,a,s){switch(r){case L:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case M:return!(e.byteLength!=t.byteLength||!a(new $e(e),new $e(t)));case v:case _:case T:return zs(+e,+t);case b:return e.name==t.name&&e.message==t.message;case A:case C:return e==t+"";case I:var o=or;case k:var l=1&n;if(o||(o=cr),e.size!=t.size&&!l)return!1;var u=s.get(e);if(u)return u==t;n|=2,s.set(e,t);var c=ta(o(e),o(t),n,i,a,s);return s.delete(e),c;case P:if(Nr)return Nr.call(e)==Nr.call(t)}return!1}(e,t,u,n,i,a,s);if(!(1&n)){var p=d&&De.call(e,"__wrapped__"),m=h&&De.call(t,"__wrapped__");if(p||m){var w=p?e.value():e,x=m?t.value():t;return s||(s=new Wr),a(w,x,n,i,s)}}if(!f)return!1;return s||(s=new Wr),function(e,t,n,i,a,s){var o=1&n,l=na(e),u=l.length,c=na(t),d=c.length;if(u!=d&&!o)return!1;var h=u;for(;h--;){var f=l[h];if(!(o?f in t:De.call(t,f)))return!1}var p=s.get(e),m=s.get(t);if(p&&m)return p==t&&m==e;var y=!0;s.set(e,t),s.set(t,e);var g=o;for(;++h<u;){var v=e[f=l[h]],_=t[f];if(i)var b=o?i(_,v,f,t,e,s):i(v,_,f,e,t,s);if(!(b===r?v===_||a(v,_,n,i,s):b)){y=!1;break}g||(g="constructor"==f)}if(y&&!g){var w=e.constructor,x=t.constructor;w==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof x&&x instanceof x||(y=!1)}return s.delete(e),s.delete(t),y}(e,t,n,i,a,s)}(e,t,n,i,Mn,a))}function Ln(e,t,n,i){var a=n.length,s=a,o=!i;if(null==e)return!s;for(e=Ae(e);a--;){var l=n[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<s;){var u=(l=n[a])[0],c=e[u],d=l[1];if(o&&l[2]){if(c===r&&!(u in e))return!1}else{var h=new Wr;if(i)var f=i(c,d,u,e,t,h);if(!(f===r?Mn(d,c,3,i,h):f))return!1}}return!0}function On(e){return!(!ro(e)||(t=e,Be&&Be in t))&&(Js(e)?ze:ye).test(ja(e));var t}function Fn(e){return"function"==typeof e?e:null==e?sl:"object"==typeof e?Xs(e)?Gn(e[0],e[1]):jn(e):ml(e)}function Dn(e){if(!Ia(e))return yr(e);var t=[];for(var r in Ae(e))De.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Nn(e){if(!ro(e))return function(e){var t=[];if(null!=e)for(var r in Ae(e))t.push(r);return t}(e);var t=Ia(e),r=[];for(var n in e)("constructor"!=n||!t&&De.call(e,n))&&r.push(n);return r}function Bn(e,t){return e<t}function Un(e,t){var r=-1,n=Ws(e)?xe(e.length):[];return hn(e,(function(e,i,a){n[++r]=t(e,i,a)})),n}function jn(e){var t=ca(e);return 1==t.length&&t[0][2]?Ea(t[0][0],t[0][1]):function(r){return r===e||Ln(r,e,t)}}function Gn(e,t){return ba(e)&&Ta(t)?Ea(Ua(e),t):function(n){var i=Co(n,e);return i===r&&i===t?Po(n,e):Mn(t,i,3)}}function zn(e,t,n,i,a){e!==t&&vn(t,(function(s,o){if(a||(a=new Wr),ro(s))!function(e,t,n,i,a,s,o){var l=ka(e,n),u=ka(t,n),c=o.get(u);if(c)return void Jr(e,n,c);var d=s?s(l,u,n+"",e,t,o):r,h=d===r;if(h){var f=Xs(u),p=!f&&Ks(u),m=!f&&!p&&ho(u);d=u,f||p||m?Xs(l)?d=l:Ys(l)?d=Ci(l):p?(h=!1,d=Ii(u,!0)):m?(h=!1,d=Ei(u,!0)):d=[]:so(u)||$s(u)?(d=l,$s(l)?d=bo(l):ro(l)&&!Js(l)||(d=ya(u))):h=!1}h&&(o.set(u,d),a(d,u,i,s,o),o.delete(u));Jr(e,n,d)}(e,t,o,n,zn,i,a);else{var l=i?i(ka(e,o),s,o+"",e,t,a):r;l===r&&(l=s),Jr(e,o,l)}}),Fo)}function Hn(e,t){var n=e.length;if(n)return va(t+=t<0?n:0,n)?e[t]:r}function Vn(e,t,r){t=t.length?Ot(t,(function(e){return Xs(e)?function(t){return In(t,1===e.length?e[0]:e)}:e})):[sl];var n=-1;return t=Ot(t,Qt(la())),function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(Un(e,(function(e,r,i){return{criteria:Ot(t,(function(t){return t(e)})),index:++n,value:e}})),(function(e,t){return function(e,t,r){var n=-1,i=e.criteria,a=t.criteria,s=i.length,o=r.length;for(;++n<s;){var l=Si(i[n],a[n]);if(l)return n>=o?l:l*("desc"==r[n]?-1:1)}return e.index-t.index}(e,t,r)}))}function $n(e,t,r){for(var n=-1,i=t.length,a={};++n<i;){var s=t[n],o=In(e,s);r(o,s)&&Jn(a,_i(s,e),o)}return a}function Xn(e,t,r,n){var i=n?Ht:zt,a=-1,s=t.length,o=e;for(e===t&&(t=Ci(t)),r&&(o=Ot(e,Qt(r)));++a<s;)for(var l=0,u=t[a],c=r?r(u):u;(l=i(o,c,l,n))>-1;)o!==e&&Ke.call(o,l,1),Ke.call(e,l,1);return e}function qn(e,t){for(var r=e?t.length:0,n=r-1;r--;){var i=t[r];if(r==n||i!==a){var a=i;va(i)?Ke.call(e,i,1):di(e,i)}}return e}function Wn(e,t){return e+gt(wr()*(t-e+1))}function Yn(e,t){var r="";if(!e||t<1||t>h)return r;do{t%2&&(r+=e),(t=gt(t/2))&&(e+=e)}while(t);return r}function Kn(e,t){return Ra(Sa(e,t,sl),e+"")}function Zn(e){return Kr(Ho(e))}function Qn(e,t){var r=Ho(e);return Oa(r,on(t,0,r.length))}function Jn(e,t,n,i){if(!ro(e))return e;for(var a=-1,s=(t=_i(t,e)).length,o=s-1,l=e;null!=l&&++a<s;){var u=Ua(t[a]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(a!=o){var d=l[u];(c=i?i(d,u,l):r)===r&&(c=ro(d)?d:va(t[a+1])?[]:{})}en(l,u,c),l=l[u]}return e}var ei=Cr?function(e,t){return Cr.set(e,t),e}:sl,ti=lt?function(e,t){return lt(e,"toString",{configurable:!0,enumerable:!1,value:nl(t),writable:!0})}:sl;function ri(e){return Oa(Ho(e))}function ni(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var a=xe(i);++n<i;)a[n]=e[n+t];return a}function ii(e,t){var r;return hn(e,(function(e,n,i){return!(r=t(e,n,i))})),!!r}function ai(e,t,r){var n=0,i=null==e?n:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;n<i;){var a=n+i>>>1,s=e[a];null!==s&&!co(s)&&(r?s<=t:s<t)?n=a+1:i=a}return i}return si(e,t,sl,r)}function si(e,t,n,i){var a=0,s=null==e?0:e.length;if(0===s)return 0;for(var o=(t=n(t))!=t,l=null===t,u=co(t),c=t===r;a<s;){var d=gt((a+s)/2),h=n(e[d]),f=h!==r,p=null===h,m=h==h,y=co(h);if(o)var g=i||m;else g=c?m&&(i||f):l?m&&f&&(i||!p):u?m&&f&&!p&&(i||!y):!p&&!y&&(i?h<=t:h<t);g?a=d+1:s=d}return vr(s,4294967294)}function oi(e,t){for(var r=-1,n=e.length,i=0,a=[];++r<n;){var s=e[r],o=t?t(s):s;if(!r||!zs(o,l)){var l=o;a[i++]=0===s?0:s}}return a}function li(e){return"number"==typeof e?e:co(e)?f:+e}function ui(e){if("string"==typeof e)return e;if(Xs(e))return Ot(e,ui)+"";if(co(e))return Br?Br.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ci(e,t,r){var n=-1,i=Mt,a=e.length,s=!0,o=[],l=o;if(r)s=!1,i=Lt;else if(a>=200){var u=t?null:Yi(e);if(u)return cr(u);s=!1,i=er,l=new qr}else l=t?[]:o;e:for(;++n<a;){var c=e[n],d=t?t(c):c;if(c=r||0!==c?c:0,s&&d==d){for(var h=l.length;h--;)if(l[h]===d)continue e;t&&l.push(d),o.push(c)}else i(l,d,r)||(l!==o&&l.push(d),o.push(c))}return o}function di(e,t){return null==(e=Aa(e,t=_i(t,e)))||delete e[Ua(Qa(t))]}function hi(e,t,r,n){return Jn(e,t,r(In(e,t)),n)}function fi(e,t,r,n){for(var i=e.length,a=n?i:-1;(n?a--:++a<i)&&t(e[a],a,e););return r?ni(e,n?0:a,n?a+1:i):ni(e,n?a+1:0,n?i:a)}function pi(e,t){var r=e;return r instanceof Hr&&(r=r.value()),Dt(t,(function(e,t){return t.func.apply(t.thisArg,Ft([e],t.args))}),r)}function mi(e,t,r){var n=e.length;if(n<2)return n?ci(e[0]):[];for(var i=-1,a=xe(n);++i<n;)for(var s=e[i],o=-1;++o<n;)o!=i&&(a[i]=dn(a[i]||s,e[o],t,r));return ci(gn(a,1),t,r)}function yi(e,t,n){for(var i=-1,a=e.length,s=t.length,o={};++i<a;){var l=i<s?t[i]:r;n(o,e[i],l)}return o}function gi(e){return Ys(e)?e:[]}function vi(e){return"function"==typeof e?e:sl}function _i(e,t){return Xs(e)?e:ba(e,t)?[e]:Ba(wo(e))}var bi=Kn;function wi(e,t,n){var i=e.length;return n=n===r?i:n,!t&&n>=i?e:ni(e,t,n)}var xi=dt||function(e){return ft.clearTimeout(e)};function Ii(e,t){if(t)return e.slice();var r=e.length,n=Xe?Xe(r):new e.constructor(r);return e.copy(n),n}function Ti(e){var t=new e.constructor(e.byteLength);return new $e(t).set(new $e(e)),t}function Ei(e,t){var r=t?Ti(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Si(e,t){if(e!==t){var n=e!==r,i=null===e,a=e==e,s=co(e),o=t!==r,l=null===t,u=t==t,c=co(t);if(!l&&!c&&!s&&e>t||s&&o&&u&&!l&&!c||i&&o&&u||!n&&u||!a)return 1;if(!i&&!s&&!c&&e<t||c&&n&&a&&!i&&!s||l&&n&&a||!o&&a||!u)return-1}return 0}function Ai(e,t,r,n){for(var i=-1,a=e.length,s=r.length,o=-1,l=t.length,u=gr(a-s,0),c=xe(l+u),d=!n;++o<l;)c[o]=t[o];for(;++i<s;)(d||i<a)&&(c[r[i]]=e[i]);for(;u--;)c[o++]=e[i++];return c}function ki(e,t,r,n){for(var i=-1,a=e.length,s=-1,o=r.length,l=-1,u=t.length,c=gr(a-o,0),d=xe(c+u),h=!n;++i<c;)d[i]=e[i];for(var f=i;++l<u;)d[f+l]=t[l];for(;++s<o;)(h||i<a)&&(d[f+r[s]]=e[i++]);return d}function Ci(e,t){var r=-1,n=e.length;for(t||(t=xe(n));++r<n;)t[r]=e[r];return t}function Pi(e,t,n,i){var a=!n;n||(n={});for(var s=-1,o=t.length;++s<o;){var l=t[s],u=i?i(n[l],e[l],l,n,e):r;u===r&&(u=e[l]),a?an(n,l,u):en(n,l,u)}return n}function Ri(e,t){return function(r,n){var i=Xs(r)?At:rn,a=t?t():{};return i(r,e,la(n,2),a)}}function Mi(e){return Kn((function(t,n){var i=-1,a=n.length,s=a>1?n[a-1]:r,o=a>2?n[2]:r;for(s=e.length>3&&"function"==typeof s?(a--,s):r,o&&_a(n[0],n[1],o)&&(s=a<3?r:s,a=1),t=Ae(t);++i<a;){var l=n[i];l&&e(t,l,i,s)}return t}))}function Li(e,t){return function(r,n){if(null==r)return r;if(!Ws(r))return e(r,n);for(var i=r.length,a=t?i:-1,s=Ae(r);(t?a--:++a<i)&&!1!==n(s[a],a,s););return r}}function Oi(e){return function(t,r,n){for(var i=-1,a=Ae(t),s=n(t),o=s.length;o--;){var l=s[e?o:++i];if(!1===r(a[l],l,a))break}return t}}function Fi(e){return function(t){var n=sr(t=wo(t))?hr(t):r,i=n?n[0]:t.charAt(0),a=n?wi(n,1).join(""):t.slice(1);return i[e]()+a}}function Di(e){return function(t){return Dt(el(Xo(t).replace(Qe,"")),e,"")}}function Ni(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=jr(e.prototype),n=e.apply(r,t);return ro(n)?n:r}}function Bi(e){return function(t,n,i){var a=Ae(t);if(!Ws(t)){var s=la(n,3);t=Oo(t),n=function(e){return s(a[e],e,a)}}var o=e(t,n,i);return o>-1?a[s?t[o]:o]:r}}function Ui(e){return ra((function(t){var i=t.length,a=i,s=zr.prototype.thru;for(e&&t.reverse();a--;){var o=t[a];if("function"!=typeof o)throw new Pe(n);if(s&&!l&&"wrapper"==sa(o))var l=new zr([],!0)}for(a=l?a:i;++a<i;){var u=sa(o=t[a]),c="wrapper"==u?aa(o):r;l=c&&wa(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?l[sa(c[0])].apply(l,c[3]):1==o.length&&wa(o)?l[u]():l.thru(o)}return function(){var e=arguments,r=e[0];if(l&&1==e.length&&Xs(r))return l.plant(r).value();for(var n=0,a=i?t[n].apply(this,e):r;++n<i;)a=t[n].call(this,a);return a}}))}function ji(e,t,n,i,a,s,o,l,c,d){var h=t&u,f=1&t,p=2&t,m=24&t,y=512&t,g=p?r:Ni(e);return function u(){for(var v=arguments.length,_=xe(v),b=v;b--;)_[b]=arguments[b];if(m)var w=oa(u),x=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}(_,w);if(i&&(_=Ai(_,i,a,m)),s&&(_=ki(_,s,o,m)),v-=x,m&&v<d){var I=ur(_,w);return qi(e,t,ji,u.placeholder,n,_,I,l,c,d-v)}var T=f?n:this,E=p?T[e]:e;return v=_.length,l?_=function(e,t){var n=e.length,i=vr(t.length,n),a=Ci(e);for(;i--;){var s=t[i];e[i]=va(s,n)?a[s]:r}return e}(_,l):y&&v>1&&_.reverse(),h&&c<v&&(_.length=c),this&&this!==ft&&this instanceof u&&(E=g||Ni(E)),E.apply(T,_)}}function Gi(e,t){return function(r,n){return function(e,t,r,n){return bn(e,(function(e,i,a){t(n,r(e),i,a)})),n}(r,e,t(n),{})}}function zi(e,t){return function(n,i){var a;if(n===r&&i===r)return t;if(n!==r&&(a=n),i!==r){if(a===r)return i;"string"==typeof n||"string"==typeof i?(n=ui(n),i=ui(i)):(n=li(n),i=li(i)),a=e(n,i)}return a}}function Hi(e){return ra((function(t){return t=Ot(t,Qt(la())),Kn((function(r){var n=this;return e(t,(function(e){return St(e,n,r)}))}))}))}function Vi(e,t){var n=(t=t===r?" ":ui(t)).length;if(n<2)return n?Yn(t,e):t;var i=Yn(t,mt(e/dr(t)));return sr(t)?wi(hr(i),0,e).join(""):i.slice(0,e)}function $i(e){return function(t,n,i){return i&&"number"!=typeof i&&_a(t,n,i)&&(n=i=r),t=yo(t),n===r?(n=t,t=0):n=yo(n),function(e,t,r,n){for(var i=-1,a=gr(mt((t-e)/(r||1)),0),s=xe(a);a--;)s[n?a:++i]=e,e+=r;return s}(t,n,i=i===r?t<n?1:-1:yo(i),e)}}function Xi(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=_o(t),r=_o(r)),e(t,r)}}function qi(e,t,n,i,a,s,u,c,d,h){var f=8&t;t|=f?o:l,4&(t&=~(f?l:o))||(t&=-4);var p=[e,t,a,f?s:r,f?u:r,f?r:s,f?r:u,c,d,h],m=n.apply(r,p);return wa(e)&&Ca(m,p),m.placeholder=i,Ma(m,e,t)}function Wi(e){var t=Se[e];return function(e,r){if(e=_o(e),(r=null==r?0:vr(go(r),292))&&Ut(e)){var n=(wo(e)+"e").split("e");return+((n=(wo(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var Yi=Sr&&1/cr(new Sr([,-0]))[1]==d?function(e){return new Sr(e)}:dl;function Ki(e){return function(t){var r=pa(t);return r==I?or(t):r==k?function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=[e,e]})),r}(t):function(e,t){return Ot(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Zi(e,t,i,d,h,f,p,m){var y=2&t;if(!y&&"function"!=typeof e)throw new Pe(n);var g=d?d.length:0;if(g||(t&=-97,d=h=r),p=p===r?p:gr(go(p),0),m=m===r?m:go(m),g-=h?h.length:0,t&l){var v=d,_=h;d=h=r}var b=y?r:aa(e),w=[e,t,i,d,h,v,_,f,p,m];if(b&&function(e,t){var r=e[1],n=t[1],i=r|n,s=i<131,o=n==u&&8==r||n==u&&r==c&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==r;if(!s&&!o)return e;1&n&&(e[2]=t[2],i|=1&r?0:4);var l=t[3];if(l){var d=e[3];e[3]=d?Ai(d,l,t[4]):l,e[4]=d?ur(e[3],a):t[4]}(l=t[5])&&(d=e[5],e[5]=d?ki(d,l,t[6]):l,e[6]=d?ur(e[5],a):t[6]);(l=t[7])&&(e[7]=l);n&u&&(e[8]=null==e[8]?t[8]:vr(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(w,b),e=w[0],t=w[1],i=w[2],d=w[3],h=w[4],!(m=w[9]=w[9]===r?y?0:e.length:gr(w[9]-g,0))&&24&t&&(t&=-25),t&&1!=t)x=8==t||t==s?function(e,t,n){var i=Ni(e);return function a(){for(var s=arguments.length,o=xe(s),l=s,u=oa(a);l--;)o[l]=arguments[l];var c=s<3&&o[0]!==u&&o[s-1]!==u?[]:ur(o,u);return(s-=c.length)<n?qi(e,t,ji,a.placeholder,r,o,c,r,r,n-s):St(this&&this!==ft&&this instanceof a?i:e,this,o)}}(e,t,m):t!=o&&33!=t||h.length?ji.apply(r,w):function(e,t,r,n){var i=1&t,a=Ni(e);return function t(){for(var s=-1,o=arguments.length,l=-1,u=n.length,c=xe(u+o),d=this&&this!==ft&&this instanceof t?a:e;++l<u;)c[l]=n[l];for(;o--;)c[l++]=arguments[++s];return St(d,i?r:this,c)}}(e,t,i,d);else var x=function(e,t,r){var n=1&t,i=Ni(e);return function t(){return(this&&this!==ft&&this instanceof t?i:e).apply(n?r:this,arguments)}}(e,t,i);return Ma((b?ei:Ca)(x,w),e,t)}function Qi(e,t,n,i){return e===r||zs(e,Le[n])&&!De.call(i,n)?t:e}function Ji(e,t,n,i,a,s){return ro(e)&&ro(t)&&(s.set(t,e),zn(e,t,r,Ji,s),s.delete(t)),e}function ea(e){return so(e)?r:e}function ta(e,t,n,i,a,s){var o=1&n,l=e.length,u=t.length;if(l!=u&&!(o&&u>l))return!1;var c=s.get(e),d=s.get(t);if(c&&d)return c==t&&d==e;var h=-1,f=!0,p=2&n?new qr:r;for(s.set(e,t),s.set(t,e);++h<l;){var m=e[h],y=t[h];if(i)var g=o?i(y,m,h,t,e,s):i(m,y,h,e,t,s);if(g!==r){if(g)continue;f=!1;break}if(p){if(!Bt(t,(function(e,t){if(!er(p,t)&&(m===e||a(m,e,n,i,s)))return p.push(t)}))){f=!1;break}}else if(m!==y&&!a(m,y,n,i,s)){f=!1;break}}return s.delete(e),s.delete(t),f}function ra(e){return Ra(Sa(e,r,qa),e+"")}function na(e){return Tn(e,Oo,ha)}function ia(e){return Tn(e,Fo,fa)}var aa=Cr?function(e){return Cr.get(e)}:dl;function sa(e){for(var t=e.name+"",r=Pr[t],n=De.call(Pr,t)?r.length:0;n--;){var i=r[n],a=i.func;if(null==a||a==e)return i.name}return t}function oa(e){return(De.call(Ur,"placeholder")?Ur:e).placeholder}function la(){var e=Ur.iteratee||ol;return e=e===ol?Fn:e,arguments.length?e(arguments[0],arguments[1]):e}function ua(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function ca(e){for(var t=Oo(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,Ta(i)]}return t}function da(e,t){var n=function(e,t){return null==e?r:e[t]}(e,t);return On(n)?n:r}var ha=vt?function(e){return null==e?[]:(e=Ae(e),Rt(vt(e),(function(t){return Ye.call(e,t)})))}:vl,fa=vt?function(e){for(var t=[];e;)Ft(t,ha(e)),e=qe(e);return t}:vl,pa=En;function ma(e,t,r){for(var n=-1,i=(t=_i(t,e)).length,a=!1;++n<i;){var s=Ua(t[n]);if(!(a=null!=e&&r(e,s)))break;e=e[s]}return a||++n!=i?a:!!(i=null==e?0:e.length)&&to(i)&&va(s,i)&&(Xs(e)||$s(e))}function ya(e){return"function"!=typeof e.constructor||Ia(e)?{}:jr(qe(e))}function ga(e){return Xs(e)||$s(e)||!!(Ze&&e&&e[Ze])}function va(e,t){var r=typeof e;return!!(t=null==t?h:t)&&("number"==r||"symbol"!=r&&ve.test(e))&&e>-1&&e%1==0&&e<t}function _a(e,t,r){if(!ro(r))return!1;var n=typeof t;return!!("number"==n?Ws(r)&&va(t,r.length):"string"==n&&t in r)&&zs(r[t],e)}function ba(e,t){if(Xs(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!co(e))||(ee.test(e)||!J.test(e)||null!=t&&e in Ae(t))}function wa(e){var t=sa(e),r=Ur[t];if("function"!=typeof r||!(t in Hr.prototype))return!1;if(e===r)return!0;var n=aa(r);return!!n&&e===n[0]}(Ir&&pa(new Ir(new ArrayBuffer(1)))!=L||Tr&&pa(new Tr)!=I||Er&&pa(Er.resolve())!=S||Sr&&pa(new Sr)!=k||Ar&&pa(new Ar)!=R)&&(pa=function(e){var t=En(e),n=t==E?e.constructor:r,i=n?ja(n):"";if(i)switch(i){case Rr:return L;case Mr:return I;case Lr:return S;case Or:return k;case Fr:return R}return t});var xa=Oe?Js:_l;function Ia(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Le)}function Ta(e){return e==e&&!ro(e)}function Ea(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==r||e in Ae(n)))}}function Sa(e,t,n){return t=gr(t===r?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=gr(r.length-t,0),s=xe(a);++i<a;)s[i]=r[t+i];i=-1;for(var o=xe(t+1);++i<t;)o[i]=r[i];return o[t]=n(s),St(e,this,o)}}function Aa(e,t){return t.length<2?e:In(e,ni(t,0,-1))}function ka(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Ca=La(ei),Pa=pt||function(e,t){return ft.setTimeout(e,t)},Ra=La(ti);function Ma(e,t,r){var n=t+"";return Ra(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(se,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return kt(m,(function(r){var n="_."+r[0];t&r[1]&&!Mt(e,n)&&e.push(n)})),e.sort()}(function(e){var t=e.match(oe);return t?t[1].split(le):[]}(n),r)))}function La(e){var t=0,n=0;return function(){var i=_r(),a=16-(i-n);if(n=i,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(r,arguments)}}function Oa(e,t){var n=-1,i=e.length,a=i-1;for(t=t===r?i:t;++n<t;){var s=Wn(n,a),o=e[s];e[s]=e[n],e[n]=o}return e.length=t,e}var Fa,Da,Na,Ba=(Fa=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(te,(function(e,r,n,i){t.push(n?i.replace(de,"$1"):r||e)})),t},Da=Ds(Fa,(function(e){return 500===Na.size&&Na.clear(),e})),Na=Da.cache,Da);function Ua(e){if("string"==typeof e||co(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function ja(e){if(null!=e){try{return Fe.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Ga(e){if(e instanceof Hr)return e.clone();var t=new zr(e.__wrapped__,e.__chain__);return t.__actions__=Ci(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var za=Kn((function(e,t){return Ys(e)?dn(e,gn(t,1,Ys,!0)):[]})),Ha=Kn((function(e,t){var n=Qa(t);return Ys(n)&&(n=r),Ys(e)?dn(e,gn(t,1,Ys,!0),la(n,2)):[]})),Va=Kn((function(e,t){var n=Qa(t);return Ys(n)&&(n=r),Ys(e)?dn(e,gn(t,1,Ys,!0),r,n):[]}));function $a(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:go(r);return i<0&&(i=gr(n+i,0)),Gt(e,la(t,3),i)}function Xa(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var a=i-1;return n!==r&&(a=go(n),a=n<0?gr(i+a,0):vr(a,i-1)),Gt(e,la(t,3),a,!0)}function qa(e){return(null==e?0:e.length)?gn(e,1):[]}function Wa(e){return e&&e.length?e[0]:r}var Ya=Kn((function(e){var t=Ot(e,gi);return t.length&&t[0]===e[0]?Cn(t):[]})),Ka=Kn((function(e){var t=Qa(e),n=Ot(e,gi);return t===Qa(n)?t=r:n.pop(),n.length&&n[0]===e[0]?Cn(n,la(t,2)):[]})),Za=Kn((function(e){var t=Qa(e),n=Ot(e,gi);return(t="function"==typeof t?t:r)&&n.pop(),n.length&&n[0]===e[0]?Cn(n,r,t):[]}));function Qa(e){var t=null==e?0:e.length;return t?e[t-1]:r}var Ja=Kn(es);function es(e,t){return e&&e.length&&t&&t.length?Xn(e,t):e}var ts=ra((function(e,t){var r=null==e?0:e.length,n=sn(e,t);return qn(e,Ot(t,(function(e){return va(e,r)?+e:e})).sort(Si)),n}));function rs(e){return null==e?e:xr.call(e)}var ns=Kn((function(e){return ci(gn(e,1,Ys,!0))})),is=Kn((function(e){var t=Qa(e);return Ys(t)&&(t=r),ci(gn(e,1,Ys,!0),la(t,2))})),as=Kn((function(e){var t=Qa(e);return t="function"==typeof t?t:r,ci(gn(e,1,Ys,!0),r,t)}));function ss(e){if(!e||!e.length)return[];var t=0;return e=Rt(e,(function(e){if(Ys(e))return t=gr(e.length,t),!0})),Kt(t,(function(t){return Ot(e,Xt(t))}))}function os(e,t){if(!e||!e.length)return[];var n=ss(e);return null==t?n:Ot(n,(function(e){return St(t,r,e)}))}var ls=Kn((function(e,t){return Ys(e)?dn(e,t):[]})),us=Kn((function(e){return mi(Rt(e,Ys))})),cs=Kn((function(e){var t=Qa(e);return Ys(t)&&(t=r),mi(Rt(e,Ys),la(t,2))})),ds=Kn((function(e){var t=Qa(e);return t="function"==typeof t?t:r,mi(Rt(e,Ys),r,t)})),hs=Kn(ss);var fs=Kn((function(e){var t=e.length,n=t>1?e[t-1]:r;return n="function"==typeof n?(e.pop(),n):r,os(e,n)}));function ps(e){var t=Ur(e);return t.__chain__=!0,t}function ms(e,t){return t(e)}var ys=ra((function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,a=function(t){return sn(t,e)};return!(t>1||this.__actions__.length)&&i instanceof Hr&&va(n)?((i=i.slice(n,+n+(t?1:0))).__actions__.push({func:ms,args:[a],thisArg:r}),new zr(i,this.__chain__).thru((function(e){return t&&!e.length&&e.push(r),e}))):this.thru(a)}));var gs=Ri((function(e,t,r){De.call(e,r)?++e[r]:an(e,r,1)}));var vs=Bi($a),_s=Bi(Xa);function bs(e,t){return(Xs(e)?kt:hn)(e,la(t,3))}function ws(e,t){return(Xs(e)?Ct:fn)(e,la(t,3))}var xs=Ri((function(e,t,r){De.call(e,r)?e[r].push(t):an(e,r,[t])}));var Is=Kn((function(e,t,r){var n=-1,i="function"==typeof t,a=Ws(e)?xe(e.length):[];return hn(e,(function(e){a[++n]=i?St(t,e,r):Pn(e,t,r)})),a})),Ts=Ri((function(e,t,r){an(e,r,t)}));function Es(e,t){return(Xs(e)?Ot:Un)(e,la(t,3))}var Ss=Ri((function(e,t,r){e[r?0:1].push(t)}),(function(){return[[],[]]}));var As=Kn((function(e,t){if(null==e)return[];var r=t.length;return r>1&&_a(e,t[0],t[1])?t=[]:r>2&&_a(t[0],t[1],t[2])&&(t=[t[0]]),Vn(e,gn(t,1),[])})),ks=ht||function(){return ft.Date.now()};function Cs(e,t,n){return t=n?r:t,t=e&&null==t?e.length:t,Zi(e,u,r,r,r,r,t)}function Ps(e,t){var i;if("function"!=typeof t)throw new Pe(n);return e=go(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=r),i}}var Rs=Kn((function(e,t,r){var n=1;if(r.length){var i=ur(r,oa(Rs));n|=o}return Zi(e,n,t,r,i)})),Ms=Kn((function(e,t,r){var n=3;if(r.length){var i=ur(r,oa(Ms));n|=o}return Zi(t,n,e,r,i)}));function Ls(e,t,i){var a,s,o,l,u,c,d=0,h=!1,f=!1,p=!0;if("function"!=typeof e)throw new Pe(n);function m(t){var n=a,i=s;return a=s=r,d=t,l=e.apply(i,n)}function y(e){var n=e-c;return c===r||n>=t||n<0||f&&e-d>=o}function g(){var e=ks();if(y(e))return v(e);u=Pa(g,function(e){var r=t-(e-c);return f?vr(r,o-(e-d)):r}(e))}function v(e){return u=r,p&&a?m(e):(a=s=r,l)}function _(){var e=ks(),n=y(e);if(a=arguments,s=this,c=e,n){if(u===r)return function(e){return d=e,u=Pa(g,t),h?m(e):l}(c);if(f)return xi(u),u=Pa(g,t),m(c)}return u===r&&(u=Pa(g,t)),l}return t=_o(t)||0,ro(i)&&(h=!!i.leading,o=(f="maxWait"in i)?gr(_o(i.maxWait)||0,t):o,p="trailing"in i?!!i.trailing:p),_.cancel=function(){u!==r&&xi(u),d=0,a=c=s=u=r},_.flush=function(){return u===r?l:v(ks())},_}var Os=Kn((function(e,t){return cn(e,1,t)})),Fs=Kn((function(e,t,r){return cn(e,_o(t)||0,r)}));function Ds(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Pe(n);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var s=e.apply(this,n);return r.cache=a.set(i,s)||a,s};return r.cache=new(Ds.Cache||Xr),r}function Ns(e){if("function"!=typeof e)throw new Pe(n);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ds.Cache=Xr;var Bs=bi((function(e,t){var r=(t=1==t.length&&Xs(t[0])?Ot(t[0],Qt(la())):Ot(gn(t,1),Qt(la()))).length;return Kn((function(n){for(var i=-1,a=vr(n.length,r);++i<a;)n[i]=t[i].call(this,n[i]);return St(e,this,n)}))})),Us=Kn((function(e,t){var n=ur(t,oa(Us));return Zi(e,o,r,t,n)})),js=Kn((function(e,t){var n=ur(t,oa(js));return Zi(e,l,r,t,n)})),Gs=ra((function(e,t){return Zi(e,c,r,r,r,t)}));function zs(e,t){return e===t||e!=e&&t!=t}var Hs=Xi(Sn),Vs=Xi((function(e,t){return e>=t})),$s=Rn(function(){return arguments}())?Rn:function(e){return no(e)&&De.call(e,"callee")&&!Ye.call(e,"callee")},Xs=xe.isArray,qs=_t?Qt(_t):function(e){return no(e)&&En(e)==M};function Ws(e){return null!=e&&to(e.length)&&!Js(e)}function Ys(e){return no(e)&&Ws(e)}var Ks=Tt||_l,Zs=bt?Qt(bt):function(e){return no(e)&&En(e)==_};function Qs(e){if(!no(e))return!1;var t=En(e);return t==b||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!so(e)}function Js(e){if(!ro(e))return!1;var t=En(e);return t==w||t==x||"[object AsyncFunction]"==t||"[object Proxy]"==t}function eo(e){return"number"==typeof e&&e==go(e)}function to(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=h}function ro(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function no(e){return null!=e&&"object"==typeof e}var io=wt?Qt(wt):function(e){return no(e)&&pa(e)==I};function ao(e){return"number"==typeof e||no(e)&&En(e)==T}function so(e){if(!no(e)||En(e)!=E)return!1;var t=qe(e);if(null===t)return!0;var r=De.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Fe.call(r)==je}var oo=xt?Qt(xt):function(e){return no(e)&&En(e)==A};var lo=It?Qt(It):function(e){return no(e)&&pa(e)==k};function uo(e){return"string"==typeof e||!Xs(e)&&no(e)&&En(e)==C}function co(e){return"symbol"==typeof e||no(e)&&En(e)==P}var ho=Et?Qt(Et):function(e){return no(e)&&to(e.length)&&!!st[En(e)]};var fo=Xi(Bn),po=Xi((function(e,t){return e<=t}));function mo(e){if(!e)return[];if(Ws(e))return uo(e)?hr(e):Ci(e);if(et&&e[et])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[et]());var t=pa(e);return(t==I?or:t==k?cr:Ho)(e)}function yo(e){return e?(e=_o(e))===d||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function go(e){var t=yo(e),r=t%1;return t==t?r?t-r:t:0}function vo(e){return e?on(go(e),0,p):0}function _o(e){if("number"==typeof e)return e;if(co(e))return f;if(ro(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ro(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Zt(e);var r=me.test(e);return r||ge.test(e)?ct(e.slice(2),r?2:8):pe.test(e)?f:+e}function bo(e){return Pi(e,Fo(e))}function wo(e){return null==e?"":ui(e)}var xo=Mi((function(e,t){if(Ia(t)||Ws(t))Pi(t,Oo(t),e);else for(var r in t)De.call(t,r)&&en(e,r,t[r])})),Io=Mi((function(e,t){Pi(t,Fo(t),e)})),To=Mi((function(e,t,r,n){Pi(t,Fo(t),e,n)})),Eo=Mi((function(e,t,r,n){Pi(t,Oo(t),e,n)})),So=ra(sn);var Ao=Kn((function(e,t){e=Ae(e);var n=-1,i=t.length,a=i>2?t[2]:r;for(a&&_a(t[0],t[1],a)&&(i=1);++n<i;)for(var s=t[n],o=Fo(s),l=-1,u=o.length;++l<u;){var c=o[l],d=e[c];(d===r||zs(d,Le[c])&&!De.call(e,c))&&(e[c]=s[c])}return e})),ko=Kn((function(e){return e.push(r,Ji),St(No,r,e)}));function Co(e,t,n){var i=null==e?r:In(e,t);return i===r?n:i}function Po(e,t){return null!=e&&ma(e,t,kn)}var Ro=Gi((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=Ue.call(t)),e[t]=r}),nl(sl)),Mo=Gi((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=Ue.call(t)),De.call(e,t)?e[t].push(r):e[t]=[r]}),la),Lo=Kn(Pn);function Oo(e){return Ws(e)?Yr(e):Dn(e)}function Fo(e){return Ws(e)?Yr(e,!0):Nn(e)}var Do=Mi((function(e,t,r){zn(e,t,r)})),No=Mi((function(e,t,r,n){zn(e,t,r,n)})),Bo=ra((function(e,t){var r={};if(null==e)return r;var n=!1;t=Ot(t,(function(t){return t=_i(t,e),n||(n=t.length>1),t})),Pi(e,ia(e),r),n&&(r=ln(r,7,ea));for(var i=t.length;i--;)di(r,t[i]);return r}));var Uo=ra((function(e,t){return null==e?{}:function(e,t){return $n(e,t,(function(t,r){return Po(e,r)}))}(e,t)}));function jo(e,t){if(null==e)return{};var r=Ot(ia(e),(function(e){return[e]}));return t=la(t),$n(e,r,(function(e,r){return t(e,r[0])}))}var Go=Ki(Oo),zo=Ki(Fo);function Ho(e){return null==e?[]:Jt(e,Oo(e))}var Vo=Di((function(e,t,r){return t=t.toLowerCase(),e+(r?$o(t):t)}));function $o(e){return Jo(wo(e).toLowerCase())}function Xo(e){return(e=wo(e))&&e.replace(_e,nr).replace(Je,"")}var qo=Di((function(e,t,r){return e+(r?"-":"")+t.toLowerCase()})),Wo=Di((function(e,t,r){return e+(r?" ":"")+t.toLowerCase()})),Yo=Fi("toLowerCase");var Ko=Di((function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}));var Zo=Di((function(e,t,r){return e+(r?" ":"")+Jo(t)}));var Qo=Di((function(e,t,r){return e+(r?" ":"")+t.toUpperCase()})),Jo=Fi("toUpperCase");function el(e,t,n){return e=wo(e),(t=n?r:t)===r?function(e){return nt.test(e)}(e)?function(e){return e.match(tt)||[]}(e):function(e){return e.match(ue)||[]}(e):e.match(t)||[]}var tl=Kn((function(e,t){try{return St(e,r,t)}catch(n){return Qs(n)?n:new Te(n)}})),rl=ra((function(e,t){return kt(t,(function(t){t=Ua(t),an(e,t,Rs(e[t],e))})),e}));function nl(e){return function(){return e}}var il=Ui(),al=Ui(!0);function sl(e){return e}function ol(e){return Fn("function"==typeof e?e:ln(e,1))}var ll=Kn((function(e,t){return function(r){return Pn(r,e,t)}})),ul=Kn((function(e,t){return function(r){return Pn(e,r,t)}}));function cl(e,t,r){var n=Oo(t),i=xn(t,n);null!=r||ro(t)&&(i.length||!n.length)||(r=t,t=e,e=this,i=xn(t,Oo(t)));var a=!(ro(r)&&"chain"in r&&!r.chain),s=Js(e);return kt(i,(function(r){var n=t[r];e[r]=n,s&&(e.prototype[r]=function(){var t=this.__chain__;if(a||t){var r=e(this.__wrapped__);return(r.__actions__=Ci(this.__actions__)).push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,Ft([this.value()],arguments))})})),e}function dl(){}var hl=Hi(Ot),fl=Hi(Pt),pl=Hi(Bt);function ml(e){return ba(e)?Xt(Ua(e)):function(e){return function(t){return In(t,e)}}(e)}var yl=$i(),gl=$i(!0);function vl(){return[]}function _l(){return!1}var bl=zi((function(e,t){return e+t}),0),wl=Wi("ceil"),xl=zi((function(e,t){return e/t}),1),Il=Wi("floor");var Tl,El=zi((function(e,t){return e*t}),1),Sl=Wi("round"),Al=zi((function(e,t){return e-t}),0);return Ur.after=function(e,t){if("function"!=typeof t)throw new Pe(n);return e=go(e),function(){if(--e<1)return t.apply(this,arguments)}},Ur.ary=Cs,Ur.assign=xo,Ur.assignIn=Io,Ur.assignInWith=To,Ur.assignWith=Eo,Ur.at=So,Ur.before=Ps,Ur.bind=Rs,Ur.bindAll=rl,Ur.bindKey=Ms,Ur.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Xs(e)?e:[e]},Ur.chain=ps,Ur.chunk=function(e,t,n){t=(n?_a(e,t,n):t===r)?1:gr(go(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var a=0,s=0,o=xe(mt(i/t));a<i;)o[s++]=ni(e,a,a+=t);return o},Ur.compact=function(e){for(var t=-1,r=null==e?0:e.length,n=0,i=[];++t<r;){var a=e[t];a&&(i[n++]=a)}return i},Ur.concat=function(){var e=arguments.length;if(!e)return[];for(var t=xe(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return Ft(Xs(r)?Ci(r):[r],gn(t,1))},Ur.cond=function(e){var t=null==e?0:e.length,r=la();return e=t?Ot(e,(function(e){if("function"!=typeof e[1])throw new Pe(n);return[r(e[0]),e[1]]})):[],Kn((function(r){for(var n=-1;++n<t;){var i=e[n];if(St(i[0],this,r))return St(i[1],this,r)}}))},Ur.conforms=function(e){return function(e){var t=Oo(e);return function(r){return un(r,e,t)}}(ln(e,1))},Ur.constant=nl,Ur.countBy=gs,Ur.create=function(e,t){var r=jr(e);return null==t?r:nn(r,t)},Ur.curry=function e(t,n,i){var a=Zi(t,8,r,r,r,r,r,n=i?r:n);return a.placeholder=e.placeholder,a},Ur.curryRight=function e(t,n,i){var a=Zi(t,s,r,r,r,r,r,n=i?r:n);return a.placeholder=e.placeholder,a},Ur.debounce=Ls,Ur.defaults=Ao,Ur.defaultsDeep=ko,Ur.defer=Os,Ur.delay=Fs,Ur.difference=za,Ur.differenceBy=Ha,Ur.differenceWith=Va,Ur.drop=function(e,t,n){var i=null==e?0:e.length;return i?ni(e,(t=n||t===r?1:go(t))<0?0:t,i):[]},Ur.dropRight=function(e,t,n){var i=null==e?0:e.length;return i?ni(e,0,(t=i-(t=n||t===r?1:go(t)))<0?0:t):[]},Ur.dropRightWhile=function(e,t){return e&&e.length?fi(e,la(t,3),!0,!0):[]},Ur.dropWhile=function(e,t){return e&&e.length?fi(e,la(t,3),!0):[]},Ur.fill=function(e,t,n,i){var a=null==e?0:e.length;return a?(n&&"number"!=typeof n&&_a(e,t,n)&&(n=0,i=a),function(e,t,n,i){var a=e.length;for((n=go(n))<0&&(n=-n>a?0:a+n),(i=i===r||i>a?a:go(i))<0&&(i+=a),i=n>i?0:vo(i);n<i;)e[n++]=t;return e}(e,t,n,i)):[]},Ur.filter=function(e,t){return(Xs(e)?Rt:yn)(e,la(t,3))},Ur.flatMap=function(e,t){return gn(Es(e,t),1)},Ur.flatMapDeep=function(e,t){return gn(Es(e,t),d)},Ur.flatMapDepth=function(e,t,n){return n=n===r?1:go(n),gn(Es(e,t),n)},Ur.flatten=qa,Ur.flattenDeep=function(e){return(null==e?0:e.length)?gn(e,d):[]},Ur.flattenDepth=function(e,t){return(null==e?0:e.length)?gn(e,t=t===r?1:go(t)):[]},Ur.flip=function(e){return Zi(e,512)},Ur.flow=il,Ur.flowRight=al,Ur.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var i=e[t];n[i[0]]=i[1]}return n},Ur.functions=function(e){return null==e?[]:xn(e,Oo(e))},Ur.functionsIn=function(e){return null==e?[]:xn(e,Fo(e))},Ur.groupBy=xs,Ur.initial=function(e){return(null==e?0:e.length)?ni(e,0,-1):[]},Ur.intersection=Ya,Ur.intersectionBy=Ka,Ur.intersectionWith=Za,Ur.invert=Ro,Ur.invertBy=Mo,Ur.invokeMap=Is,Ur.iteratee=ol,Ur.keyBy=Ts,Ur.keys=Oo,Ur.keysIn=Fo,Ur.map=Es,Ur.mapKeys=function(e,t){var r={};return t=la(t,3),bn(e,(function(e,n,i){an(r,t(e,n,i),e)})),r},Ur.mapValues=function(e,t){var r={};return t=la(t,3),bn(e,(function(e,n,i){an(r,n,t(e,n,i))})),r},Ur.matches=function(e){return jn(ln(e,1))},Ur.matchesProperty=function(e,t){return Gn(e,ln(t,1))},Ur.memoize=Ds,Ur.merge=Do,Ur.mergeWith=No,Ur.method=ll,Ur.methodOf=ul,Ur.mixin=cl,Ur.negate=Ns,Ur.nthArg=function(e){return e=go(e),Kn((function(t){return Hn(t,e)}))},Ur.omit=Bo,Ur.omitBy=function(e,t){return jo(e,Ns(la(t)))},Ur.once=function(e){return Ps(2,e)},Ur.orderBy=function(e,t,n,i){return null==e?[]:(Xs(t)||(t=null==t?[]:[t]),Xs(n=i?r:n)||(n=null==n?[]:[n]),Vn(e,t,n))},Ur.over=hl,Ur.overArgs=Bs,Ur.overEvery=fl,Ur.overSome=pl,Ur.partial=Us,Ur.partialRight=js,Ur.partition=Ss,Ur.pick=Uo,Ur.pickBy=jo,Ur.property=ml,Ur.propertyOf=function(e){return function(t){return null==e?r:In(e,t)}},Ur.pull=Ja,Ur.pullAll=es,Ur.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?Xn(e,t,la(r,2)):e},Ur.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Xn(e,t,r,n):e},Ur.pullAt=ts,Ur.range=yl,Ur.rangeRight=gl,Ur.rearg=Gs,Ur.reject=function(e,t){return(Xs(e)?Rt:yn)(e,Ns(la(t,3)))},Ur.remove=function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,i=[],a=e.length;for(t=la(t,3);++n<a;){var s=e[n];t(s,n,e)&&(r.push(s),i.push(n))}return qn(e,i),r},Ur.rest=function(e,t){if("function"!=typeof e)throw new Pe(n);return Kn(e,t=t===r?t:go(t))},Ur.reverse=rs,Ur.sampleSize=function(e,t,n){return t=(n?_a(e,t,n):t===r)?1:go(t),(Xs(e)?Zr:Qn)(e,t)},Ur.set=function(e,t,r){return null==e?e:Jn(e,t,r)},Ur.setWith=function(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:Jn(e,t,n,i)},Ur.shuffle=function(e){return(Xs(e)?Qr:ri)(e)},Ur.slice=function(e,t,n){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&_a(e,t,n)?(t=0,n=i):(t=null==t?0:go(t),n=n===r?i:go(n)),ni(e,t,n)):[]},Ur.sortBy=As,Ur.sortedUniq=function(e){return e&&e.length?oi(e):[]},Ur.sortedUniqBy=function(e,t){return e&&e.length?oi(e,la(t,2)):[]},Ur.split=function(e,t,n){return n&&"number"!=typeof n&&_a(e,t,n)&&(t=n=r),(n=n===r?p:n>>>0)?(e=wo(e))&&("string"==typeof t||null!=t&&!oo(t))&&!(t=ui(t))&&sr(e)?wi(hr(e),0,n):e.split(t,n):[]},Ur.spread=function(e,t){if("function"!=typeof e)throw new Pe(n);return t=null==t?0:gr(go(t),0),Kn((function(r){var n=r[t],i=wi(r,0,t);return n&&Ft(i,n),St(e,this,i)}))},Ur.tail=function(e){var t=null==e?0:e.length;return t?ni(e,1,t):[]},Ur.take=function(e,t,n){return e&&e.length?ni(e,0,(t=n||t===r?1:go(t))<0?0:t):[]},Ur.takeRight=function(e,t,n){var i=null==e?0:e.length;return i?ni(e,(t=i-(t=n||t===r?1:go(t)))<0?0:t,i):[]},Ur.takeRightWhile=function(e,t){return e&&e.length?fi(e,la(t,3),!1,!0):[]},Ur.takeWhile=function(e,t){return e&&e.length?fi(e,la(t,3)):[]},Ur.tap=function(e,t){return t(e),e},Ur.throttle=function(e,t,r){var i=!0,a=!0;if("function"!=typeof e)throw new Pe(n);return ro(r)&&(i="leading"in r?!!r.leading:i,a="trailing"in r?!!r.trailing:a),Ls(e,t,{leading:i,maxWait:t,trailing:a})},Ur.thru=ms,Ur.toArray=mo,Ur.toPairs=Go,Ur.toPairsIn=zo,Ur.toPath=function(e){return Xs(e)?Ot(e,Ua):co(e)?[e]:Ci(Ba(wo(e)))},Ur.toPlainObject=bo,Ur.transform=function(e,t,r){var n=Xs(e),i=n||Ks(e)||ho(e);if(t=la(t,4),null==r){var a=e&&e.constructor;r=i?n?new a:[]:ro(e)&&Js(a)?jr(qe(e)):{}}return(i?kt:bn)(e,(function(e,n,i){return t(r,e,n,i)})),r},Ur.unary=function(e){return Cs(e,1)},Ur.union=ns,Ur.unionBy=is,Ur.unionWith=as,Ur.uniq=function(e){return e&&e.length?ci(e):[]},Ur.uniqBy=function(e,t){return e&&e.length?ci(e,la(t,2)):[]},Ur.uniqWith=function(e,t){return t="function"==typeof t?t:r,e&&e.length?ci(e,r,t):[]},Ur.unset=function(e,t){return null==e||di(e,t)},Ur.unzip=ss,Ur.unzipWith=os,Ur.update=function(e,t,r){return null==e?e:hi(e,t,vi(r))},Ur.updateWith=function(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:hi(e,t,vi(n),i)},Ur.values=Ho,Ur.valuesIn=function(e){return null==e?[]:Jt(e,Fo(e))},Ur.without=ls,Ur.words=el,Ur.wrap=function(e,t){return Us(vi(t),e)},Ur.xor=us,Ur.xorBy=cs,Ur.xorWith=ds,Ur.zip=hs,Ur.zipObject=function(e,t){return yi(e||[],t||[],en)},Ur.zipObjectDeep=function(e,t){return yi(e||[],t||[],Jn)},Ur.zipWith=fs,Ur.entries=Go,Ur.entriesIn=zo,Ur.extend=Io,Ur.extendWith=To,cl(Ur,Ur),Ur.add=bl,Ur.attempt=tl,Ur.camelCase=Vo,Ur.capitalize=$o,Ur.ceil=wl,Ur.clamp=function(e,t,n){return n===r&&(n=t,t=r),n!==r&&(n=(n=_o(n))==n?n:0),t!==r&&(t=(t=_o(t))==t?t:0),on(_o(e),t,n)},Ur.clone=function(e){return ln(e,4)},Ur.cloneDeep=function(e){return ln(e,5)},Ur.cloneDeepWith=function(e,t){return ln(e,5,t="function"==typeof t?t:r)},Ur.cloneWith=function(e,t){return ln(e,4,t="function"==typeof t?t:r)},Ur.conformsTo=function(e,t){return null==t||un(e,t,Oo(t))},Ur.deburr=Xo,Ur.defaultTo=function(e,t){return null==e||e!=e?t:e},Ur.divide=xl,Ur.endsWith=function(e,t,n){e=wo(e),t=ui(t);var i=e.length,a=n=n===r?i:on(go(n),0,i);return(n-=t.length)>=0&&e.slice(n,a)==t},Ur.eq=zs,Ur.escape=function(e){return(e=wo(e))&&Y.test(e)?e.replace(q,ir):e},Ur.escapeRegExp=function(e){return(e=wo(e))&&ne.test(e)?e.replace(re,"\\$&"):e},Ur.every=function(e,t,n){var i=Xs(e)?Pt:pn;return n&&_a(e,t,n)&&(t=r),i(e,la(t,3))},Ur.find=vs,Ur.findIndex=$a,Ur.findKey=function(e,t){return jt(e,la(t,3),bn)},Ur.findLast=_s,Ur.findLastIndex=Xa,Ur.findLastKey=function(e,t){return jt(e,la(t,3),wn)},Ur.floor=Il,Ur.forEach=bs,Ur.forEachRight=ws,Ur.forIn=function(e,t){return null==e?e:vn(e,la(t,3),Fo)},Ur.forInRight=function(e,t){return null==e?e:_n(e,la(t,3),Fo)},Ur.forOwn=function(e,t){return e&&bn(e,la(t,3))},Ur.forOwnRight=function(e,t){return e&&wn(e,la(t,3))},Ur.get=Co,Ur.gt=Hs,Ur.gte=Vs,Ur.has=function(e,t){return null!=e&&ma(e,t,An)},Ur.hasIn=Po,Ur.head=Wa,Ur.identity=sl,Ur.includes=function(e,t,r,n){e=Ws(e)?e:Ho(e),r=r&&!n?go(r):0;var i=e.length;return r<0&&(r=gr(i+r,0)),uo(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&zt(e,t,r)>-1},Ur.indexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:go(r);return i<0&&(i=gr(n+i,0)),zt(e,t,i)},Ur.inRange=function(e,t,n){return t=yo(t),n===r?(n=t,t=0):n=yo(n),function(e,t,r){return e>=vr(t,r)&&e<gr(t,r)}(e=_o(e),t,n)},Ur.invoke=Lo,Ur.isArguments=$s,Ur.isArray=Xs,Ur.isArrayBuffer=qs,Ur.isArrayLike=Ws,Ur.isArrayLikeObject=Ys,Ur.isBoolean=function(e){return!0===e||!1===e||no(e)&&En(e)==v},Ur.isBuffer=Ks,Ur.isDate=Zs,Ur.isElement=function(e){return no(e)&&1===e.nodeType&&!so(e)},Ur.isEmpty=function(e){if(null==e)return!0;if(Ws(e)&&(Xs(e)||"string"==typeof e||"function"==typeof e.splice||Ks(e)||ho(e)||$s(e)))return!e.length;var t=pa(e);if(t==I||t==k)return!e.size;if(Ia(e))return!Dn(e).length;for(var r in e)if(De.call(e,r))return!1;return!0},Ur.isEqual=function(e,t){return Mn(e,t)},Ur.isEqualWith=function(e,t,n){var i=(n="function"==typeof n?n:r)?n(e,t):r;return i===r?Mn(e,t,r,n):!!i},Ur.isError=Qs,Ur.isFinite=function(e){return"number"==typeof e&&Ut(e)},Ur.isFunction=Js,Ur.isInteger=eo,Ur.isLength=to,Ur.isMap=io,Ur.isMatch=function(e,t){return e===t||Ln(e,t,ca(t))},Ur.isMatchWith=function(e,t,n){return n="function"==typeof n?n:r,Ln(e,t,ca(t),n)},Ur.isNaN=function(e){return ao(e)&&e!=+e},Ur.isNative=function(e){if(xa(e))throw new Te("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return On(e)},Ur.isNil=function(e){return null==e},Ur.isNull=function(e){return null===e},Ur.isNumber=ao,Ur.isObject=ro,Ur.isObjectLike=no,Ur.isPlainObject=so,Ur.isRegExp=oo,Ur.isSafeInteger=function(e){return eo(e)&&e>=-9007199254740991&&e<=h},Ur.isSet=lo,Ur.isString=uo,Ur.isSymbol=co,Ur.isTypedArray=ho,Ur.isUndefined=function(e){return e===r},Ur.isWeakMap=function(e){return no(e)&&pa(e)==R},Ur.isWeakSet=function(e){return no(e)&&"[object WeakSet]"==En(e)},Ur.join=function(e,t){return null==e?"":qt.call(e,t)},Ur.kebabCase=qo,Ur.last=Qa,Ur.lastIndexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var a=i;return n!==r&&(a=(a=go(n))<0?gr(i+a,0):vr(a,i-1)),t==t?function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}(e,t,a):Gt(e,Vt,a,!0)},Ur.lowerCase=Wo,Ur.lowerFirst=Yo,Ur.lt=fo,Ur.lte=po,Ur.max=function(e){return e&&e.length?mn(e,sl,Sn):r},Ur.maxBy=function(e,t){return e&&e.length?mn(e,la(t,2),Sn):r},Ur.mean=function(e){return $t(e,sl)},Ur.meanBy=function(e,t){return $t(e,la(t,2))},Ur.min=function(e){return e&&e.length?mn(e,sl,Bn):r},Ur.minBy=function(e,t){return e&&e.length?mn(e,la(t,2),Bn):r},Ur.stubArray=vl,Ur.stubFalse=_l,Ur.stubObject=function(){return{}},Ur.stubString=function(){return""},Ur.stubTrue=function(){return!0},Ur.multiply=El,Ur.nth=function(e,t){return e&&e.length?Hn(e,go(t)):r},Ur.noConflict=function(){return ft._===this&&(ft._=Ge),this},Ur.noop=dl,Ur.now=ks,Ur.pad=function(e,t,r){e=wo(e);var n=(t=go(t))?dr(e):0;if(!t||n>=t)return e;var i=(t-n)/2;return Vi(gt(i),r)+e+Vi(mt(i),r)},Ur.padEnd=function(e,t,r){e=wo(e);var n=(t=go(t))?dr(e):0;return t&&n<t?e+Vi(t-n,r):e},Ur.padStart=function(e,t,r){e=wo(e);var n=(t=go(t))?dr(e):0;return t&&n<t?Vi(t-n,r)+e:e},Ur.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),br(wo(e).replace(ie,""),t||0)},Ur.random=function(e,t,n){if(n&&"boolean"!=typeof n&&_a(e,t,n)&&(t=n=r),n===r&&("boolean"==typeof t?(n=t,t=r):"boolean"==typeof e&&(n=e,e=r)),e===r&&t===r?(e=0,t=1):(e=yo(e),t===r?(t=e,e=0):t=yo(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var a=wr();return vr(e+a*(t-e+ut("1e-"+((a+"").length-1))),t)}return Wn(e,t)},Ur.reduce=function(e,t,r){var n=Xs(e)?Dt:Wt,i=arguments.length<3;return n(e,la(t,4),r,i,hn)},Ur.reduceRight=function(e,t,r){var n=Xs(e)?Nt:Wt,i=arguments.length<3;return n(e,la(t,4),r,i,fn)},Ur.repeat=function(e,t,n){return t=(n?_a(e,t,n):t===r)?1:go(t),Yn(wo(e),t)},Ur.replace=function(){var e=arguments,t=wo(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Ur.result=function(e,t,n){var i=-1,a=(t=_i(t,e)).length;for(a||(a=1,e=r);++i<a;){var s=null==e?r:e[Ua(t[i])];s===r&&(i=a,s=n),e=Js(s)?s.call(e):s}return e},Ur.round=Sl,Ur.runInContext=e,Ur.sample=function(e){return(Xs(e)?Kr:Zn)(e)},Ur.size=function(e){if(null==e)return 0;if(Ws(e))return uo(e)?dr(e):e.length;var t=pa(e);return t==I||t==k?e.size:Dn(e).length},Ur.snakeCase=Ko,Ur.some=function(e,t,n){var i=Xs(e)?Bt:ii;return n&&_a(e,t,n)&&(t=r),i(e,la(t,3))},Ur.sortedIndex=function(e,t){return ai(e,t)},Ur.sortedIndexBy=function(e,t,r){return si(e,t,la(r,2))},Ur.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var n=ai(e,t);if(n<r&&zs(e[n],t))return n}return-1},Ur.sortedLastIndex=function(e,t){return ai(e,t,!0)},Ur.sortedLastIndexBy=function(e,t,r){return si(e,t,la(r,2),!0)},Ur.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var r=ai(e,t,!0)-1;if(zs(e[r],t))return r}return-1},Ur.startCase=Zo,Ur.startsWith=function(e,t,r){return e=wo(e),r=null==r?0:on(go(r),0,e.length),t=ui(t),e.slice(r,r+t.length)==t},Ur.subtract=Al,Ur.sum=function(e){return e&&e.length?Yt(e,sl):0},Ur.sumBy=function(e,t){return e&&e.length?Yt(e,la(t,2)):0},Ur.template=function(e,t,n){var i=Ur.templateSettings;n&&_a(e,t,n)&&(t=r),e=wo(e),t=To({},t,i,Qi);var a,s,o=To({},t.imports,i.imports,Qi),l=Oo(o),u=Jt(o,l),c=0,d=t.interpolate||be,h="__p += '",f=ke((t.escape||be).source+"|"+d.source+"|"+(d===Q?he:be).source+"|"+(t.evaluate||be).source+"|$","g"),p="//# sourceURL="+(De.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++at+"]")+"\n";e.replace(f,(function(t,r,n,i,o,l){return n||(n=i),h+=e.slice(c,l).replace(we,ar),r&&(a=!0,h+="' +\n__e("+r+") +\n'"),o&&(s=!0,h+="';\n"+o+";\n__p += '"),n&&(h+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=l+t.length,t})),h+="';\n";var m=De.call(t,"variable")&&t.variable;if(m){if(ce.test(m))throw new Te("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(s?h.replace(H,""):h).replace(V,"$1").replace($,"$1;"),h="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var y=tl((function(){return Ee(l,p+"return "+h).apply(r,u)}));if(y.source=h,Qs(y))throw y;return y},Ur.times=function(e,t){if((e=go(e))<1||e>h)return[];var r=p,n=vr(e,p);t=la(t),e-=p;for(var i=Kt(n,t);++r<e;)t(r);return i},Ur.toFinite=yo,Ur.toInteger=go,Ur.toLength=vo,Ur.toLower=function(e){return wo(e).toLowerCase()},Ur.toNumber=_o,Ur.toSafeInteger=function(e){return e?on(go(e),-9007199254740991,h):0===e?e:0},Ur.toString=wo,Ur.toUpper=function(e){return wo(e).toUpperCase()},Ur.trim=function(e,t,n){if((e=wo(e))&&(n||t===r))return Zt(e);if(!e||!(t=ui(t)))return e;var i=hr(e),a=hr(t);return wi(i,tr(i,a),rr(i,a)+1).join("")},Ur.trimEnd=function(e,t,n){if((e=wo(e))&&(n||t===r))return e.slice(0,fr(e)+1);if(!e||!(t=ui(t)))return e;var i=hr(e);return wi(i,0,rr(i,hr(t))+1).join("")},Ur.trimStart=function(e,t,n){if((e=wo(e))&&(n||t===r))return e.replace(ie,"");if(!e||!(t=ui(t)))return e;var i=hr(e);return wi(i,tr(i,hr(t))).join("")},Ur.truncate=function(e,t){var n=30,i="...";if(ro(t)){var a="separator"in t?t.separator:a;n="length"in t?go(t.length):n,i="omission"in t?ui(t.omission):i}var s=(e=wo(e)).length;if(sr(e)){var o=hr(e);s=o.length}if(n>=s)return e;var l=n-dr(i);if(l<1)return i;var u=o?wi(o,0,l).join(""):e.slice(0,l);if(a===r)return u+i;if(o&&(l+=u.length-l),oo(a)){if(e.slice(l).search(a)){var c,d=u;for(a.global||(a=ke(a.source,wo(fe.exec(a))+"g")),a.lastIndex=0;c=a.exec(d);)var h=c.index;u=u.slice(0,h===r?l:h)}}else if(e.indexOf(ui(a),l)!=l){var f=u.lastIndexOf(a);f>-1&&(u=u.slice(0,f))}return u+i},Ur.unescape=function(e){return(e=wo(e))&&W.test(e)?e.replace(X,pr):e},Ur.uniqueId=function(e){var t=++Ne;return wo(e)+t},Ur.upperCase=Qo,Ur.upperFirst=Jo,Ur.each=bs,Ur.eachRight=ws,Ur.first=Wa,cl(Ur,(Tl={},bn(Ur,(function(e,t){De.call(Ur.prototype,t)||(Tl[t]=e)})),Tl),{chain:!1}),Ur.VERSION="4.17.21",kt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Ur[e].placeholder=Ur})),kt(["drop","take"],(function(e,t){Hr.prototype[e]=function(n){n=n===r?1:gr(go(n),0);var i=this.__filtered__&&!t?new Hr(this):this.clone();return i.__filtered__?i.__takeCount__=vr(n,i.__takeCount__):i.__views__.push({size:vr(n,p),type:e+(i.__dir__<0?"Right":"")}),i},Hr.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),kt(["filter","map","takeWhile"],(function(e,t){var r=t+1,n=1==r||3==r;Hr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:la(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}})),kt(["head","last"],(function(e,t){var r="take"+(t?"Right":"");Hr.prototype[e]=function(){return this[r](1).value()[0]}})),kt(["initial","tail"],(function(e,t){var r="drop"+(t?"":"Right");Hr.prototype[e]=function(){return this.__filtered__?new Hr(this):this[r](1)}})),Hr.prototype.compact=function(){return this.filter(sl)},Hr.prototype.find=function(e){return this.filter(e).head()},Hr.prototype.findLast=function(e){return this.reverse().find(e)},Hr.prototype.invokeMap=Kn((function(e,t){return"function"==typeof e?new Hr(this):this.map((function(r){return Pn(r,e,t)}))})),Hr.prototype.reject=function(e){return this.filter(Ns(la(e)))},Hr.prototype.slice=function(e,t){e=go(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Hr(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(n=(t=go(t))<0?n.dropRight(-t):n.take(t-e)),n)},Hr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Hr.prototype.toArray=function(){return this.take(p)},bn(Hr.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),a=Ur[i?"take"+("last"==t?"Right":""):t],s=i||/^find/.test(t);a&&(Ur.prototype[t]=function(){var t=this.__wrapped__,o=i?[1]:arguments,l=t instanceof Hr,u=o[0],c=l||Xs(t),d=function(e){var t=a.apply(Ur,Ft([e],o));return i&&h?t[0]:t};c&&n&&"function"==typeof u&&1!=u.length&&(l=c=!1);var h=this.__chain__,f=!!this.__actions__.length,p=s&&!h,m=l&&!f;if(!s&&c){t=m?t:new Hr(this);var y=e.apply(t,o);return y.__actions__.push({func:ms,args:[d],thisArg:r}),new zr(y,h)}return p&&m?e.apply(this,o):(y=this.thru(d),p?i?y.value()[0]:y.value():y)})})),kt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Re[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);Ur.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var i=this.value();return t.apply(Xs(i)?i:[],e)}return this[r]((function(r){return t.apply(Xs(r)?r:[],e)}))}})),bn(Hr.prototype,(function(e,t){var r=Ur[t];if(r){var n=r.name+"";De.call(Pr,n)||(Pr[n]=[]),Pr[n].push({name:t,func:r})}})),Pr[ji(r,2).name]=[{name:"wrapper",func:r}],Hr.prototype.clone=function(){var e=new Hr(this.__wrapped__);return e.__actions__=Ci(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ci(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ci(this.__views__),e},Hr.prototype.reverse=function(){if(this.__filtered__){var e=new Hr(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Hr.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=Xs(e),n=t<0,i=r?e.length:0,a=function(e,t,r){var n=-1,i=r.length;for(;++n<i;){var a=r[n],s=a.size;switch(a.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=vr(t,e+s);break;case"takeRight":e=gr(e,t-s)}}return{start:e,end:t}}(0,i,this.__views__),s=a.start,o=a.end,l=o-s,u=n?o:s-1,c=this.__iteratees__,d=c.length,h=0,f=vr(l,this.__takeCount__);if(!r||!n&&i==l&&f==l)return pi(e,this.__actions__);var p=[];e:for(;l--&&h<f;){for(var m=-1,y=e[u+=t];++m<d;){var g=c[m],v=g.iteratee,_=g.type,b=v(y);if(2==_)y=b;else if(!b){if(1==_)continue e;break e}}p[h++]=y}return p},Ur.prototype.at=ys,Ur.prototype.chain=function(){return ps(this)},Ur.prototype.commit=function(){return new zr(this.value(),this.__chain__)},Ur.prototype.next=function(){this.__values__===r&&(this.__values__=mo(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?r:this.__values__[this.__index__++]}},Ur.prototype.plant=function(e){for(var t,n=this;n instanceof Gr;){var i=Ga(n);i.__index__=0,i.__values__=r,t?a.__wrapped__=i:t=i;var a=i;n=n.__wrapped__}return a.__wrapped__=e,t},Ur.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Hr){var t=e;return this.__actions__.length&&(t=new Hr(this)),(t=t.reverse()).__actions__.push({func:ms,args:[rs],thisArg:r}),new zr(t,this.__chain__)}return this.thru(rs)},Ur.prototype.toJSON=Ur.prototype.valueOf=Ur.prototype.value=function(){return pi(this.__wrapped__,this.__actions__)},Ur.prototype.first=Ur.prototype.head,et&&(Ur.prototype[et]=function(){return this}),Ur}();mt?((mt.exports=mr)._=mr,pt._=mr):ft._=mr}).call(Tt)}(ac,ac.exports);var sc=ac.exports;const oc={class:"setting-type"},lc={class:"set-list"},uc={class:"label"},cc={class:"label"},dc={class:"label"},hc={class:"label"},fc={class:"label"},pc={class:"label"},mc={class:"label"},yc={class:"label"},gc={class:"label"},vc={class:"set-list"},_c={class:"label"},bc={class:"label"},wc={class:"label"},xc={class:"label"},Ic={class:"label"},Tc={class:"label"},Ec={class:"label"},Sc={class:"label"},Ac={class:"set-list"},kc={class:"label"},Cc={class:"label"},Pc=n({__name:"PlaySetting",setup(e){const t=r(),n=s([]),i=s(t.showSpectrums),a={standard:{label:"标准音质",tip:"标准音质 128kbps",value:"standard"},higher:{label:"较高音质",tip:"较高音质 328kbps",value:"higher"},exhigh:{label:"极高 HQ",tip:"近 CD 品质的细节体验，最高 320kbps",value:"exhigh"},lossless:{label:"无损 SQ",tip:"高保真无损音质，最高 48kHz/16bit",value:"lossless"},hires:{label:"高清臻音 Spatial Audio",tip:"环绕声体验，声音听感增强，96kHz/24bit",value:"hires"},jymaster:{label:"超清母带 Master",tip:"还原音频细节，192kHz/24bit",value:"jymaster"},sky:{label:"沉浸环绕声 Surround Audio",tip:"沉浸式体验，最高 5.1 声道",value:"sky"}},o=(e,r)=>{t.showSpectrums?window.$dialog.warning({title:"音频通道占用",content:"由于系统限制，切换音频输出设备会导致音乐频谱失效，将会关闭音乐频谱，并将于热重载后生效（ 请点击右上角的设置菜单中的热重载按钮 ），是否继续？",positiveText:"继续",negativeText:"取消",closeOnEsc:!1,closable:!1,maskClosable:!1,autoFocus:!1,onPositiveClick:()=>{i.value=!1,t.showSpectrums=!1,Hl.toggleOutputDevice(e),window.$message.success(`已切换输出设备为 ${r.label}`)},onNegativeClick:()=>{t.playDevice="default"}}):(Hl.toggleOutputDevice(e),window.$message.success(`已切换输出设备为 ${r.label}`))},l=e=>{if(e){if("default"!==t.playDevice)return void window.$dialog.warning({title:"音频通道占用",content:"开启音乐频谱会导致自定义音频输出设备失效，将会恢复默认输出设备，是否继续开启？",positiveText:"开启",negativeText:"取消",onPositiveClick:()=>{i.value=!0,t.showSpectrums=!0,t.playDevice="default",Hl.toggleOutputDevice("default")}});i.value=!0,t.showSpectrums=!0}else i.value=!1,t.showSpectrums=!1};return c((()=>{Y&&(async()=>{const e=await navigator.mediaDevices.enumerateDevices(),t=sc.uniqBy(e.filter((e=>"audiooutput"===e.kind&&e.deviceId)),"groupId").filter((e=>"audiooutput"===e.kind));n.value=t.map((e=>({label:e.label,value:e.deviceId})))})()})),(e,r)=>{const s=Xe,u=_e,c=wt,m=Ge,g=ue,v=_t,_=se;return d(),F("div",oc,[D("div",lc,[p(s,{prefix:"bar"},{default:f((()=>r[18]||(r[18]=[te(" 歌曲播放 ")]))),_:1}),p(m,{class:"set-item"},{default:f((()=>[D("div",uc,[p(u,{class:"name"},{default:f((()=>r[19]||(r[19]=[te("自动播放")]))),_:1}),y(Y)?(d(),h(u,{key:0,class:"tip",depth:3},{default:f((()=>r[20]||(r[20]=[te("启动时是否自动播放")]))),_:1})):(d(),h(u,{key:1,class:"tip",depth:3},{default:f((()=>r[21]||(r[21]=[te("网页端不支持该功能")]))),_:1}))]),p(c,{value:y(t).autoPlay,"onUpdate:value":r[0]||(r[0]=e=>y(t).autoPlay=e),class:"set",round:!1,disabled:!y(Y)},null,8,["value","disabled"])])),_:1}),p(m,{class:"set-item"},{default:f((()=>[D("div",cc,[p(u,{class:"name"},{default:f((()=>r[22]||(r[22]=[te("记忆上次播放位置")]))),_:1}),p(u,{class:"tip",depth:3},{default:f((()=>r[23]||(r[23]=[te("程序启动时恢复上次播放位置")]))),_:1})]),p(c,{value:y(t).memoryLastSeek,"onUpdate:value":r[1]||(r[1]=e=>y(t).memoryLastSeek=e),class:"set",round:!1},null,8,["value"])])),_:1}),p(m,{class:"set-item"},{default:f((()=>[D("div",dc,[p(u,{class:"name"},{default:f((()=>r[24]||(r[24]=[te("音乐渐入渐出")]))),_:1})]),p(c,{value:y(t).songVolumeFade,"onUpdate:value":r[2]||(r[2]=e=>y(t).songVolumeFade=e),class:"set",round:!1},null,8,["value"])])),_:1}),p(v,{show:y(t).songVolumeFade},{default:f((()=>[p(m,{class:"set-item"},{default:f((()=>[D("div",hc,[p(u,{class:"name"},{default:f((()=>r[25]||(r[25]=[te("渐入渐出时长")]))),_:1}),p(u,{class:"tip",depth:3},{default:f((()=>r[26]||(r[26]=[te("单位 ms，最小 200，最大 2000")]))),_:1})]),p(g,{value:y(t).songVolumeFadeTime,"onUpdate:value":r[3]||(r[3]=e=>y(t).songVolumeFadeTime=e),min:200,max:2e3,"show-button":!1,class:"set",placeholder:"请输入渐入渐出时长"},{suffix:f((()=>r[27]||(r[27]=[te(" ms ")]))),_:1},8,["value"])])),_:1})])),_:1},8,["show"]),p(m,{class:"set-item"},{default:f((()=>[D("div",fc,[p(u,{class:"name"},{default:f((()=>r[28]||(r[28]=[te("在线歌曲音质")]))),_:1}),p(u,{class:"tip",depth:3},{default:f((()=>[te(re(a[y(t).songLevel].tip),1)])),_:1})]),p(_,{value:y(t).songLevel,"onUpdate:value":r[4]||(r[4]=e=>y(t).songLevel=e),options:Object.values(a),"render-option":y(er),class:"set"},null,8,["value","options","render-option"])])),_:1}),y(Y)?pe("",!0):(d(),h(m,{key:0,class:"set-item"},{default:f((()=>[D("div",pc,[p(u,{class:"name"},{default:f((()=>r[29]||(r[29]=[te("播放试听")]))),_:1}),p(u,{class:"tip",depth:3},{default:f((()=>r[30]||(r[30]=[te("是否在非会员状态下播放试听歌曲")]))),_:1})]),p(c,{value:y(t).playSongDemo,"onUpdate:value":r[5]||(r[5]=e=>y(t).playSongDemo=e),class:"set",round:!1},null,8,["value"])])),_:1})),y(Y)?(d(),h(m,{key:1,class:"set-item"},{default:f((()=>[D("div",mc,[p(u,{class:"name"},{default:f((()=>r[31]||(r[31]=[te("音乐解锁")]))),_:1}),p(u,{class:"tip",depth:3},{default:f((()=>r[32]||(r[32]=[te("在无法正常播放时进行替换，可能会与原曲不符")]))),_:1})]),p(c,{value:y(t).useSongUnlock,"onUpdate:value":r[6]||(r[6]=e=>y(t).useSongUnlock=e),class:"set",round:!1},null,8,["value"])])),_:1})):pe("",!0),p(m,{class:"set-item"},{default:f((()=>[D("div",yc,[p(u,{class:"name"},{default:f((()=>r[33]||(r[33]=[te("听歌打卡")]))),_:1}),p(u,{class:"tip",depth:3},{default:f((()=>r[34]||(r[34]=[te("是否将播放歌曲同步至网易云音乐")]))),_:1})]),p(c,{value:y(t).scrobbleSong,"onUpdate:value":r[7]||(r[7]=e=>y(t).scrobbleSong=e),class:"set",round:!1},null,8,["value"])])),_:1}),y(Y)?(d(),h(m,{key:2,class:"set-item"},{default:f((()=>[D("div",gc,[p(u,{class:"name"},{default:f((()=>r[35]||(r[35]=[te("音频输出设备")]))),_:1}),p(u,{class:"tip",depth:3},{default:f((()=>r[36]||(r[36]=[te("新增或移除音频设备后请重新打开设置")]))),_:1})]),p(_,{value:y(t).playDevice,"onUpdate:value":[r[8]||(r[8]=e=>y(t).playDevice=e),o],class:"set",options:y(n),"render-option":y(er)},null,8,["value","options","render-option"])])),_:1})):pe("",!0)]),D("div",vc,[p(s,{prefix:"bar"},{default:f((()=>r[37]||(r[37]=[te(" 播放器 ")]))),_:1}),p(m,{class:"set-item"},{default:f((()=>[D("div",_c,[p(u,{class:"name"},{default:f((()=>r[38]||(r[38]=[te("播放器样式")]))),_:1}),p(u,{class:"tip",depth:3},{default:f((()=>r[39]||(r[39]=[te("播放器主体样式")]))),_:1})]),p(_,{value:y(t).playerType,"onUpdate:value":r[9]||(r[9]=e=>y(t).playerType=e),options:[{label:"封面模式",value:"cover"},{label:"唱片模式",value:"record"}],class:"set"},null,8,["value"])])),_:1}),p(m,{class:"set-item"},{default:f((()=>[D("div",bc,[p(u,{class:"name"},{default:f((()=>r[40]||(r[40]=[te("播放器背景样式")]))),_:1}),p(u,{class:"tip",depth:3},{default:f((()=>r[41]||(r[41]=[te("切换播放器背景类型")]))),_:1})]),p(_,{value:y(t).playerBackgroundType,"onUpdate:value":r[10]||(r[10]=e=>y(t).playerBackgroundType=e),options:[{label:"流体效果",disabled:!0,value:"animation"},{label:"封面模糊",value:"blur"},{label:"封面主色",disabled:!0,value:"color"},{label:"无背景",disabled:!0,value:"none"}],class:"set"},null,8,["value"])])),_:1}),p(m,{class:"set-item"},{default:f((()=>[D("div",wc,[p(u,{class:"name"},{default:f((()=>r[42]||(r[42]=[te("全屏播放器留存")]))),_:1}),p(u,{class:"tip",depth:3},{default:f((()=>r[43]||(r[43]=[te("在播放器收起时是否销毁，开启将会增大内存占用")]))),_:1})]),p(c,{value:y(t).fullPlayerCache,"onUpdate:value":r[11]||(r[11]=e=>y(t).fullPlayerCache=e),class:"set",round:!1},null,8,["value"])])),_:1}),p(m,{class:"set-item"},{default:f((()=>[D("div",xc,[p(u,{class:"name"},{default:f((()=>r[44]||(r[44]=[te("显示前奏倒计时")]))),_:1}),p(u,{class:"tip",depth:3},{default:f((()=>r[45]||(r[45]=[te("部分歌曲前奏可能存在显示错误")]))),_:1})]),p(c,{value:y(t).countDownShow,"onUpdate:value":r[12]||(r[12]=e=>y(t).countDownShow=e),class:"set",round:!1},null,8,["value"])])),_:1}),p(m,{class:"set-item"},{default:f((()=>[D("div",Ic,[p(u,{class:"name"},{default:f((()=>r[46]||(r[46]=[te("底栏歌词显示")]))),_:1}),p(u,{class:"tip",depth:3},{default:f((()=>r[47]||(r[47]=[te("在播放时将歌手信息更改为歌词")]))),_:1})]),p(c,{value:y(t).barLyricShow,"onUpdate:value":r[13]||(r[13]=e=>y(t).barLyricShow=e),class:"set",round:!1},null,8,["value"])])),_:1}),p(m,{class:"set-item"},{default:f((()=>[D("div",Tc,[p(u,{class:"name"},{default:f((()=>r[48]||(r[48]=[te("播放列表歌曲数量")]))),_:1})]),p(c,{value:y(t).showPlaylistCount,"onUpdate:value":r[14]||(r[14]=e=>y(t).showPlaylistCount=e),class:"set",round:!1},null,8,["value"])])),_:1}),p(m,{class:"set-item"},{default:f((()=>[D("div",Ec,[p(u,{class:"name"},{default:f((()=>r[49]||(r[49]=[te("动态封面")]))),_:1}),p(u,{class:"tip",depth:3},{default:f((()=>r[50]||(r[50]=[te("可展示部分歌曲的动态封面，仅在封面模式有效")]))),_:1})]),p(c,{value:y(t).dynamicCover,"onUpdate:value":r[15]||(r[15]=e=>y(t).dynamicCover=e),disabled:1!==y(K)(),round:!1,class:"set"},null,8,["value","disabled"])])),_:1}),p(m,{class:"set-item"},{default:f((()=>[D("div",Sc,[p(u,{class:"name"},{default:f((()=>r[51]||(r[51]=[te("音乐频谱")]))),_:1}),p(u,{class:"tip",depth:3},{default:f((()=>[te(re(y(Y)?"开启音乐频谱会影响性能或音频输出切换等功能，如遇问题请关闭":"开启可能会造成无法播放或其他问题，如遇任何问题请关闭"),1)])),_:1})]),p(c,{class:"set",value:y(i),round:!1,"onUpdate:value":l},null,8,["value"])])),_:1})]),D("div",Ac,[p(s,{prefix:"bar"},{default:f((()=>r[52]||(r[52]=[te(" 系统集成 ")]))),_:1}),p(m,{class:"set-item"},{default:f((()=>[D("div",kc,[p(u,{class:"name"},{default:f((()=>r[53]||(r[53]=[te("开启 SMTC")]))),_:1}),p(u,{class:"tip",depth:3},{default:f((()=>r[54]||(r[54]=[te("与系统集成以显示媒体元数据")]))),_:1})]),p(c,{value:y(t).smtcOpen,"onUpdate:value":r[16]||(r[16]=e=>y(t).smtcOpen=e),class:"set",round:!1},null,8,["value"])])),_:1}),p(m,{class:"set-item"},{default:f((()=>[D("div",Cc,[p(u,{class:"name"},{default:f((()=>r[55]||(r[55]=[te("输出高清封面")]))),_:1}),p(u,{class:"tip",depth:3},{default:f((()=>r[56]||(r[56]=[te("开启 SMTC 时是否输出高清封面")]))),_:1})]),p(c,{value:y(t).smtcOutputHighQualityCover,"onUpdate:value":r[17]||(r[17]=e=>y(t).smtcOutputHighQualityCover=e),class:"set",round:!1,disabled:!y(t).smtcOpen||!0},null,8,["value","disabled"])])),_:1})])])}}}),Rc={class:"setting-type"},Mc={class:"set-list"},Lc={class:"label"},Oc={class:"label"},Fc={class:"label"},Dc={class:"label"},Nc={class:"label"},Bc={class:"set-list"},Uc={class:"label"},jc={class:"label"},Gc={class:"label"},zc={class:"label"},Hc={key:0,class:"set-list"},Vc={class:"label"},$c={class:"label"},Xc={class:"label"},qc={class:"label"},Wc={class:"label"},Yc={class:"label"},Kc={class:"label"},Zc={class:"label"},Qc=n({__name:"GeneralSetting",setup(e){const t=Ke(),n=r(),a=i(),o=s([]),l=s(n.useOnlineService),u=[...Object.keys(Wi).map((e=>({value:e,label:Wi[e].name,style:{color:Wi[e].color}})))],m=e=>{e||window.electron.ipcRenderer.send("set-bar","none")},g=e=>{e?window.$dialog.warning({title:"开启在线服务",content:"确定开启软件的在线服务？更改将在重启后生效！",positiveText:"开启",negativeText:"取消",onPositiveClick:()=>{l.value=!0,n.useOnlineService=!0}}):window.$dialog.warning({title:"关闭在线服务",content:"确定关闭软件的在线服务？将关闭包括搜索、登录、在线音乐播放等在内的全部在线服务，软件将会变为本地播放器！更改将在软件重启后生效！",positiveText:"关闭",negativeText:"取消",onPositiveClick:()=>{l.value=!1,n.useOnlineService=!1,window.electron.ipcRenderer.send("win-reload")},onNegativeClick:()=>{l.value=!0,n.useOnlineService=!0}})},v=e=>{e&&Hl.getCoverColor(t.songCover)};return c((()=>{Y&&(async()=>{(await window.electron.ipcRenderer.invoke("get-all-fonts")).map((e=>{e=e.replace(/^['"]+|['"]+$/g,""),o.value.push({label:e,value:e,style:{fontFamily:e}})})),o.value.unshift({label:"系统默认",value:"default",style:{fontFamily:"v-sans, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'"}})})()})),(e,t)=>{const r=Xe,i=_e,s=se,c=Ge,_=Jt,b=_t,w=wt,x=ce,I=Ae;return d(),F("div",Rc,[D("div",Mc,[p(r,{prefix:"bar"},{default:f((()=>t[18]||(t[18]=[te(" 主题设置 ")]))),_:1}),p(c,{class:"set-item"},{default:f((()=>[D("div",Lc,[p(i,{class:"name"},{default:f((()=>t[19]||(t[19]=[te("主题模式")]))),_:1}),p(i,{class:"tip",depth:3},{default:f((()=>t[20]||(t[20]=[te("调整全局主题明暗模式")]))),_:1})]),p(s,{value:y(n).themeMode,"onUpdate:value":t[0]||(t[0]=e=>y(n).themeMode=e),class:"set",options:[{label:"跟随系统",value:"auto"},{label:"浅色模式",value:"light"},{label:"深色模式",value:"dark"}]},null,8,["value"])])),_:1}),p(c,{class:"set-item"},{default:f((()=>[D("div",Oc,[p(i,{class:"name"},{default:f((()=>t[21]||(t[21]=[te("全局主题色")]))),_:1}),p(i,{class:"tip",depth:3},{default:f((()=>t[22]||(t[22]=[te("更改全局主题色")]))),_:1})]),p(s,{value:y(n).themeColorType,"onUpdate:value":t[1]||(t[1]=e=>y(n).themeColorType=e),class:"set",disabled:y(n).themeFollowCover,options:u},null,8,["value","disabled"])])),_:1}),p(b,{show:"custom"===y(n).themeColorType&&!y(n).themeFollowCover},{default:f((()=>[p(c,{class:"set-item"},{default:f((()=>[D("div",Fc,[p(i,{class:"name"},{default:f((()=>t[23]||(t[23]=[te("自定义主题色")]))),_:1}),p(i,{class:"tip",depth:3},{default:f((()=>t[24]||(t[24]=[te("可在此处自定义全局主题色")]))),_:1})]),p(_,{value:y(n).themeCustomColor,"onUpdate:value":t[2]||(t[2]=e=>y(n).themeCustomColor=e),class:"set","show-alpha":!1,modes:["hex"]},null,8,["value"])])),_:1})])),_:1},8,["show"]),p(c,{class:"set-item"},{default:f((()=>[D("div",Dc,[p(i,{class:"name"},{default:f((()=>t[25]||(t[25]=[te("全局着色")]))),_:1}),p(i,{class:"tip",depth:3},{default:f((()=>t[26]||(t[26]=[te("是否将主题色应用至所有元素")]))),_:1})]),p(w,{value:y(n).themeGlobalColor,"onUpdate:value":[t[3]||(t[3]=e=>y(n).themeGlobalColor=e),v],class:"set",round:!1},null,8,["value"])])),_:1}),p(c,{class:"set-item"},{default:f((()=>[D("div",Nc,[p(i,{class:"name"},{default:f((()=>t[27]||(t[27]=[te("全局动态取色")]))),_:1}),p(i,{class:"tip",depth:3},{default:f((()=>t[28]||(t[28]=[te("主题色是否跟随封面，目前感觉不好看")]))),_:1})]),p(w,{value:y(n).themeFollowCover,"onUpdate:value":t[4]||(t[4]=e=>y(n).themeFollowCover=e),disabled:y(Qe)(y(a).songCoverTheme),class:"set",round:!1},null,8,["value","disabled"])])),_:1})]),D("div",Bc,[p(r,{prefix:"bar"},{default:f((()=>t[29]||(t[29]=[te(" 杂项设置 ")]))),_:1}),p(c,{class:"set-item"},{default:f((()=>[D("div",Uc,[p(i,{class:"name"},{default:f((()=>t[30]||(t[30]=[te("显示搜索历史")]))),_:1})]),p(w,{class:"set",value:y(n).showSearchHistory,"onUpdate:value":t[5]||(t[5]=e=>y(n).showSearchHistory=e),round:!1},null,8,["value"])])),_:1}),p(c,{class:"set-item"},{default:f((()=>[D("div",jc,[p(i,{class:"name"},{default:f((()=>t[31]||(t[31]=[te("侧边栏显示封面")]))),_:1}),p(i,{class:"tip",depth:3},{default:f((()=>t[32]||(t[32]=[te("是否显示歌单的封面，如果有")]))),_:1})]),p(w,{class:"set",value:y(n).menuShowCover,"onUpdate:value":t[6]||(t[6]=e=>y(n).menuShowCover=e),round:!1},null,8,["value"])])),_:1}),p(c,{class:"set-item"},{default:f((()=>[D("div",Gc,[p(i,{class:"name"},{default:f((()=>t[33]||(t[33]=[te("开启页面缓存")]))),_:1}),p(i,{class:"tip",depth:3},{default:f((()=>t[34]||(t[34]=[te("是否开启部分页面的缓存，这将会增加内存占用")]))),_:1})]),p(w,{class:"set",value:y(n).useKeepAlive,"onUpdate:value":t[7]||(t[7]=e=>y(n).useKeepAlive=e),round:!1},null,8,["value"])])),_:1}),p(c,{class:"set-item"},{default:f((()=>[D("div",zc,[p(i,{class:"name"},{default:f((()=>t[35]||(t[35]=[te("页面切换动画")]))),_:1}),p(i,{class:"tip",depth:3},{default:f((()=>t[36]||(t[36]=[te("选择页面切换时的动画效果")]))),_:1})]),p(s,{value:y(n).routeAnimation,"onUpdate:value":t[8]||(t[8]=e=>y(n).routeAnimation=e),options:[{label:"无动画",value:"none"},{label:"淡入淡出",value:"fade"},{label:"缩放",value:"zoom"},{label:"滑动",value:"slide"},{label:"上浮",value:"up"}],class:"set"},null,8,["value"])])),_:1})]),y(Y)?(d(),F("div",Hc,[p(r,{prefix:"bar"},{default:f((()=>t[37]||(t[37]=[te(" 系统设置 ")]))),_:1}),p(c,{class:"set-item"},{default:f((()=>[D("div",Vc,[p(i,{class:"name"},{default:f((()=>t[38]||(t[38]=[te("在线服务")]))),_:1}),p(i,{class:"tip",depth:3},{default:f((()=>t[39]||(t[39]=[te("是否开启软件的在线服务")]))),_:1})]),p(w,{class:"set",disabled:!0,value:y(l),round:!1,"onUpdate:value":g},null,8,["value"])])),_:1}),p(c,{class:"set-item"},{default:f((()=>[D("div",$c,[p(i,{class:"name"},{default:f((()=>t[40]||(t[40]=[te("自定义字体")]))),_:1}),p(i,{class:"tip",depth:3},{default:f((()=>t[41]||(t[41]=[te(" 更改软件内全局字体 ")]))),_:1})]),p(I,null,{default:f((()=>[p(me,{name:"fade",mode:"out-in"},{default:f((()=>["default"!==y(n).globalFont?(d(),h(x,{key:0,type:"primary",strong:"",secondary:"",onClick:t[9]||(t[9]=e=>y(n).globalFont="default")},{default:f((()=>t[42]||(t[42]=[te(" 恢复默认 ")]))),_:1})):pe("",!0)])),_:1}),p(s,{value:y(n).globalFont,"onUpdate:value":t[10]||(t[10]=e=>y(n).globalFont=e),options:y(o),class:"set"},null,8,["value","options"])])),_:1})])),_:1}),p(c,{class:"set-item"},{default:f((()=>[D("div",Xc,[p(i,{class:"name"},{default:f((()=>t[43]||(t[43]=[te("歌词区域字体")]))),_:1}),p(i,{class:"tip",depth:3},{default:f((()=>t[44]||(t[44]=[te(" 是否独立更改歌词区域字体 ")]))),_:1})]),p(I,null,{default:f((()=>[p(me,{name:"fade",mode:"out-in"},{default:f((()=>["follow"!==y(n).LyricFont?(d(),h(x,{key:0,type:"primary",strong:"",secondary:"",onClick:t[11]||(t[11]=e=>y(n).LyricFont="follow")},{default:f((()=>t[45]||(t[45]=[te(" 恢复默认 ")]))),_:1})):pe("",!0)])),_:1}),p(s,{value:y(n).LyricFont,"onUpdate:value":t[12]||(t[12]=e=>y(n).LyricFont=e),options:[{label:"跟随全局",value:"follow"},...y(o).filter((e=>"default"!==e.value))],class:"set"},null,8,["value","options"])])),_:1})])),_:1}),p(c,{class:"set-item"},{default:f((()=>[D("div",qc,[p(i,{class:"name"},{default:f((()=>t[46]||(t[46]=[te("关闭软件时")]))),_:1}),p(i,{class:"tip",depth:3},{default:f((()=>t[47]||(t[47]=[te("选择关闭软件的方式")]))),_:1})]),p(s,{value:y(n).closeAppMethod,"onUpdate:value":t[13]||(t[13]=e=>y(n).closeAppMethod=e),disabled:y(n).showCloseAppTip,options:[{label:"最小化到任务栏",value:"hide"},{label:"直接退出",value:"close"}],class:"set"},null,8,["value","disabled"])])),_:1}),p(c,{class:"set-item"},{default:f((()=>[D("div",Wc,[p(i,{class:"name"},{default:f((()=>t[48]||(t[48]=[te("每次关闭前都进行提醒")]))),_:1})]),p(w,{value:y(n).showCloseAppTip,"onUpdate:value":t[14]||(t[14]=e=>y(n).showCloseAppTip=e),class:"set",round:!1},null,8,["value"])])),_:1}),p(c,{class:"set-item"},{default:f((()=>[D("div",Yc,[p(i,{class:"name"},{default:f((()=>t[49]||(t[49]=[te("任务栏显示播放进度")]))),_:1}),p(i,{class:"tip",depth:3},{default:f((()=>t[50]||(t[50]=[te(" 是否在任务栏显示歌曲播放进度 ")]))),_:1})]),p(w,{value:y(n).showTaskbarProgress,"onUpdate:value":[t[15]||(t[15]=e=>y(n).showTaskbarProgress=e),m],class:"set",round:!1},null,8,["value"])])),_:1}),p(c,{class:"set-item"},{default:f((()=>[D("div",Kc,[p(i,{class:"name"},{default:f((()=>t[51]||(t[51]=[te("阻止系统息屏")]))),_:1}),p(i,{class:"tip",depth:3},{default:f((()=>t[52]||(t[52]=[te("是否在播放界面阻止系统息屏")]))),_:1})]),p(w,{value:y(n).preventSleep,"onUpdate:value":t[16]||(t[16]=e=>y(n).preventSleep=e),class:"set",round:!1},null,8,["value"])])),_:1}),p(c,{class:"set-item"},{default:f((()=>[D("div",Zc,[p(i,{class:"name"},{default:f((()=>t[53]||(t[53]=[te("自动检查更新")]))),_:1}),p(i,{class:"tip",depth:3},{default:f((()=>t[54]||(t[54]=[te("在每次开启软件时自动检查更新")]))),_:1})]),p(w,{value:y(n).checkUpdateOnStart,"onUpdate:value":t[17]||(t[17]=e=>y(n).checkUpdateOnStart=e),class:"set",round:!1},null,8,["value"])])),_:1})])):pe("",!0)])}}}),Jc={class:"setting"},ed={class:"set-left"},td={class:"title"},rd={class:"power"},nd=B(n({__name:"MainSetting",props:{type:{}},setup(e){const t=e,r=s(null),n=s(t.type),i=[{key:"general",label:"常规设置",icon:tr("SettingsLine")},{key:"play",label:"播放设置",icon:tr("Music")},{key:"lyrics",label:"歌词设置",icon:tr("Lyrics")},{key:"keyboard",label:"快捷键设置",show:Y,icon:tr("Keyboard")},{key:"local",label:"本地与下载",show:Y,icon:tr("Storage")},{key:"other",label:"其他设置",icon:tr("SettingsOther")},{key:"about",label:"关于",icon:tr("Info")}],a=()=>{window.open(ql.github)};return(e,t)=>{const s=He,o=_e,l=rr,u=le,c=Qc,m=Pc,g=ic,v=Lu,_=Su,b=fu,w=eu,x=Ye;return d(),F("div",Jc,[D("div",ed,[D("div",td,[p(s,null,{default:f((()=>t[2]||(t[2]=[te("设置")]))),_:1}),p(o,{depth:3},{default:f((()=>t[3]||(t[3]=[te("个性化与全局设置")]))),_:1})]),p(l,{value:y(n),"onUpdate:value":[t[0]||(t[0]=e=>xe(n)?n.value=e:null),t[1]||(t[1]=e=>y(r)?.scrollTo({top:0,behavior:"smooth"}))],options:i,indent:10},null,8,["value"]),D("div",rd,[p(o,{class:"author",depth:2,onClick:a},{default:f((()=>[p(u,{name:"Github",size:20}),te(" "+re(y(ql).author),1)])),_:1}),p(o,{class:"name"},{default:f((()=>t[4]||(t[4]=[te("SPlayer")]))),_:1}),p(o,{class:"version",depth:"3"},{default:f((()=>[te(re(y(ql).version),1)])),_:1})])]),p(x,{ref_key:"setScrollbar",ref:r,class:"set-content","content-style":{overflow:"hidden",padding:"40px 0"}},{default:f((()=>[p(me,{name:"fade",mode:"out-in"},{default:f((()=>["general"===y(n)?(d(),h(c,{key:0})):"play"===y(n)?(d(),h(m,{key:1})):"lyrics"===y(n)?(d(),h(g,{key:2})):"keyboard"===y(n)?(d(),h(v,{key:3})):"local"===y(n)?(d(),h(_,{key:4})):"other"===y(n)?(d(),h(b,{key:5})):"about"===y(n)?(d(),h(w,{key:6})):(d(),h(o,{key:7,class:"error"},{default:f((()=>t[5]||(t[5]=[te("暂无该设置项")]))),_:1}))])),_:1})])),_:1},512)])}}}),[["__scopeId","data-v-9aaffb9e"]]),id={class:"update-app"},ad=["innerHTML"],sd={key:1,class:"markdown-body"},od=B(n({__name:"UpdateApp",props:{data:{}},emits:["close"],setup(e,{emit:t}){const r=t,n=s(!1),i=s(0),a=async()=>{n.value=!0,window.electron.ipcRenderer.send("start-download-update"),window.electron.ipcRenderer.on("download-progress",((e,t)=>{i.value=Number((t?.percent||0).toFixed(2))})),window.electron.ipcRenderer.on("update-error",((e,t)=>{n.value=!1,console.error("Error updating:",t),window.$message.error("更新过程出现错误")})),window.electron.ipcRenderer.on("update-downloaded",(()=>{r("close"),n.value=!1,window.$message.success("更新下载完成")}))},o=()=>{r("close"),window.open(ql.github+"/releases","_blank")};return(e,t)=>{const s=Ve,l=le,u=Ae,c=Ye,h=ce;return d(),F("div",id,[p(u,{size:10,class:"version",align:"center"},{default:f((()=>[p(s,{bordered:!1,type:"primary"},{default:f((()=>[te(re(y(ql)?.version||"v0.0.0"),1)])),_:1}),p(l,{name:"Right"}),p(s,{bordered:!1,type:"warning"},{default:f((()=>[te(re(e.data?.version||"v0.0.0"),1)])),_:1})])),_:1}),p(c,{style:{"max-height":"500px"}},{default:f((()=>[e.data?.releaseNotes?(d(),F("div",{key:0,class:"markdown-body",innerHTML:e.data.releaseNotes},null,8,ad)):(d(),F("div",sd,"暂无更新日志"))])),_:1}),p(u,{class:"menu",justify:"end"},{default:f((()=>[p(h,{strong:"",secondary:"",onClick:t[0]||(t[0]=e=>r("close"))},{default:f((()=>t[1]||(t[1]=[te(" 取消 ")]))),_:1}),p(h,{type:"warning",strong:"",secondary:"",onClick:o},{default:f((()=>t[2]||(t[2]=[te(" 前往下载 ")]))),_:1}),p(h,{loading:y(n),type:"primary",onClick:a},{default:f((()=>[te(re(y(n)?`下载中 ${y(i)}%`:"立即更新"),1)])),_:1},8,["loading"])])),_:1})])}}}),[["__scopeId","data-v-6054aec8"]]),ld={class:"exclude"},ud=B(n({__name:"ExcludeKeywords",setup(e){const t=r();return(e,r)=>{const n=Ee,i=nr;return d(),F("div",ld,[p(n,{"show-icon":!1},{default:f((()=>r[1]||(r[1]=[te("请勿添加过多，以免影响歌词的正常显示")]))),_:1}),p(i,{value:y(t).excludeKeywords,"onUpdate:value":r[0]||(r[0]=e=>y(t).excludeKeywords=e)},null,8,["value"])])}}}),[["__scopeId","data-v-6b03f7d8"]]),cd=(e=!1)=>{e&&window.$message.warning("请登录后使用");const t=window.$modal.create({preset:"card",transformOrigin:"center",autoFocus:!1,maskClosable:!1,closeOnEsc:!1,closable:!1,style:{width:"400px"},content:()=>b(to,{onClose:()=>t.destroy()})})},dd=e=>{if(et(e)&&1===e.length){const t=e[0].id;return void Ds.push({name:"artist",query:{id:t}})}const t=window.$modal.create({preset:"card",transformOrigin:"center",autoFocus:!1,style:{width:"600px"},title:"跳转到歌手",content:()=>b(so,{artist:e,onClose:()=>t.destroy()})})},hd=e=>{const t=window.$modal.create({preset:"card",transformOrigin:"center",autoFocus:!1,style:{width:"600px"},title:"编辑歌曲信息",content:()=>b(fo,{song:e,onClose:()=>t.destroy()})})},fd=(e,t)=>{if(!e.length)return window.$message.warning("请正确选择歌曲");if(!K()&&!t)return cd();const r=window.$modal.create({preset:"card",transformOrigin:"center",autoFocus:!1,style:{width:"600px"},title:"添加到歌单",content:()=>b(go,{data:e,isLocal:t,onClose:()=>r.destroy()})})},pd=(e,t,r)=>{window.$modal.create({preset:"card",transformOrigin:"center",autoFocus:!1,style:{maxWidth:"70vw"},title:"批量操作",content:()=>b(_o,{data:e,isLocal:t,playListId:r})})},md=(e,t)=>{const r=window.$modal.create({preset:"card",transformOrigin:"center",autoFocus:!1,style:{width:"600px"},title:"云盘歌曲纠正",content:()=>b(Mo,{id:e,index:t,onClose:()=>r.destroy()})})},yd=()=>{const e=window.$modal.create({preset:"card",transformOrigin:"center",autoFocus:!1,style:{width:"600px"},title:"新建歌单",content:()=>b(Fo,{onClose:()=>e.destroy()})})},gd=(e,t,r)=>{const n=window.$modal.create({preset:"card",transformOrigin:"center",autoFocus:!1,style:{width:"600px"},title:"编辑歌单",content:()=>b(Bo,{id:e,data:t,onSuccess:()=>{n.destroy(),ir(r)&&r()}})})},vd=e=>{const t=ke();if(!K())return cd();if(!e)return window.$message.warning("请正确选择歌曲");if(0!==e.free&&0===t.userData.vipType&&!e?.pc)return window.$message.warning("账号会员等级不足，请提升权限");const r=window.$modal.create({preset:"card",transformOrigin:"center",autoFocus:!1,style:{width:"600px"},title:"下载歌曲",content:()=>b(Xl,{id:e.id,onClose:()=>r.destroy()})})},_d=(e="general")=>{window.$modal.create({preset:"card",transformOrigin:"center",autoFocus:!1,maskClosable:!1,closeOnEsc:!1,bordered:!0,class:"main-setting",content:()=>b(nd,{type:e})})},bd=()=>{window.$modal.create({preset:"card",transformOrigin:"center",autoFocus:!1,style:{width:"600px"},title:"歌词排除内容",content:()=>b(ud)})},wd={class:"player-control"},xd={class:"center"},Id={class:"btn"},Td={key:0,class:"btn-icon"},Ed={key:1,class:"btn-icon"},Sd={class:"btn-icon"},Ad={class:"slider"},kd=n({__name:"PlayerControl",setup(e){const t=ke(),r=Ke(),n=i(),a=()=>{const e=cr(n.progress,n.duration);n.playStatus=!0,Hl.setSeek(e),Hl.play()};return(e,i)=>{const s=le,o=Ae,l=ce,u=dr,c=_e,m=hr,g=ar("debounce");return d(),F("div",wd,[p(me,{name:"fade",mode:"out-in"},{default:f((()=>[sr(D("div",{class:"control-content",onClick:i[14]||(i[14]=Yt((()=>{}),["stop"]))},[p(o,{class:"left",align:"center"},{default:f((()=>["radio"!==y(r).playSong.type?(d(),F("div",{key:0,class:"menu-icon",onClick:i[0]||(i[0]=e=>y(or)(y(r).playSong,!y(t).isLikeSong(y(r).playSong.id)))},[p(s,{name:y(t).isLikeSong(y(r).playSong.id)?"Favorite":"FavoriteBorder"},null,8,["name"])])):pe("",!0),D("div",{class:"menu-icon",onClick:i[1]||(i[1]=Yt((e=>y(fd)([y(r).playSong],!!y(r).playSong.path)),["stop"]))},[p(s,{name:"AddList"})]),D("div",{class:"menu-icon",onClick:i[2]||(i[2]=Yt((e=>y(vd)(y(r).playSong)),["stop"]))},[p(s,{name:"Download"})])])),_:1}),D("div",xd,[D("div",Id,[y(n).personalFmMode?sr((d(),F("div",Td,[p(s,{class:"icon",size:18,name:"ThumbDown"})])),[[g,()=>y(Hl).personalFMTrash(y(r).personalFMSong?.id)]]):sr((d(),F("div",Ed,[p(s,{size:26,name:"SkipPrev"})])),[[g,()=>y(Hl).nextOrPrev("prev")]]),p(l,{loading:y(n).playLoading,focusable:!1,keyboard:!1,class:"play-pause",type:"primary",strong:"",secondary:"",circle:"",onClick:i[3]||(i[3]=Yt((e=>y(Hl).playOrPause()),["stop"]))},{icon:f((()=>[p(me,{name:"fade",mode:"out-in"},{default:f((()=>[(d(),h(s,{key:y(n).playStatus?"Pause":"Play",name:y(n).playStatus?"Pause":"Play",size:28},null,8,["name"]))])),_:1})])),_:1},8,["loading"]),sr((d(),F("div",Sd,[p(s,{size:26,name:"SkipNext"})])),[[g,()=>y(Hl).nextOrPrev("next")]])]),D("div",Ad,[D("span",null,re(y(lr)(y(n).currentTime)),1),p(u,{value:y(n).progress,"onUpdate:value":i[4]||(i[4]=e=>y(n).progress=e),step:.01,min:0,max:100,tooltip:!1,keyboard:!1,class:"player-slider",onDragstart:i[5]||(i[5]=e=>y(Hl).pause(!1)),onDragend:a},null,8,["value"]),D("span",null,re(y(lr)(y(n).duration)),1)])]),p(o,{class:"right",align:"center",justify:"end"},{default:f((()=>[y(r).playSong.path||y(n).pureLyricMode?pe("",!0):(d(),F("div",{key:0,class:"menu-icon",onClick:i[6]||(i[6]=Yt((e=>y(n).showPlayerComment=!y(n).showPlayerComment),["stop"]))},[p(s,{depth:y(n).showPlayerComment?1:3,name:"Message"},null,8,["depth"])])),D("div",{class:"menu-icon",onClick:i[7]||(i[7]=Yt((e=>y(Hl).togglePlayMode(!1)),["stop"]))},[p(s,{name:y(n).playModeIcon},null,8,["name"])]),p(m,{"show-arrow":!1,style:N({"--main-color":y(n).mainColor}),raw:""},{trigger:f((()=>[D("div",{class:"menu-icon",onClick:i[8]||(i[8]=Yt(((...e)=>y(Hl).toggleMute&&y(Hl).toggleMute(...e)),["stop"])),onWheel:i[9]||(i[9]=(...e)=>y(Hl).setVolume&&y(Hl).setVolume(...e))},[p(s,{name:y(n).playVolumeIcon},null,8,["name"])],32)])),default:f((()=>[D("div",{class:"volume-change",onWheel:i[12]||(i[12]=(...e)=>y(Hl).setVolume&&y(Hl).setVolume(...e))},[p(u,{value:y(n).playVolume,"onUpdate:value":[i[10]||(i[10]=e=>y(n).playVolume=e),i[11]||(i[11]=e=>y(Hl).setVolume(e))],tooltip:!1,min:0,max:1,step:.01,vertical:""},null,8,["value"]),p(c,{class:"slider-num"},{default:f((()=>[te(re(y(n).playVolumePercent)+"%",1)])),_:1})],32)])),_:1},8,["style"]),y(n).personalFmMode?pe("",!0):(d(),F("div",{key:1,class:"menu-icon",onClick:i[13]||(i[13]=Yt((e=>y(n).playListShow=!y(n).playListShow),["stop"]))},[p(s,{name:"PlayList"})]))])),_:1})],512),[[ur,y(n).playerMetaShow]])])),_:1})])}}}),Cd=B(kd,[["__scopeId","data-v-52d3189a"]]),Pd=B(n({__name:"CountDown",props:{start:{},duration:{},seek:{},playing:{type:Boolean}},setup(e){const t=e,r=o((()=>t.seek+.5<t.start+t.duration)),n=e=>{const r=t.duration/3,n=t.seek-t.start;if(n<=0)return 0;if(n<r*(e+1)){return.1+.7*(1-(n-r*e)/r)}return.1};return(e,t)=>(d(),h(me,{name:"fade",mode:"out-in"},{default:f((()=>[y(r)?(d(),F("div",{key:0,style:N({animationPlayState:e.playing?"running":"paused"}),class:"count-down"},[(d(),F(De,null,Ne(3,(e=>D("div",{key:e,class:"point",style:N({opacity:n(e-1)})},null,4))),64))],4)):pe("",!0)])),_:1}))}}),[["__scopeId","data-v-b971996c"]]),Rd={id:"lrc-placeholder",class:"placeholder"},Md=["id","onClick"],Ld={class:"content"},Od={class:"word"},Fd={key:0,class:"tran"},Dd={key:1,class:"roma"},Nd={key:2,class:"count-down-content"},Bd={id:"lrc-placeholder",class:"placeholder"},Ud=["id","onClick"],jd={class:"content"},Gd={key:0,class:"tran"},zd={key:1,class:"roma"},Hd=n({__name:"MainLyric",setup(e){const t=Ke(),n=i(),a=r(),u=s(!1),m=s(null),g=s(Hl.getSeek()),{pause:v,resume:_}=L((()=>{g.value=Hl.getSeek()+n.currentTimeOffset})),b=o((()=>{const e=n.currentTimeOffset;return e>0?`+${e}`:e})),w=()=>{u.value=!1,x(n.lyricIndex)},x=e=>{const t=document.getElementById(e>=0?"lrc-"+e:"lrc-placeholder");if(t&&(!u.value||n.pureLyricMode)){const e=t.parentElement;if(!e)return;const r=t.offsetTop-e.offsetTop-80;"center"===a.lyricsScrollPosition?t?.scrollIntoView({behavior:"smooth",block:"center"}):m.value?.scrollTo({top:r,behavior:"smooth"})}},I=e=>{e&&(u.value=!1,Hl.setSeek(e),Hl.play())};return l((()=>n.lyricIndex),(e=>x(e))),c((()=>{_(),z().then((()=>{x(n.lyricIndex)}))})),O((()=>{v()})),(e,r)=>{const i=Pd,s=le,o=Ae;return d(),F("div",{style:N({"--lrc-size":y(a).lyricFontSize+"px","--lrc-tran-size":y(a).lyricTranFontSize+"px","--lrc-roma-size":y(a).lyricRomaFontSize+"px","--lrc-bold":y(a).lyricFontBold?"bold":"normal","font-family":"follow"!==y(a).LyricFont?y(a).LyricFont:"",cursor:y(n).playerMetaShow?"auto":"none"}),class:he(["lyric",y(a).playerType,y(a).lyricsPosition,{pure:y(n).pureLyricMode}]),onMouseenter:r[6]||(r[6]=e=>u.value=!!y(a).lrcMousePause),onMouseleave:w},[p(me,{name:"fade",mode:"out-in"},{default:f((()=>[(d(),F("div",{key:y(t).songLyric.lrcData?.[0]?.content,class:"lyric-content",onAfterEnter:r[0]||(r[0]=e=>x(y(n).lyricIndex)),onAfterLeave:r[1]||(r[1]=e=>x(y(n).lyricIndex))},[p(y(Ye),{ref_key:"lyricScroll",ref:m,class:"lyric-scroll"},{default:f((()=>[y(a).showYrc&&y(t).isHasYrc?(d(),F(De,{key:0},[D("div",Rd,[y(a).countDownShow?(d(),h(i,{key:0,start:0,duration:y(t).songLyric.yrcData[0].time||0,seek:y(g),playing:y(n).playStatus},null,8,["duration","seek","playing"])):pe("",!0)]),(d(!0),F(De,null,Ne(y(t).songLyric.yrcData,((e,r)=>(d(),F("div",{key:r,id:`lrc-${r}`,class:he(["lrc-line","is-yrc",{on:y(n).lyricIndex===r}]),style:N({filter:y(a).lyricsBlur?`blur(${Math.min(1.8*Math.abs(y(n).lyricIndex-r),10)}px)`:"blur(0)"}),onClick:t=>I(e.time)},[D("div",Ld,[(d(!0),F(De,null,Ne(e.contents,((e,t)=>{return d(),F("div",{key:t,class:he({"content-text":!0,"content-long":e.duration>=1.5&&y(g)<=e.endTime,"end-with-space":e.endsWithSpace})},[D("span",Od,re(e.content),1),D("span",{class:"filler",style:N((i=e,s=r,a.showYrcAnimation?n.lyricIndex!==s?{transitionDuration:"0ms, 0ms, 0.35s",transitionDelay:"0ms"}:!1===n.playLoading&&i.time+i.duration-g.value>0?{transitionDuration:"0s, 0s, 0.35s",transitionDelay:"0ms",WebkitMaskPositionX:100-Math.max((g.value-i.time)/i.duration*100,0)+"%"}:{transitionDuration:`${i.duration}ms, ${.8*i.duration}ms, 0.35s`,transitionDelay:`${i.time-g.value}ms, ${i.time-g.value+.5*i.duration}ms, 0ms`}:n.lyricIndex!==s||!1===n.playLoading&&i.time>=g.value?{opacity:0}:{opacity:1}))},re(e.content),5)],2);var i,s})),128))]),e.tran&&y(a).showTran?(d(),F("span",Fd,re(e.tran),1)):pe("",!0),e.roma&&y(a).showRoma?(d(),F("span",Dd,re(e.roma),1)):pe("",!0),y(a).countDownShow&&y(t).songLyric.yrcData[r+1]?.time-e.endTime>=10?(d(),F("div",Nd,[p(i,{start:e.endTime,duration:y(t).songLyric.yrcData[r+1]?.time-e.endTime||0,seek:y(g),playing:y(n).playStatus},null,8,["start","duration","seek","playing"])])):pe("",!0)],14,Md)))),128)),r[7]||(r[7]=D("div",{class:"placeholder"},null,-1))],64)):y(t).isHasLrc?(d(),F(De,{key:1},[D("div",Bd,[y(a).countDownShow?(d(),h(i,{key:0,start:0,duration:y(t).songLyric.lrcData[0].time||0,seek:y(g),playing:y(n).playStatus},null,8,["duration","seek","playing"])):pe("",!0)]),(d(!0),F(De,null,Ne(y(t).songLyric.lrcData,((e,t)=>(d(),F("div",{key:t,id:`lrc-${t}`,class:he(["lrc-line","is-lrc",{on:y(n).lyricIndex===t}]),style:N({filter:y(a).lyricsBlur?`blur(${Math.min(1.8*Math.abs(y(n).lyricIndex-t),10)}px)`:"blur(0)"}),onClick:t=>I(e.time)},[D("span",jd,re(e.content),1),e.tran&&y(a).showTran?(d(),F("span",Gd,re(e.tran),1)):pe("",!0),e.roma&&y(a).showRoma?(d(),F("span",zd,re(e.roma),1)):pe("",!0)],14,Ud)))),128)),r[8]||(r[8]=D("div",{class:"placeholder"},null,-1))],64)):pe("",!0)])),_:1},512)],32))])),_:1}),p(o,{class:"menu",justify:"center",vertical:""},{default:f((()=>[D("div",{class:"menu-icon",onClick:r[2]||(r[2]=e=>y(n).currentTimeOffset-=.5)},[p(s,{name:"Replay5"})]),D("span",{class:"time",onClick:r[3]||(r[3]=e=>y(n).currentTimeOffset=0)},re(y(b)),1),D("div",{class:"menu-icon",onClick:r[4]||(r[4]=e=>y(n).currentTimeOffset+=.5)},[p(s,{name:"Forward5"})]),r[9]||(r[9]=D("div",{class:"divider"},null,-1)),D("div",{class:"menu-icon",onClick:r[5]||(r[5]=e=>y(_d)("lyrics"))},[p(s,{name:"Settings"})])])),_:1})],38)}}}),Vd=B(Hd,[["__scopeId","data-v-e73afdc4"]]);var $d=(e=>(e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2",e))($d||{}),Xd=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS",e))(Xd||{}),qd=(e=>(e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e))(qd||{}),Wd=(e=>(e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR",e))(Wd||{}),Yd=(e=>(e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e))(Yd||{}),Kd=(e=>(e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e))(Kd||{}),Zd=(e=>(e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e))(Zd||{}),Qd=(e=>(e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT",e))(Qd||{}),Jd=(e=>(e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT",e))(Jd||{}),eh=(e=>(e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR",e))(eh||{}),th=(e=>(e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e))(th||{}),rh=(e=>(e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL",e))(rh||{}),nh=(e=>(e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",e))(nh||{}),ih=(e=>(e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT",e))(ih||{}),ah=(e=>(e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL",e))(ah||{}),sh=(e=>(e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp",e))(sh||{}),oh=(e=>(e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR",e))(oh||{}),lh=(e=>(e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH",e))(lh||{}),uh=(e=>(e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e))(uh||{});const ch={createCanvas:(e,t)=>{const r=document.createElement("canvas");return r.width=e,r.height=t,r},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(e,t)=>fetch(e,t),parseXML:e=>(new DOMParser).parseFromString(e,"text/xml")},dh={ADAPTER:ch,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var hh=/iPhone/i,fh=/iPod/i,ph=/iPad/i,mh=/\biOS-universal(?:.+)Mac\b/i,yh=/\bAndroid(?:.+)Mobile\b/i,gh=/Android/i,vh=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,_h=/Silk/i,bh=/Windows Phone/i,wh=/\bWindows(?:.+)ARM\b/i,xh=/BlackBerry/i,Ih=/BB10/i,Th=/Opera Mini/i,Eh=/\b(CriOS|Chrome)(?:.+)Mobile/i,Sh=/Mobile(?:.+)Firefox\b/i,Ah=function(e){return void 0!==e&&"MacIntel"===e.platform&&"number"==typeof e.maxTouchPoints&&e.maxTouchPoints>1&&"undefined"==typeof MSStream};function kh(e){var t={userAgent:"",platform:"",maxTouchPoints:0};e||"undefined"==typeof navigator?"string"==typeof e?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0}):t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r=t.userAgent,n=r.split("[FBAN");void 0!==n[1]&&(r=n[0]),void 0!==(n=r.split("Twitter"))[1]&&(r=n[0]);var i=function(e){return function(t){return t.test(e)}}(r),a={apple:{phone:i(hh)&&!i(bh),ipod:i(fh),tablet:!i(hh)&&(i(ph)||Ah(t))&&!i(bh),universal:i(mh),device:(i(hh)||i(fh)||i(ph)||i(mh)||Ah(t))&&!i(bh)},amazon:{phone:i(vh),tablet:!i(vh)&&i(_h),device:i(vh)||i(_h)},android:{phone:!i(bh)&&i(vh)||!i(bh)&&i(yh),tablet:!i(bh)&&!i(vh)&&!i(yh)&&(i(_h)||i(gh)),device:!i(bh)&&(i(vh)||i(_h)||i(yh)||i(gh))||i(/\bokhttp\b/i)},windows:{phone:i(bh),tablet:i(wh),device:i(bh)||i(wh)},other:{blackberry:i(xh),blackberry10:i(Ih),opera:i(Th),firefox:i(Sh),chrome:i(Eh),device:i(xh)||i(Ih)||i(Th)||i(Sh)||i(Eh)},any:!1,phone:!1,tablet:!1};return a.any=a.apple.device||a.android.device||a.windows.device||a.other.device,a.phone=a.apple.phone||a.android.phone||a.windows.phone,a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet,a}const Ch=(kh.default??kh)(globalThis.navigator);dh.RETINA_PREFIX=/@([0-9\.]+)x/,dh.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Ph={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,n,a,s){if("function"!=typeof n)throw new TypeError("The listener must be a function");var o=new i(n,a||e,s),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),o.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,s=new Array(a);i<a;i++)s[i]=n[i].fn;return s},o.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,i,a,s){var o=r?r+e:e;if(!this._events[o])return!1;var l,u,c=this._events[o],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,i),!0;case 5:return c.fn.call(c.context,t,n,i,a),!0;case 6:return c.fn.call(c.context,t,n,i,a,s),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var h,f=c.length;for(u=0;u<f;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,n);break;case 4:c[u].fn.call(c[u].context,t,n,i);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];c[u].fn.apply(c[u].context,l)}}return!0},o.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,n,i){var a=r?r+e:e;if(!this._events[a])return this;if(!t)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||i&&!o.once||n&&o.context!==n||s(this,a);else{for(var l=0,u=[],c=o.length;l<c;l++)(o[l].fn!==t||i&&!o[l].once||n&&o[l].context!==n)&&u.push(o[l]);u.length?this._events[a]=1===u.length?u[0]:u:s(this,a)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o}(Ph);const Rh=fr(Ph.exports);var Mh={exports:{}};function Lh(e,t,r){r=r||2;var n,i,a,s,o,l,u,c=t&&t.length,d=c?t[0]*r:e.length,h=Oh(e,0,d,r,!0),f=[];if(!h||h.next===h.prev)return f;if(c&&(h=function(e,t,r,n){var i,a,s,o=[];for(i=0,a=t.length;i<a;i++)(s=Oh(e,t[i]*n,i<a-1?t[i+1]*n:e.length,n,!1))===s.next&&(s.steiner=!0),o.push($h(s));for(o.sort(Gh),i=0;i<o.length;i++)r=zh(o[i],r);return r}(e,t,h,r)),e.length>80*r){n=a=e[0],i=s=e[1];for(var p=r;p<d;p+=r)(o=e[p])<n&&(n=o),(l=e[p+1])<i&&(i=l),o>a&&(a=o),l>s&&(s=l);u=0!==(u=Math.max(a-n,s-i))?32767/u:0}return Dh(h,f,r,n,i,u,0),f}function Oh(e,t,r,n,i){var a,s;if(i===af(e,t,r,n)>0)for(a=t;a<r;a+=n)s=tf(a,e[a],e[a+1],s);else for(a=r-n;a>=t;a-=n)s=tf(a,e[a],e[a+1],s);return s&&Yh(s,s.next)&&(rf(s),s=s.next),s}function Fh(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!Yh(n,n.next)&&0!==Wh(n.prev,n,n.next))n=n.next;else{if(rf(n),(n=t=n.prev)===n.next)break;r=!0}}while(r||n!==t);return t}function Dh(e,t,r,n,i,a,s){if(e){!s&&a&&function(e,t,r,n){var i=e;do{0===i.z&&(i.z=Vh(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,r,n,i,a,s,o,l,u=1;do{for(r=e,e=null,a=null,s=0;r;){for(s++,n=r,o=0,t=0;t<u&&(o++,n=n.nextZ);t++);for(l=u;o>0||l>0&&n;)0!==o&&(0===l||!n||r.z<=n.z)?(i=r,r=r.nextZ,o--):(i=n,n=n.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;r=n}a.nextZ=null,u*=2}while(s>1)}(i)}(e,n,i,a);for(var o,l,u=e;e.prev!==e.next;)if(o=e.prev,l=e.next,a?Bh(e,n,i,a):Nh(e))t.push(o.i/r|0),t.push(e.i/r|0),t.push(l.i/r|0),rf(e),e=l.next,u=l.next;else if((e=l)===u){s?1===s?Dh(e=Uh(Fh(e),t,r),t,r,n,i,a,2):2===s&&jh(e,t,r,n,i,a):Dh(Fh(e),t,r,n,i,a,1);break}}}function Nh(e){var t=e.prev,r=e,n=e.next;if(Wh(t,r,n)>=0)return!1;for(var i=t.x,a=r.x,s=n.x,o=t.y,l=r.y,u=n.y,c=i<a?i<s?i:s:a<s?a:s,d=o<l?o<u?o:u:l<u?l:u,h=i>a?i>s?i:s:a>s?a:s,f=o>l?o>u?o:u:l>u?l:u,p=n.next;p!==t;){if(p.x>=c&&p.x<=h&&p.y>=d&&p.y<=f&&Xh(i,o,a,l,s,u,p.x,p.y)&&Wh(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Bh(e,t,r,n){var i=e.prev,a=e,s=e.next;if(Wh(i,a,s)>=0)return!1;for(var o=i.x,l=a.x,u=s.x,c=i.y,d=a.y,h=s.y,f=o<l?o<u?o:u:l<u?l:u,p=c<d?c<h?c:h:d<h?d:h,m=o>l?o>u?o:u:l>u?l:u,y=c>d?c>h?c:h:d>h?d:h,g=Vh(f,p,t,r,n),v=Vh(m,y,t,r,n),_=e.prevZ,b=e.nextZ;_&&_.z>=g&&b&&b.z<=v;){if(_.x>=f&&_.x<=m&&_.y>=p&&_.y<=y&&_!==i&&_!==s&&Xh(o,c,l,d,u,h,_.x,_.y)&&Wh(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,b.x>=f&&b.x<=m&&b.y>=p&&b.y<=y&&b!==i&&b!==s&&Xh(o,c,l,d,u,h,b.x,b.y)&&Wh(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;_&&_.z>=g;){if(_.x>=f&&_.x<=m&&_.y>=p&&_.y<=y&&_!==i&&_!==s&&Xh(o,c,l,d,u,h,_.x,_.y)&&Wh(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;b&&b.z<=v;){if(b.x>=f&&b.x<=m&&b.y>=p&&b.y<=y&&b!==i&&b!==s&&Xh(o,c,l,d,u,h,b.x,b.y)&&Wh(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function Uh(e,t,r){var n=e;do{var i=n.prev,a=n.next.next;!Yh(i,a)&&Kh(i,n,n.next,a)&&Jh(i,a)&&Jh(a,i)&&(t.push(i.i/r|0),t.push(n.i/r|0),t.push(a.i/r|0),rf(n),rf(n.next),n=e=a),n=n.next}while(n!==e);return Fh(n)}function jh(e,t,r,n,i,a){var s=e;do{for(var o=s.next.next;o!==s.prev;){if(s.i!==o.i&&qh(s,o)){var l=ef(s,o);return s=Fh(s,s.next),l=Fh(l,l.next),Dh(s,t,r,n,i,a,0),void Dh(l,t,r,n,i,a,0)}o=o.next}s=s.next}while(s!==e)}function Gh(e,t){return e.x-t.x}function zh(e,t){var r=function(e,t){var r,n=t,i=e.x,a=e.y,s=-1/0;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){var o=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(o<=i&&o>s&&(s=o,r=n.x<n.next.x?n:n.next,o===i))return r}n=n.next}while(n!==t);if(!r)return null;var l,u=r,c=r.x,d=r.y,h=1/0;n=r;do{i>=n.x&&n.x>=c&&i!==n.x&&Xh(a<d?i:s,a,c,d,a<d?s:i,a,n.x,n.y)&&(l=Math.abs(a-n.y)/(i-n.x),Jh(n,e)&&(l<h||l===h&&(n.x>r.x||n.x===r.x&&Hh(r,n)))&&(r=n,h=l)),n=n.next}while(n!==u);return r}(e,t);if(!r)return t;var n=ef(r,e);return Fh(n,n.next),Fh(r,r.next)}function Hh(e,t){return Wh(e.prev,e,t.prev)<0&&Wh(t.next,e,e.next)<0}function Vh(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function $h(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function Xh(e,t,r,n,i,a,s,o){return(i-s)*(t-o)>=(e-s)*(a-o)&&(e-s)*(n-o)>=(r-s)*(t-o)&&(r-s)*(a-o)>=(i-s)*(n-o)}function qh(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&Kh(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&(Jh(e,t)&&Jh(t,e)&&function(e,t){var r=e,n=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{r.y>a!=r.next.y>a&&r.next.y!==r.y&&i<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}(e,t)&&(Wh(e.prev,e,t.prev)||Wh(e,t.prev,t))||Yh(e,t)&&Wh(e.prev,e,e.next)>0&&Wh(t.prev,t,t.next)>0)}function Wh(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function Yh(e,t){return e.x===t.x&&e.y===t.y}function Kh(e,t,r,n){var i=Qh(Wh(e,t,r)),a=Qh(Wh(e,t,n)),s=Qh(Wh(r,n,e)),o=Qh(Wh(r,n,t));return i!==a&&s!==o||(!(0!==i||!Zh(e,r,t))||(!(0!==a||!Zh(e,n,t))||(!(0!==s||!Zh(r,e,n))||!(0!==o||!Zh(r,t,n)))))}function Zh(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function Qh(e){return e>0?1:e<0?-1:0}function Jh(e,t){return Wh(e.prev,e,e.next)<0?Wh(e,t,e.next)>=0&&Wh(e,e.prev,t)>=0:Wh(e,t,e.prev)<0||Wh(e,e.next,t)<0}function ef(e,t){var r=new nf(e.i,e.x,e.y),n=new nf(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,a.next=n,n.prev=a,n}function tf(e,t,r,n){var i=new nf(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function rf(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function nf(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function af(e,t,r,n){for(var i=0,a=t,s=r-n;a<r;a+=n)i+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return i}Mh.exports=Lh,Mh.exports.default=Lh,Lh.deviation=function(e,t,r,n){var i=t&&t.length,a=i?t[0]*r:e.length,s=Math.abs(af(e,0,a,r));if(i)for(var o=0,l=t.length;o<l;o++){var u=t[o]*r,c=o<l-1?t[o+1]*r:e.length;s-=Math.abs(af(e,u,c,r))}var d=0;for(o=0;o<n.length;o+=3){var h=n[o]*r,f=n[o+1]*r,p=n[o+2]*r;d+=Math.abs((e[h]-e[p])*(e[f+1]-e[h+1])-(e[h]-e[f])*(e[p+1]-e[h+1]))}return 0===s&&0===d?0:Math.abs((d-s)/s)},Lh.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var a=0;a<e[i].length;a++)for(var s=0;s<t;s++)r.vertices.push(e[i][a][s]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r};var sf={exports:{}};
/*! https://mths.be/punycode v1.4.1 by @mathias */!function(e,t){!function(r){var n=t&&!t.nodeType&&t,i=e&&!e.nodeType&&e,a="object"==typeof Tt&&Tt;a.global!==a&&a.window!==a&&a.self!==a||(r=a);var s,o,l=2147483647,u=36,c=/^xn--/,d=/[^\x20-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,m=String.fromCharCode;function y(e){throw new RangeError(f[e])}function g(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function v(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+g((e=e.replace(h,".")).split("."),t).join(".")}function _(e){for(var t,r,n=[],i=0,a=e.length;i<a;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<a?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}function b(e){return g(e,(function(e){var t="";return e>65535&&(t+=m((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=m(e)})).join("")}function w(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function x(e,t,r){var n=0;for(e=r?p(e/700):e>>1,e+=p(e/t);e>455;n+=u)e=p(e/35);return p(n+36*e/(e+38))}function I(e){var t,r,n,i,a,s,o,c,d,h,f,m=[],g=e.length,v=0,_=128,w=72;for((r=e.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&y("not-basic"),m.push(e.charCodeAt(n));for(i=r>0?r+1:0;i<g;){for(a=v,s=1,o=u;i>=g&&y("invalid-input"),((c=(f=e.charCodeAt(i++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:u)>=u||c>p((l-v)/s))&&y("overflow"),v+=c*s,!(c<(d=o<=w?1:o>=w+26?26:o-w));o+=u)s>p(l/(h=u-d))&&y("overflow"),s*=h;w=x(v-a,t=m.length+1,0==a),p(v/t)>l-_&&y("overflow"),_+=p(v/t),v%=t,m.splice(v++,0,_)}return b(m)}function T(e){var t,r,n,i,a,s,o,c,d,h,f,g,v,b,I,T=[];for(g=(e=_(e)).length,t=128,r=0,a=72,s=0;s<g;++s)(f=e[s])<128&&T.push(m(f));for(n=i=T.length,i&&T.push("-");n<g;){for(o=l,s=0;s<g;++s)(f=e[s])>=t&&f<o&&(o=f);for(o-t>p((l-r)/(v=n+1))&&y("overflow"),r+=(o-t)*v,t=o,s=0;s<g;++s)if((f=e[s])<t&&++r>l&&y("overflow"),f==t){for(c=r,d=u;!(c<(h=d<=a?1:d>=a+26?26:d-a));d+=u)I=c-h,b=u-h,T.push(m(w(h+I%b,0))),c=p(I/b);T.push(m(w(c,0))),a=x(r,v,n==i),r=0,++n}++r,++t}return T.join("")}if(s={version:"1.4.1",ucs2:{decode:_,encode:b},decode:I,encode:T,toASCII:function(e){return v(e,(function(e){return d.test(e)?"xn--"+T(e):e}))},toUnicode:function(e){return v(e,(function(e){return c.test(e)?I(e.slice(4).toLowerCase()):e}))}},n&&i)if(e.exports==n)i.exports=s;else for(o in s)s.hasOwnProperty(o)&&(n[o]=s[o]);else r.punycode=s}(Tt)}(sf,sf.exports);var of=sf.exports,lf=Error,uf=EvalError,cf=RangeError,df=ReferenceError,hf=SyntaxError,ff=TypeError,pf=URIError,mf=Object.getOwnPropertyDescriptor;if(mf)try{mf([],"length")}catch(NA){mf=null}var yf=mf,gf=Object.defineProperty||!1;if(gf)try{gf({},"a",{value:1})}catch(NA){gf=!1}var vf,_f,bf,wf,xf,If,Tf,Ef,Sf,Af,kf,Cf,Pf=gf;function Rf(){if(Ef)return Tf;Ef=1;var e=function(){if(If)return xf;If=1;var e=Object.prototype.toString,t=Math.max,r=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var i=0;i<t.length;i+=1)r[i+e.length]=t[i];return r};return xf=function(n){var i=this;if("function"!=typeof i||"[object Function]"!==e.apply(i))throw new TypeError("Function.prototype.bind called on incompatible "+i);for(var a,s=function(e){for(var t=[],r=1,n=0;r<e.length;r+=1,n+=1)t[n]=e[r];return t}(arguments),o=t(0,i.length-s.length),l=[],u=0;u<o;u++)l[u]="$"+u;if(a=Function("binder","return function ("+function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r}(l,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof a){var e=i.apply(this,r(s,arguments));return Object(e)===e?e:this}return i.apply(n,r(s,arguments))})),i.prototype){var c=function(){};c.prototype=i.prototype,a.prototype=new c,c.prototype=null}return a},xf}();return Tf=Function.prototype.bind||e}function Mf(){return Af?Sf:(Af=1,Sf=Function.prototype.call)}function Lf(){return Cf?kf:(Cf=1,kf=Function.prototype.apply)}var Of,Ff,Df,Nf,Bf,Uf="undefined"!=typeof Reflect&&Reflect&&Reflect.apply,jf=Rf(),Gf=Lf(),zf=Mf(),Hf=Uf||jf.call(zf,Gf),Vf=Rf(),$f=ff,Xf=Mf(),qf=Hf,Wf=function(e){if(e.length<1||"function"!=typeof e[0])throw new $f("a function is required");return qf(Vf,Xf,e)};var Yf=lf,Kf=uf,Zf=cf,Qf=df,Jf=hf,ep=ff,tp=pf,rp=Function,np=function(e){try{return rp('"use strict"; return ('+e+").constructor;")()}catch(NA){}},ip=yf,ap=Pf,sp=function(){throw new ep},op=ip?function(){try{return sp}catch(e){try{return ip(arguments,"callee").get}catch(t){return sp}}}():sp,lp=function(){if(wf)return bf;wf=1;var e="undefined"!=typeof Symbol&&Symbol,t=_f?vf:(_f=1,vf=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(var n in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var i=Object.getOwnPropertySymbols(e);if(1!==i.length||i[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var a=Object.getOwnPropertyDescriptor(e,t);if(42!==a.value||!0!==a.enumerable)return!1}return!0});return bf=function(){return"function"==typeof e&&("function"==typeof Symbol&&("symbol"==typeof e("foo")&&("symbol"==typeof Symbol("bar")&&t())))}}()(),up=function(){if(Ff)return Of;Ff=1;var e=Wf,t=yf,r=[].__proto__===Array.prototype&&t&&t(Object.prototype,"__proto__"),n=Object,i=n.getPrototypeOf;return Of=r&&"function"==typeof r.get?e([r.get]):"function"==typeof i&&function(e){return i(null==e?e:n(e))}}(),cp="function"==typeof Reflect&&Reflect.getPrototypeOf||Object.getPrototypeOf||up,dp=Lf(),hp=Mf(),fp={},pp="undefined"!=typeof Uint8Array&&cp?cp(Uint8Array):Bf,mp={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?Bf:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?Bf:ArrayBuffer,"%ArrayIteratorPrototype%":lp&&cp?cp([][Symbol.iterator]()):Bf,"%AsyncFromSyncIteratorPrototype%":Bf,"%AsyncFunction%":fp,"%AsyncGenerator%":fp,"%AsyncGeneratorFunction%":fp,"%AsyncIteratorPrototype%":fp,"%Atomics%":"undefined"==typeof Atomics?Bf:Atomics,"%BigInt%":"undefined"==typeof BigInt?Bf:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?Bf:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?Bf:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?Bf:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Yf,"%eval%":eval,"%EvalError%":Kf,"%Float32Array%":"undefined"==typeof Float32Array?Bf:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?Bf:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?Bf:FinalizationRegistry,"%Function%":rp,"%GeneratorFunction%":fp,"%Int8Array%":"undefined"==typeof Int8Array?Bf:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?Bf:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?Bf:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":lp&&cp?cp(cp([][Symbol.iterator]())):Bf,"%JSON%":"object"==typeof JSON?JSON:Bf,"%Map%":"undefined"==typeof Map?Bf:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&lp&&cp?cp((new Map)[Symbol.iterator]()):Bf,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%Object.getOwnPropertyDescriptor%":ip,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?Bf:Promise,"%Proxy%":"undefined"==typeof Proxy?Bf:Proxy,"%RangeError%":Zf,"%ReferenceError%":Qf,"%Reflect%":"undefined"==typeof Reflect?Bf:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?Bf:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&lp&&cp?cp((new Set)[Symbol.iterator]()):Bf,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?Bf:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":lp&&cp?cp(""[Symbol.iterator]()):Bf,"%Symbol%":lp?Symbol:Bf,"%SyntaxError%":Jf,"%ThrowTypeError%":op,"%TypedArray%":pp,"%TypeError%":ep,"%Uint8Array%":"undefined"==typeof Uint8Array?Bf:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?Bf:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?Bf:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?Bf:Uint32Array,"%URIError%":tp,"%WeakMap%":"undefined"==typeof WeakMap?Bf:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?Bf:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?Bf:WeakSet,"%Function.prototype.call%":hp,"%Function.prototype.apply%":dp,"%Object.defineProperty%":ap};if(cp)try{null.error}catch(NA){var yp=cp(cp(NA));mp["%Error.prototype%"]=yp}var gp=function e(t){var r;if("%AsyncFunction%"===t)r=np("async function () {}");else if("%GeneratorFunction%"===t)r=np("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=np("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&cp&&(r=cp(i.prototype))}return mp[t]=r,r},vp={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},_p=Rf(),bp=function(){if(Nf)return Df;Nf=1;var e=Function.prototype.call,t=Object.prototype.hasOwnProperty,r=Rf();return Df=r.call(e,t)}(),wp=_p.call(hp,Array.prototype.concat),xp=_p.call(dp,Array.prototype.splice),Ip=_p.call(hp,String.prototype.replace),Tp=_p.call(hp,String.prototype.slice),Ep=_p.call(hp,RegExp.prototype.exec),Sp=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Ap=/\\(\\)?/g,kp=function(e,t){var r,n=e;if(bp(vp,n)&&(n="%"+(r=vp[n])[0]+"%"),bp(mp,n)){var i=mp[n];if(i===fp&&(i=gp(n)),void 0===i&&!t)throw new ep("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:i}}throw new Jf("intrinsic "+e+" does not exist!")},Cp=function(e,t){if("string"!=typeof e||0===e.length)throw new ep("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new ep('"allowMissing" argument must be a boolean');if(null===Ep(/^%?[^%]*%?$/,e))throw new Jf("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(e){var t=Tp(e,0,1),r=Tp(e,-1);if("%"===t&&"%"!==r)throw new Jf("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new Jf("invalid intrinsic syntax, expected opening `%`");var n=[];return Ip(e,Sp,(function(e,t,r,i){n[n.length]=r?Ip(i,Ap,"$1"):t||e})),n}(e),n=r.length>0?r[0]:"",i=kp("%"+n+"%",t),a=i.name,s=i.value,o=!1,l=i.alias;l&&(n=l[0],xp(r,wp([0,1],l)));for(var u=1,c=!0;u<r.length;u+=1){var d=r[u],h=Tp(d,0,1),f=Tp(d,-1);if(('"'===h||"'"===h||"`"===h||'"'===f||"'"===f||"`"===f)&&h!==f)throw new Jf("property names with quotes must have matching quotes");if("constructor"!==d&&c||(o=!0),bp(mp,a="%"+(n+="."+d)+"%"))s=mp[a];else if(null!=s){if(!(d in s)){if(!t)throw new ep("base intrinsic for "+e+" exists, but the property is not available.");return}if(ip&&u+1>=r.length){var p=ip(s,d);s=(c=!!p)&&"get"in p&&!("originalValue"in p.get)?p.get:s[d]}else c=bp(s,d),s=s[d];c&&!o&&(mp[a]=s)}}return s},Pp={exports:{}},Rp=Pf,Mp=hf,Lp=ff,Op=yf,Fp=Pf,Dp=function(){return!!Fp};Dp.hasArrayLengthDefineBug=function(){if(!Fp)return null;try{return 1!==Fp([],"length",{value:1}).length}catch(NA){return!0}};var Np=Cp,Bp=function(e,t,r){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new Lp("`obj` must be an object or a function`");if("string"!=typeof t&&"symbol"!=typeof t)throw new Lp("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new Lp("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new Lp("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new Lp("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new Lp("`loose`, if provided, must be a boolean");var n=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,s=arguments.length>6&&arguments[6],o=!!Op&&Op(e,t);if(Rp)Rp(e,t,{configurable:null===a&&o?o.configurable:!a,enumerable:null===n&&o?o.enumerable:!n,value:r,writable:null===i&&o?o.writable:!i});else{if(!s&&(n||i||a))throw new Mp("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");e[t]=r}},Up=Dp(),jp=yf,Gp=ff,zp=Np("%Math.floor%"),Hp=function(e,t){if("function"!=typeof e)throw new Gp("`fn` is not a function");if("number"!=typeof t||t<0||t>4294967295||zp(t)!==t)throw new Gp("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],n=!0,i=!0;if("length"in e&&jp){var a=jp(e,"length");a&&!a.configurable&&(n=!1),a&&!a.writable&&(i=!1)}return(n||i||!r)&&(Up?Bp(e,"length",t,!0,!0):Bp(e,"length",t)),e},Vp=Rf(),$p=Lf(),Xp=Hf,qp=function(){return Xp(Vp,$p,arguments)};!function(e){var t=Hp,r=Pf,n=Wf,i=qp;e.exports=function(e){var r=n(arguments),i=e.length-(arguments.length-1);return t(r,1+(i>0?i:0),!0)},r?r(e.exports,"apply",{value:i}):e.exports.apply=i}(Pp);var Wp=Cp,Yp=Pp.exports,Kp=Yp(Wp("String.prototype.indexOf"));const Zp=pr(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var Qp="function"==typeof Map&&Map.prototype,Jp=Object.getOwnPropertyDescriptor&&Qp?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,em=Qp&&Jp&&"function"==typeof Jp.get?Jp.get:null,tm=Qp&&Map.prototype.forEach,rm="function"==typeof Set&&Set.prototype,nm=Object.getOwnPropertyDescriptor&&rm?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,im=rm&&nm&&"function"==typeof nm.get?nm.get:null,am=rm&&Set.prototype.forEach,sm="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,om="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,lm="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,um=Boolean.prototype.valueOf,cm=Object.prototype.toString,dm=Function.prototype.toString,hm=String.prototype.match,fm=String.prototype.slice,pm=String.prototype.replace,mm=String.prototype.toUpperCase,ym=String.prototype.toLowerCase,gm=RegExp.prototype.test,vm=Array.prototype.concat,_m=Array.prototype.join,bm=Array.prototype.slice,wm=Math.floor,xm="function"==typeof BigInt?BigInt.prototype.valueOf:null,Im=Object.getOwnPropertySymbols,Tm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,Em="function"==typeof Symbol&&"object"==typeof Symbol.iterator,Sm="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Em||"symbol")?Symbol.toStringTag:null,Am=Object.prototype.propertyIsEnumerable,km=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function Cm(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||gm.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var n=e<0?-wm(-e):wm(e);if(n!==e){var i=String(n),a=fm.call(t,i.length+1);return pm.call(i,r,"$&_")+"."+pm.call(pm.call(a,/([0-9]{3})/g,"$&_"),/_$/,"")}}return pm.call(t,r,"$&_")}var Pm=Zp,Rm=Pm.custom,Mm=Um(Rm)?Rm:null,Lm={__proto__:null,double:'"',single:"'"},Om={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};function Fm(e,t,r){var n=r.quoteStyle||t,i=Lm[n];return i+e+i}function Dm(e){return pm.call(String(e),/"/g,"&quot;")}function Nm(e){return!("[object Array]"!==zm(e)||Sm&&"object"==typeof e&&Sm in e)}function Bm(e){return!("[object RegExp]"!==zm(e)||Sm&&"object"==typeof e&&Sm in e)}function Um(e){if(Em)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!Tm)return!1;try{return Tm.call(e),!0}catch(NA){}return!1}var jm=Object.prototype.hasOwnProperty||function(e){return e in this};function Gm(e,t){return jm.call(e,t)}function zm(e){return cm.call(e)}function Hm(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function Vm(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return Vm(fm.call(e,0,t.maxStringLength),t)+n}var i=Om[t.quoteStyle||"single"];return i.lastIndex=0,Fm(pm.call(pm.call(e,i,"\\$1"),/[\x00-\x1f]/g,$m),"single",t)}function $m(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+mm.call(t.toString(16))}function Xm(e){return"Object("+e+")"}function qm(e){return e+" { ? }"}function Wm(e,t,r,n){return e+" ("+t+") {"+(n?Ym(r,n):_m.call(r,", "))+"}"}function Ym(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+_m.call(e,","+r)+"\n"+t.prev}function Km(e,t){var r=Nm(e),n=[];if(r){n.length=e.length;for(var i=0;i<e.length;i++)n[i]=Gm(e,i)?t(e[i],e):""}var a,s="function"==typeof Im?Im(e):[];if(Em){a={};for(var o=0;o<s.length;o++)a["$"+s[o]]=s[o]}for(var l in e)Gm(e,l)&&(r&&String(Number(l))===l&&l<e.length||Em&&a["$"+l]instanceof Symbol||(gm.call(/[^\w$]/,l)?n.push(t(l,e)+": "+t(e[l],e)):n.push(l+": "+t(e[l],e))));if("function"==typeof Im)for(var u=0;u<s.length;u++)Am.call(e,s[u])&&n.push("["+t(s[u])+"]: "+t(e[s[u]],e));return n}var Zm=Cp,Qm=function(e,t){var r=Wp(e,!!t);return"function"==typeof r&&Kp(e,".prototype.")>-1?Yp(r):r},Jm=function e(t,r,n,i){var a=r||{};if(Gm(a,"quoteStyle")&&!Gm(Lm,a.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Gm(a,"maxStringLength")&&("number"==typeof a.maxStringLength?a.maxStringLength<0&&a.maxStringLength!==1/0:null!==a.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=!Gm(a,"customInspect")||a.customInspect;if("boolean"!=typeof s&&"symbol"!==s)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Gm(a,"indent")&&null!==a.indent&&"\t"!==a.indent&&!(parseInt(a.indent,10)===a.indent&&a.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Gm(a,"numericSeparator")&&"boolean"!=typeof a.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var o=a.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return Vm(t,a);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var l=String(t);return o?Cm(t,l):l}if("bigint"==typeof t){var u=String(t)+"n";return o?Cm(t,u):u}var c=void 0===a.depth?5:a.depth;if(void 0===n&&(n=0),n>=c&&c>0&&"object"==typeof t)return Nm(t)?"[Array]":"[Object]";var d=function(e,t){var r;if("\t"===e.indent)r="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;r=_m.call(Array(e.indent+1)," ")}return{base:r,prev:_m.call(Array(t+1),r)}}(a,n);if(void 0===i)i=[];else if(Hm(i,t)>=0)return"[Circular]";function h(t,r,s){if(r&&(i=bm.call(i)).push(r),s){var o={depth:a.depth};return Gm(a,"quoteStyle")&&(o.quoteStyle=a.quoteStyle),e(t,o,n+1,i)}return e(t,a,n+1,i)}if("function"==typeof t&&!Bm(t)){var f=function(e){if(e.name)return e.name;var t=hm.call(dm.call(e),/^function\s*([\w$]+)/);if(t)return t[1];return null}(t),p=Km(t,h);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(p.length>0?" { "+_m.call(p,", ")+" }":"")}if(Um(t)){var m=Em?pm.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):Tm.call(t);return"object"!=typeof t||Em?m:Xm(m)}if(function(e){if(!e||"object"!=typeof e)return!1;if("undefined"!=typeof HTMLElement&&e instanceof HTMLElement)return!0;return"string"==typeof e.nodeName&&"function"==typeof e.getAttribute}(t)){for(var y="<"+ym.call(String(t.nodeName)),g=t.attributes||[],v=0;v<g.length;v++)y+=" "+g[v].name+"="+Fm(Dm(g[v].value),"double",a);return y+=">",t.childNodes&&t.childNodes.length&&(y+="..."),y+="</"+ym.call(String(t.nodeName))+">"}if(Nm(t)){if(0===t.length)return"[]";var _=Km(t,h);return d&&!function(e){for(var t=0;t<e.length;t++)if(Hm(e[t],"\n")>=0)return!1;return!0}(_)?"["+Ym(_,d)+"]":"[ "+_m.call(_,", ")+" ]"}if(function(e){return!("[object Error]"!==zm(e)||Sm&&"object"==typeof e&&Sm in e)}(t)){var b=Km(t,h);return"cause"in Error.prototype||!("cause"in t)||Am.call(t,"cause")?0===b.length?"["+String(t)+"]":"{ ["+String(t)+"] "+_m.call(b,", ")+" }":"{ ["+String(t)+"] "+_m.call(vm.call("[cause]: "+h(t.cause),b),", ")+" }"}if("object"==typeof t&&s){if(Mm&&"function"==typeof t[Mm]&&Pm)return Pm(t,{depth:c-n});if("symbol"!==s&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!em||!e||"object"!=typeof e)return!1;try{em.call(e);try{im.call(e)}catch(y){return!0}return e instanceof Map}catch(NA){}return!1}(t)){var w=[];return tm&&tm.call(t,(function(e,r){w.push(h(r,t,!0)+" => "+h(e,t))})),Wm("Map",em.call(t),w,d)}if(function(e){if(!im||!e||"object"!=typeof e)return!1;try{im.call(e);try{em.call(e)}catch(t){return!0}return e instanceof Set}catch(NA){}return!1}(t)){var x=[];return am&&am.call(t,(function(e){x.push(h(e,t))})),Wm("Set",im.call(t),x,d)}if(function(e){if(!sm||!e||"object"!=typeof e)return!1;try{sm.call(e,sm);try{om.call(e,om)}catch(y){return!0}return e instanceof WeakMap}catch(NA){}return!1}(t))return qm("WeakMap");if(function(e){if(!om||!e||"object"!=typeof e)return!1;try{om.call(e,om);try{sm.call(e,sm)}catch(y){return!0}return e instanceof WeakSet}catch(NA){}return!1}(t))return qm("WeakSet");if(function(e){if(!lm||!e||"object"!=typeof e)return!1;try{return lm.call(e),!0}catch(NA){}return!1}(t))return qm("WeakRef");if(function(e){return!("[object Number]"!==zm(e)||Sm&&"object"==typeof e&&Sm in e)}(t))return Xm(h(Number(t)));if(function(e){if(!e||"object"!=typeof e||!xm)return!1;try{return xm.call(e),!0}catch(NA){}return!1}(t))return Xm(h(xm.call(t)));if(function(e){return!("[object Boolean]"!==zm(e)||Sm&&"object"==typeof e&&Sm in e)}(t))return Xm(um.call(t));if(function(e){return!("[object String]"!==zm(e)||Sm&&"object"==typeof e&&Sm in e)}(t))return Xm(h(String(t)));if("undefined"!=typeof window&&t===window)return"{ [object Window] }";if("undefined"!=typeof globalThis&&t===globalThis||void 0!==Tt&&t===Tt)return"{ [object globalThis] }";if(!function(e){return!("[object Date]"!==zm(e)||Sm&&"object"==typeof e&&Sm in e)}(t)&&!Bm(t)){var I=Km(t,h),T=km?km(t)===Object.prototype:t instanceof Object||t.constructor===Object,E=t instanceof Object?"":"null prototype",S=!T&&Sm&&Object(t)===t&&Sm in t?fm.call(zm(t),8,-1):E?"Object":"",A=(T||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(S||E?"["+_m.call(vm.call([],S||[],E||[]),": ")+"] ":"");return 0===I.length?A+"{}":d?A+"{"+Ym(I,d)+"}":A+"{ "+_m.call(I,", ")+" }"}return String(t)},ey=ff,ty=Zm("%WeakMap%",!0),ry=Zm("%Map%",!0),ny=Qm("WeakMap.prototype.get",!0),iy=Qm("WeakMap.prototype.set",!0),ay=Qm("WeakMap.prototype.has",!0),sy=Qm("Map.prototype.get",!0),oy=Qm("Map.prototype.set",!0),ly=Qm("Map.prototype.has",!0),uy=function(e,t){for(var r,n=e;null!==(r=n.next);n=r)if(r.key===t)return n.next=r.next,r.next=e.next,e.next=r,r},cy=String.prototype.replace,dy=/%20/g,hy="RFC3986",fy={default:hy,formatters:{RFC1738:function(e){return cy.call(e,dy,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:hy},py=fy,my=Object.prototype.hasOwnProperty,yy=Array.isArray,gy=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),vy=function(e,t){for(var r=t&&t.plainObjects?{__proto__:null}:{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r},_y=1024,by={arrayToObject:vy,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var i=t[n],a=i.obj[i.prop],s=Object.keys(a),o=0;o<s.length;++o){var l=s[o],u=a[l];"object"==typeof u&&null!==u&&-1===r.indexOf(u)&&(t.push({obj:a,prop:l}),r.push(u))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(yy(r)){for(var n=[],i=0;i<r.length;++i)void 0!==r[i]&&n.push(r[i]);t.obj[t.prop]=n}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(NA){return n}},encode:function(e,t,r,n,i){if(0===e.length)return e;var a=e;if("symbol"==typeof e?a=Symbol.prototype.toString.call(e):"string"!=typeof e&&(a=String(e)),"iso-8859-1"===r)return escape(a).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var s="",o=0;o<a.length;o+=_y){for(var l=a.length>=_y?a.slice(o,o+_y):a,u=[],c=0;c<l.length;++c){var d=l.charCodeAt(c);45===d||46===d||95===d||126===d||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||i===py.RFC1738&&(40===d||41===d)?u[u.length]=l.charAt(c):d<128?u[u.length]=gy[d]:d<2048?u[u.length]=gy[192|d>>6]+gy[128|63&d]:d<55296||d>=57344?u[u.length]=gy[224|d>>12]+gy[128|d>>6&63]+gy[128|63&d]:(c+=1,d=65536+((1023&d)<<10|1023&l.charCodeAt(c)),u[u.length]=gy[240|d>>18]+gy[128|d>>12&63]+gy[128|d>>6&63]+gy[128|63&d])}s+=u.join("")}return s},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(yy(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},merge:function e(t,r,n){if(!r)return t;if("object"!=typeof r&&"function"!=typeof r){if(yy(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(n&&(n.plainObjects||n.allowPrototypes)||!my.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var i=t;return yy(t)&&!yy(r)&&(i=vy(t,n)),yy(t)&&yy(r)?(r.forEach((function(r,i){if(my.call(t,i)){var a=t[i];a&&"object"==typeof a&&r&&"object"==typeof r?t[i]=e(a,r,n):t.push(r)}else t[i]=r})),t):Object.keys(r).reduce((function(t,i){var a=r[i];return my.call(t,i)?t[i]=e(t[i],a,n):t[i]=a,t}),i)}},wy=function(){var e,t,r,n={assert:function(e){if(!n.has(e))throw new ey("Side channel does not contain "+Jm(e))},get:function(n){if(ty&&n&&("object"==typeof n||"function"==typeof n)){if(e)return ny(e,n)}else if(ry){if(t)return sy(t,n)}else if(r)return function(e,t){var r=uy(e,t);return r&&r.value}(r,n)},has:function(n){if(ty&&n&&("object"==typeof n||"function"==typeof n)){if(e)return ay(e,n)}else if(ry){if(t)return ly(t,n)}else if(r)return function(e,t){return!!uy(e,t)}(r,n);return!1},set:function(n,i){ty&&n&&("object"==typeof n||"function"==typeof n)?(e||(e=new ty),iy(e,n,i)):ry?(t||(t=new ry),oy(t,n,i)):(r||(r={key:{},next:null}),function(e,t,r){var n=uy(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}}(r,n,i))}};return n},xy=by,Iy=fy,Ty=Object.prototype.hasOwnProperty,Ey={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},Sy=Array.isArray,Ay=Array.prototype.push,ky=function(e,t){Ay.apply(e,Sy(t)?t:[t])},Cy=Date.prototype.toISOString,Py=Iy.default,Ry={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:xy.encode,encodeValuesOnly:!1,filter:void 0,format:Py,formatter:Iy.formatters[Py],indices:!1,serializeDate:function(e){return Cy.call(e)},skipNulls:!1,strictNullHandling:!1},My={},Ly=function e(t,r,n,i,a,s,o,l,u,c,d,h,f,p,m,y,g,v){for(var _,b=t,w=v,x=0,I=!1;void 0!==(w=w.get(My))&&!I;){var T=w.get(t);if(x+=1,void 0!==T){if(T===x)throw new RangeError("Cyclic object value");I=!0}void 0===w.get(My)&&(x=0)}if("function"==typeof c?b=c(r,b):b instanceof Date?b=f(b):"comma"===n&&Sy(b)&&(b=xy.maybeMap(b,(function(e){return e instanceof Date?f(e):e}))),null===b){if(s)return u&&!y?u(r,Ry.encoder,g,"key",p):r;b=""}if("string"==typeof(_=b)||"number"==typeof _||"boolean"==typeof _||"symbol"==typeof _||"bigint"==typeof _||xy.isBuffer(b))return u?[m(y?r:u(r,Ry.encoder,g,"key",p))+"="+m(u(b,Ry.encoder,g,"value",p))]:[m(r)+"="+m(String(b))];var E,S=[];if(void 0===b)return S;if("comma"===n&&Sy(b))y&&u&&(b=xy.maybeMap(b,u)),E=[{value:b.length>0?b.join(",")||null:void 0}];else if(Sy(c))E=c;else{var A=Object.keys(b);E=d?A.sort(d):A}var k=l?String(r).replace(/\./g,"%2E"):String(r),C=i&&Sy(b)&&1===b.length?k+"[]":k;if(a&&Sy(b)&&0===b.length)return C+"[]";for(var P=0;P<E.length;++P){var R=E[P],M="object"==typeof R&&R&&void 0!==R.value?R.value:b[R];if(!o||null!==M){var L=h&&l?String(R).replace(/\./g,"%2E"):String(R),O=Sy(b)?"function"==typeof n?n(C,L):C:C+(h?"."+L:"["+L+"]");v.set(t,x);var F=wy();F.set(My,v),ky(S,e(M,O,n,i,a,s,o,l,"comma"===n&&y&&Sy(b)?null:u,c,d,h,f,p,m,y,g,F))}}return S},Oy=by,Fy=Object.prototype.hasOwnProperty,Dy=Array.isArray,Ny={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:Oy.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},By=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},Uy=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},jy=function(e,t,r,n){if(e){var i=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,s=r.depth>0&&/(\[[^[\]]*])/.exec(i),o=s?i.slice(0,s.index):i,l=[];if(o){if(!r.plainObjects&&Fy.call(Object.prototype,o)&&!r.allowPrototypes)return;l.push(o)}for(var u=0;r.depth>0&&null!==(s=a.exec(i))&&u<r.depth;){if(u+=1,!r.plainObjects&&Fy.call(Object.prototype,s[1].slice(1,-1))&&!r.allowPrototypes)return;l.push(s[1])}if(s){if(!0===r.strictDepth)throw new RangeError("Input depth exceeded depth option of "+r.depth+" and strictDepth is true");l.push("["+i.slice(s.index)+"]")}return function(e,t,r,n){for(var i=n?t:Uy(t,r),a=e.length-1;a>=0;--a){var s,o=e[a];if("[]"===o&&r.parseArrays)s=r.allowEmptyArrays&&(""===i||r.strictNullHandling&&null===i)?[]:[].concat(i);else{s=r.plainObjects?{__proto__:null}:{};var l="["===o.charAt(0)&&"]"===o.charAt(o.length-1)?o.slice(1,-1):o,u=r.decodeDotInKeys?l.replace(/%2E/g,"."):l,c=parseInt(u,10);r.parseArrays||""!==u?!isNaN(c)&&o!==u&&String(c)===u&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(s=[])[c]=i:"__proto__"!==u&&(s[u]=i):s={0:i}}i=s}return i}(l,t,r,n)}},Gy=function(e,t){var r,n=e,i=function(e){if(!e)return Ry;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.encodeDotInKeys&&"boolean"!=typeof e.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||Ry.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=Iy.default;if(void 0!==e.format){if(!Ty.call(Iy.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n,i=Iy.formatters[r],a=Ry.filter;if(("function"==typeof e.filter||Sy(e.filter))&&(a=e.filter),n=e.arrayFormat in Ey?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":Ry.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var s=void 0===e.allowDots?!0===e.encodeDotInKeys||Ry.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:Ry.addQueryPrefix,allowDots:s,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:Ry.allowEmptyArrays,arrayFormat:n,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:Ry.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:void 0===e.delimiter?Ry.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:Ry.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:Ry.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:Ry.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:Ry.encodeValuesOnly,filter:a,format:r,formatter:i,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:Ry.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:Ry.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:Ry.strictNullHandling}}(t);"function"==typeof i.filter?n=(0,i.filter)("",n):Sy(i.filter)&&(r=i.filter);var a=[];if("object"!=typeof n||null===n)return"";var s=Ey[i.arrayFormat],o="comma"===s&&i.commaRoundTrip;r||(r=Object.keys(n)),i.sort&&r.sort(i.sort);for(var l=wy(),u=0;u<r.length;++u){var c=r[u],d=n[c];i.skipNulls&&null===d||ky(a,Ly(d,c,s,o,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,l))}var h=a.join(i.delimiter),f=!0===i.addQueryPrefix?"?":"";return i.charsetSentinel&&("iso-8859-1"===i.charset?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),h.length>0?f+h:""},zy=function(e,t){var r=function(e){if(!e)return Ny;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.decodeDotInKeys&&"boolean"!=typeof e.decodeDotInKeys)throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?Ny.charset:e.charset,r=void 0===e.duplicates?Ny.duplicates:e.duplicates;if("combine"!==r&&"first"!==r&&"last"!==r)throw new TypeError("The duplicates option must be either combine, first, or last");return{allowDots:void 0===e.allowDots?!0===e.decodeDotInKeys||Ny.allowDots:!!e.allowDots,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:Ny.allowEmptyArrays,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:Ny.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:Ny.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:Ny.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:Ny.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:Ny.comma,decodeDotInKeys:"boolean"==typeof e.decodeDotInKeys?e.decodeDotInKeys:Ny.decodeDotInKeys,decoder:"function"==typeof e.decoder?e.decoder:Ny.decoder,delimiter:"string"==typeof e.delimiter||Oy.isRegExp(e.delimiter)?e.delimiter:Ny.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:Ny.depth,duplicates:r,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:Ny.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:Ny.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:Ny.plainObjects,strictDepth:"boolean"==typeof e.strictDepth?!!e.strictDepth:Ny.strictDepth,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:Ny.strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?{__proto__:null}:{};for(var n="string"==typeof e?function(e,t){var r={__proto__:null},n=t.ignoreQueryPrefix?e.replace(/^\?/,""):e;n=n.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var i,a=t.parameterLimit===1/0?void 0:t.parameterLimit,s=n.split(t.delimiter,a),o=-1,l=t.charset;if(t.charsetSentinel)for(i=0;i<s.length;++i)0===s[i].indexOf("utf8=")&&("utf8=%E2%9C%93"===s[i]?l="utf-8":"utf8=%26%2310003%3B"===s[i]&&(l="iso-8859-1"),o=i,i=s.length);for(i=0;i<s.length;++i)if(i!==o){var u,c,d=s[i],h=d.indexOf("]="),f=-1===h?d.indexOf("="):h+1;-1===f?(u=t.decoder(d,Ny.decoder,l,"key"),c=t.strictNullHandling?null:""):(u=t.decoder(d.slice(0,f),Ny.decoder,l,"key"),c=Oy.maybeMap(Uy(d.slice(f+1),t),(function(e){return t.decoder(e,Ny.decoder,l,"value")}))),c&&t.interpretNumericEntities&&"iso-8859-1"===l&&(c=By(String(c))),d.indexOf("[]=")>-1&&(c=Dy(c)?[c]:c);var p=Fy.call(r,u);p&&"combine"===t.duplicates?r[u]=Oy.combine(r[u],c):p&&"last"!==t.duplicates||(r[u]=c)}return r}(e,r):e,i=r.plainObjects?{__proto__:null}:{},a=Object.keys(n),s=0;s<a.length;++s){var o=a[s],l=jy(o,n[o],r,"string"==typeof e);i=Oy.merge(i,l,r)}return!0===r.allowSparse?i:Oy.compact(i)},Hy={formats:fy,parse:zy,stringify:Gy},Vy=of;function $y(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Xy=/^([a-z0-9.+-]+:)/i,qy=/:[0-9]*$/,Wy=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,Yy=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),Ky=["'"].concat(Yy),Zy=["%","/","?",";","#"].concat(Ky),Qy=["/","?","#"],Jy=/^[+a-z0-9A-Z_-]{0,63}$/,eg=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,tg={javascript:!0,"javascript:":!0},rg={javascript:!0,"javascript:":!0},ng={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},ig=Hy;$y.prototype.parse=function(e,t,r){if("string"!=typeof e)throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),i=-1!==n&&n<e.indexOf("#")?"?":"#",a=e.split(i);a[0]=a[0].replace(/\\/g,"/");var s=e=a.join(i);if(s=s.trim(),!r&&1===e.split("#").length){var o=Wy.exec(s);if(o)return this.path=s,this.href=s,this.pathname=o[1],o[2]?(this.search=o[2],this.query=t?ig.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var l=Xy.exec(s);if(l){var u=(l=l[0]).toLowerCase();this.protocol=u,s=s.substr(l.length)}if(r||l||s.match(/^\/\/[^@/]+@[^@/]+/)){var c="//"===s.substr(0,2);!c||l&&rg[l]||(s=s.substr(2),this.slashes=!0)}if(!rg[l]&&(c||l&&!ng[l])){for(var d,h,f=-1,p=0;p<Qy.length;p++){-1!==(m=s.indexOf(Qy[p]))&&(-1===f||m<f)&&(f=m)}-1!==(h=-1===f?s.lastIndexOf("@"):s.lastIndexOf("@",f))&&(d=s.slice(0,h),s=s.slice(h+1),this.auth=decodeURIComponent(d)),f=-1;for(p=0;p<Zy.length;p++){var m;-1!==(m=s.indexOf(Zy[p]))&&(-1===f||m<f)&&(f=m)}-1===f&&(f=s.length),this.host=s.slice(0,f),s=s.slice(f),this.parseHost(),this.hostname=this.hostname||"";var y="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!y)for(var g=this.hostname.split(/\./),v=(p=0,g.length);p<v;p++){var _=g[p];if(_&&!_.match(Jy)){for(var b="",w=0,x=_.length;w<x;w++)_.charCodeAt(w)>127?b+="x":b+=_[w];if(!b.match(Jy)){var I=g.slice(0,p),T=g.slice(p+1),E=_.match(eg);E&&(I.push(E[1]),T.unshift(E[2])),T.length&&(s="/"+T.join(".")+s),this.hostname=I.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=Vy.toASCII(this.hostname));var S=this.port?":"+this.port:"",A=this.hostname||"";this.host=A+S,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!tg[u])for(p=0,v=Ky.length;p<v;p++){var k=Ky[p];if(-1!==s.indexOf(k)){var C=encodeURIComponent(k);C===k&&(C=escape(k)),s=s.split(k).join(C)}}var P=s.indexOf("#");-1!==P&&(this.hash=s.substr(P),s=s.slice(0,P));var R=s.indexOf("?");if(-1!==R?(this.search=s.substr(R),this.query=s.substr(R+1),t&&(this.query=ig.parse(this.query)),s=s.slice(0,R)):t&&(this.search="",this.query={}),s&&(this.pathname=s),ng[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){S=this.pathname||"";var M=this.search||"";this.path=S+M}return this.href=this.format(),this},$y.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,a="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&"object"==typeof this.query&&Object.keys(this.query).length&&(a=ig.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var s=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||ng[t])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),t+i+(r=r.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+n},$y.prototype.resolve=function(e){return this.resolveObject(function(e,t,r){if(e&&"object"==typeof e&&e instanceof $y)return e;var n=new $y;return n.parse(e,t,r),n}(e,!1,!0)).format()},$y.prototype.resolveObject=function(e){if("string"==typeof e){var t=new $y;t.parse(e,!1,!0),e=t}for(var r=new $y,n=Object.keys(this),i=0;i<n.length;i++){var a=n[i];r[a]=this[a]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),o=0;o<s.length;o++){var l=s[o];"protocol"!==l&&(r[l]=e[l])}return ng[r.protocol]&&r.hostname&&!r.pathname&&(r.pathname="/",r.path=r.pathname),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!ng[e.protocol]){for(var u=Object.keys(e),c=0;c<u.length;c++){var d=u[c];r[d]=e[d]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||rg[e.protocol])r.pathname=e.pathname;else{for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),r.pathname=h.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var f=r.pathname||"",p=r.search||"";r.path=f+p}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var m=r.pathname&&"/"===r.pathname.charAt(0),y=e.host||e.pathname&&"/"===e.pathname.charAt(0),g=y||m||r.host&&e.pathname,v=g,_=r.pathname&&r.pathname.split("/")||[],b=(h=e.pathname&&e.pathname.split("/")||[],r.protocol&&!ng[r.protocol]);if(b&&(r.hostname="",r.port=null,r.host&&(""===_[0]?_[0]=r.host:_.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),g=g&&(""===h[0]||""===_[0])),y)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,_=h;else if(h.length)_||(_=[]),_.pop(),_=_.concat(h),r.search=e.search,r.query=e.query;else if(null!=e.search){if(b)r.host=_.shift(),r.hostname=r.host,(E=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=E.shift(),r.hostname=E.shift(),r.host=r.hostname);return r.search=e.search,r.query=e.query,null===r.pathname&&null===r.search||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!_.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var w=_.slice(-1)[0],x=(r.host||e.host||_.length>1)&&("."===w||".."===w)||""===w,I=0,T=_.length;T>=0;T--)"."===(w=_[T])?_.splice(T,1):".."===w?(_.splice(T,1),I++):I&&(_.splice(T,1),I--);if(!g&&!v)for(;I--;I)_.unshift("..");!g||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),x&&"/"!==_.join("/").substr(-1)&&_.push("");var E,S=""===_[0]||_[0]&&"/"===_[0].charAt(0);b&&(r.hostname=S?"":_.length?_.shift():"",r.host=r.hostname,(E=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=E.shift(),r.hostname=E.shift(),r.host=r.hostname));return(g=g||r.host&&_.length)&&!S&&_.unshift(""),_.length>0?r.pathname=_.join("/"):(r.pathname=null,r.path=null),null===r.pathname&&null===r.search||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},$y.prototype.parseHost=function(){var e=this.host,t=qy.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const ag={};function sg(e,t,r=3){if(ag[t])return;let n=(new Error).stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}\nDeprecated since v${e}`):(n=n.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}\nDeprecated since v${e}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}\nDeprecated since v${e}`),console.warn(n))),ag[t]=!0}let og;var lg={grad:.9,turn:360,rad:360/(2*Math.PI)},ug=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},cg=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=Math.pow(10,t)),Math.round(r*e)/r+0},dg=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=1),e>r?r:e>t?e:t},hg=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},fg=function(e){return{r:dg(e.r,0,255),g:dg(e.g,0,255),b:dg(e.b,0,255),a:dg(e.a)}},pg=function(e){return{r:cg(e.r),g:cg(e.g),b:cg(e.b),a:cg(e.a,3)}},mg=/^#([0-9a-f]{3,8})$/i,yg=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},gg=function(e){var t=e.r,r=e.g,n=e.b,i=e.a,a=Math.max(t,r,n),s=a-Math.min(t,r,n),o=s?a===t?(r-n)/s:a===r?2+(n-t)/s:4+(t-r)/s:0;return{h:60*(o<0?o+6:o),s:a?s/a*100:0,v:a/255*100,a:i}},vg=function(e){var t=e.h,r=e.s,n=e.v,i=e.a;t=t/360*6,r/=100,n/=100;var a=Math.floor(t),s=n*(1-r),o=n*(1-(t-a)*r),l=n*(1-(1-t+a)*r),u=a%6;return{r:255*[n,o,s,s,l,n][u],g:255*[l,n,n,o,s,s][u],b:255*[s,s,l,n,n,o][u],a:i}},_g=function(e){return{h:hg(e.h),s:dg(e.s,0,100),l:dg(e.l,0,100),a:dg(e.a)}},bg=function(e){return{h:cg(e.h),s:cg(e.s),l:cg(e.l),a:cg(e.a,3)}},wg=function(e){return vg((r=(t=e).s,{h:t.h,s:(r*=((n=t.l)<50?n:100-n)/100)>0?2*r/(n+r)*100:0,v:n+r,a:t.a}));var t,r,n},xg=function(e){return{h:(t=gg(e)).h,s:(i=(200-(r=t.s))*(n=t.v)/100)>0&&i<200?r*n/100/(i<=100?i:200-i)*100:0,l:i/2,a:t.a};var t,r,n,i},Ig=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Tg=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Eg=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Sg=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ag={string:[[function(e){var t=mg.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?cg(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?cg(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=Eg.exec(e)||Sg.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:fg({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=Ig.exec(e)||Tg.exec(e);if(!t)return null;var r,n,i=_g({h:(r=t[1],n=t[2],void 0===n&&(n="deg"),Number(r)*(lg[n]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)});return wg(i)},"hsl"]],object:[[function(e){var t=e.r,r=e.g,n=e.b,i=e.a,a=void 0===i?1:i;return ug(t)&&ug(r)&&ug(n)?fg({r:Number(t),g:Number(r),b:Number(n),a:Number(a)}):null},"rgb"],[function(e){var t=e.h,r=e.s,n=e.l,i=e.a,a=void 0===i?1:i;if(!ug(t)||!ug(r)||!ug(n))return null;var s=_g({h:Number(t),s:Number(r),l:Number(n),a:Number(a)});return wg(s)},"hsl"],[function(e){var t=e.h,r=e.s,n=e.v,i=e.a,a=void 0===i?1:i;if(!ug(t)||!ug(r)||!ug(n))return null;var s,o=(s={h:Number(t),s:Number(r),v:Number(n),a:Number(a)},{h:hg(s.h),s:dg(s.s,0,100),v:dg(s.v,0,100),a:dg(s.a)});return vg(o)},"hsv"]]},kg=function(e,t){for(var r=0;r<t.length;r++){var n=t[r][0](e);if(n)return[n,t[r][1]]}return[null,void 0]},Cg=function(e,t){var r=xg(e);return{h:r.h,s:dg(r.s+100*t,0,100),l:r.l,a:r.a}},Pg=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},Rg=function(e,t){var r=xg(e);return{h:r.h,s:r.s,l:dg(r.l+100*t,0,100),a:r.a}},Mg=function(){function e(e){this.parsed=function(e){return"string"==typeof e?kg(e.trim(),Ag.string):"object"==typeof e&&null!==e?kg(e,Ag.object):[null,void 0]}(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return cg(Pg(this.rgba),2)},e.prototype.isDark=function(){return Pg(this.rgba)<.5},e.prototype.isLight=function(){return Pg(this.rgba)>=.5},e.prototype.toHex=function(){return t=(e=pg(this.rgba)).r,r=e.g,n=e.b,a=(i=e.a)<1?yg(cg(255*i)):"","#"+yg(t)+yg(r)+yg(n)+a;var e,t,r,n,i,a},e.prototype.toRgb=function(){return pg(this.rgba)},e.prototype.toRgbString=function(){return t=(e=pg(this.rgba)).r,r=e.g,n=e.b,(i=e.a)<1?"rgba("+t+", "+r+", "+n+", "+i+")":"rgb("+t+", "+r+", "+n+")";var e,t,r,n,i},e.prototype.toHsl=function(){return bg(xg(this.rgba))},e.prototype.toHslString=function(){return t=(e=bg(xg(this.rgba))).h,r=e.s,n=e.l,(i=e.a)<1?"hsla("+t+", "+r+"%, "+n+"%, "+i+")":"hsl("+t+", "+r+"%, "+n+"%)";var e,t,r,n,i},e.prototype.toHsv=function(){return e=gg(this.rgba),{h:cg(e.h),s:cg(e.s),v:cg(e.v),a:cg(e.a,3)};var e},e.prototype.invert=function(){return Lg({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},e.prototype.saturate=function(e){return void 0===e&&(e=.1),Lg(Cg(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),Lg(Cg(this.rgba,-e))},e.prototype.grayscale=function(){return Lg(Cg(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),Lg(Rg(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),Lg(Rg(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){return"number"==typeof e?Lg({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):cg(this.rgba.a,3);var t},e.prototype.hue=function(e){var t=xg(this.rgba);return"number"==typeof e?Lg({h:e,s:t.s,l:t.l,a:t.a}):cg(t.h)},e.prototype.isEqual=function(e){return this.toHex()===Lg(e).toHex()},e}(),Lg=function(e){return e instanceof Mg?e:new Mg(e)},Og=[];[function(e,t){var r={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var i in r)n[r[i]]=i;var a={};e.prototype.toName=function(t){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var i,s,o=n[this.toHex()];if(o)return o;if(null==t?void 0:t.closest){var l=this.toRgb(),u=1/0,c="black";if(!a.length)for(var d in r)a[d]=new e(r[d]).toRgb();for(var h in r){var f=(i=l,s=a[h],Math.pow(i.r-s.r,2)+Math.pow(i.g-s.g,2)+Math.pow(i.b-s.b,2));f<u&&(u=f,c=h)}return c}},t.string.push([function(t){var n=t.toLowerCase(),i="transparent"===n?"#0000":r[n];return i?new e(i).toRgb():null},"name"])}].forEach((function(e){Og.indexOf(e)<0&&(e(Mg,Ag),Og.push(e))}));const Fg=class e{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(t){if(t instanceof e)this._value=this.cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(null===t)throw new Error("Cannot set PIXI.Color#value to null");(null===this._value||!this.isSourceEqual(this._value,t))&&(this.normalize(t),this._value=this.cloneSource(t))}}get value(){return this._value}cloneSource(e){return"string"==typeof e||"number"==typeof e||e instanceof Number||null===e?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):"object"==typeof e&&null!==e?{...e}:e}isSourceEqual(e,t){const r=typeof e;if(r!==typeof t)return!1;if("number"===r||"string"===r||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length===t.length&&e.every(((e,r)=>e===t[r]));if(null!==e&&null!==t){const r=Object.keys(e),n=Object.keys(t);return r.length===n.length&&r.every((r=>e[r]===t[r]))}return e===t}toRgba(){const[e,t,r,n]=this._components;return{r:e,g:t,b:r,a:n}}toRgb(){const[e,t,r]=this._components;return{r:e,g:t,b:r}}toRgbaString(){const[e,t,r]=this.toUint8RgbArray();return`rgba(${e},${t},${r},${this.alpha})`}toUint8RgbArray(e){const[t,r,n]=this._components;return(e=e??[])[0]=Math.round(255*t),e[1]=Math.round(255*r),e[2]=Math.round(255*n),e}toRgbArray(e){e=e??[];const[t,r,n]=this._components;return e[0]=t,e[1]=r,e[2]=n,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(65280&e)+((255&e)<<16)}multiply(t){const[r,n,i,a]=e.temp.setValue(t)._components;return this._components[0]*=r,this._components[1]*=n,this._components[2]*=i,this._components[3]*=a,this.refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(1===e)return(255<<24)+this._int;if(0===e)return t?0:this._int;let r=this._int>>16&255,n=this._int>>8&255,i=255&this._int;return t&&(r=r*e+.5|0,n=n*e+.5|0,i=i*e+.5|0),(255*e<<24)+(r<<16)+(n<<8)+i}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const e=Math.round(255*this._components[3]).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[t,r,n]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(r*e)/e,this._components[2]=Math.round(n*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[t,r,n,i]=this._components;return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}normalize(t){let r,n,i,a;if(("number"==typeof t||t instanceof Number)&&t>=0&&t<=16777215){r=(t>>16&255)/255,n=(t>>8&255)/255,i=(255&t)/255,a=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[r,n,i,a=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[r,n,i,a=255]=t,r/=255,n/=255,i/=255,a/=255;else if("string"==typeof t||"object"==typeof t){if("string"==typeof t){const r=e.HEX_PATTERN.exec(t);r&&(t=`#${r[2]}`)}const s=Lg(t);s.isValid()&&(({r:r,g:n,b:i,a:a}=s.rgba),r/=255,n/=255,i/=255)}if(void 0===r)throw new Error(`Unable to convert color ${t}`);this._components[0]=r,this._components[1]=n,this._components[2]=i,this._components[3]=a,this.refreshInt()}refreshInt(){this._clamp(this._components);const[e,t,r]=this._components;this._int=(255*e<<16)+(255*t<<8)+(255*r|0)}_clamp(e,t=0,r=1){return"number"==typeof e?Math.min(Math.max(e,t),r):(e.forEach(((n,i)=>{e[i]=Math.min(Math.max(n,t),r)})),e)}};Fg.shared=new Fg,Fg.temp=new Fg,Fg.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Dg=Fg;const Ng=function(){const e=[],t=[];for(let n=0;n<32;n++)e[n]=n,t[n]=n;e[Wd.NORMAL_NPM]=Wd.NORMAL,e[Wd.ADD_NPM]=Wd.ADD,e[Wd.SCREEN_NPM]=Wd.SCREEN,t[Wd.NORMAL]=Wd.NORMAL_NPM,t[Wd.ADD]=Wd.ADD_NPM,t[Wd.SCREEN]=Wd.SCREEN_NPM;const r=[];return r.push(t),r.push(e),r}();function Bg(e){if(4===e.BYTES_PER_ELEMENT)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===e.BYTES_PER_ELEMENT){if(e instanceof Uint16Array)return"Uint16Array"}else if(1===e.BYTES_PER_ELEMENT&&e instanceof Uint8Array)return"Uint8Array";return null}function Ug(e){return e+=0===e?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1}function jg(e){return!(e&e-1||!e)}function Gg(e){let t=(e>65535?1:0)<<4,r=((e>>>=t)>255?1:0)<<3;return t|=r,r=((e>>>=r)>15?1:0)<<2,t|=r,r=((e>>>=r)>3?1:0)<<1,t|=r,t|(e>>>=r)>>1}function zg(e,t,r){const n=e.length;let i;if(t>=n||0===r)return;const a=n-(r=t+r>n?n-t:r);for(i=t;i<a;++i)e[i]=e[i+r];e.length=a}let Hg=0;function Vg(){return++Hg}const $g={},Xg=Object.create(null),qg=Object.create(null);function Wg(e,t=1){const r=dh.RETINA_PREFIX?.exec(e);return r?parseFloat(r[1]):t}var Yg=(e=>(e.Renderer="renderer",e.Application="application",e.RendererSystem="renderer-webgl-system",e.RendererPlugin="renderer-webgl-plugin",e.CanvasRendererSystem="renderer-canvas-system",e.CanvasRendererPlugin="renderer-canvas-plugin",e.Asset="asset",e.LoadParser="load-parser",e.ResolveParser="resolve-parser",e.CacheParser="cache-parser",e.DetectionParser="detection-parser",e))(Yg||{});const Kg=e=>{if("function"==typeof e||"object"==typeof e&&e.extension){if(!e.extension)throw new Error("Extension class must have an extension object");e={..."object"!=typeof e.extension?{type:e.extension}:e.extension,ref:e}}if("object"!=typeof e)throw new Error("Invalid extension type");return"string"==typeof(e={...e}).type&&(e.type=[e.type]),e},Zg=(e,t)=>Kg(e).priority??t,Qg={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...e){return e.map(Kg).forEach((e=>{e.type.forEach((t=>this._removeHandlers[t]?.(e)))})),this},add(...e){return e.map(Kg).forEach((e=>{e.type.forEach((t=>{const r=this._addHandlers,n=this._queue;r[t]?r[t]?.(e):(n[t]=n[t]||[],n[t]?.push(e))}))})),this},handle(e,t,r){const n=this._addHandlers,i=this._removeHandlers;if(n[e]||i[e])throw new Error(`Extension type ${e} already has a handler`);n[e]=t,i[e]=r;const a=this._queue;return a[e]&&(a[e]?.forEach((e=>t(e))),delete a[e]),this},handleByMap(e,t){return this.handle(e,(e=>{e.name&&(t[e.name]=e.ref)}),(e=>{e.name&&delete t[e.name]}))},handleByList(e,t,r=-1){return this.handle(e,(e=>{t.includes(e.ref)||(t.push(e.ref),t.sort(((e,t)=>Zg(t,r)-Zg(e,r))))}),(e=>{const r=t.indexOf(e.ref);-1!==r&&t.splice(r,1)}))}};class Jg{constructor(e){"number"==typeof e?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const ev=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function tv(e){let t="";for(let r=0;r<e;++r)r>0&&(t+="\nelse "),r<e-1&&(t+=`if(test == ${r}.0){}`);return t}class rv{constructor(){this.data=0,this.blendMode=Wd.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(1&this.data)}set blend(e){!!(1&this.data)!==e&&(this.data^=1)}get offsets(){return!!(2&this.data)}set offsets(e){!!(2&this.data)!==e&&(this.data^=2)}get culling(){return!!(4&this.data)}set culling(e){!!(4&this.data)!==e&&(this.data^=4)}get depthTest(){return!!(8&this.data)}set depthTest(e){!!(8&this.data)!==e&&(this.data^=8)}get depthMask(){return!!(32&this.data)}set depthMask(e){!!(32&this.data)!==e&&(this.data^=32)}get clockwiseFrontFace(){return!!(16&this.data)}set clockwiseFrontFace(e){!!(16&this.data)!==e&&(this.data^=16)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==Wd.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){const e=new rv;return e.depthTest=!1,e.blend=!0,e}}rv.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const nv=[];function iv(e,t){if(!e)return null;let r="";if("string"==typeof e){const t=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);t&&(r=t[1].toLowerCase())}for(let n=nv.length-1;n>=0;--n){const i=nv[n];if(i.test&&i.test(e,r))return new i(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class av{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,t,r,n,i,a,s,o){if(arguments.length>8)throw new Error("max arguments reached");const{name:l,items:u}=this;this._aliasCount++;for(let c=0,d=u.length;c<d;c++)u[c][l](e,t,r,n,i,a,s,o);return u===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return 0===this.items.length}get name(){return this._name}}Object.defineProperties(av.prototype,{dispatch:{value:av.prototype.emit},run:{value:av.prototype.emit}});class sv{constructor(e=0,t=0){this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new av("setRealSize"),this.onUpdate=new av("update"),this.onError=new av("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,t,r){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,t){return!1}}class ov extends sv{constructor(e,t){const{width:r,height:n}=t||{};if(!r||!n)throw new Error("BufferResource width or height invalid");super(r,n),this.data=e,this.unpackAlignment=t.unpackAlignment??4}upload(e,t,r){const n=e.gl;n.pixelStorei(n.UNPACK_ALIGNMENT,this.unpackAlignment),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===nh.UNPACK);const i=t.realWidth,a=t.realHeight;return r.width===i&&r.height===a?n.texSubImage2D(t.target,0,0,0,i,a,t.format,r.type,this.data):(r.width=i,r.height=a,n.texImage2D(t.target,0,r.internalFormat,i,a,0,t.format,r.type,this.data)),!0}dispose(){this.data=null}static test(e){return null===e||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}const lv={scaleMode:eh.NEAREST,alphaMode:nh.NPM},uv=class e extends Rh{constructor(t=null,r=null){super(),r=Object.assign({},e.defaultOptions,r);const{alphaMode:n,mipmap:i,anisotropicLevel:a,scaleMode:s,width:o,height:l,wrapMode:u,format:c,type:d,target:h,resolution:f,resourceOptions:p}=r;t&&!(t instanceof sv)&&((t=iv(t,p)).internal=!0),this.resolution=f||dh.RESOLUTION,this.width=Math.round((o||0)*this.resolution)/this.resolution,this.height=Math.round((l||0)*this.resolution)/this.resolution,this._mipmap=i,this.anisotropicLevel=a,this._wrapMode=u,this._scaleMode=s,this.format=c,this.type=d,this.target=h,this.alphaMode=n,this.uid=Vg(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=o>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let r;return void 0!==e&&e!==this.scaleMode&&(this.scaleMode=e,r=!0),void 0!==t&&t!==this.mipmap&&(this.mipmap=t,r=!0),r&&this.dirtyStyleId++,this}setSize(e,t,r){return r=r||this.resolution,this.setRealSize(e*r,t*r,r)}setRealSize(e,t,r){return this.resolution=r||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=jg(this.realWidth)&&jg(this.realHeight)}setResolution(e){const t=this.resolution;return t===e||(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT()),this}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete qg[this.cacheId],delete Xg[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,r,n=dh.STRICT_TEXTURE_CACHE){const i="string"==typeof t;let a=null;if(i)a=t;else{if(!t._pixiId){const e=r?.pixiIdPrefix||"pixiid";t._pixiId=`${e}_${Vg()}`}a=t._pixiId}let s=qg[a];if(i&&n&&!s)throw new Error(`The cacheId "${a}" does not exist in BaseTextureCache.`);return s||(s=new e(t,r),s.cacheId=a,e.addToCache(s,a)),s}static fromBuffer(t,r,n,i){t=t||new Float32Array(r*n*4);const a=new ov(t,{width:r,height:n,...i?.resourceOptions});let s,o;return t instanceof Float32Array?(s=Kd.RGBA,o=Qd.FLOAT):t instanceof Int32Array?(s=Kd.RGBA_INTEGER,o=Qd.INT):t instanceof Uint32Array?(s=Kd.RGBA_INTEGER,o=Qd.UNSIGNED_INT):t instanceof Int16Array?(s=Kd.RGBA_INTEGER,o=Qd.SHORT):t instanceof Uint16Array?(s=Kd.RGBA_INTEGER,o=Qd.UNSIGNED_SHORT):t instanceof Int8Array?(s=Kd.RGBA,o=Qd.BYTE):(s=Kd.RGBA,o=Qd.UNSIGNED_BYTE),a.internal=!0,new e(a,Object.assign({},lv,{type:o,format:s},i))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),qg[t]&&qg[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),qg[t]=e)}static removeFromCache(e){if("string"==typeof e){const t=qg[e];if(t){const r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete qg[e],t}}else if(e?.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete qg[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};uv.defaultOptions={mipmap:rh.POW2,anisotropicLevel:0,scaleMode:eh.LINEAR,wrapMode:th.CLAMP,alphaMode:nh.UNPACK,target:Zd.TEXTURE_2D,format:Kd.RGBA,type:Qd.UNSIGNED_BYTE},uv._globalBatch=0;let cv=uv;class dv{constructor(){this.texArray=null,this.blend=0,this.type=Yd.TRIANGLES,this.start=0,this.size=0,this.data=null}}let hv=0,fv=class e{constructor(e,t=!0,r=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=t,this.id=hv++,this.disposeRunner=new av("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?uh.ELEMENT_ARRAY_BUFFER:uh.ARRAY_BUFFER}get index(){return this.type===uh.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new e(t)}};class pv{constructor(e,t=0,r=!1,n=Qd.FLOAT,i,a,s,o=1){this.buffer=e,this.size=t,this.normalized=r,this.type=n,this.stride=i,this.start=a,this.instance=s,this.divisor=o}destroy(){this.buffer=null}static from(e,t,r,n,i){return new pv(e,t,r,n,i)}}const mv={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};const yv={5126:4,5123:2,5121:1};let gv=0;const vv={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array};class _v{constructor(e=[],t={}){this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=gv++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new av("disposeGeometry"),this.refCount=0}addAttribute(e,t,r=0,n=!1,i,a,s,o=!1){if(!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof fv||(t instanceof Array&&(t=new Float32Array(t)),t=new fv(t));const l=e.split("|");if(l.length>1){for(let e=0;e<l.length;e++)this.addAttribute(l[e],t,r,n,i);return this}let u=this.buffers.indexOf(t);return-1===u&&(this.buffers.push(t),u=this.buffers.length-1),this.attributes[e]=new pv(u,r,n,i,a,s,o),this.instanced=this.instanced||o,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof fv||(e instanceof Array&&(e=new Uint16Array(e)),e=new fv(e)),e.type=uh.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;const e=[],t=[],r=new fv;let n;for(n in this.attributes){const r=this.attributes[n],i=this.buffers[r.buffer];e.push(i.data),t.push(r.size*yv[r.type]/4),r.buffer=0}for(r.data=function(e,t){let r=0,n=0;const i={};for(let l=0;l<e.length;l++)n+=t[l],r+=e[l].length;const a=new ArrayBuffer(4*r);let s=null,o=0;for(let l=0;l<e.length;l++){const r=t[l],u=e[l],c=Bg(u);i[c]||(i[c]=new mv[c](a)),s=i[c];for(let e=0;e<u.length;e++)s[(e/r|0)*n+o+e%r]=u[e];o+=r}return new Float32Array(a)}(e,t),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new _v;for(let t=0;t<this.buffers.length;t++)e.buffers[t]=new fv(this.buffers[t].data.slice(0));for(const t in this.attributes){const r=this.attributes[t];e.attributes[t]=new pv(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=uh.ELEMENT_ARRAY_BUFFER),e}static merge(e){const t=new _v,r=[],n=[],i=[];let a;for(let s=0;s<e.length;s++){a=e[s];for(let e=0;e<a.buffers.length;e++)n[e]=n[e]||0,n[e]+=a.buffers[e].data.length,i[e]=0}for(let s=0;s<a.buffers.length;s++)r[s]=new(vv[Bg(a.buffers[s].data)])(n[s]),t.buffers[s]=new fv(r[s]);for(let s=0;s<e.length;s++){a=e[s];for(let e=0;e<a.buffers.length;e++)r[e].set(a.buffers[e].data,i[e]),i[e]+=a.buffers[e].data.length}if(t.attributes=a.attributes,a.indexBuffer){t.indexBuffer=t.buffers[a.buffers.indexOf(a.indexBuffer)],t.indexBuffer.type=uh.ELEMENT_ARRAY_BUFFER;let r=0,n=0,i=0,s=0;for(let e=0;e<a.buffers.length;e++)if(a.buffers[e]!==a.indexBuffer){s=e;break}for(const e in a.attributes){const t=a.attributes[e];(0|t.buffer)===s&&(n+=t.size*yv[t.type]/4)}for(let a=0;a<e.length;a++){const o=e[a].indexBuffer.data;for(let e=0;e<o.length;e++)t.indexBuffer.data[e+i]+=r;r+=e[a].buffers[s].data.length/n,i+=o.length}}return t}}class bv extends _v{constructor(e=!1){super(),this._buffer=new fv(null,e,!1),this._indexBuffer=new fv(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,Qd.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,Qd.FLOAT).addAttribute("aColor",this._buffer,4,!0,Qd.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Qd.FLOAT).addIndex(this._indexBuffer)}}const wv=2*Math.PI,xv=180/Math.PI,Iv=Math.PI/180;var Tv=(e=>(e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC",e))(Tv||{});class Ev{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new Ev(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}}Ev.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const Sv=[new Ev,new Ev,new Ev,new Ev];class Av{constructor(e=0,t=0,r=0,n=0){this.x=Number(e),this.y=Number(t),this.width=Number(r),this.height=Number(n),this.type=Tv.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Av(0,0,0,0)}clone(){return new Av(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,t){return!(this.width<=0||this.height<=0)&&(e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height)}intersects(e,t){if(!t){const t=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=t)return!1;const r=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>r}const r=this.left,n=this.right,i=this.top,a=this.bottom;if(n<=r||a<=i)return!1;const s=Sv[0].set(e.left,e.top),o=Sv[1].set(e.left,e.bottom),l=Sv[2].set(e.right,e.top),u=Sv[3].set(e.right,e.bottom);if(l.x<=s.x||o.y<=s.y)return!1;const c=Math.sign(t.a*t.d-t.b*t.c);if(0===c||(t.apply(s,s),t.apply(o,o),t.apply(l,l),t.apply(u,u),Math.max(s.x,o.x,l.x,u.x)<=r||Math.min(s.x,o.x,l.x,u.x)>=n||Math.max(s.y,o.y,l.y,u.y)<=i||Math.min(s.y,o.y,l.y,u.y)>=a))return!1;const d=c*(o.y-s.y),h=c*(s.x-o.x),f=d*r+h*i,p=d*n+h*i,m=d*r+h*a,y=d*n+h*a;if(Math.max(f,p,m,y)<=d*s.x+h*s.y||Math.min(f,p,m,y)>=d*u.x+h*u.y)return!1;const g=c*(s.y-l.y),v=c*(l.x-s.x),_=g*r+v*i,b=g*n+v*i,w=g*r+v*a,x=g*n+v*a;return!(Math.max(_,b,w,x)<=g*s.x+v*s.y||Math.min(_,b,w,x)>=g*u.x+v*u.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this}fit(e){const t=Math.max(this.x,e.x),r=Math.min(this.x+this.width,e.x+e.width),n=Math.max(this.y,e.y),i=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(r-t,0),this.y=n,this.height=Math.max(i-n,0),this}ceil(e=1,t=.001){const r=Math.ceil((this.x+this.width-t)*e)/e,n=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=r-this.x,this.height=n-this.y,this}enlarge(e){const t=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),n=Math.min(this.y,e.y),i=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=r-t,this.y=n,this.height=i-n,this}}Av.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class kv{constructor(e=1,t=0,r=0,n=1,i=0,a=0){this.array=null,this.a=e,this.b=t,this.c=r,this.d=n,this.tx=i,this.ty=a}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,r,n,i,a){return this.a=e,this.b=t,this.c=r,this.d=n,this.tx=i,this.ty=a,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const r=t||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(e,t){t=t||new Ev;const r=e.x,n=e.y;return t.x=this.a*r+this.c*n+this.tx,t.y=this.b*r+this.d*n+this.ty,t}applyInverse(e,t){t=t||new Ev;const r=1/(this.a*this.d+this.c*-this.b),n=e.x,i=e.y;return t.x=this.d*r*n+-this.c*r*i+(this.ty*this.c-this.tx*this.d)*r,t.y=this.a*r*i+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),n=this.a,i=this.c,a=this.tx;return this.a=n*t-this.b*r,this.b=n*r+this.b*t,this.c=i*t-this.d*r,this.d=i*r+this.d*t,this.tx=a*t-this.ty*r,this.ty=a*r+this.ty*t,this}append(e){const t=this.a,r=this.b,n=this.c,i=this.d;return this.a=e.a*t+e.b*n,this.b=e.a*r+e.b*i,this.c=e.c*t+e.d*n,this.d=e.c*r+e.d*i,this.tx=e.tx*t+e.ty*n+this.tx,this.ty=e.tx*r+e.ty*i+this.ty,this}setTransform(e,t,r,n,i,a,s,o,l){return this.a=Math.cos(s+l)*i,this.b=Math.sin(s+l)*i,this.c=-Math.sin(s-o)*a,this.d=Math.cos(s-o)*a,this.tx=e-(r*this.a+n*this.c),this.ty=t-(r*this.b+n*this.d),this}prepend(e){const t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){const t=this.a,r=this.c;this.a=t*e.a+this.b*e.c,this.b=t*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,r=this.b,n=this.c,i=this.d,a=e.pivot,s=-Math.atan2(-n,i),o=Math.atan2(r,t),l=Math.abs(s+o);return l<1e-5||Math.abs(wv-l)<1e-5?(e.rotation=o,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=s,e.skew.y=o),e.scale.x=Math.sqrt(t*t+r*r),e.scale.y=Math.sqrt(n*n+i*i),e.position.x=this.tx+(a.x*t+a.y*n),e.position.y=this.ty+(a.x*r+a.y*i),e}invert(){const e=this.a,t=this.b,r=this.c,n=this.d,i=this.tx,a=e*n-t*r;return this.a=n/a,this.b=-t/a,this.c=-r/a,this.d=e/a,this.tx=(r*this.ty-n*i)/a,this.ty=-(e*this.ty-t*i)/a,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new kv;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new kv}static get TEMP_MATRIX(){return new kv}}kv.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const Cv=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Pv=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Rv=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Mv=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Lv=[],Ov=[],Fv=Math.sign;!function(){for(let e=0;e<16;e++){const t=[];Lv.push(t);for(let r=0;r<16;r++){const n=Fv(Cv[e]*Cv[r]+Rv[e]*Pv[r]),i=Fv(Pv[e]*Cv[r]+Mv[e]*Pv[r]),a=Fv(Cv[e]*Rv[r]+Rv[e]*Mv[r]),s=Fv(Pv[e]*Rv[r]+Mv[e]*Mv[r]);for(let e=0;e<16;e++)if(Cv[e]===n&&Pv[e]===i&&Rv[e]===a&&Mv[e]===s){t.push(e);break}}}for(let e=0;e<16;e++){const t=new kv;t.set(Cv[e],Pv[e],Rv[e],Mv[e],0,0),Ov.push(t)}}();const Dv={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:e=>Cv[e],uY:e=>Pv[e],vX:e=>Rv[e],vY:e=>Mv[e],inv:e=>8&e?15&e:7&-e,add:(e,t)=>Lv[e][t],sub:(e,t)=>Lv[e][Dv.inv(t)],rotate180:e=>4^e,isVertical:e=>2==(3&e),byDirection:(e,t)=>2*Math.abs(e)<=Math.abs(t)?t>=0?Dv.S:Dv.N:2*Math.abs(t)<=Math.abs(e)?e>0?Dv.E:Dv.W:t>0?e>0?Dv.SE:Dv.SW:e>0?Dv.NE:Dv.NW,matrixAppendRotationInv:(e,t,r=0,n=0)=>{const i=Ov[Dv.inv(t)];i.tx=r,i.ty=n,e.append(i)}};class Nv{constructor(e,t,r=0,n=0){this._x=r,this._y=n,this.cb=e,this.scope=t}clone(e=this.cb,t=this.scope){return new Nv(e,t,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}Nv.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const Bv=class{constructor(){this.worldTransform=new kv,this.localTransform=new kv,this.position=new Nv(this.onChange,this,0,0),this.scale=new Nv(this.onChange,this,1,1),this.pivot=new Nv(this.onChange,this,0,0),this.skew=new Nv(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(e){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){const r=e.worldTransform,n=this.worldTransform;n.a=t.a*r.a+t.b*r.c,n.b=t.a*r.b+t.b*r.d,n.c=t.c*r.a+t.d*r.c,n.d=t.c*r.b+t.d*r.d,n.tx=t.tx*r.a+t.ty*r.c+r.tx,n.ty=t.tx*r.b+t.ty*r.d+r.ty,this._parentID=e._worldID,this._worldID++}}setFromMatrix(e){e.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())}};Bv.IDENTITY=new Bv;let Uv=Bv;Uv.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};function jv(e,t,r){const n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),n}function Gv(e){const t=new Array(e);for(let r=0;r<t.length;r++)t[r]=!1;return t}function zv(e,t){switch(e){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return Gv(2*t);case"bvec3":return Gv(3*t);case"bvec4":return Gv(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Hv=[{test:e=>"float"===e.type&&1===e.size&&!e.isArray,code:e=>`\n            if(uv["${e}"] !== ud["${e}"].value)\n            {\n                ud["${e}"].value = uv["${e}"]\n                gl.uniform1f(ud["${e}"].location, uv["${e}"])\n            }\n            `},{test:(e,t)=>!("sampler2D"!==e.type&&"samplerCube"!==e.type&&"sampler2DArray"!==e.type||1!==e.size||e.isArray||null!=t&&void 0===t.castToBaseTexture),code:e=>`t = syncData.textureCount++;\n\n            renderer.texture.bind(uv["${e}"], t);\n\n            if(ud["${e}"].value !== t)\n            {\n                ud["${e}"].value = t;\n                gl.uniform1i(ud["${e}"].location, t);\n; // eslint-disable-line max-len\n            }`},{test:(e,t)=>"mat3"===e.type&&1===e.size&&!e.isArray&&void 0!==t.a,code:e=>`\n            gl.uniformMatrix3fv(ud["${e}"].location, false, uv["${e}"].toArray(true));\n            `,codeUbo:e=>`\n                var ${e}_matrix = uv.${e}.toArray(true);\n\n                data[offset] = ${e}_matrix[0];\n                data[offset+1] = ${e}_matrix[1];\n                data[offset+2] = ${e}_matrix[2];\n        \n                data[offset + 4] = ${e}_matrix[3];\n                data[offset + 5] = ${e}_matrix[4];\n                data[offset + 6] = ${e}_matrix[5];\n        \n                data[offset + 8] = ${e}_matrix[6];\n                data[offset + 9] = ${e}_matrix[7];\n                data[offset + 10] = ${e}_matrix[8];\n            `},{test:(e,t)=>"vec2"===e.type&&1===e.size&&!e.isArray&&void 0!==t.x,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["${e}"].location, v.x, v.y);\n                }`,codeUbo:e=>`\n                v = uv.${e};\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            `},{test:e=>"vec2"===e.type&&1===e.size&&!e.isArray,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["${e}"].location, v[0], v[1]);\n                }\n            `},{test:(e,t)=>"vec4"===e.type&&1===e.size&&!e.isArray&&void 0!==t.width,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["${e}"].location, v.x, v.y, v.width, v.height)\n                }`,codeUbo:e=>`\n                    v = uv.${e};\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                `},{test:(e,t)=>"vec4"===e.type&&1===e.size&&!e.isArray&&void 0!==t.red,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)\n                {\n                    cv[0] = v.red;\n                    cv[1] = v.green;\n                    cv[2] = v.blue;\n                    cv[3] = v.alpha;\n                    gl.uniform4f(ud["${e}"].location, v.red, v.green, v.blue, v.alpha)\n                }`,codeUbo:e=>`\n                    v = uv.${e};\n\n                    data[offset] = v.red;\n                    data[offset+1] = v.green;\n                    data[offset+2] = v.blue;\n                    data[offset+3] = v.alpha;\n                `},{test:(e,t)=>"vec3"===e.type&&1===e.size&&!e.isArray&&void 0!==t.red,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)\n                {\n                    cv[0] = v.red;\n                    cv[1] = v.green;\n                    cv[2] = v.blue;\n    \n                    gl.uniform3f(ud["${e}"].location, v.red, v.green, v.blue)\n                }`,codeUbo:e=>`\n                    v = uv.${e};\n\n                    data[offset] = v.red;\n                    data[offset+1] = v.green;\n                    data[offset+2] = v.blue;\n                `},{test:e=>"vec4"===e.type&&1===e.size&&!e.isArray,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["${e}"].location, v[0], v[1], v[2], v[3])\n                }`}],Vv={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",samplerCube:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",sampler2DArray:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }"},$v={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};const Xv={};let qv,Wv=Xv;function Yv(){if(!qv){qv=sh.MEDIUM;const e=function(){if(Wv===Xv||Wv?.isContextLost()){const e=dh.ADAPTER.createCanvas();let t;dh.PREFER_ENV>=$d.WEBGL2&&(t=e.getContext("webgl2",{})),t||(t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),Wv=t}return Wv}();if(e&&e.getShaderPrecisionFormat){const t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);t&&(qv=t.precision?sh.HIGH:sh.MEDIUM)}}return qv}function Kv(e,t){const r=e.getShaderSource(t).split("\n").map(((e,t)=>`${t}: ${e}`)),n=e.getShaderInfoLog(t),i=n.split("\n"),a={},s=i.map((e=>parseFloat(e.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1")))).filter((e=>!(!e||a[e])&&(a[e]=!0,!0))),o=[""];s.forEach((e=>{r[e-1]=`%c${r[e-1]}%c`,o.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")}));const l=r.join("\n");o[0]=l,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...o),console.groupEnd()}const Zv={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Qv(e){return Zv[e]}let Jv=null;const e_={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function t_(e,t){if(!Jv){const t=Object.keys(e_);Jv={};for(let r=0;r<t.length;++r){const n=t[r];Jv[e[n]]=e_[n]}}return Jv[t]}function r_(e,t,r){if("precision"!==e.substring(0,9)){let n=t;return t===sh.HIGH&&r!==sh.HIGH&&(n=sh.MEDIUM),`precision ${n} float;\n${e}`}return r!==sh.HIGH&&"precision highp"===e.substring(0,15)?e.replace("precision highp","precision mediump"):e}let n_;let i_=0;const a_={},s_=class e{constructor(t,r,n="pixi-shader",i={}){this.extra={},this.id=i_++,this.vertexSrc=t||e.defaultVertexSrc,this.fragmentSrc=r||e.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=i,"#version"!==this.vertexSrc.substring(0,8)&&(n=n.replace(/\s+/g,"-"),a_[n]?(a_[n]++,n+=`-${a_[n]}`):a_[n]=1,this.vertexSrc=`#define SHADER_NAME ${n}\n${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${n}\n${this.fragmentSrc}`,this.vertexSrc=r_(this.vertexSrc,e.defaultVertexPrecision,sh.HIGH),this.fragmentSrc=r_(this.fragmentSrc,e.defaultFragmentPrecision,Yv())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"}static from(t,r,n){const i=t+r;let a=$g[i];return a||($g[i]=a=new e(t,r,n)),a}};s_.defaultVertexPrecision=sh.HIGH,s_.defaultFragmentPrecision=Ch.apple.device?sh.HIGH:sh.MEDIUM;let o_=s_,l_=0;class u_{constructor(e,t,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=l_++,this.static=!!t,this.ubo=!!r,e instanceof fv?(this.buffer=e,this.buffer.type=uh.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new fv(new Float32Array(1)),this.buffer.type=uh.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,t,r){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[e]=new u_(t,r)}static from(e,t,r){return new u_(e,t,r)}static uboFrom(e,t){return new u_(e,t??!0,!0)}}class c_{constructor(e,t){this.uniformBindCount=0,this.program=e,this.uniformGroup=t?t instanceof u_?t:new u_(t):new u_({}),this.disposeRunner=new av("disposeShader")}checkUniformExists(e,t){if(t.uniforms[e])return!0;for(const r in t.uniforms){const n=t.uniforms[r];if(!0===n.group&&this.checkUniformExists(e,n))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,t,r){const n=o_.from(e,t);return new c_(n,r)}}class d_{constructor(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},!t.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!t.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const t=new Int32Array(e);for(let n=0;n<e;n++)t[n]=n;this.defaultGroupCache[e]=u_.from({uSamplers:t},!0);let r=this.fragTemplate;r=r.replace(/%count%/gi,`${e}`),r=r.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new o_(this.vertexSrc,r)}const t={tint:new Float32Array([1,1,1,1]),translationMatrix:new kv,default:this.defaultGroupCache[e]};return new c_(this.programCache[e],t)}generateSampleSrc(e){let t="";t+="\n",t+="\n";for(let r=0;r<e;r++)r>0&&(t+="\nelse "),r<e-1&&(t+=`if(vTextureId < ${r}.5)`),t+="\n{",t+=`\n\tcolor = texture2D(uSamplers[${r}], vTextureCoord);`,t+="\n}";return t+="\n",t+="\n",t}}class h_{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}class f_{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}const p_=class e extends f_{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=bv,this.vertexSize=6,this.state=rv.for2d(),this.size=4*e.defaultBatchSize,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??function(e){let t=!0;const r=dh.ADAPTER.getNavigator();if(Ch.tablet||Ch.phone){if(Ch.apple.device){const e=r.userAgent.match(/OS (\d+)_(\d+)?/);e&&parseInt(e[1],10)<11&&(t=!1)}if(Ch.android.device){const e=r.userAgent.match(/Android\s([0-9.]*)/);e&&parseInt(e[1],10)<7&&(t=!1)}}return t?e:4}(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??!Ch.apple.device,this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return sg("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n"}static get defaultFragmentTemplate(){return"varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n"}setShaderGenerator({vertex:t=e.defaultVertexSrc,fragment:r=e.defaultFragmentTemplate}={}){this.shaderGenerator=new d_(t,r)}contextChange(){const t=this.renderer.gl;dh.PREFER_ENV===$d.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),e.defaultMaxTextures),this.maxTextures=function(e,t){if(0===e)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const r=t.createShader(t.FRAGMENT_SHADER);for(;;){const n=ev.replace(/%forloop%/gi,tv(e));if(t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS))break;e=e/2|0}return e}(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:r}=e,n=this.size/4,i=Math.floor(n/this.maxTextures)+1;for(;t.length<n;)t.push(new dv);for(;r.length<i;)r.push(new h_);for(let e=0;e<this.maxTextures;e++)this._tempBoundTextures[e]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,maxTextures:r}=this,n=e._textureArrayPool,i=this.renderer.batch,a=this._tempBoundTextures,s=this.renderer.textureGC.count;let o=++cv._globalBatch,l=0,u=n[0],c=0;i.copyBoundTextures(a,r);for(let e=0;e<this._bufferSize;++e){const d=t[e];t[e]=null,d._batchEnabled!==o&&(u.count>=r&&(i.boundArray(u,a,o,r),this.buildDrawCalls(u,c,e),c=e,u=n[++l],++o),d._batchEnabled=o,d.touched=s,u.elements[u.count++]=d)}u.count>0&&(i.boundArray(u,a,o,r),this.buildDrawCalls(u,c,this._bufferSize),++l,++o);for(let e=0;e<a.length;e++)a[e]=null;cv._globalBatch=o}buildDrawCalls(t,r,n){const{_bufferedElements:i,_attributeBuffer:a,_indexBuffer:s,vertexSize:o}=this,l=e._drawCallPool;let u=this._dcIndex,c=this._aIndex,d=this._iIndex,h=l[u];h.start=this._iIndex,h.texArray=t;for(let e=r;e<n;++e){const n=i[e],f=n._texture.baseTexture,p=Ng[f.alphaMode?1:0][n.blendMode];i[e]=null,r<e&&h.blend!==p&&(h.size=d-h.start,r=e,h=l[++u],h.texArray=t,h.start=d),this.packInterleavedGeometry(n,a,s,c,d),c+=n.vertexData.length/2*o,d+=n.indices.length,h.blend=p}r<n&&(h.size=d-h.start,++u),this._dcIndex=u,this._aIndex=c,this._iIndex=d}bindAndClearTexArray(e){const t=this.renderer.texture;for(let r=0;r<e.count;r++)t.bind(e.elements[r],e.ids[r]),e.elements[r]=null;e.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:r,_indexBuffer:n}=this;e.canUploadSameBuffer?(t[this._flushId]._buffer.update(r.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(r.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:r,state:n}=this.renderer,i=e._drawCallPool;let a=null;for(let e=0;e<t;e++){const{texArray:t,type:s,size:o,start:l,blend:u}=i[e];a!==t&&(a=t,this.bindAndClearTexArray(t)),this.state.blendMode=u,n.set(this.state),r.drawElements(s,o,r.UNSIGNED_SHORT,2*l)}}flush(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),e.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const t=Ug(Math.ceil(e/8)),r=Gg(t),n=8*t;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);let i=this._aBuffers[n];return i||(this._aBuffers[n]=i=new Jg(n*this.vertexSize*4)),i}getIndexBuffer(e){const t=Ug(Math.ceil(e/12)),r=Gg(t),n=12*t;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);let i=this._iBuffers[r];return i||(this._iBuffers[r]=i=new Uint16Array(n)),i}packInterleavedGeometry(e,t,r,n,i){const{uint32View:a,float32View:s}=t,o=n/this.vertexSize,l=e.uvs,u=e.indices,c=e.vertexData,d=e._texture.baseTexture._batchLocation,h=Math.min(e.worldAlpha,1),f=Dg.shared.setValue(e._tintRGB).toPremultiplied(h,e._texture.baseTexture.alphaMode>0);for(let p=0;p<c.length;p+=2)s[n++]=c[p],s[n++]=c[p+1],s[n++]=l[p],s[n++]=l[p+1],a[n++]=f,s[n++]=d;for(let p=0;p<u.length;p++)r[i++]=o+u[p]}};p_.defaultBatchSize=4096,p_.extension={name:"batch",type:Yg.RendererPlugin},p_._drawCallPool=[],p_._textureArrayPool=[];let m_=p_;Qg.add(m_);const y_=class e extends c_{constructor(t,r,n){super(o_.from(t||e.defaultVertexSrc,r||e.defaultFragmentSrc),n),this.padding=0,this.resolution=e.defaultResolution,this.multisample=e.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new rv}apply(e,t,r,n,i){e.applyFilter(this,t,r,n)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"}};y_.defaultResolution=1,y_.defaultMultisample=lh.NONE;let g_=y_;class v_{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Dg(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:t,background:r,backgroundAlpha:n}=e,i=r??t;void 0!==i&&(this.color=i),this.alpha=n}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}v_.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},v_.extension={type:[Yg.RendererSystem,Yg.CanvasRendererSystem],name:"background"},Qg.add(v_);class __{constructor(e){this.renderer=e,this.emptyRenderer=new f_(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,t){const{boundTextures:r}=this.renderer.texture;for(let n=t-1;n>=0;--n)e[n]=r[n]||null,e[n]&&(e[n]._batchLocation=n)}boundArray(e,t,r,n){const{elements:i,ids:a,count:s}=e;let o=0;for(let l=0;l<s;l++){const e=i[l],s=e._batchLocation;if(s>=0&&s<n&&t[s]===e)a[l]=s;else for(;o<n;){const n=t[o];if(!n||n._batchEnabled!==r||n._batchLocation!==o){a[l]=o,e._batchLocation=o,t[o]=e;break}o++}}}destroy(){this.renderer=null}}__.extension={type:Yg.RendererSystem,name:"batch"},Qg.add(__);let b_=0;class w_{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=b_++}init(e){if(e.context)this.initFromContext(e.context);else{const t=this.renderer.background.alpha<1,r=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:t,premultipliedAlpha:r,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=b_++,this.renderer.runners.contextChange.emit(e);const t=this.renderer.view;void 0!==t.addEventListener&&(t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const t=this.createContext(this.renderer.view,e);this.initFromContext(t)}createContext(e,t){let r;if(dh.PREFER_ENV>=$d.WEBGL2&&(r=e.getContext("webgl2",t)),r)this.webGLVersion=2;else if(this.webGLVersion=1,r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),!r)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,t={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc")};1===this.webGLVersion?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout((()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()}),0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,void 0!==e.removeEventListener&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const t=e.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const n=r||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}w_.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},w_.extension={type:Yg.RendererSystem,name:"context"},Qg.add(w_);class x_{constructor(e,t){if(this.width=Math.round(e),this.height=Math.round(t),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new av("disposeFramebuffer"),this.multisample=lh.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,t){return this.colorTextures[e]=t||new cv(null,{scaleMode:eh.NEAREST,resolution:1,mipmap:rh.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new cv(null,{scaleMode:eh.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:rh.OFF,format:Kd.DEPTH_COMPONENT,type:Qd.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,t){if(e=Math.round(e),t=Math.round(t),!e||!t)throw new Error("Framebuffer width and height must not be zero");if(e!==this.width||t!==this.height){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(let r=0;r<this.colorTextures.length;r++){const n=this.colorTextures[r],i=n.resolution;n.setSize(e/i,t/i)}if(this.depthTexture){const r=this.depthTexture.resolution;this.depthTexture.setSize(e/r,t/r)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class I_ extends cv{constructor(e={}){if("number"==typeof e){e={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}}e.width=e.width??100,e.height=e.height??100,e.multisample??(e.multisample=lh.NONE),super(null,e),this.mipmap=rh.OFF,this.valid=!0,this._clear=new Dg([0,0,0,0]),this.framebuffer=new x_(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t){this.framebuffer.resize(e*this.resolution,t*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class T_ extends sv{constructor(e){const t=e;super(t.naturalWidth||t.videoWidth||t.displayWidth||t.width,t.naturalHeight||t.videoHeight||t.displayHeight||t.height),this.source=e,this.noSubImage=!1}static crossOrigin(e,t,r){void 0!==r||t.startsWith("data:")?!1!==r&&(e.crossOrigin="string"==typeof r?r:"anonymous"):e.crossOrigin=function(e,t=globalThis.location){if(e.startsWith("data:"))return"";t=t||globalThis.location;const r=new URL(e,document.baseURI);return r.hostname!==t.hostname||r.port!==t.port||r.protocol!==t.protocol?"anonymous":""}(t)}upload(e,t,r,n){const i=e.gl,a=t.realWidth,s=t.realHeight;if(n=n||this.source,typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement){if(!n.complete||0===n.naturalWidth)return!1}else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement&&n.readyState<=1)return!1;return i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===nh.UNPACK),this.noSubImage||t.target!==i.TEXTURE_2D||r.width!==a||r.height!==s?(r.width=a,r.height=s,i.texImage2D(t.target,0,r.internalFormat,t.format,r.type,n)):i.texSubImage2D(i.TEXTURE_2D,0,0,0,t.format,r.type,n),!0}update(){if(this.destroyed)return;const e=this.source,t=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;this.resize(t,r),super.update()}dispose(){this.source=null}}class E_ extends T_{constructor(e,t){if(t=t||{},"string"==typeof e){const r=new Image;T_.crossOrigin(r,e,t.crossorigin),r.src=e,e=r}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(t.createBitmap??dh.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode="number"==typeof t.alphaMode?t.alphaMode:null,this.bitmap=null,this._load=null,!1!==t.autoLoad&&this.load()}load(e){return this._load||(void 0!==e&&(this.createBitmap=e),this._load=new Promise(((e,t)=>{const r=this.source;this.url=r.src;const n=()=>{this.destroyed||(r.onload=null,r.onerror=null,this.update(),this._load=null,this.createBitmap?e(this.process()):e(this))};r.complete&&r.src?n():(r.onload=n,r.onerror=e=>{t(e),this.onError.emit(e)})}))),this._load}process(){const e=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);const t=globalThis.createImageBitmap,r=!e.crossOrigin||"anonymous"===e.crossOrigin;return this._process=fetch(e.src,{mode:r?"cors":"no-cors"}).then((e=>e.blob())).then((r=>t(r,0,0,e.width,e.height,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===nh.UNPACK?"premultiply":"none"}))).then((e=>this.destroyed?Promise.reject():(this.bitmap=e,this.update(),this._process=null,Promise.resolve(this)))),this._process}upload(e,t,r){if("number"==typeof this.alphaMode&&(t.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,t,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,t,r,this.bitmap),!this.preserveBitmap){let e=!0;const n=t._glTextures;for(const i in n){const a=n[i];if(a!==r&&a.dirtyId!==t.dirtyId){e=!1;break}}e&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&("string"==typeof e||e instanceof HTMLImageElement)}}class S_{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,t,r){const n=t.width,i=t.height;if(r){const t=e.width/2/n,a=e.height/2/i,s=e.x/n+t,o=e.y/i+a;r=Dv.add(r,Dv.NW),this.x0=s+t*Dv.uX(r),this.y0=o+a*Dv.uY(r),r=Dv.add(r,2),this.x1=s+t*Dv.uX(r),this.y1=o+a*Dv.uY(r),r=Dv.add(r,2),this.x2=s+t*Dv.uX(r),this.y2=o+a*Dv.uY(r),r=Dv.add(r,2),this.x3=s+t*Dv.uX(r),this.y3=o+a*Dv.uY(r)}else this.x0=e.x/n,this.y0=e.y/i,this.x1=(e.x+e.width)/n,this.y1=e.y/i,this.x2=(e.x+e.width)/n,this.y2=(e.y+e.height)/i,this.x3=e.x/n,this.y3=(e.y+e.height)/i;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}S_.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const A_=new S_;function k_(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}class C_ extends Rh{constructor(e,t,r,n,i,a,s){if(super(),this.noFrame=!1,t||(this.noFrame=!0,t=new Av(0,0,1,1)),e instanceof C_&&(e=e.baseTexture),this.baseTexture=e,this._frame=t,this.trim=n,this.valid=!1,this.destroyed=!1,this._uvs=A_,this.uvMatrix=null,this.orig=r||t,this._rotate=Number(i||0),!0===i)this._rotate=2;else if(this._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=a?new Ev(a.x,a.y):new Ev(0,0),this.defaultBorders=s,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=t:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:e}=this.baseTexture;e?.url&&Xg[e.url]&&C_.removeFromCache(e.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,C_.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){const e=this._frame.clone(),t=this._frame===this.orig?e:this.orig.clone(),r=new C_(this.baseTexture,!this.noFrame&&e,t,this.trim?.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(r._frame=e),r}updateUvs(){this._uvs===A_&&(this._uvs=new S_),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,t={},r=dh.STRICT_TEXTURE_CACHE){const n="string"==typeof e;let i=null;if(n)i=e;else if(e instanceof cv){if(!e.cacheId){const r=t?.pixiIdPrefix||"pixiid";e.cacheId=`${r}-${Vg()}`,cv.addToCache(e,e.cacheId)}i=e.cacheId}else{if(!e._pixiId){const r=t?.pixiIdPrefix||"pixiid";e._pixiId=`${r}_${Vg()}`}i=e._pixiId}let a=Xg[i];if(n&&r&&!a)throw new Error(`The cacheId "${i}" does not exist in TextureCache.`);return a||e instanceof cv?!a&&e instanceof cv&&(a=new C_(e),C_.addToCache(a,i)):(t.resolution||(t.resolution=Wg(e)),a=new C_(new cv(e,t)),a.baseTexture.cacheId=i,cv.addToCache(a.baseTexture,i),C_.addToCache(a,i)),a}static fromURL(e,t){const r=Object.assign({autoLoad:!1},t?.resourceOptions),n=C_.from(e,Object.assign({resourceOptions:r},t),!1),i=n.baseTexture.resource;return n.baseTexture.valid?Promise.resolve(n):i.load().then((()=>Promise.resolve(n)))}static fromBuffer(e,t,r,n){return new C_(cv.fromBuffer(e,t,r,n))}static fromLoader(e,t,r,n){const i=new cv(e,Object.assign({scaleMode:cv.defaultOptions.scaleMode,resolution:Wg(t)},n)),{resource:a}=i;a instanceof E_&&(a.url=t);const s=new C_(i);return r||(r=t),cv.addToCache(s.baseTexture,r),C_.addToCache(s,r),r!==t&&(cv.addToCache(s.baseTexture,t),C_.addToCache(s,t)),s.baseTexture.valid?Promise.resolve(s):new Promise((e=>{s.baseTexture.once("loaded",(()=>e(s)))}))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),Xg[t]&&Xg[t]!==e&&console.warn(`Texture added to the cache with an id [${t}] that already had an entry`),Xg[t]=e)}static removeFromCache(e){if("string"==typeof e){const t=Xg[e];if(t){const r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete Xg[e],t}}else if(e?.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)Xg[e.textureCacheIds[t]]===e&&delete Xg[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:t,y:r,width:n,height:i}=e,a=t+n>this.baseTexture.width,s=r+i>this.baseTexture.height;if(a||s){const e=a&&s?"and":"or",o=`X: ${t} + ${n} = ${t+n} > ${this.baseTexture.width}`,l=`Y: ${r} + ${i} = ${r+i} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${o} ${e} ${l}`)}this.valid=n&&i&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return C_._EMPTY||(C_._EMPTY=new C_(new cv),k_(C_._EMPTY),k_(C_._EMPTY.baseTexture)),C_._EMPTY}static get WHITE(){if(!C_._WHITE){const e=dh.ADAPTER.createCanvas(16,16),t=e.getContext("2d");e.width=16,e.height=16,t.fillStyle="white",t.fillRect(0,0,16,16),C_._WHITE=new C_(cv.from(e)),k_(C_._WHITE),k_(C_._WHITE.baseTexture)}return C_._WHITE}}class P_ extends C_{constructor(e,t){super(e,t),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t,r=!0){const n=this.baseTexture.resolution,i=Math.round(e*n)/n,a=Math.round(t*n)/n;this.valid=i>0&&a>0,this._frame.width=this.orig.width=i,this._frame.height=this.orig.height=a,r&&this.baseTexture.resize(i,a),this.updateUvs()}setResolution(e){const{baseTexture:t}=this;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))}static create(e){return new P_(new I_(e))}}class R_{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,t,r=lh.NONE){const n=new I_(Object.assign({width:e,height:t,resolution:1,multisample:r},this.textureOptions));return new P_(n)}getOptimalTexture(e,t,r=1,n=lh.NONE){let i;e=Math.max(Math.ceil(e*r-1e-6),1),t=Math.max(Math.ceil(t*r-1e-6),1),this.enableFullScreen&&e===this._pixelsWidth&&t===this._pixelsHeight?i=n>1?-n:-1:(i=((65535&(e=Ug(e)))<<16|65535&(t=Ug(t)))>>>0,n>1&&(i+=4294967296*n)),this.texturePool[i]||(this.texturePool[i]=[]);let a=this.texturePool[i].pop();return a||(a=this.createTexture(e,t,n)),a.filterPoolKey=i,a.setResolution(r),a}getFilterTexture(e,t,r){const n=this.getOptimalTexture(e.width,e.height,t||e.resolution,r||lh.NONE);return n.filterFrame=e.filterFrame,n}returnTexture(e){const t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=!1!==e)for(const t in this.texturePool){const e=this.texturePool[t];if(e)for(let t=0;t<e.length;t++)e[t].destroy(!0)}this.texturePool={}}setScreenSize(e){if(e.width!==this._pixelsWidth||e.height!==this._pixelsHeight){this.enableFullScreen=e.width>0&&e.height>0;for(const e in this.texturePool){if(!(Number(e)<0))continue;const t=this.texturePool[e];if(t)for(let e=0;e<t.length;e++)t[e].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}R_.SCREEN_KEY=-1;class M_ extends _v{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class L_ extends _v{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new fv(this.vertices),this.uvBuffer=new fv(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,t){let r=0,n=0;return this.uvs[0]=r,this.uvs[1]=n,this.uvs[2]=r+t.width/e.width,this.uvs[3]=n,this.uvs[4]=r+t.width/e.width,this.uvs[5]=n+t.height/e.height,this.uvs[6]=r,this.uvs[7]=n+t.height/e.height,r=t.x,n=t.y,this.vertices[0]=r,this.vertices[1]=n,this.vertices[2]=r+t.width,this.vertices[3]=n,this.vertices[4]=r+t.width,this.vertices[5]=n+t.height,this.vertices[6]=r,this.vertices[7]=n+t.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class O_{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=lh.NONE,this.sourceFrame=new Av,this.destinationFrame=new Av,this.bindingSourceFrame=new Av,this.bindingDestinationFrame=new Av,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const F_=[new Ev,new Ev,new Ev,new Ev],D_=new kv;class N_{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new R_,this.statePool=[],this.quad=new M_,this.quadUv=new L_,this.tempRect=new Av,this.activeState={},this.globalUniforms=new u_({outputFrame:new Av,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,t){const r=this.renderer,n=this.defaultFilterStack,i=this.statePool.pop()||new O_,a=r.renderTexture;let s,o;if(a.current){const e=a.current;s=e.resolution,o=e.multisample}else s=r.resolution,o=r.multisample;let l=t[0].resolution||s,u=t[0].multisample??o,c=t[0].padding,d=t[0].autoFit,h=t[0].legacy??!0;for(let m=1;m<t.length;m++){const e=t[m];l=Math.min(l,e.resolution||s),u=Math.min(u,e.multisample??o),c=this.useMaxPadding?Math.max(c,e.padding):c+e.padding,d=d&&e.autoFit,h=h||(e.legacy??!0)}1===n.length&&(this.defaultFilterStack[0].renderTexture=a.current),n.push(i),i.resolution=l,i.multisample=u,i.legacy=h,i.target=e,i.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),i.sourceFrame.pad(c);const f=this.tempRect.copyFrom(a.sourceFrame);r.projection.transform&&this.transformAABB(D_.copyFrom(r.projection.transform).invert(),f),d?(i.sourceFrame.fit(f),(i.sourceFrame.width<=0||i.sourceFrame.height<=0)&&(i.sourceFrame.width=0,i.sourceFrame.height=0)):i.sourceFrame.intersects(f)||(i.sourceFrame.width=0,i.sourceFrame.height=0),this.roundFrame(i.sourceFrame,a.current?a.current.resolution:r.resolution,a.sourceFrame,a.destinationFrame,r.projection.transform),i.renderTexture=this.getOptimalFilterTexture(i.sourceFrame.width,i.sourceFrame.height,l,u),i.filters=t,i.destinationFrame.width=i.renderTexture.width,i.destinationFrame.height=i.renderTexture.height;const p=this.tempRect;p.x=0,p.y=0,p.width=i.sourceFrame.width,p.height=i.sourceFrame.height,i.renderTexture.filterFrame=i.sourceFrame,i.bindingSourceFrame.copyFrom(a.sourceFrame),i.bindingDestinationFrame.copyFrom(a.destinationFrame),i.transform=r.projection.transform,r.projection.transform=null,a.bind(i.renderTexture,i.sourceFrame,p),r.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,t=e.pop(),r=t.filters;this.activeState=t;const n=this.globalUniforms.uniforms;n.outputFrame=t.sourceFrame,n.resolution=t.resolution;const i=n.inputSize,a=n.inputPixel,s=n.inputClamp;if(i[0]=t.destinationFrame.width,i[1]=t.destinationFrame.height,i[2]=1/i[0],i[3]=1/i[1],a[0]=Math.round(i[0]*t.resolution),a[1]=Math.round(i[1]*t.resolution),a[2]=1/a[0],a[3]=1/a[1],s[0]=.5*a[2],s[1]=.5*a[3],s[2]=t.sourceFrame.width*i[2]-.5*a[2],s[3]=t.sourceFrame.height*i[3]-.5*a[3],t.legacy){const e=n.filterArea;e[0]=t.destinationFrame.width,e[1]=t.destinationFrame.height,e[2]=t.sourceFrame.x,e[3]=t.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();const o=e[e.length-1];if(this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,t.renderTexture,o.renderTexture,ih.BLEND,t),this.returnFilterTexture(t.renderTexture);else{let e=t.renderTexture,n=this.getOptimalFilterTexture(e.width,e.height,t.resolution);n.filterFrame=e.filterFrame;let i=0;for(i=0;i<r.length-1;++i){1===i&&t.multisample>1&&(n=this.getOptimalFilterTexture(e.width,e.height,t.resolution),n.filterFrame=e.filterFrame),r[i].apply(this,e,n,ih.CLEAR,t);const a=e;e=n,n=a}r[i].apply(this,e,o.renderTexture,ih.BLEND,t),i>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(e),this.returnFilterTexture(n)}t.clear(),this.statePool.push(t)}bindAndClear(e,t=ih.CLEAR){const{renderTexture:r,state:n}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e?.filterFrame){const t=this.tempRect;t.x=0,t.y=0,t.width=e.filterFrame.width,t.height=e.filterFrame.height,r.bind(e,e.filterFrame,t)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const i=1&n.stateId||this.forceClear;(t===ih.CLEAR||t===ih.BLIT&&i)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,t,r,n){const i=this.renderer;i.state.set(e.state),this.bindAndClear(r,n),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,i.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),i.geometry.bind(this.quadUv),i.geometry.draw(Yd.TRIANGLES)):(i.geometry.bind(this.quad),i.geometry.draw(Yd.TRIANGLE_STRIP))}calculateSpriteMatrix(e,t){const{sourceFrame:r,destinationFrame:n}=this.activeState,{orig:i}=t._texture,a=e.set(n.width,0,0,n.height,r.x,r.y),s=t.worldTransform.copyTo(kv.TEMP_MATRIX);return s.invert(),a.prepend(s),a.scale(1/i.width,1/i.height),a.translate(t.anchor.x,t.anchor.y),a}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,t,r=1,n=lh.NONE){return this.texturePool.getOptimalTexture(e,t,r,n)}getFilterTexture(e,t,r){if("number"==typeof e){const r=e;e=t,t=r}e=e||this.activeState.renderTexture;const n=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,r||lh.NONE);return n.filterFrame=e.filterFrame,n}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,t){const r=F_[0],n=F_[1],i=F_[2],a=F_[3];r.set(t.left,t.top),n.set(t.left,t.bottom),i.set(t.right,t.top),a.set(t.right,t.bottom),e.apply(r,r),e.apply(n,n),e.apply(i,i),e.apply(a,a);const s=Math.min(r.x,n.x,i.x,a.x),o=Math.min(r.y,n.y,i.y,a.y),l=Math.max(r.x,n.x,i.x,a.x),u=Math.max(r.y,n.y,i.y,a.y);t.x=s,t.y=o,t.width=l-s,t.height=u-o}roundFrame(e,t,r,n,i){if(!(e.width<=0||e.height<=0||r.width<=0||r.height<=0)){if(i){const{a:e,b:t,c:r,d:n}=i;if((Math.abs(t)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(n)>1e-4))return}(i=i?D_.copyFrom(i):D_.identity()).translate(-r.x,-r.y).scale(n.width/r.width,n.height/r.height).translate(n.x,n.y),this.transformAABB(i,e),e.ceil(t),this.transformAABB(i.invert(),e)}}}N_.extension={type:Yg.RendererSystem,name:"filter"},Qg.add(N_);class B_{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=lh.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const U_=new Av;class j_{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new x_(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Av,this.hasMRT=!0,this.writeDepthTexture=!0,1===this.renderer.context.webGLVersion){let t=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;dh.PREFER_ENV===$d.WEBGL_LEGACY&&(t=null,r=null),t?e.drawBuffers=e=>t.drawBuffersWEBGL(e):(this.hasMRT=!1,e.drawBuffers=()=>{}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,t,r=0){const{gl:n}=this;if(e){const i=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,n.bindFramebuffer(n.FRAMEBUFFER,i.framebuffer)),i.mipLevel!==r&&(e.dirtyId++,e.dirtyFormat++,i.mipLevel=r),i.dirtyId!==e.dirtyId&&(i.dirtyId=e.dirtyId,i.dirtyFormat!==e.dirtyFormat?(i.dirtyFormat=e.dirtyFormat,i.dirtySize=e.dirtySize,this.updateFramebuffer(e,r)):i.dirtySize!==e.dirtySize&&(i.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let t=0;t<e.colorTextures.length;t++){const r=e.colorTextures[t];this.renderer.texture.unbind(r.parentTextureArray||r)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){const e=t.width>>r,n=t.height>>r,i=e/t.width;this.setViewport(t.x*i,t.y*i,e,n)}else{const t=e.width>>r,n=e.height>>r;this.setViewport(0,0,t,n)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,t,r,n){const i=this.viewport;e=Math.round(e),t=Math.round(t),r=Math.round(r),n=Math.round(n),(i.width!==r||i.height!==n||i.x!==e||i.y!==t)&&(i.x=e,i.y=t,i.width=r,i.height=n,this.gl.viewport(e,t,r,n))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,t,r,n,i=qd.COLOR|qd.DEPTH){const{gl:a}=this;a.clearColor(e,t,r,n),a.clear(i)}initFramebuffer(e){const{gl:t}=this,r=new B_(t.createFramebuffer());return r.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(e),e.disposeRunner.add(this),r}resizeFramebuffer(e){const{gl:t}=this,r=e.glFramebuffers[this.CONTEXT_UID];if(r.stencil){let n;t.bindRenderbuffer(t.RENDERBUFFER,r.stencil),n=1===this.renderer.context.webGLVersion?t.DEPTH_STENCIL:e.depth&&e.stencil?t.DEPTH24_STENCIL8:e.depth?t.DEPTH_COMPONENT24:t.STENCIL_INDEX8,r.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,n,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,n,e.width,e.height)}const n=e.colorTextures;let i=n.length;t.drawBuffers||(i=Math.min(i,1));for(let a=0;a<i;a++){const i=n[a],s=i.parentTextureArray||i;this.renderer.texture.bind(s,0),0===a&&r.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,r.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,s._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,t){const{gl:r}=this,n=e.glFramebuffers[this.CONTEXT_UID],i=e.colorTextures;let a=i.length;r.drawBuffers||(a=Math.min(a,1)),n.multisample>1&&this.canMultisampleFramebuffer(e)?n.msaaBuffer=n.msaaBuffer||r.createRenderbuffer():n.msaaBuffer&&(r.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));const s=[];for(let o=0;o<a;o++){const a=i[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),0===o&&n.msaaBuffer?(r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,n.msaaBuffer)):(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+o,a.target,l._glTextures[this.CONTEXT_UID].texture,t),s.push(r.COLOR_ATTACHMENT0+o))}if(s.length>1&&r.drawBuffers(s),e.depthTexture&&this.writeDepthTexture){const n=e.depthTexture;this.renderer.texture.bind(n,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,n._glTextures[this.CONTEXT_UID].texture,t)}if(!e.stencil&&!e.depth||e.depthTexture&&this.writeDepthTexture)n.stencil&&(r.deleteRenderbuffer(n.stencil),n.stencil=null);else{let t,i;n.stencil=n.stencil||r.createRenderbuffer(),1===this.renderer.context.webGLVersion?(t=r.DEPTH_STENCIL_ATTACHMENT,i=r.DEPTH_STENCIL):e.depth&&e.stencil?(t=r.DEPTH_STENCIL_ATTACHMENT,i=r.DEPTH24_STENCIL8):e.depth?(t=r.DEPTH_ATTACHMENT,i=r.DEPTH_COMPONENT24):(t=r.STENCIL_ATTACHMENT,i=r.STENCIL_INDEX8),r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,i,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,i,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,t,r.RENDERBUFFER,n.stencil)}}canMultisampleFramebuffer(e){return 1!==this.renderer.context.webGLVersion&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:t}=this;let r=lh.NONE;if(e<=1||null===t)return r;for(let n=0;n<t.length;n++)if(t[n]<=e){r=t[n];break}return 1===r&&(r=lh.NONE),r}blit(e,t,r){const{current:n,renderer:i,gl:a,CONTEXT_UID:s}=this;if(2!==i.context.webGLVersion||!n)return;const o=n.glFramebuffers[s];if(!o)return;if(!e){if(!o.msaaBuffer)return;const t=n.colorTextures[0];if(!t)return;o.blitFramebuffer||(o.blitFramebuffer=new x_(n.width,n.height),o.blitFramebuffer.addColorTexture(0,t)),(e=o.blitFramebuffer).colorTextures[0]!==t&&(e.colorTextures[0]=t,e.dirtyId++,e.dirtyFormat++),(e.width!==n.width||e.height!==n.height)&&(e.width=n.width,e.height=n.height,e.dirtyId++,e.dirtySize++)}t||((t=U_).width=n.width,t.height=n.height),r||(r=t);const l=t.width===r.width&&t.height===r.height;this.bind(e),a.bindFramebuffer(a.READ_FRAMEBUFFER,o.framebuffer),a.blitFramebuffer(t.left,t.top,t.right,t.bottom,r.left,r.top,r.right,r.bottom,a.COLOR_BUFFER_BIT,l?a.NEAREST:a.LINEAR),a.bindFramebuffer(a.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,t){const r=e.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(!r)return;delete e.glFramebuffers[this.CONTEXT_UID];const i=this.managedFramebuffers.indexOf(e);i>=0&&this.managedFramebuffers.splice(i,1),e.disposeRunner.remove(this),t||(n.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&n.deleteRenderbuffer(r.msaaBuffer),r.stencil&&n.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&this.disposeFramebuffer(r.blitFramebuffer,t)}disposeAll(e){const t=this.managedFramebuffers;this.managedFramebuffers=[];for(let r=0;r<t.length;r++)this.disposeFramebuffer(t[r],e)}forceStencil(){const e=this.current;if(!e)return;const t=e.glFramebuffers[this.CONTEXT_UID];if(!t||t.stencil&&e.stencil)return;e.stencil=!0;const r=e.width,n=e.height,i=this.gl,a=t.stencil=i.createRenderbuffer();let s,o;i.bindRenderbuffer(i.RENDERBUFFER,a),1===this.renderer.context.webGLVersion?(s=i.DEPTH_STENCIL_ATTACHMENT,o=i.DEPTH_STENCIL):e.depth?(s=i.DEPTH_STENCIL_ATTACHMENT,o=i.DEPTH24_STENCIL8):(s=i.STENCIL_ATTACHMENT,o=i.STENCIL_INDEX8),t.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,t.multisample,o,r,n):i.renderbufferStorage(i.RENDERBUFFER,o,r,n),i.framebufferRenderbuffer(i.FRAMEBUFFER,s,i.RENDERBUFFER,a)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Av}destroy(){this.renderer=null}}j_.extension={type:Yg.RendererSystem,name:"framebuffer"},Qg.add(j_);const G_={5126:4,5123:2,5121:1};class z_{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==t.webGLVersion){let t=this.renderer.context.extensions.vertexArrayObject;dh.PREFER_ENV===$d.WEBGL_LEGACY&&(t=null),t?(e.createVertexArray=()=>t.createVertexArrayOES(),e.bindVertexArray=e=>t.bindVertexArrayOES(e),e.deleteVertexArray=e=>t.deleteVertexArrayOES(e)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(2!==t.webGLVersion){const t=e.getExtension("ANGLE_instanced_arrays");t?(e.vertexAttribDivisor=(e,r)=>t.vertexAttribDivisorANGLE(e,r),e.drawElementsInstanced=(e,r,n,i,a)=>t.drawElementsInstancedANGLE(e,r,n,i,a),e.drawArraysInstanced=(e,r,n,i)=>t.drawArraysInstancedANGLE(e,r,n,i)):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===t.webGLVersion||!!t.extensions.uint32ElementIndex}bind(e,t){t=t||this.renderer.shader.shader;const{gl:r}=this;let n=e.glVertexArrayObjects[this.CONTEXT_UID],i=!1;n||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=n={},i=!0);const a=n[t.program.id]||this.initGeometryVao(e,t,i);this._activeGeometry=e,this._activeVao!==a&&(this._activeVao=a,this.hasVao?r.bindVertexArray(a):this.activateVao(e,t.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,t=this.renderer.buffer;for(let r=0;r<e.buffers.length;r++){const n=e.buffers[r];t.update(n)}}checkCompatibility(e,t){const r=e.attributes,n=t.attributeData;for(const i in n)if(!r[i])throw new Error(`shader and geometry incompatible, geometry missing the "${i}" attribute`)}getSignature(e,t){const r=e.attributes,n=t.attributeData,i=["g",e.id];for(const a in r)n[a]&&i.push(a,n[a].location);return i.join("-")}initGeometryVao(e,t,r=!0){const n=this.gl,i=this.CONTEXT_UID,a=this.renderer.buffer,s=t.program;s.glPrograms[i]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,s);const o=this.getSignature(e,s),l=e.glVertexArrayObjects[this.CONTEXT_UID];let u=l[o];if(u)return l[s.id]=u,u;const c=e.buffers,d=e.attributes,h={},f={};for(const p in c)h[p]=0,f[p]=0;for(const p in d)!d[p].size&&s.attributeData[p]?d[p].size=s.attributeData[p].size:d[p].size||console.warn(`PIXI Geometry attribute '${p}' size cannot be determined (likely the bound shader does not have the attribute)`),h[d[p].buffer]+=d[p].size*G_[d[p].type];for(const p in d){const e=d[p],t=e.size;void 0===e.stride&&(h[e.buffer]===t*G_[e.type]?e.stride=0:e.stride=h[e.buffer]),void 0===e.start&&(e.start=f[e.buffer],f[e.buffer]+=t*G_[e.type])}u=n.createVertexArray(),n.bindVertexArray(u);for(let p=0;p<c.length;p++){const e=c[p];a.bind(e),r&&e._glBuffers[i].refCount++}return this.activateVao(e,s),l[s.id]=u,l[o]=u,n.bindVertexArray(null),a.unbind(uh.ARRAY_BUFFER),u}disposeGeometry(e,t){if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const r=e.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,i=e.buffers,a=this.renderer?.buffer;if(e.disposeRunner.remove(this),r){if(a)for(let e=0;e<i.length;e++){const r=i[e]._glBuffers[this.CONTEXT_UID];r&&(r.refCount--,0===r.refCount&&!t&&a.dispose(i[e],t))}if(!t)for(const e in r)if("g"===e[0]){const t=r[e];this._activeVao===t&&this.unbind(),n.deleteVertexArray(t)}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const t=Object.keys(this.managedGeometries);for(let r=0;r<t.length;r++)this.disposeGeometry(this.managedGeometries[t[r]],e)}activateVao(e,t){const r=this.gl,n=this.CONTEXT_UID,i=this.renderer.buffer,a=e.buffers,s=e.attributes;e.indexBuffer&&i.bind(e.indexBuffer);let o=null;for(const l in s){const e=s[l],u=a[e.buffer],c=u._glBuffers[n];if(t.attributeData[l]){o!==c&&(i.bind(u),o=c);const n=t.attributeData[l].location;if(r.enableVertexAttribArray(n),r.vertexAttribPointer(n,e.size,e.type||r.FLOAT,e.normalized,e.stride,e.start),e.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(n,e.divisor)}}}}draw(e,t,r,n){const{gl:i}=this,a=this._activeGeometry;if(a.indexBuffer){const s=a.indexBuffer.data.BYTES_PER_ELEMENT,o=2===s?i.UNSIGNED_SHORT:i.UNSIGNED_INT;2===s||4===s&&this.canUseUInt32ElementIndex?a.instanced?i.drawElementsInstanced(e,t||a.indexBuffer.data.length,o,(r||0)*s,n||1):i.drawElements(e,t||a.indexBuffer.data.length,o,(r||0)*s):console.warn("unsupported index buffer type: uint32")}else a.instanced?i.drawArraysInstanced(e,r,t||a.getSize(),n||1):i.drawArrays(e,r,t||a.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}z_.extension={type:Yg.RendererSystem,name:"geometry"},Qg.add(z_);const H_=new kv;class V_{constructor(e,t){this._texture=e,this.mapCoord=new kv,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,t){void 0===t&&(t=e);const r=this.mapCoord;for(let n=0;n<e.length;n+=2){const i=e[n],a=e[n+1];t[n]=i*r.a+a*r.c+r.tx,t[n+1]=i*r.b+a*r.d+r.ty}return t}update(e){const t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;const r=t._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);const n=t.orig,i=t.trim;i&&(H_.set(n.width/i.width,0,0,n.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(H_));const a=t.baseTexture,s=this.uClampFrame,o=this.clampMargin/a.resolution,l=this.clampOffset;return s[0]=(t._frame.x+o+l)/a.width,s[1]=(t._frame.y+o+l)/a.height,s[2]=(t._frame.x+t._frame.width-o+l)/a.width,s[3]=(t._frame.y+t._frame.height-o+l)/a.height,this.uClampOffset[0]=l/a.realWidth,this.uClampOffset[1]=l/a.realHeight,this.isSimple=t._frame.width===a.width&&t._frame.height===a.height&&0===t.rotate,!0}}class $_ extends g_{constructor(e,t,r){let n=null;"string"!=typeof e&&void 0===t&&void 0===r&&(n=e,e=void 0,t=void 0,r=void 0),super(e||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",t||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",r),this.maskSprite=n,this.maskMatrix=new kv}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,t,r,n){const i=this._maskSprite,a=i._texture;a.valid&&(a.uvMatrix||(a.uvMatrix=new V_(a,0)),a.uvMatrix.update(),this.uniforms.npmAlpha=a.baseTexture.alphaMode?0:1,this.uniforms.mask=a,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,i).prepend(a.uvMatrix.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=a.uvMatrix.uClampFrame,e.applyFilter(this,t,r,n))}}class X_{constructor(e=null){this.type=oh.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=g_.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=oh.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class q_{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,t){let r=t;if(!r.isMaskData){const e=this.maskDataPool.pop()||new X_;e.pooled=!0,e.maskObject=t,r=e}const n=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(n),r._colorMask=n?n._colorMask:15,r.autoDetect&&this.detect(r),r._target=e,r.type!==oh.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case oh.SCISSOR:this.renderer.scissor.push(r);break;case oh.STENCIL:this.renderer.stencil.push(r);break;case oh.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case oh.COLOR:this.pushColorMask(r)}r.type===oh.SPRITE&&this.maskStack.push(r)}pop(e){const t=this.maskStack.pop();if(t&&t._target===e){if(t.enabled)switch(t.type){case oh.SCISSOR:this.renderer.scissor.pop(t);break;case oh.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case oh.SPRITE:this.popSpriteMask(t);break;case oh.COLOR:this.popColorMask(t)}if(t.reset(),t.pooled&&this.maskDataPool.push(t),0!==this.maskStack.length){const e=this.maskStack[this.maskStack.length-1];e.type===oh.SPRITE&&e._filters&&(e._filters[0].maskSprite=e.maskObject)}}}detect(e){const t=e.maskObject;t?t.isSprite?e.type=oh.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=oh.SCISSOR:e.type=oh.STENCIL:e.type=oh.COLOR}pushSpriteMask(e){const{maskObject:t}=e,r=e._target;let n=e._filters;n||(n=this.alphaMaskPool[this.alphaMaskIndex],n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new $_])),n[0].resolution=e.resolution,n[0].multisample=e.multisample,n[0].maskSprite=t;const i=r.filterArea;r.filterArea=t.getBounds(!0),this.renderer.filter.push(r,n),r.filterArea=i,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const t=e._colorMask,r=e._colorMask=t&e.colorMask;r!==t&&this.renderer.gl.colorMask(!!(1&r),!!(2&r),!!(4&r),!!(8&r))}popColorMask(e){const t=e._colorMask,r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==t&&this.renderer.gl.colorMask(!!(1&r),!!(2&r),!!(4&r),!!(8&r))}destroy(){this.renderer=null}}q_.extension={type:Yg.RendererSystem,name:"mask"},Qg.add(q_);class W_{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:t}=this.renderer,r=this.getStackLength();this.maskStack=e;const n=this.getStackLength();n!==r&&(0===n?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const Y_=new kv,K_=[],Z_=class e extends W_{constructor(e){super(e),this.glConst=dh.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const t=e._scissorRect,{maskObject:r}=e,{renderer:n}=this,i=n.renderTexture,a=r.getBounds(!0,K_.pop()??new Av);this.roundFrameToPixels(a,i.current?i.current.resolution:n.resolution,i.sourceFrame,i.destinationFrame,n.projection.transform),t&&a.fit(t),e._scissorRectLocal=a}static isMatrixRotated(e){if(!e)return!1;const{a:t,b:r,c:n,d:i}=e;return(Math.abs(r)>1e-4||Math.abs(n)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(i)>1e-4)}testScissor(t){const{maskObject:r}=t;if(!r.isFastRect||!r.isFastRect()||e.isMatrixRotated(r.worldTransform)||e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const n=t._scissorRectLocal;return n.width>0&&n.height>0}roundFrameToPixels(t,r,n,i,a){e.isMatrixRotated(a)||((a=a?Y_.copyFrom(a):Y_.identity()).translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.renderer.filter.transformAABB(a,t),t.fit(i),t.x=Math.round(t.x*r),t.y=Math.round(t.y*r),t.width=Math.round(t.width*r),t.height=Math.round(t.height*r))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:t}=this.renderer;e&&K_.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let t;t=this.renderer.renderTexture.current?e.y:this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};Z_.extension={type:Yg.RendererSystem,name:"scissor"};let Q_=Z_;Qg.add(Q_);class J_ extends W_{constructor(e){super(e),this.glConst=dh.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const t=e.maskObject,{gl:r}=this.renderer,n=e._stencilCounter;0===n&&(this.renderer.framebuffer.forceStencil(),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT),r.enable(r.STENCIL_TEST)),e._stencilCounter++;const i=e._colorMask;0!==i&&(e._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilFunc(r.EQUAL,n,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,0!==i&&(e._colorMask=i,r.colorMask(!!(1&i),!!(2&i),!!(4&i),!!(8&i))),this._useCurrent()}pop(e){const t=this.renderer.gl;if(0===this.getStackLength())t.disable(t.STENCIL_TEST);else{const r=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null,n=r?r._colorMask:15;0!==n&&(r._colorMask=0,t.colorMask(!1,!1,!1,!1)),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,0!==n&&(r._colorMask=n,t.colorMask(!!(1&n),!!(2&n),!!(4&n),!!(8&n))),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}J_.extension={type:Yg.RendererSystem,name:"stencil"},Qg.add(J_);class eb{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get:()=>(sg("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract)},prepare:{enumerable:!1,get:()=>(sg("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare)},interaction:{enumerable:!1,get:()=>(sg("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events)}})}init(){const e=this.rendererPlugins;for(const t in e)this.plugins[t]=new e[t](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}eb.extension={type:[Yg.RendererSystem,Yg.CanvasRendererSystem],name:"_plugin"},Qg.add(eb);class tb{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new kv,this.transform=null}update(e,t,r,n){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,n),this.transform&&this.projectionMatrix.append(this.transform);const i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)}calculateProjection(e,t,r,n){const i=this.projectionMatrix,a=n?-1:1;i.identity(),i.a=1/t.width*2,i.d=a*(1/t.height*2),i.tx=-1-t.x*i.a,i.ty=-a-t.y*i.d}setTransform(e){}destroy(){this.renderer=null}}tb.extension={type:Yg.RendererSystem,name:"projection"},Qg.add(tb);const rb=new Uv,nb=new Av;class ib{constructor(e){this.renderer=e,this._tempMatrix=new kv}generateTexture(e,t){const{region:r,...n}=t||{},i=r?.copyTo(nb)||e.getLocalBounds(nb,!0),a=n.resolution||this.renderer.resolution;i.width=Math.max(i.width,1/a),i.height=Math.max(i.height,1/a),n.width=i.width,n.height=i.height,n.resolution=a,n.multisample??(n.multisample=this.renderer.multisample);const s=P_.create(n);this._tempMatrix.tx=-i.x,this._tempMatrix.ty=-i.y;const o=e.transform;return e.transform=rb,this.renderer.render(e,{renderTexture:s,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=o,s}destroy(){}}ib.extension={type:[Yg.RendererSystem,Yg.CanvasRendererSystem],name:"textureGenerator"},Qg.add(ib);const ab=new Av,sb=new Av;class ob{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Av,this.destinationFrame=new Av,this.viewportFrame=new Av}contextChange(){const e=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,t,r){const n=this.renderer;let i,a,s;this.current=e,e?(i=e.baseTexture,s=i.resolution,t||(ab.width=e.frame.width,ab.height=e.frame.height,t=ab),r||(sb.x=e.frame.x,sb.y=e.frame.y,sb.width=t.width,sb.height=t.height,r=sb),a=i.framebuffer):(s=n.resolution,t||(ab.width=n._view.screen.width,ab.height=n._view.screen.height,t=ab),r||((r=ab).width=t.width,r.height=t.height));const o=this.viewportFrame;o.x=r.x*s,o.y=r.y*s,o.width=r.width*s,o.height=r.height*s,e||(o.y=n.view.height-(o.y+o.height)),o.ceil(),this.renderer.framebuffer.bind(a,o),this.renderer.projection.update(r,t,s,!a),e?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(r)}clear(e,t){const r=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,n=Dg.shared.setValue(e||r);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&n.premultiply(n.alpha);const i=this.destinationFrame,a=this.current?this.current.baseTexture:this.renderer._view.screen,s=i.width!==a.width||i.height!==a.height;if(s){let{x:e,y:t,width:r,height:n}=this.viewportFrame;e=Math.round(e),t=Math.round(t),r=Math.round(r),n=Math.round(n),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(e,t,r,n)}this.renderer.framebuffer.clear(n.red,n.green,n.blue,n.alpha,t),s&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}ob.extension={type:Yg.RendererSystem,name:"renderTexture"},Qg.add(ob);class lb{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function ub(e,t){const r=jv(e,e.VERTEX_SHADER,t.vertexSrc),n=jv(e,e.FRAGMENT_SHADER,t.fragmentSrc),i=e.createProgram();e.attachShader(i,r),e.attachShader(i,n);const a=t.extra?.transformFeedbackVaryings;if(a&&("function"!=typeof e.transformFeedbackVaryings?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):e.transformFeedbackVaryings(i,a.names,"separate"===a.bufferMode?e.SEPARATE_ATTRIBS:e.INTERLEAVED_ATTRIBS)),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS)||function(e,t,r,n){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(r,e.COMPILE_STATUS)||Kv(e,r),e.getShaderParameter(n,e.COMPILE_STATUS)||Kv(e,n),console.error("PixiJS Error: Could not initialize shader."),""!==e.getProgramInfoLog(t)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(t)))}(e,i,r,n),t.attributeData=function(e,t){const r={},n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const n=t.getActiveAttrib(e,i);if(n.name.startsWith("gl_"))continue;const a=t_(t,n.type),s={type:a,name:n.name,size:Qv(a),location:t.getAttribLocation(e,n.name)};r[n.name]=s}return r}(i,e),t.uniformData=function(e,t){const r={},n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let i=0;i<n;i++){const n=t.getActiveUniform(e,i),a=n.name.replace(/\[.*?\]$/,""),s=!!n.name.match(/\[.*?\]$/),o=t_(t,n.type);r[a]={name:a,index:i,type:o,size:n.size,isArray:s,value:zv(o,n.size)}}return r}(i,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const r=Object.keys(t.attributeData);r.sort(((e,t)=>e>t?1:-1));for(let n=0;n<r.length;n++)t.attributeData[r[n]].location=n,e.bindAttribLocation(i,n,r[n]);e.linkProgram(i)}e.deleteShader(r),e.deleteShader(n);const s={};for(const o in t.uniformData){const r=t.uniformData[o];s[o]={location:e.getUniformLocation(i,o),value:zv(r.type,r.size)}}return new lb(i,s)}function cb(e,t,r,n,i){r.buffer.update(i)}const db={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},hb={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function fb(e,t){if(!e.autoManage)return{size:0,syncFunc:cb};const r=function(e,t){const r=[];for(const n in e)t[n]&&r.push(t[n]);return r.sort(((e,t)=>e.index-t.index)),r}(e.uniforms,t),{uboElements:n,size:i}=function(e){const t=e.map((e=>({data:e,offset:0,dataLen:0,dirty:0})));let r=0,n=0,i=0;for(let a=0;a<t.length;a++){const e=t[a];if(r=hb[e.data.type],e.data.size>1&&(r=Math.max(r,16)*e.data.size),e.dataLen=r,n%r!=0&&n<16){const e=n%r%16;n+=e,i+=e}n+r>16?(i=16*Math.ceil(i/16),e.offset=i,i+=r,n=r):(e.offset=i,n+=r,i+=r)}return i=16*Math.ceil(i/16),{uboElements:t,size:i}}(r),a=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "];for(let s=0;s<n.length;s++){const t=n[s],r=e.uniforms[t.data.name],i=t.data.name;let o=!1;for(let e=0;e<Hv.length;e++){const n=Hv[e];if(n.codeUbo&&n.test(t.data,r)){a.push(`offset = ${t.offset/4};`,Hv[e].codeUbo(t.data.name,r)),o=!0;break}}if(!o)if(t.data.size>1){const e=Qv(t.data.type),r=Math.max(hb[t.data.type]/16,1),n=e/r,s=(4-n%4)%4;a.push(`\n                cv = ud.${i}.value;\n                v = uv.${i};\n                offset = ${t.offset/4};\n\n                t = 0;\n\n                for(var i=0; i < ${t.data.size*r}; i++)\n                {\n                    for(var j = 0; j < ${n}; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += ${s};\n                }\n\n                `)}else{const e=db[t.data.type];a.push(`\n                cv = ud.${i}.value;\n                v = uv.${i};\n                offset = ${t.offset/4};\n                ${e};\n                `)}}return a.push("\n       renderer.buffer.update(buffer);\n    "),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",a.join("\n"))}}let pb=0;const mb={textureCount:0,uboCount:0};class yb{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=pb++}systemCheck(){if(!function(){if("boolean"==typeof n_)return n_;try{n_=!0===new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")}catch{n_=!1}return n_}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,t){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const r=e.program,n=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==r&&(this.program=r,this.gl.useProgram(n.program)),t||(mb.textureCount=0,mb.uboCount=0,this.syncUniformGroup(e.uniformGroup,mb)),n}setUniforms(e){const t=this.shader.program,r=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(r.uniformData,e,this.renderer)}syncUniformGroup(e,t){const r=this.getGlProgram();(!e.static||e.dirtyId!==r.uniformDirtyGroups[e.id])&&(r.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,r,t))}syncUniforms(e,t,r){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,r)}createSyncGroups(e){const t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=function(e,t){const r=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(const n in e.uniforms){const i=t[n];if(!i){!0===e.uniforms[n]?.group&&(e.uniforms[n].ubo?r.push(`\n                        renderer.shader.syncUniformBufferGroup(uv.${n}, '${n}');\n                    `):r.push(`\n                        renderer.shader.syncUniformGroup(uv.${n}, syncData);\n                    `));continue}const a=e.uniforms[n];let s=!1;for(let e=0;e<Hv.length;e++)if(Hv[e].test(i,a)){r.push(Hv[e].code(n,a)),s=!0;break}if(!s){const e=(1!==i.size||i.isArray?$v:Vv)[i.type].replace("location",`ud["${n}"].location`);r.push(`\n            cu = ud["${n}"];\n            cv = cu.value;\n            v = uv["${n}"];\n            ${e};`)}}return new Function("ud","uv","renderer","syncData",r.join("\n"))}(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,t){const r=this.getGlProgram();if(!e.static||0!==e.dirtyId||!r.uniformGroups[e.id]){e.dirtyId=0;const n=r.uniformGroups[e.id]||this.createSyncBufferGroup(e,r,t);e.buffer.update(),n(r.uniformData,e.uniforms,this.renderer,mb,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,r.uniformBufferBindings[t])}createSyncBufferGroup(e,t,r){const{gl:n}=this.renderer;this.renderer.buffer.bind(e.buffer);const i=this.gl.getUniformBlockIndex(t.program,r);t.uniformBufferBindings[r]=this.shader.uniformBindCount,n.uniformBlockBinding(t.program,i,this.shader.uniformBindCount),this.shader.uniformBindCount++;const a=this.getSignature(e,this.shader.program.uniformData,"ubo");let s=this._uboCache[a];if(s||(s=this._uboCache[a]=fb(e,this.shader.program.uniformData)),e.autoManage){const t=new Float32Array(s.size/4);e.buffer.update(t)}return t.uniformGroups[e.id]=s.syncFunc,t.uniformGroups[e.id]}getSignature(e,t,r){const n=e.uniforms,i=[`${r}-`];for(const a in n)i.push(a),t[a]&&i.push(t[a].type);return i.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const t=this.gl,r=e.program,n=ub(t,r);return r.glPrograms[this.renderer.CONTEXT_UID]=n,n}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}yb.extension={type:Yg.RendererSystem,name:"shader"},Qg.add(yb);class gb{constructor(e){this.renderer=e}run(e){const{renderer:t}=this;t.runners.init.emit(t.options),e.hello&&t.rendererLogId,t.resize(t.screen.width,t.screen.height)}destroy(){}}gb.defaultOptions={hello:!1},gb.extension={type:[Yg.RendererSystem,Yg.CanvasRendererSystem],name:"startup"},Qg.add(gb);const vb=class e{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Wd.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new rv,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=function(e,t=[]){return t[Wd.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Wd.ADD]=[e.ONE,e.ONE],t[Wd.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Wd.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Wd.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Wd.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Wd.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Wd.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Wd.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Wd.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Wd.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Wd.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Wd.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Wd.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Wd.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Wd.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Wd.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Wd.NONE]=[0,0],t[Wd.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Wd.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[Wd.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Wd.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[Wd.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[Wd.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[Wd.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[Wd.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[Wd.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[Wd.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[Wd.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[Wd.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,r=0;for(;t;)1&t&&this.map[r].call(this,!!(e.data&1<<r)),t>>=1,r++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const t=this.blendModes[e],r=this.gl;2===t.length?r.blendFunc(t[0],t[1]):r.blendFuncSeparate(t[0],t[1],t[2],t[3]),6===t.length?(this._blendEq=!0,r.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){const r=this.checks.indexOf(e);t&&-1===r?this.checks.push(e):!t&&-1!==r&&this.checks.splice(r,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};vb.extension={type:Yg.RendererSystem,name:"state"};let _b=vb;Qg.add(_b);class bb extends Rh{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const t=(e.priority??[]).filter((t=>e.systems[t])),r=[...t,...Object.keys(e.systems).filter((e=>!t.includes(e)))];for(const n of r)this.addSystem(e.systems[n],n)}addRunners(...e){e.forEach((e=>{this.runners[e]=new av(e)}))}addSystem(e,t){const r=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=r,this._systemsHash[t]=r;for(const n in this.runners)this.runners[n].add(r);return this}emitWithCustomOptions(e,t){const r=Object.keys(this._systemsHash);e.items.forEach((n=>{const i=r.find((e=>this._systemsHash[e]===n));n[e.name](t[i])}))}destroy(){Object.values(this.runners).forEach((e=>{e.destroy()})),this._systemsHash={}}}const wb=class e{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=e.defaultMaxIdle,this.checkCountMax=e.defaultCheckCountMax,this.mode=e.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==ah.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,t=e.managedTextures;let r=!1;for(let n=0;n<t.length;n++){const i=t[n];i.resource&&this.count-i.touched>this.maxIdle&&(e.destroyTexture(i,!0),t[n]=null,r=!0)}if(r){let e=0;for(let r=0;r<t.length;r++)null!==t[r]&&(t[e++]=t[r]);t.length=e}}unload(e){const t=this.renderer.texture,r=e._texture;r&&!r.framebuffer&&t.destroyTexture(r);for(let n=e.children.length-1;n>=0;n--)this.unload(e.children[n])}destroy(){this.renderer=null}};wb.defaultMode=ah.AUTO,wb.defaultMaxIdle=3600,wb.defaultCheckCountMax=600,wb.extension={type:Yg.RendererSystem,name:"textureGC"};let xb=wb;Qg.add(xb);class Ib{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Qd.UNSIGNED_BYTE,this.internalFormat=Kd.RGBA,this.samplerType=0}}class Tb{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new cv,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function(e){let t;return t="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?{[Qd.UNSIGNED_BYTE]:{[Kd.RGBA]:e.RGBA8,[Kd.RGB]:e.RGB8,[Kd.RG]:e.RG8,[Kd.RED]:e.R8,[Kd.RGBA_INTEGER]:e.RGBA8UI,[Kd.RGB_INTEGER]:e.RGB8UI,[Kd.RG_INTEGER]:e.RG8UI,[Kd.RED_INTEGER]:e.R8UI,[Kd.ALPHA]:e.ALPHA,[Kd.LUMINANCE]:e.LUMINANCE,[Kd.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[Qd.BYTE]:{[Kd.RGBA]:e.RGBA8_SNORM,[Kd.RGB]:e.RGB8_SNORM,[Kd.RG]:e.RG8_SNORM,[Kd.RED]:e.R8_SNORM,[Kd.RGBA_INTEGER]:e.RGBA8I,[Kd.RGB_INTEGER]:e.RGB8I,[Kd.RG_INTEGER]:e.RG8I,[Kd.RED_INTEGER]:e.R8I},[Qd.UNSIGNED_SHORT]:{[Kd.RGBA_INTEGER]:e.RGBA16UI,[Kd.RGB_INTEGER]:e.RGB16UI,[Kd.RG_INTEGER]:e.RG16UI,[Kd.RED_INTEGER]:e.R16UI,[Kd.DEPTH_COMPONENT]:e.DEPTH_COMPONENT16},[Qd.SHORT]:{[Kd.RGBA_INTEGER]:e.RGBA16I,[Kd.RGB_INTEGER]:e.RGB16I,[Kd.RG_INTEGER]:e.RG16I,[Kd.RED_INTEGER]:e.R16I},[Qd.UNSIGNED_INT]:{[Kd.RGBA_INTEGER]:e.RGBA32UI,[Kd.RGB_INTEGER]:e.RGB32UI,[Kd.RG_INTEGER]:e.RG32UI,[Kd.RED_INTEGER]:e.R32UI,[Kd.DEPTH_COMPONENT]:e.DEPTH_COMPONENT24},[Qd.INT]:{[Kd.RGBA_INTEGER]:e.RGBA32I,[Kd.RGB_INTEGER]:e.RGB32I,[Kd.RG_INTEGER]:e.RG32I,[Kd.RED_INTEGER]:e.R32I},[Qd.FLOAT]:{[Kd.RGBA]:e.RGBA32F,[Kd.RGB]:e.RGB32F,[Kd.RG]:e.RG32F,[Kd.RED]:e.R32F,[Kd.DEPTH_COMPONENT]:e.DEPTH_COMPONENT32F},[Qd.HALF_FLOAT]:{[Kd.RGBA]:e.RGBA16F,[Kd.RGB]:e.RGB16F,[Kd.RG]:e.RG16F,[Kd.RED]:e.R16F},[Qd.UNSIGNED_SHORT_5_6_5]:{[Kd.RGB]:e.RGB565},[Qd.UNSIGNED_SHORT_4_4_4_4]:{[Kd.RGBA]:e.RGBA4},[Qd.UNSIGNED_SHORT_5_5_5_1]:{[Kd.RGBA]:e.RGB5_A1},[Qd.UNSIGNED_INT_2_10_10_10_REV]:{[Kd.RGBA]:e.RGB10_A2,[Kd.RGBA_INTEGER]:e.RGB10_A2UI},[Qd.UNSIGNED_INT_10F_11F_11F_REV]:{[Kd.RGB]:e.R11F_G11F_B10F},[Qd.UNSIGNED_INT_5_9_9_9_REV]:{[Kd.RGB]:e.RGB9_E5},[Qd.UNSIGNED_INT_24_8]:{[Kd.DEPTH_STENCIL]:e.DEPTH24_STENCIL8},[Qd.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[Kd.DEPTH_STENCIL]:e.DEPTH32F_STENCIL8}}:{[Qd.UNSIGNED_BYTE]:{[Kd.RGBA]:e.RGBA,[Kd.RGB]:e.RGB,[Kd.ALPHA]:e.ALPHA,[Kd.LUMINANCE]:e.LUMINANCE,[Kd.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[Qd.UNSIGNED_SHORT_5_6_5]:{[Kd.RGB]:e.RGB},[Qd.UNSIGNED_SHORT_4_4_4_4]:{[Kd.RGBA]:e.RGBA},[Qd.UNSIGNED_SHORT_5_5_5_1]:{[Kd.RGBA]:e.RGBA}},t}(e),this.samplerTypes=function(e){let t;return t="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?{[e.RGB]:Jd.FLOAT,[e.RGBA]:Jd.FLOAT,[e.ALPHA]:Jd.FLOAT,[e.LUMINANCE]:Jd.FLOAT,[e.LUMINANCE_ALPHA]:Jd.FLOAT,[e.R8]:Jd.FLOAT,[e.R8_SNORM]:Jd.FLOAT,[e.RG8]:Jd.FLOAT,[e.RG8_SNORM]:Jd.FLOAT,[e.RGB8]:Jd.FLOAT,[e.RGB8_SNORM]:Jd.FLOAT,[e.RGB565]:Jd.FLOAT,[e.RGBA4]:Jd.FLOAT,[e.RGB5_A1]:Jd.FLOAT,[e.RGBA8]:Jd.FLOAT,[e.RGBA8_SNORM]:Jd.FLOAT,[e.RGB10_A2]:Jd.FLOAT,[e.RGB10_A2UI]:Jd.FLOAT,[e.SRGB8]:Jd.FLOAT,[e.SRGB8_ALPHA8]:Jd.FLOAT,[e.R16F]:Jd.FLOAT,[e.RG16F]:Jd.FLOAT,[e.RGB16F]:Jd.FLOAT,[e.RGBA16F]:Jd.FLOAT,[e.R32F]:Jd.FLOAT,[e.RG32F]:Jd.FLOAT,[e.RGB32F]:Jd.FLOAT,[e.RGBA32F]:Jd.FLOAT,[e.R11F_G11F_B10F]:Jd.FLOAT,[e.RGB9_E5]:Jd.FLOAT,[e.R8I]:Jd.INT,[e.R8UI]:Jd.UINT,[e.R16I]:Jd.INT,[e.R16UI]:Jd.UINT,[e.R32I]:Jd.INT,[e.R32UI]:Jd.UINT,[e.RG8I]:Jd.INT,[e.RG8UI]:Jd.UINT,[e.RG16I]:Jd.INT,[e.RG16UI]:Jd.UINT,[e.RG32I]:Jd.INT,[e.RG32UI]:Jd.UINT,[e.RGB8I]:Jd.INT,[e.RGB8UI]:Jd.UINT,[e.RGB16I]:Jd.INT,[e.RGB16UI]:Jd.UINT,[e.RGB32I]:Jd.INT,[e.RGB32UI]:Jd.UINT,[e.RGBA8I]:Jd.INT,[e.RGBA8UI]:Jd.UINT,[e.RGBA16I]:Jd.INT,[e.RGBA16UI]:Jd.UINT,[e.RGBA32I]:Jd.INT,[e.RGBA32UI]:Jd.UINT,[e.DEPTH_COMPONENT16]:Jd.FLOAT,[e.DEPTH_COMPONENT24]:Jd.FLOAT,[e.DEPTH_COMPONENT32F]:Jd.FLOAT,[e.DEPTH_STENCIL]:Jd.FLOAT,[e.DEPTH24_STENCIL8]:Jd.FLOAT,[e.DEPTH32F_STENCIL8]:Jd.FLOAT}:{[e.RGB]:Jd.FLOAT,[e.RGBA]:Jd.FLOAT,[e.ALPHA]:Jd.FLOAT,[e.LUMINANCE]:Jd.FLOAT,[e.LUMINANCE_ALPHA]:Jd.FLOAT,[e.DEPTH_STENCIL]:Jd.FLOAT},t}(e);const t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(let n=0;n<t;n++)this.boundTextures[n]=null;this.emptyTextures={};const r=new Ib(e.createTexture());e.bindTexture(e.TEXTURE_2D,r.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=r,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Ib(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let n=0;n<6;n++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let n=0;n<this.boundTextures.length;n++)this.bind(null,n)}bind(e,t=0){const{gl:r}=this;if(e=e?.castToBaseTexture(),e?.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const n=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(e.target,n.texture)),n.dirtyId!==e.dirtyId?(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),this.updateTexture(e)):n.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[t]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:t,boundTextures:r}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let e=0;e<r.length;e++)r[e]===this.unknownTexture&&this.bind(null,e)}for(let n=0;n<r.length;n++)r[n]===e&&(this.currentLocation!==n&&(t.activeTexture(t.TEXTURE0+n),this.currentLocation=n),t.bindTexture(e.target,this.emptyTextures[e.target].texture),r[n]=null)}ensureSamplerType(e){const{boundTextures:t,hasIntegerTextures:r,CONTEXT_UID:n}=this;if(r)for(let i=e-1;i>=0;--i){const e=t[i];e&&e._glTextures[n].samplerType!==Jd.FLOAT&&this.renderer.texture.unbind(e)}}initTexture(e){const t=new Ib(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t}initTextureType(e,t){t.internalFormat=this.internalFormats[e.type]?.[e.format]??e.format,t.samplerType=this.samplerTypes[t.internalFormat]??Jd.FLOAT,2===this.webGLVersion&&e.type===Qd.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type}updateTexture(e){const t=e._glTextures[this.CONTEXT_UID];if(!t)return;const r=this.renderer;if(this.initTextureType(e,t),e.resource?.upload(r,e,t))t.samplerType!==Jd.FLOAT&&(this.hasIntegerTextures=!0);else{const n=e.realWidth,i=e.realHeight,a=r.gl;(t.width!==n||t.height!==i||t.dirtyId<0)&&(t.width=n,t.height=i,a.texImage2D(e.target,0,t.internalFormat,n,i,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}destroyTexture(e,t){const{gl:r}=this;if((e=e.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(e),r.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){const t=this.managedTextures.indexOf(e);-1!==t&&zg(this.managedTextures,t,1)}}updateTextureStyle(e){const t=e._glTextures[this.CONTEXT_UID];t&&(e.mipmap!==rh.POW2&&2===this.webGLVersion||e.isPowerOfTwo?t.mipmap=e.mipmap>=1:t.mipmap=!1,2===this.webGLVersion||e.isPowerOfTwo?t.wrapMode=e.wrapMode:t.wrapMode=th.CLAMP,e.resource?.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)}setStyle(e,t){const r=this.gl;if(t.mipmap&&e.mipmap!==rh.ON_MANUAL&&r.generateMipmap(e.target),r.texParameteri(e.target,r.TEXTURE_WRAP_S,t.wrapMode),r.texParameteri(e.target,r.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===eh.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);const t=this.renderer.context.extensions.anisotropicFiltering;if(t&&e.anisotropicLevel>0&&e.scaleMode===eh.LINEAR){const n=Math.min(e.anisotropicLevel,r.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(e.target,t.TEXTURE_MAX_ANISOTROPY_EXT,n)}}else r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===eh.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(e.target,r.TEXTURE_MAG_FILTER,e.scaleMode===eh.LINEAR?r.LINEAR:r.NEAREST)}destroy(){this.renderer=null}}Tb.extension={type:Yg.RendererSystem,name:"texture"},Qg.add(Tb);class Eb{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:r}=this,n=e._glTransformFeedbacks[r]||this.createGLTransformFeedback(e);t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,n)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,t){const{gl:r,renderer:n}=this;t&&n.shader.bind(t),r.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:t,renderer:r,CONTEXT_UID:n}=this,i=t.createTransformFeedback();e._glTransformFeedbacks[n]=i,t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,i);for(let a=0;a<e.buffers.length;a++){const i=e.buffers[a];i&&(r.buffer.update(i),i._glBuffers[n].refCount++,t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,a,i._glBuffers[n].buffer||null))}return t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),i}disposeTransformFeedback(e,t){const r=e._glTransformFeedbacks[this.CONTEXT_UID],n=this.gl;e.disposeRunner.remove(this);const i=this.renderer.buffer;if(i)for(let a=0;a<e.buffers.length;a++){const r=e.buffers[a];if(!r)continue;const n=r._glBuffers[this.CONTEXT_UID];n&&(n.refCount--,0===n.refCount&&!t&&i.dispose(r,t))}r&&(t||n.deleteTransformFeedback(r),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}Eb.extension={type:Yg.RendererSystem,name:"transformFeedback"},Qg.add(Eb);class Sb{constructor(e){this.renderer=e}init(e){this.screen=new Av(0,0,e.width,e.height),this.element=e.view||dh.ADAPTER.createCanvas(),this.resolution=e.resolution||dh.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,t){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(t*this.resolution);const r=this.element.width/this.resolution,n=this.element.height/this.resolution;this.screen.width=r,this.screen.height=n,this.autoDensity&&(this.element.style.width=`${r}px`,this.element.style.height=`${n}px`),this.renderer.emit("resize",r,n),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){e&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}}Sb.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},Sb.extension={type:[Yg.RendererSystem,Yg.CanvasRendererSystem],name:"_view"},Qg.add(Sb),dh.PREFER_ENV=$d.WEBGL2,dh.STRICT_TEXTURE_CACHE=!1,dh.RENDER_OPTIONS={...w_.defaultOptions,...v_.defaultOptions,...Sb.defaultOptions,...gb.defaultOptions},Object.defineProperties(dh,{WRAP_MODE:{get:()=>cv.defaultOptions.wrapMode,set(e){sg("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),cv.defaultOptions.wrapMode=e}},SCALE_MODE:{get:()=>cv.defaultOptions.scaleMode,set(e){sg("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),cv.defaultOptions.scaleMode=e}},MIPMAP_TEXTURES:{get:()=>cv.defaultOptions.mipmap,set(e){sg("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),cv.defaultOptions.mipmap=e}},ANISOTROPIC_LEVEL:{get:()=>cv.defaultOptions.anisotropicLevel,set(e){sg("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),cv.defaultOptions.anisotropicLevel=e}},FILTER_RESOLUTION:{get:()=>(sg("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),g_.defaultResolution),set(e){g_.defaultResolution=e}},FILTER_MULTISAMPLE:{get:()=>(sg("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),g_.defaultMultisample),set(e){g_.defaultMultisample=e}},SPRITE_MAX_TEXTURES:{get:()=>m_.defaultMaxTextures,set(e){sg("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),m_.defaultMaxTextures=e}},SPRITE_BATCH_SIZE:{get:()=>m_.defaultBatchSize,set(e){sg("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),m_.defaultBatchSize=e}},CAN_UPLOAD_SAME_BUFFER:{get:()=>m_.canUploadSameBuffer,set(e){sg("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),m_.canUploadSameBuffer=e}},GC_MODE:{get:()=>xb.defaultMode,set(e){sg("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),xb.defaultMode=e}},GC_MAX_IDLE:{get:()=>xb.defaultMaxIdle,set(e){sg("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),xb.defaultMaxIdle=e}},GC_MAX_CHECK_COUNT:{get:()=>xb.defaultCheckCountMax,set(e){sg("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),xb.defaultCheckCountMax=e}},PRECISION_VERTEX:{get:()=>o_.defaultVertexPrecision,set(e){sg("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),o_.defaultVertexPrecision=e}},PRECISION_FRAGMENT:{get:()=>o_.defaultFragmentPrecision,set(e){sg("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),o_.defaultFragmentPrecision=e}}});var Ab=(e=>(e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY",e))(Ab||{});class kb{constructor(e,t=null,r=0,n=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=r,this.once=n}match(e,t=null){return this.fn===e&&this.context===t}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const Cb=class e{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new kb(null,null,1/0),this.deltaMS=1/e.targetFPMS,this.elapsedMS=1/e.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&null===this._requestId&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,r=Ab.NORMAL){return this._addListener(new kb(e,t,r))}addOnce(e,t,r=Ab.NORMAL){return this._addListener(new kb(e,t,r,!0))}_addListener(e){let t=this._head.next,r=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(r);break}r=t,t=t.next}e.previous||e.connect(r)}else e.connect(r);return this._startIfPossible(),this}remove(e,t){let r=this._head.next;for(;r;)r=r.match(e,t)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let r;if(t>this.lastTime){if(r=this.elapsedMS=t-this.lastTime,r>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){const e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*e.targetFPMS;const n=this._head;let i=n.next;for(;i;)i=i.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const r=Math.min(this.maxFPS,t),n=Math.min(Math.max(0,r)/1e3,e.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(0===e)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!e._shared){const t=e._shared=new e;t.autoStart=!0,t._protected=!0}return e._shared}static get system(){if(!e._system){const t=e._system=new e;t.autoStart=!0,t._protected=!0}return e._system}};Cb.targetFPMS=.06;let Pb=Cb;Object.defineProperties(dh,{TARGET_FPMS:{get:()=>Pb.targetFPMS,set(e){sg("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Pb.targetFPMS=e}}});class Rb{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,Ab.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Pb.shared:new Pb,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}Rb.extension=Yg.Application,Qg.add(Rb);const Mb=[];Qg.handleByList(Yg.Renderer,Mb);class Lb{constructor(e){this.renderer=e}contextChange(e){let t;if(1===this.renderer.context.webGLVersion){const r=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,r)}else{const r=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,r)}t>=lh.HIGH?this.multisample=lh.HIGH:t>=lh.MEDIUM?this.multisample=lh.MEDIUM:t>=lh.LOW?this.multisample=lh.LOW:this.multisample=lh.NONE}destroy(){}}Lb.extension={type:Yg.RendererSystem,name:"_multisample"},Qg.add(Lb);class Ob{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class Fb{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:r}=this,n=e._glBuffers[r]||this.createGLBuffer(e);t.bindBuffer(e.type,n.buffer)}unbind(e){const{gl:t}=this;t.bindBuffer(e,null)}bindBufferBase(e,t){const{gl:r,CONTEXT_UID:n}=this;if(this.boundBufferBases[t]!==e){const i=e._glBuffers[n]||this.createGLBuffer(e);this.boundBufferBases[t]=e,r.bindBufferBase(r.UNIFORM_BUFFER,t,i.buffer)}}bindBufferRange(e,t,r){const{gl:n,CONTEXT_UID:i}=this;r=r||0;const a=e._glBuffers[i]||this.createGLBuffer(e);n.bindBufferRange(n.UNIFORM_BUFFER,t||0,a.buffer,256*r,256)}update(e){const{gl:t,CONTEXT_UID:r}=this,n=e._glBuffers[r]||this.createGLBuffer(e);if(e._updateID!==n.updateID)if(n.updateID=e._updateID,t.bindBuffer(e.type,n.buffer),n.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{const r=e.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;n.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,r)}}dispose(e,t){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const r=e._glBuffers[this.CONTEXT_UID],n=this.gl;e.disposeRunner.remove(this),r&&(t||n.deleteBuffer(r.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const t=Object.keys(this.managedBuffers);for(let r=0;r<t.length;r++)this.dispose(this.managedBuffers[t[r]],e)}createGLBuffer(e){const{CONTEXT_UID:t,gl:r}=this;return e._glBuffers[t]=new Ob(r.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t]}}Fb.extension={type:Yg.RendererSystem,name:"buffer"},Qg.add(Fb);class Db{constructor(e){this.renderer=e}render(e,t){const r=this.renderer;let n,i,a,s;if(t&&(n=t.renderTexture,i=t.clear,a=t.transform,s=t.skipUpdateTransform),this.renderingToScreen=!n,r.runners.prerender.emit(),r.emit("prerender"),r.projection.transform=a,!r.context.isLost){if(n||(this.lastObjectRendered=e),!s){const t=e.enableTempParent();e.updateTransform(),e.disableTempParent(t)}r.renderTexture.bind(n),r.batch.currentRenderer.start(),(i??r.background.clearBeforeRender)&&r.renderTexture.clear(),e.render(r),r.batch.currentRenderer.flush(),n&&(t.blit&&r.framebuffer.blit(),n.baseTexture.update()),r.runners.postrender.emit(),r.projection.transform=null,r.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}Db.extension={type:Yg.RendererSystem,name:"objectRenderer"},Qg.add(Db);const Nb=class e extends bb{constructor(t){super(),this.type=Xd.WEBGL,t=Object.assign({},dh.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new u_({projectionMatrix:new kv},!0);const r={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:e.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(r),"useContextAlpha"in t&&(sg("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&"notMultiplied"!==t.useContextAlpha,t.backgroundAlpha=!1===t.useContextAlpha?1:t.backgroundAlpha),this._plugin.rendererPlugins=e.__plugins,this.options=t,this.startup.run(this.options)}static test(e){return!e?.forceCanvas&&(typeof og>"u"&&(og=function(){const e={stencil:!0,failIfMajorPerformanceCaveat:dh.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!dh.ADAPTER.getWebGLRenderingContext())return!1;const t=dh.ADAPTER.createCanvas();let r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);const n=!!r?.getContextAttributes()?.stencil;if(r){const e=r.getExtension("WEBGL_lose_context");e&&e.loseContext()}return r=null,n}catch{return!1}}()),og)}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return sg("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return sg("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return sg("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return sg("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){sg("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return sg("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){sg("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return sg("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};Nb.extension={type:Yg.Renderer,priority:1},Nb.__plugins={},Nb.__systems={};let Bb=Nb;Qg.handleByMap(Yg.RendererPlugin,Bb.__plugins),Qg.handleByMap(Yg.RendererSystem,Bb.__systems),Qg.add(Bb);class Ub extends sv{constructor(e,t){const{width:r,height:n}=t||{};super(r,n),this.items=[],this.itemDirtyIds=[];for(let i=0;i<e;i++){const e=new cv;this.items.push(e),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,t){for(let r=0;r<this.length;r++)e[r]&&(e[r].castToBaseTexture?this.addBaseTextureAt(e[r].castToBaseTexture(),r):e[r]instanceof sv?this.addResourceAt(e[r],r):this.addResourceAt(iv(e[r],t),r))}dispose(){for(let e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,t){if(!this.items[t])throw new Error(`Index ${t} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this}bind(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=e,this.items[t].on("update",e.update,e)}unbind(e){super.unbind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=null,this.items[t].off("update",e.update,e)}load(){if(this._load)return this._load;const e=this.items.map((e=>e.resource)).filter((e=>e)).map((e=>e.load()));return this._load=Promise.all(e).then((()=>{const{realWidth:e,realHeight:t}=this.items[0];return this.resize(e,t),this.update(),Promise.resolve(this)})),this._load}}const jb=class e extends Ub{constructor(t,r){const{width:n,height:i,autoLoad:a,linkBaseTexture:s}=r||{};if(t&&t.length!==e.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:n,height:i});for(let o=0;o<e.SIDES;o++)this.items[o].target=Zd.TEXTURE_CUBE_MAP_POSITIVE_X+o;this.linkBaseTexture=!1!==s,t&&this.initFromArray(t,r),!1!==a&&this.load()}bind(e){super.bind(e),e.target=Zd.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0){if(!e.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(e.resource,t)}else e.target=Zd.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(t,r,n){const i=this.itemDirtyIds;for(let a=0;a<e.SIDES;a++){const e=this.items[a];(i[a]<e.dirtyId||n.dirtyId<r.dirtyId)&&(e.valid&&e.resource?(e.resource.upload(t,e,n),i[a]=e.dirtyId):i[a]<-1&&(t.gl.texImage2D(e.target,0,n.internalFormat,r.realWidth,r.realHeight,0,r.format,n.type,null),i[a]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===e.SIDES}};jb.SIDES=6;let Gb=jb;class zb extends T_{constructor(e,t){let r,n,i;t=t||{},"string"==typeof e?(r=zb.EMPTY,n=e,i=!0):(r=e,n=null,i=!1),super(r),this.url=n,this.crossOrigin=t.crossOrigin??!0,this.alphaMode="number"==typeof t.alphaMode?t.alphaMode:null,this.ownsImageBitmap=t.ownsImageBitmap??i,this._load=null,!1!==t.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise((async(e,t)=>{if(null!==this.url)try{const t=await dh.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const r=await t.blob();if(this.destroyed)return;const n=await createImageBitmap(r,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===nh.UNPACK?"premultiply":"none"});if(this.destroyed)return void n.close();this.source=n,this.update(),e(this)}catch(NA){if(this.destroyed)return;t(NA),this.onError.emit(NA)}else e(this)}))),this._load}upload(e,t,r){return this.source instanceof ImageBitmap?("number"==typeof this.alphaMode&&(t.alphaMode=this.alphaMode),super.upload(e,t,r)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&("string"==typeof e||e instanceof ImageBitmap)}static get EMPTY(){return zb._EMPTY=zb._EMPTY??dh.ADAPTER.createCanvas(0,0),zb._EMPTY}}const Hb=class e extends T_{constructor(e,t){t=t||{},super(dh.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,!1!==t.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise((t=>{if(this._resolve=()=>{this.update(),t(this)},e.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}))),this._load}_loadSvg(){const e=new Image;T_.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{this._resolve&&(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;const t=e.width,r=e.height;if(!t||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let n=t*this.scale,i=r*this.scale;(this._overrideWidth||this._overrideHeight)&&(n=this._overrideWidth||this._overrideHeight/r*t,i=this._overrideHeight||this._overrideWidth/t*r),n=Math.round(n),i=Math.round(i);const a=this.source;a.width=n,a.height=i,a._pixiId=`canvas_${Vg()}`,a.getContext("2d").drawImage(e,0,0,t,r,0,0,n,i),this._resolve(),this._resolve=null}}static getSize(t){const r=e.SVG_SIZE.exec(t),n={};return r&&(n[r[1]]=Math.round(parseFloat(r[3])),n[r[5]]=Math.round(parseFloat(r[7]))),n}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,r){return"svg"===r||"string"==typeof t&&t.startsWith("data:image/svg+xml")||"string"==typeof t&&e.SVG_XML.test(t)}};Hb.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,Hb.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let Vb=Hb;const $b=class e extends T_{constructor(t,r){if(r=r||{},!(t instanceof HTMLVideoElement)){const n=document.createElement("video");!1!==r.autoLoad&&n.setAttribute("preload","auto"),!1!==r.playsinline&&(n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline","")),!0===r.muted&&(n.setAttribute("muted",""),n.muted=!0),!0===r.loop&&n.setAttribute("loop",""),!1!==r.autoPlay&&n.setAttribute("autoplay",""),"string"==typeof t&&(t=[t]);const i=t[0].src||t[0];T_.crossOrigin(n,i,r.crossorigin);for(let r=0;r<t.length;++r){const i=document.createElement("source");let{src:a,mime:s}=t[r];if(a=a||t[r],a.startsWith("data:"))s=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){const t=a.split("?").shift().toLowerCase(),r=t.slice(t.lastIndexOf(".")+1);s=s||e.MIME_TYPES[r]||`video/${r}`}i.src=a,s&&(i.type=s),n.appendChild(i)}t=n}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=r.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==r.autoPlay,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),!1!==r.autoLoad&&this.load()}update(e=0){if(!this.destroyed){if(this._updateFPS){const e=Pb.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise(((t,r)=>{this.valid?t(this):(this._resolve=t,this._reject=r,e.load())})),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!t&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();const e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Pb.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),null===this._videoFrameRequestCallbackHandle&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(null!==this._videoFrameRequestCallbackHandle&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Pb.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(null!==this._videoFrameRequestCallbackHandle&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Pb.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t,r){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||e.TYPES.includes(r)}};$b.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],$b.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let Xb=$b;nv.push(zb,E_,class extends T_{constructor(e){super(e)}static test(e){const{OffscreenCanvas:t}=globalThis;return!!(t&&e instanceof t)||globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}},Xb,class extends T_{constructor(e){super(e)}static test(e){return!!globalThis.VideoFrame&&e instanceof globalThis.VideoFrame}},Vb,ov,Gb,class extends Ub{constructor(e,t){const{width:r,height:n}=t||{};let i,a;Array.isArray(e)?(i=e,a=e.length):a=e,super(a,{width:r,height:n}),i&&this.initFromArray(i,t)}addBaseTextureAt(e,t){if(!e.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(e.resource,t),this}bind(e){super.bind(e),e.target=Zd.TEXTURE_2D_ARRAY}upload(e,t,r){const{length:n,itemDirtyIds:i,items:a}=this,{gl:s}=e;r.dirtyId<0&&s.texImage3D(s.TEXTURE_2D_ARRAY,0,r.internalFormat,this._width,this._height,n,0,t.format,r.type,null);for(let o=0;o<n;o++){const e=a[o];i[o]<e.dirtyId&&(i[o]=e.dirtyId,e.valid&&s.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,o,e.resource.width,e.resource.height,1,t.format,r.type,e.resource.source))}return!0}});class qb{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?Av.EMPTY:((e=e||new Av(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,t){const{a:r,b:n,c:i,d:a,tx:s,ty:o}=e,l=r*t.x+i*t.y+s,u=n*t.x+a*t.y+o;this.minX=Math.min(this.minX,l),this.maxX=Math.max(this.maxX,l),this.minY=Math.min(this.minY,u),this.maxY=Math.max(this.maxY,u)}addQuad(e){let t=this.minX,r=this.minY,n=this.maxX,i=this.maxY,a=e[0],s=e[1];t=a<t?a:t,r=s<r?s:r,n=a>n?a:n,i=s>i?s:i,a=e[2],s=e[3],t=a<t?a:t,r=s<r?s:r,n=a>n?a:n,i=s>i?s:i,a=e[4],s=e[5],t=a<t?a:t,r=s<r?s:r,n=a>n?a:n,i=s>i?s:i,a=e[6],s=e[7],t=a<t?a:t,r=s<r?s:r,n=a>n?a:n,i=s>i?s:i,this.minX=t,this.minY=r,this.maxX=n,this.maxY=i}addFrame(e,t,r,n,i){this.addFrameMatrix(e.worldTransform,t,r,n,i)}addFrameMatrix(e,t,r,n,i){const a=e.a,s=e.b,o=e.c,l=e.d,u=e.tx,c=e.ty;let d=this.minX,h=this.minY,f=this.maxX,p=this.maxY,m=a*t+o*r+u,y=s*t+l*r+c;d=m<d?m:d,h=y<h?y:h,f=m>f?m:f,p=y>p?y:p,m=a*n+o*r+u,y=s*n+l*r+c,d=m<d?m:d,h=y<h?y:h,f=m>f?m:f,p=y>p?y:p,m=a*t+o*i+u,y=s*t+l*i+c,d=m<d?m:d,h=y<h?y:h,f=m>f?m:f,p=y>p?y:p,m=a*n+o*i+u,y=s*n+l*i+c,d=m<d?m:d,h=y<h?y:h,f=m>f?m:f,p=y>p?y:p,this.minX=d,this.minY=h,this.maxX=f,this.maxY=p}addVertexData(e,t,r){let n=this.minX,i=this.minY,a=this.maxX,s=this.maxY;for(let o=t;o<r;o+=2){const t=e[o],r=e[o+1];n=t<n?t:n,i=r<i?r:i,a=t>a?t:a,s=r>s?r:s}this.minX=n,this.minY=i,this.maxX=a,this.maxY=s}addVertices(e,t,r,n){this.addVerticesMatrix(e.worldTransform,t,r,n)}addVerticesMatrix(e,t,r,n,i=0,a=i){const s=e.a,o=e.b,l=e.c,u=e.d,c=e.tx,d=e.ty;let h=this.minX,f=this.minY,p=this.maxX,m=this.maxY;for(let y=r;y<n;y+=2){const e=t[y],r=t[y+1],n=s*e+l*r+c,g=u*r+o*e+d;h=Math.min(h,n-i),p=Math.max(p,n+i),f=Math.min(f,g-a),m=Math.max(m,g+a)}this.minX=h,this.minY=f,this.maxX=p,this.maxY=m}addBounds(e){const t=this.minX,r=this.minY,n=this.maxX,i=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>n?e.maxX:n,this.maxY=e.maxY>i?e.maxY:i}addBoundsMask(e,t){const r=e.minX>t.minX?e.minX:t.minX,n=e.minY>t.minY?e.minY:t.minY,i=e.maxX<t.maxX?e.maxX:t.maxX,a=e.maxY<t.maxY?e.maxY:t.maxY;if(r<=i&&n<=a){const e=this.minX,t=this.minY,s=this.maxX,o=this.maxY;this.minX=r<e?r:e,this.minY=n<t?n:t,this.maxX=i>s?i:s,this.maxY=a>o?a:o}}addBoundsMatrix(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,t){const r=e.minX>t.x?e.minX:t.x,n=e.minY>t.y?e.minY:t.y,i=e.maxX<t.x+t.width?e.maxX:t.x+t.width,a=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(r<=i&&n<=a){const e=this.minX,t=this.minY,s=this.maxX,o=this.maxY;this.minX=r<e?r:e,this.minY=n<t?n:t,this.maxX=i>s?i:s,this.maxY=a>o?a:o}}pad(e=0,t=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)}addFramePad(e,t,r,n,i,a){e-=i,t-=a,r+=i,n+=a,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>n?this.maxY:n}}class Wb extends Rh{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Uv,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new qb,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const t=Object.keys(e);for(let r=0;r<t.length;++r){const n=t[r];Object.defineProperty(Wb.prototype,n,Object.getOwnPropertyDescriptor(e,n))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new Av),t=this._boundsRect),this._bounds.getRectangle(t)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new Av),e=this._localBoundsRect),this._localBounds||(this._localBounds=new qb);const t=this.transform,r=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=r?.worldAlpha??1,this.transform=this._tempDisplayObjectParent.transform;const n=this._bounds,i=this._boundsID;this._bounds=this._localBounds;const a=this.getBounds(!1,e);return this.parent=r,this.transform=t,this._bounds=n,this._bounds.updateID+=this._boundsID-i,a}toGlobal(e,t,r=!1){return r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)}toLocal(e,t,r,n){return t&&(e=t.toGlobal(e,r,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,r)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){this.parent?.removeChild(this)}setTransform(e=0,t=0,r=1,n=1,i=0,a=0,s=0,o=0,l=0){return this.position.x=e,this.position.y=t,this.scale.x=r||1,this.scale.y=n||1,this.rotation=i,this.skew.x=a,this.skew.y=s,this.pivot.x=o,this.pivot.y=l,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new Yb),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*xv}set angle(e){this.transform.rotation=e*Iv}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount--,0===e._maskRefCount&&(e.renderable=!0,e.isMask=!1))}if(this._mask=e,this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(0===e._maskRefCount&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++)}}}}class Yb extends Wb{constructor(){super(...arguments),this.sortDirty=null}}Wb.prototype.displayObjectUpdateTransform=Wb.prototype.updateTransform;const Kb=new kv;function Zb(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}const Qb=class e extends Wb{constructor(){super(),this.children=[],this.sortableChildren=e.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{const t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;const r=this.getChildIndex(e),n=this.getChildIndex(t);this.children[r]=t,this.children[n]=e,this.onChildrenChange(r<n?r:n)}getChildIndex(e){const t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const r=this.getChildIndex(e);zg(this.children,r,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{const t=e[0],r=this.children.indexOf(t);if(-1===r)return null;t.parent=null,t.transform._parentID=-1,zg(this.children,r,1),this._boundsID++,this.onChildrenChange(r),t.emit("removed",this),this.emit("childRemoved",t,this,r)}return e[0]}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,zg(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){const r=e,n=t-r;let i;if(n>0&&n<=t){i=this.children.splice(r,n);for(let e=0;e<i.length;++e)i[e].parent=null,i[e].transform&&(i[e].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let e=0;e<i.length;++e)i[e].emit("removed",this),this.emit("childRemoved",i[e],this,e);return i}if(0===n&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,r=this.children.length;t<r;++t){const r=this.children[t];r._lastSortedIndex=t,!e&&0!==r.zIndex&&(e=!0)}e&&this.children.length>1&&this.children.sort(Zb),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){const t=this.children[e];t.visible&&t.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const t=this.children[e];if(t.visible&&t.renderable)if(t.calculateBounds(),t._mask){const e=t._mask.isMaskData?t._mask.maskObject:t._mask;e?(e.calculateBounds(),this._bounds.addBoundsMask(t._bounds,e._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){const r=super.getLocalBounds(e);if(!t)for(let n=0,i=this.children.length;n<i;++n){const e=this.children[n];e.visible&&e.updateTransform()}return r}_calculateBounds(){}_renderWithCulling(t){const r=t.renderTexture.sourceFrame;if(!(r.width>0&&r.height>0))return;let n,i;this.cullArea?(n=this.cullArea,i=this.worldTransform):this._render!==e.prototype._render&&(n=this.getBounds(!0));const a=t.projection.transform;if(a&&(i?(i=Kb.copyFrom(i),i.prepend(a)):i=a),n&&r.intersects(n,i))this._render(t);else if(this.cullArea)return;for(let e=0,s=this.children.length;e<s;++e){const r=this.children[e],n=r.cullable;r.cullable=n||!this.cullArea,r.render(t),r.cullable=n}}render(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters?.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let t=0,r=this.children.length;t<r;++t)this.children[t].render(e)}}renderAdvanced(e){const t=this.filters,r=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let e=0;e<t.length;e++)t[e].enabled&&this._enabledFilters.push(t[e])}const n=t&&this._enabledFilters?.length||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==oh.NONE));if(n&&e.batch.flush(),t&&this._enabledFilters?.length&&e.filter.push(this,this._enabledFilters),r&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let t=0,r=this.children.length;t<r;++t)this.children[t].render(e)}n&&e.batch.flush(),r&&e.mask.pop(this),t&&this._enabledFilters?.length&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const t="boolean"==typeof e?e:e?.children,r=this.removeChildren(0,this.children.length);if(t)for(let n=0;n<r.length;++n)r[n].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e}};Qb.defaultSortableChildren=!1;let Jb=Qb;Jb.prototype.containerUpdateTransform=Jb.prototype.updateTransform,Object.defineProperties(dh,{SORTABLE_CHILDREN:{get:()=>Jb.defaultSortableChildren,set(e){sg("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Jb.defaultSortableChildren=e}}});const ew=class e{constructor(t){this.stage=new Jb,t=Object.assign({forceCanvas:!1},t),this.renderer=function(e){for(const t of Mb)if(t.test(e))return new t(e);throw new Error("Unable to auto-detect a suitable renderer.")}(t),e._plugins.forEach((e=>{e.init.call(this,t)}))}render(){this.renderer.render(this.stage)}get view(){return this.renderer?.view}get screen(){return this.renderer?.screen}destroy(t,r){const n=e._plugins.slice(0);n.reverse(),n.forEach((e=>{e.destroy.call(this)})),this.stage.destroy(r),this.stage=null,this.renderer.destroy(t),this.renderer=null}};ew._plugins=[];let tw=ew;Qg.handleByList(Yg.Application,tw._plugins);class rw{static init(e){Object.defineProperty(this,"resizeTo",{set(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame((()=>this.resize())))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;let e,t;if(this.cancelResize(),this._resizeTo===globalThis.window)e=globalThis.innerWidth,t=globalThis.innerHeight;else{const{clientWidth:r,clientHeight:n}=this._resizeTo;e=r,t=n}this.renderer.resize(e,t),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}rw.extension=Yg.Application,Qg.add(rw);class nw extends g_{constructor(){super("attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",{m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1}),this.alpha=1}_loadMatrix(e,t=!1){let r=e;t&&(this._multiply(r,this.uniforms.m,e),r=this._colorMatrix(r)),this.uniforms.m=r}_multiply(e,t,r){return e[0]=t[0]*r[0]+t[1]*r[5]+t[2]*r[10]+t[3]*r[15],e[1]=t[0]*r[1]+t[1]*r[6]+t[2]*r[11]+t[3]*r[16],e[2]=t[0]*r[2]+t[1]*r[7]+t[2]*r[12]+t[3]*r[17],e[3]=t[0]*r[3]+t[1]*r[8]+t[2]*r[13]+t[3]*r[18],e[4]=t[0]*r[4]+t[1]*r[9]+t[2]*r[14]+t[3]*r[19]+t[4],e[5]=t[5]*r[0]+t[6]*r[5]+t[7]*r[10]+t[8]*r[15],e[6]=t[5]*r[1]+t[6]*r[6]+t[7]*r[11]+t[8]*r[16],e[7]=t[5]*r[2]+t[6]*r[7]+t[7]*r[12]+t[8]*r[17],e[8]=t[5]*r[3]+t[6]*r[8]+t[7]*r[13]+t[8]*r[18],e[9]=t[5]*r[4]+t[6]*r[9]+t[7]*r[14]+t[8]*r[19]+t[9],e[10]=t[10]*r[0]+t[11]*r[5]+t[12]*r[10]+t[13]*r[15],e[11]=t[10]*r[1]+t[11]*r[6]+t[12]*r[11]+t[13]*r[16],e[12]=t[10]*r[2]+t[11]*r[7]+t[12]*r[12]+t[13]*r[17],e[13]=t[10]*r[3]+t[11]*r[8]+t[12]*r[13]+t[13]*r[18],e[14]=t[10]*r[4]+t[11]*r[9]+t[12]*r[14]+t[13]*r[19]+t[14],e[15]=t[15]*r[0]+t[16]*r[5]+t[17]*r[10]+t[18]*r[15],e[16]=t[15]*r[1]+t[16]*r[6]+t[17]*r[11]+t[18]*r[16],e[17]=t[15]*r[2]+t[16]*r[7]+t[17]*r[12]+t[18]*r[17],e[18]=t[15]*r[3]+t[16]*r[8]+t[17]*r[13]+t[18]*r[18],e[19]=t[15]*r[4]+t[16]*r[9]+t[17]*r[14]+t[18]*r[19]+t[19],e}_colorMatrix(e){const t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t}brightness(e,t){const r=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)}tint(e,t){const[r,n,i]=Dg.shared.setValue(e).toArray(),a=[r,0,0,0,0,0,n,0,0,0,0,0,i,0,0,0,0,0,1,0];this._loadMatrix(a,t)}greyscale(e,t){const r=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)}blackAndWhite(e){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e)}hue(e,t){e=(e||0)/180*Math.PI;const r=Math.cos(e),n=Math.sin(e),i=1/3,a=(0,Math.sqrt)(i),s=[r+(1-r)*i,i*(1-r)-a*n,i*(1-r)+a*n,0,0,i*(1-r)+a*n,r+i*(1-r),i*(1-r)-a*n,0,0,i*(1-r)-a*n,i*(1-r)+a*n,r+i*(1-r),0,0,0,0,0,1,0];this._loadMatrix(s,t)}contrast(e,t){const r=(e||0)+1,n=-.5*(r-1),i=[r,0,0,0,n,0,r,0,0,n,0,0,r,0,n,0,0,0,1,0];this._loadMatrix(i,t)}saturate(e=0,t){const r=2*e/3+1,n=-.5*(r-1),i=[r,n,n,0,0,n,r,n,0,0,n,n,r,0,0,0,0,0,1,0];this._loadMatrix(i,t)}desaturate(){this.saturate(-1)}negative(e){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],e)}sepia(e){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e)}technicolor(e){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)}polaroid(e){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e)}toBGR(e){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)}kodachrome(e){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)}browni(e){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)}vintage(e){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)}colorTone(e,t,r,n,i){e=e||.2,t=t||.15,r=r||16770432,n=n||3375104;const a=Dg.shared,[s,o,l]=a.setValue(r).toArray(),[u,c,d]=a.setValue(n).toArray(),h=[.3,.59,.11,0,0,s,o,l,e,0,u,c,d,t,0,s-u,o-c,l-d,0,0];this._loadMatrix(h,i)}night(e,t){const r=[-2*(e=e||.1),-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0];this._loadMatrix(r,t)}predator(e,t){const r=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(r,t)}lsd(e){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e)}reset(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}nw.prototype.grayscale=nw.prototype.greyscale;const iw=class extends g_{constructor(e){super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","uniform float radius;\nuniform float strength;\nuniform vec2 center;\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\n\nvoid main()\n{\n    vec2 coord = vTextureCoord * filterArea.xy;\n    coord -= center * dimensions.xy;\n    float distance = length(coord);\n    if (distance < radius) {\n        float percent = distance / radius;\n        if (strength > 0.0) {\n            coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);\n        } else {\n            coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);\n        }\n    }\n    coord += center * dimensions.xy;\n    coord /= filterArea.xy;\n    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    vec4 color = texture2D(uSampler, clampedCoord);\n    if (coord != clampedCoord) {\n        color *= max(0.0, 1.0 - length(coord - clampedCoord));\n    }\n\n    gl_FragColor = color;\n}\n"),this.uniforms.dimensions=new Float32Array(2),Object.assign(this,iw.defaults,e)}apply(e,t,r,n){const{width:i,height:a}=t.filterFrame;this.uniforms.dimensions[0]=i,this.uniforms.dimensions[1]=a,e.applyFilter(this,t,r,n)}get radius(){return this.uniforms.radius}set radius(e){this.uniforms.radius=e}get strength(){return this.uniforms.strength}set strength(e){this.uniforms.strength=e}get center(){return this.uniforms.center}set center(e){this.uniforms.center=e}};function aw(){return aw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},aw.apply(null,arguments)}iw.defaults={center:[.5,.5],radius:100,strength:1};var sw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ow="object"===("undefined"==typeof window?"undefined":sw(window))&&"object"===("undefined"==typeof document?"undefined":sw(document))&&9===document.nodeType;function lw(e){return(lw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uw(e){var t=function(e,t){if("object"!=lw(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=lw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==lw(t)?t:t+""}function cw(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,uw(n.key),n)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function dw(e,t){return(dw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function hw(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,dw(e,t)}function fw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var pw={}.constructor;function mw(e){if(null==e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map(mw);if(e.constructor!==pw)return e;var t={};for(var r in e)t[r]=mw(e[r]);return t}function yw(e,t,r){void 0===e&&(e="unnamed");var n=r.jss,i=mw(t),a=n.plugins.onCreateRule(e,i,r);return a||(e[0],null)}var gw=function(e,t){for(var r="",n=0;n<e.length&&"!important"!==e[n];n++)r&&(r+=t),r+=e[n];return r},vw=function(e){if(!Array.isArray(e))return e;var t="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&"!important"!==e[r];r++)t&&(t+=", "),t+=gw(e[r]," ");else t=gw(e,", ");return"!important"===e[e.length-1]&&(t+=" !important"),t};function _w(e){return e&&!1===e.format?{linebreak:"",space:""}:{linebreak:"\n",space:" "}}function bw(e,t){for(var r="",n=0;n<t;n++)r+="  ";return r+e}function ww(e,t,r){void 0===r&&(r={});var n="";if(!t)return n;var i=r.indent,a=void 0===i?0:i,s=t.fallbacks;!1===r.format&&(a=-1/0);var o=_w(r),l=o.linebreak,u=o.space;if(e&&a++,s)if(Array.isArray(s))for(var c=0;c<s.length;c++){var d=s[c];for(var h in d){var f=d[h];null!=f&&(n&&(n+=l),n+=bw(h+":"+u+vw(f)+";",a))}}else for(var p in s){var m=s[p];null!=m&&(n&&(n+=l),n+=bw(p+":"+u+vw(m)+";",a))}for(var y in t){var g=t[y];null!=g&&"fallbacks"!==y&&(n&&(n+=l),n+=bw(y+":"+u+vw(g)+";",a))}return(n||r.allowEmpty)&&e?(n&&(n=""+l+n+l),bw(""+e+u+"{"+n,--a)+bw("}",a)):n}var xw=/([[\].#*$><+~=|^:(),"'`\s])/g,Iw="undefined"!=typeof CSS&&CSS.escape,Tw=function(e){return Iw?Iw(e):e.replace(xw,"\\$1")},Ew=function(){function e(e,t,r){this.type="style",this.isProcessed=!1;var n=r.sheet,i=r.Renderer;this.key=e,this.options=r,this.style=t,n?this.renderer=n.renderer:i&&(this.renderer=new i)}return e.prototype.prop=function(e,t,r){if(void 0===t)return this.style[e];var n=!!r&&r.force;if(!n&&this.style[e]===t)return this;var i=t;r&&!1===r.process||(i=this.options.jss.plugins.onChangeValue(t,e,this));var a=null==i||!1===i,s=e in this.style;if(a&&!s&&!n)return this;var o=a&&s;if(o?delete this.style[e]:this.style[e]=i,this.renderable&&this.renderer)return o?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,i),this;var l=this.options.sheet;return l&&l.attached,this},e}(),Sw=function(e){function t(t,r,n){var i;i=e.call(this,t,r,n)||this;var a=n.selector,s=n.scoped,o=n.sheet,l=n.generateId;return a?i.selectorText=a:!1!==s&&(i.id=l(fw(fw(i)),o),i.selectorText="."+Tw(i.id)),i}hw(t,e);var r=t.prototype;return r.applyTo=function(e){var t=this.renderer;if(t){var r=this.toJSON();for(var n in r)t.setProperty(e,n,r[n])}return this},r.toJSON=function(){var e={};for(var t in this.style){var r=this.style[t];"object"!=typeof r?e[t]=r:Array.isArray(r)&&(e[t]=vw(r))}return e},r.toString=function(e){var t=this.options.sheet,r=!!t&&t.options.link?aw({},e,{allowEmpty:!0}):e;return ww(this.selectorText,this.style,r)},cw(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,r=this.renderable;if(r&&t)t.setSelector(r,e)||t.replaceRule(r,this)}},get:function(){return this.selectorText}}]),t}(Ew),Aw={onCreateRule:function(e,t,r){return"@"===e[0]||r.parent&&"keyframes"===r.parent.type?null:new Sw(e,t,r)}},kw={indent:1,children:!0},Cw=/@([\w-]+)/,Pw=function(){function e(e,t,r){this.type="conditional",this.isProcessed=!1,this.key=e;var n=e.match(Cw);for(var i in this.at=n?n[1]:"unknown",this.query=r.name||"@"+this.at,this.options=r,this.rules=new ex(aw({},r,{parent:this})),t)this.rules.add(i,t[i]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,r){var n=this.rules.add(e,t,r);return n?(this.options.jss.plugins.onProcessRule(n),n):null},t.replaceRule=function(e,t,r){var n=this.rules.replace(e,t,r);return n&&this.options.jss.plugins.onProcessRule(n),n},t.toString=function(e){void 0===e&&(e=kw);var t=_w(e).linebreak;if(null==e.indent&&(e.indent=kw.indent),null==e.children&&(e.children=kw.children),!1===e.children)return this.query+" {}";var r=this.rules.toString(e);return r?this.query+" {"+t+r+t+"}":""},e}(),Rw=/@container|@media|@supports\s+/,Mw={onCreateRule:function(e,t,r){return Rw.test(e)?new Pw(e,t,r):null}},Lw={indent:1,children:!0},Ow=/@keyframes\s+([\w-]+)/,Fw=function(){function e(e,t,r){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var n=e.match(Ow);n&&n[1]?this.name=n[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=r;var i=r.scoped,a=r.sheet,s=r.generateId;for(var o in this.id=!1===i?this.name:Tw(s(this,a)),this.rules=new ex(aw({},r,{parent:this})),t)this.rules.add(o,t[o],aw({},r,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){void 0===e&&(e=Lw);var t=_w(e).linebreak;if(null==e.indent&&(e.indent=Lw.indent),null==e.children&&(e.children=Lw.children),!1===e.children)return this.at+" "+this.id+" {}";var r=this.rules.toString(e);return r&&(r=""+t+r+t),this.at+" "+this.id+" {"+r+"}"},e}(),Dw=/@keyframes\s+/,Nw=/\$([\w-]+)/g,Bw=function(e,t){return"string"==typeof e?e.replace(Nw,(function(e,r){return r in t?t[r]:e})):e},Uw=function(e,t,r){var n=e[t],i=Bw(n,r);i!==n&&(e[t]=i)},jw={onCreateRule:function(e,t,r){return"string"==typeof e&&Dw.test(e)?new Fw(e,t,r):null},onProcessStyle:function(e,t,r){return"style"===t.type&&r?("animation-name"in e&&Uw(e,"animation-name",r.keyframes),"animation"in e&&Uw(e,"animation",r.keyframes),e):e},onChangeValue:function(e,t,r){var n=r.options.sheet;if(!n)return e;switch(t){case"animation":case"animation-name":return Bw(e,n.keyframes);default:return e}}},Gw=function(e){function t(){return e.apply(this,arguments)||this}return hw(t,e),t.prototype.toString=function(e){var t=this.options.sheet,r=!!t&&t.options.link?aw({},e,{allowEmpty:!0}):e;return ww(this.key,this.style,r)},t}(Ew),zw={onCreateRule:function(e,t,r){return r.parent&&"keyframes"===r.parent.type?new Gw(e,t,r):null}},Hw=function(){function e(e,t,r){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=e,this.style=t,this.options=r}return e.prototype.toString=function(e){var t=_w(e).linebreak;if(Array.isArray(this.style)){for(var r="",n=0;n<this.style.length;n++)r+=ww(this.at,this.style[n]),this.style[n+1]&&(r+=t);return r}return ww(this.at,this.style,e)},e}(),Vw=/@font-face/,$w={onCreateRule:function(e,t,r){return Vw.test(e)?new Hw(e,t,r):null}},Xw=function(){function e(e,t,r){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=e,this.style=t,this.options=r}return e.prototype.toString=function(e){return ww(this.key,this.style,e)},e}(),qw={onCreateRule:function(e,t,r){return"@viewport"===e||"@-ms-viewport"===e?new Xw(e,t,r):null}},Ww=function(){function e(e,t,r){this.type="simple",this.isProcessed=!1,this.key=e,this.value=t,this.options=r}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",r=0;r<this.value.length;r++)t+=this.key+" "+this.value[r]+";",this.value[r+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),Yw={"@charset":!0,"@import":!0,"@namespace":!0},Kw={onCreateRule:function(e,t,r){return e in Yw?new Ww(e,t,r):null}},Zw=[Aw,Mw,jw,zw,$w,qw,Kw],Qw={process:!0},Jw={force:!0,process:!0},ex=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,r){var n=this.options,i=n.parent,a=n.sheet,s=n.jss,o=n.Renderer,l=n.generateId,u=n.scoped,c=aw({classes:this.classes,parent:i,sheet:a,jss:s,Renderer:o,generateId:l,scoped:u,name:e,keyframes:this.keyframes,selector:void 0},r),d=e;e in this.raw&&(d=e+"-d"+this.counter++),this.raw[d]=t,d in this.classes&&(c.selector="."+Tw(this.classes[d]));var h=yw(d,t,c);if(!h)return null;this.register(h);var f=void 0===c.index?this.index.length:c.index;return this.index.splice(f,0,h),h},t.replace=function(e,t,r){var n=this.get(e),i=this.index.indexOf(n);n&&this.remove(n);var a=r;return-1!==i&&(a=aw({},r,{index:i})),this.add(e,t,a)},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof Sw?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof Fw&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof Sw?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof Fw&&delete this.keyframes[e.name]},t.update=function(){var e,t,r;if("string"==typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],r=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.get(e),t,r);else for(var n=0;n<this.index.length;n++)this.updateOne(this.index[n],t,r)},t.updateOne=function(t,r,n){void 0===n&&(n=Qw);var i=this.options,a=i.jss.plugins,s=i.sheet;if(t.rules instanceof e)t.rules.update(r,n);else{var o=t.style;if(a.onUpdate(r,t,s,n),n.process&&o&&o!==t.style){for(var l in a.onProcessStyle(t.style,t,s),t.style){var u=t.style[l];u!==o[l]&&t.prop(l,u,Jw)}for(var c in o){var d=t.style[c],h=o[c];null==d&&d!==h&&t.prop(c,null,Jw)}}}},t.toString=function(e){for(var t="",r=this.options.sheet,n=!!r&&r.options.link,i=_w(e).linebreak,a=0;a<this.index.length;a++){var s=this.index[a].toString(e);(s||n)&&(t&&(t+=i),t+=s)}return t},e}(),tx=function(){function e(e,t){for(var r in this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=aw({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new ex(this.options),e)this.rules.add(r,e[r]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(e,t,r){var n=this.queue;this.attached&&!n&&(this.queue=[]);var i=this.rules.add(e,t,r);return i?(this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(n?n.push(i):(this.insertRule(i),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),i):i:(this.deployed=!1,i)):null},t.replaceRule=function(e,t,r){var n=this.rules.get(e);if(!n)return this.addRule(e,t,r);var i=this.rules.replace(e,t,r);return i&&this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(this.renderer&&(i?n.renderable&&this.renderer.replaceRule(n.renderable,i):this.renderer.deleteRule(n)),i):i:(this.deployed=!1,i)},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var r=[];for(var n in e){var i=this.addRule(n,e[n],t);i&&r.push(i)}return r},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t="object"==typeof e?e:this.rules.get(e);return!(!t||this.attached&&!t.renderable)&&(this.rules.remove(t),!(this.attached&&t.renderable&&this.renderer)||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.updateOne=function(e,t,r){return this.rules.updateOne(e,t,r),this},t.toString=function(e){return this.rules.toString(e)},e}(),rx=function(){function e(){this.plugins={internal:[],external:[]},this.registry={}}var t=e.prototype;return t.onCreateRule=function(e,t,r){for(var n=0;n<this.registry.onCreateRule.length;n++){var i=this.registry.onCreateRule[n](e,t,r);if(i)return i}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,r=0;r<this.registry.onProcessRule.length;r++)this.registry.onProcessRule[r](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,r){for(var n=0;n<this.registry.onProcessStyle.length;n++)t.style=this.registry.onProcessStyle[n](t.style,t,r)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,r,n){for(var i=0;i<this.registry.onUpdate.length;i++)this.registry.onUpdate[i](e,t,r,n)},t.onChangeValue=function(e,t,r){for(var n=e,i=0;i<this.registry.onChangeValue.length;i++)n=this.registry.onChangeValue[i](n,t,r);return n},t.use=function(e,t){void 0===t&&(t={queue:"external"});var r=this.plugins[t.queue];-1===r.indexOf(e)&&(r.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(e,t){for(var r in t)r in e&&e[r].push(t[r]);return e}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),nx=function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,r=e.options.index;if(-1===t.indexOf(e))if(0===t.length||r>=this.index)t.push(e);else for(var n=0;n<t.length;n++)if(t[n].options.index>r)return void t.splice(n,0,e)},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,r=t.attached,n=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(t,["attached"]),i=_w(n).linebreak,a="",s=0;s<this.registry.length;s++){var o=this.registry[s];null!=r&&o.attached!==r||(a&&(a+=i),a+=o.toString(n))}return a},cw(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}(),ix=new nx,ax="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window&&window.Math===Math?window:"undefined"!=typeof self&&self.Math===Math?self:Function("return this")(),sx="2f1acc6c3a606b082e5eef5e54414ffb";null==ax[sx]&&(ax[sx]=0);var ox=ax[sx]++,lx=function(e){void 0===e&&(e={});var t=0;return function(r,n){t+=1;var i="",a="";return n&&(n.options.classNamePrefix&&(a=n.options.classNamePrefix),null!=n.options.jss.id&&(i=String(n.options.jss.id))),e.minify?""+(a||"c")+ox+i+t:a+r.key+"-"+ox+(i?"-"+i:"")+"-"+t}},ux=function(e){var t;return function(){return t||(t=e()),t}},cx=function(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch(r){return""}},dx=function(e,t,r){try{var n=r;if(Array.isArray(r)&&(n=vw(r)),e.attributeStyleMap)e.attributeStyleMap.set(t,n);else{var i=n?n.indexOf("!important"):-1,a=i>-1?n.substr(0,i-1):n;e.style.setProperty(t,a,i>-1?"important":"")}}catch(s){return!1}return!0},hx=function(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(r){}},fx=function(e,t){return e.selectorText=t,e.selectorText===t},px=ux((function(){return document.querySelector("head")}));function mx(e){var t=ix.registry;if(t.length>0){var r=function(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(n.attached&&n.options.index>t.index&&n.options.insertionPoint===t.insertionPoint)return n}return null}(t,e);if(r&&r.renderer)return{parent:r.renderer.element.parentNode,node:r.renderer.element};if(r=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e[r];if(n.attached&&n.options.insertionPoint===t.insertionPoint)return n}return null}(t,e),r&&r.renderer)return{parent:r.renderer.element.parentNode,node:r.renderer.element.nextSibling}}var n=e.insertionPoint;if(n&&"string"==typeof n){var i=function(e){for(var t=px(),r=0;r<t.childNodes.length;r++){var n=t.childNodes[r];if(8===n.nodeType&&n.nodeValue.trim()===e)return n}return null}(n);if(i)return{parent:i.parentNode,node:i.nextSibling}}return!1}var yx=ux((function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null})),gx=function(e,t,r){try{"insertRule"in e?e.insertRule(t,r):"appendRule"in e&&e.appendRule(t)}catch(n){return!1}return e.cssRules[r]},vx=function(e,t){var r=e.cssRules.length;return void 0===t||t>r?r:t},_x=function(){function e(e){this.getPropertyValue=cx,this.setProperty=dx,this.removeProperty=hx,this.setSelector=fx,this.hasInsertedRules=!1,this.cssRules=[],e&&ix.add(e),this.sheet=e;var t,r=this.sheet?this.sheet.options:{},n=r.media,i=r.meta,a=r.element;this.element=a||((t=document.createElement("style")).textContent="\n",t),this.element.setAttribute("data-jss",""),n&&this.element.setAttribute("media",n),i&&this.element.setAttribute("data-meta",i);var s=yx();s&&this.element.setAttribute("nonce",s)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var r=t.insertionPoint,n=mx(t);if(!1!==n&&n.parent)n.parent.insertBefore(e,n.node);else if(r&&"number"==typeof r.nodeType){var i=r,a=i.parentNode;a&&a.insertBefore(e,i.nextSibling)}else px().appendChild(e)}(this.element,this.sheet.options);var e=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){if(this.sheet){var e=this.element.parentNode;e&&e.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},t.deploy=function(){var e=this.sheet;e&&(e.options.link?this.insertRules(e.rules):this.element.textContent="\n"+e.toString()+"\n")},t.insertRules=function(e,t){for(var r=0;r<e.index.length;r++)this.insertRule(e.index[r],r,t)},t.insertRule=function(e,t,r){if(void 0===r&&(r=this.element.sheet),e.rules){var n=e,i=r;if("conditional"===e.type||"keyframes"===e.type){var a=vx(r,t);if(!1===(i=gx(r,n.toString({children:!1}),a)))return!1;this.refCssRule(e,a,i)}return this.insertRules(n.rules,i),i}var s=e.toString();if(!s)return!1;var o=vx(r,t),l=gx(r,s,o);return!1!==l&&(this.hasInsertedRules=!0,this.refCssRule(e,o,l),l)},t.refCssRule=function(e,t,r){e.renderable=r,e.options.parent instanceof tx&&this.cssRules.splice(t,0,r)},t.deleteRule=function(e){var t=this.element.sheet,r=this.indexOf(e);return-1!==r&&(t.deleteRule(r),this.cssRules.splice(r,1),!0)},t.indexOf=function(e){return this.cssRules.indexOf(e)},t.replaceRule=function(e,t){var r=this.indexOf(e);return-1!==r&&(this.element.sheet.deleteRule(r),this.cssRules.splice(r,1),this.insertRule(t,r))},t.getRules=function(){return this.element.sheet.cssRules},e}(),bx=0,wx=function(){function e(e){this.id=bx++,this.version="10.10.0",this.plugins=new rx,this.options={id:{minify:!1},createGenerateId:lx,Renderer:ow?_x:null,plugins:[]},this.generateId=lx({minify:!1});for(var t=0;t<Zw.length;t++)this.plugins.use(Zw[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=aw({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var r=t.index;"number"!=typeof r&&(r=0===ix.index?0:ix.index+1);var n=new tx(e,aw({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:r}));return this.plugins.onProcessSheet(n),n},t.removeStyleSheet=function(e){return e.detach(),ix.remove(e),this},t.createRule=function(e,t,r){if(void 0===t&&(t={}),void 0===r&&(r={}),"object"==typeof e)return this.createRule(void 0,e,t);var n=aw({},r,{name:e,jss:this,Renderer:this.options.Renderer});n.generateId||(n.generateId=this.generateId),n.classes||(n.classes={}),n.keyframes||(n.keyframes={});var i=yw(e,t,n);return i&&this.plugins.onProcessRule(i),i},t.use=function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.forEach((function(t){e.plugins.use(t)})),this},e}(),xx=function(e){return new wx(e)},Ix="object"==typeof CSS&&null!=CSS&&"number"in CSS;
/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */
xx();var Tx,Ex=Date.now(),Sx="fnValues"+Ex,Ax="fnStyle"+ ++Ex;Tx="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")();var kx,Cx,Px=("function"==typeof(Cx=Tx.Symbol)?Cx.observable?kx=Cx.observable:(kx=Cx("observable"),Cx.observable=kx):kx="@@observable",kx),Rx=function(e){return e&&e[Px]&&e===e[Px]()},Mx=/;\n/,Lx=function(e){"string"==typeof e.style&&(e.style=function(e){for(var t={},r=e.split(Mx),n=0;n<r.length;n++){var i=(r[n]||"").trim();if(i){var a=i.indexOf(":");if(-1!==a){var s=i.substr(0,a).trim(),o=i.substr(a+1).trim();t[s]=o}}}return t}(e.style))};var Ox="@global",Fx="@global ",Dx=function(){function e(e,t,r){for(var n in this.type="global",this.at=Ox,this.isProcessed=!1,this.key=e,this.options=r,this.rules=new ex(aw({},r,{parent:this})),t)this.rules.add(n,t[n]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.addRule=function(e,t,r){var n=this.rules.add(e,t,r);return n&&this.options.jss.plugins.onProcessRule(n),n},t.replaceRule=function(e,t,r){var n=this.rules.replace(e,t,r);return n&&this.options.jss.plugins.onProcessRule(n),n},t.indexOf=function(e){return this.rules.indexOf(e)},t.toString=function(e){return this.rules.toString(e)},e}(),Nx=function(){function e(e,t,r){this.type="global",this.at=Ox,this.isProcessed=!1,this.key=e,this.options=r;var n=e.substr(8);this.rule=r.jss.createRule(n,t,aw({},r,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),Bx=/\s*,\s*/g;function Ux(e,t){for(var r=e.split(Bx),n="",i=0;i<r.length;i++)n+=t+" "+r[i].trim(),r[i+1]&&(n+=", ");return n}function jx(){return{onCreateRule:function(e,t,r){if(!e)return null;if(e===Ox)return new Dx(e,t,r);if("@"===e[0]&&e.substr(0,8)===Fx)return new Nx(e,t,r);var n=r.parent;return n&&("global"===n.type||n.options.parent&&"global"===n.options.parent.type)&&(r.scoped=!1),r.selector||!1!==r.scoped||(r.selector=e),null},onProcessRule:function(e,t){"style"===e.type&&t&&(function(e,t){var r=e.options,n=e.style,i=n?n[Ox]:null;if(i){for(var a in i)t.addRule(a,i[a],aw({},r,{selector:Ux(a,e.selector)}));delete n[Ox]}}(e,t),function(e,t){var r=e.options,n=e.style;for(var i in n)if("@"===i[0]&&i.substr(0,7)===Ox){var a=Ux(i.substr(7),e.selector);t.addRule(a,n[i],aw({},r,{selector:a})),delete n[i]}}(e,t))}}}var Gx=function(e){return e&&"object"==typeof e&&!Array.isArray(e)},zx="extendCurrValue"+Date.now();function Hx(e,t,r,n){return void 0===n&&(n={}),function(e,t,r,n){if("string"!=typeof e.extend)if(Array.isArray(e.extend))for(var i=0;i<e.extend.length;i++){var a=e.extend[i];Hx("string"==typeof a?aw({},e,{extend:a}):e.extend[i],t,r,n)}else for(var s in e.extend)"extend"!==s?Gx(e.extend[s])?(s in n||(n[s]={}),Hx(e.extend[s],t,r,n[s])):n[s]=e.extend[s]:Hx(e.extend.extend,t,r,n);else{if(!r)return;var o=r.getRule(e.extend);if(!o)return;if(o===t)return;var l=o.options.parent;l&&Hx(l.rules.raw[e.extend],t,r,n)}}(e,t,r,n),function(e,t,r,n){for(var i in e)"extend"!==i&&(Gx(n[i])&&Gx(e[i])?Hx(e[i],t,r,n[i]):Gx(e[i])?n[i]=Hx(e[i],t,r):n[i]=e[i])}(e,t,r,n),n}var Vx=/\s*,\s*/g,$x=/&/g,Xx=/\$([\w-]+)/g;function qx(){function e(e,t){return function(r,n){var i=e.getRule(n)||t&&t.getRule(n);return i?i.selector:n}}function t(e,t){for(var r=t.split(Vx),n=e.split(Vx),i="",a=0;a<r.length;a++)for(var s=r[a],o=0;o<n.length;o++){var l=n[o];i&&(i+=", "),i+=-1!==l.indexOf("&")?l.replace($x,s):s+" "+l}return i}function r(e,t,r){if(r)return aw({},r,{index:r.index+1});var n=e.options.nestingLevel;n=void 0===n?1:n+1;var i=aw({},e.options,{nestingLevel:n,index:t.indexOf(e)+1});return delete i.name,i}return{onProcessStyle:function(n,i,a){if("style"!==i.type)return n;var s,o,l=i,u=l.options.parent;for(var c in n){var d=-1!==c.indexOf("&"),h="@"===c[0];if(d||h){if(s=r(l,u,s),d){var f=t(c,l.selector);o||(o=e(u,a)),f=f.replace(Xx,o);var p=l.key+"-"+c;"replaceRule"in u?u.replaceRule(p,n[c],aw({},s,{selector:f})):u.addRule(p,n[c],aw({},s,{selector:f}))}else h&&u.addRule(c,{},s).addRule(l.key,n[c],{selector:l.selector});delete n[c]}}return n}}}function Wx(e,t){if(!t)return!0;if(Array.isArray(t)){for(var r=0;r<t.length;r++){if(!Wx(e,t[r]))return!1}return!0}if(t.indexOf(" ")>-1)return Wx(e,t.split(" "));var n=e.options.parent;if("$"===t[0]){var i=n.getRule(t.substr(1));return!!i&&(i!==e&&(n.classes[e.key]+=" "+n.classes[i.key],!0))}return n.classes[e.key]+=" "+t,!0}function Yx(){return{onProcessStyle:function(e,t){return"composes"in e?(Wx(t,e.composes),delete e.composes,e):e}}}var Kx=/[A-Z]/g,Zx=/^ms-/,Qx={};function Jx(e){return"-"+e.toLowerCase()}function eI(e){if(Qx.hasOwnProperty(e))return Qx[e];var t=e.replace(Kx,Jx);return Qx[e]=Zx.test(t)?"-"+t:t}function tI(e){var t={};for(var r in e){t[0===r.indexOf("--")?r:eI(r)]=e[r]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(tI):t.fallbacks=tI(e.fallbacks)),t}var rI=Ix&&CSS?CSS.px:"px",nI=Ix&&CSS?CSS.ms:"ms",iI=Ix&&CSS?CSS.percent:"%";function aI(e){var t=/(-[a-z])/g,r=function(e){return e[1].toUpperCase()},n={};for(var i in e)n[i]=e[i],n[i.replace(t,r)]=e[i];return n}var sI=aI({"animation-delay":nI,"animation-duration":nI,"background-position":rI,"background-position-x":rI,"background-position-y":rI,"background-size":rI,border:rI,"border-bottom":rI,"border-bottom-left-radius":rI,"border-bottom-right-radius":rI,"border-bottom-width":rI,"border-left":rI,"border-left-width":rI,"border-radius":rI,"border-right":rI,"border-right-width":rI,"border-top":rI,"border-top-left-radius":rI,"border-top-right-radius":rI,"border-top-width":rI,"border-width":rI,"border-block":rI,"border-block-end":rI,"border-block-end-width":rI,"border-block-start":rI,"border-block-start-width":rI,"border-block-width":rI,"border-inline":rI,"border-inline-end":rI,"border-inline-end-width":rI,"border-inline-start":rI,"border-inline-start-width":rI,"border-inline-width":rI,"border-start-start-radius":rI,"border-start-end-radius":rI,"border-end-start-radius":rI,"border-end-end-radius":rI,margin:rI,"margin-bottom":rI,"margin-left":rI,"margin-right":rI,"margin-top":rI,"margin-block":rI,"margin-block-end":rI,"margin-block-start":rI,"margin-inline":rI,"margin-inline-end":rI,"margin-inline-start":rI,padding:rI,"padding-bottom":rI,"padding-left":rI,"padding-right":rI,"padding-top":rI,"padding-block":rI,"padding-block-end":rI,"padding-block-start":rI,"padding-inline":rI,"padding-inline-end":rI,"padding-inline-start":rI,"mask-position-x":rI,"mask-position-y":rI,"mask-size":rI,height:rI,width:rI,"min-height":rI,"max-height":rI,"min-width":rI,"max-width":rI,bottom:rI,left:rI,top:rI,right:rI,inset:rI,"inset-block":rI,"inset-block-end":rI,"inset-block-start":rI,"inset-inline":rI,"inset-inline-end":rI,"inset-inline-start":rI,"box-shadow":rI,"text-shadow":rI,"column-gap":rI,"column-rule":rI,"column-rule-width":rI,"column-width":rI,"font-size":rI,"font-size-delta":rI,"letter-spacing":rI,"text-decoration-thickness":rI,"text-indent":rI,"text-stroke":rI,"text-stroke-width":rI,"word-spacing":rI,motion:rI,"motion-offset":rI,outline:rI,"outline-offset":rI,"outline-width":rI,perspective:rI,"perspective-origin-x":iI,"perspective-origin-y":iI,"transform-origin":iI,"transform-origin-x":iI,"transform-origin-y":iI,"transform-origin-z":iI,"transition-delay":nI,"transition-duration":nI,"vertical-align":rI,"flex-basis":rI,"shape-margin":rI,size:rI,gap:rI,grid:rI,"grid-gap":rI,"row-gap":rI,"grid-row-gap":rI,"grid-column-gap":rI,"grid-template-rows":rI,"grid-template-columns":rI,"grid-auto-rows":rI,"grid-auto-columns":rI,"box-shadow-x":rI,"box-shadow-y":rI,"box-shadow-blur":rI,"box-shadow-spread":rI,"font-line-height":rI,"text-shadow-x":rI,"text-shadow-y":rI,"text-shadow-blur":rI});function oI(e,t,r){if(null==t)return t;if(Array.isArray(t))for(var n=0;n<t.length;n++)t[n]=oI(e,t[n],r);else if("object"==typeof t)if("fallbacks"===e)for(var i in t)t[i]=oI(i,t[i],r);else for(var a in t)t[a]=oI(e+"-"+a,t[a],r);else if("number"==typeof t&&!1===isNaN(t)){var s=r[e]||sI[e];return!s||0===t&&s===rI?t.toString():"function"==typeof s?s(t).toString():""+t+s}return t}function lI(e){void 0===e&&(e={});var t=aI(e);return{onProcessStyle:function(e,r){if("style"!==r.type)return e;for(var n in e)e[n]=oI(n,e[n],t);return e},onChangeValue:function(e,r){return oI(r,e,t)}}}var uI={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},cI={position:!0,size:!0},dI={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},hI={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function fI(e,t,r,n){return null==r[t]?e:0===e.length?[]:Array.isArray(e[0])?fI(e[0],t,r,n):"object"==typeof e[0]?function(e,t,r){return e.map((function(e){return pI(e,t,r,!1,!0)}))}(e,t,n):[e]}function pI(e,t,r,n,i){if(!dI[t]&&!hI[t])return[];var a=[];if(hI[t]&&(e=function(e,t,r,n){for(var i in r){var a=r[i];if(void 0!==e[i]&&(n||!t.prop(a))){var s,o=mI((s={},s[a]=e[i],s),t)[a];n?t.style.fallbacks[a]=o:t.style[a]=o}delete e[i]}return e}(e,r,hI[t],n)),Object.keys(e).length)for(var s in dI[t])e[s]?Array.isArray(e[s])?a.push(null===cI[s]?e[s]:e[s].join(" ")):a.push(e[s]):null!=dI[t][s]&&a.push(dI[t][s]);return!a.length||i?a:[a]}function mI(e,t,r){for(var n in e){var i=e[n];if(Array.isArray(i)){if(!Array.isArray(i[0])){if("fallbacks"===n){for(var a=0;a<e.fallbacks.length;a++)e.fallbacks[a]=mI(e.fallbacks[a],t,!0);continue}e[n]=fI(i,n,uI,t),e[n].length||delete e[n]}}else if("object"==typeof i){if("fallbacks"===n){e.fallbacks=mI(e.fallbacks,t,!0);continue}e[n]=pI(i,n,t,r),e[n].length||delete e[n]}else""===e[n]&&delete e[n]}return e}function yI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function gI(e){return function(e){if(Array.isArray(e))return yI(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return yI(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yI(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var vI="",_I="",bI="",wI="",xI=ow&&"ontouchstart"in document.documentElement;if(ow){var II={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},TI=document.createElement("p").style;for(var EI in II)if(EI+"Transform"in TI){vI=EI,_I=II[EI];break}"Webkit"===vI&&"msHyphens"in TI&&(vI="ms",_I=II.ms,wI="edge"),"Webkit"===vI&&"-apple-trailing-word"in TI&&(bI="apple")}var SI=vI,AI=_I,kI=bI,CI=wI,PI=xI;var RI={noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===SI?"-webkit-"+e:AI+e)}},MI={noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===SI?AI+"print-"+e:e)}},LI=/[-\s]+(.)?/g;function OI(e,t){return t?t.toUpperCase():""}function FI(e){return e.replace(LI,OI)}function DI(e){return FI("-"+e)}var NI,BI={noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===SI){var r="mask-image";if(FI(r)in t)return e;if(SI+DI(r)in t)return AI+e}return e}},UI={noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==kI||PI?e:AI+e)}},jI={noPrefill:["transform"],supportedProperty:function(e,t,r){return"transform"===e&&(r.transform?e:AI+e)}},GI={noPrefill:["transition"],supportedProperty:function(e,t,r){return"transition"===e&&(r.transition?e:AI+e)}},zI={noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===SI||"ms"===SI&&"edge"!==CI?AI+e:e)}},HI={noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===SI||"ms"===SI||"apple"===kI?AI+e:e)}},VI={supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===SI?"WebkitColumn"+DI(e)in t&&AI+"column-"+e:"Moz"===SI&&("page"+DI(e)in t&&"page-"+e))}},$I={supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===SI)return e;var r=e.replace("-inline","");return SI+DI(r)in t&&AI+r}},XI={supportedProperty:function(e,t){return FI(e)in t&&e}},qI={supportedProperty:function(e,t){var r=DI(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:SI+r in t?AI+e:"Webkit"!==SI&&"Webkit"+r in t&&"-webkit-"+e}},WI={supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===SI?""+AI+e:e)}},YI={supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===SI?AI+"scroll-chaining":e)}},KI={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},ZI={supportedProperty:function(e,t){var r=KI[e];return!!r&&(SI+DI(r)in t&&AI+r)}},QI={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},JI=Object.keys(QI),eT=function(e){return AI+e},tT={supportedProperty:function(e,t,r){var n=r.multiple;if(JI.indexOf(e)>-1){var i=QI[e];if(!Array.isArray(i))return SI+DI(i)in t&&AI+i;if(!n)return!1;for(var a=0;a<i.length;a++)if(!(SI+DI(i[0])in t))return!1;return i.map(eT)}return!1}},rT=[RI,MI,BI,UI,jI,GI,zI,HI,VI,$I,XI,qI,WI,YI,ZI,tT],nT=rT.filter((function(e){return e.supportedProperty})).map((function(e){return e.supportedProperty})),iT=rT.filter((function(e){return e.noPrefill})).reduce((function(e,t){return e.push.apply(e,gI(t.noPrefill)),e}),[]),aT={};if(ow){NI=document.createElement("p");var sT=window.getComputedStyle(document.documentElement,"");for(var oT in sT)isNaN(oT)||(aT[sT[oT]]=sT[oT]);iT.forEach((function(e){return delete aT[e]}))}function lT(e,t){if(void 0===t&&(t={}),!NI)return e;if(null!=aT[e])return aT[e];"transition"!==e&&"transform"!==e||(t[e]=e in NI.style);for(var r=0;r<nT.length&&(aT[e]=nT[r](e,NI.style,t),!aT[e]);r++);try{NI.style[e]=""}catch(n){return!1}return aT[e]}var uT,cT={},dT={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},hT=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function fT(e,t,r){if("var"===t)return"var";if("all"===t)return"all";if("all"===r)return", all";var n=t?lT(t):", "+lT(r);return n||(t||r)}function pT(e,t){var r=t;if(!uT||"content"===e)return t;if("string"!=typeof r||!isNaN(parseInt(r,10)))return r;var n=e+r;if(null!=cT[n])return cT[n];try{uT.style[e]=r}catch(i){return cT[n]=!1,!1}if(dT[e])r=r.replace(hT,fT);else if(""===uT.style[e]&&("-ms-flex"===(r=AI+r)&&(uT.style[e]="-ms-flexbox"),uT.style[e]=r,""===uT.style[e]))return cT[n]=!1,!1;return uT.style[e]="",cT[n]=r,cT[n]}function mT(){function e(t){for(var r in t){var n=t[r];if("fallbacks"===r&&Array.isArray(n))t[r]=n.map(e);else{var i=!1,a=lT(r);a&&a!==r&&(i=!0);var s=!1,o=pT(a,vw(n));o&&o!==n&&(s=!0),(i||s)&&(i&&delete t[r],t[a||r]=o||n)}}return t}return{onProcessRule:function(e){if("keyframes"===e.type){var t=e;t.at=function(e){return"-"===e[1]||"ms"===SI?e:"@"+AI+"keyframes"+e.substr(10)}(t.at)}},onProcessStyle:function(t,r){return"style"!==r.type?t:e(t)},onChangeValue:function(e,t){return pT(t,vw(e))||e}}}ow&&(uT=document.createElement("p"));var yT=Object.defineProperty,gT=(e,t,r)=>(((e,t,r)=>{t in e?yT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class vT{}class _T extends vT{constructor(e){super(),gT(this,"observer"),gT(this,"flowSpeed",2),gT(this,"currerntRenderScale",.75),this.canvas=e,this.observer=new ResizeObserver((()=>{const t=Math.max(1,e.clientWidth*window.devicePixelRatio*this.currerntRenderScale),r=Math.max(1,e.clientHeight*window.devicePixelRatio*this.currerntRenderScale);this.onResize(t,r)})),this.observer.observe(e)}setRenderScale(e){this.currerntRenderScale=e,this.onResize(this.canvas.clientWidth*window.devicePixelRatio*this.currerntRenderScale,this.canvas.clientHeight*window.devicePixelRatio*this.currerntRenderScale)}onResize(e,t){this.canvas.width=e,this.canvas.height=t}setFlowSpeed(e){this.flowSpeed=e}dispose(){this.observer.disconnect(),this.canvas.remove()}}function bT(e,t=!1){return t?function(e){return new Promise(((t,r)=>{const n=document.createElement("video");let i=!1,a=!1,s=!1;function o(){i&&a&&!s&&t(n)}n.addEventListener("playing",(()=>{i=!0,o()}),!0),n.addEventListener("timeupdate",(()=>{a=!0,o()}),!0),n.addEventListener("error",(e=>{s=!0,r(e)}),!0),n.src=e,n.playsInline=!0,n.crossOrigin="anonymous",n.autoplay=!0,n.loop=!0,n.muted=!0,n.play()}))}(e):function(e){return new Promise(((t,r)=>{const n=document.createElement("img");n.onload=()=>t(n),n.onerror=r,n.src=e,n.crossOrigin="anonymous",n.decode().then((()=>t(n))).catch(r)}))}(e)}function wT(e){return new Promise(((t,r)=>{(e instanceof HTMLImageElement?e.complete:e.readyState>=3)?t(e):(e.onload=()=>t(e),e.onerror=r)}))}const xT="#version 300 es\nprecision highp float;\n\nin vec2 v_coord;\nout vec2 f_v_coord;\n\nvoid main() {\n    gl_Position = vec4(v_coord, 0.0f, 1.0f);\n    f_v_coord = (vec2(v_coord.x, v_coord.y) + vec2(1.0f, 1.0f)) / 2.0f;\n}\n",IT=(()=>{const e=document.createElement("img");return e.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAYUklEQVR4nH3bV89VVRcF4IX7qNgVe8WKvaIiNsCuYCKCSEg0JCYm/gTjzf4R3njhlRdeWKKi2AvYEBV7b1ixY2+ofPuZcbwxXzie5OQ9Z5+11pxzjDHnKnu/k0477bSN+++/fzvyyCPbdttt17766qu2YcOG9ttvv7U33nijffHFF23atGntgAMOaN98803bc88926RJk9pnn31W10855ZT2888/1/vrr79ur732Wjv00EPbgQce2NavX99eeOGF+nvmmWfWuD4fc8wx1ffDDz9sTz31VPv000/bRx99VL/vsssu7eCDDy57hxxySPv222/L1saNG9vatWsbX19++eXyhb9//PFH23HHHdsHH3zQLrrooorjxRdfrPbG+/jjj9u6devaX3/91aZMmdImT57cdt1114lYu5133rnfeuut28yZM9t+++3XVq9e3T7//PMa9Ljjjqu/m222WTn73HPPtR122KF99913bcsttyyQnnzyybbbbrvVm4MMAe37778vUATIkaOPPrqCe+KJJ9qPP/7Ydt9993bvvfe2lStXtvfee69ttdVW7bzzzmvbbLNN++STT9rUqVPL7jvvvNP+/PPP8o1NNn7//fcakx3XL7300moPyC222KL8ev/99ws8Y2s3xFmAIpD9H374of36669txBEIvf3224UmR1w74YQTyhlgHHTQQeU845Bfs2ZN23fffcsQRn/55Zf6jQJOP/30GvjLL78sMPbee+8y6rM2gvPea6+9yg7Htt1223bSSSe1nXbaqWwC+K677iq2qMU1yqKK0WhUAWGREruuq3GBw8dVq1ZV4Pvss08744wzSgns/fTTT+UzoigIAL53gyM95P7+++9Cj1OQz+ACwb7PHAGA3133phKyY/TVV1+t3zHEAUa8t99++1IDJwAsKFIWkFQQOFaeffbZ9u6775aTgBXskKIVhDEBSxFJCaznOoCpNdJHGlvGNRa5s8N3PiLg5JNPbt1goNfIYKeeemo74ogjKmC5yxlIY/D5559v999/f8nxrLPOqsCBwknIkxcmpISXYFesWFGqIlNKck3bGTNmFNDyltPaUBXnsMWGfKZCeQto/QQqmOnTpxegvvNVH4G7Jg4AG4P8qVM6jCN5JDc5QYZyHHrynFGdDMBhaHJG8ZAy55xzThkFisABBxBsH3/88TUmprAM7VdeeaWcNz5wjSPoPfbYowDj+FFHHVWOC9bYWEuQ0ss1zALGi+qQRxUI8XrrrbdKfbFD5r6rSXzip2uPP/541aNuyJOeDMlCAVQLBI71Cy64oAAAzOabb16VnNzlELlTiNyEsOAES1bkDQhjcJIj2kghQLsmZ+W6AkyalCZAvwFn2bJl7b777qtAyFw9ELxgfNcWKcbBqOColB1KiF9qkBkJqeoNtehDAWaLETR9eemll+oHjPhOGRgnT1Md+WAYIJwCkoJHRgDhoP7amj4ffPDB+s5hzgpSmvjMMTkbx+LcM8880+644452+OGHV7CUE9bZ1t44FEcV2Accn9nHLv+MxXf1g1rFQJXIRSb/kCE1R6QHdQN7M0iCAsMCtA0kGMxoyxm5xEHKoAYseClkwNROP0owLjUASl/gahdGqcCMoroDmrLMCldeeeVE0dVeX05TERIAQJFsSDcgWIMYiz/85X+m1E2R3M2ZM6cXBEd0hK6B5KIgOK7QBSDXgcSov74fdthhZVg/ucZRwS9YsKDQ1wYzjzzyyES9YVMbrJIydqhCbZFKcj8KJGm21AHsymFSdt2iCRnkT9IUgV2xWIPoR5XGpgZ92DbT8KUbZNm//vrr1SBTneJDlhoZiFHyEohiBl3AGExg2mGDauS/MQBhTH0ee+yxxgaABMVJMseuImqqxAwgww7myFX9IHd9vc0kFIMUdYcN7xRYvpnNjMM/KuDjOJK7AZ1eReS01SAnOABVU5c04Lwlpe+c4TwDqrh8Jk+GTE++Y8Msojo//PDD1Q+r3ooSJwWAoTfffLPGAp4x2LntttuKAIEZm0JIX4DsewlGqjz99NMVHL+lFLtS0svMIFDFfRzJtQ4gKQxkackRkuSk62RkYB1cA44+rmE/CxpIG0PqCNqLAyR47LHHViDA5YTfBUtZxqUgNUV7/b0BBRjBGt8UJyW0k0bSwFzPB7OP2qWf4IyHbb4r2ONI7pYsWdLLQ3OiHGMoy0eyUihUezkOQQ6Zrw0GhKGGVCECxqOPPlprhlTqs88+u9pKF0YFzQaHpYLvFAMAQUoNTiNAANpiV0A+Uwq70sOYfjOzWPggzMKL//zljz58RsxYkhnUgEOQJSN5Ls/km+uYIDeGDaIjpuQYBlRZuQpplVa/E088cWLBwhkbHwwyLBBFTmD6ZI2PBPUAk/wwZlSgPdvmd7b1E5QiyA+phH22zCSu8RfT/FPwbr311vpOjcZEdDdIsNcYCxAlT8yTZ/LQ8vb2228vyWhjYPllCwsAIMoxVRZQggGgGkFJ2Vp7+Y2MOekap6mLpIFnfA4DPktfIGBV0bTZ4TiQgammABKJls/AVSuMpwZF6tkDULvZJxukbqiYtRfQwV9v8jKogmNgUx7HOTd79uzKW0FxHnjaYe38888viWqLIRLHmmCyaTJL6OvNpiBVY2mjH1uYZYtcrR0ALgjfAcu+lMEq9RhLe3aQkN0t8FwXwziSuyF/eo6q4JDmoOCxh33fVX25JacNgmWdLT44JQCoynN5B+1sPxcvXlyyxLpClTneNGlsL2yQsgLlulmEsrItF4CpVKDWCZbofGNfYGqKfuwotIihLsGqYfqPI3kkL7EGkeQrRg3KachD27rdddMSKUFbHjGieMlL8hQ4FjkIDLmJRYB5W1Nw0vjpy0EpwUGKYYeMqQLggASyIPXRjh1pB3S1i3+K27x58woUNUiAAlVoEWU5jH2+U6jr3ZATtRLknCpuUM6p7pjGJtbM5xYmgspmSaFStEhO7skv3zGqHVCgDTCBegGNw1RnbP3UEgGwByxqmzVrVsk4J05STIp4UwdyAJI0C+iCByYbfn/ooYeqFgicooANGNcqXa+++uragPgiIOhDSnFRLbNNlhJenIGu1ZYA4oAATUm+2+dLCewBgoqMmXUDYOR11u3eQMhCRS3BkrZs8I0NgfEPWAsXLqz2N998c7Wx1gC2Sp/ToUytmPYyywAPiFJeOo0wBilBYZqxVGFndIKRs1dcccXEAoXjXgySNFQBxRFOCVBOG1d7f6lEW3lLZVj23e/A1g8zWbo+8MADNY5CJ2gBAg2gCqF+0iIAYZ4qpIbP6hZFKtqIHEdyNwzWMwgpiHOKZKElDwWvIalyQK0wXVGF/M4aPfmZCisNBIutrNE5gh3fjccuMDDCvn7sC4wqAhJCslMFNACMq11Oe+W/V7bBNmL8Aqr8t1FShPmgnxlJmnQXXnhhz4gcSp7Zl2Pe96zMoEZuQBKEYqiNgoYlAetLdiqwwwzOYADqnFDdBaC+cE5d0Q5oxpUqWaMDPafPpj3X9c8hajY63tJO/2zEqDq72exlxpE8gpaGOUzMMZTpwytFjrxUXCypykuXLq1BcgKcvtghS44BIOnkdypRbAHlpT/JCkiQFEU1AFUT7r777gqI2vThBwapiRqxb9WaU5/MYoopEthSdLGtaAPTd3/1Y6u79tprax2gOECeLBjK92xNMYZdeZ9lKOYMQs4ANI6AIaxOZI1uegSeQw4Oquycyxkdh9gyDqCBLmDAsJFZBqhUwoYX9XlJFe35qq3lspegFTq+UDgwsxGjWEW7GwbrHV+5KChSwQQEpQAnbWxchx5jChEJCl6KQFgf4JAtI5auHDS1cspnbQGgHykCCHMY45xFjzrCOcE6g6REBTX3FbDNT4Sw601dctxv2e9bFltYqR2ujyN5JDdzNE2S2QSZcqBKvnII8j4DRcFhxEBmDymUU1vOY0JqAMR4ZhOOAQd7jBvLNcH7y1Y2MVIlS2XAIMNUxgZFUY125nLjKcp8ZJPv4sk5o1SSQs4ejJ9inrVAd/311/cGzJpaI85p5DMEIQ5Fn10j36zROakYYiF7eywyBBifscUYgBVTdSTLZYrIPiNyN7ZrCpl0sZfPBkv+21c45BC46zkNzkZMHH6XSj4bs3Z+/xyGiCG3zrphfV/nAQAQiMbylSKwaT619tbYfptsBJebE+ZrTMs1ewVBCVS6kDmnk9PGxKbr+hsTELlfl1NeTuuTtFMjqM34QDYmBr3ZokopR6VSjRLY0o//fBtH8uiGG24oZ8iF9HL7iCNBjGOcxV5Y/fca3SvTE4cpRD9jcFIOB7D04RgGpSBHc1qswKoRWXV6y38BYNHYQM69AX/1A5AUERx/2bn88strPKQ5mDEd80f6+l7bYQrADiMKnIsAoAroKh6mDLKUBjn3sw7gHOTVBODZWGXTop9xAcIhwQc8vyuO0sLvOfDwco0vWc8rjAAynnWICu83Y2W3illFGBiKJzD18XL32Wm0VAOEv2qEN1/rxghZuJCTFkhhGFoGzqnr/Pnzyxhpau86o+QKJEUOINQAsP9fo+tHrhijDr9zFKDSzwkQ4E2XChegOGlDgzVqyQ4vJ0EpmhQCHD7lZquZwW/GzDoEycD0uz4jVRKKZMdoKn3u5uTEJTcTrawAhX31IsfjWf/nuDlrdEDmODvTKIcAw4aVoJpiTuawqs4xuSylgMrxnOYMK9eJjRjQc8Mm/RHod/akBHL/i+Ru2Hn1VleZBhVAMjWtBADI55Qma3QA+Jt7evrliQ5oY4KEs/bOjRBzu+9UQ10kmoMSDnPe3A5MPnHYQStngZInVPIgBlUJhl1SR0Zs6ssXYPBTe2seqYkAr7ozZO3vom0oaXg4gRyzzfUSJIAMqNpqb4WV0yPsyE3zNEZUavnmL+epIUWLcgSubdboORkWmDW6Aqno5skQ/QAmHcwkublBCdIz878VX8772Oavv+NI7hYvXlxL4UiejMg8W0roAwUgAuQ8BxW87PoUrtziUoC0E6DAqIDkyFlwxvEbR6hLynn7LCALFjc2OMsnylMf+BQgzfuAZw8wuYXHX0HZZEkrlV4683Mcyd2iRYt6clC4FBHoWmzoTI4G4Az55D4+qasbpiTOUwTDuRvsb912+geMnPMLBOucN06mL4FhSb8ct2Gezdx4UQey7udfPd8zBJSjemMopmIIcEgxvrQdR3I3LGV7jio8mNLYOjrPBmALCKY/xn02MGUATS6THrkLTDtMAJBDJHjxxReXY1JF4BzGWJ4nYje3v/KkWZ4nstTO80B5CgRYira+OeaiQmDwzR7g3zdLEDaO5G5o3EMPS+ZJYPhMsqYykleUAMRBg2bOZthnrAsgFd8JLtXk6FklBxDQ5J4XoADB8eznpRV2qAdzxjVG6op3ahP2KYqd3PUxowkeYBSXs0mAjSN5xBAWb7zxxjLGkSw2ICdoAwRNbfVRpLwsMxkTPDDM90DDEEakhqCgLS+zrqeMFEbtVfJsUozPQbbcUcoZHhUgRtD8lM9ZXAEnj9T5zU1T/XLPUh9+skEJ/lYKXHPNNT2G5DGE/Gh+9aPvgMiDkQJRyDAlAIUL2lkJqtAMmcKgj0EPVOU5AgrLM35YsOABinQwllnF99w4ZRsp2XUKiK85cSZj/uRABohSQAxmAYTI+dxlsuaIyqVjgcSgvDQ4ySs8AsCEoAVo2lCZc9KjUHGOMWgz7lpuPlCMfg4e8xwAp4GDEcDmWFpu5jE3QAFDX3mqreMzvpjj9VEQL7vsstr53XnnnWWLCsVAMXzOnaqMxSf1SKrYSbKV5yK7AfV6TtAFAwJBwxwa5JydQ3nACCCKjODNu9oxQGp5YAHTxqEMbFiNaSdvpVZOinK/MU+DaeMzNrObNIbcFxzQkQaUPBfgL7+0U7Qpg39ZJ1AiUl3jCz+ziRvZb2d/rlHO7FRolZjspYRCSOoc0Q47rhtMfwrJI2kCURO0My4wMWH+xroUykFMpskoUMBuishtdQbouYfAJ8DdcsstBZJVJWCXL18+cZcoOz6qAwxy84QJpVojAMHCiDprJSjHLVMFKaDMs97WAtCFvE65YSF/9DOwwDjo0VTX5KTcV/gEgFVMMwgIwclT29UcvWed4LsZxWcF03pDIMDN84s5TkeI3wBllagtfxVxPtUzQEO+I1nO5wQpMQK6mzdvXp+5Ow8y5149qZrDIYhJQZGRtCA1gAmcY4pU7gxj1zv3HK26pAUbilie+7UHUBu8OQkk13OzBtu5xj6fsvESGPazzcaqFME+GwCiLvUmzy9tiuTuuuuu6w2oA4SkgPzIzQjVGiMGJ/l6vHQIkmwpIweUKmyOmrVJXckhZo7eVXi7zjwtlgch8xhtNl25pQ0ctgST2YlvnhCnAMEiUF9nFMbzpjSEZT8wjuRR7qZgirxyn93xU6RosDwdSrp5ykt7D074m2cAc2ydgxCMSB1F0iGIAsYxdYHDgFeZ3ckxjsKYnMW85bJ8lkZAy8YMKFRG+uqR3/xVd4BPffoLHvNABqA+SAJwHacrctD3A3TlukEE4MVQcl2RoQ4D+GwG4IAgsvkQKHTViewFBJUDyjy3x8GcCGlPeaY2iy2su82dp07N3UDQVyqxYTzTbB6sRIqiCHDpA2ASpxBKG0dyN3Tq5bMOAspGJVNfcpBTDKsLWZZyhvOAg7QCBCjocs7vCpm/VJBnhXNYIT/ZNdvYnEgZv+sL4OR6nlDJvQBpBWDM5kA1S2+2pAbwcgSe+xzSjzrMVMaRNt3s2bN7zEHPwHkKFFvY5rQtah5jIX1poGhZe7vGMNTNAooVoABkupPvwMyCCCtSK3d+yJLTOQTFvKBUdmMqsMADCDIUWzZIXhEFIDuqPBUYFwDiAH5OrsaR3A1r7t5FKSCgPA0GIY5i1xm7vFSgFBXXspICXp4Oz3+T5JSI9AHolVtj2PabVGMTIOeee26Bmp0eRgWVZ4CkmCLqWh53oSCB8oF/UklhzD9JmGncW0xdGkfyiIMcgZbAGTVFGBzr2HRnB4oG4wTkOE5iOQrPwUSeCs+JEWeyp89T3LmLxLZ8tMzNWeQ999xTzDqAVViNTWEYNLYXBWiPMH7pZ3pGAH9J3YJNDCXzwW9+SgW2kSANpdCIgdwPsJXMg4xA0JGDuWWFdahh0wDQZ0ghtQK75JJLqmCZXgQ8d+7casNZL7MAeVNMNinsAcBWWQ0RKDCBSHUC4o9+QFcsAY/J1CfAAoLiFDltgLZo0aKJ5xDGkTwiDdVYB3lh5XbTTTfVd8Uot5wZx7DUyBPcHHA9KzWv/PsbKWKZpLWjnNwu91ueFQJc2ExNwbAp1zojs4Xr+iliAAFWnlg3IwheKihw+TdAfbU3/jiSR3ngwUuuQTP/CwiMnMG5bv42oLV3FigegMgxE6dJ7qqrrqrC5rYZOWbLK2iHJUkdQOV5QH0BnHylOiyzR1G5EyU9qAUJuREDOGOYJXKD1wwDGDb+i+RukEEdiZn75QZZ5O5PVkyMCdbLsbLKndVZ7towbEGT5XAeY8sDUoBWYG1GyDX/08dZgUgPdmx/c64IWODnBgsl8lNAZhc2yZmvlJgjNgusrCiBovgCmF3+eSO0bph6PiCPkHFaFZfXJMMQozoYRKDeeRpb4REABshTO1LMqs3ciyGywyA25Cz2oc9xdqkGK3nWn/qoxSJGTVCsjAFAYyDKZ9cxihBA+y4WwXsDNAuncSTXsbjADcxgUNIIE/n/HpKSS/nfwey5oZi53wpRAHm8juy1zRkDUMnfdOQ6hrPUBRAbArPuMJXmDrHjsTDLR+AkiDweizR+ZK2iiOb/AgLApkjuhkLSa6ho5PFWZ23ZZpIKGVmiGsxMQE6CMKjPchXTEPbcIeQxJxU4zkGAaKuyq8ScEjCHyV/hYkuK5MFGIFj4eEsnR27GUgeAwh+gRJXqgJpBTT67TqE5ItsUyd1wsZdvcjTPB+SQQlCqtL85SMgBB5k6EyApixpsA0/ArpGk6UigipbxpEdWZoDEgBsWFGBrK42057D+7CFCigFA1RdQFmimtdxwzQMQpmkAZjutb9J4UyTXjRFS1kGFzp1f10hZB/muBvgLWZ2156w0seBRADmHee2sAchdgcMKY8aVyzl2pxQqE6xUkM+CBAC2MJj/CEOCswn+ZLWKCAqSotm18tl4iimfkaCQjiN5xAD5cUQ+GQBC8kwApjvIQk9OcoBBjDvREQgQGDVD5CwhMmSIPLURZJ48kfO2o9Irx+P2F5ziKOY4zSbV5Ukw9gFOMcayiKrpbPBRH2Pl2UGAq0m+U6mZBxh5WBtp/wOJEZce9OdHHAAAAABJRU5ErkJggg==",e})();class TT{constructor(e,t,r,n="unknown"){gT(this,"gl"),gT(this,"program"),gT(this,"vertexShader"),gT(this,"fragmentShader"),gT(this,"coordPos"),gT(this,"notFoundUniforms",new Set),this.label=n,this.gl=e,this.vertexShader=this.createShader(e.VERTEX_SHADER,t),this.fragmentShader=this.createShader(e.FRAGMENT_SHADER,r),this.program=this.createProgram();const i=e.getAttribLocation(this.program,"v_coord");if(-1===i)throw new Error(`Failed to get attribute location v_coord for "${this.label}"`);this.coordPos=i}createShader(e,t){const r=this.gl,n=r.createShader(e);if(!n)throw new Error("Failed to create shader");if(r.shaderSource(n,t),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS))throw new Error(`Failed to compile shader for type ${e} "${this.label}": ${r.getShaderInfoLog(n)}`);return n}createProgram(){const e=this.gl,t=e.createProgram();if(!t)throw new Error("Failed to create program");if(e.attachShader(t,this.vertexShader),e.attachShader(t,this.fragmentShader),e.linkProgram(t),e.validateProgram(t),!e.getProgramParameter(t,e.LINK_STATUS)){const r=e.getProgramInfoLog(t);throw e.deleteProgram(t),new Error(`Failed to link program "${this.label}": ${r}`)}return t}use(){const e=this.gl;e.useProgram(this.program),e.vertexAttribPointer(this.coordPos,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.coordPos)}warnUniformNotFound(e){this.notFoundUniforms.has(e)||(this.notFoundUniforms.add(e),console.warn(`Failed to get uniform location for program "${this.label}": ${e}`))}setUniform1f(e,t){const r=this.gl,n=r.getUniformLocation(this.program,e);n?r.uniform1f(n,t):this.warnUniformNotFound(e)}setUniform2f(e,t,r){const n=this.gl,i=n.getUniformLocation(this.program,e);i?n.uniform2f(i,t,r):this.warnUniformNotFound(e)}setUniform1i(e,t){const r=this.gl,n=r.getUniformLocation(this.program,e);n?r.uniform1i(n,t):this.warnUniformNotFound(e)}dispose(){const e=this.gl;e.deleteShader(this.vertexShader),e.deleteShader(this.fragmentShader),e.deleteProgram(this.program)}}class ET{constructor(e,t,r){gT(this,"fb"),gT(this,"tex"),gT(this,"_size"),this.gl=e,this._size=[t,r];const n=e.createFramebuffer();if(!n)throw new Error("Can't create framebuffer");const i=e.createTexture();if(!i)throw new Error("Failed to create texture");this.fb=n,this.tex=i,e.bindFramebuffer(e.FRAMEBUFFER,n),e.bindTexture(e.TEXTURE_2D,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),this.resize(t,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.MIRRORED_REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.MIRRORED_REPEAT)}get size(){return this._size}resize(e,t){const r=this.gl;this.bind(),r.bindTexture(r.TEXTURE_2D,this.tex),r.getExtension("EXT_color_buffer_float")?r.texImage2D(r.TEXTURE_2D,0,r.RGBA32F,e,t,0,r.RGBA,r.FLOAT,null):r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e,t,0,r.RGBA,r.UNSIGNED_BYTE,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.MIRRORED_REPEAT),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.MIRRORED_REPEAT)}bind(){const e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.fb)}active(e=this.gl.TEXTURE0){this.gl.activeTexture(e),this.gl.bindTexture(this.gl.TEXTURE_2D,this.tex)}dispose(){this.gl.deleteFramebuffer(this.fb),this.gl.deleteTexture(this.tex)}}class ST{constructor(e,t,r,n){gT(this,"gl"),gT(this,"buffer"),gT(this,"type"),gT(this,"data"),gT(this,"usage"),gT(this,"length"),this.gl=e,this.type=t,this.data=r,this.usage=n;const i=e.createBuffer();if(!i)throw new Error("Failed to create buffer");this.buffer=i,this.length=r.byteLength,e.bindBuffer(t,this.buffer),e.bufferData(t,r,n)}bind(){this.gl.bindBuffer(this.type,this.buffer)}dispose(){this.gl.deleteBuffer(this.buffer)}}class AT{constructor(e,t,r,n,i){gT(this,"albumTexture"),gT(this,"alpha",0),this.gl=e,this.mainProgram=t,this.vertexBuffer=r,this.indexBuffer=n;const a=e.createTexture();if(!a)throw new Error("Failed to create texture");this.albumTexture=a,e.bindTexture(e.TEXTURE_2D,a),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.MIRRORED_REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.MIRRORED_REPEAT)}draw(e){const t=this.gl;this.mainProgram.use(),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.albumTexture),this.mainProgram.setUniform1i(e,0),t.drawArrays(t.TRIANGLE_STRIP,0,4)}dispose(){this.gl.deleteTexture(this.albumTexture)}}class kT{constructor(e){gT(this,"tex"),gT(this,"alpha",0),this.gl=e;const t=e.createTexture();if(!t)throw new Error("Failed to create texture");this.tex=t,IT.decode().then((()=>{e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,IT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)}))}active(e=this.gl.TEXTURE1){this.gl.activeTexture(e),this.gl.bindTexture(this.gl.TEXTURE_2D,this.tex)}dispose(){this.gl.deleteTexture(this.tex)}}const CT=class e extends _T{constructor(t){super(t),gT(this,"hasLyric",!0),gT(this,"hasLyricValue",1),gT(this,"maxFPS",30),gT(this,"lastTickTime",0),gT(this,"lastFrameTime",0),gT(this,"_lowFreqVolume",1),gT(this,"paused",!1),gT(this,"staticMode",!1),gT(this,"gl",this.setupGL()),gT(this,"reduceImageSizeCanvas",new OffscreenCanvas(128,128)),gT(this,"tickHandle",0),gT(this,"sprites",[]),gT(this,"ampTransition",0),gT(this,"playTime",0),gT(this,"frameTime",0),gT(this,"IllIlllIlIIlllI",[-.1,0]),gT(this,"mainProgram",new TT(this.gl,xT,"#version 300 es\nprecision highp float;uniform float IIIlllllllIIIllIl,lIIIlllllIllIl,IIIlllIlIIllll;uniform sampler2D IlllIIlIlllIll;uniform vec2 IIlIlIIlIlIllI,IllIlllIlIIlllI;out vec4 lIIlIIIIIlIlIlllIIIIlIIl;float lIlIIllllIllIll(float IIIlIIlIIIlllIII){IIIlIIlIIIlllIII-=0.;return sin(IIIlIIlIIIlllIII);}float lIlIlllllIllIll(float IIIlIIlIIIlllIII){IIIlIIlIIIlllIII+=acos(0.);return sin(IIIlIIlIIIlllIII);}mat2 lIIllIIlIIIllIl(float IIIlIIlIIIlllIII){return mat2(lIlIlllllIllIll(IIIlIIlIIIlllIII),-lIlIIllllIllIll(IIIlIIlIIIlllIII),lIlIIllllIllIll(IIIlIIlIIIlllIII),lIlIlllllIllIll(IIIlIIlIIIlllIII));}mat2 lIIllIIlIIIlllI(float IIIlIIlIIIlllIII){return mat2(lIlIIllllIllIll(IIIlIIlIIIlllIII),-lIlIlllllIllIll(IIIlIIlIIIlllIII),lIlIlllllIllIll(IIIlIIlIIIlllIII),lIlIIllllIllIll(IIIlIIlIIIlllIII));}float IllllIIlIllII(float llIIllIllIIIllI){return fract(lIlIIllllIllIll(llIIllIllIIIllI)*43758.5453);}float llIlIIllllIII(vec2 IIIlIIlIIIlllIII){vec2 IIllIlIIlllI=floor(IIIlIIlIIIlllIII),lIlIllIIIIIlIl=fract(IIIlIIlIIIlllIII);lIlIllIIIIIlIl=lIlIllIIIIIlIl*lIlIllIIIIIlIl*(3.-2.*lIlIllIIIIIlIl);float lIlIlIlIlIlIIl=IIllIlIIlllI.x+IIllIlIIlllI.y*57.;return mix(mix(IllllIIlIllII(lIlIlIlIlIlIIl),IllllIIlIllII(lIlIlIlIlIlIIl+1.),lIlIllIIIIIlIl.x),mix(IllllIIlIllII(lIlIlIlIlIlIIl+57.),IllllIIlIllII(lIlIlIlIlIlIIl+58.),lIlIllIIIIIlIl.x),lIlIllIIIIIlIl.y);}vec2 lllIIIIIIllIlIIIlI(vec2 IlllIIlIIIIlIIII,float lIIIIlllIIIIllIlIlI,vec2 IlIlIIIIlIlllIlIII){float lIIlIllIIIlIl=llIlIIllllIII(IlllIIlIIIIlIIII*vec2(1)*3.5+.1)*4.2831*mix(.2,1.,IIIlllllllIIIllIl);IlllIIlIIIIlIIII+=vec2(-1,.5);lIIlIllIIIlIl-=lIIIIlllIIIIllIlIlI;return vec2(lIlIlllllIllIll(lIIlIllIIIlIl),lIlIIllllIllIll(lIIlIllIIIlIl));}const mat3 lIIllIIIlllIl=mat3(1.,.02,.002,.02,1.,.008,.002,.02,1.),lIIIlllIIIIll=mat3(1.022,-.02,-.002,-.02,1.028,-.008,-.002,-.02,1.022);void main(){vec2 lIIIlIIllIlIIlI=lIlIIllllIllIll(lIIIlllllIllIl*.2)*.01+.5+gl_FragCoord.xy/IIlIlIIlIlIllI.xy,lIIllIIlIIIllI=lIIIlIIllIlIIlI*.77f+IllIlllIlIIlllI;lIIllIIlIIIllI.x*=IIlIlIIlIlIllI.x/IIlIlIIlIlIllI.y;float lIIlIIlIIlIIIlII=gl_FragCoord.x/max(IIlIlIIlIlIllI.x,IIlIlIIlIlIllI.y),lIIIlIllIllIlIIl=0.f;vec3 lIIIlIlIIIlIlIIl=vec3(0);vec2 lIlIIlIlIIIllIll=lIIllIIlIIIllI;for(int IllIlIIlIIlllllIIIl=0;IllIlIIlIIlllllIIIl<8;IllIlIIlIIlllllIIIl++){bool lIlIlIIllIllIIll=IllIlIIlIIlllllIIIl%2==0;vec2 lIlllIlllIlllII=lllIIIIIIllIlIIIlI(lIIllIIlIIIllI,lIIlIIlIIlIIIlII,lIIIlIIllIlIIlI),lIllIIlIIlIIIll=lIlllIlllIlllII;float lIIlIlIIlIIlIllI=float(IllIlIIlIIlllllIIIl)/8.f;vec3 llIIlIIIIlIIlIII=texture(IlllIIlIlllIll,-lIIIlllllIllIl*.01+.8*lIIllIIlIIIllI*lIIllIIlIIIllIl(-lIIIlllllIllIl*.2)+vec2(IIIlllIlIIllll*.3*(float(lIlIlIIllIllIIll)*2.-1.)*lIIllIIlIIIlllI(lIIIlllllIllIl*.2+1.5))).xyz;lIIIlIlIIIlIlIIl+=llIIlIIIIlIIlIII;lIIIlIllIllIlIIl+=4.f*lIIlIlIIlIIlIllI*(1.f-lIIlIlIIlIIlIllI);lIIllIIlIIIllI+=.01f*lIllIIlIIlIIIll*(lIlIIllllIllIll(lIIIlllllIllIl)*4.8+.8);lIlIIlIlIIIllIll+=.05f*lIllIIlIIlIIIll;}lIIIlIlIIIlIlIIl/=lIIIlIllIllIlIIl;lIIIlIlIIIlIlIIl*=1.6f;lIIIlIlIIIlIlIIl=1.f-exp(-lIIIlIlIIIlIlIIl);lIIIlIlIIIlIlIIl=pow(lIIIlIlIIIlIlIIl,vec3(2.2));lIIIlIlIIIlIlIIl*=.8f;lIIlIIIIIlIlIlllIIIIlIIl=vec4(lIIIlIlIIIlIlIIl,1);}","main")),gT(this,"blendProgram",new TT(this.gl,xT,"#version 300 es\nprecision highp float;\n\nuniform sampler2D src;\nuniform float lerp;\nuniform float scale;\nin vec2 f_v_coord;\nout vec4 fragColor;\n\nvoid main() {\n    vec2 tex_coord = f_v_coord;\n    if(scale < 1.0f) {\n        tex_coord /= scale;\n    }\n    vec4 srcColor = texture(src, tex_coord);\n    fragColor = mix(vec4(srcColor.xyz, 0.0f), srcColor, lerp);\n}\n","blend")),gT(this,"copyProgram",new TT(this.gl,xT,"#version 300 es\nprecision highp float;\n\nuniform sampler2D src;\nin vec2 f_v_coord;\nout vec4 fragColor;\n\nvoid main() {\n    vec2 coord = f_v_coord;\n    fragColor = texture(src, coord);\n}\n","copy")),gT(this,"noiseProgram",new TT(this.gl,xT,"#version 300 es\nprecision highp float;\n\nuniform sampler2D src;\nin vec2 f_v_coord;\nout vec4 fragColor;\n\n/* Gradient noise from Jorge Jimenez's presentation: */\n/* http://www.iryoku.com/next-generation-post-processing-in-call-of-duty-advanced-warfare */\nfloat gradientNoise(in vec2 uv) {\n    return fract(52.9829189f * fract(dot(uv, vec2(0.06711056f, 0.00583715f))));\n}\n\nvoid main() {\n    vec2 tex_coord = f_v_coord;\n    float dither = (1.0f / 255.0f) * gradientNoise(gl_FragCoord.xy) - (0.5f / 255.0f);\n    vec4 color = texture(src, tex_coord);\n    color += dither;\n    fragColor = color;\n}\n","noise")),gT(this,"vertexBuffer",new ST(this.gl,this.gl.ARRAY_BUFFER,e.rawVertexBuffer,this.gl.STATIC_DRAW)),gT(this,"indexBuffer",new ST(this.gl,this.gl.ELEMENT_ARRAY_BUFFER,e.rawIndexBuffer,this.gl.STATIC_DRAW)),gT(this,"noiseTexture",new kT(this.gl)),gT(this,"fb"),gT(this,"historyFrameBuffer",[]),gT(this,"_currentSize",[0,0]),gT(this,"_targetSize",[0,0]),gT(this,"renderSize",[0,0]),gT(this,"pixelSize",[0,0]),this.canvas=t;const r=this.gl;r.enable(this.gl.BLEND),r.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.requestTick();const n=t.getBoundingClientRect(),i=n.width*window.devicePixelRatio*this.currerntRenderScale,a=n.height*window.devicePixelRatio*this.currerntRenderScale;this.fb=[new ET(this.gl,i,a),new ET(this.gl,i,a)];for(const e of this.fb)e.bind(),r.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA);this.historyFrameBuffer=new Array(2).fill(0).map((()=>new ET(this.gl,i,a))),this.onResize(i,a)}onTick(e){if(this.tickHandle=0,this.paused)return;const t=e-this.lastTickTime,r=e-this.lastFrameTime;this.lastFrameTime=e,t<1e3/this.maxFPS?this.requestTick():(this.hasLyric&&(this.playTime+=r*this.flowSpeed*.2),this.frameTime+=r,this.onRedraw(this.playTime,r)&&this.staticMode||this.requestTick(),this.lastTickTime=e,this.ampTransition)}onResize(e,t){this._targetSize=[Math.max(1,Math.round(e)),Math.max(1,Math.round(t))],this.staticMode&&this.requestTick()}checkResize(){if(this._currentSize[0]===this._targetSize[0]&&this._currentSize[1]===this._targetSize[1])return;this._currentSize=[...this._targetSize];const[e,t]=this._targetSize,r=Math.round(Math.max(e/this.currerntRenderScale,e)),n=Math.round(Math.max(t/this.currerntRenderScale,t));this.renderSize=[e,t],this.canvas.width=r,this.canvas.height=n,this.pixelSize=[r,n],this.gl.viewport(0,0,r,n);for(const i of this.fb)i.resize(e,t);for(const i of this.historyFrameBuffer)i.resize(r,n)}requestTick(){this.tickHandle||(this.tickHandle=requestAnimationFrame((e=>this.onTick(e))))}drawScreen(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)}bindDefaultFrameBuffer(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)}onRedraw(e,t){this.checkResize(),this.hasLyricValue=(19*this.hasLyricValue+(this.hasLyric?1:0))/20;const r=this.gl;this.vertexBuffer.bind(),this.indexBuffer.bind(),this.mainProgram.use(),this.noiseTexture.active(),this.mainProgram.setUniform1i("noisetex",1),this.mainProgram.setUniform2f("IIlIlIIlIlIllI",this.renderSize[0],this.renderSize[1]),this.mainProgram.setUniform1f("lIIIlllllIllIl",this.hasLyric?e/1e3:0),this.mainProgram.setUniform1f("IIIlllllllIIIllIl",this.hasLyricValue),this.mainProgram.setUniform1f("IIIlllIlIIllll",this.hasLyric?this._lowFreqVolume:0),this.mainProgram.setUniform2f("IllIlllIlIIlllI",this.IllIlllIlIIlllI[0],this.IllIlllIlIIlllI[1]);const[n,i]=this.fb;i.bind(),r.clearColor(0,0,0,0),r.clear(this.gl.COLOR_BUFFER_BIT);for(const o of this.sprites)n.bind(),r.clearColor(0,0,0,0),r.clear(this.gl.COLOR_BUFFER_BIT),this.mainProgram.use(),o.draw("IlllIIlIlllIll"),i.bind(),this.blendProgram.use(),n.active(),this.blendProgram.setUniform1i("src",0),this.blendProgram.setUniform1f("lerp",o.alpha),this.blendProgram.setUniform1f("scale",this.currerntRenderScale),this.drawScreen(),o.alpha=Math.min(1,o.alpha+t/200);if(this.noiseProgram.use(),this.noiseProgram.setUniform1i("src",0),n.bind(),i.active(),this.bindDefaultFrameBuffer(),this.drawScreen(),this.sprites.length>1&&this.sprites[this.sprites.length-1].alpha>=1)for(const o of this.sprites.splice(0,this.sprites.length-1))o.dispose();const a=1===this.sprites.length&&this.sprites[0].alpha>=1,s=this.hasLyric?this.hasLyricValue>1e-5:this.hasLyricValue<.99999;return a||!s}copyFrameBuffer(e,t=null){e!==t&&(e.active(this.gl.TEXTURE0),this.copyProgram.use(),t?t.bind():this.bindDefaultFrameBuffer(),this.copyProgram.setUniform1i("src",0),this.drawScreen())}setupGL(){const e=this.canvas.getContext("webgl2",{alpha:!0,depth:!1,powerPreference:"low-power"});if(!e)throw new Error("WebGL2 not supported");return this.gl=e,e.enable(e.BLEND),e.disable(e.DEPTH_TEST),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.getExtension("EXT_color_buffer_float")||console.warn("EXT_color_buffer_float not supported"),e.getExtension("EXT_float_blend")||console.warn("EXT_float_blend not supported"),e.getExtension("OES_texture_float_linear")||console.warn("OES_texture_float_linear not supported"),e}setLowFreqVolume(e){this._lowFreqVolume=e}setStaticMode(e){this.staticMode=e,this.lastFrameTime=performance.now(),this.requestTick()}setFPS(e){this.maxFPS=e}pause(){this.tickHandle&&(cancelAnimationFrame(this.tickHandle),this.tickHandle=0),this.paused=!0}resume(){this.paused=!1,this.requestTick()}async setAlbum(e,t=!1){if("string"==typeof e&&0===e.trim().length)throw new Error("Empty album url");let r=null,n=5;for(;!r&&n>0;)try{r="string"==typeof e?await bT(e,t):await wT(e)}catch(d){console.warn(`failed on loading album resource, retrying (${n})`,{albumSource:e,error:d}),n--}if(!r)return;const i=this.reduceImageSizeCanvas,a=i.getContext("2d");if(!a)throw new Error("Failed to create canvas context");a.clearRect(0,0,i.width,i.height);const s=r instanceof HTMLVideoElement?r.videoWidth:r.naturalWidth,o=r instanceof HTMLVideoElement?r.videoHeight:r.naturalHeight;if(s*o==0)throw new Error("Invalid image size");a.drawImage(r,0,0,s,o,0,0,i.width,i.height);const l=a.getImageData(0,0,i.width,i.height);(function(e,t){const r=e.data;for(let n=0;n<r.length;n+=4){const e=r[n],i=r[n+1],a=r[n+2],s=r[n+3];r[n]=(e-128)*t+128,r[n+1]=(i-128)*t+128,r[n+2]=(a-128)*t+128,r[n+3]=s}})(l,.8),function(e,t){const r=e.data;for(let n=0;n<r.length;n+=4){const e=r[n],i=r[n+1],a=r[n+2],s=r[n+3],o=.3*e+.59*i+.11*a;r[n]=o*(1-t)+e*t,r[n+1]=o*(1-t)+i*t,r[n+2]=o*(1-t)+a*t,r[n+3]=s}}(l,1.5),function(e,t,r){const n=e.data,i=e.width,a=e.height;let s,o,l,u,c,d,h,f,p,m,y,g,v;const _=i-1,b=a-1,w=t+1,x=t+1,I=1/((t+w)*(t+x)),T=[],E=[],S=[],A=[],k=[],C=[];for(;r-- >0;){for(v=g=0,d=0;d<a;d++){for(s=n[v]*w,o=n[v+1]*w,l=n[v+2]*w,u=n[v+3]*w,h=1;h<=t;h++)f=v+((h>_?_:h)<<2),s+=n[f++],o+=n[f++],l+=n[f++],u+=n[f];for(c=0;c<i;c++)T[g]=s,E[g]=o,S[g]=l,A[g]=u,0===d&&(k[c]=Math.min(c+w,_)<<2,C[c]=Math.max(c-t,0)<<2),p=v+k[c],m=v+C[c],s+=n[p++]-n[m++],o+=n[p++]-n[m++],l+=n[p++]-n[m++],u+=n[p]-n[m],g++;v+=i<<2}for(c=0;c<i;c++){for(y=c,s=T[y]*x,o=E[y]*x,l=S[y]*x,u=A[y]*x,h=1;h<=t;h++)y+=h>b?0:i,s+=T[y],o+=E[y],l+=S[y],u+=A[y];for(g=c<<2,d=0;d<a;d++)n[g]=s*I+.5|0,n[g+1]=o*I+.5|0,n[g+2]=l*I+.5|0,n[g+3]=u*I+.5|0,0===c&&(k[d]=Math.min(d+x,b)*i,C[d]=Math.max(d-t,0)*i),p=c+k[d],m=c+C[d],s+=T[p]-T[m],o+=E[p]-E[m],l+=S[p]-S[m],u+=A[p]-A[m],g+=i<<2}}}(l,10,4);const u=new AT(this.gl,this.mainProgram,this.vertexBuffer,this.indexBuffer,l);this.sprites.push(u),this.playTime=1e5*Math.random(),this.lastFrameTime=performance.now(),console.info(1e4*Math.random());const c=Number.parseInt((1e4*Math.random()).toFixed(0))%3;this.IllIlllIlIIlllI=0===c?[-1.3,-.9]:1===c?[-1.1,-.9]:[-1.3,-.9],this.requestTick()}setHasLyric(e){this.hasLyric=e,this.requestTick()}getElement(){return this.canvas}dispose(){super.dispose(),this.vertexBuffer.dispose(),this.indexBuffer.dispose(),this.noiseTexture.dispose();for(const e of this.sprites)e.dispose();this.copyProgram.dispose(),this.blendProgram.dispose(),this.mainProgram.dispose();for(const e of this.fb)e.dispose();for(const e of this.historyFrameBuffer)e.dispose();this.tickHandle&&(cancelAnimationFrame(this.tickHandle),this.tickHandle=0)}};gT(CT,"rawVertexBuffer",new Float32Array([-1,-1,1,-1,-1,1,1,1])),gT(CT,"rawIndexBuffer",new Uint16Array([0,1,2,1,2,3]));let PT=CT;class RT{constructor(e,t){gT(this,"element"),gT(this,"renderer"),this.renderer=e,this.element=t,t.style.pointerEvents="none",t.style.zIndex="-1",t.style.contain="strict"}static new(e){const t=document.createElement("canvas");return new RT(new e(t),t)}setRenderScale(e){this.renderer.setRenderScale(e)}setFlowSpeed(e){this.renderer.setFlowSpeed(e)}setStaticMode(e){this.renderer.setStaticMode(e)}setFPS(e){this.renderer.setFPS(e)}pause(){this.renderer.pause()}resume(){this.renderer.resume()}setLowFreqVolume(e){this.renderer.setLowFreqVolume(e)}setHasLyric(e){this.renderer.setHasLyric(e)}setAlbum(e,t){return this.renderer.setAlbum(e,t)}getElement(){return this.element}dispose(){this.renderer.dispose(),this.element.remove()}}function MT(e){return function(e){return t=>(e(t+.001)-e(t-.001))/.002}(e)}class LT{constructor(e=0){gT(this,"currentPosition",0),gT(this,"targetPosition",0),gT(this,"currentTime",0),gT(this,"params",{}),gT(this,"currentSolver"),gT(this,"getV"),gT(this,"getV2"),gT(this,"queueParams"),gT(this,"queuePosition"),this.targetPosition=e,this.currentPosition=this.targetPosition,this.currentSolver=()=>this.targetPosition,this.getV=()=>0,this.getV2=()=>0}resetSolver(){const e=this.getV(this.currentTime);this.currentTime=0,this.currentSolver=function(e,t,r,n=0,i){const a=(null==i?void 0:i.soft)??!1,s=(null==i?void 0:i.stiffness)??100,o=(null==i?void 0:i.damping)??10,l=(null==i?void 0:i.mass)??1,u=r-e;if(a||1<=o/(2*Math.sqrt(s*l))){const i=-Math.sqrt(s/l),a=-i*u-t;return t=>(t-=n)<0?e:r-(u+t*a)*Math.E**(t*i)}const c=Math.sqrt(4*l*s-o**2),d=(o*u-2*l*t)/c,h=.5*c/l,f=-.5*o/l;return t=>(t-=n)<0?e:r-(Math.cos(t*h)*u+Math.sin(t*h)*d)*Math.E**(t*f)}(this.currentPosition,e,this.targetPosition,0,this.params),this.getV=MT(this.currentSolver),this.getV2=MT(this.getV)}arrived(){return Math.abs(this.targetPosition-this.currentPosition)<.01&&this.getV(this.currentTime)<.01&&this.getV2(this.currentTime)<.01&&void 0===this.queueParams&&void 0===this.queuePosition}setPosition(e){this.targetPosition=e,this.currentPosition=e,this.currentSolver=()=>this.targetPosition,this.getV=()=>0,this.getV2=()=>0}update(e=0){this.currentTime+=e,this.currentPosition=this.currentSolver(this.currentTime),this.queueParams&&(this.queueParams.time-=e,this.queueParams.time<=0&&this.updateParams({...this.queueParams})),this.queuePosition&&(this.queuePosition.time-=e,this.queuePosition.time<=0&&this.setTargetPosition(this.queuePosition.position)),this.arrived()&&this.setPosition(this.targetPosition)}updateParams(e,t=0){t>0?this.queueParams={...this.queuePosition??{},...e,time:t}:(this.queuePosition=void 0,this.params={...this.params,...e},this.resetSolver())}setTargetPosition(e,t=0){t>0?this.queuePosition={...this.queuePosition??{},position:e,time:t}:(this.queuePosition=void 0,this.targetPosition=e,this.resetSolver())}getCurrentPosition(){return this.currentPosition}}class OT{constructor(e){gT(this,"element",document.createElement("div")),gT(this,"left",0),gT(this,"top",0),gT(this,"delay",0),gT(this,"lineSize",[0,0]),gT(this,"lineTransforms",{posX:new LT(0),posY:new LT(0)}),gT(this,"lastStyle",""),this.lyricPlayer=e,this.element.setAttribute("class",this.lyricPlayer.style.classes.lyricLine),this.rebuildStyle()}measureSize(){return[this.element.clientWidth,this.element.clientHeight]}show(){this.rebuildStyle()}hide(){this.rebuildStyle()}rebuildStyle(){let e=`transform:translate(${this.lineTransforms.posX.getCurrentPosition().toFixed(2)}px,${this.lineTransforms.posY.getCurrentPosition().toFixed(2)}px);`;!this.lyricPlayer.getEnableSpring()&&this.isInSight&&(e+=`transition-delay:${this.delay}ms;`),e!==this.lastStyle&&(this.lastStyle=e,this.element.setAttribute("style",e))}getElement(){return this.element}setTransform(e=this.left,t=this.top,r=!1,n=0){this.left=e,this.top=t,this.delay=1e3*n|0,r||!this.lyricPlayer.getEnableSpring()?(r&&this.element.classList.add(this.lyricPlayer.style.classes.tmpDisableTransition),this.lineTransforms.posX.setPosition(e),this.lineTransforms.posY.setPosition(t),this.lyricPlayer.getEnableSpring()?this.rebuildStyle():this.show(),r&&requestAnimationFrame((()=>{this.element.classList.remove(this.lyricPlayer.style.classes.tmpDisableTransition)}))):(this.lineTransforms.posX.setTargetPosition(e,n),this.lineTransforms.posY.setTargetPosition(t,n))}update(e=0){this.lyricPlayer.getEnableSpring()&&(this.lineTransforms.posX.update(e),this.lineTransforms.posY.update(e),this.isInSight?this.show():this.hide())}get isInSight(){const e=this.lineTransforms.posX.getCurrentPosition(),t=this.lineTransforms.posY.getCurrentPosition(),r=e+this.lineSize[0],n=t+this.lineSize[1],i=this.lyricPlayer.size[0],a=this.lyricPlayer.size[1];return!(e>i||t>a||r<0||n<0)}dispose(){this.element.remove()}}const FT=(e,t,r)=>Math.max(e,Math.min(t,r));class DT{constructor(e){gT(this,"element",document.createElement("div")),gT(this,"dot0",document.createElement("span")),gT(this,"dot1",document.createElement("span")),gT(this,"dot2",document.createElement("span")),gT(this,"left",0),gT(this,"top",0),gT(this,"scale",1),gT(this,"playing",!0),gT(this,"lastStyle",""),gT(this,"currentInterlude"),gT(this,"currentTime",0),gT(this,"interludeTime",0),gT(this,"targetBreatheDuration",1500),this.lyricPlayer=e,this.element.className=this.lyricPlayer.style.classes.interludeDots,this.element.appendChild(this.dot0),this.element.appendChild(this.dot1),this.element.appendChild(this.dot2)}getElement(){return this.element}setTransform(e=this.left,t=this.top){this.left=e,this.top=t,this.update()}setInterlude(e){this.currentInterlude=e,this.currentTime=(null==e?void 0:e[0])??0}pause(){this.playing=!1}resume(){this.playing=!0}update(e=0){if(!this.playing)return;this.currentTime+=e;let t="";if(t+=`transform:translate(${this.left.toFixed(2)}px, ${this.top.toFixed(2)}px)`,this.currentInterlude){const e=this.currentInterlude[1]-this.currentInterlude[0],r=this.currentTime-this.currentInterlude[0];if(r<=e){const n=e/Math.ceil(e/this.targetBreatheDuration);let i=1,a=1;i*=Math.sin(1.5*Math.PI-r/n*2)/20+1,r<1e3&&(i*=1-((1e3-r)/1e3)**2),r<500?a=0:r<1e3&&(a*=(r-500)/500),e-r<750&&(i*=1-function(e){const t=2.5949095;return e<.5?Math.pow(2*e,2)*(7.189819*e-t)/2:(Math.pow(2*e-2,2)*((t+1)*(2*e-2)+t)+2)/2}((750-(e-r))/750/2)),e-r<375&&(a*=FT(0,(e-r)/375,1));const s=Math.max(0,e-750);i=.7*Math.max(0,i),t+=` scale(${i})`;const o=FT(.25,3*r/s*.75,1),l=FT(.25,3*(r-s/3)/s*.75,1),u=FT(.25,3*(r-s/3*2)/s*.75,1);this.dot0.style.opacity=`${FT(0,Math.max(0,a*o),1)}`,this.dot1.style.opacity=`${FT(0,Math.max(0,a*l),1)}`,this.dot2.style.opacity=`${FT(0,Math.max(0,a*u),1)}`}else t+=" scale(0)",this.dot0.style.opacity="0",this.dot1.style.opacity="0",this.dot2.style.opacity="0"}else t+=" scale(0)",this.dot0.style.opacity="0",this.dot1.style.opacity="0",this.dot2.style.opacity="0";t+=";",this.lastStyle!==t&&(this.element.setAttribute("style",t),this.lastStyle=t)}dispose(){this.element.remove()}}function NT(e,t=4){return`matrix3d(${e.map(((e,r)=>e.toFixed(t))).join(", ")})`}function BT(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var UT=.1,jT="function"==typeof Float32Array;function GT(e,t){return 1-3*t+3*e}function zT(e,t){return 3*t-6*e}function HT(e){return 3*e}function VT(e,t,r){return((GT(t,r)*e+zT(t,r))*e+HT(t))*e}function $T(e,t,r){return 3*GT(t,r)*e*e+2*zT(t,r)*e+HT(t)}function XT(e){return e}var qT=function(e,t,r,n){if(!(0<=e&&e<=1&&0<=r&&r<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&r===n)return XT;for(var i=jT?new Float32Array(11):new Array(11),a=0;a<11;++a)i[a]=VT(a*UT,e,r);function s(t){for(var n=0,a=1;10!==a&&i[a]<=t;++a)n+=UT;--a;var s=n+(t-i[a])/(i[a+1]-i[a])*UT,o=$T(s,e,r);return o>=.001?function(e,t,r,n){for(var i=0;i<4;++i){var a=$T(t,r,n);if(0===a)return t;t-=(VT(t,r,n)-e)/a}return t}(t,s,e,r):0===o?s:function(e,t,r,n,i){var a,s,o=0;do{(a=VT(s=t+(r-t)/2,n,i)-e)>0?r=s:t=s}while(Math.abs(a)>1e-7&&++o<10);return s}(t,n,n+UT,e,r)}return function(e){return 0===e?0:1===e?1:VT(s(e),t,n)}};const WT=BT(qT),YT=/^[\p{Unified_Ideograph}\u0800-\u9FFC]+$/u,KT=(e,t)=>r=>Math.min(1,Math.max(0,(r-e)/(t-e))),ZT=.4,QT=KT(0,ZT),JT=KT(ZT,1),eE=e=>{const t=WT(.3,0,.25,1),r=WT(.5,0,.3,1);return n=>n<e?t(QT(n)):1-r(JT(n))},tE=eE(ZT);function rE(e,t=0,r="rgba(0,0,0,0.85)",n="rgba(0,0,0,0.25)"){const i=2+e+t,a=e/i,s=(1-a)/2;return[`linear-gradient(to right,${r} ${100*s}%,${n} ${100*(s+a)}%)`,i]}function nE(e){return e.endTime-e.startTime>=1e3&&e.word.trim().length<=7&&e.word.trim().length>=1}class iE extends MouseEvent{constructor(e,t){super(t.type,t),this.line=e}}class aE extends EventTarget{constructor(e,t={words:[],translatedLyric:"",romanLyric:"",startTime:0,endTime:0,isBG:!1,isDuet:!1}){super(),gT(this,"element",document.createElement("div")),gT(this,"left",0),gT(this,"top",0),gT(this,"scale",1),gT(this,"blur",0),gT(this,"delay",0),gT(this,"splittedWords",[]),gT(this,"lineSize",[0,0]),gT(this,"lineTransforms",{posX:new LT(0),posY:new LT(0),scale:new LT(1)}),gT(this,"listenersMap",new Map),gT(this,"onMouseEvent",(e=>{const t=new iE(this,e);for(const r of this.listenersMap.get(e.type)??[])r.call(this,t);if(!this.dispatchEvent(t)||t.defaultPrevented)return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1})),gT(this,"isEnabled",!1),gT(this,"_hide",!0),gT(this,"_prevParentEl",null),gT(this,"lastStyle",""),this.lyricPlayer=e,this.lyricLine=t,this._prevParentEl=e.getElement(),this.element.setAttribute("class",this.lyricPlayer.style.classes.lyricLine),this.lyricLine.isBG&&this.element.classList.add(this.lyricPlayer.style.classes.lyricBgLine),this.lyricLine.isDuet&&this.element.classList.add(this.lyricPlayer.style.classes.lyricDuetLine),this.element.appendChild(document.createElement("div")),this.element.appendChild(document.createElement("div")),this.element.appendChild(document.createElement("div"));const r=this.element.children[0],n=this.element.children[1],i=this.element.children[2];r.setAttribute("class",this.lyricPlayer.style.classes.lyricMainLine),n.setAttribute("class",this.lyricPlayer.style.classes.lyricSubLine),i.setAttribute("class",this.lyricPlayer.style.classes.lyricSubLine),this.rebuildElement(),this.rebuildStyle()}addMouseEventListener(e,t,r){if(t){const n=this.listenersMap.get(e)??new Set;0===n.size&&this.element.addEventListener(e,this.onMouseEvent,r),n.add(t),this.listenersMap.set(e,n)}}removeMouseEventListener(e,t,r){if(t){const n=this.listenersMap.get(e);n&&(n.delete(t),0===n.size&&this.element.removeEventListener(e,this.onMouseEvent,r))}}enable(e=this.lyricLine.startTime){this.isEnabled=!0,this.element.classList.add("active");const t=this.element.children[0];for(const r of this.splittedWords){for(const e of r.elementAnimations)e.currentTime=0,e.playbackRate=1,e.play();for(const t of r.maskAnimations)t.currentTime=Math.min(this.totalDuration,Math.max(0,e-this.lyricLine.startTime)),t.playbackRate=1,t.play()}t.classList.add("active")}disable(e=0){this.isEnabled=!1,this.element.classList.remove("active");const t=this.element.children[0];for(const r of this.splittedWords){for(const e of r.elementAnimations)"float-word"===e.id&&(e.playbackRate=-1,e.play());for(const t of r.maskAnimations)t.currentTime=Math.min(this.totalDuration,Math.max(0,e-this.lyricLine.startTime)),t.pause()}t.classList.remove("active")}resume(){if(this.isEnabled)for(const e of this.splittedWords)for(const t of e.maskAnimations)t.play()}pause(){if(this.isEnabled)for(const e of this.splittedWords)for(const t of e.maskAnimations)t.pause()}setMaskAnimationState(e=0){const t=e-this.lyricLine.startTime;for(const r of this.splittedWords)for(const e of r.maskAnimations)e.currentTime=Math.min(this.totalDuration,Math.max(0,t)),e.playbackRate=1,t>=0&&t<this.totalDuration?e.play():e.pause()}measureSize(){this._hide&&(this._prevParentEl&&this._prevParentEl.appendChild(this.element),this.element.style.display="",this.element.style.visibility="hidden");const e=[this.element.clientWidth,this.element.clientHeight];return this._hide&&(this._prevParentEl&&this.element.remove(),this.element.style.display="none",this.element.style.visibility=""),e}setLine(e){this.lyricLine=e,this.lyricLine.isBG?this.element.classList.add(this.lyricPlayer.style.classes.lyricBgLine):this.element.classList.remove(this.lyricPlayer.style.classes.lyricBgLine),this.lyricLine.isDuet?this.element.classList.add(this.lyricPlayer.style.classes.lyricDuetLine):this.element.classList.remove(this.lyricPlayer.style.classes.lyricDuetLine),this.rebuildElement(),this.rebuildStyle()}getLine(){return this.lyricLine}show(){this._hide=!1,this._prevParentEl&&(this._prevParentEl.appendChild(this.element),this._prevParentEl=null),this.rebuildStyle()}hide(){this._hide=!0,this.element.parentElement&&(this._prevParentEl=this.element.parentElement,this.element.remove()),this.rebuildStyle()}rebuildStyle(){if(this._hide)return void("display:none;transform:translate(0,-10000px);"!==this.lastStyle&&(this.lastStyle="display:none;transform:translate(0,-10000px);",this.element.setAttribute("style","display:none;transform:translate(0,-10000px);")));let e="";e+=`transform:translate(${this.lineTransforms.posX.getCurrentPosition().toFixed(1)}px,${this.lineTransforms.posY.getCurrentPosition().toFixed(1)}px) scale(${this.lineTransforms.scale.getCurrentPosition().toFixed(4)});`,!this.lyricPlayer.getEnableSpring()&&this.isInSight&&(e+=`transition-delay:${this.delay}ms;`),e+=`filter:blur(${Math.min(32,this.blur)}px);`,e!==this.lastStyle&&(this.lastStyle=e,this.element.setAttribute("style",e))}rebuildElement(){const e=this.element.children[0],t=this.element.children[1],r=this.element.children[2];if(this.lyricPlayer._getIsNonDynamic())return e.innerText=this.lyricLine.words.map((e=>e.word)).join(""),t.innerText=this.lyricLine.translatedLyric,void(r.innerText=this.lyricLine.romanLyric);const n=function(e){const t=[];for(const a of e){const e=a.word.replace(/\s/g,"").length,r=a.word.split(" ").filter((e=>e.trim().length>0));if(r.length>1){a.word.startsWith(" ")&&t.push({word:" ",startTime:0,endTime:0});let n=0;for(const i of r){const r={word:i,startTime:a.startTime+n/e*(a.endTime-a.startTime),endTime:a.startTime+(n+i.length)/e*(a.endTime-a.startTime)};t.push(r),t.push({word:" ",startTime:0,endTime:0}),n+=i.length}a.word.endsWith(" ")||t.pop()}else t.push(a)}let r=[],n=[];const i=[];for(const a of t){const e=a.word;r.push(e),n.push(a),e.length>0&&0===e.trim().length?(r.pop(),n.pop(),1===n.length?i.push(n[0]):n.length>1&&i.push(n),i.push(a),r=[],n=[]):(!/^\s*[^\s]*\s*$/.test(r.join(""))||YT.test(e))&&(r.pop(),n.pop(),1===n.length?i.push(n[0]):n.length>1&&i.push(n),r=[e],n=[a])}return 1===n.length?i.push(n[0]):i.push(n),i}(this.lyricLine.words);e.innerHTML="",this.splittedWords=[];for(const i of n)if(Array.isArray(i)){if(0===i.length)continue;const t=i.reduce(((e,t)=>(e.endTime=Math.max(e.endTime,t.endTime),e.startTime=Math.min(e.startTime,t.startTime),e.word+=t.word,e)),{word:"",startTime:1/0,endTime:-1/0}),r=i.map((e=>nE(e))).reduce(((e,t)=>e||t),nE(t)),n=document.createElement("span");n.classList.add("emphasize-wrapper");const a=[];for(const e of i){const i=document.createElement("span");if(r){i.classList.add("emphasize");const n=[];for(const t of e.word.trim().split("")){const e=document.createElement("span");e.innerText=t,n.push(e),a.push(e),i.appendChild(e)}const s={...e,mainElement:i,subElements:n,elementAnimations:[this.initFloatAnimation(t,i)],maskAnimations:[],width:0,height:0,padding:0,shouldEmphasize:r};this.splittedWords.push(s)}else i.innerText=e.word,this.splittedWords.push({...e,mainElement:i,subElements:[],elementAnimations:[this.initFloatAnimation(e,i)],maskAnimations:[],width:0,height:0,padding:0,shouldEmphasize:r});n.appendChild(i)}r&&this.splittedWords[this.splittedWords.length-1].elementAnimations.push(...this.initEmphasizeAnimation(a,t.endTime-t.startTime,t.startTime-this.lyricLine.startTime)),t.word.trimStart()!==t.word&&e.appendChild(document.createTextNode(" ")),e.appendChild(n),t.word.trimEnd()!==t.word&&e.appendChild(document.createTextNode(" "))}else if(0===i.word.trim().length)e.appendChild(document.createTextNode(" "));else{const t=nE(i),r=document.createElement("span"),n={...i,mainElement:r,subElements:[],elementAnimations:[this.initFloatAnimation(i,r)],maskAnimations:[],width:0,height:0,padding:0,shouldEmphasize:t};if(t){r.classList.add("emphasize");const e=[];for(const n of i.word.trim().split("")){const t=document.createElement("span");t.innerText=n,e.push(t),r.appendChild(t)}n.subElements=e;const t=Math.abs(n.endTime-n.startTime);n.elementAnimations.push(...this.initEmphasizeAnimation(e,t,n.startTime-this.lyricLine.startTime))}else r.innerText=i.word.trim();i.word.trimStart()!==i.word&&e.appendChild(document.createTextNode(" ")),e.appendChild(r),i.word.trimEnd()!==i.word&&e.appendChild(document.createTextNode(" ")),this.splittedWords.push(n)}t.innerText=this.lyricLine.translatedLyric,r.innerText=this.lyricLine.romanLyric}initFloatAnimation(e,t){const r=e.startTime-this.lyricLine.startTime,n=Math.max(1e3,e.endTime-e.startTime);let i=.05;this.lyricLine.isBG&&(i*=2),nE(e)&&n<1200&&(i=0);const a=t.animate([{transform:"translateY(0px)"},{transform:`translateY(${-i}em)`}],{duration:isFinite(n)?n:0,delay:isFinite(r)?r:0,id:"float-word",composite:"add",fill:"both",easing:"ease-out"});return a.pause(),a}initEmphasizeAnimation(e,t,r){const n=Math.max(0,r),i=Math.max(1e3,t);let a="float-and-glow";i<1200&&(a="float-only");let s=[];switch(a){case"float-and-glow":{let t=0,r=0;i>=1200&&i<2e3?(t=.7,r=.5):i>=2e3&&i<3e3?(t=.8,r=.6):(i>=3e3&&i<4e3||i>=4e3)&&(t=1,r=.8);const a=Number.isFinite(i)?Math.max(1.2*i,2e3):0,o=eE(ZT);s=e.flatMap(((e,s,l)=>{const u=n+i/3/l.length*s,c=[],d=new Array(32).fill(0).map(((e,n)=>{const i=(n+1)/32,a=o(i),s=Math.sin(i*Math.PI*2),l=Math.max(0,i<ZT?a/2:a-.5)*r,u=function(e,t=1,r={x:0,y:0}){const[n,i]=[r.x,r.y];return[e[0]*t,e[1]*t,e[2]*t,e[3],e[4]*t,e[5]*t,e[6]*t,e[7],e[8]*t,e[9]*t,e[10]*t,e[11],e[12]-n*t+n,e[13]-i*t+i,e[14],e[15]]}([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],1+.1*a*t);return{offset:i,transform:`${NT(u,4)} translate(${.005*s*t}em,${.05*-a}em)`,textShadow:`rgba(255, 255, 255, ${l}) 0 0 10px`}})),h=e.animate(d,{duration:a,delay:Number.isFinite(u)?u:0,id:`emphasize-word-float-and-glow-${e.innerText}-${s}`,iterations:1,composite:"replace",easing:"linear",fill:"both"});return h.onfinish=()=>{h.pause()},h.pause(),c.push(h),c}));break}case"float-only":s=e.flatMap(((e,t,r)=>{const a=n+i/1.5/r.length*t,s=[],o=new Array(32).fill(0).map(((e,t)=>{const r=(t+1)/32;return{offset:r,transform:`translateY(${.05*-(r<ZT?tE(r):1)}em)`}})),l=e.animate(o,{duration:Number.isFinite(i)?2*i:0,delay:Number.isFinite(a)?a:0,id:`emphasize-word-float-only-${e.innerText}-${t}`,iterations:1,composite:"replace",easing:"linear",fill:"both"});return l.onfinish=()=>{l.pause()},l.pause(),s.push(l),s}))}return s}get totalDuration(){return this.lyricLine.endTime-this.lyricLine.startTime}updateMaskImage(){this._hide&&(this._prevParentEl&&this._prevParentEl.appendChild(this.element),this.element.style.display="",this.element.style.visibility="hidden");for(const e of this.splittedWords){const t=e.mainElement;t?(e.padding=parseFloat(getComputedStyle(t).paddingLeft),e.width=t.clientWidth-2*e.padding,e.height=t.clientHeight-2*e.padding):(e.width=0,e.height=0,e.padding=0)}this.lyricPlayer.supportMaskImage?this.generateWebAnimationBasedMaskImage():this.generateCalcBasedMaskImage(),this._hide&&(this._prevParentEl&&this.element.remove(),this.element.style.display="none",this.element.style.visibility="")}generateCalcBasedMaskImage(){for(const e of this.splittedWords){const t=e.mainElement;if(t){e.width=t.clientWidth,e.height=t.clientHeight;const r=e.height/2,[n,i]=rE(r/e.width),a=100*i+"% 100%";this.lyricPlayer.supportMaskImage?(t.style.maskImage=n,t.style.maskRepeat="no-repeat",t.style.maskOrigin="left",t.style.maskSize=a):(t.style.webkitMaskImage=n,t.style.webkitMaskRepeat="no-repeat",t.style.webkitMaskOrigin="left",t.style.webkitMaskSize=a);const s=e.width+r,o=`clamp(${-s}px,calc(${-s}px + (var(--amll-player-time) - ${e.startTime})*${s/Math.abs(e.endTime-e.startTime)}px),0px) 0px, left top`;t.style.maskPosition=o,t.style.webkitMaskPosition=o}}}generateWebAnimationBasedMaskImage(){const e=this.totalDuration;this.splittedWords.forEach(((t,r)=>{const n=t.mainElement;if(n){const a=t.height/2,[s,o]=rE(a/(t.width+2*t.padding)),l=100*o+"% 100%";this.lyricPlayer.supportMaskImage?(n.style.maskImage=s,n.style.maskRepeat="no-repeat",n.style.maskOrigin="left",n.style.maskSize=l):(n.style.webkitMaskImage=s,n.style.webkitMaskRepeat="no-repeat",n.style.webkitMaskOrigin="left",n.style.webkitMaskSize=l);const u=this.splittedWords.slice(0,r).reduce(((e,t)=>e+t.width),0)+(this.splittedWords[0]?a:0),c=-(t.width+2*t.padding+a),d=e=>Math.max(c,Math.min(0,e));let h=-u-t.width-t.padding-a,f=0;const p=[];let m=h,y=0;const g=()=>{const e=h-m,t=Math.max(0,Math.min(1,f)),r=t-y,n=Math.abs(r/e);if(h>c&&m<c){const e=Math.abs(m-c)*n,t=`${d(m)}px 0`,r={offset:y+e,maskPosition:t};p.push(r)}if(h>0&&m<0){const e=Math.abs(m)*n,t=`${d(h)}px 0`,r={offset:y+e,maskPosition:t};p.push(r)}const i={offset:t,maskPosition:`${d(h)}px 0`};p.push(i),m=h,y=t};g();let v=0;this.splittedWords.forEach(((t,r)=>{{const r=t.startTime-this.lyricLine.startTime,n=r-v;f+=n/e,n>0&&g(),v=r}{const n=t.endTime-t.startTime;f+=n/e,h+=t.width,0===r&&(h+=1.5*a),r===this.splittedWords.length-1&&(h+=.5*a),n>0&&g(),v+=n}}));for(const e of t.maskAnimations)e.cancel();try{const i=n.animate(p,{duration:e||1,id:`fade-word-${t.word}-${r}`,easing:"linear",fill:"both"});i.pause(),t.maskAnimations=[i]}catch(i){console.warn("应用渐变动画发生错误",p,e,i)}}}))}getElement(){return this.element}setTransform(e=this.left,t=this.top,r=this.scale,n=1,i=0,a=!1,s=0){const o=Math.round(i),l=this.isInSight,u=this.lyricPlayer.getEnableSpring();this.left=e,this.top=t,this.scale=r,this.delay=1e3*s|0;const c=this.element.children[0],d=this.element.children[1],h=this.element.children[2];if(c.style.opacity=`${n}`,d.style.opacity=""+n/2,h.style.opacity=""+n/2,a||!u){if(this.blur=Math.min(32,o),a&&this.element.classList.add(this.lyricPlayer.style.classes.tmpDisableTransition),this.lineTransforms.posX.setPosition(e),this.lineTransforms.posY.setPosition(t),this.lineTransforms.scale.setPosition(r),u)this.rebuildStyle();else{const e=this.isInSight;l||e?this.show():this.hide()}a&&requestAnimationFrame((()=>{this.element.classList.remove(this.lyricPlayer.style.classes.tmpDisableTransition)}))}else this.lineTransforms.posX.setTargetPosition(e,s),this.lineTransforms.posY.setTargetPosition(t,s),this.lineTransforms.scale.setTargetPosition(r),this.blur!==Math.min(32,o)&&(this.blur=Math.min(32,o),this.element.style.filter=`blur(${Math.min(32,o)}px)`)}update(e=0){this.lyricPlayer.getEnableSpring()&&(this.lineTransforms.posX.update(e),this.lineTransforms.posY.update(e),this.lineTransforms.scale.update(e),this.isInSight?this.show():this.hide())}_getDebugTargetPos(){return`[位移: ${this.left}, ${this.top}; 缩放: ${this.scale}; 延时: ${this.delay}]`}get isInSight(){const e=this.lineTransforms.posX.getCurrentPosition(),t=this.lineTransforms.posY.getCurrentPosition(),r=e+this.lineSize[0],n=t+this.lineSize[1],i=this.lyricPlayer.size[0],a=this.lyricPlayer.size[1];return!(e>i||r<0||t>a||n<0)}dispose(){this.element.remove()}}const sE=xx((void 0===oE&&(oE={}),{plugins:[{onCreateRule:function(e,t,r){if("function"!=typeof t)return null;var n=yw(e,{},r);return n[Ax]=t,n},onProcessStyle:function(e,t){if(Sx in t||Ax in t)return e;var r={};for(var n in e){var i=e[n];"function"==typeof i&&(delete e[n],r[n]=i)}return t[Sx]=r,e},onUpdate:function(e,t,r,n){var i=t,a=i[Ax];a&&(i.style=a(e)||{});var s=i[Sx];if(s)for(var o in s)i.prop(o,s[o](e),n)}},(uE=oE.observable,{onCreateRule:function(e,t,r){if(!Rx(t))return null;var n=t,i=yw(e,{},r);return n.subscribe((function(e){for(var t in e)i.prop(t,e[t],uE)})),i},onProcessRule:function(e){if(!e||"style"===e.type){var t=e,r=t.style,n=function(e){var n=r[e];if(!Rx(n))return"continue";delete r[e],n.subscribe({next:function(r){t.prop(e,r,uE)}})};for(var i in r)n(i)}}}),{onProcessRule:Lx},jx(),{onProcessStyle:function(e,t,r){return"extend"in e?Hx(e,t,r):e},onChangeValue:function(e,t,r){if("extend"!==t)return e;if(null==e||!1===e){for(var n in r[zx])r.prop(n,null);return r[zx]=null,null}if("object"==typeof e){for(var i in e)r.prop(i,e[i]);r[zx]=e}return null}},qx(),Yx(),{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=tI(e[t]);return e}return tI(e)},onChangeValue:function(e,t,r){if(0===t.indexOf("--"))return e;var n=eI(t);return t===n?e:(r.prop(n,e),null)}},lI(oE.defaultUnit),{onProcessStyle:function(e,t){if(!e||"style"!==t.type)return e;if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=mI(e[r],t);return e}return mI(e,t)}},mT(),(lE=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length},{onProcessStyle:function(e,t){if("style"!==t.type)return e;for(var r={},n=Object.keys(e).sort(lE),i=0;i<n.length;i++)r[n[i]]=e[n[i]];return r}})]}));var oE,lE,uE;class cE extends MouseEvent{constructor(e,t,r){super(`line-${r.type}`,r),this.lineIndex=e,this.line=t}}class dE extends EventTarget{constructor(){super(),gT(this,"element",document.createElement("div")),gT(this,"currentTime",0),gT(this,"lyricLines",[]),gT(this,"processedLines",[]),gT(this,"lyricLinesEl",[]),gT(this,"lyricLinesSize",new WeakMap),gT(this,"lyricLinesIndexes",new WeakMap),gT(this,"hotLines",new Set),gT(this,"bufferedLines",new Set),gT(this,"scrollToIndex",0),gT(this,"allowScroll",!0),gT(this,"scrolledHandler",0),gT(this,"isScrolled",!1),gT(this,"invokedByScrollEvent",!1),gT(this,"scrollOffset",0),gT(this,"hidePassedLines",!1),gT(this,"resizeObserver",new ResizeObserver((e=>{const t=e[0].contentRect;this.size[0]=t.width,this.size[1]=t.height;const r=getComputedStyle(e[0].target),n=this.element.clientWidth-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight),i=this.element.clientHeight-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom);this.innerSize[0]=n,this.innerSize[1]=i,this.rebuildStyle(),this.calcLayout(!0,!0),this.lyricLinesEl.forEach((e=>e.updateMaskImage()))}))),gT(this,"posXSpringParams",{mass:1,damping:10,stiffness:100}),gT(this,"posYSpringParams",{mass:1,damping:16.5,stiffness:100}),gT(this,"scaleSpringParams",{mass:1,damping:20,stiffness:100}),gT(this,"emUnit",Math.max(Math.min(.05*innerHeight,.1*innerWidth),12)),gT(this,"padding",this.emUnit),gT(this,"enableBlur",!0),gT(this,"enableScale",!0),gT(this,"interludeDots"),gT(this,"interludeDotsSize",[0,0]),gT(this,"bottomLine"),gT(this,"supportPlusLighter",CSS.supports("mix-blend-mode","plus-lighter")),gT(this,"supportMaskImage",CSS.supports("mask-image","none")),gT(this,"disableSpring",!1),gT(this,"alignAnchor","center"),gT(this,"alignPosition",.5),gT(this,"isNonDynamic",!1),gT(this,"scrollBoundary",[0,0]),gT(this,"size",[0,0]),gT(this,"innerSize",[0,0]),gT(this,"onLineClickedHandler",(e=>{const t=new cE(this.lyricLinesIndexes.get(e.line)??-1,e.line,e);this.dispatchEvent(t)||(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())})),gT(this,"style",sE.createStyleSheet({lyricPlayer:{userSelect:"none",fontSize:"var(--amll-lyric-player-font-size,max(min(6vh, 8vw), 12px))",padding:"1em",margin:"-1em",width:"100%",height:"100%",overflow:"hidden",boxSizing:"content-box",maxWidth:"100%",maxHeight:"100%",zIndex:1,color:"var(--amll-lyric-view-color,white)",mixBlendMode:"plus-lighter",contain:"strict","&:hover":{"& $lyricLine":{filter:"unset !important"}}},lyricLine:{position:"absolute",backfaceVisibility:"hidden",transformOrigin:"left",width:"var(--amll-lyric-player-width,100%)",height:"fit-content",padding:"2vh 1.05em",margin:"0 -1em",contain:"content",willChange:"filter,transform,opacity",transition:"filter 0.25s, background-color 0.25s, box-shadow 0.25s",boxSizing:"content-box",borderRadius:"8px","&:has(>*):hover":{backgroundColor:"var(--amll-lyric-view-hover-bg-color,#fff1)",boxShadow:"0 0 0 8px var(--amll-lyric-view-hover-bg-color,#fff1)"},"&:has(>*):active":{boxShadow:"0 0 0 4px var(--amll-lyric-view-hover-bg-color,#fff1)"}},"@media (max-width: 1024px)":{lyricLine:{padding:"1vh 1em"}},lyricDuetLine:{textAlign:"right",transformOrigin:"right"},lyricBgLine:{opacity:0,fontSize:"max(50%, 10px)",transition:"opacity 0.25s","&.active":{transition:"opacity 0.25s 0.25s",opacity:.4}},lyricMainLine:{transition:"opacity 0.3s 0.25s",willChange:"opacity",margin:"-1em",padding:"1em","& span":{display:"inline-block"},"& > span, span.emphasize-wrapper":{whiteSpace:"pre-wrap",willChange:"transform,display,mask-image",display:"inline-block","&.emphasize, span.emphasize":{padding:"1em",margin:"-1em","& > span":{padding:"1em",margin:"-1em"}}}},lyricSubLine:{fontSize:"max(0.5em, 10px)",transition:"opacity 0.3s 0.25s",opacity:.3},disableSpring:{"& > *":{transition:"filter 0.25s, transform 0.5s, background-color 0.25s, box-shadow 0.25s"}},interludeDots:{height:"clamp(0.5em,1vh,3em)",transformOrigin:"center",width:"fit-content",padding:"2.5% 0",position:"absolute",display:"flex",gap:"0.25em",left:"1em","& > *":{height:"clamp(0.5em,1vh,3em)",display:"inline-block",borderRadius:"50%",aspectRatio:"1 / 1",backgroundColor:"var(--amll-lyric-view-color,white)",marginRight:"4px"},"&.duet":{right:"1em",transformOrigin:"center"}},"@supports (mix-blend-mode: plus-lighter)":{lyricSubLine:{opacity:.3}},tmpDisableTransition:{transition:"none !important"}})),gT(this,"_baseFontSize",parseFloat(getComputedStyle(this.element).fontSize)),gT(this,"isPageVisible",!0),gT(this,"onPageShow",(()=>{this.isPageVisible=!0,this.setCurrentTime(this.currentTime,!0)})),gT(this,"onPageHide",(()=>{this.isPageVisible=!1})),this.interludeDots=new DT(this),this.bottomLine=new OT(this),this.element.setAttribute("class",this.style.classes.lyricPlayer),this.disableSpring&&this.element.classList.add(this.style.classes.disableSpring),this.rebuildStyle(),this.resizeObserver.observe(this.element),this.element.appendChild(this.interludeDots.getElement()),this.element.appendChild(this.bottomLine.getElement()),this.style.attach(),this.interludeDots.setTransform(0,200),window.addEventListener("pageshow",this.onPageShow),window.addEventListener("pagehide",this.onPageHide);let e=0,t="none",r=0,n=0,i=0,a=Symbol("amll-scroll"),s=0,o=0;this.element.addEventListener("touchstart",(t=>{this.beginScrollHandler()&&(t.preventDefault(),e=this.scrollOffset,r=t.touches[0].screenY,s=r,n=Date.now(),i=0)})),this.element.addEventListener("touchmove",(i=>{if(this.beginScrollHandler()){i.preventDefault();const a=i.touches[0].screenY,l=a-r,u=a-s,c=u>0?"down":u<0?"up":"none";t!==c?(t=c,e=this.scrollOffset,r=a,n=Date.now()):this.scrollOffset=e-l,s=a,o=Date.now(),this.limitScrollOffset(),this.calcLayout(!0)}})),this.element.addEventListener("touchend",(t=>{if(this.beginScrollHandler()){t.preventDefault(),r=0;const s=Date.now();if(s-o>100)return this.endScrollHandler();const l=s-n;i=(this.scrollOffset-e)/l*1e3;let u=0;const c=Symbol("amll-scroll");a=c;const d=e=>{u||(u=e),a===c&&this.beginScrollHandler()&&(this.scrollOffset+=i*(e-u)/1e3,i*=.99,this.limitScrollOffset(),this.calcLayout(!0),Math.abs(i)>1&&!this.scrollBoundary.includes(this.scrollOffset)&&requestAnimationFrame(d),this.endScrollHandler(),u=e)};requestAnimationFrame(d),this.endScrollHandler()}})),this.element.addEventListener("wheel",(e=>{this.beginScrollHandler()&&(e.deltaMode===e.DOM_DELTA_PIXEL?(this.scrollOffset+=e.deltaY,this.limitScrollOffset(),this.calcLayout(!0)):(this.scrollOffset+=50*e.deltaY,this.limitScrollOffset(),this.calcLayout(!1)),this.endScrollHandler())}))}_getIsNonDynamic(){return this.isNonDynamic}setEnableSpring(e=!0){this.disableSpring=!e,e?this.element.classList.remove(this.style.classes.disableSpring):this.element.classList.add(this.style.classes.disableSpring),this.calcLayout(!0)}getEnableSpring(){return!this.disableSpring}setEnableScale(e=!0){this.enableScale=e,this.calcLayout()}getEnableScale(){return this.enableScale}get baseFontSize(){return this._baseFontSize}beginScrollHandler(){const e=this.allowScroll;return e&&(this.isScrolled=!0,this.invokedByScrollEvent=!0,clearTimeout(this.scrolledHandler),this.scrolledHandler=setTimeout((()=>{this.isScrolled=!1,this.scrollOffset=0}),5e3)),e}endScrollHandler(){this.invokedByScrollEvent=!1}limitScrollOffset(){this.scrollOffset=Math.max(Math.min(this.scrollBoundary[1],this.scrollOffset),this.scrollBoundary[0])}getCurrentInterlude(){var e,t,r;if(this.bufferedLines.size>0)return;const n=this.currentTime+20,i=this.scrollToIndex;if(0===i){if(null!=(e=this.processedLines[0])&&e.startTime&&this.processedLines[0].startTime>n)return[n,Math.max(n,this.processedLines[0].startTime-250),-2,this.processedLines[0].isDuet]}else if(null!=(t=this.processedLines[i])&&t.endTime&&null!=(r=this.processedLines[i+1])&&r.startTime&&this.processedLines[i+1].startTime>n&&this.processedLines[i].endTime<n)return[Math.max(this.processedLines[i].endTime,n),this.processedLines[i+1].startTime,i,this.processedLines[i+1].isDuet]}rebuildStyle(){this._baseFontSize=parseFloat(getComputedStyle(this.element).fontSize);let e="";e+="--amll-lyric-player-width:",e+=this.innerSize[0]-2*this.padding,e+="px;",e+="--amll-lyric-player-height:",e+=this.innerSize[1]-2*this.padding,e+="px;",this.element.setAttribute("style",e)}setHidePassedLines(e){this.hidePassedLines=e,this.calcLayout()}setEnableBlur(e){this.enableBlur!==e&&(this.enableBlur=e,this.calcLayout())}setLyricLines(e){for(const t of e)for(const e of t.words)e.word=e.word.replace(/\s+/g," ");this.lyricLines=e;this.processedLines=e.filter((e=>e.words.reduce(((e,t)=>e+t.word.trim().length),0)>0)).map(((e,t,r)=>{if(e.isBG)return{...e};if(0===t)return{...e,startTime:Math.max(e.startTime-750,0)};const n=r[t-1],i=r[t-2];if(null!=n&&n.isBG&&i){if(i.endTime<e.startTime)return{...e,startTime:Math.max(i.endTime,e.startTime-750)||e.startTime}}else if(null!=n&&n.endTime&&n.endTime<e.startTime)return{...e,startTime:Math.max(null==n?void 0:n.endTime,e.startTime-750)||e.startTime};return{...e}})),this.isNonDynamic=!0;for(const t of this.processedLines)if(t.words.length>1){this.isNonDynamic=!1;break}this.processedLines.forEach(((e,t,r)=>{const n=r[t+1],i=e.words[e.words.length-1];i&&nE(i)&&(n?n.startTime>e.endTime&&(e.endTime=Math.min(e.endTime+1500,n.startTime)):e.endTime=e.endTime+1500)})),this.processedLines.forEach(((e,t,r)=>{if(e.isBG)return;const n=r[t+1];null!=n&&n.isBG&&(n.startTime=Math.min(n.startTime,e.startTime))})),this.lyricLinesEl.forEach((e=>{e.removeMouseEventListener("click",this.onLineClickedHandler),e.removeMouseEventListener("contextmenu",this.onLineClickedHandler),e.dispose()})),this.lyricLinesEl=this.processedLines.map((e=>{const t=new aE(this,e);return t.addMouseEventListener("click",this.onLineClickedHandler),t.addMouseEventListener("contextmenu",this.onLineClickedHandler),t})),this.lyricLinesEl.forEach(((e,t)=>{this.element.appendChild(e.getElement()),this.lyricLinesIndexes.set(e,t),e.updateMaskImage()})),this.interludeDots.setInterlude(void 0),this.hotLines.clear(),this.bufferedLines.clear(),this.setLinePosXSpringParams({}),this.setLinePosYSpringParams({}),this.setLineScaleSpringParams({}),this.setCurrentTime(0,!0),this.calcLayout(!0,!0)}resetScroll(){this.isScrolled=!1,this.scrollOffset=0,this.invokedByScrollEvent=!1,clearTimeout(this.scrolledHandler),this.scrolledHandler=0}calcLayout(e=!1,t=!1){var r;t&&(this.emUnit=parseFloat(getComputedStyle(this.element).fontSize),this.lyricLinesEl.forEach((e=>{const t=e.measureSize();this.lyricLinesSize.set(e,t),e.lineSize=t})),this.interludeDotsSize[0]=this.interludeDots.getElement().clientWidth,this.interludeDotsSize[1]=this.interludeDots.getElement().clientHeight,this.bottomLine.lineSize=this.bottomLine.measureSize());const n=this.getCurrentInterlude();let i=-this.scrollOffset,a=this.scrollToIndex,s=0;n?(s=n[1]-n[0],s>=5e3&&this.lyricLinesEl[n[2]+1]&&(a=n[2]+1)):this.interludeDots.setInterlude(void 0);const o=this.enableScale?.95:1,l=this.lyricLinesEl.slice(0,a).reduce(((e,t)=>{var r;return e+(t.getLine().isBG?0:(null==(r=this.lyricLinesSize.get(t))?void 0:r[1])??0)}),0);this.scrollBoundary[0]=-l,i-=l,i+=this.size[1]*this.alignPosition;const u=this.lyricLinesEl[a];if(u){const e=(null==(r=this.lyricLinesSize.get(u))?void 0:r[1])??0;switch(this.alignAnchor){case"bottom":i-=e;break;case"center":i-=e/2}}const c=Math.max(...this.bufferedLines);let d=0,h=.05,f=!1;this.lyricLinesEl.forEach(((t,r)=>{var a,l,u;const p=this.bufferedLines.has(r),m=p||r>=this.scrollToIndex&&r<c,y=t.getLine();y.isDuet&&(this.size[0],null==(a=this.lyricLinesSize.get(t))||a[0]),!f&&s>=5e3&&(r===this.scrollToIndex&&-2===(null==n?void 0:n[2])||r===this.scrollToIndex+1)&&(f=!0,this.interludeDots.setTransform(this.padding-20,i+10),n&&this.interludeDots.setInterlude([n[0],n[1]]),i+=this.interludeDotsSize[1]+40);let g=1;g=!m&&r<=(n?n[2]:this.scrollToIndex)?this.hidePassedLines?0:this.isNonDynamic?.25:.15:p?this.isNonDynamic?.85:1:this.isNonDynamic?.25:.5,this.invokedByScrollEvent&&(g=this.isNonDynamic?.85:1);let v=0;this.enableBlur&&(m?v=0:(v=1,r<this.scrollToIndex?v+=Math.abs(this.scrollToIndex-r)/2:v+=Math.abs(r-Math.max(this.scrollToIndex,c)))),this.invokedByScrollEvent&&(v=0),t.setTransform(this.padding,i,m?1:o,g,1.5*v,e,d),y.isBG&&m?i+=(null==(l=this.lyricLinesSize.get(t))?void 0:l[1])??0:y.isBG||(i+=(null==(u=this.lyricLinesSize.get(t))?void 0:u[1])??0),i>=0&&(d+=h,h/=1.2)})),this.scrollBoundary[1]=i+this.scrollOffset-this.size[1]/2,this.bottomLine.setTransform(this.padding,i,e,d)}getCurrentTime(){return this.currentTime}getLyricLines(){return this.lyricLines}getElement(){return this.element}getBottomLineElement(){return this.bottomLine.getElement()}setAlignAnchor(e){this.alignAnchor=e}setAlignPosition(e){this.alignPosition=e}setCurrentTime(e,t=!1){if(this.currentTime=e,!this.isPageVisible||(!this._getIsNonDynamic()&&!this.supportMaskImage&&this.element.style.setProperty("--amll-player-time",`${e}`),this.isScrolled))return;const r=new Set,n=new Set,i=new Set;if(t)for(const o of this.lyricLinesEl)o.setMaskAnimationState(e);var a,s;this.hotLines.forEach((n=>{const i=this.processedLines[n];if(i){if(i.isBG)return;const a=this.processedLines[n+1];if(null!=a&&a.isBG){const s=this.processedLines[n+2],o=Math.min(i.startTime,null==a?void 0:a.startTime),l=Math.min(Math.max(i.endTime,(null==s?void 0:s.startTime)??Number.MAX_VALUE),Math.max(i.endTime,null==a?void 0:a.endTime));(o>e||l<=e)&&(this.hotLines.delete(n),r.add(n),this.hotLines.delete(n+1),r.add(n+1),t&&(this.lyricLinesEl[n].disable(e),this.lyricLinesEl[n+1].disable(e)))}else(i.startTime>e||i.endTime<=e)&&(this.hotLines.delete(n),r.add(n),t&&this.lyricLinesEl[n].disable(e))}else this.hotLines.delete(n),r.add(n),t&&this.lyricLinesEl[n].disable(e)})),this.processedLines.forEach(((r,n,a)=>{var s;!r.isBG&&r.startTime<=e&&r.endTime>e&&(this.hotLines.has(n)||(this.hotLines.add(n),i.add(n),t&&this.lyricLinesEl[n].enable(e),null!=(s=a[n+1])&&s.isBG&&(this.hotLines.add(n+1),i.add(n+1),t&&this.lyricLinesEl[n+1].enable(e))))})),this.bufferedLines.forEach((r=>{this.hotLines.has(r)||(n.add(r),t&&this.lyricLinesEl[r].disable(e))})),t?(this.bufferedLines.size>0?this.scrollToIndex=Math.min(...this.bufferedLines):this.scrollToIndex=this.processedLines.findIndex((t=>t.startTime>=e)),this.bufferedLines.clear(),this.hotLines.forEach((e=>this.bufferedLines.add(e))),this.calcLayout(!0)):(n.size>0||i.size>0)&&(0===n.size&&i.size>0?(i.forEach((t=>{this.bufferedLines.add(t),this.lyricLinesEl[t].enable(e)})),this.scrollToIndex=Math.min(...this.bufferedLines),this.calcLayout()):0===i.size&&n.size>0?(a=n,s=this.bufferedLines,a.size===s.size&&[...a].every((e=>s.has(e)))&&(this.bufferedLines.forEach((t=>{this.hotLines.has(t)||(this.bufferedLines.delete(t),this.lyricLinesEl[t].disable(e))})),this.calcLayout())):(i.forEach((t=>{this.bufferedLines.add(t),this.lyricLinesEl[t].enable(e)})),n.forEach((t=>{this.bufferedLines.delete(t),this.lyricLinesEl[t].disable(e)})),this.bufferedLines.size>0&&(this.scrollToIndex=Math.min(...this.bufferedLines)),this.calcLayout()))}pause(){this.interludeDots.pause();for(const e of this.lyricLinesEl)e.pause()}resume(){this.interludeDots.resume();for(const e of this.lyricLinesEl)e.resume()}update(e=0){if(!this.isPageVisible)return;const t=e/1e3;this.interludeDots.update(e),this.bottomLine.update(t),this.lyricLinesEl.forEach((e=>e.update(t)))}setLinePosXSpringParams(e){this.posXSpringParams={...this.posXSpringParams,...e},this.bottomLine.lineTransforms.posX.updateParams(this.posXSpringParams),this.lyricLinesEl.forEach((e=>e.lineTransforms.posX.updateParams(this.posXSpringParams)))}setLinePosYSpringParams(e){this.posYSpringParams={...this.posYSpringParams,...e},this.bottomLine.lineTransforms.posY.updateParams(this.posYSpringParams),this.lyricLinesEl.forEach((e=>e.lineTransforms.posY.updateParams(this.posYSpringParams)))}setLineScaleSpringParams(e){this.scaleSpringParams={...this.scaleSpringParams,...e},this.lyricLinesEl.forEach((e=>e.lineTransforms.scale.updateParams(this.scaleSpringParams)))}dispose(){this.element.remove(),this.resizeObserver.disconnect(),this.style.detach(),this.lyricLinesEl.forEach((e=>e.dispose())),window.removeEventListener("pageshow",this.onPageShow),this.bottomLine.dispose(),this.interludeDots.dispose()}}const hE=n({inheritAttrs:!1,__name:"LyricPlayer",props:{disabled:{type:Boolean},playing:{type:Boolean},alignAnchor:{},alignPosition:{},enableSpring:{type:Boolean},enableBlur:{type:Boolean},enableScale:{type:Boolean},hidePassedLines:{type:Boolean},lyricLines:{},currentTime:{},linePosXSpringParams:{},linePosYSpringParams:{},lineScaleSpringParams:{},bottomLine:{}},emits:["line-click","line-contextmenu"],setup(e,{expose:t,emit:r}){const n=e,i=r,a=s(),o=s(),l=e=>i("line-click",e),u=e=>i("line-contextmenu",e);return c((()=>{a.value&&(o.value=new dE,a.value.appendChild(o.value.getElement()),o.value.addEventListener("line-click",l),o.value.addEventListener("line-contextmenu",u))})),H((()=>{o.value&&(o.value.removeEventListener("line-click",l),o.value.removeEventListener("line-contextmenu",u),o.value.dispose())})),mr((e=>{if(!n.disabled){let t=!1,r=-1;const n=e=>{var i;t||(-1===r&&(r=e),null==(i=o.value)||i.update(e-r),r=e,requestAnimationFrame(n))};requestAnimationFrame(n),e((()=>{t=!0}))}})),mr((()=>{var e,t,r;void 0!==n.playing?n.playing?null==(e=o.value)||e.resume():null==(t=o.value)||t.pause():null==(r=o.value)||r.resume()})),mr((()=>{var e;void 0!==n.alignAnchor&&(null==(e=o.value)||e.setAlignAnchor(n.alignAnchor))})),mr((()=>{var e;void 0!==n.hidePassedLines&&(null==(e=o.value)||e.setHidePassedLines(n.hidePassedLines))})),mr((()=>{var e;void 0!==n.alignPosition&&(null==(e=o.value)||e.setAlignPosition(n.alignPosition))})),mr((()=>{var e,t;void 0!==n.enableSpring?null==(e=o.value)||e.setEnableSpring(n.enableSpring):null==(t=o.value)||t.setEnableSpring(!0)})),mr((()=>{var e,t;void 0!==n.enableBlur?null==(e=o.value)||e.setEnableBlur(n.enableBlur):null==(t=o.value)||t.setEnableBlur(!0)})),mr((()=>{var e,t;void 0!==n.enableScale?null==(e=o.value)||e.setEnableScale(n.enableScale):null==(t=o.value)||t.setEnableScale(!0)})),mr((()=>{var e;void 0!==n.lyricLines&&(null==(e=o.value)||e.setLyricLines(n.lyricLines))})),mr((()=>{var e;void 0!==n.currentTime&&(null==(e=o.value)||e.setCurrentTime(n.currentTime))})),mr((()=>{var e;void 0!==n.linePosXSpringParams&&(null==(e=o.value)||e.setLinePosXSpringParams(n.linePosXSpringParams))})),mr((()=>{var e;void 0!==n.linePosYSpringParams&&(null==(e=o.value)||e.setLinePosYSpringParams(n.linePosYSpringParams))})),mr((()=>{var e;void 0!==n.lineScaleSpringParams&&(null==(e=o.value)||e.setLineScaleSpringParams(n.lineScaleSpringParams))})),t({lyricPlayer:o,wrapperEl:a}),(e,t)=>{var r,i;return d(),F(De,null,[D("div",yr({ref_key:"wrapperRef",ref:a},e.$attrs),null,16),null!=(r=o.value)&&r.getBottomLineElement()&&n.bottomLine?(d(),h(gr,{key:0,to:null==(i=o.value)?void 0:i.getBottomLineElement()},null,8,["to"])):pe("",!0)],64)}}}),fE=B(n({__name:"MainAMLyric",setup(e){const t=Ke(),n=i(),a=r(),l=s(null),u=s(Hl.getSeek()),{pause:m,resume:g}=L((()=>{const e=Hl.getSeek();u.value=Math.floor(1e3*e)})),v=o((()=>n.mainColor?`rgb(${n.mainColor})`:"rgb(239, 239, 239)")),_=o((()=>t.songLyric.yrcData?.length&&a.showYrc?t.songLyric.yrcAMData:t.songLyric.lrcAMData)),b=e=>{if(!e?.line?.lyricLine?.startTime)return;const t=Et(e.line.lyricLine.startTime);Hl.setSeek(t),Hl.play()};return c((()=>{g()})),O((()=>{m()})),(e,t)=>(d(),h(me,null,{default:f((()=>[(d(),F("div",{key:y(_)?.[0]?.startTime,class:he(["lyric-am",{pure:y(n).pureLyricMode}])},[p(y(hE),{ref_key:"lyricPlayerRef",ref:l,lyricLines:y(_),currentTime:y(u),playing:y(n).playStatus,enableSpring:y(a).useAMSpring,enableScale:y(a).useAMSpring,alignPosition:"center"===y(a).lyricsScrollPosition?.5:.2,enableBlur:y(a).lyricsBlur,style:N({"--amll-lyric-view-color":y(v),"--amll-lyric-player-font-size":y(a).lyricFontSize+"px","font-weight":y(a).lyricFontBold?"bold":"normal","font-family":"follow"!==y(a).LyricFont?y(a).LyricFont:""}),class:"am-lyric",onLineClick:b},null,8,["lyricLines","currentTime","playing","enableSpring","enableScale","alignPosition","enableBlur","style"])],2))])),_:1}))}}),[["__scopeId","data-v-d1073f6a"]]),pE=""+new URL("../images/annual.png?assest",import.meta.url).href,mE=[{emoji:"😄",emjName:"大笑"},{emoji:"😊",emjName:"可爱"},{emoji:"😄",emjName:"憨笑"},{emoji:"😘",emjName:"亲亲"},{emoji:"😄",emjName:"流泪"},{emoji:"😊",emjName:"亲"},{emoji:"😐",emjName:"呆"},{emoji:"😢",emjName:"哀伤"},{emoji:"😁",emjName:"呲牙"},{emoji:"😝",emjName:"吐舌"},{emoji:"😄",emjName:"撇嘴"},{emoji:"😡",emjName:"怒"},{emoji:"😏",emjName:"奸笑"},{emoji:"😅",emjName:"汗"},{emoji:"😣",emjName:"痛苦"},{emoji:"😱",emjName:"惶恐"},{emoji:"🤒",emjName:"生病"},{emoji:"😷",emjName:"口罩"},{emoji:"😭",emjName:"大哭"},{emoji:"😵",emjName:"晕"},{emoji:"😡",emjName:"发怒"},{emoji:"😀",emjName:"开心"},{emoji:"😈",emjName:"鬼脸"},{emoji:"😠",emjName:"皱眉"},{emoji:"😷",emjName:"流感"},{emoji:"❤️",emjName:"爱心"},{emoji:"💔",emjName:"心碎"},{emoji:"💗",emjName:"钟情"},{emoji:"⭐",emjName:"星星"},{emoji:"💢",emjName:"生气"},{emoji:"💩",emjName:"便便"},{emoji:"💪",emjName:"强"},{emoji:"💤",emjName:"弱"},{emoji:"🙏",emjName:"拜"},{emoji:"🤝",emjName:"牵手"},{emoji:"💃",emjName:"跳舞"},{emoji:"🚫",emjName:"禁止"},{emoji:"👉",emjName:"这边"},{emoji:"😍",emjName:"爱意"},{emoji:"💏",emjName:"示爱"},{emoji:"💋",emjName:"嘴唇"},{emoji:"🐶",emjName:"狗"},{emoji:"😸",emjName:"猫"},{emoji:"🐷",emjName:"猪"},{emoji:"🐰",emjName:"兔子"},{emoji:"🐔",emjName:"小鸡"},{emoji:"🐓",emjName:"公鸡"},{emoji:"👻",emjName:"幽灵"},{emoji:"🎅",emjName:"圣诞"},{emoji:"👽",emjName:"外星"},{emoji:"💎",emjName:"钻石"},{emoji:"🎁",emjName:"礼物"},{emoji:"👦",emjName:"男孩"},{emoji:"👧",emjName:"女孩"},{emoji:"🍰",emjName:"蛋糕"},{emoji:"🔞",emjName:"18"},{emoji:"🔵",emjName:"圈"},{emoji:"❌",emjName:"叉"},{emoji:"😱",emjName:"惊恐"},{emoji:"😍",emjName:"色"}],yE=(e,t=0,r=1,n=20,i=1,a)=>gt({url:"/comment/new",params:{id:e,type:t,pageNo:r,pageSize:n,sortType:i,cursor:a,timestamp:Date.now()}}),gE={key:0,class:"user"},vE={class:"avatar"},_E={key:0,class:"annual",alt:"annual",src:pE,title:"网易音乐人"},bE=["src"],wE={class:"data"},xE={class:"content"},IE={key:0,class:"reply"},TE={class:"item"},EE=["title"],SE=["onClick"],AE=n({__name:"CommentList",props:{data:{},loading:{type:Boolean},type:{},loadMore:{type:Boolean},transparent:{type:Boolean}},emits:["loadMore"],setup(e,{emit:t}){const r=e,n=t,i=e=>{try{if(!e)return;e=e.trim();const t=/\[(\S+?)\]/g;return e.replace(t,((e,t)=>{const r=mE.find((e=>e.emjName===t));return r?r.emoji:e}))}catch(t){return console.error(t),e}},a=Q((async e=>{if(!K())return void cd();const t=e.liked,n=await((e,t=1,r=0)=>gt({url:"/resource/like",params:{id:e,t:t,type:r,timestamp:Date.now()}}))(e.id,t?2:1,r.type);200===n.code?(e.liked=!t,e.likedCount&&(e.likedCount+=t?-1:1)):window.$message.error(n.msg||"评论点赞失败")}),300);return(e,t)=>{const r=ve,s=_e,o=le,l=Ae,u=ce,c=be,m=pt;return d(),h(me,{name:"fade",mode:"out-in"},{default:f((()=>[e.data.length>0?(d(),h(l,{key:0,size:20,class:he(["comment-list",{transparent:e.transparent}]),vertical:""},{default:f((()=>[(d(!0),F(De,null,Ne(e.data,((n,u)=>(d(),h(l,{key:u,size:20,class:"comments"},{default:f((()=>[e.transparent?pe("",!0):(d(),F("div",gE,[D("div",vE,[p(r,{src:n.user?.avatarUrl&&n.user.avatarUrl.replace(/^http:/,"https:")+"?param=100y100",class:"cover","preview-disabled":"",lazy:"",onLoad:y(fe)},{placeholder:f((()=>t[1]||(t[1]=[D("div",{class:"cover-loading"},[D("img",{src:Hs,class:"loading-img",alt:"loading-img"})],-1)]))),_:2},1032,["src","onLoad"]),n.user.isAnnualCount?(d(),F("img",_E)):pe("",!0)]),n.user.vipLevel&&n.user.vipLevel>0?(d(),F("img",{key:0,src:n.user.vipIconUrl&&n.user.vipIconUrl.replace(/^http:/,"https:"),class:"vip",alt:"vip",title:"黑胶会员"},null,8,bE)):pe("",!0)])),D("div",wE,[D("div",xE,[p(s,{class:"name"},{default:f((()=>[te(re(n.user.name||"未知用户名")+"：",1)])),_:2},1024),p(s,{class:"text"},{default:f((()=>[te(re(i(n.content)),1)])),_:2},1024)]),n.beReplied?(d(),F("div",IE,[p(s,{class:"name",depth:3},{default:f((()=>[te(" @ "+re(n.beReplied.user.name||"未知用户名")+"： ",1)])),_:2},1024),p(s,{class:"text"},{default:f((()=>[te(re(i(n.beReplied.content)),1)])),_:2},1024)])):pe("",!0),p(l,{class:"meta","align-items":"center"},{default:f((()=>[D("div",TE,[p(o,{name:"Time",depth:3}),p(s,{depth:3},{default:f((()=>[te(re(y(vr)(n.time)),1)])),_:2},1024)]),n.ip?(d(),F("div",{key:0,title:n.ip.ip,class:"item"},[p(o,{name:"IP",depth:3}),p(s,{depth:3},{default:f((()=>[te(re(n.ip.location),1)])),_:2},1024)],8,EE)):pe("",!0),D("div",{class:"item like",onClick:e=>y(a)(n)},[p(o,{name:n?.liked?"ThumbUp":"ThumbUpOff",depth:n?.liked?1:3},null,8,["name","depth"]),p(s,{depth:n?.liked?1:3},{default:f((()=>[te(re(n.likedCount),1)])),_:2},1032,["depth"])],8,SE)])),_:2},1024)])])),_:2},1024)))),128)),e.loadMore?(d(),h(l,{key:0,class:"load-more",justify:"center"},{default:f((()=>[p(u,{loading:e.loading,size:"large",strong:"",secondary:"",round:"",onClick:t[0]||(t[0]=e=>n("loadMore"))},{default:f((()=>t[2]||(t[2]=[te(" 加载更多 ")]))),_:1},8,["loading"])])),_:1})):pe("",!0)])),_:1},8,["class"])):e.loading?(d(),F("div",{key:1,class:he(["comment-list",{transparent:e.transparent}])},[p(c,{repeat:20})],2)):(d(),h(m,{key:2,description:"空空如也，怎么什么都没有啊",size:"large"}))])),_:1})}}}),kE=B(AE,[["__scopeId","data-v-0b4c6c58"]]),CE={class:"player-comment"},PE={class:"placeholder"},RE={class:"title"},ME={class:"placeholder"},LE={class:"title"},OE=n({__name:"PlayerComment",setup(e){const t=Ke(),r=o((()=>t.playSong.id)),n=o((()=>"radio"===t.playSong.type?4:0)),i=s(!0),a=s([]),l=s([]),u=s(1),h=s(!0),m=async()=>{if(!r.value)return;const e=await((e,t=0,r=20,n=0,i)=>gt({url:"/comment/hot",params:{id:e,type:t,limit:r,offset:n,before:i,timestamp:Date.now()}}))(r.value),t=_r(e.hotComments);l.value=t?.length>0?t:null},g=async()=>{if(!r.value)return;i.value=!0;const e=u.value>1&&a.value?.length>0?a.value[a.value.length-1]?.time:void 0,t=await yE(r.value,n.value,u.value,20,3,e);if(Qe(t.data?.comments))return h.value=!1,void(i.value=!1);const s=_r(t.data.comments);a.value=a.value.concat(s),h.value=t.data.hasMore,i.value=!1},v=()=>{u.value+=1,g()};return c((()=>{m(),g()})),(e,t)=>{const r=le,s=kE,o=Ye;return d(),F("div",CE,[p(o,{ref:"lyricScroll",class:"lyric-scroll"},{default:f((()=>[y(l)?(d(),F(De,{key:0},[D("div",PE,[D("div",RE,[p(r,{name:"Fire"}),t[0]||(t[0]=D("span",null,"热门评论",-1))])]),p(s,{data:y(l),loading:0===y(l)?.length,type:y(n),transparent:""},null,8,["data","loading","type"])],64)):pe("",!0),D("div",ME,[D("div",LE,[p(r,{name:"Message"}),t[1]||(t[1]=D("span",null,"全部评论",-1))])]),p(s,{data:y(a),loading:y(i),type:y(n),loadMore:y(h),transparent:"",onLoadMore:v},null,8,["data","loading","type","loadMore"]),t[2]||(t[2]=D("div",{class:"placeholder"},null,-1))])),_:1},512)])}}}),FE=B(OE,[["__scopeId","data-v-d1270da2"]]),DE={class:"name"},NE={class:"name-text text-hidden"},BE={key:0,class:"alia"},UE={key:1,class:"artists"},jE={key:0,class:"ar-list"},GE=["onClick"],zE={key:1,class:"ar-list"},HE={class:"ar"},VE={key:2,class:"artists"},$E={class:"ar-list"},XE={class:"ar"},qE={key:3,class:"album"},WE={key:1,class:"name-text text-hidden"},YE={class:"name-text text-hidden"},KE=B(n({__name:"PlayerData",props:{center:{type:Boolean},theme:{}},setup(e){const t=Os(),n=Ke(),a=i(),s=r(),o=Q((e=>{e&&(a.showFullPlayer=!1,t.push(e))}),300,{leading:!0,trailing:!1});return(e,t)=>{const r=le,i=hr;return d(),F("div",{class:he(["player-data",y(s).playerType,{center:e.center}])},[D("div",DE,[D("span",NE,re(y(n).playSong.name||"未知曲目"),1),y(a).playUblock?(d(),h(i,{key:0,"show-arrow":!1,placement:"right-start",raw:""},{trigger:f((()=>[p(r,{depth:3,name:"CloudLockOpen",size:"22"})])),default:f((()=>[D("div",{style:N({"--theme":e.theme}),class:"player-tip"},t[2]||(t[2]=[D("span",null,"该歌曲暂时无法播放，为您采用其他音源，可能会与原曲存在差别",-1)]),4)])),_:1})):pe("",!0),y(n).playSong.pc?(d(),h(r,{key:1,depth:3,name:"Cloud",size:"22"})):pe("",!0)]),y(n).playSong.alia?(d(),F("span",BE,re(y(n).playSong.alia),1)):pe("",!0),"radio"!==y(n).playSong.type?(d(),F("div",UE,[p(r,{depth:3,name:"Artist",size:"20"}),Array.isArray(y(n).playSong.artists)?(d(),F("div",jE,[(d(!0),F(De,null,Ne(y(n).playSong.artists,(e=>(d(),F("span",{key:e.id,class:"ar",onClick:t=>y(o)({name:"artist",query:{id:e.id}})},re(e.name),9,GE)))),128))])):(d(),F("div",zE,[D("span",HE,re(y(n).playSong.artists||"未知艺术家"),1)]))])):(d(),F("div",VE,[p(r,{depth:3,name:"Artist",size:"20"}),D("div",$E,[D("span",XE,re(y(n).playSong.dj?.creator||"未知艺术家"),1)])])),"radio"!==y(n).playSong.type?(d(),F("div",qE,[p(r,{depth:3,name:"Album",size:"20"}),y(tt)(y(n).playSong.album)?(d(),F("span",{key:0,class:"name-text text-hidden",onClick:t[0]||(t[0]=e=>y(o)({name:"album",query:{id:y(n).playSong.album.id}}))},re(y(n).playSong.album?.name||"未知专辑"),1)):(d(),F("span",WE,re(y(n).playSong.album||"未知专辑"),1))])):pe("",!0),"radio"===y(n).playSong.type?(d(),F("div",{key:4,class:"dj",onClick:t[1]||(t[1]=e=>y(o)({name:"dj",query:{id:y(n).playSong.dj?.id}}))},[p(r,{depth:3,name:"Podcast",size:"20"}),D("span",YE,re(y(n).playSong.dj?.name||"播客电台"),1)])):pe("",!0)],2)}}}),[["__scopeId","data-v-a240c304"]]),ZE=["src"],QE=["src","alt"],JE=B(n({__name:"s-image",props:{src:{},defaultSrc:{default:"/images/song.jpg?assest"},alt:{}},emits:["load","error","update:show"],setup(e,{emit:t}){const r=e,n=t,i=s(),a=s(),o=s(),l=s(!1),u=ze(o),c=e=>{l.value=!0,n("load",e)},m=e=>{l.value=!1,a.value=r.defaultSrc,n("error",e)};return br(u,(e=>{n("update:show",e),e&&(a.value=r.src)})),(e,t)=>(d(),h(me,{name:"fade",mode:"out-in"},{default:f((()=>[(d(),F("div",{ref_key:"imgContainer",ref:o,key:e.src,class:"s-image"},[p(me,{name:"fade"},{default:f((()=>[y(l)?pe("",!0):(d(),F("img",{key:0,src:e.defaultSrc,class:"loading",alt:"loading"},null,8,ZE))])),_:1}),e.src?(d(),F("img",{ref_key:"imgRef",ref:i,src:y(a),key:y(a),alt:e.alt||"image",class:he(["cover",{loaded:y(l)}]),onLoad:c,onError:m},null,42,QE)):pe("",!0)]))])),_:1}))}}),[["__scopeId","data-v-7f5094d4"]]),eS={key:0,class:"pointer",src:""+new URL("../images/pointer.png?assest",import.meta.url).href,alt:"pointer"},tS=["src"],rS=n({__name:"PlayerCover",setup(e){const t=Ke(),n=i(),a=r(),o=s(""),u=s(!1),m=s(null),{start:g,stop:v}=wr((()=>{u.value=!0,m.value?.play()}),2e3,{immediate:!1}),_=async()=>{if(1!==K()||!t.playSong.id||!a.dynamicCover||"cover"!==a.playerType)return;v(),u.value=!1;const e=await xr(t.playSong.id);!Qe(e.data)&&e?.data?.videoPlayUrl?o.value=e.data.videoPlayUrl:o.value=""},b=()=>{u.value=!1,g()};return l((()=>[t.playSong.id,a.dynamicCover,a.playerType]),(()=>_())),c(_),(e,r)=>{const i=JE;return d(),F("div",{class:he(["player-cover",y(a).playerType,{playing:y(n).playStatus}])},["record"===y(a).playerType?(d(),F("img",eS)):pe("",!0),(d(),h(i,{key:y(t).getSongCover(),src:y(t).getSongCover("l"),class:"cover-img"},null,8,["src"])),p(me,{name:"fade",mode:"out-in"},{default:f((()=>[y(o)&&y(a).dynamicCover&&"cover"===y(a).playerType?(d(),F("video",{key:0,ref_key:"videoRef",ref:m,src:y(o),class:he(["dynamic-cover",{loaded:y(u)}]),muted:"",autoplay:"",onLoadeddata:r[0]||(r[0]=e=>u.value=!0),onEnded:b},null,42,tS)):pe("",!0)])),_:1})],2)}}}),nS=B(rS,[["__scopeId","data-v-1f5bb0b4"]]),iS={class:"player-menu"},aS={class:"menu-content"},sS=B(n({__name:"PlayerMenu",setup(e){const t=Ke(),r=i(),{isFullscreen:n,toggle:a}=Ir();return(e,i)=>{const s=le,o=Ae;return d(),F("div",iS,[p(me,{name:"fade",mode:"out-in"},{default:f((()=>[sr(D("div",aS,[p(o,{class:"left"},{default:f((()=>[y(t).isHasLrc&&"radio"!==y(t).playSong.type?(d(),F("div",{key:0,class:he(["menu-icon",{open:y(r).pureLyricMode}]),onClick:i[0]||(i[0]=e=>y(r).pureLyricMode=!y(r).pureLyricMode)},[p(s,{name:"TextPlay"})],2)):pe("",!0)])),_:1}),i[3]||(i[3]=D("div",{class:"drag-dom"},null,-1)),p(o,{class:"right",justify:"end"},{default:f((()=>[D("div",{class:"menu-icon",onClick:i[1]||(i[1]=(...e)=>y(a)&&y(a)(...e))},[p(s,{name:y(n)?"FullscreenExit":"Fullscreen"},null,8,["name"])]),y(n)?pe("",!0):(d(),F("div",{key:0,class:"menu-icon",onClick:i[2]||(i[2]=e=>y(r).showFullPlayer=!1)},[p(s,{name:"Down"})]))])),_:1})],512),[[ur,y(r).playerMetaShow]])])),_:1})])}}}),[["__scopeId","data-v-b48ceae3"]]),oS=n({__name:"PlayerBackground",props:{album:{},albumIsVideo:{type:Boolean},fps:{},playing:{type:Boolean},flowSpeed:{},hasLyric:{type:Boolean},lowFreqVolume:{},renderScale:{},renderer:{type:Function}},setup(e,{expose:t}){const r=e,n=s(),i=s();return mr((()=>{r.album&&i.value?.setAlbum(r.album,r.albumIsVideo)})),mr((()=>{r.fps&&i.value?.setFPS(r.fps)})),mr((()=>{r.playing?i.value?.pause():i.value?.resume()})),mr((()=>{r.flowSpeed&&i.value?.setFlowSpeed(r.flowSpeed)})),mr((()=>{r.renderScale&&i.value?.setRenderScale(r.renderScale)})),mr((()=>{r.lowFreqVolume&&i.value?.setLowFreqVolume(r.lowFreqVolume)})),mr((()=>{void 0!==r.hasLyric&&i.value?.setHasLyric(r.hasLyric??!0)})),t({bgRender:i,wrapperEl:n}),c((()=>{(()=>{if(!n.value)return;i.value=RT.new(r.renderer??PT);const e=i.value.getElement();e.style.width="100%",e.style.height="100%",n.value.appendChild(e)})()})),H((()=>{i.value&&i.value.dispose()})),(e,t)=>(d(),F("div",{ref_key:"wrapperRef",ref:n,class:"player-background"},null,512))}}),lS=["src"],uS={class:"lrc"},cS={key:0,class:"lrc-tran"},dS={key:0,class:"content-left"},hS={key:1,class:"content-right"},fS=B(n({__name:"FullPlayer",setup(e){const t=Ke(),n=i(),a=r(),s=o((()=>!t.playSong.path&&n.showPlayerComment)),l=o((()=>`\n  ${t.playSong?.id??0}-\n  ${t.isHasLrc}-\n  ${n.pureLyricMode}-\n  ${s.value}`)),u=o((()=>!t.isHasLrc||n.pureLyricMode||"record"===a.playerType||"radio"===t.playSong.type||s.value)),m=o((()=>{const e=t.songLyric.yrcData?.length&&a.showYrc?t.songLyric.yrcData[n.lyricIndex]:t.songLyric.lrcData[n.lyricIndex];return{content:e?.content,tran:a.showTran&&e?.tran}})),{isPending:g,start:v,stop:_}=wr((()=>{n.playerMetaShow=!1}),3e3),b=Tr((()=>{n.playerMetaShow=!0,g.value||v()}),300,{trailing:!1}),w=()=>{_(),n.playerMetaShow=!0},x=()=>{n.playerMetaShow=!1,_()};return c((()=>{n.fullPlayerActive=!0,a.showSpectrums&&Hl.initSpectrumData(),Y&&a.preventSleep&&window.electron.ipcRenderer.send("prevent-sleep",!0)})),O((()=>{Y&&window.electron.ipcRenderer.send("prevent-sleep",!1)})),(e,r)=>{const i=oS,o=sS,c=nS,g=KE,v=FE,_=fE,I=Vd,T=Cd,E=Ki;return sr((d(),F("div",{style:N({"--main-color":y(n).mainColor,cursor:y(n).playerMetaShow?"auto":"none"}),class:"full-player",onMouseleave:x},[p(me,{name:"fade",mode:"out-in"},{default:f((()=>[(d(),F("div",{key:y(t).playSong?.id??0,class:he(["overlay",y(a).playerBackgroundType])},["blur"===y(a).playerBackgroundType?(d(),F("img",{key:0,src:y(t).songCover,class:"overlay-img",alt:"cover"},null,8,lS)):"animation"===y(a).playerBackgroundType?(d(),h(i,{key:1,album:y(t).songCover,fps:60},null,8,["album"])):pe("",!0)],2))])),_:1}),p(me,{name:"fade",mode:"out-in"},{default:f((()=>[y(s)&&!y(n).pureLyricMode?(d(),F("div",{key:y(m).content,class:"lrc-instant"},[D("span",uS,re(y(m).content),1),y(m).tran?(d(),F("span",cS,re(y(m).tran),1)):pe("",!0)])):pe("",!0)])),_:1}),p(o,{onMouseenter:Yt(w,["stop"]),onMouseleave:Yt(y(b),["stop"])},null,8,["onMouseleave"]),p(me,{name:"fade",mode:"out-in"},{default:f((()=>[(d(),F("div",{key:y(l),class:he(["player-content",{pure:y(n).pureLyricMode,"show-comment":y(s)}]),onMousemove:r[0]||(r[0]=(...e)=>y(b)&&y(b)(...e))},[y(n).pureLyricMode&&y(t).isHasLrc&&"radio"!==y(t).playSong.type?pe("",!0):(d(),F("div",dS,[p(c),p(g,{center:y(u),theme:y(n).mainColor},null,8,["center","theme"])])),p(me,{name:"fade",mode:"out-in"},{default:f((()=>[y(s)&&!y(n).pureLyricMode?(d(),h(v,{key:0})):y(t).isHasLrc?(d(),F("div",hS,[y(a).useAMLyrics?(d(),h(_,{key:0})):(d(),h(I,{key:1}))])):pe("",!0)])),_:1})],34))])),_:1}),p(T,{onMouseenter:Yt(w,["stop"]),onMouseleave:Yt(y(b),["stop"])},null,8,["onMouseleave"]),y(a).showSpectrums?(d(),h(E,{key:0,color:y(n).mainColor?`rgb(${y(n).mainColor})`:"rgb(239 239 239)",show:!y(n).playerMetaShow,height:60},null,8,["color","show"])):pe("",!0)],36)),[[ur,y(n).showFullPlayer]])}}}),[["__scopeId","data-v-7060e9e2"]]),pS={class:"empty"},mS=B(n({__name:"TextContainer",props:{text:{},speed:{},delay:{}},setup(e){const t=e,r=s(null),n=s(null),i=s(null),a=s(null),o=s(!1),{width:u}=Er(i),h=()=>{if(r.value&&i.value){const e=r.value.offsetWidth,t=u.value;o.value=e>t+2}f()},f=()=>{o.value?g():v()};let p=null,m=null;const g=()=>{if(!(r.value&&i.value&&a.value&&n.value))return;const e=t.speed||.5;let s=0;const o=()=>{r.value&&i.value&&a.value&&n.value&&(s<=-r.value.scrollWidth-120?s=0:s-=e,a.value.style.transform=`translateX(${s}px)`,p=requestAnimationFrame(o))};m=setTimeout((()=>{o()}),t.delay||3e3)},v=()=>{null!==p&&(cancelAnimationFrame(p),p=null),null!==m&&(clearTimeout(m),m=null),a.value&&(a.value.style.transform="translateX(0)")};return l((()=>[t.text,u.value,n.value]),(()=>{z(h)})),l(o,(()=>{f()})),c((()=>{z(h)})),H((()=>{v()})),(e,t)=>(d(),F("div",{ref_key:"textContainerRef",ref:i,key:e.text.length,class:"text-container"},[D("span",pS,re(e.text),1),D("div",{ref_key:"scrollWrapperRef",ref:a,class:"scroll-wrapper"},[D("span",{ref_key:"textRef",ref:r,class:"text"},re(e.text),513),y(o)?(d(),F("span",{key:0,ref_key:"textCloneRef",ref:n,class:"text"},re(e.text),513)):pe("",!0)],512)]))}}),[["__scopeId","data-v-c6bc9e11"]]),yS={class:"play-data"},gS={class:"data"},vS={key:1,class:"artists"},_S={class:"play-control"},bS={key:0,class:"play-icon"},wS={key:1,class:"play-icon"},xS={class:"play-icon"},IS={class:"time"},TS=n({__name:"MainPlayer",setup(e){const t=Os(),n=ke(),a=Ke(),l=i(),u=r(),c=s([{label:"列表循环",key:"repeat",icon:tr("Repeat")},{label:"单曲循环",key:"repeat-once",icon:tr("RepeatSong")},{label:"随机播放",key:"shuffle",icon:tr("Shuffle")}]),m=o((()=>{const e=a.playSong,r=!!e?.mv&&0!==e.mv,n="song"===e.type,i=!!e?.path;return[{key:"playlist-add",label:"添加到歌单",props:{onClick:()=>fd([e],i)},icon:tr("AddList")},{key:"mv",label:"观看 MV",show:n&&r,props:{onClick:()=>t.push({name:"video",query:{id:a.playSong.mv,type:"mv"}})},icon:tr("Video",{size:18})},{key:"download",label:"下载歌曲",show:!i&&n,props:{onClick:()=>vd(a.playSong)},icon:tr("Download")},{key:"comment",label:"查看评论",show:!i,props:{onClick:()=>{l.$patch({showFullPlayer:!0,showPlayerComment:!0})}},icon:tr("Message")}]})),g=()=>{const e=cr(l.progress,l.duration);l.playStatus=!0,Hl.setSeek(e),Hl.play()},v=o((()=>a.isHasLrc&&u.barLyricShow&&"radio"!==a.playSong.type&&l.playStatus&&-1!==l.lyricIndex)),_=o((()=>{const e=a.songLyric.yrcData?.length&&u.showYrc?a.songLyric.yrcData[l.lyricIndex]:a.songLyric.lrcData[l.lyricIndex];return e?.tran&&u.showTran?`${e?.content}（ ${e?.tran} ）`:e?.content}));return(e,t)=>{const r=dr,i=ve,s=le,o=mS,b=Sr,w=_e,x=ce,I=hr,T=Ar,E=Ae,S=ar("debounce");return d(),F("div",{class:he(["main-player",{show:y(a).isHasPlayer&&y(l).showPlayBar}])},[p(r,{value:y(l).progress,"onUpdate:value":t[0]||(t[0]=e=>y(l).progress=e),step:.01,min:0,max:100,tooltip:!1,keyboard:!1,marks:y(l).chorus&&y(l).progress<=y(l).chorus?{[y(l).chorus]:""}:void 0,class:"player-slider",onDragstart:t[1]||(t[1]=e=>y(Hl).pause(!1)),onDragend:g},null,8,["value","marks"]),D("div",yS,[p(me,{name:"fade",mode:"out-in"},{default:f((()=>[(d(),F("div",{key:y(a).playSong.cover,class:"cover",onClick:t[2]||(t[2]=Yt((e=>y(l).showFullPlayer=!0),["stop"]))},[p(i,{src:y(a).songCover,alt:y(a).songCover,class:"cover-img","preview-disabled":"",onLoad:y(fe)},{placeholder:f((()=>t[15]||(t[15]=[D("div",{class:"cover-loading"},[D("img",{src:bo,class:"loading-img",alt:"loading-img"})],-1)]))),_:1},8,["src","alt","onLoad"]),p(s,{name:"Zoom",size:30})]))])),_:1}),p(me,{name:"left-sm",mode:"out-in"},{default:f((()=>[(d(),F("div",{key:y(a).playSong.id,class:"info"},[D("div",gS,[(d(),h(o,{key:y(a).playSong.name,text:y(a).playSong.name,speed:.2,class:"name"},null,8,["text"])),"radio"!==y(a).playSong.type?(d(),h(s,{key:0,name:y(n).isLikeSong(y(a).playSong.id)?"Favorite":"FavoriteBorder",size:20,class:"like",onClick:t[3]||(t[3]=e=>y(or)(y(a).playSong,!y(n).isLikeSong(y(a).playSong.id)))},null,8,["name"])):pe("",!0),p(b,{options:y(m),trigger:"click",placement:"top-start"},{default:f((()=>[p(s,{name:"FormatList",size:20,depth:2,class:"more"})])),_:1},8,["options"])]),p(me,{name:"fade",mode:"out-in"},{default:f((()=>[y(v)&&y(_)?(d(),h(o,{key:y(_),text:y(_),speed:.2,delay:500,class:"lyric"},null,8,["text"])):(d(),F("div",vS,["radio"===y(a).playSong.type?(d(),h(w,{key:0,class:"ar-item"},{default:f((()=>t[16]||(t[16]=[te("播客电台")]))),_:1})):Array.isArray(y(a).playSong.artists)?(d(!0),F(De,{key:1},Ne(y(a).playSong.artists,((e,r)=>(d(),h(w,{key:r,class:"ar-item",onClick:t[4]||(t[4]=e=>y(dd)(y(a).playSong.artists))},{default:f((()=>[te(re(e.name),1)])),_:2},1024)))),128)):(d(),h(w,{key:2,class:"ar-item",onClick:t[5]||(t[5]=e=>y(dd)(y(a).playSong.artists))},{default:f((()=>[te(re(y(a).playSong.artists||"未知艺术家"),1)])),_:1}))]))])),_:1})]))])),_:1})]),D("div",_S,[y(l).personalFmMode?sr((d(),F("div",bS,[p(s,{class:"icon",size:18,name:"ThumbDown"})])),[[S,()=>y(Hl).personalFMTrash(y(a).personalFMSong?.id)]]):sr((d(),F("div",wS,[p(s,{size:26,name:"SkipPrev"})])),[[S,()=>y(Hl).nextOrPrev("prev")]]),sr((d(),h(x,{loading:y(l).playLoading,focusable:!1,keyboard:!1,class:"play-pause",type:"primary",strong:"",secondary:"",circle:""},{icon:f((()=>[p(me,{name:"fade",mode:"out-in"},{default:f((()=>[(d(),h(s,{key:y(l).playStatus?"Pause":"Play",name:y(l).playStatus?"Pause":"Play",size:28},null,8,["name"]))])),_:1})])),_:1},8,["loading"])),[[S,()=>y(Hl).playOrPause()]]),sr((d(),F("div",xS,[p(s,{size:26,name:"SkipNext"})])),[[S,()=>y(Hl).nextOrPrev("next")]])]),p(me,{name:"fade",mode:"out-in"},{default:f((()=>[(d(),h(E,{key:y(l).personalFmMode?"fm":"normal",size:[8,0],class:"play-menu",justify:"end"},{default:f((()=>[D("div",IS,[p(w,{depth:"2"},{default:f((()=>[te(re(y(lr)(y(l).currentTime)),1)])),_:1}),p(w,{depth:"2"},{default:f((()=>[te(re(y(lr)(y(l).duration)),1)])),_:1})]),y(Y)?(d(),F("div",{key:0,class:"menu-icon",onClick:t[6]||(t[6]=Yt(((...e)=>y(Hl).toggleDesktopLyric&&y(Hl).toggleDesktopLyric(...e)),["stop"]))},[p(s,{name:"DesktopLyric",depth:y(l).showDesktopLyric?1:3},null,8,["depth"])])):pe("",!0),"radio"===y(a).playSong.type||y(l).personalFmMode?pe("",!0):(d(),h(b,{key:1,options:y(c),"show-arrow":!0,onSelect:t[8]||(t[8]=e=>y(Hl).togglePlayMode(e))},{default:f((()=>[D("div",{class:"menu-icon",onClick:t[7]||(t[7]=Yt((e=>y(Hl).togglePlayMode(!1)),["stop"]))},[p(s,{name:y(l).playModeIcon},null,8,["name"])])])),_:1},8,["options"])),p(I,{"show-arrow":!1,style:{padding:0}},{trigger:f((()=>[D("div",{class:"menu-icon",onClick:t[9]||(t[9]=Yt(((...e)=>y(Hl).toggleMute&&y(Hl).toggleMute(...e)),["stop"])),onWheel:t[10]||(t[10]=(...e)=>y(Hl).setVolume&&y(Hl).setVolume(...e))},[p(s,{name:y(l).playVolumeIcon},null,8,["name"])],32)])),default:f((()=>[D("div",{class:"volume-change",onWheel:t[13]||(t[13]=(...e)=>y(Hl).setVolume&&y(Hl).setVolume(...e))},[p(r,{value:y(l).playVolume,"onUpdate:value":[t[11]||(t[11]=e=>y(l).playVolume=e),t[12]||(t[12]=e=>y(Hl).setVolume(e))],tooltip:!1,min:0,max:1,step:.01,vertical:""},null,8,["value"]),p(w,{class:"slider-num"},{default:f((()=>[te(re(y(l).playVolumePercent)+"%",1)])),_:1})],32)])),_:1}),y(l).personalFmMode?pe("",!0):(d(),h(T,{key:2,value:y(n).playList?.length??0,show:y(u).showPlaylistCount,max:999,style:N({marginRight:y(u).showPlaylistCount?"12px":null})},{default:f((()=>[D("div",{class:"menu-icon",onClick:t[14]||(t[14]=Yt((e=>y(l).playListShow=!y(l).playListShow),["stop"]))},[p(s,{name:"PlayList"})])])),_:1},8,["value","show","style"]))])),_:1}))])),_:1})],2)}}}),ES=B(TS,[["__scopeId","data-v-50726baf"]]),SS={class:"playlist-header"},AS={class:"index"},kS={class:"data"},CS={key:0,class:"artists"},PS={key:1,class:"artists"},RS={key:2,class:"artists"},MS=["onClick"],LS=B(n({__name:"MainPlayList",setup(e){const t=ke(),r=i(),n=s(null),a=o((()=>t.playList.map(((e,t)=>({...e,key:t})))));return(e,i)=>{const s=_e,o=le,l=kr,u=pt,c=ce,m=Cr,g=st,v=Pr,_=Rr,b=ar("debounce");return d(),h(_,{show:y(r).playListShow,"onUpdate:show":i[2]||(i[2]=e=>y(r).playListShow=e),class:he({"full-player":y(r).showFullPlayer}),style:N([{"--main-color":y(r).mainColor},{width:"400px"}]),"auto-focus":!1,id:"main-playlist"},{default:f((()=>[p(v,{"native-scrollbar":!1,closable:""},{header:f((()=>[D("div",SS,[p(s,{class:"name"},{default:f((()=>i[3]||(i[3]=[te("播放队列")]))),_:1}),p(s,{class:"count",depth:"3"},{default:f((()=>[te(re(y(t).playList.length)+" 首歌曲 ",1)])),_:1})])])),footer:f((()=>[p(g,{cols:2,"x-gap":"16",class:"playlist-menu"},{default:f((()=>[p(m,null,{default:f((()=>[p(c,{focusable:!1,size:"large",strong:"",secondary:"",onClick:i[0]||(i[0]=e=>y(Hl).cleanPlayList())},{icon:f((()=>[p(o,{name:"DeleteSweep"})])),default:f((()=>[i[5]||(i[5]=te(" 清空列表 "))])),_:1})])),_:1}),p(m,null,{default:f((()=>[p(c,{focusable:!1,size:"large",strong:"",secondary:"",onClick:i[1]||(i[1]=e=>((e,t="smooth")=>{n.value?.scrollTo({index:e,behavior:t})})(y(r).playIndex))},{icon:f((()=>[p(o,{name:"Location"})])),default:f((()=>[i[6]||(i[6]=te(" 当前播放 "))])),_:1})])),_:1})])),_:1})])),default:f((()=>[p(me,{name:"fade",mode:"out-in"},{default:f((()=>[y(t).playList.length?(d(),h(l,{key:0,ref_key:"playListRef",ref:n,"item-size":80,items:y(a),"default-scroll-index":y(r).playIndex,class:"playlist-list",style:{"max-height":"calc(100vh - 142px)"}},{default:f((({item:e,index:t})=>[sr((d(),F("div",{key:t,class:he(["song-item",{on:y(r).playIndex===t}])},[D("div",AS,[y(r).playIndex!==t?(d(),h(s,{key:0,class:he(["num",{big:t+1>9999}]),depth:"3"},{default:f((()=>[te(re(t+1),1)])),_:2},1032,["class"])):(d(),h(o,{key:1,size:20,name:"Music"}))]),D("div",kS,[p(s,{class:"name text-hidden"},{default:f((()=>[te(re(e.name||"未知曲目"),1)])),_:2},1024),Array.isArray(e?.artists)?(d(),F("div",CS,[(d(!0),F(De,null,Ne(e.artists,(e=>(d(),h(s,{key:e.id,depth:"3",class:"ar"},{default:f((()=>[te(re(e.name),1)])),_:2},1024)))),128))])):"radio"===e.type?(d(),F("div",PS,[p(s,{class:"ar",depth:"3"},{default:f((()=>i[4]||(i[4]=[te(" 播客电台 ")]))),_:1})])):(d(),F("div",RS,[p(s,{class:"ar",depth:"3"},{default:f((()=>[te(re(e?.artists||"未知艺术家"),1)])),_:2},1024)]))]),D("div",{class:"remove",onClick:Yt((e=>y(Hl).removeSongIndex(t)),["stop"])},[p(o,{size:20,name:"Delete"})],8,MS)],2)),[[b,()=>{y(Hl).togglePlayIndex(t),y(r).playListShow=!1}]])])),_:1},8,["items","default-scroll-index"])):(d(),h(u,{key:1,description:"播放列表暂无歌曲，快去添加吧",class:"tip",size:"large",style:{"margin-top":"60px"}}))])),_:1})])),_:1})])),_:1},8,["show","class","style"])}}}),[["__scopeId","data-v-75599a33"]]),OS=""+new URL("../images/vip.png?assest",import.meta.url).href,FS={class:"avatar"},DS={class:"user-data"},NS={key:0,class:"vip",src:OS},BS={key:0,class:"like-num"},US=["onClick"],jS=B(n({__name:"User",setup(e){const t=Os(),r=ke(),n=s(!1),i=()=>{r.userLoginStatus?n.value=!n.value:cd()},a=o((()=>[{label:"歌单",name:"like-playlists",value:r.userLikeData.playlists.length},{label:"专辑",name:"like-albums",value:r.userLikeData.albums.length},{label:"歌手",name:"like-artists",value:r.userLikeData.artists.length}])),l=()=>{K()?window.$dialog.warning({title:"退出登录",content:"确认退出当前用户登录？",positiveText:"确认登出",negativeText:"取消",onPositiveClick:()=>Or()}):cd()};return Ce((()=>{(async()=>{if("uid"===r.loginType)return void(await Le());const e=await Mr();e.data?.profile&&Object.keys(e.data?.profile)?.length?(r.userLoginStatus=!0,await Lr(),await Me()):0!==r.userData.userId&&(r.userLoginStatus=!1,r.userData.userId=0,window.$message.warning("登录已过期，请重新登录",{duration:2e3}),cd())})()})),(e,s)=>{const o=je,u=le,c=_e,m=Fr,g=Ae,v=Fe,_=ce,b=hr;return d(),h(b,{trigger:"manual",show:y(n),onClickoutside:s[1]||(s[1]=e=>n.value=!1)},{trigger:f((()=>[D("div",{class:"user",style:N({pointerEvents:y(n)?"none":"auto"}),onClick:i},[D("div",FS,[y(r).userLoginStatus?(d(),h(o,{key:0,src:y(r).userData?.avatarUrl,"fallback-src":"/images/avatar.jpg?assest",round:""},null,8,["src"])):(d(),h(o,{key:1,round:""},{default:f((()=>[p(u,{name:"Person",depth:3,size:"26"})])),_:1}))]),D("div",DS,[p(c,{class:"name"},{default:f((()=>[te(re(y(r).userLoginStatus?y(r).userData.name||"未知用户名":"未登录"),1)])),_:1}),y(r).userLoginStatus&&0!==y(r).userData.vipType?(d(),F("img",NS)):pe("",!0),p(u,{class:he(["down",{open:y(n)}]),name:"DropDown",depth:3},null,8,["class"])])],4)])),default:f((()=>[D("div",{class:"user-menu",onClick:s[0]||(s[0]=e=>n.value=!1)},["uid"!==y(r).loginType?(d(),F("div",BS,[(d(!0),F(De,null,Ne(y(a),((e,r)=>(d(),F("div",{key:r,class:"num-item",onClick:r=>y(t).push({name:e.name})},[p(m,{from:0,to:e.value},null,8,["to"]),p(c,{depth:3},{default:f((()=>[te(re(e.label),1)])),_:2},1024)],8,US)))),128))])):(d(),h(g,{key:1,align:"center",vertical:""},{default:f((()=>[p(c,null,{default:f((()=>s[2]||(s[2]=[te("UID 登录模式")]))),_:1}),p(c,{depth:3},{default:f((()=>s[3]||(s[3]=[te("部分功能暂不可用")]))),_:1})])),_:1})),p(v),p(_,{focusable:!1,class:"logout",strong:"",secondary:"",round:"",onClick:l},{icon:f((()=>[p(u,{name:"Power"})])),default:f((()=>[s[4]||(s[4]=te(" 退出登录 "))])),_:1})])])),_:1},8,["show"])}}}),[["__scopeId","data-v-62a19a9c"]]),GS=()=>gt({url:"/search/hot/detail"}),zS=(e,t=50,r=0,n=1018)=>gt({url:"/cloudsearch",params:{keywords:e,limit:t,offset:r,type:n}}),HS={class:"suggest-type"},VS=["onClick"],$S=n({__name:"SearchSuggest",emits:["toSearch"],setup(e,{emit:t}){const r=t,n=i(),a=s({}),o=s(0),l=s(null),c=s(null),m={songs:{name:"单曲",icon:"Music"},artists:{name:"歌手",icon:"Artist"},albums:{name:"专辑",icon:"Album"},playlists:{name:"歌单",icon:"MusicList"}},g=async e=>{a.value={};const t=await((e,t=!1)=>gt({url:"/search/suggest",params:{keywords:e,...t&&{type:"mobile"}}}))(e);a.value=t.result,z(v)},v=()=>{const e=l.value?.offsetHeight,t=c.value?.offsetHeight;if(e||t){const r=(e||0)+(t||0)+(t?8:0)+20;o.value=r}else o.value=0};return u((()=>n.searchInputValue),(e=>{e&&""!==e&&g(e)}),{debounce:300}),(e,t)=>{const i=le,s=_e,u=Ye,g=Ge;return d(),h(me,{name:"fadeDown",mode:"out-in",onAfterEnter:v,onAfterLeave:v},{default:f((()=>[y(n).searchFocus&&y(n).searchInputValue?(d(),h(g,{key:0,class:"search-suggest","content-style":"padding: 0",style:N({height:`${y(o)}px`,border:0===y(o)?"none":null})},{default:f((()=>[p(u,{class:"scrollbar"},{default:f((()=>[D("div",{ref_key:"directSearchRef",ref:l,class:"direct",onClick:t[0]||(t[0]=e=>r("toSearch",y(n).searchInputValue,"keyword"))},[p(i,{name:"Search",depth:3}),p(s,{class:"text text-hidden"},{default:f((()=>[te("直接搜索："+re(y(n).searchInputValue),1)])),_:1})],512),p(me,{name:"fade",mode:"out-in",onAfterLeave:v},{default:f((()=>[Object.keys(y(a))?.length&&y(a)?.order?(d(),F("div",{key:0,ref_key:"searchSuggestRef",ref:c,class:"all-suggest"},[(d(!0),F(De,null,Ne(y(a).order,((e,t)=>(d(),F("div",{key:t,class:"suggest"},[D("div",HS,[p(i,{name:m[e].icon},null,8,["name"]),p(s,null,{default:f((()=>[te(re(m[e].name),1)])),_:2},1024)]),(d(!0),F(De,null,Ne(y(a)[e],((t,n)=>(d(),F("div",{key:n,class:"suggest-item",onClick:n=>r("toSearch",t,e)},[p(s,{class:"name"},{default:f((()=>[te(re(t.name),1)])),_:2},1024),t?.artist?(d(),h(s,{key:0,class:"artist",depth:"3"},{default:f((()=>[te(re(t.artist.name),1)])),_:2},1024)):t?.artists?(d(),h(s,{key:1,class:"artist",depth:"3"},{default:f((()=>[te(re(t.artists[0].name),1)])),_:2},1024)):pe("",!0)],8,VS)))),128))])))),128))],512)):pe("",!0)])),_:1})])),_:1})])),_:1},8,["style"])):pe("",!0)])),_:1})}}}),XS=B($S,[["__scopeId","data-v-f9347d55"]]),qS={key:0,class:"history"},WS={class:"title"},YS={key:1,class:"hot-list"},KS={class:"title"},ZS=["onClick"],QS={class:"data"},JS={class:"name"},eA={class:"hot"},tA=n({__name:"SearchDefault",emits:["toSearch"],setup(e,{emit:t}){const n=t,a=ke(),l=i(),u=r(),m=s([]),g=o((()=>!l.searchInputValue&&l.searchFocus&&(m.value.length>0||a.searchHistory.length>0))),v=async()=>{if(!u.useOnlineService)return;const e=await ne(GS,{key:"searchHotData",time:10});m.value=e.data},_=()=>{window.$dialog.warning({title:"删除搜索历史",content:"确认删除全部的搜索历史？这将无法恢复！",positiveText:"确认",negativeText:"取消",onPositiveClick:()=>{a.searchHistory=[]}})};return c((()=>{v()})),(e,t)=>{const r=le,i=_e,s=Ve,o=Ae,l=Ye,c=Ge;return d(),h(me,{name:"fadeDown",mode:"out-in",onBeforeEnter:v},{default:f((()=>[y(g)?(d(),h(c,{key:0,class:"search-default","content-style":"padding: 0"},{default:f((()=>[p(l,{class:"scrollbar"},{default:f((()=>[y(u).showSearchHistory&&y(a).searchHistory.length>0?(d(),F("div",qS,[D("div",WS,[p(r,{name:"History"}),p(i,{class:"name"},{default:f((()=>t[0]||(t[0]=[te("搜索历史 ")]))),_:1}),p(r,{class:"delete",name:"Delete",onClick:Yt(_,["stop"])})]),p(o,{class:"history-list"},{default:f((()=>[(d(!0),F(De,null,Ne(y(a).searchHistory,((e,t)=>(d(),h(s,{key:t,bordered:!1,round:"",onClick:t=>n("toSearch",e)},{default:f((()=>[te(re(e.length>10?e.slice(0,10)+"...":e),1)])),_:2},1032,["onClick"])))),128))])),_:1})])):pe("",!0),y(m).length>0?(d(),F("div",YS,[D("div",KS,[p(r,{name:"Fire"}),p(i,{class:"name"},{default:f((()=>t[1]||(t[1]=[te("热搜榜 ")]))),_:1})]),(d(!0),F(De,null,Ne(y(m),((e,t)=>(d(),F("div",{key:t,class:"hot-item",onClick:t=>n("toSearch",e.searchWord)},[p(i,{class:"num",depth:"3"},{default:f((()=>[te(re(t+1),1)])),_:2},1024),D("div",QS,[D("div",JS,[p(i,{class:"text"},{default:f((()=>[te(re(e.searchWord),1)])),_:2},1024),e.iconUrl?(d(),h(s,{key:0,type:1==e.iconType?"error":"warning",bordered:!1,size:"small",round:""},{default:f((()=>[te(re(1===e.iconType?"HOT":"UP"),1)])),_:2},1032,["type"])):pe("",!0)]),p(i,{class:"content",depth:"3"},{default:f((()=>[te(re(e.content),1)])),_:2},1024)]),D("div",eA,[p(r,{name:"Fire"}),p(i,{class:"hot-num"},{default:f((()=>[te(re(e.score),1)])),_:2},1024)])],8,ZS)))),128))])):pe("",!0)])),_:1})])),_:1})):pe("",!0)])),_:1})}}}),rA=B(tA,[["__scopeId","data-v-449c60ef"]]),nA=n({__name:"SearchInpMenu",emits:["toSearch"],setup(e,{expose:t,emit:r}){const n=r,a=i(),o=s(0),l=s(0),u=s(!1),c=s([]);return t({openDropdown:async e=>{try{e.preventDefault(),u.value=!1;const t=await Dr();z().then((()=>{c.value=[{key:"copy",label:"复制搜索框内容",show:!!a.searchInputValue,props:{onClick:()=>nt(a.searchInputValue)},icon:tr("Copy")},{key:"paste",label:"粘贴至搜索框",show:!!t,props:{onClick:()=>a.searchInputValue+=t},icon:tr("Paste")},{key:"paste-search",label:"粘贴并搜索",show:!!t,props:{onClick:()=>{a.searchInputValue=t,n("toSearch",a.searchInputValue)}},icon:tr("Search")}],o.value=e.clientX,l.value=e.clientY,u.value=!0}))}catch(t){console.error("右键菜单出现异常：",t),window.$message.error("右键菜单出现异常")}}}),(e,t)=>{const r=Sr;return d(),h(r,{x:y(o),y:y(l),show:y(u),options:y(c),class:"search-inp-menu",placement:"bottom-start",trigger:"manual",onSelect:t[0]||(t[0]=e=>u.value=!1),onClickoutside:t[1]||(t[1]=e=>u.value=!1)},null,8,["x","y","show","options"])}}}),iA={class:"search"},aA=n({__name:"SearchInp",setup(e){const t=Os(),r=ke(),n=i(),a=s(null),o=s(null),l=s("搜索音乐 / 视频"),u=s(""),h=e=>!e.startsWith(" "),m=()=>{n.searchFocus=!0},g=async()=>{try{const e=await gt({url:"/search/default",params:{timestamp:Date.now()}});l.value=e.data.showKeyword,u.value=e.data.realkeyword}catch(e){console.error("搜索关键词获取失败：",e),l.value="搜索音乐 / 视频"}},v=async(e,i="keyword")=>{if(e||"搜索音乐 / 视频"!==l.value)switch(!e&&"搜索音乐 / 视频"!==l.value&&u.value&&(e=u.value?.trim()),n.searchFocus=!1,o.value?.blur(),g(),i){case"keyword":t.push({name:"search",query:{keyword:e}}),(e=>{if(!(e=e.trim()))return;const t=r.searchHistory.indexOf(e);-1!==t&&r.searchHistory.splice(t,1),r.searchHistory.unshift(e),r.searchHistory.length>30&&(r.searchHistory.length=30)})(e);break;case"songs":{const t=await vt(e?.id),r=Je(t.songs)[0];Hl.addNextSong(r,!0);break}case"playlists":t.push({name:"playlist",query:{id:e?.id}});break;case"artists":t.push({name:"artist",query:{id:e?.id}});break;case"albums":t.push({name:"album",query:{id:e?.id}})}};return c((()=>{g(),Z(g,6e4)})),(e,t)=>{const r=le,i=Se,s=rA,u=XS;return d(),F("div",iA,[p(i,{ref_key:"searchInputRef",ref:o,value:y(n).searchInputValue,"onUpdate:value":t[0]||(t[0]=e=>y(n).searchInputValue=e),class:he(["search-input",{focus:y(n).searchFocus}]),"input-props":{autocomplete:"off"},placeholder:y(l),"allow-input":h,round:"",clearable:"",onFocus:m,onKeyup:t[1]||(t[1]=Nr((e=>v(y(n).searchInputValue)),["enter"])),onContextmenu:t[2]||(t[2]=Yt((e=>y(a)?.openDropdown(e)),["stop"])),onClick:t[3]||(t[3]=Yt((()=>{}),["stop"]))},{prefix:f((()=>[p(r,{size:18,name:"Search"})])),_:1},8,["value","class","placeholder"]),p(me,{name:"fade",mode:"out-in"},{default:f((()=>[sr(D("div",{class:"search-mask",onClick:t[4]||(t[4]=Yt((e=>y(n).searchFocus=!1),["stop"]))},null,512),[[ur,y(n).searchFocus]])])),_:1}),p(s,{onToSearch:v}),p(u,{onToSearch:v}),p(nA,{ref_key:"searchInpMenuRef",ref:a,onToSearch:v},null,512)])}}}),sA=B(aA,[["__scopeId","data-v-4cc4276e"]]),oA=n({__name:"Nav",setup(e){const t=Os(),n=r(),i=s(!1),a=s(!1),l=s(!1),u=()=>window.electron.ipcRenderer.send("win-min"),m=()=>{window.electron.ipcRenderer.sendSync("win-state")?(l.value=!1,window.electron.ipcRenderer.send("win-restore")):(l.value=!0,window.electron.ipcRenderer.send("win-max"))},g=e=>{a.value&&(n.showCloseAppTip=!1,n.closeAppMethod=e),i.value=!1,window.electron.ipcRenderer.send("hide"===e?"win-hide":"win-close")},v=()=>{n.showCloseAppTip?i.value=!0:g(n.closeAppMethod)},_=o((()=>[{label:"auto"===n.themeMode?"浅色模式":"light"===n.themeMode?"深色模式":"跟随系统",key:"themeMode",icon:tr("auto"===n.themeMode?"LightTheme":"light"===n.themeMode?"DarkTheme":"AutoTheme")},{key:"header-divider",type:"divider"},{key:"restart",label:"软件热重载",show:Y,props:{onClick:()=>window.location.reload()},icon:tr("Restart")},{key:"dev-tools",label:"开启控制台",show:Br,icon:tr("Code")},{key:"setting",label:"全局设置",icon:tr("Settings")}])),b=e=>{switch(e){case"themeMode":n.setThemeMode();break;case"setting":_d();break;case"dev-tools":window.electron.ipcRenderer.send("open-dev-tools")}};return c((()=>{Y&&(l.value=window.electron.ipcRenderer.sendSync("win-state"))})),(e,r)=>{const s=le,o=ce,c=Ae,w=sA,x=jS,I=Sr,T=Fe,E=_e,S=Ur,A=jr,k=Gr;return d(),h(k,{class:"nav"},{default:f((()=>[p(c,{class:"page-control"},{default:f((()=>[p(o,{focusable:!1,tertiary:"",circle:"",onClick:r[0]||(r[0]=e=>y(t).go(-1))},{icon:f((()=>[p(s,{name:"NavigateBefore",size:26})])),_:1}),p(o,{focusable:!1,tertiary:"",circle:"",onClick:r[1]||(r[1]=e=>y(t).go(1))},{icon:f((()=>[p(s,{name:"NavigateNext",size:26})])),_:1})])),_:1}),p(c,{class:"nav-main"},{default:f((()=>[p(w),r[7]||(r[7]=D("div",{class:"nav-drag"},null,-1)),y(n).useOnlineService?(d(),h(x,{key:0})):pe("",!0),p(I,{options:y(_),trigger:"click","show-arrow":"",onSelect:b},{default:f((()=>[p(o,{focusable:!1,title:"设置",tertiary:"",circle:""},{icon:f((()=>[p(s,{name:"Settings"})])),_:1})])),_:1},8,["options"])])),_:1}),y(Y)?(d(),h(c,{key:0,align:"center",class:"client-control"},{default:f((()=>[p(T,{class:"divider",vertical:""}),p(o,{focusable:!1,title:"最小化",tertiary:"",circle:"",onClick:u},{icon:f((()=>[p(s,{name:"WindowMinimize"})])),_:1}),p(o,{focusable:!1,title:y(l)?"还原":"最大化",tertiary:"",circle:"",onClick:m},{icon:f((()=>[p(s,{name:y(l)?"WindowRestore":"WindowMaximize"},null,8,["name"])])),_:1},8,["title"]),p(o,{focusable:!1,title:"关闭",tertiary:"",circle:"",onClick:v},{icon:f((()=>[p(s,{name:"WindowClose"})])),_:1})])),_:1})):pe("",!0),p(A,{show:y(i),"onUpdate:show":r[5]||(r[5]=e=>xe(i)?i.value=e:null),"auto-focus":!1,title:"关闭软件",style:{width:"600px"},preset:"card","transform-origin":"center",bordered:"",onAfterLeave:r[6]||(r[6]=e=>a.value=!1)},{footer:f((()=>[p(c,{justify:"end"},{default:f((()=>[p(o,{strong:"",secondary:"",onClick:r[3]||(r[3]=e=>g("exit"))},{icon:f((()=>[p(s,{name:"ExitToApp"})])),default:f((()=>[r[10]||(r[10]=te(" 关闭 "))])),_:1}),p(o,{type:"primary",strong:"",secondary:"",onClick:r[4]||(r[4]=e=>g("hide"))},{icon:f((()=>[p(s,{name:"WindowHide"})])),default:f((()=>[r[11]||(r[11]=te(" 隐藏到托盘 "))])),_:1})])),_:1})])),default:f((()=>[p(E,{class:"tip"},{default:f((()=>r[8]||(r[8]=[te("确认关闭软件吗？")]))),_:1}),p(S,{checked:y(a),"onUpdate:checked":r[2]||(r[2]=e=>xe(a)?a.value=e:null),class:"checkbox"},{default:f((()=>r[9]||(r[9]=[te(" 记住且不再询问 ")]))),_:1},8,["checked"])])),_:1},8,["show"])])),_:1})}}}),lA=B(oA,[["__scopeId","data-v-06e4810b"]]),uA=n({__name:"Menu",setup(e){const t=Os(),n=ke(),a=Ke(),u=i(),c=r(),f=s(null),p=s(t.currentRoute.value.name||"home"),m=o((()=>c.useOnlineService?[{key:"home",link:"home",label:"为我推荐",icon:tr("Home",{style:{transform:"translateY(-1px)"}})},{key:"discover",link:"discover",label:"发现音乐",icon:tr("Discover",{style:{transform:"translateY(-1px)"}})},{key:"personal-fm",label:"私人漫游",show:0!==K(),icon:tr("Radio",{style:{transform:"translateY(-1px)"}})},{key:"radio-hot",link:"radio-hot",label:"播客电台",icon:tr("Record",{style:{transform:"translateY(-1px)"}})},{key:"divider",type:"divider"},{key:"like-songs",label:()=>b("div",{class:"user-liked"},[b(_e,null,(()=>"我喜欢的音乐")),b(ce,{type:"tertiary",round:!0,strong:!0,secondary:!0,renderIcon:tr("HeartBit"),onClick:e=>{e.stopPropagation(),I()}})]),icon:tr("Favorite")},{key:"like",link:"like",label:"我的收藏",icon:tr("Star")},{key:"cloud",link:"cloud",label:"我的云盘",show:1===K(),icon:tr("Cloud")},{key:"local",link:"local",label:"本地歌曲",show:Y,icon:tr("FolderMusic")},{key:"history",link:"history",label:"最近播放",icon:tr("History")},{key:"divider-two",type:"divider"},{key:"user-playlists",icon:u.menuCollapsed?tr("PlaylistAdd"):void 0,label:()=>b("div",{class:"user-list"},[b(_e,{depth:3},(()=>["创建的歌单"])),b(ce,{type:"tertiary",round:!0,strong:!0,secondary:!0,renderIcon:tr("Add"),onclick:e=>{e.stopPropagation(),yd()}})]),children:[...v.value]},{key:"liked-playlists",icon:u.menuCollapsed?tr("PlaylistAddCheck"):void 0,label:()=>b("div",{class:"user-list"},b(_e,{depth:3},(()=>["收藏的歌单"]))),children:[..._.value]}]:[])),g=(e,t)=>e.map((e=>({key:e.id,label:()=>t?b("div",{class:"pl-cover"},[b(je,{src:e.coverSize?.s||e.cover,fallbackSrc:"/images/album.jpg?assest",lazy:!0}),b(zr,null,(()=>e.name))]):b(zr,null,(()=>e.name)),icon:t?void 0:tr("PlayList")}))),v=o((()=>{const e=n.userData.userId,t=n.userLikeData.playlists.filter((t=>t?.userId===e)).slice(1);return g(t,c.menuShowCover)})),_=o((()=>{const e=n.userData.userId,t=n.userLikeData.playlists.filter((t=>t?.userId!==e));return g(t,c.menuShowCover)})),w=e=>"link"in e?b(Cs,{to:{name:e.link}},(()=>e.label)):"function"==typeof e.label?e.label():e.label,x=(e,r)=>{if("personal-fm"===e)return a.personalFMSong?.id?(u.personalFmMode?Hl.play():(u.personalFmMode=!0,u.playHeartbeatMode=!1,Hl.resetStatus(),Hl.initPlayer()),u.showFullPlayer=!0,void window.$message.info("已开启私人漫游",{icon:tr("Radio")})):void window.$message.error("开启私人漫游出错，请重试");if("number"==typeof e)t.push({name:"playlist",query:{id:r.key}});else if("like-songs"===e)t.push({name:"like-songs"})},I=Q((()=>Hl.toggleHeartMode()),1e3,{leading:!0,trailing:!1});return l((()=>[t.currentRoute.value,n.userLikeData.playlists]),(()=>(()=>{const e=t.currentRoute.value.matched?.[0]?.name||t.currentRoute.value?.name;if(e)switch(f.value?.showOption(e),e){case"playlist":{const e=Number(t.currentRoute.value.query.id||0),r=n.userLikeData.playlists.some((t=>t?.id===e));e&&(p.value=r?Number(e):"home"),f.value?.showOption(e);break}default:p.value=e}})())),(e,t)=>{const r=rr;return d(),h(r,{ref_key:"menuRef",ref:f,value:y(p),"onUpdate:value":[t[0]||(t[0]=e=>xe(p)?p.value=e:null),x],class:he({cover:y(c).menuShowCover}),indent:0,"root-indent":26,collapsed:y(u).menuCollapsed,"collapsed-width":64,"collapsed-icon-size":22,"default-expand-all":!0,options:y(m),"render-label":w},null,8,["value","class","collapsed","options"])}}}),cA=B(uA,[["__scopeId","data-v-69288b35"]]),dA={class:"sider-all"},hA=B(n({__name:"Sider",setup(e){const t=Os(),r=Ke(),n=i();return(e,i)=>{const a=_e,s=cA,o=Ye;return d(),F("div",dA,[D("div",{class:he(["logo",{collapsed:y(n).menuCollapsed}]),onClick:i[0]||(i[0]=e=>y(t).push("/"))},[i[2]||(i[2]=D("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},[D("path",{d:"M511.764091 131.708086a446.145957 446.145957 0 1 0 446.145957 446.145957 446.145957 446.145957 0 0 0-446.145957-446.145957z m0 519.76004A71.829499 71.829499 0 1 1 583.59359 580.530919 72.275645 72.275645 0 0 1 511.764091 651.468126z",fill:"#F55E55","p-id":"11551"}),D("path",{d:"M802.205109 0.541175l-168.197026 37.030114a67.814185 67.814185 0 0 0-53.091369 66.029602V223.614153l3.569168 349.778431h114.213365V223.614153h108.859613a26.322611 26.322611 0 0 0 26.768758-26.322611V26.863786a26.768757 26.768757 0 0 0-32.122509-26.322611z",fill:"#F9BBB8","p-id":"11552"}),D("path",{d:"M511.764091 386.457428a186.935156 186.935156 0 1 0 186.935156 186.48901A186.935156 186.935156 0 0 0 511.764091 386.457428z m0 264.564552a71.383353 71.383353 0 1 1 71.383353-71.383353 71.383353 71.383353 0 0 1-71.383353 71.383353z",fill:"#F9BBB8","p-id":"11553"})],-1)),p(a,null,{default:f((()=>i[1]||(i[1]=[te("SPlayer")]))),_:1})],2),p(o,{style:N({maxHeight:`calc(100vh - ${y(r).isHasPlayer&&y(n).showPlayBar?150:70}px)`})},{default:f((()=>[p(s)])),_:1},8,["style"])])}}}),[["__scopeId","data-v-0fb158c0"]]),fA=(()=>{const e=e=>null==e||void 0===e||""===e,t=(e,t,r)=>{console.info(`%c ${e} %c ${t} %c`,`background:${r};border:1px solid ${r}; padding: 1px; border-radius: 2px 0 0 2px; color: #fff;`,`border:1px solid ${r}; padding: 1px; border-radius: 0 2px 2px 0; color: ${r};`,"background:transparent")};return{info:(r,n="")=>{const i=e(n)?"Info":r,a=e(n)?r:n;t(i,a,"#909399")},error:(r,n="")=>{const i=e(n)?"Error":r,a=e(n)?r:n;t(i,a,"#F56C6C")},warning:(r,n="")=>{const i=e(n)?"Warning":r,a=e(n)?r:n;t(i,a,"#E6A23C")},success:(r,n="")=>{const i=e(n)?"Success ":r,a=e(n)?r:n;t(i,a,"#67C23A")},picture:(e,t=1)=>{const r=new Image;r.crossOrigin="anonymous",r.onload=()=>{const e=document.createElement("canvas"),n=e.getContext("2d");if(n){e.width=r.width,e.height=r.height,n.fillStyle="red",n.fillRect(0,0,e.width,e.height),n.drawImage(r,0,0);const i=e.toDataURL("image/png");console.info("%c sup?",`font-size: 1px;\n          padding: ${Math.floor(r.height*t/2)}px ${Math.floor(r.width*t/2)}px;background-image: url(${i});\n          background-repeat: no-repeat;\n          background-size: ${r.width*t}px ${r.height*t}px;\n          color: transparent;`)}},r.src=e},table:()=>{console.info("%c id%c name%c age","color: white; background-color: black; padding: 2px 10px;","color: white; background-color: black; padding: 2px 10px;","color: white; background-color: black; padding: 2px 10px;"),[{id:1,name:"Alice",age:25},{id:2,name:"Bob",age:30},{id:3,name:"Charlie",age:35}].forEach((e=>{console.info(`%c ${e.id} %c ${e.name} %c ${e.age} `,"color: black; background-color: lightgray; padding: 2px 10px;","color: black; background-color: lightgray; padding: 2px 10px;","color: black; background-color: lightgray; padding: 2px 10px;")}))}}})(),pA=async()=>{const e=ke(),t=i(),n=r(),a=qt();gA(),(()=>{if(window.localStorage.getItem("isAgree"))return;const e=window.$modal.create({preset:"card",transformOrigin:"center",autoFocus:!1,maskClosable:!1,closeOnEsc:!1,closable:!1,style:{maxWidth:"70vw"},content:()=>b(lo,{onClose:()=>{e.destroy(),window.localStorage.setItem("isAgree",Date.now().toString())}}),onEsc:()=>{window.$message.warning("请先阅读并同意用户协议")}})})(),mA(),await e.loadData(),Hl.initPlayer(n.autoPlay,n.memoryLastSeek?t.currentTime:0),Hl.playModeSyncIpc(),Y&&(a.registerAllShortcuts(),window.electron.ipcRenderer.send("win-loaded"),window.electron.ipcRenderer.send("change-desktop-lyric",t.showDesktopLyric),n.checkUpdateOnStart&&window.electron.ipcRenderer.send("check-update"))},mA=()=>{Hr(window,"keydown",yA)},yA=Q((e=>{const t=qt(),r=e.target;if(["input","textarea"].includes(r.tagName.toLowerCase()))return;e.preventDefault(),e.stopPropagation();const n=e.code,i=e.ctrlKey||e.metaKey,a=e.shiftKey,s=e.altKey;for(const o in t.shortcutList){const e=t.shortcutList[o],r=e.shortcut.split("+");let l=!0;r.includes("CmdOrCtrl")&&!i&&(l=!1),r.includes("Shift")&&!a&&(l=!1),r.includes("Alt")&&!s&&(l=!1);if(r.find((e=>"CmdOrCtrl"!==e&&"Shift"!==e&&"Alt"!==e))!==n&&(l=!1),l&&o)switch(e.name,o){case"playOrPause":Hl.playOrPause();break;case"playPrev":Hl.nextOrPrev("prev");break;case"playNext":Hl.nextOrPrev("next");break;case"volumeUp":Hl.setVolume("up");break;case"volumeDown":Hl.setVolume("down");break;case"toogleDesktopLyric":Hl.toggleDesktopLyric()}}}),100),gA=async()=>{fA.success(`🚀 ${ql.version}`,ql.productName),fA.info(`👤 ${ql.author}`,ql.github)},vA=B(n({__name:"App",setup(e){const t=Ke(),n=i(),a=r(),o=s(null),{height:l}=Er(o);return mr((()=>{n.mainContentHeight=l.value})),c((async()=>{await pA()})),(e,r)=>{const i=hA,s=qr,u=lA,c=Vr("RouterView"),m=le,g=Wr,v=Yr,_=LS,b=ES,w=fS,x=Yi;return d(),h(x,null,{default:f((()=>[p(v,{id:"main",class:he({"show-player":y(t).isHasPlayer&&y(n).showPlayBar,"show-full-player":y(n).showFullPlayer}),"has-sider":""},{default:f((()=>[p(s,{id:"main-sider",style:N({height:y(t).isHasPlayer&&y(n).showPlayBar?"calc(100vh - 80px)":"100vh"}),"content-style":{overflow:"hidden",height:"100%",padding:"0"},"native-scrollbar":!1,collapsed:y(n).menuCollapsed,"collapsed-width":64,width:240,"collapse-mode":"width","show-trigger":"bar",bordered:"",onCollapse:r[0]||(r[0]=e=>y(n).menuCollapsed=!0),onExpand:r[1]||(r[1]=e=>y(n).menuCollapsed=!1)},{default:f((()=>[p(i)])),_:1},8,["style","collapsed"]),p(v,{id:"main-layout"},{default:f((()=>[p(u,{id:"main-header"}),p(v,{ref_key:"contentRef",ref:o,id:"main-content","native-scrollbar":!1,style:N({"--layout-height":y(l)}),"content-style":{display:"grid",gridTemplateRows:"1fr",minHeight:"100%",padding:"0 24px"},position:"absolute",embedded:""},{default:f((()=>[p(c,null,{default:f((({Component:e})=>[p(me,{name:`router-${y(a).routeAnimation}`,mode:"out-in"},{default:f((()=>[y(a).useKeepAlive?(d(),h($r,{key:0,max:20,exclude:["layout"]},[(d(),h(Xr(e),{class:"router-view"}))],1024)):(d(),h(Xr(e),{key:1,class:"router-view"}))])),_:2},1032,["name"])])),_:1}),p(g,{right:40,bottom:120},{default:f((()=>[p(m,{size:22,name:"Up"})])),_:1})])),_:1},8,["style"])])),_:1})])),_:1},8,["class"]),p(_),p(b),(d(),h(gr,{to:"body"},[p(me,{name:"up",mode:"out-in"},{default:f((()=>[y(n).showFullPlayer||y(n).fullPlayerActive&&y(a).fullPlayerCache?(d(),h(w,{key:0})):pe("",!0)])),_:1})]))])),_:1})}}}),[["__scopeId","data-v-95f94f38"]]),_A=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,bA=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,wA=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function xA(e,t){if(!("__proto__"===e||"constructor"===e&&t&&"object"==typeof t&&"prototype"in t))return t;!function(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}(e)}function IA(e,t){if(null==e)return;let r=e;for(let n=0;n<t.length;n++){if(null==r||null==r[t[n]])return;r=r[t[n]]}return r}function TA(e,t,r){if(0===r.length)return t;const n=r[0];return r.length>1&&(t=TA("object"==typeof e&&null!==e&&Object.prototype.hasOwnProperty.call(e,n)?e[n]:Number.isInteger(Number(r[1]))?[]:{},t,Array.prototype.slice.call(r,1))),Number.isInteger(Number(n))&&Array.isArray(e)?e.slice()[n]:Object.assign({},e,{[n]:t})}function EA(e,t){if(null==e||0===t.length)return e;if(1===t.length){if(null==e)return e;if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.slice.call(e,0).splice(t[0],1);const r={};for(const t in e)r[t]=e[t];return delete r[t[0]],r}if(null==e[t[0]]){if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.concat.call([],e);const r={};for(const t in e)r[t]=e[t];return r}return TA(e,EA(e[t[0]],Array.prototype.slice.call(t,1)),[t[0]])}function SA(e,t){return t.map((e=>e.split("."))).map((t=>[t,IA(e,t)])).filter((e=>void 0!==e[1])).reduce(((e,t)=>TA(e,t[1],t[0])),{})}function AA(e,t){return t.map((e=>e.split("."))).reduce(((e,t)=>EA(e,t)),e)}function kA(e,{storage:t,serializer:r,key:n,debug:i,pick:a,omit:s,beforeHydrate:o,afterHydrate:l},u,c=!0){try{c&&o?.(u);const i=t.getItem(n);if(i){const t=r.deserialize(i),n=a?SA(t,a):t,o=s?AA(n,s):n;e.$patch(o)}c&&l?.(u)}catch(d){i&&console.error("[pinia-plugin-persistedstate]",d)}}function CA(e,{storage:t,serializer:r,key:n,debug:i,pick:a,omit:s}){try{const i=a?SA(e,a):e,o=s?AA(i,s):i,l=r.serialize(o);t.setItem(n,l)}catch(o){i&&console.error("[pinia-plugin-persistedstate]",o)}}var PA=function(e={}){return function(t){!function(e,t,r){const{pinia:n,store:i,options:{persist:a=r}}=e;if(!a)return;if(!(i.$id in n.state.value)){const e=n._s.get(i.$id.replace("__hot:",""));return void(e&&Promise.resolve().then((()=>e.$persist())))}const s=(Array.isArray(a)?a:!0===a?[{}]:[a]).map(t);i.$hydrate=({runHooks:t=!0}={})=>{s.forEach((r=>{kA(i,r,e,t)}))},i.$persist=()=>{s.forEach((e=>{CA(i.$state,e)}))},s.forEach((t=>{kA(i,t,e),i.$subscribe(((e,r)=>CA(r,t)),{detached:!0})}))}(t,(r=>({key:(e.key?e.key:e=>e)(r.key??t.store.$id),debug:r.debug??e.debug??!1,serializer:r.serializer??e.serializer??{serialize:e=>JSON.stringify(e),deserialize:e=>function(e,t={}){if("string"!=typeof e)return e;const r=e.trim();if('"'===e[0]&&e.endsWith('"')&&!e.includes("\\"))return r.slice(1,-1);if(r.length<=9){const e=r.toLowerCase();if("true"===e)return!0;if("false"===e)return!1;if("undefined"===e)return;if("null"===e)return null;if("nan"===e)return Number.NaN;if("infinity"===e)return Number.POSITIVE_INFINITY;if("-infinity"===e)return Number.NEGATIVE_INFINITY}if(!wA.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(_A.test(e)||bA.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,xA)}return JSON.parse(e)}catch(n){if(t.strict)throw n;return e}}(e)},storage:r.storage??e.storage??window.localStorage,beforeHydrate:r.beforeHydrate,afterHydrate:r.afterHydrate,pick:r.pick,omit:r.omit})),e.auto??!1)}}();const RA={mounted(e,t){if("function"!=typeof t.value)return void console.warn("v-debounce directive expects a function as the value");const r=t.arg?parseInt(t.arg):300,n=Q(t.value,r,{leading:!0,trailing:!1});e.addEventListener("click",n),e._debouncedFn=n},beforeUnmount(e){e._debouncedFn&&(e.removeEventListener("click",e._debouncedFn),delete e._debouncedFn)}},MA={mounted(e,t){if("function"!=typeof t.value)return void console.warn("v-throttle directive expects a function as the value");const r=t.arg?parseInt(t.arg):300,n=Tr(t.value,r,{leading:!0,trailing:!1});e.addEventListener("click",n),e._throttledFn=n},beforeUnmount(e){e._throttledFn&&(e.removeEventListener("click",e._throttledFn),delete e._throttledFn)}},LA={mounted(e,t){const{modifiers:r,value:n}=t,{stop:i}=Kr(e,(t=>{t.forEach((t=>{const a=t.isIntersecting;e.classList.toggle("hidden",!a),"function"==typeof n&&n(a),r.once&&a&&i()}))}),{threshold:.1})}},OA=()=>{i().updateCheck=!1};(()=>{try{if(!Y)return;window.electron.ipcRenderer.on("play",(()=>Hl.play())),window.electron.ipcRenderer.on("pause",(()=>Hl.pause())),window.electron.ipcRenderer.on("playOrPause",(()=>Hl.playOrPause())),window.electron.ipcRenderer.on("playPrev",(()=>Hl.nextOrPrev("prev"))),window.electron.ipcRenderer.on("playNext",(()=>Hl.nextOrPrev("next"))),window.electron.ipcRenderer.on("volumeUp",(()=>Hl.setVolume("up"))),window.electron.ipcRenderer.on("volumeDown",(()=>Hl.setVolume("down"))),window.electron.ipcRenderer.on("changeMode",((e,t)=>Hl.togglePlayMode(t))),window.electron.ipcRenderer.on("toogleLikeSong",(async()=>{const e=ke(),t=Ke();await or(t.playSong,!e.isLikeSong(t.playSong.id))})),window.electron.ipcRenderer.on("toogleDesktopLyric",(()=>Hl.toggleDesktopLyric())),window.electron.ipcRenderer.on("closeDesktopLyric",(()=>Hl.toggleDesktopLyric())),window.electron.ipcRenderer.on("update-not-available",(()=>{OA(),window.$message.success("当前已是最新版本")})),window.electron.ipcRenderer.on("update-available",((e,t)=>{OA(),(e=>{const t=window.$modal.create({preset:"card",transformOrigin:"center",autoFocus:!1,style:{width:"600px"},title:"发现新版本",content:()=>b(od,{data:e,onClose:()=>t.destroy()})})})(t)})),window.electron.ipcRenderer.on("update-error",((e,t)=>{console.error("Error updating:",t),OA(),window.$message.error("更新过程出现错误")}))}catch(e){}})();const FA=Zr(vA),DA=Qr();DA.use(PA),FA.use(DA),FA.use(Ds),FA.directive("debounce",RA),FA.directive("throttle",MA),FA.directive("visible",LA),FA.mount("#app");export{bo as _,kE as a,po as b,dd as c,pd as d,gd as e,Ao as f,yE as g,JE as h,uo as i,fd as j,hd as k,md as l,vd as m,ko as n,Ts as o,Hl as p,Co as q,Is as r,zS as s,Os as u};
