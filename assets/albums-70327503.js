import{R as e,S as a,r as s,z as u,j as r,M as t,N as l,Q as o,U as m,W as i,X as p,as as n,a6 as v}from"./index-62a86a6d.js";import{C as c}from"./CoverLists-8120940c.js";import{P as j}from"./index-c617a262.js";import"./album-03f4a364.js";import"./formRules-8f71b7bd.js";import"./FormItem-9925873e.js";import"./Select-874bd504.js";import"./getCoverUrl-483cfc93.js";import"./Tooltip-05e90936.js";import"./PlayOne-08324da2.js";import"./LinkTwo-de3400c3.js";import"./Unlike-8f9bbc24.js";import"./Grid-b6f95812.js";import"./Skeleton-341b61e6.js";import"./use-houdini-3b9e128b.js";const b={class:"albums"},g={__name:"albums",setup(g){const{t:d}=e(),y=a(),h=s(y.currentRoute.value.query.keywords),T=s([]),f=s(0),q=s(30),C=s(y.currentRoute.value.query.page?Number(y.currentRoute.value.query.page):1),k=(e,a=30,s=0,u=10)=>{n(e,a,s,u).then((e=>{f.value=e.result.albumCount,T.value=[],e.result.albums?e.result.albums.forEach((e=>{T.value.push({id:e.id,cover:e.picUrl,name:e.name,artist:e.artists,time:v(e.publishTime)})})):$message.error(d("general.message.acquisitionFailed")),"undefined"!=typeof $scrollToTop&&$scrollToTop()}))};u((()=>y.currentRoute.value),(e=>{h.value=e.query.keywords,C.value=Number(e.query.page?e.query.page:1),"s-albums"==e.name&&k(h.value,q.value,(C.value-1)*q.value)}));const N=e=>{q.value=e,k(h.value,e,(C.value-1)*q.value)},R=e=>{y.push({path:"/search/albums",query:{keywords:h.value,page:e}})};return r((()=>{k(h.value,q.value,(C.value-1)*q.value)})),(e,a)=>(t(),l("div",b,[o(c,{listData:m(T),listType:"album"},null,8,["listData"]),m(T)[0]?(t(),i(j,{key:0,pageNumber:m(C),totalCount:m(f),onPageSizeChange:N,onPageNumberChange:R},null,8,["pageNumber","totalCount"])):p("",!0)]))}};export{g as default};
