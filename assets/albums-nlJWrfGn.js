import{a,t as e,q as s,e as u}from"./index-B903CxKP.js";import{_ as r}from"./Pagination-D96eRF_4.js";import{_ as t}from"./MainCover-BturJIOG.js";import{a7 as l,r as o,w as n,e as m,g as i,G as d,k as p,j as c,T as v,n as y,i as b,L as g,W as f,a0 as h}from"./vendor-QWMq--4w.js";import"./album-0csMMabW.js";import"./dj-DH2T3qaa.js";const j={class:"search-albums"},k={key:0,class:"list"},_={__name:"albums",setup(_){const q=l(),z=a(),C=o([]),w=o(0),N=o(q.currentRoute.value.query?.keywords||""),S=o(Number(q.currentRoute.value.query?.page)||1),x=async(a=N.value,u=z.loadSize,r=0,t=10)=>{try{C.value=[];const l=await e(a,u,r,t);if(w.value=l.result.albumCount,0===l.result.albumCount)return C.value="empty";C.value=s(l.result.albums,"album")}catch(l){console.error("搜索出现错误：",l),$message.error("搜索出现错误")}},P=a=>{q.push({path:"/search/albums",query:{keywords:N.value,page:a}})};return n((()=>q.currentRoute.value),(a=>{"sea-albums"==a.name&&(S.value=Number(a.query?.page)||1,N.value=a.query?.keywords||"",x(N.value,z.loadSize,(S.value-1)*z.loadSize))})),m((()=>{x(N.value,z.loadSize,(S.value-1)*z.loadSize)})),(a,e)=>{const s=t,l=r,o=u,n=f,m=h;return i(),d("div",j,[p(v,{name:"fade",mode:"out-in"},{default:c((()=>["empty"!==y(C)?(i(),d("div",k,[p(s,{data:y(C),type:"album"},null,8,["data"]),y(C)?.length?(i(),b(l,{key:0,totalCount:y(w),pageNumber:y(S),onPageNumberChange:P},null,8,["totalCount","pageNumber"])):g("",!0)])):(i(),b(m,{key:1,description:`很抱歉，未能找到与 ${y(N)} 相关的任何专辑`,style:{"margin-top":"60px"},size:"large"},{icon:c((()=>[p(n,null,{default:c((()=>[p(o,{icon:"search-off"})])),_:1})])),_:1},8,["description"]))])),_:1})])}}};export{_ as default};
