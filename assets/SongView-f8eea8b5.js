import{_ as e,R as a,S as s,a7 as o,r as l,j as n,z as t,U as i,M as r,N as m,O as c,Q as d,Y as p,W as u,X as f,ah as g,Z as v,$ as y,bx as h,by as j,a4 as k,ad as T,aA as b,ac as _,a1 as $,a2 as C,bz as L,a6 as M,bA as P,aC as x,ap as H}from"./index-62a86a6d.js";import{g as w,C as D}from"./index-652c07a2.js";import{C as U}from"./CoverLists-8120940c.js";import{_ as R,g as S}from"./getCoverUrl-483cfc93.js";import{a as F}from"./headers-da10ee68.js";import{P as q}from"./People-afdfe955.js";import{T as I}from"./Time-d30ef9e3.js";import{P as A}from"./PlayOne-08324da2.js";import{L as V,C as E}from"./ListAdd-5cb69ffa.js";import{Y as O}from"./Youtube-d4b24000.js";import{_ as Y}from"./LinkTwo-de3400c3.js";import{_ as z}from"./Divider-d0ad0202.js";import"./Skeleton-341b61e6.js";import"./use-houdini-3b9e128b.js";import"./album-03f4a364.js";import"./formRules-8f71b7bd.js";import"./FormItem-9925873e.js";import"./Select-874bd504.js";import"./Unlike-8f9bbc24.js";import"./Grid-b6f95812.js";import"./Tooltip-05e90936.js";const G={key:0,class:"song"},N={class:"detail"},Q={class:"pic"},W={class:"cover-loading"},X={class:"right"},Z={class:"intr"},B={class:"item"},J={class:"item"},K={key:1,class:"item"},ee={key:0,class:"comments"},ae={class:"content"},se={key:1,class:"simiPlayList"},oe=e({__name:"SongView",setup(e){const{t:oe}=a(),le=s(),ne=o(),te=l(null),ie=l(le.currentRoute.value.query.id),re=l(null),me=l([]),ce=l([]),de=e=>{h(e).then((a=>{a.songs[0]?(re.value=a.songs[0],$setSiteTitle(a.songs[0].name+" - "+a.songs[0].ar[0].name+" - "+oe("general.name.song")),pe(e),ue(e),"undefined"!=typeof $scrollToTop&&$scrollToTop()):$message.error(oe("general.message.acquisitionFailed"))}))},pe=e=>{w(e).then((e=>{e.total>0&&(me.value=e.hotComments)})).catch((e=>{console.error(oe("general.message.acquisitionFailed"),e),$message.error(oe("general.message.acquisitionFailed"))}))},ue=e=>{j(e).then((e=>{ce.value=[],e.playlists.forEach((e=>{ce.value.push({id:e.id,cover:e.coverImgUrl,name:e.name,artist:e.creator,playCount:k(e.playCount)})}))}))};return n((()=>{ie.value&&de(ie.value)})),t((()=>le.currentRoute.value),(e=>{ie.value=e.query.id,"song"==e.name&&de(ie.value)})),(e,a)=>{var s,o,l;const n=Y,t=R,h=T,j=x,k=b,w=_,oe=H,de=F,pe=z;return i(re)?(r(),m("div",G,[c("div",N,[c("div",Q,[d(t,{"show-toolbar-tooltip":"",class:"coverImg","previewed-img-props":{style:{borderRadius:"8px"}},"preview-src":i(S)(null==(s=i(re))?void 0:s.al.picUrl),src:i(S)(null==(o=i(re))?void 0:o.al.picUrl,1024),"fallback-src":"/images/pic/default.png"},{placeholder:p((()=>[c("div",W,[d(n)])])),_:1},8,["preview-src","src"]),d(t,{class:"shadow","preview-disabled":"",src:i(S)(null==(l=i(re))?void 0:l.al.picUrl,1024),"fallback-src":"/images/pic/default.png"},null,8,["src"])]),c("div",X,[c("div",Z,[d(h,{class:"name text-hidden",innerHTML:i(re).name},null,8,["innerHTML"]),i(re).alia[0]?(r(),u(h,{key:0,depth:"3",class:"alia",innerHTML:i(re).alia[0]},null,8,["innerHTML"])):f("",!0),d(k,{class:"tag"},{default:p((()=>[1==i(re).fee||4==i(re).fee?(r(),u(j,{key:0,class:"vip",round:"",bordered:!1},{default:p((()=>[$(C(1==i(re).fee?"VIP":"EP"),1)])),_:1})):f("",!0),i(re).pc?(r(),u(j,{key:1,class:"cloud",round:"",type:"info",bordered:!1},{default:p((()=>[$(C(e.$t("general.name.cloud")),1)])),_:1})):f("",!0)])),_:1}),c("div",B,[d(w,{depth:3,component:i(q)},null,8,["component"]),i(re).ar?(r(),u(g,{key:0,artistsData:i(re).ar,isDark:!1},null,8,["artistsData"])):f("",!0)]),c("div",J,[d(w,{depth:3,component:i(L)},null,8,["component"]),d(h,{class:"text",innerHTML:i(re).al.name,onClick:a[0]||(a[0]=e=>i(le).push(`/album?id=${i(re).al.id}`))},null,8,["innerHTML"])]),i(re).publishTime?(r(),m("div",K,[d(w,{depth:3,component:i(I)},null,8,["component"]),d(h,{class:"text",innerHTML:i(M)(i(re).publishTime)},null,8,["innerHTML"])])):f("",!0)]),d(k,{class:"button"},{default:p((()=>[d(oe,{type:"primary",strong:"",secondary:"",onClick:a[1]||(a[1]=e=>(e=>{const a={album:e.al,artist:e.ar,fee:e.fee,id:e.id,name:e.name};ne.setPersonalFmMode(!1),ne.addSongToPlaylists(a)})(i(re)))},{icon:p((()=>[d(w,{component:i(A)},null,8,["component"])])),default:p((()=>[$(" "+C(e.$t("general.name.play")),1)])),_:1}),d(oe,{strong:"",secondary:"",onClick:a[2]||(a[2]=e=>i(te).openAddToPlaylist(i(ie)))},{icon:p((()=>[d(w,{component:i(V)},null,8,["component"])])),default:p((()=>[$(" "+C(e.$t("general.name.add")),1)])),_:1}),d(oe,{strong:"",secondary:"",onClick:a[3]||(a[3]=e=>i(le).push(`/comment?id=${i(re).id}&page=1`))},{icon:p((()=>[d(w,{component:i(E)},null,8,["component"])])),default:p((()=>[$(" "+C(e.$t("general.name.comment")),1)])),_:1}),i(re).mv?(r(),u(oe,{key:0,strong:"",secondary:"",onClick:a[4]||(a[4]=e=>i(le).push(`/video?id=${i(re).mv}`))},{icon:p((()=>[d(w,{component:i(O)},null,8,["component"])])),default:p((()=>[$(" MV ")])),_:1})):f("",!0)])),_:1})])]),i(me)[0]?(r(),m("div",ee,[d(de,{prefix:"bar"},{default:p((()=>[$(C(e.$t("general.name.hotComments")),1)])),_:1}),c("div",ae,[(r(!0),m(v,null,y(i(me),(e=>(r(),u(D,{key:e,commentData:e},null,8,["commentData"])))),128))])])):f("",!0),i(ce)[0]?(r(),m("div",se,[d(pe),d(de,{prefix:"bar"},{default:p((()=>[$(C(e.$t("other.containing")),1)])),_:1}),d(U,{listData:i(ce)},null,8,["listData"])])):f("",!0),d(P,{ref_key:"addPlayListRef",ref:te},null,512)])):f("",!0)}}},[["__scopeId","data-v-bcf36198"]]);export{oe as default};
