import{_ as a}from"./CoverList-D-VGfVrf.js";import{d as e,as as t,r as s,f as l,o as u,H as o,k as n,j as r,m as c,i as d,ae as i,am as m,cH as v,cz as p,ar as y,ck as f,h,a1 as _,a2 as q,af as g,aA as k,aB as b,ac as C,a8 as j,cI as w,aa as D,cG as x,au as I,aj as L,aI as M,ay as R,K as z}from"./stores-DLHJ0LFH.js";import{u as G,o as H}from"./index-D8wNg7e8.js";import"./album-YTSjqKWE.js";const U={class:"discover-playlists"},A=z(e({__name:"playlists",setup(e){const z=G(),A=t(),B=s(!1),F=s(z.currentRoute.value.query?.cat||"全部歌单"),K=s("true"===z.currentRoute.value.query?.hq?"hq":"normal"),N=s(!0),P=s(!0),T=s(0),E=s(1),J=s([]),O=l((()=>0!==A.catData.hqCats?.length&&("全部歌单"===F.value||A.catData.hqCats.some((a=>a.name===F.value))))),Q=async()=>{const a=J.value?.at(-1)?.updateTime??void 0;P.value=!0;const e=await v(F.value,50,T.value,"hq"===K.value,a);E.value=e?.total,N.value=e.more||e?.total>T.value+50;const t=p(e.playlists);J.value=J.value?.concat(t),P.value=!1},S=()=>{T.value+=50,Q()},V=(a,e="false")=>{B.value=!1,z.push({name:"discover-playlists",query:{cat:a,hq:e}})};return H((a=>{"discover-playlists"===a.name&&(F.value=a.query?.cat||"全部歌单",K.value="true"===a.query?.hq?"hq":"normal",J.value=[],Q())})),u((()=>{A.getPlaylistCatList(),Q()})),(e,t)=>{const s=j,l=w,u=D,v=x,p=I,z=y,G=a,H=L,T=M,Q=R,W=f;return h(),o("div",U,[n(z,{justify:"space-between",align:"center",class:"menu"},{default:r((()=>[n(u,{focusable:!1,"icon-placement":"right",strong:"",secondary:"",round:"",onClick:t[0]||(t[0]=a=>B.value=!0)},{icon:r((()=>[n(l,{class:"more",depth:"3"},{default:r((()=>[n(s,{name:"Right"})])),_:1})])),default:r((()=>[_(" "+q(c(F)),1)])),_:1}),n(g,{name:"fade",mode:"out-in"},{default:r((()=>[c(O)?(h(),d(p,{key:0,value:c(K),"onUpdate:value":[t[1]||(t[1]=a=>m(K)?K.value=a:null),t[2]||(t[2]=a=>V(c(F),"normal"===a?"false":"true"))],class:"tabs",type:"segment"},{default:r((()=>[n(v,{name:"normal"},{default:r((()=>t[5]||(t[5]=[_(" 推荐 ")]))),_:1}),n(v,{name:"hq"},{default:r((()=>t[6]||(t[6]=[_(" 精品 ")]))),_:1})])),_:1},8,["value"])):i("",!0)])),_:1})])),_:1}),c(E)>0?(h(),d(G,{key:0,data:c(J),loading:c(P),loadMore:c(N),type:"playlist",onLoadMore:S},null,8,["data","loading","loadMore"])):i("",!0),n(W,{show:c(B),"onUpdate:show":t[4]||(t[4]=a=>m(B)?B.value=a:null),"display-directive":"show",style:{width:"600px"},preset:"card"},{header:r((()=>[n(z,{align:"center",class:"cat-header"},{default:r((()=>[n(H,null,{default:r((()=>t[7]||(t[7]=[_("歌单分类")]))),_:1}),n(T,{type:"全部歌单"==c(F)?"primary":"default",bordered:!1,round:"",onClick:t[3]||(t[3]=a=>V("全部歌单"))},{default:r((()=>t[8]||(t[8]=[_(" 全部歌单 ")]))),_:1},8,["type"])])),_:1})])),default:r((()=>[n(p,{type:"segment",animated:""},{default:r((()=>[(h(!0),o(k,null,b(c(A).catData.type,((a,e,t)=>(h(),d(Q,{key:t,name:e,tab:a},{default:r((()=>[n(z,{class:"cat-list"},{default:r((()=>[(h(!0),o(k,null,b(c(A).catData.cats.filter((a=>a.category===Number(e))),((a,e)=>(h(),d(T,{key:e,bordered:!1,class:C({choose:c(F)===a.name}),size:"large",round:"",onClick:e=>V(a.name)},{icon:r((()=>[a.hot?(h(),d(s,{key:0,depth:3,name:"Fire"})):i("",!0)])),default:r((()=>[_(q(a.name)+" ",1)])),_:2},1032,["class","onClick"])))),128))])),_:2},1024)])),_:2},1032,["name","tab"])))),128))])),_:1})])),_:1},8,["show"])])}}}),[["__scopeId","data-v-1f7d985e"]]);export{A as default};
