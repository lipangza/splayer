import{R as e,S as a,r as u,z as s,j as r,M as t,N as o,Q as l,U as i,W as n,X as v,as as m,a4 as p,at as d}from"./index-62a86a6d.js";import{V as c}from"./VideoLists-0b5c070a.js";import{P as y}from"./index-c617a262.js";import"./Youtube-d4b24000.js";import"./PlayOne-08324da2.js";import"./Grid-b6f95812.js";import"./Skeleton-341b61e6.js";import"./use-houdini-3b9e128b.js";import"./Select-874bd504.js";const g={class:"videos"},j={__name:"videos",setup(j){const{t:h}=e(),q=a(),f=u(q.currentRoute.value.query.keywords),C=u([]),N=u(0),b=u(30),k=u(q.currentRoute.value.query.page?Number(q.currentRoute.value.query.page):1),R=(e,a=30,u=0,s=1004)=>{m(e,a,u,s).then((e=>{N.value=e.result.mvCount,C.value=[],e.result.mvs?e.result.mvs.forEach((e=>{C.value.push({id:e.id,cover:e.cover,name:e.name,artist:e.artists,playCount:p(e.playCount),duration:d(e.duration)})})):$message.error(h("general.message.acquisitionFailed")),"undefined"!=typeof $scrollToTop&&$scrollToTop()}))};s((()=>q.currentRoute.value),(e=>{f.value=e.query.keywords,k.value=Number(e.query.page?e.query.page:1),"s-videos"==e.name&&R(f.value,b.value,(k.value-1)*b.value)}));const S=e=>{b.value=e,R(f.value,e,(k.value-1)*b.value)},T=e=>{q.push({path:"/search/videos",query:{keywords:f.value,page:e}})};return r((()=>{R(f.value,b.value,(k.value-1)*b.value)})),(e,a)=>(t(),o("div",g,[l(c,{listData:i(C)},null,8,["listData"]),i(C)[0]?(t(),n(y,{key:0,pageNumber:i(k),totalCount:i(N),onPageSizeChange:S,onPageNumberChange:T},null,8,["pageNumber","totalCount"])):v("",!0)]))}};export{j as default};
