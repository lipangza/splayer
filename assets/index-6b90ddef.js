import{d as e,M as a,N as s,O as t,_ as l,R as n,S as r,a8 as i,r as o,j as c,z as u,an as m,U as d,Q as v,Y as g,W as p,X as f,ao as w,ae as h,ad as z,ap as x,aA as S,aB as _,a1 as $,a2 as b,bF as k,T as y,aq as C,ar as A,af as L,ag as M,ac as T,aD as U}from"./index-62a86a6d.js";import{a as R,l as q}from"./artist-cd2cde92.js";import{a as B,_ as j}from"./Tabs-84a0d596.js";import"./Add-f40f4eff.js";const D={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},V=[t("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10s10-4.48 10-10S17.52 2 12 2zm0 14.5c-2.49 0-4.5-2.01-4.5-4.5S9.51 7.5 12 7.5s4.5 2.01 4.5 4.5s-2.01 4.5-4.5 4.5zm0-5.5c-.55 0-1 .45-1 1s.45 1 1 1s1-.45 1-1s-.45-1-1-1z",fill:"currentColor"},null,-1)],F=e({name:"AlbumFilled",render:function(e,t){return a(),s("svg",D,V)}}),I={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},H=[t("circle",{cx:"9",cy:"8",r:"4",fill:"currentColor"},null,-1),t("path",{d:"M9 14c-2.67 0-8 1.34-8 4v1c0 .55.45 1 1 1h14c.55 0 1-.45 1-1v-1c0-2.66-5.33-4-8-4zm11-4V7h-2v3h-3v2h3v3h2v-3h3v-2z",fill:"currentColor"},null,-1)],K=e({name:"PersonAddAlt1Round",render:function(e,t){return a(),s("svg",I,H)}}),N={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},P=[t("path",{d:"M14 8c0-2.21-1.79-4-4-4S6 5.79 6 8s1.79 4 4 4s4-1.79 4-4zM2 18v1c0 .55.45 1 1 1h14c.55 0 1-.45 1-1v-1c0-2.66-5.33-4-8-4s-8 1.34-8 4zm16-8h4c.55 0 1 .45 1 1s-.45 1-1 1h-4c-.55 0-1-.45-1-1s.45-1 1-1z",fill:"currentColor"},null,-1)],W=e({name:"PersonRemoveAlt1Round",render:function(e,t){return a(),s("svg",N,P)}}),O={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Q=[t("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l2.29 2.29c.63.63 1.71.18 1.71-.71V8.91c0-.89-1.08-1.34-1.71-.71L17 10.5z",fill:"currentColor"},null,-1)],X=e({name:"VideocamRound",render:function(e,t){return a(),s("svg",O,Q)}}),Y={class:"artist"},E={key:0,class:"artistData"},G={class:"cover"},J={class:"data"},Z={class:"num"},ee={key:1,class:"error"},ae=(e=>(L("data-v-d2eb57cc"),e=e(),M(),e))((()=>t("br",null,null,-1))),se={key:3,class:"content"},te=l({__name:"index",setup(e){const{t:l}=n(),L=r(),M=i(),D=o(L.currentRoute.value.query.id),V=o(null),I=o(!1),H=o(!1),N=o(L.currentRoute.value.path.split("/")[2]),P=e=>{e&&R(e).then((e=>{V.value={id:e.data.artist.id,name:e.data.artist.name,occupation:e.data.identify?e.data.identify.imageDesc:null,cover:e.data.artist.cover,desc:e.data.artist.briefDesc,albumSize:e.data.artist.albumSize,musicSize:e.data.artist.musicSize,mvSize:e.data.artist.mvSize},$setSiteTitle(e.data.artist.name+" - "+l("general.name.artists")),"undefined"!=typeof $scrollToTop&&$scrollToTop()})).catch((e=>{L.go(-1),console.error(l("general.message.acquisitionFailed"),e),$message.error(l("general.message.acquisitionFailed"))}))},O=e=>{L.push({path:`/artist/${e}`,query:{id:D.value,page:1}})},Q=e=>{if(M.getUserArtistLists.list[0]){return-1===M.getUserArtistLists.list.findIndex((a=>a.id===Number(e)))}return!0};return c((()=>{P(D.value),H.value=Q(D.value),!M.userLogin||M.getUserArtistLists.has||M.getUserArtistLists.isLoading||M.setUserArtistLists((()=>{D.value,Q(D.value),H.value=Q(D.value)}))})),u((()=>L.currentRoute.value),(e=>{D.value=e.query.id,N.value=e.path.split("/")[2],H.value=Q(D.value),"artist"==e.path.split("/")[1]&&P(D.value)})),(e,n)=>{const r=h,i=z,o=T,c=x,u=S,R=U,P=_,te=j,le=B,ne=m("router-view");return a(),s("div",Y,[d(D)&&d(V)?(a(),s("div",E,[t("div",G,[v(r,{round:"",class:"coverImg",src:d(V).cover.replace(/^http:/,"https:")+"?param=300y300","fallback-src":"/images/pic/default.png"},null,8,["src"])]),t("div",J,[v(i,{class:"name"},{default:g((()=>[$(b(d(V).name),1)])),_:1}),v(i,{class:"occupation",depth:3},{default:g((()=>[$(b(d(V).occupation),1)])),_:1}),t("div",Z,[v(i,{class:"musicSize",onClick:n[0]||(n[0]=e=>O("songs"))},{default:g((()=>[v(o,{component:d(k)},null,8,["component"]),$(" "+b(e.$t("general.name.songSize",{size:d(V).musicSize})),1)])),_:1}),v(i,{class:"albumSize",onClick:n[1]||(n[1]=e=>O("albums"))},{default:g((()=>[v(o,{component:d(F)},null,8,["component"]),$(" "+b(e.$t("general.name.albumSize",{size:d(V).albumSize})),1)])),_:1}),v(i,{class:"mvSize",onClick:n[2]||(n[2]=e=>O("videos"))},{default:g((()=>[v(o,{component:d(X)},null,8,["component"]),$(" "+b(e.$t("general.name.mvSize",{size:d(V).mvSize})),1)])),_:1})]),v(i,{class:"desc text-hidden",onClick:n[3]||(n[3]=e=>I.value=!0)},{default:g((()=>[$(b(d(V).desc),1)])),_:1}),d(M).userLogin?(a(),p(u,{key:0,class:"button"},{default:g((()=>[v(c,{type:d(H)?"primary":"default",strong:"",secondary:"",onClick:n[4]||(n[4]=e=>(e=>{const a=Q(e.id)?1:2;q(a,e.id).then((s=>{200===s.code?($message.success(`${e.name} ${l(1==a?"menu.collection":"menu.cancelCollection",{name:l("general.dialog.success")})}`),M.setUserArtistLists((()=>{H.value=Q(D.value)}))):$message.error(`${e.name} ${l(1==a?"menu.collection":"menu.cancelCollection",{name:l("general.dialog.failed")})}`)}))})(d(V)))},{icon:g((()=>[v(o,{component:d(H)?d(K):d(W)},null,8,["component"])])),default:g((()=>[$(" "+b(d(H)?e.$t("menu.collection",{name:e.$t("general.name.artists")}):e.$t("menu.cancelCollection",{name:e.$t("general.name.artists")})),1)])),_:1},8,["type"])])),_:1})):f("",!0),v(P,{class:"s-modal",show:d(I),"onUpdate:show":n[5]||(n[5]=e=>w(I)?I.value=e:null),preset:"card",title:e.$t("general.name.artistDesc"),bordered:!1},{default:g((()=>[v(R,null,{default:g((()=>[v(i,{innerHTML:d(V).desc.replace(/\n/g,"<br>")},null,8,["innerHTML"])])),_:1})])),_:1},8,["show","title"])])])):d(D)?f("",!0):(a(),s("div",ee,[v(i,null,{default:g((()=>[$(b(e.$t("general.name.noKeywords")),1)])),_:1}),ae,v(c,{strong:"",secondary:"",onClick:n[6]||(n[6]=e=>d(L).go(-1)),style:{"margin-top":"20px"}},{default:g((()=>[$(b(e.$t("general.name.goBack")),1)])),_:1})])),d(V)?(a(),p(le,{key:2,class:"main-tab",type:"segment","onUpdate:value":[O,n[7]||(n[7]=e=>w(N)?N.value=e:null)],value:d(N)},{default:g((()=>[v(te,{name:"songs"},{default:g((()=>[$(b(e.$t("general.name.hotSong")),1)])),_:1}),v(te,{name:"albums"},{default:g((()=>[$(b(e.$t("general.name.album")),1)])),_:1}),v(te,{name:"videos"},{default:g((()=>[$(" MV ")])),_:1})])),_:1},8,["value"])):f("",!0),d(V)?(a(),s("main",se,[v(ne,{mvSize:d(V)?d(V).mvSize:null},{default:g((({Component:e})=>[(a(),p(A,null,[v(y,{name:"move",mode:"out-in"},{default:g((()=>[(a(),p(C(e)))])),_:2},1024)],1024))])),_:1},8,["mvSize"])])):f("",!0)])}}},[["__scopeId","data-v-d2eb57cc"]]);export{te as default};
