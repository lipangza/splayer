import{_ as a}from"./MainCover-C4bF_JGP.js";import{_ as s,m as e,s as l,a as t,i as o,p as i,b as d,d as c,c as r,e as n,f as u,g as m,h as p,j as v,k as f,l as g,n as y,o as k,q as h,r as b}from"./index-D_KQhQdT.js";import{a7 as _,s as j,e as w,g as C,G as z,J as S,I as M,n as N,k as P,j as x,T as F,R as D,K as I,X as L,V as $,i as O,L as T,P as q,ah as A,W as R,a1 as V,ap as X,aq as E,M as G,r as H,aX as J,O as K,a3 as W,a2 as Y,aY as B}from"./vendor-QWMq--4w.js";import{_ as Q}from"./SpecialCover-auX8M1BT.js";import{a as U}from"./video-prHJXdpU.js";import{g as Z}from"./dj-BjUMPDZK.js";import"./album-BZa_fuA4.js";const aa=a=>(X("data-v-bfb79d83"),a=a(),E(),a),sa={key:0,class:"content"},ea=aa((()=>S("div",{class:"cover-loading"},[S("img",{class:"loading-img",src:u,alt:"loading-img"})],-1))),la={class:"data"},ta={class:"info"},oa={class:"name"},ia={class:"artist"},da={key:0,class:"all-ar"},ca=["onClick"],ra={key:1,class:"all-ar"},na=[aa((()=>S("span",{class:"ar"},"未知艺术家",-1)))],ua={key:0,class:"al"},ma={key:1,class:"album"},pa={class:"control"},va={class:"radio"},fa={class:"icon"},ga=aa((()=>S("span",null,"私人 FM",-1))),ya={key:0,class:"tip"},ka={key:1,class:"error"},ha=aa((()=>S("div",{class:"tip"},"私人 FM 出现错误",-1))),ba=s({__name:"PrivateFm",setup(a){const s=e(),u=l(),m=t(),p=_(),{privateFmSong:v}=j(s),{playLoading:f,playState:g,coverTheme:y,playMode:k}=j(u),h=()=>{"fm"===k.value?i():(k.value="fm",d(!0))},b=c((()=>{k.value="fm",r("next",!0)}),300),X=c((async a=>{await s.setPersonalFmToTrash(a)}),300),E=async()=>{await s.setPersonalFm()};return w((async()=>{await s.setPersonalFm()})),(a,s)=>{const e=A,l=n,t=R,i=V;return C(),z("div",{class:"private-fm",style:M({"--color":"fm"===N(k)&&N(m).themeAutoCover&&Object.keys(N(y))?.length?`rgb(${N(y).dark.bg})`:"#efefef"})},[S("div",{class:"overlay",style:M({backgroundImage:`url(${N(v)?.coverSize?.m||"/images/pic/song.jpg?assest"})`})},null,4),N(v)&&Object.keys(N(v))?.length?(C(),z("div",sa,[P(F,{name:"fade",mode:"out-in"},{default:x((()=>[(C(),z("div",{key:N(v)?.id,class:"cover"},[P(e,{src:N(v)?.coverSize?.l,class:"cover-img","preview-disabled":"",onLoad:s[0]||(s[0]=a=>{a.target.style.opacity=1})},{placeholder:x((()=>[ea])),_:1},8,["src"])]))])),_:1}),S("div",la,[S("div",ta,[S("span",oa,D(N(v)?.name||"未知歌曲"),1),S("div",ia,[P(t,{depth:"3",size:"20"},{default:x((()=>[P(l,{icon:"account-music"})])),_:1}),N(v)?.artists?(C(),z("div",da,[(C(!0),z(I,null,L(N(v).artists,(a=>(C(),z("span",{key:a.id,class:"ar",onClick:$((s=>N(p).push(`/artist?id=${a.id}`)),["stop"])},D(a.name),9,ca)))),128))])):(C(),z("div",ra,na))]),S("div",{class:"album",onClick:s[1]||(s[1]=$((a=>N(p).push(`/album?id=${N(v)?.album.id}`)),["stop"]))},[P(t,{depth:"3",size:"20"},{default:x((()=>[P(l,{icon:"album"})])),_:1}),N(v)?.album?(C(),z("span",ua,D(N(v).album.name),1)):(C(),z("span",ma,"未知专辑"))])]),S("div",pa,[P(i,{loading:"fm"===N(k)&&N(f),focusable:!1,class:"play-control",color:"#efefef",type:"primary",strong:"",secondary:"",circle:"",onClick:$(h,["stop"])},{icon:x((()=>[P(F,{name:"fade",mode:"out-in"},{default:x((()=>[(C(),O(t,{key:"fm"===N(k)&&N(g),size:"32"},{default:x((()=>[P(l,{icon:"fm"===N(k)&&N(g)?"pause-rounded":"play-arrow-rounded"},null,8,["icon"])])),_:1}))])),_:1})])),_:1},8,["loading"]),P(t,{class:"play-other",size:"26",onClick:$(N(b),["stop"])},{default:x((()=>[P(l,{icon:"skip-next-rounded"})])),_:1},8,["onClick"]),P(t,{class:"play-other",size:"26",onClick:s[2]||(s[2]=$((a=>N(X)(N(v)?.id)),["stop"]))},{default:x((()=>[P(l,{size:"18",icon:"thumb-down"})])),_:1}),S("div",va,[S("div",fa,[P(t,{class:"play-other",size:"20"},{default:x((()=>[P(l,{icon:"radio"})])),_:1}),ga]),N(o)()?T("",!0):(C(),z("span",ya," 未登录模式 "))])])])])):N(v)?T("",!0):(C(),z("div",ka,[ha,P(i,{onClick:E},{default:x((()=>[q("重新加载")])),_:1})]))],4)}}},[["__scopeId","data-v-bfb79d83"]]),_a={class:"home"},ja={class:"greetings"},wa={class:"rec-private"},Ca=s({__name:"Home",setup(s){const e=m(),l=_(),i=t(),{showSider:d}=j(i),{userLikeData:c,dailySongsData:r}=j(e),u=G((()=>{const a={name:"每日推荐",desc:"根据你的音乐口味 · 每日更新"};if(o()&&r.value.data?.length){const s=Math.floor(Math.random()*r.value.data.length);return a.cover=r.value.data[s]?.coverSize?.s||"/images/pic/like.jpg",a}return a.cover="/images/pic/cover-2.jpg",a})),M=G((()=>{const a={id:1024,name:"喜欢的音乐",desc:"发现你独特的音乐品味"};return o()&&c.value.playlists?.length?(a.cover=c.value.playlists[0]?.coverSize?.s||"/images/pic/like.jpg",a):(a.cover="/images/pic/like.jpg",a)})),F=H({playlist:{name:o()?"专属歌单":"推荐歌单",loadingNum:12,columns:d.value?void 0:"2 s:3 m:4 l:5 xl:6",data:[],to:"/discover/playlists"},radar:{name:"雷达歌单",loadingNum:6,columns:d.value?void 0:"2 s:3 m:4 l:5 xl:6",data:[],to:"/discover/playlists"},artist:{name:"歌手推荐",type:"artist",columns:d.value?"3 s:4 m:5 l:6":"3 sm:4 m:5 l:6",loadingNum:6,data:[],to:"/discover/artists"},mv:{name:"推荐 MV",type:"mv",columns:"2 s:2 m:3 l:4 xl:5",loadingNum:12,data:[]},dj:{name:"推荐播客",type:"dj",loadingNum:6,data:[],to:"/dj-hot"},album:{name:"新碟上架",type:"album",loadingNum:12,data:[],to:"/discover/new"}}),$=(a,s)=>{switch(a){case"playlist":l.push({path:"/playlist",query:{id:s}});break;case"like-songs":l.push("/like-songs");break;case"daily-songs":l.push("/daily-songs")}};return w((()=>{e.setDailySongsData(),(async()=>{try{const[a,s,e,l,t,i]=await Promise.allSettled([o()?p("recPl-P",5,v,"resource"):p("recPl",5,f),p("recRadar",30,g),p("recAr",5,y),p("recMv",5,U),p("recDj",5,Z),p("recAl",5,k)]);if("fulfilled"===a.status&&(F.value.playlist.data=h(o()?a.value.recommend.filter((a=>!a.name.includes("私人雷达"))):a.value.result)),"fulfilled"===s.status&&(F.value.radar.data=h(s.value)),"fulfilled"===e.status&&(F.value.artist.data=h(e.value.artists,"artist")),"fulfilled"===l.status&&(F.value.mv.data=h(l.value.data,"mv")),"fulfilled"===t.status&&(F.value.dj.data=h(t.value.djRadios,"dj")),"fulfilled"===i.status&&(F.value.album.data=h(i.value.albums,"album")),[a,s,e,l,i].some((a=>"rejected"===a.status)))throw new Error("一个或多个请求失败")}catch(a){$message.error("个性化推荐获取失败"),console.error("个性化推荐获取失败：",a)}})()})),(s,e)=>{const t=J,o=K,i=Q,d=Y,c=W,r=ba,m=n,p=R,v=B,f=a;return C(),z("div",_a,[S("div",ja,[P(t,{class:"welcome"},{default:x((()=>[q(D(N(b)()),1)])),_:1}),P(o,{depth:"3"},{default:x((()=>[q("由此开启好心情 ~")])),_:1})]),S("div",wa,[P(c,{class:"rec-private",cols:"1","x-gap":"20","y-gap":"20"},{default:x((()=>[P(d,null,{default:x((()=>[P(i,{data:N(u),showIcon:!1,showDate:"",onClick:e[0]||(e[0]=a=>$("daily-songs"))},null,8,["data"])])),_:1}),P(d,null,{default:x((()=>[P(i,{data:N(M),onClick:e[1]||(e[1]=a=>$("like-songs"))},null,8,["data"])])),_:1})])),_:1}),P(r,{class:"rec-fm"})]),(C(!0),z(I,null,L(N(F),((a,s)=>(C(),z("div",{key:s,class:"rec-public"},[P(v,{class:"title",prefix:"bar",onClick:s=>a.to?N(l).push(a.to):null},{default:x((()=>[P(o,{class:"name"},{default:x((()=>[q(D(a.name),1)])),_:2},1024),a.to?(C(),O(p,{key:0,class:"more",depth:"3"},{default:x((()=>[P(m,{icon:"chevron-right"})])),_:1})):T("",!0)])),_:2},1032,["onClick"]),P(f,{data:a.data,type:a.type,loadingNum:a.loadingNum,columns:a.columns},null,8,["data","type","loadingNum","columns"])])))),128))])}}},[["__scopeId","data-v-60c9d981"]]);export{Ca as default};
