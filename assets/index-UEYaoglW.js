import{d as a,aO as e,b as s,f as t,Z as l,o as i,bN as o,h as n,i as r,j as d,k as c,af as m,m as u,ad as p,I as y,H as g,a1 as v,a2 as f,aA as h,aB as _,ae as b,aT as k,bD as F,bO as M,ai as S,aj as w,a8 as x,aa as j,ar as z,aF as C,K as E,as as R,q as A,r as D,X as L,S as P,cx as O,a3 as H,cy as I,cz as T,cA as B,cB as K,cC as N,cD as q,cE as G,c9 as V,aY as X,aK as Y,aH as Z,u as $,cF as J}from"./stores-Jq5HPlpq.js";import{_ as Q}from"./CoverList-DWqQOU0Q.js";import{_ as U}from"./ArtistList-BlcsMlhv.js";import{p as W,_ as aa,u as ea}from"./index-CrsIAaLK.js";import{_ as sa}from"./SongListCard-DudM9DF_.js";import{a as ta}from"./video-BDIDwzch.js";import"./album-Bz4UpMXc.js";const la={key:0,class:"artists text-hidden"},ia={key:1,class:"album text-hidden"},oa={class:"menu-icon"},na={class:"radio"},ra=E(a({__name:"PersonalFM",setup(a){const E=e(),R=s(),A=t((()=>R.personalFmMode&&R.playStatus?"Pause":"Play")),D=()=>{R.personalFmMode?W.playOrPause():(R.personalFmMode=!0,R.playHeartbeatMode=!1,W.resetStatus(),W.initPlayer())},L=l((()=>{R.personalFmMode=!0,R.playHeartbeatMode=!1,W.nextOrPrev("next")}),300);return i(W.initPersonalFM),(a,e)=>{const s=S,t=w,l=x,i=j,P=z,O=C,H=o("debounce");return n(),r(O,{class:"personal-fm"},{default:d((()=>[c(m,{name:"fade",mode:"out-in"},{default:d((()=>[(n(),r(s,{key:u(E).personalFMSong?.id,src:u(E).personalFMSong?.coverSize?.m,class:"cover","preview-disabled":"",lazy:"",onLoad:u(p)},{placeholder:d((()=>e[1]||(e[1]=[y("div",{class:"cover-loading"},[y("img",{src:aa,class:"loading-img",alt:"loading-img"})],-1)]))),_:1},8,["src","onLoad"]))])),_:1}),c(m,{name:"fade",mode:"out-in"},{default:d((()=>[(n(),g("div",{key:u(E).personalFMSong?.id,class:"info"},[c(t,{class:"name text-hidden"},{default:d((()=>[v(f(u(E).personalFMSong?.name||"未知曲目"),1)])),_:1}),Array.isArray(u(E).personalFMSong?.artists)?(n(),g("div",la,[c(l,{name:"Artist",depth:3}),(n(!0),g(h,null,_(u(E).personalFMSong.artists,(a=>(n(),r(t,{key:a.id,class:"ar"},{default:d((()=>[v(f(a.name),1)])),_:2},1024)))),128))])):b("",!0),u(k)(u(E).personalFMSong.album)?(n(),g("div",ia,[c(l,{name:"Album",depth:3}),c(t,{class:"album-text"},{default:d((()=>[v(f(u(E).personalFMSong.album?.name||"未知专辑"),1)])),_:1})])):b("",!0),c(P,{class:"menu",align:"center"},{default:d((()=>[c(i,{loading:u(R).personalFmMode&&u(R).playLoading,focusable:!1,class:"play",strong:"",secondary:"",circle:"",onClick:F(D,["stop"])},{icon:d((()=>[c(m,{name:"fade",mode:"out-in"},{default:d((()=>[(n(),r(l,{key:u(A),name:u(A),size:32},null,8,["name"]))])),_:1})])),_:1},8,["loading"]),y("div",{class:"menu-icon",onClick:e[0]||(e[0]=F(((...a)=>u(L)&&u(L)(...a)),["stop"]))},[c(l,{size:"26",name:"SkipNext"})]),M((n(),g("div",oa,[c(l,{class:"icon",size:"18",name:"ThumbDown"})])),[[H,()=>u(W).personalFMTrash(u(E).personalFMSong?.id)]])])),_:1}),y("div",na,[c(l,{depth:3,name:"Radio"}),c(t,{depth:3},{default:d((()=>e[2]||(e[2]=[v("私人FM")]))),_:1})])]))])),_:1})])),_:1})}}}),[["__scopeId","data-v-85f88b44"]]),da={class:"home-online"},ca=E(a({__name:"HomeOnline",setup(a){const s=ea(),l=R(),o=e(),m=t((()=>{const a=(new Date).getDate();return A("div",{class:"date"},[A("div",{class:"date-icon"},[A(x,{name:"Calendar-Empty",size:30,depth:2}),A(w,null,(()=>a))]),A(w,{class:"name"},(()=>["每日推荐"]))])})),p=D({playlist:{name:L()?"专属歌单":"推荐歌单",list:[],type:"playlist",path:"/discover/playlists"},radar:{name:"雷达歌单",list:[],type:"playlist"},artist:{name:"歌手推荐",list:[],type:"artist",path:"/discover/artists"},video:{name:"推荐 MV",list:[],type:"video",cols:"2 600:2 800:3 900:4 1200:5 1400:6"},radio:{name:"推荐播客",list:[],type:"radio"},album:{name:"新碟上架",list:[],type:"album",path:"/discover/new"}}),y=async()=>{try{await O(50);try{const a=await H(I,{key:"playlistRec",time:10},"playlist",L()?21:20);p.value.playlist.list=T(a.result?.filter((a=>!a.name.includes("私人雷达"))))}catch(a){console.error("Error getting playlist:",a)}try{const a=await H(B,{key:"radarRec",time:30});p.value.radar.list=T(a)}catch(a){console.error("Error getting radar:",a)}try{const a=await H(K,{key:"artistRec",time:10},6);p.value.artist.list=N(a.artists)}catch(a){console.error("Error getting artist:",a)}try{const a=await H(ta,{key:"videoRec",time:10});p.value.video.list=T(a.data)}catch(a){console.error("Error getting video:",a)}try{const a=await H(q,{key:"radioRec",time:10});p.value.radio.list=T(a.djRadios)}catch(a){console.error("Error getting radio:",a)}try{const a=await H(G,{key:"albumRec",time:10});p.value.album.list=T(a.albums)}catch(a){console.error("Error getting album:",a)}}catch(a){window.$message.error("个性化推荐获取出错"),console.error("Error getting personalized data:",a)}};return i((()=>{y(),P(y)})),(a,e)=>{const t=sa,i=z,y=V,k=ra,F=X,M=Y,S=U,j=Q;return n(),g("div",da,[u(L)()?(n(),r(F,{key:0,cols:2,"x-gap":20,class:"main-rec"},{default:d((()=>[c(y,null,{default:d((()=>[c(i,{size:20,class:"rec-list",justify:"space-between",vertical:""},{default:d((()=>[c(t,{data:u(o).dailySongsData.list,title:u(m),height:90,description:"根据你的音乐口味 · 每日更新",size:"small",onClick:e[0]||(e[0]=a=>u(s).push({name:"daily-songs"}))},null,8,["data","title"]),c(t,{data:u(l).likeSongsList.data,height:90,title:"我喜欢的音乐",description:"发现你独特的音乐品味",size:"small",onClick:e[1]||(e[1]=a=>u(s).push({name:"like-songs"}))},null,8,["data"])])),_:1})])),_:1}),c(y,null,{default:d((()=>[c(k)])),_:1})])),_:1})):b("",!0),(n(!0),g(h,null,_(u(p),((a,e)=>(n(),g("div",{key:e,class:"rec-public"},[c(i,{class:"title",align:"center",justify:"space-between",onClick:e=>u(s).push({path:a.path??void 0})},{default:d((()=>[c(M,{prefix:"bar"},{default:d((()=>[c(u(w),null,{default:d((()=>[v(f(a.name),1)])),_:2},1024),a.path?(n(),r(x,{key:0,size:26,name:"Right"})):b("",!0)])),_:2},1024)])),_:2},1032,["onClick"]),"artist"===a.type?(n(),r(S,{key:0,data:a.list,loading:!0},null,8,["data"])):(n(),r(j,{key:1,data:a.list,type:a.type,cols:a.cols,loading:!0},null,8,["data","type","cols"]))])))),128))])}}}),[["__scopeId","data-v-6493babd"]]),ma={class:"home-local"};const ua=E({},[["render",function(a,e){const s=Z;return n(),g("div",ma,[c(s,null,{default:d((()=>e[0]||(e[0]=[v("还没开发完呢~")]))),_:1})])}]]),pa={class:"home"},ya={class:"welcome"},ga=E(a({__name:"index",setup(a){const e=$(),s=t(J);return(a,t)=>{const l=Z,i=w;return n(),g("div",pa,[y("div",ya,[c(l,null,{default:d((()=>[v(f(u(s)),1)])),_:1}),c(i,{depth:"3"},{default:d((()=>t[0]||(t[0]=[v("由此开启好心情 ~")]))),_:1})]),u(e).useOnlineService?(n(),r(ca,{key:0})):(n(),r(ua,{key:1}))])}}}),[["__scopeId","data-v-6268780b"]]);export{ga as default};
