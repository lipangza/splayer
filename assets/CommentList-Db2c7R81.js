import{_ as e,D as m,z as a,A as i,i as s,e as t}from"./index-D_KQhQdT.js";import{a as o,a7 as j,g as l,i as n,j as r,G as c,k as d,K as p,X as u,J as N,L as g,R as v,P as y,n as f,U as h,T as k,ah as _,W as w,O as R,aw as b,a2 as x,a3 as L,aJ as T,ap as C,aq as z}from"./vendor-QWMq--4w.js";import{_ as D}from"./avatar-DeuhMYCr.js";const U=(e,m=0,a=1,i=3,s=20,t)=>o({method:"GET",url:"/comment/new",params:{id:e,type:m,pageNo:a,pageSize:s,sortType:i,cursor:t,timestamp:(new Date).getTime()}}),G=(e,m=0,a=20,i=0,s)=>o({method:"GET",url:"/comment/hot",params:{id:e,type:m,limit:a,offset:i,before:s,timestamp:(new Date).getTime()}}),$=[{emoji:"😄",emjName:"大笑"},{emoji:"😊",emjName:"可爱"},{emoji:"😄",emjName:"憨笑"},{emoji:"😘",emjName:"亲亲"},{emoji:"😄",emjName:"流泪"},{emoji:"😊",emjName:"亲"},{emoji:"😐",emjName:"呆"},{emoji:"😢",emjName:"哀伤"},{emoji:"😁",emjName:"呲牙"},{emoji:"😝",emjName:"吐舌"},{emoji:"😄",emjName:"撇嘴"},{emoji:"😡",emjName:"怒"},{emoji:"😏",emjName:"奸笑"},{emoji:"😅",emjName:"汗"},{emoji:"😣",emjName:"痛苦"},{emoji:"😱",emjName:"惶恐"},{emoji:"🤒",emjName:"生病"},{emoji:"😷",emjName:"口罩"},{emoji:"😭",emjName:"大哭"},{emoji:"😵",emjName:"晕"},{emoji:"😡",emjName:"发怒"},{emoji:"😀",emjName:"开心"},{emoji:"😈",emjName:"鬼脸"},{emoji:"😠",emjName:"皱眉"},{emoji:"😷",emjName:"流感"},{emoji:"❤️",emjName:"爱心"},{emoji:"💔",emjName:"心碎"},{emoji:"💗",emjName:"钟情"},{emoji:"⭐",emjName:"星星"},{emoji:"💢",emjName:"生气"},{emoji:"💩",emjName:"便便"},{emoji:"💪",emjName:"强"},{emoji:"💤",emjName:"弱"},{emoji:"🙏",emjName:"拜"},{emoji:"🤝",emjName:"牵手"},{emoji:"💃",emjName:"跳舞"},{emoji:"🚫",emjName:"禁止"},{emoji:"👉",emjName:"这边"},{emoji:"😍",emjName:"爱意"},{emoji:"💏",emjName:"示爱"},{emoji:"💋",emjName:"嘴唇"},{emoji:"🐶",emjName:"狗"},{emoji:"😸",emjName:"猫"},{emoji:"🐷",emjName:"猪"},{emoji:"🐰",emjName:"兔子"},{emoji:"🐔",emjName:"小鸡"},{emoji:"🐓",emjName:"公鸡"},{emoji:"👻",emjName:"幽灵"},{emoji:"🎅",emjName:"圣诞"},{emoji:"👽",emjName:"外星"},{emoji:"💎",emjName:"钻石"},{emoji:"🎁",emjName:"礼物"},{emoji:"👦",emjName:"男孩"},{emoji:"👧",emjName:"女孩"},{emoji:"🍰",emjName:"蛋糕"},{emoji:"🔞",emjName:"18"},{emoji:"🔵",emjName:"圈"},{emoji:"❌",emjName:"叉"},{emoji:"😱",emjName:"惊恐"},{emoji:"😍",emjName:"色"}],A={key:0,class:"comment-list"},E={class:"user"},S={class:"avatar"},q=(e=>(C("data-v-9591f159"),e=e(),z(),e))((()=>N("div",{class:"cover-loading"},[N("img",{class:"loading-img",src:D,alt:"avatar"})],-1))),I=["src"],J={key:0,class:"associator"},P=["src"],V={class:"content"},K={class:"review"},O={class:"name"},W={class:"text"},X={key:0,class:"recover"},B={class:"name"},F={class:"text"},H={class:"menu"},M={key:0,class:"menu-item"},Q={key:1,class:"menu-item"},Y=["onClick"],Z={key:1,class:"comment-list"},ee=e({__name:"CommentList",props:{data:{type:Array,default:()=>[]},type:{type:String,default:"song"},loadingNum:{type:Number,default:20}},setup(e){const C=j(),z=e,D=e=>{try{if(!e)return null;const m=/\[(\S+?)\]/g;return e.replace(m,((e,m)=>{const a=$.find((e=>e.emjName===m));return a?a.emoji:e}))}catch(m){return console.error("表情替换出错：",m),e}},U=i((async e=>{try{if(s()){const m=e?.liked;if(void 0===m)return!1;200===(await((e,m,a,i=0)=>o({method:"GET",url:"/comment/like",params:{id:e,cid:m,t:a,type:i,timestamp:(new Date).getTime()}}))(C.currentRoute.value.query.id,e?.commentId,m?2:1,(()=>{switch(z.type){case"song":default:return 0;case"mv":return 1;case"playlist":return 2;case"album":return 3;case"video":return 5}})())).code&&(e.liked=!m,e.likedCount+=m?-1:1)}else $message.warning("请登录后使用"),"undefined"!=typeof $changeLogin&&$changeLogin()}catch(m){console.error("点赞出错：",m),$message.error("点赞出错，请重试")}}),3e3,"请稍后再操作");return(i,s)=>{const o=_,j=t,C=w,z=R,G=b,$=x,ee=L,me=T;return l(),n(k,{name:"fade",mode:"out-in"},{default:r((()=>[e.data?.length?(l(),c("div",A,[d(ee,{cols:"1 1200:2","x-gap":"20","y-gap":"20"},{default:r((()=>[(l(!0),c(p,null,u(e.data,((e,i)=>(l(),n($,{key:i},{default:r((()=>[d(G,{"content-style":{display:"flex",flexDirection:"row",padding:"16px"},class:"comments"},{default:r((()=>[N("div",E,[N("div",S,[d(o,{src:e.user?.avatarUrl.replace(/^http:/,"https:")+"?param=100y100",class:"cover","preview-disabled":"",lazy:"",onLoad:s[0]||(s[0]=e=>{e.target.style.opacity=1})},{placeholder:r((()=>[q])),_:2},1032,["src"]),e.user.vipRights?.redVipAnnualCount>0?(l(),c("img",{key:0,class:"package",src:e.user.vipRights.musicPackage?.iconUrl.replace(/^http:/,"https:"),title:"网易音乐人"},null,8,I)):g("",!0)]),e.user.vipRights?.redVipLevel>0?(l(),c("div",J,[e.user.vipRights.associator?(l(),c("img",{key:0,src:e.user.vipRights.associator.iconUrl.replace(/^http:/,"https:"),alt:"associator",title:"黑胶会员"},null,8,P)):g("",!0)])):g("",!0)]),N("div",V,[N("div",K,[N("span",O,v(e.user?.nickname||"未知用户名")+"：",1),N("span",W,v(D(e?.content)),1)]),e.beReplied?.length?(l(),c("div",X,[N("span",B,"@ "+v(e.beReplied[0].user.nickname)+"：",1),N("span",F,v(D(e.beReplied[0].content)),1)])):g("",!0),N("div",H,[e?.time?(l(),c("div",M,[d(C,{depth:"3",size:"16"},{default:r((()=>[d(j,{icon:"clock"})])),_:1}),d(z,{depth:"3"},{default:r((()=>[y(v(f(m)(e.time)),1)])),_:2},1024)])):g("",!0),e.ipLocation?.location?(l(),c("div",Q,[d(C,{depth:"3",size:"18"},{default:r((()=>[d(j,{icon:"ip"})])),_:1}),d(z,{depth:"3"},{default:r((()=>[y(v(e.ipLocation.location),1)])),_:2},1024)])):g("",!0),N("div",{class:h(["menu-item","like",e?.liked?"liked":null]),onClick:m=>f(U)(e)},[d(C,{size:"18"},{default:r((()=>[d(j,{icon:e?.liked?"thumb-up":"thumb-up-outline"},null,8,["icon"])])),_:2},1024),N("span",null,v(e?.liked?e?.likedCount||0:f(a)(e?.likedCount||0)),1)],10,Y)])])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])):(l(),c("div",Z,[(l(!0),c(p,null,u(e.loadingNum,(e=>(l(),n(me,{key:e,class:"comments"})))),128))]))])),_:1})}}},[["__scopeId","data-v-9591f159"]]);export{ee as _,U as a,G as g};
