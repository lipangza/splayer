import{_ as e,D as m,z as a,A as i,i as s,e as t}from"./index-D_KQhQdT.js";import{a as o,a7 as j,g as l,i as n,j as r,G as c,k as d,K as p,X as u,J as N,L as g,R as v,P as y,n as f,U as h,T as k,ah as _,W as w,O as R,aw as b,a2 as x,a3 as L,aJ as T,ap as C,aq as z}from"./vendor-QWMq--4w.js";import{_ as D}from"./avatar-DeuhMYCr.js";const U=(e,m=0,a=1,i=3,s=20,t)=>o({method:"GET",url:"/comment/new",params:{id:e,type:m,pageNo:a,pageSize:s,sortType:i,cursor:t,timestamp:(new Date).getTime()}}),G=(e,m=0,a=20,i=0,s)=>o({method:"GET",url:"/comment/hot",params:{id:e,type:m,limit:a,offset:i,before:s,timestamp:(new Date).getTime()}}),$=[{emoji:"ðŸ˜„",emjName:"å¤§ç¬‘"},{emoji:"ðŸ˜Š",emjName:"å¯çˆ±"},{emoji:"ðŸ˜„",emjName:"æ†¨ç¬‘"},{emoji:"ðŸ˜˜",emjName:"äº²äº²"},{emoji:"ðŸ˜„",emjName:"æµæ³ª"},{emoji:"ðŸ˜Š",emjName:"äº²"},{emoji:"ðŸ˜",emjName:"å‘†"},{emoji:"ðŸ˜¢",emjName:"å“€ä¼¤"},{emoji:"ðŸ˜",emjName:"å‘²ç‰™"},{emoji:"ðŸ˜",emjName:"åèˆŒ"},{emoji:"ðŸ˜„",emjName:"æ’‡å˜´"},{emoji:"ðŸ˜¡",emjName:"æ€’"},{emoji:"ðŸ˜",emjName:"å¥¸ç¬‘"},{emoji:"ðŸ˜…",emjName:"æ±—"},{emoji:"ðŸ˜£",emjName:"ç—›è‹¦"},{emoji:"ðŸ˜±",emjName:"æƒ¶æ"},{emoji:"ðŸ¤’",emjName:"ç”Ÿç—…"},{emoji:"ðŸ˜·",emjName:"å£ç½©"},{emoji:"ðŸ˜­",emjName:"å¤§å“­"},{emoji:"ðŸ˜µ",emjName:"æ™•"},{emoji:"ðŸ˜¡",emjName:"å‘æ€’"},{emoji:"ðŸ˜€",emjName:"å¼€å¿ƒ"},{emoji:"ðŸ˜ˆ",emjName:"é¬¼è„¸"},{emoji:"ðŸ˜ ",emjName:"çš±çœ‰"},{emoji:"ðŸ˜·",emjName:"æµæ„Ÿ"},{emoji:"â¤ï¸",emjName:"çˆ±å¿ƒ"},{emoji:"ðŸ’”",emjName:"å¿ƒç¢Ž"},{emoji:"ðŸ’—",emjName:"é’Ÿæƒ…"},{emoji:"â­",emjName:"æ˜Ÿæ˜Ÿ"},{emoji:"ðŸ’¢",emjName:"ç”Ÿæ°”"},{emoji:"ðŸ’©",emjName:"ä¾¿ä¾¿"},{emoji:"ðŸ’ª",emjName:"å¼º"},{emoji:"ðŸ’¤",emjName:"å¼±"},{emoji:"ðŸ™",emjName:"æ‹œ"},{emoji:"ðŸ¤",emjName:"ç‰µæ‰‹"},{emoji:"ðŸ’ƒ",emjName:"è·³èˆž"},{emoji:"ðŸš«",emjName:"ç¦æ­¢"},{emoji:"ðŸ‘‰",emjName:"è¿™è¾¹"},{emoji:"ðŸ˜",emjName:"çˆ±æ„"},{emoji:"ðŸ’",emjName:"ç¤ºçˆ±"},{emoji:"ðŸ’‹",emjName:"å˜´å”‡"},{emoji:"ðŸ¶",emjName:"ç‹—"},{emoji:"ðŸ˜¸",emjName:"çŒ«"},{emoji:"ðŸ·",emjName:"çŒª"},{emoji:"ðŸ°",emjName:"å…”å­"},{emoji:"ðŸ”",emjName:"å°é¸¡"},{emoji:"ðŸ“",emjName:"å…¬é¸¡"},{emoji:"ðŸ‘»",emjName:"å¹½çµ"},{emoji:"ðŸŽ…",emjName:"åœ£è¯ž"},{emoji:"ðŸ‘½",emjName:"å¤–æ˜Ÿ"},{emoji:"ðŸ’Ž",emjName:"é’»çŸ³"},{emoji:"ðŸŽ",emjName:"ç¤¼ç‰©"},{emoji:"ðŸ‘¦",emjName:"ç”·å­©"},{emoji:"ðŸ‘§",emjName:"å¥³å­©"},{emoji:"ðŸ°",emjName:"è›‹ç³•"},{emoji:"ðŸ”ž",emjName:"18"},{emoji:"ðŸ”µ",emjName:"åœˆ"},{emoji:"âŒ",emjName:"å‰"},{emoji:"ðŸ˜±",emjName:"æƒŠæ"},{emoji:"ðŸ˜",emjName:"è‰²"}],A={key:0,class:"comment-list"},E={class:"user"},S={class:"avatar"},q=(e=>(C("data-v-9591f159"),e=e(),z(),e))((()=>N("div",{class:"cover-loading"},[N("img",{class:"loading-img",src:D,alt:"avatar"})],-1))),I=["src"],J={key:0,class:"associator"},P=["src"],V={class:"content"},K={class:"review"},O={class:"name"},W={class:"text"},X={key:0,class:"recover"},B={class:"name"},F={class:"text"},H={class:"menu"},M={key:0,class:"menu-item"},Q={key:1,class:"menu-item"},Y=["onClick"],Z={key:1,class:"comment-list"},ee=e({__name:"CommentList",props:{data:{type:Array,default:()=>[]},type:{type:String,default:"song"},loadingNum:{type:Number,default:20}},setup(e){const C=j(),z=e,D=e=>{try{if(!e)return null;const m=/\[(\S+?)\]/g;return e.replace(m,((e,m)=>{const a=$.find((e=>e.emjName===m));return a?a.emoji:e}))}catch(m){return console.error("è¡¨æƒ…æ›¿æ¢å‡ºé”™ï¼š",m),e}},U=i((async e=>{try{if(s()){const m=e?.liked;if(void 0===m)return!1;200===(await((e,m,a,i=0)=>o({method:"GET",url:"/comment/like",params:{id:e,cid:m,t:a,type:i,timestamp:(new Date).getTime()}}))(C.currentRoute.value.query.id,e?.commentId,m?2:1,(()=>{switch(z.type){case"song":default:return 0;case"mv":return 1;case"playlist":return 2;case"album":return 3;case"video":return 5}})())).code&&(e.liked=!m,e.likedCount+=m?-1:1)}else $message.warning("è¯·ç™»å½•åŽä½¿ç”¨"),"undefined"!=typeof $changeLogin&&$changeLogin()}catch(m){console.error("ç‚¹èµžå‡ºé”™ï¼š",m),$message.error("ç‚¹èµžå‡ºé”™ï¼Œè¯·é‡è¯•")}}),3e3,"è¯·ç¨åŽå†æ“ä½œ");return(i,s)=>{const o=_,j=t,C=w,z=R,G=b,$=x,ee=L,me=T;return l(),n(k,{name:"fade",mode:"out-in"},{default:r((()=>[e.data?.length?(l(),c("div",A,[d(ee,{cols:"1 1200:2","x-gap":"20","y-gap":"20"},{default:r((()=>[(l(!0),c(p,null,u(e.data,((e,i)=>(l(),n($,{key:i},{default:r((()=>[d(G,{"content-style":{display:"flex",flexDirection:"row",padding:"16px"},class:"comments"},{default:r((()=>[N("div",E,[N("div",S,[d(o,{src:e.user?.avatarUrl.replace(/^http:/,"https:")+"?param=100y100",class:"cover","preview-disabled":"",lazy:"",onLoad:s[0]||(s[0]=e=>{e.target.style.opacity=1})},{placeholder:r((()=>[q])),_:2},1032,["src"]),e.user.vipRights?.redVipAnnualCount>0?(l(),c("img",{key:0,class:"package",src:e.user.vipRights.musicPackage?.iconUrl.replace(/^http:/,"https:"),title:"ç½‘æ˜“éŸ³ä¹äºº"},null,8,I)):g("",!0)]),e.user.vipRights?.redVipLevel>0?(l(),c("div",J,[e.user.vipRights.associator?(l(),c("img",{key:0,src:e.user.vipRights.associator.iconUrl.replace(/^http:/,"https:"),alt:"associator",title:"é»‘èƒ¶ä¼šå‘˜"},null,8,P)):g("",!0)])):g("",!0)]),N("div",V,[N("div",K,[N("span",O,v(e.user?.nickname||"æœªçŸ¥ç”¨æˆ·å")+"ï¼š",1),N("span",W,v(D(e?.content)),1)]),e.beReplied?.length?(l(),c("div",X,[N("span",B,"@ "+v(e.beReplied[0].user.nickname)+"ï¼š",1),N("span",F,v(D(e.beReplied[0].content)),1)])):g("",!0),N("div",H,[e?.time?(l(),c("div",M,[d(C,{depth:"3",size:"16"},{default:r((()=>[d(j,{icon:"clock"})])),_:1}),d(z,{depth:"3"},{default:r((()=>[y(v(f(m)(e.time)),1)])),_:2},1024)])):g("",!0),e.ipLocation?.location?(l(),c("div",Q,[d(C,{depth:"3",size:"18"},{default:r((()=>[d(j,{icon:"ip"})])),_:1}),d(z,{depth:"3"},{default:r((()=>[y(v(e.ipLocation.location),1)])),_:2},1024)])):g("",!0),N("div",{class:h(["menu-item","like",e?.liked?"liked":null]),onClick:m=>f(U)(e)},[d(C,{size:"18"},{default:r((()=>[d(j,{icon:e?.liked?"thumb-up":"thumb-up-outline"},null,8,["icon"])])),_:2},1024),N("span",null,v(e?.liked?e?.likedCount||0:f(a)(e?.likedCount||0)),1)],10,Y)])])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])):(l(),c("div",Z,[(l(!0),c(p,null,u(e.loadingNum,(e=>(l(),n(me,{key:e,class:"comments"})))),128))]))])),_:1})}}},[["__scopeId","data-v-9591f159"]]);export{ee as _,U as a,G as g};
