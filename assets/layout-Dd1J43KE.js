import{d as a,as as e,u as s,r as t,f as l,bI as i,o as r,cn as o,H as n,j as c,n as u,m as d,k as m,J as v,ag as p,ah as f,cN as y,i as _,af as g,ai as h,a7 as b,a8 as k,b9 as w,ar as q,a5 as x,cl as S,a6 as C,cO as R,c5 as j,aj as L,ae as z,cF as A,ao as F,au as N,cq as T,cr as $,ac as B,cP as D,cB as I,K}from"./stores-fvLrIm8G.js";import{u as P,o as U}from"./index-CugtlCeX.js";const V=""+new URL("../images/artist.jpg?assest",import.meta.url).href,E={key:0,class:"detail"},H={class:"cover"},J={class:"data"},M={class:"name text-hidden"},O={key:1,class:"detail"},G={class:"data"},Q=K(a({__name:"layout",setup(a){const K=P(),Q=e(),W=s(),X=t(null),Y=l(()=>Number(K.currentRoute.value.query.id)),Z=t(K.currentRoute.value?.name||"artist-songs"),aa=t(null),ea=t(!1),sa=l(()=>[{label:"打开源页面",key:"open",props:{onClick:()=>{window.open(`https://music.163.com/#/artist?id=${Y.value}`)}},icon:i("Link")}]),ta=l(()=>Q.userLikeData.artists.some(a=>a.id===Y.value)),la=async a=>{try{if(!a)return;ea.value=!1,aa.value=null;const e=await D(a);aa.value=I(e.data.artist)[0],aa.value.identify=e.data.identify?.imageDesc}catch(e){console.error("Erorr getting artist detail:",e),window.$message.error("获取歌手详情失败")}},ia=a=>{K.push({name:a,query:{id:Y.value}})},ra=async()=>{await K.push({name:"artist-songs",query:{id:Y.value}}),X.value&&X.value.playAllSongs()},oa=a=>{const e=a.target.scrollTop;ea.value=e>10};return U(a=>{if(ea.value=!1,"artist"!==a.matched[0].name)return;Z.value=a.name;const e=Number(a.query.id);e&&e!==Y.value&&la(e)}),r(()=>la(Y.value)),(a,e)=>{const s=p,t=h,l=x,i=q,r=S,D=w,I=C,P=j,U=L,Q=A,la=N,na=o("RouterView");return c(),n("div",{key:m(Y),class:B(["artist",{small:m(ea)}])},[u(z,{name:"fade",mode:"out-in"},{default:d(()=>[m(aa)?(c(),n("div",E,[v("div",H,[u(s,{src:m(aa).coverSize?.m||m(aa).cover,"previewed-img-props":{style:{borderRadius:"8px"}},"preview-src":m(aa).cover,renderToolbar:m(y),"show-toolbar-tooltip":"",class:"cover-img",onLoad:m(f)},{placeholder:d(()=>e[5]||(e[5]=[v("div",{class:"cover-loading"},[v("img",{src:V,class:"loading-img",alt:"loading-img"})],-1)])),_:1},8,["src","preview-src","renderToolbar","onLoad"]),u(s,{class:"cover-shadow","preview-disabled":"",src:m(aa).coverSize?.m||m(aa).cover},null,8,["src"])]),v("div",J,[v("div",M,[u(t,{class:"name-text"},{default:d(()=>[b(k(m(aa).name||"未知艺术家"),1)]),_:1}),m(aa)?.alia?(c(),_(t,{key:0,class:"name-alias",depth:"3"},{default:d(()=>[b(k(m(aa).alia||"未知艺术家"),1)]),_:1})):g("",!0)]),u(D,{show:!m(ea),class:"collapse"},{default:d(()=>[m(aa)?.identify?(c(),_(t,{key:0,depth:3,class:"identify text-hidden"},{default:d(()=>[b(k(m(aa).identify),1)]),_:1})):g("",!0),u(i,{class:"meta"},{default:d(()=>[v("div",{class:"item",onClick:e[0]||(e[0]=a=>m(K).push({name:"artist-songs",query:{id:m(Y)}}))},[u(l,{name:"Music",depth:3}),u(t,null,{default:d(()=>[b(k(m(aa).musicSize||0),1)]),_:1})]),v("div",{class:"item",onClick:e[1]||(e[1]=a=>m(K).push({name:"artist-albums",query:{id:m(Y)}}))},[u(l,{name:"Album",depth:3}),u(t,null,{default:d(()=>[b(k(m(aa).albumSize||0),1)]),_:1})]),v("div",{class:"item",onClick:e[2]||(e[2]=a=>m(K).push({name:"artist-videos",query:{id:m(Y)}}))},[u(l,{name:"Video",depth:3}),u(t,null,{default:d(()=>[b(k(m(aa).mvSize||0),1)]),_:1})])]),_:1}),m(aa).description?(c(),_(r,{key:1,"line-clamp":1,tooltip:{trigger:"click",placement:"bottom",width:"trigger"}},{default:d(()=>[b(k(m(aa).description),1)]),_:1})):g("",!0)]),_:1},8,["show"]),u(i,{class:"menu",justify:"space-between"},{default:d(()=>[u(i,{class:"left",align:"flex-end"},{default:d(()=>[u(I,{focusable:!1,type:"primary",strong:"",secondary:"",round:"",onClick:ra},{icon:d(()=>[u(l,{name:"Play"})]),default:d(()=>[e[6]||(e[6]=b(" 播放 "))]),_:1,__:[6]}),u(I,{focusable:!1,strong:"",secondary:"",round:"",onClick:e[3]||(e[3]=a=>m(R)(m(Y),!m(ta)))},{icon:d(()=>[u(l,{name:m(ta)?"Favorite":"FavoriteBorder"},null,8,["name"])]),default:d(()=>[b(" "+k(m(ta)?"取消关注":"关注歌手"),1)]),_:1}),u(P,{options:m(sa),trigger:"click",placement:"bottom-start"},{default:d(()=>[u(I,{focusable:!1,class:"more",circle:"",strong:"",secondary:""},{icon:d(()=>[u(l,{name:"List"})]),_:1})]),_:1},8,["options"])]),_:1})]),_:1})])])):(c(),n("div",O,[u(U,{class:"cover"}),v("div",G,[u(U,{repeat:4,text:""})])]))]),_:1}),u(la,{value:m(Z),"onUpdate:value":[e[4]||(e[4]=a=>F(Z)?Z.value=a:null),ia],class:"tabs",type:"segment"},{default:d(()=>[u(Q,{name:"artist-songs"},{default:d(()=>e[7]||(e[7]=[b(" 单曲 ")])),_:1,__:[7]}),u(Q,{name:"artist-albums"},{default:d(()=>e[8]||(e[8]=[b(" 专辑 ")])),_:1,__:[8]}),u(Q,{name:"artist-videos"},{default:d(()=>e[9]||(e[9]=[b(" 视频 ")])),_:1,__:[9]})]),_:1},8,["value"]),u(na,null,{default:d(({Component:a})=>[u(z,{name:`router-${m(W).routeAnimation}`,mode:"out-in"},{default:d(()=>[m(W).useKeepAlive?(c(),_(T,{key:0},[(c(),_($(a),{ref_key:"componentRef",ref:X,id:m(Y),class:"router-view",onScroll:oa},null,40,["id"]))],1024)):(c(),_($(a),{key:1,ref_key:"componentRef",ref:X,id:m(Y),class:"router-view",onScroll:oa},null,40,["id"]))]),_:2},1032,["name"])]),_:1})],2)}}}),[["__scopeId","data-v-4fb472da"]]);export{Q as default};
