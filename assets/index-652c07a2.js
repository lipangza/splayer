import{P as e,Q as t,br as a,_ as s,R as o,a8 as n,S as i,M as l,W as r,Y as c,O as m,N as d,X as u,a1 as p,a2 as k,U as h,bB as v,aH as g,a4 as D,T as C,ad as f,ac as L,aG as j}from"./index-62a86a6d.js";import{T}from"./Time-d30ef9e3.js";import{_ as w}from"./Skeleton-341b61e6.js";const y=e("local",!1,(function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("path",{d:"M9.85786 32.7574C6.23858 33.8432 4 35.3432 4 37C4 40.3137 12.9543 43 24 43C35.0457 43 44 40.3137 44 37C44 35.3432 41.7614 33.8432 38.1421 32.7574",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M24 35C24 35 37 26.504 37 16.6818C37 9.67784 31.1797 4 24 4C16.8203 4 11 9.67784 11 16.6818C11 26.504 24 35 24 35Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M24 22C26.7614 22 29 19.7614 29 17C29 14.2386 26.7614 12 24 12C21.2386 12 19 14.2386 19 17C19 19.7614 21.2386 22 24 22Z",fill:e.colors[3],stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null)])})),M=e("thumbs-up",!0,(function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("path",{d:"M27.6002 18.5998V11.3998C27.6002 8.41743 25.1826 5.99977 22.2002 5.99977L15.0002 22.1998V41.9998H35.9162C37.7113 42.0201 39.2471 40.7147 39.5162 38.9398L42.0002 22.7398C42.1587 21.6955 41.8506 20.6343 41.1576 19.8373C40.4645 19.0403 39.4564 18.5878 38.4002 18.5998H27.6002Z",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M15 22.0001H10.194C8.08532 21.9628 6.2827 23.7095 6 25.7994V38.3994C6.2827 40.4894 8.08532 42.0367 10.194 41.9994H15V22.0001Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null)])})),_=(e,t=0,s=null,o="music")=>a({method:"GET",url:`/comment/${o}`,params:{id:e,offset:t,before:s,timestamp:(new Date).getTime()}}),b={class:"user"},H={class:"avatar"},R=["src"],x=["src"],V={key:0,class:"associator"},z=["src"],W={class:"review"},B={class:"content"},U={key:0,class:"beReplied"},Z={class:"thing"},E={class:"item"},G={key:0,class:"item"},I=s({__name:"index",props:{commentData:{type:Object,default:{}}},setup(e){const s=e,{t:_}=o(),I=n(),O=i(),P=()=>{if(I.userLogin){const e=s.commentData.liked?0:1;((e,t,s,o=0)=>a({method:"GET",hiddenBar:!0,url:"/comment/like",params:{id:e,cid:t,t:s,type:o,timestamp:(new Date).getTime()}}))(O.currentRoute.value.query.id,s.commentData.commentId,e).then((t=>{200===t.code?(s.commentData.liked=!s.commentData.liked,s.commentData.likedCount+=e?1:-1):$message.error(_("general.message.operationFailed"))}))}else $message.error(_("general.message.needLogin"))};return(a,s)=>{const o=f,n=L,i=j,_=w;return l(),r(C,{mode:"out-in"},{default:c((()=>[Object.keys(e.commentData).length?(l(),r(i,{key:0,class:"comment",hoverable:""},{default:c((()=>{var a,s,i;return[m("div",b,[m("div",H,[m("img",{class:"avatarImg",src:e.commentData.user.avatarUrl.replace(/^http:/,"https:")+"?param=50y50",alt:"avatar"},null,8,R),(null==(a=e.commentData.user.vipRights)?void 0:a.redVipAnnualCount)>0?(l(),d("img",{key:0,class:"musicPackage",src:e.commentData.user.vipRights.musicPackage.iconUrl.replace(/^http:/,"https:"),alt:"redVipAnnualCount",title:"网易音乐人"},null,8,x)):u("",!0)]),(null==(s=e.commentData.user.vipRights)?void 0:s.redVipLevel)>0?(l(),d("div",V,[e.commentData.user.vipRights.associator?(l(),d("img",{key:0,src:e.commentData.user.vipRights.associator.iconUrl.replace(/^http:/,"https:"),alt:"associator",title:"黑胶会员"},null,8,z)):u("",!0)])):u("",!0)]),m("div",W,[m("div",B,[t(o,{class:"name"},{default:c((()=>[p(k(e.commentData.user.nickname)+"：",1)])),_:1}),t(o,{class:"text",innerHTML:e.commentData.content},null,8,["innerHTML"])]),e.commentData.beReplied[0]?(l(),d("div",U,[t(o,{class:"name"},{default:c((()=>[p(" @"+k(e.commentData.beReplied[0].user.nickname)+"： ",1)])),_:1}),t(o,{class:"text"},{default:c((()=>[p(k(e.commentData.beReplied[0].content),1)])),_:1})])):u("",!0),m("div",Z,[m("div",E,[t(n,{size:"14",depth:3,component:h(T)},null,8,["component"]),t(o,{depth:3,innerHTML:h(v)(e.commentData.time)},null,8,["innerHTML"])]),(null==(i=e.commentData.ipLocation)?void 0:i.location)?(l(),d("div",G,[t(n,{size:"14",depth:3,component:h(y)},null,8,["component"]),t(o,{depth:3,innerHTML:e.commentData.ipLocation.location},null,8,["innerHTML"])])):u("",!0),m("div",{class:g(e.commentData.liked?"like liked":"like"),onClick:P},[t(n,null,{default:c((()=>[t(h(M),{theme:e.commentData.liked?"filled":"outline"},null,8,["theme"])])),_:1}),p(" "+k(h(D)(e.commentData.likedCount)),1)],2)])])]})),_:1})):(l(),r(_,{key:1,class:"skeleton"}))])),_:1})}}},[["__scopeId","data-v-c612254d"]]);export{I as C,_ as g};
