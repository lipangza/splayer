import{_ as a}from"./CoverList-CGbqqvd5.js";import{d as e,as as t,r as s,f as l,o as u,H as o,j as n,n as r,i as c,af as d,m as i,a6 as m,a7 as v,a8 as p,k as y,cG as f,a5 as _,ae as h,au as q,ao as g,cF as k,ar as b,aA as C,aB as w,av as j,aI as D,ac as x,ai as L,ck as M,cH as R,cy as F,K as G}from"./stores-fvLrIm8G.js";import{u as H,o as I}from"./index-CugtlCeX.js";import"./album-DzRjhu8w.js";const U={class:"discover-playlists"},z=G(e({__name:"playlists",setup(e){const G=H(),z=t(),A=s(!1),B=s(G.currentRoute.value.query?.cat||"全部歌单"),K=s("true"===G.currentRoute.value.query?.hq?"hq":"normal"),N=s(!0),P=s(!0),T=s(0),E=s(1),J=s([]),O=l(()=>0!==z.catData.hqCats?.length&&("全部歌单"===B.value||z.catData.hqCats.some(a=>a.name===B.value))),Q=async()=>{const a=J.value?.at(-1)?.updateTime??void 0;P.value=!0;const e=await R(B.value,50,T.value,"hq"===K.value,a);E.value=e?.total,N.value=e.more||e?.total>T.value+50;const t=F(e.playlists);J.value=J.value?.concat(t),P.value=!1},S=()=>{T.value+=50,Q()},V=(a,e="false")=>{A.value=!1,G.push({name:"discover-playlists",query:{cat:a,hq:e}})};return I(a=>{"discover-playlists"===a.name&&(B.value=a.query?.cat||"全部歌单",K.value="true"===a.query?.hq?"hq":"normal",J.value=[],Q())}),u(()=>{z.getPlaylistCatList(),Q()}),(e,t)=>{const s=_,l=f,u=m,R=k,F=q,G=b,H=a,I=L,T=D,Q=j,W=M;return n(),o("div",U,[r(G,{justify:"space-between",align:"center",class:"menu"},{default:i(()=>[r(u,{focusable:!1,"icon-placement":"right",strong:"",secondary:"",round:"",onClick:t[0]||(t[0]=a=>A.value=!0)},{icon:i(()=>[r(l,{class:"more",depth:"3"},{default:i(()=>[r(s,{name:"Right"})]),_:1})]),default:i(()=>[v(" "+p(y(B)),1)]),_:1}),r(h,{name:"fade",mode:"out-in"},{default:i(()=>[y(O)?(n(),c(F,{key:0,value:y(K),"onUpdate:value":[t[1]||(t[1]=a=>g(K)?K.value=a:null),t[2]||(t[2]=a=>V(y(B),"normal"===a?"false":"true"))],class:"tabs",type:"segment"},{default:i(()=>[r(R,{name:"normal"},{default:i(()=>t[5]||(t[5]=[v(" 推荐 ")])),_:1,__:[5]}),r(R,{name:"hq"},{default:i(()=>t[6]||(t[6]=[v(" 精品 ")])),_:1,__:[6]})]),_:1},8,["value"])):d("",!0)]),_:1})]),_:1}),y(E)>0?(n(),c(H,{key:0,data:y(J),loading:y(P),loadMore:y(N),type:"playlist",onLoadMore:S},null,8,["data","loading","loadMore"])):d("",!0),r(W,{show:y(A),"onUpdate:show":t[4]||(t[4]=a=>g(A)?A.value=a:null),"display-directive":"show",style:{width:"600px"},preset:"card"},{header:i(()=>[r(G,{align:"center",class:"cat-header"},{default:i(()=>[r(I,null,{default:i(()=>t[7]||(t[7]=[v("歌单分类")])),_:1,__:[7]}),r(T,{type:"全部歌单"==y(B)?"primary":"default",bordered:!1,round:"",onClick:t[3]||(t[3]=a=>V("全部歌单"))},{default:i(()=>t[8]||(t[8]=[v(" 全部歌单 ")])),_:1,__:[8]},8,["type"])]),_:1})]),default:i(()=>[r(F,{type:"segment",animated:""},{default:i(()=>[(n(!0),o(C,null,w(y(z).catData.type,(a,e,t)=>(n(),c(Q,{key:t,name:e,tab:a},{default:i(()=>[r(G,{class:"cat-list"},{default:i(()=>[(n(!0),o(C,null,w(y(z).catData.cats.filter(a=>a.category===Number(e)),(a,e)=>(n(),c(T,{key:e,bordered:!1,class:x({choose:y(B)===a.name}),size:"large",round:"",onClick:e=>V(a.name)},{icon:i(()=>[a.hot?(n(),c(s,{key:0,depth:3,name:"Fire"})):d("",!0)]),default:i(()=>[v(p(a.name)+" ",1)]),_:2},1032,["class","onClick"]))),128))]),_:2},1024)]),_:2},1032,["name","tab"]))),128))]),_:1})]),_:1},8,["show"])])}}}),[["__scopeId","data-v-1f7d985e"]]);export{z as default};
