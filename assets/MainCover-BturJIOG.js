import{_ as e,g as a,m as s,s as t,b as l,p as r,e as i,q as o,i as d,J as c,a as n,O as p}from"./index-B903CxKP.js";import{a7 as u,s as y,r as m,M as v,g,G as f,k as _,j as k,T as h,i as w,n as b,V as C,W as j,a1 as x,K as z,X as S,U as q,J as $,L as N,P as D,R as I,ah as R,O as L,aw as M,a2 as P,a3 as J,aJ as O}from"./vendor-QWMq--4w.js";import{g as T}from"./album-0csMMabW.js";import{b as B}from"./dj-DH2T3qaa.js";const A=e({__name:"CoverPlayBtn",props:{id:{type:Number,required:!0},type:{type:String,default:"playlist"}},setup(e){const n=u(),p=a(),z=s(),S=t(),{userLikeData:q}=y(p),{playList:$,playSongData:N}=y(z),{playIndex:D,playMode:I,playHeartbeatMode:R,playState:L}=y(S),M=e,P=m(!1),J=m(null),O=v((()=>{if(!J.value||400===J.value)return-1;const e=z.getPlaySongData?.id;return J.value.findIndex((a=>a.id===e))})),A=async()=>{try{if(!M.id)return!1;if("mv"!==M.type)if(-1===O.value){if(P.value=!0,J.value=await(async()=>{switch(M.type,M.id,M.type){case"playlist":if(1024===M.id){const e=q.value.playlists?.[0]?.id||null;if(!d()||!e)return 400;const a=await c(e,500);return o(a.songs,"song")}{const e=await c(M.id,500);return o(e.songs,"song")}case"album":{const e=await T(M.id);return o(e.songs,"song")}case"dj":{const e=await B(M.id,500);return o(e.programs,"dj")}default:return null}})(),J.value,!J.value)return P.value=!1,$message.error("获取播放列表时出现错误");if(400===J.value)return P.value=!1,$message.error("请登录后使用");R.value=!1,I.value="dj"===M.type?"dj":"normal",$.value=J.value.slice(),N.value=J.value[0],D.value=0,await l(!0),P.value=!1,$message.info("已开始播放",{showIcon:!1})}else N.value=J.value[O.value],D.value=O.value,r();else n.push({path:"/videos-player",query:{id:M.id}})}catch(e){console.error("获取播放列表时出现错误：",e),$message.error("获取播放列表时出现错误")}};return(e,a)=>{const s=i,t=j,l=x;return g(),f("div",{class:"play-btn",onClick:a[0]||(a[0]=C((()=>{}),["stop"]))},[_(l,{loading:b(P),color:"#efefef",tag:"div",type:"primary",class:"play",size:"large",strong:"",secondary:"",circle:"",onClick:C(A,["stop"])},{icon:k((()=>[_(h,{name:"fade",mode:"out-in"},{default:k((()=>[(g(),w(t,{key:`${b(O)}-${b(L)}`,size:"50"},{default:k((()=>[_(s,{icon:-1!==b(O)&&b(L)?"pause-circle":"play-circle"},null,8,["icon"])])),_:1}))])),_:1})])),_:1},8,["loading"])])}}},[["__scopeId","data-v-beaa37b9"]]),G={class:"cover-img"},H=["src"],K={key:1,class:"additional"},U={class:"cover-content"},V={key:2,class:"artists"},W={key:3,class:"size"},X={class:"cover-content"},E=e({__name:"MainCover",props:{type:{type:String,default:"playlist"},data:{type:Array,default:()=>[]},columns:{type:String,default:"2 s:3 m:4 l:5 xl:6"},gridCollapsed:{type:Boolean,default:!1},gridCollapsedRows:{type:Number,default:3},loadingNum:{type:Number}},setup(e){const a=u(),s=n(),t=e,l=m(null),r=m(t.loadingNum||s.loadSize||50);return(s,t)=>{const o=R,d=L,c=A,n=i,u=j,y=M,m=P,v=J,x=O,T=p;return g(),f(z,null,[_(h,{name:"fade",mode:"out-in"},{default:k((()=>[e.data?.length?(g(),w(v,{key:0,cols:e.columns,collapsed:e.gridCollapsed,"collapsed-rows":e.gridCollapsedRows,class:"cover-lists",responsive:"screen","x-gap":"20","y-gap":"20"},{default:k((()=>[(g(!0),f(z,null,S(e.data,((s,r)=>(g(),w(m,{key:r,onClick:C((t=>((e,s)=>{try{switch(s){case"mv":a.push({path:"/videos-player",query:{id:e?.id}});break;case"playlist":a.push({path:"/playlist",query:{id:e?.id}});break;case"album":a.push({path:"/album",query:{id:e?.id}});break;case"artist":a.push({path:"/artist",query:{id:e?.id}});break;case"dj":a.push({path:"/dj",query:{id:e?.id}})}}catch(t){$message.error("跳转出错，请上报错误至开发者"),console.error("跳转出错：",t)}})(s,e.type)),["stop"]),onContextmenu:a=>b(l)?.openDropdown(a,e.type,s.id)},{default:k((()=>[_(y,{class:q(["cover-item",e.type]),"content-style":{padding:"artist"===e.type?0:"16px"}},{default:k((()=>[$("div",G,[_(o,{src:"mv"===e.type?s.coverSize:s.coverSize.m,class:"cover-main-img","preview-disabled":"",lazy:"",onLoad:t[0]||(t[0]=e=>{e.target.style.opacity=1})},{placeholder:k((()=>[$("div",{class:q(["cover-loading",e.type])},[$("img",{class:"loading-img",src:"mv"===e.type?"/images/pic/video.png?assest":"artist"===e.type?"/images/pic/artist.jpg?assest":"/images/pic/album.jpg?assest",alt:"song"},null,8,H)],2)])),_:2},1032,["src"]),"artist"===e.type?(g(),w(o,{key:0,class:"cover-main-shadow",lazy:"","preview-disabled":"",src:s.coverSize.m},null,8,["src"])):N("",!0),s.desc?(g(),f("div",K,[_(d,{class:"add-desc"},{default:k((()=>[D(I(s.desc),1)])),_:2},1024)])):N("",!0),"artist"!==e.type?(g(),w(c,{key:2,id:s.id,type:e.type},null,8,["id","type"])):(g(),w(u,{key:3,class:"play-btn"},{default:k((()=>[_(n,{icon:"account-music"})])),_:1}))]),$("div",U,[_(d,{class:"name"},{default:k((()=>[D(I(s.name),1)])),_:2},1024),s?.creator?(g(),w(d,{key:0,class:"creator",depth:"3"},{default:k((()=>[D(I(s.creator?.nickname||s.creator||"未知"),1)])),_:2},1024)):N("",!0),s?.rcmdText?(g(),w(d,{key:1,class:"creator",depth:"3"},{default:k((()=>[D(I(s.rcmdText||"未知简介"),1)])),_:2},1024)):N("",!0),s.artists&&"dj"!==e.type?(g(),f("div",V,[(g(!0),f(z,null,S(s.artists,(e=>(g(),w(d,{key:e.id,class:"ar",onClick:C((s=>b(a).push(`/artist?id=${e.id}`)),["stop"])},{default:k((()=>[D(I(e.name||e.userName),1)])),_:2},1032,["onClick"])))),128))])):N("",!0),"artist"===e.type&&s.size.music?(g(),f("div",W,[_(u,{depth:"3",size:"16"},{default:k((()=>[_(n,{icon:"artist"!==e.type?"play-circle":"music-note"},null,8,["icon"])])),_:1}),_(d,{depth:"3"},{default:k((()=>[D(I(s.size.music),1)])),_:2},1024)])):N("",!0)])])),_:2},1032,["class","content-style"])])),_:2},1032,["onClick","onContextmenu"])))),128))])),_:1},8,["cols","collapsed","collapsed-rows"])):(g(),w(v,{key:1,cols:e.columns,collapsed:e.gridCollapsed,"collapsed-rows":e.gridCollapsedRows,class:"cover-lists-loading",responsive:"screen","x-gap":"20","y-gap":"20"},{default:k((()=>[(g(!0),f(z,null,S(b(r),(a=>(g(),w(m,{key:a},{default:k((()=>[_(y,{class:q(["cover-item",e.type]),"content-style":"padding: 16px"},{default:k((()=>[_(x,{class:"cover-img"}),$("div",X,[_(x,{text:"",round:"",repeat:2})])])),_:1},8,["class"])])),_:2},1024)))),128))])),_:1},8,["cols","collapsed","collapsed-rows"]))])),_:1}),_(T,{ref_key:"coverDropdownRef",ref:l},null,512)],64)}}},[["__scopeId","data-v-5e98800e"]]);export{E as _,A as a};
