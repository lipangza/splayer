import{R as e,S as a,r as s,z as u,j as r,M as t,N as l,Q as o,U as m,W as i,X as p,as as n,a6 as v}from"./index-6137d952.js";import{C as c}from"./CoverLists-9ffbc3d4.js";import{P as j}from"./index-3e7b80bc.js";import"./album-9073c661.js";import"./formRules-8f71b7bd.js";import"./FormItem-6e5a0af4.js";import"./Select-3d3bcb8f.js";import"./getCoverUrl-e2404558.js";import"./Tooltip-8e4143df.js";import"./PlayOne-8b2c271b.js";import"./LinkTwo-053d5333.js";import"./Unlike-3687ca6d.js";import"./Grid-c63c69ed.js";import"./Skeleton-a194b938.js";import"./use-houdini-b4e30d74.js";const b={class:"albums"},g={__name:"albums",setup(g){const{t:d}=e(),y=a(),h=s(y.currentRoute.value.query.keywords),T=s([]),f=s(0),q=s(30),C=s(y.currentRoute.value.query.page?Number(y.currentRoute.value.query.page):1),k=(e,a=30,s=0,u=10)=>{n(e,a,s,u).then((e=>{f.value=e.result.albumCount,T.value=[],e.result.albums?e.result.albums.forEach((e=>{T.value.push({id:e.id,cover:e.picUrl,name:e.name,artist:e.artists,time:v(e.publishTime)})})):$message.error(d("general.message.acquisitionFailed")),"undefined"!=typeof $scrollToTop&&$scrollToTop()}))};u((()=>y.currentRoute.value),(e=>{h.value=e.query.keywords,C.value=Number(e.query.page?e.query.page:1),"s-albums"==e.name&&k(h.value,q.value,(C.value-1)*q.value)}));const N=e=>{q.value=e,k(h.value,e,(C.value-1)*q.value)},R=e=>{y.push({path:"/search/albums",query:{keywords:h.value,page:e}})};return r((()=>{k(h.value,q.value,(C.value-1)*q.value)})),(e,a)=>(t(),l("div",b,[o(c,{listData:m(T),listType:"album"},null,8,["listData"]),m(T)[0]?(t(),i(j,{key:0,pageNumber:m(C),totalCount:m(f),onPageSizeChange:N,onPageNumberChange:R},null,8,["pageNumber","totalCount"])):p("",!0)]))}};export{g as default};
