import{a as e,t as a,q as s,e as r}from"./index-B903CxKP.js";import{_ as t}from"./Pagination-D96eRF_4.js";import{_ as o}from"./MainCover-BturJIOG.js";import{a7 as u,r as l,w as n,e as i,g as m,G as v,k as d,j as p,T as c,n as y,i as g,L as f,W as h,a0 as j}from"./vendor-QWMq--4w.js";import"./album-0csMMabW.js";import"./dj-DH2T3qaa.js";const k={class:"search-videos"},b={key:0,class:"list"},_={__name:"videos",setup(_){const q=u(),z=e(),C=l([]),N=l(0),S=l(q.currentRoute.value.query?.keywords||""),w=l(Number(q.currentRoute.value.query?.page)||1),x=(e=S.value,r=z.loadSize,t=0,o=1004)=>{try{C.value=[],a(e,r,t,o).then((e=>{if(N.value=e.result.mvCount,0===Object.keys(e.result)?.length)return C.value="empty";C.value=s(e.result.mvs,"mv")}))}catch(u){console.error("搜索出现错误：",u),$message.error("搜索出现错误")}},P=e=>{q.push({path:"/search/videos",query:{keywords:S.value,page:e}})};return n((()=>q.currentRoute.value),(e=>{"sea-videos"==e.name&&(w.value=Number(e.query?.page)||1,S.value=e.query?.keywords||"",x(S.value,z.loadSize,(w.value-1)*z.loadSize))})),i((()=>{x(S.value,z.loadSize,(w.value-1)*z.loadSize)})),(e,a)=>{const s=o,u=t,l=r,n=h,i=j;return m(),v("div",k,[d(c,{name:"fade",mode:"out-in"},{default:p((()=>["empty"!==y(C)?(m(),v("div",b,[d(s,{data:y(C),columns:"1 s:2 m:3 l:4 xl:5",type:"mv"},null,8,["data"]),y(C)?.length?(m(),g(u,{key:0,totalCount:y(N),pageNumber:y(w),onPageNumberChange:P},null,8,["totalCount","pageNumber"])):f("",!0)])):(m(),g(i,{key:1,description:`很抱歉，未能找到与 ${y(S)} 相关的任何视频`,style:{"margin-top":"60px"},size:"large"},{icon:p((()=>[d(n,null,{default:p((()=>[d(l,{icon:"search-off"})])),_:1})])),_:1},8,["description"]))])),_:1})])}}};export{_ as default};
