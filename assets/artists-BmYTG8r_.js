import{_ as a}from"./ArtistList-D2XE8tb0.js";import{d as e,r as s,o as l,H as r,I as t,k as o,j as u,m as i,cM as n,cC as c,ar as d,h as v,aA as y,aB as m,ac as k,a1 as p,a2 as f,aI as _,K as C}from"./stores-De5JHsxi.js";import{u as h,o as g}from"./index-tqBPJ7OH.js";const q={class:"discover-artists"},M={class:"menu"},b=C(e({__name:"artists",setup(e){const C=h(),b=[{key:-1,value:"热门"},...Array.from({length:26},((a,e)=>String.fromCharCode(e+65))).map((a=>({key:a,value:a}))),{key:0,value:"#"}],j=s(C.currentRoute.value.query?.initial||b[0].key),$=["全部",...["华语","欧美","日本","韩国"].flatMap((a=>[`${a}`,`${a}男`,`${a}女`,`${a}组合`])),"其他"],A=[-1,-1,1,2,3,-1,1,2,3,-1,1,2,3,-1,1,2,3,-1],I=[-1,7,7,7,7,96,96,96,96,8,8,8,8,16,16,16,16,0],x=s(Number(C.currentRoute.value.query?.type)||0),L=s(!0),N=s(!0),R=s(0),w=s([]),B=async()=>{N.value=!0;const a=await n(A[x.value]||-1,I[x.value]||-1,j.value,R.value,50);L.value=a?.more;const e=c(a.artists);w.value=w.value?.concat(e),N.value=!1},D=(a,e)=>{R.value=0,C.push({name:"discover-artists",query:{initial:a,type:e}})},H=()=>{R.value+=50,B()};return g((a=>{"discover-artists"===a.name&&(j.value=a.query?.initial||b[0].key,x.value=Number(a.query?.type)||0,N.value=!0,w.value=[],B())})),l(B),(e,s)=>{const l=_,n=d,c=a;return v(),r("div",q,[t("div",M,[o(n,{class:"initial"},{default:u((()=>[(v(),r(y,null,m(b,((a,e)=>o(l,{key:e,bordered:!1,class:k({choose:a.key==i(j)}),round:"",onClick:e=>D(a.key,i(x))},{default:u((()=>[p(f(a.value),1)])),_:2},1032,["class","onClick"]))),64))])),_:1}),o(n,{class:"category"},{default:u((()=>[(v(),r(y,null,m($,((a,e)=>o(l,{key:a,class:k({choose:e==i(x)}),bordered:!1,round:"",onClick:a=>D(i(j),e)},{default:u((()=>[p(f(a),1)])),_:2},1032,["class","onClick"]))),64))])),_:1})]),o(c,{data:i(w),loading:i(N),loadMore:i(L),onLoadMore:H},null,8,["data","loading","loadMore"])])}}}),[["__scopeId","data-v-30943c0d"]]);export{b as default};
