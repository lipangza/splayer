import{_ as a}from"./ArtistList-DRvsCxLi.js";import{d as e,r as s,o as l,H as r,j as t,J as o,n as u,m as i,aA as n,aB as c,aI as d,k as v,ac as y,a7 as m,a8 as k,ar as p,cL as f,cB as _,K as C}from"./stores-fvLrIm8G.js";import{u as g,o as h}from"./index-CugtlCeX.js";const q={class:"discover-artists"},b={class:"menu"},j=C(e({__name:"artists",setup(e){const C=g(),j=[{key:-1,value:"热门"},...Array.from({length:26},(a,e)=>String.fromCharCode(e+65)).map(a=>({key:a,value:a})),{key:0,value:"#"}],M=s(C.currentRoute.value.query?.initial||j[0].key),$=["全部",...["华语","欧美","日本","韩国"].flatMap(a=>[`${a}`,`${a}男`,`${a}女`,`${a}组合`]),"其他"],A=[-1,-1,1,2,3,-1,1,2,3,-1,1,2,3,-1,1,2,3,-1],L=[-1,7,7,7,7,96,96,96,96,8,8,8,8,16,16,16,16,0],x=s(Number(C.currentRoute.value.query?.type)||0),B=s(!0),I=s(!0),N=s(0),R=s([]),w=async()=>{I.value=!0;const a=await f(A[x.value]||-1,L[x.value]||-1,M.value,N.value,50);B.value=a?.more;const e=_(a.artists);R.value=R.value?.concat(e),I.value=!1},D=(a,e)=>{N.value=0,C.push({name:"discover-artists",query:{initial:a,type:e}})},H=()=>{N.value+=50,w()};return h(a=>{"discover-artists"===a.name&&(M.value=a.query?.initial||j[0].key,x.value=Number(a.query?.type)||0,I.value=!0,R.value=[],w())}),l(w),(e,s)=>{const l=d,f=p,_=a;return t(),r("div",q,[o("div",b,[u(f,{class:"initial"},{default:i(()=>[(t(),r(n,null,c(j,(a,e)=>u(l,{key:e,bordered:!1,class:y({choose:a.key==v(M)}),round:"",onClick:e=>D(a.key,v(x))},{default:i(()=>[m(k(a.value),1)]),_:2},1032,["class","onClick"])),64))]),_:1}),u(f,{class:"category"},{default:i(()=>[(t(),r(n,null,c($,(a,e)=>u(l,{key:a,class:y({choose:e==v(x)}),bordered:!1,round:"",onClick:a=>D(v(M),e)},{default:i(()=>[m(k(a),1)]),_:2},1032,["class","onClick"])),64))]),_:1})]),u(_,{data:v(R),loading:v(I),loadMore:v(B),onLoadMore:H},null,8,["data","loading","loadMore"])])}}}),[["__scopeId","data-v-e80671d0"]]);export{j as default};
