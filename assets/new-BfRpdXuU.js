import{_ as a}from"./SongList-DlSTL_cD.js";import{_ as e}from"./CoverList-ClOCTyga.js";import{d as s,r as u,o as l,H as o,k as t,j as r,af as n,cE as d,cz as c,cN as v,aR as m,ar as i,h as y,aA as f,aB as k,ac as p,m as _,a1 as b,a2 as j,i as w,ae as L,aI as C,K as g}from"./stores-De5JHsxi.js";import{u as q,o as N}from"./index-tqBPJ7OH.js";import"./album-9FZAS1rf.js";const h={class:"discover-new"},A=g(s({__name:"new",setup(s){const g=q(),A=["新碟上架","新歌速递"],R=[{key:"ALL",num:0,value:"全部"},{key:"ZH",num:7,value:"华语"},{key:"EA",num:96,value:"欧美"},{key:"KR",num:16,value:"韩国"},{key:"JP",num:8,value:"日本"}],H=u(Number(g.currentRoute.value.query?.type)||0),M=u(Number(g.currentRoute.value.query?.area)||0),x=u(!0),E=u(!0),I=u(0),K=u([]),S=u([]),z=async()=>{if(E.value=!0,0===H.value){const a=R[M.value]?.key||"ALL",e=await d(a,50,I.value);x.value=e.total>I.value+50;const s=c(e.albums);S.value=S.value.concat(s)}else if(1===H.value){const a=R[M.value]?.num||0,e=await v(a);K.value=m(e.data)}E.value=!1},B=(a,e)=>{g.push({name:"discover-new",query:{type:a,area:e}})},G=()=>{I.value+=50,z()};return N((a=>{"discover-new"===a.name&&(H.value=Number(a.query?.type)||0,M.value=Number(a.query?.area)||0,E.value=!0,I.value=0,K.value=[],S.value=[],z())})),l(z),(s,u)=>{const l=C,d=i,c=e,v=a;return y(),o("div",h,[t(d,{class:"menu",justify:"space-between"},{default:r((()=>[t(d,{class:"type"},{default:r((()=>[(y(),o(f,null,k(A,((a,e)=>t(l,{key:e,class:p({choose:e===_(H)}),bordered:!1,round:"",onClick:a=>B(e,_(M))},{default:r((()=>[b(j(a),1)])),_:2},1032,["class","onClick"]))),64))])),_:1}),t(d,{class:"area"},{default:r((()=>[(y(),o(f,null,k(R,((a,e)=>t(l,{key:e,class:p({choose:e===_(M)}),bordered:!1,round:"",onClick:a=>B(_(H),e)},{default:r((()=>[b(j(a.value),1)])),_:2},1032,["class","onClick"]))),64))])),_:1})])),_:1}),t(n,{name:"fade",mode:"out-in"},{default:r((()=>[0===_(H)?(y(),w(c,{key:0,data:_(S),loading:_(E),loadMore:_(x),onLoadMore:G,type:"album"},null,8,["data","loading","loadMore"])):1===_(H)?(y(),w(v,{key:1,data:_(K),loading:_(E),disabledSort:""},null,8,["data","loading"])):L("",!0)])),_:1})])}}}),[["__scopeId","data-v-4f583412"]]);export{A as default};
