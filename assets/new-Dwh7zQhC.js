import{_ as a}from"./SongList-CDQnjgGa.js";import{_ as e}from"./CoverList-CGbqqvd5.js";import{d as s,r as u,o as l,H as o,j as t,n as r,m as n,ar as d,aA as c,aB as v,aI as m,k as i,ac as y,a7 as f,a8 as k,i as p,af as b,ae as _,cD as j,cy as w,cM as L,aR as C,K as g}from"./stores-fvLrIm8G.js";import{u as q,o as A}from"./index-CugtlCeX.js";import"./album-DzRjhu8w.js";const M={class:"discover-new"},N=g(s({__name:"new",setup(s){const g=q(),N=["新碟上架","新歌速递"],R=[{key:"ALL",num:0,value:"全部"},{key:"ZH",num:7,value:"华语"},{key:"EA",num:96,value:"欧美"},{key:"KR",num:16,value:"韩国"},{key:"JP",num:8,value:"日本"}],h=u(Number(g.currentRoute.value.query?.type)||0),H=u(Number(g.currentRoute.value.query?.area)||0),x=u(!0),I=u(!0),K=u(0),S=u([]),B=u([]),D=async()=>{if(I.value=!0,0===h.value){const a=R[H.value]?.key||"ALL",e=await j(a,50,K.value);x.value=e.total>K.value+50;const s=w(e.albums);B.value=B.value.concat(s)}else if(1===h.value){const a=R[H.value]?.num||0,e=await L(a);S.value=C(e.data)}I.value=!1},E=(a,e)=>{g.push({name:"discover-new",query:{type:a,area:e}})},G=()=>{K.value+=50,D()};return A(a=>{"discover-new"===a.name&&(h.value=Number(a.query?.type)||0,H.value=Number(a.query?.area)||0,I.value=!0,K.value=0,S.value=[],B.value=[],D())}),l(D),(s,u)=>{const l=m,j=d,w=e,L=a;return t(),o("div",M,[r(j,{class:"menu",justify:"space-between"},{default:n(()=>[r(j,{class:"type"},{default:n(()=>[(t(),o(c,null,v(N,(a,e)=>r(l,{key:e,class:y({choose:e===i(h)}),bordered:!1,round:"",onClick:a=>E(e,i(H))},{default:n(()=>[f(k(a),1)]),_:2},1032,["class","onClick"])),64))]),_:1}),r(j,{class:"area"},{default:n(()=>[(t(),o(c,null,v(R,(a,e)=>r(l,{key:e,class:y({choose:e===i(H)}),bordered:!1,round:"",onClick:a=>E(i(h),e)},{default:n(()=>[f(k(a.value),1)]),_:2},1032,["class","onClick"])),64))]),_:1})]),_:1}),r(_,{name:"fade",mode:"out-in"},{default:n(()=>[0===i(h)?(t(),p(w,{key:0,data:i(B),loading:i(I),loadMore:i(x),onLoadMore:G,type:"album"},null,8,["data","loading","loadMore"])):1===i(h)?(t(),p(L,{key:1,data:i(S),loading:i(I),disabledSort:""},null,8,["data","loading"])):b("",!0)]),_:1})])}}}),[["__scopeId","data-v-cbe4dc65"]]);export{N as default};
