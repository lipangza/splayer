import{R as e,S as a,r as s,z as u,j as t,M as l,N as r,Q as o,U as n,W as m,X as i,as as p,at as v}from"./index-6137d952.js";import{D as g}from"./DataLists-f17a2567.js";import{P as c}from"./index-3e7b80bc.js";import"./SmallSongData-fb959cbc.js";import"./InputNumber-5ee1c32b.js";import"./Add-a573bbfb.js";import"./FormItem-6e5a0af4.js";import"./ListAdd-05d5d0d1.js";import"./LinkTwo-053d5333.js";import"./PlayOne-8b2c271b.js";import"./Select-3d3bcb8f.js";const d={class:"songs"},y={__name:"songs",setup(y){const{t:j}=e(),f=a(),h=s(f.currentRoute.value.query.keywords),q=s([]),b=s(0),N=s(30),R=s(f.currentRoute.value.query.page?Number(f.currentRoute.value.query.page):1),S=(e,a=30,s=0,u=1)=>{p(e,a,s,u).then((e=>{e.result.songs?(b.value=e.result.songCount,q.value=[],e.result.songs.forEach(((e,a)=>{q.value.push({id:e.id,num:a+1+(R.value-1)*N.value,name:e.name,artist:e.ar,album:e.al,alia:e.alia,time:v(e.dt),fee:e.fee,pc:e.pc?e.pc:null,mv:e.mv?e.mv:null})}))):$message.error(j("general.message.acquisitionFailed")),"undefined"!=typeof $scrollToTop&&$scrollToTop()}))};u((()=>f.currentRoute.value),(e=>{h.value=e.query.keywords,R.value=Number(e.query.page?e.query.page:1),"s-songs"==e.name&&S(h.value,N.value,R.value?(R.value-1)*N.value:0)}));const T=e=>{N.value=e,S(h.value,e,(R.value-1)*N.value)},k=e=>{f.push({path:"/search/songs",query:{keywords:h.value,page:e}})};return t((()=>{S(h.value,N.value,(R.value-1)*N.value)})),(e,a)=>(l(),r("div",d,[o(g,{listData:n(q)},null,8,["listData"]),n(q)[0]?(l(),m(c,{key:0,pageNumber:n(R),totalCount:n(b),onPageSizeChange:T,onPageNumberChange:k},null,8,["pageNumber","totalCount"])):i("",!0)]))}};export{y as default};
