import{_ as a}from"./Pagination-D96eRF_4.js";import{_ as e}from"./SongList-DPr6dAOg.js";import{a7 as s,r as t,w as o,e as r,g as n,G as u,k as i,j as l,T as m,n as g,i as p,L as d,a0 as c}from"./vendor-QWMq--4w.js";import{a as v,C as y,q as f}from"./index-B903CxKP.js";import{c as j}from"./artist-DtP8xNm-.js";const S={class:"artist-songs"},h={key:0,class:"list"},q={__name:"songs",setup(q){const w=s(),z=v(),b=t(w.currentRoute.value.query.id),N=t(null),_=t(0),k=t(Number(w.currentRoute.value.query?.page)||1),C=async(a,e=z.loadSize,s=0)=>{try{const t=await j(a,e,s);if(_.value=t.total,0===_.value)return N.value="empty";const o=t.songs.map((a=>a.id)).join(","),r=await y(o);N.value=f(r.songs,"song")}catch(t){console.error("获取歌手全部歌曲失败：",t)}},R=a=>{w.push({path:"/artist/songs",query:{id:b.value,page:a}})};return o((()=>w.currentRoute.value),(async a=>{"ar-songs"===a.name&&(b.value=a.query.id,k.value=Number(a.query?.page)||1,await C(b.value,z.loadSize,(k.value-1)*z.loadSize))})),r((async()=>{await C(b.value,z.loadSize,(k.value-1)*z.loadSize)})),(s,t)=>{const o=e,r=a,v=c;return n(),u("div",S,[i(m,{name:"fade",mode:"out-in"},{default:l((()=>["empty"!==g(N)?(n(),u("div",h,[i(o,{data:g(N),showPagination:!1},null,8,["data"]),g(N)?.length?(n(),p(r,{key:0,totalCount:g(_),pageNumber:g(k),onPageNumberChange:R},null,8,["totalCount","pageNumber"])):d("",!0)])):(n(),p(v,{key:1,description:"当前歌手暂无歌曲",class:"tip",style:{"margin-top":"60px"},size:"large"}))])),_:1})])}}};export{q as default};
