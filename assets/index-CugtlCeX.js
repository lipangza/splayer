const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-DivaB3dl.js","./stores-fvLrIm8G.js","./stores-CYdk786L.css","./CoverList-CGbqqvd5.js","./album-DzRjhu8w.js","./CoverList-Dl5vh3-U.css","./ArtistList-DRvsCxLi.js","./ArtistList-Cr62KWYz.css","./SongListCard-ComNNw_n.js","./SongListCard-0xdBUHDt.css","./video-BhcaJg-R.js","./index-CvpQlUp5.css","./layout-y54zT348.js","./layout-CZmiOaaq.css","./songs-CEQwoq9V.js","./SongList-CDQnjgGa.js","./SongList-DWjZC0II.css","./playlists-DlwLdJ7G.js","./artists-DmIXm_d8.js","./albums-SKFwRxG1.js","./videos-BiLnAlfy.js","./radios-CzHhnbtc.js","./layout-CaVeMPlC.js","./layout-Du1kwysL.css","./playlists-_DCDfctH.js","./playlists-CQhDBZLn.css","./toplists-BSLoCNHH.js","./toplists-BlsNw6kv.css","./artists-Cx4x_0Ak.js","./artists-B8o4lsby.css","./new-Dwh7zQhC.js","./new-yP2z3G9z.css","./layout-Dd1J43KE.js","./layout-D31BT59I.css","./songs-TBjFoxnP.js","./albums-DPJ3_IWr.js","./videos-DyJWLoMe.js","./Video-CLNCoIuN.js","./Video-CDFC38fR.css","./album-bq95-lJo.js","./album-CFl6FCkE.css","./playlist-Fm8y-zEF.js","./playlist-VCeJjZzS.css","./radio-BRF0p2hH.js","./radio-B_CpsIqZ.css","./hot-Xhx6-q8f.js","./hot-CaMRVmCo.css","./type-eXN3-asR.js","./type-DCSca4rZ.css","./liked-BUFm5JTn.js","./liked-U6iIPBsa.css","./Cloud-B2_Lqfud.js","./Cloud-BEAguK2B.css","./DailySongs-DWWK4bqF.js","./DailySongs-DnIveWjO.css","./layout-SgEYO6WK.js","./layout-BRvY9zg4.css","./playlists-C-H0Yzzx.js","./playlists-BTD6cnLq.css","./albums-BXDeEQRZ.js","./artists-0AzMz_fL.js","./videos-BpBKpLT9.js","./radios-50BeT3Ff.js","./layout-CGgJHSD_.js","./layout-h6dgojs5.css","./song-ddsaSMfo.js","./artists-CuLfuMpc.js","./artists-CbYQVoTW.css","./albums-DmVugSIr.js","./albums-BDNNM_LG.css","./History-DXKAaL77.js","./History-nejHqrg6.css","./403-Dmr38sKn.js","./404-Bljx37bK.js","./500-C1HTmq2U.js"])))=>i.map(i=>d[i]);
import{c as e,a as t,u as r,d as n,b as i,e as a,r as s,f as o,g as l,w as u,h as c,o as d,i as h,j as f,_ as p,k as m,l as y,z as g,m as _,n as v,p as b,q as w,N as x,s as I,t as T,v as E,x as A,y as S,A as k,B as C,C as P,D as R,E as M,F as L,G as O,H as F,I as D,J as N,K as B,L as U,M as j,O as G,P as z,Q as H,R as V,S as $,T as X,U as q,V as W,W as Y,X as K,Y as Z,Z as Q,$ as J,a0 as ee,a1 as te,a2 as re,a3 as ne,a4 as ie,a5 as ae,a6 as se,a7 as oe,a8 as le,a9 as ue,aa as ce,ab as de,ac as he,ad as fe,ae as pe,af as me,ag as ye,ah as ge,ai as _e,aj as ve,ak as be,al as we,am as xe,an as Ie,ao as Te,ap as Ee,aq as Ae,ar as Se,as as ke,at as Ce,au as Pe,av as Re,aw as Me,ax as Le,ay as Oe,az as Fe,aA as De,aB as Ne,aC as Be,aD as Ue,aE as je,aF as Ge,aG as ze,aH as He,aI as Ve,aJ as $e,aK as Xe,aL as qe,aM as We,aN as Ye,aO as Ke,aP as Ze,aQ as Qe,aR as Je,aS as et,aT as tt,aU as rt,aV as nt,aW as it,aX as at,aY as st,aZ as ot,a_ as lt,a$ as ut,b0 as ct,b1 as dt,b2 as ht,b3 as ft,b4 as pt,b5 as mt,b6 as yt,b7 as gt,b8 as _t,b9 as vt,ba as bt,bb as wt,bc as xt,bd as It,be as Tt,bf as Et,bg as At,bh as St,bi as kt,bj as Ct,bk as Pt,bl as Rt,bm as Mt,bn as Lt,bo as Ot,bp as Ft,bq as Dt,br as Nt,bs as Bt,bt as Ut,bu as jt,bv as Gt,bw as zt,bx as Ht,by as Vt,bz as $t,bA as Xt,bB as qt,bC as Wt,bD as Yt,bE as Kt,bF as Zt,bG as Qt,bH as Jt,bI as er,bJ as tr,bK as rr,bL as nr,bM as ir,bN as ar,bO as sr,bP as or,bQ as lr,bR as ur,bS as cr,bT as dr,bU as hr,bV as fr,bW as pr,bX as mr,bY as yr,bZ as gr,b_ as _r,b$ as vr,c0 as br,c1 as wr,c2 as xr,c3 as Ir,c4 as Tr,c5 as Er,c6 as Ar,c7 as Sr,c8 as kr,c9 as Cr,ca as Pr,cb as Rr,cc as Mr,cd as Lr,ce as Or,cf as Fr,cg as Dr,ch as Nr,ci as Br,cj as Ur,ck as jr,cl as Gr,cm as zr,cn as Hr,co as Vr,cp as $r,cq as Xr,cr as qr,cs as Wr,ct as Yr,cu as Kr,cv as Zr}from"./stores-fvLrIm8G.js";
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(e){return e<0?-1:0===e?0:1}function Jr(e,t,r){return(1-r)*e+r*t}function en(e,t,r){return r<e?e:r>t?t:r}function tn(e){return(e%=360)<0&&(e+=360),e}function rn(e){return(e%=360)<0&&(e+=360),e}function nn(e,t){return 180-Math.abs(Math.abs(e-t)-180)}function an(e,t){return[e[0]*t[0][0]+e[1]*t[0][1]+e[2]*t[0][2],e[0]*t[1][0]+e[1]*t[1][1]+e[2]*t[1][2],e[0]*t[2][0]+e[1]*t[2][1]+e[2]*t[2][2]]}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn=[[.41233895,.35762064,.18051042],[.2126,.7152,.0722],[.01932141,.11916382,.95034478]],on=[[3.2413774792388685,-1.5376652402851851,-.49885366846268053],[-.9691452513005321,1.8758853451067872,.04156585616912061],[.05562093689691305,-.20395524564742123,1.0571799111220335]],ln=[95.047,100,108.883];function un(e,t,r){return(255<<24|(255&e)<<16|(255&t)<<8|255&r)>>>0}function cn(e){return un(bn(e[0]),bn(e[1]),bn(e[2]))}function dn(e){return e>>24&255}function hn(e){return e>>16&255}function fn(e){return e>>8&255}function pn(e){return 255&e}function mn(e,t,r){const n=on,i=n[0][0]*e+n[0][1]*t+n[0][2]*r,a=n[1][0]*e+n[1][1]*t+n[1][2]*r,s=n[2][0]*e+n[2][1]*t+n[2][2]*r;return un(bn(i),bn(a),bn(s))}function yn(e){const t=function(e){return an([vn(hn(e)),vn(fn(e)),vn(pn(e))],sn)}(e)[1];return 116*wn(t/100)-16}function gn(e){return 100*xn((e+16)/116)}function _n(e){return 116*wn(e/100)-16}function vn(e){const t=e/255;return t<=.040449936?t/12.92*100:100*Math.pow((t+.055)/1.055,2.4)}function bn(e){const t=e/100;let r=0;return r=t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,n=0,i=255,(a=Math.round(255*r))<n?n:a>i?i:a;var n,i,a}function wn(e){const t=24389/27;return e>216/24389?Math.pow(e,1/3):(t*e+16)/116}function xn(e){const t=e*e*e;return t>216/24389?t:(116*e-16)/(24389/27)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let In=class e{static make(t=function(){return ln}(),r=200/Math.PI*gn(50)/100,n=50,i=2,a=!1){const s=t,o=.401288*s[0]+.650173*s[1]+-.051461*s[2],l=-.250268*s[0]+1.204414*s[1]+.045854*s[2],u=-.002079*s[0]+.048952*s[1]+.953127*s[2],c=.8+i/10,d=c>=.9?Jr(.59,.69,10*(c-.9)):Jr(.525,.59,10*(c-.8));let h=a?1:c*(1-1/3.6*Math.exp((-r-42)/92));h=h>1?1:h<0?0:h;const f=c,p=[h*(100/o)+1-h,h*(100/l)+1-h,h*(100/u)+1-h],m=1/(5*r+1),y=m*m*m*m,g=1-y,_=y*r+.1*g*g*Math.cbrt(5*r),v=gn(n)/t[1],b=1.48+Math.sqrt(v),w=.725/Math.pow(v,.2),x=w,I=[Math.pow(_*p[0]*o/100,.42),Math.pow(_*p[1]*l/100,.42),Math.pow(_*p[2]*u/100,.42)],T=[400*I[0]/(I[0]+27.13),400*I[1]/(I[1]+27.13),400*I[2]/(I[2]+27.13)];return new e(v,(2*T[0]+T[1]+.05*T[2])*w,w,x,d,f,p,_,Math.pow(_,.25),b)}constructor(e,t,r,n,i,a,s,o,l,u){this.n=e,this.aw=t,this.nbb=r,this.ncb=n,this.c=i,this.nc=a,this.rgbD=s,this.fl=o,this.fLRoot=l,this.z=u}};In.DEFAULT=In.make();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Tn=class e{constructor(e,t,r,n,i,a,s,o,l){this.hue=e,this.chroma=t,this.j=r,this.q=n,this.m=i,this.s=a,this.jstar=s,this.astar=o,this.bstar=l}distance(e){const t=this.jstar-e.jstar,r=this.astar-e.astar,n=this.bstar-e.bstar,i=Math.sqrt(t*t+r*r+n*n);return 1.41*Math.pow(i,.63)}static fromInt(t){return e.fromIntInViewingConditions(t,In.DEFAULT)}static fromIntInViewingConditions(t,r){const n=(65280&t)>>8,i=255&t,a=vn((16711680&t)>>16),s=vn(n),o=vn(i),l=.41233895*a+.35762064*s+.18051042*o,u=.2126*a+.7152*s+.0722*o,c=.01932141*a+.11916382*s+.95034478*o,d=.401288*l+.650173*u-.051461*c,h=-.250268*l+1.204414*u+.045854*c,f=-.002079*l+.048952*u+.953127*c,p=r.rgbD[0]*d,m=r.rgbD[1]*h,y=r.rgbD[2]*f,g=Math.pow(r.fl*Math.abs(p)/100,.42),_=Math.pow(r.fl*Math.abs(m)/100,.42),v=Math.pow(r.fl*Math.abs(y)/100,.42),b=400*Qr(p)*g/(g+27.13),w=400*Qr(m)*_/(_+27.13),x=400*Qr(y)*v/(v+27.13),I=(11*b+-12*w+x)/11,T=(b+w-2*x)/9,E=(20*b+20*w+21*x)/20,A=(40*b+20*w+x)/20,S=180*Math.atan2(T,I)/Math.PI,k=S<0?S+360:S>=360?S-360:S,C=k*Math.PI/180,P=A*r.nbb,R=100*Math.pow(P/r.aw,r.c*r.z),M=4/r.c*Math.sqrt(R/100)*(r.aw+4)*r.fLRoot,L=k<20.14?k+360:k,O=5e4/13*(.25*(Math.cos(L*Math.PI/180+2)+3.8))*r.nc*r.ncb*Math.sqrt(I*I+T*T)/(E+.305),F=Math.pow(O,.9)*Math.pow(1.64-Math.pow(.29,r.n),.73),D=F*Math.sqrt(R/100),N=D*r.fLRoot,B=50*Math.sqrt(F*r.c/(r.aw+4)),U=(1+100*.007)*R/(1+.007*R),j=1/.0228*Math.log(1+.0228*N),G=j*Math.cos(C),z=j*Math.sin(C);return new e(k,D,R,M,N,B,U,G,z)}static fromJch(t,r,n){return e.fromJchInViewingConditions(t,r,n,In.DEFAULT)}static fromJchInViewingConditions(t,r,n,i){const a=4/i.c*Math.sqrt(t/100)*(i.aw+4)*i.fLRoot,s=r*i.fLRoot,o=r/Math.sqrt(t/100),l=50*Math.sqrt(o*i.c/(i.aw+4)),u=n*Math.PI/180,c=(1+100*.007)*t/(1+.007*t),d=1/.0228*Math.log(1+.0228*s),h=d*Math.cos(u),f=d*Math.sin(u);return new e(n,r,t,a,s,l,c,h,f)}static fromUcs(t,r,n){return e.fromUcsInViewingConditions(t,r,n,In.DEFAULT)}static fromUcsInViewingConditions(t,r,n,i){const a=r,s=n,o=Math.sqrt(a*a+s*s),l=(Math.exp(.0228*o)-1)/.0228/i.fLRoot;let u=Math.atan2(s,a)*(180/Math.PI);u<0&&(u+=360);const c=t/(1-.007*(t-100));return e.fromJchInViewingConditions(c,l,u,i)}toInt(){return this.viewed(In.DEFAULT)}viewed(e){const t=0===this.chroma||0===this.j?0:this.chroma/Math.sqrt(this.j/100),r=Math.pow(t/Math.pow(1.64-Math.pow(.29,e.n),.73),1/.9),n=this.hue*Math.PI/180,i=.25*(Math.cos(n+2)+3.8),a=e.aw*Math.pow(this.j/100,1/e.c/e.z),s=i*(5e4/13)*e.nc*e.ncb,o=a/e.nbb,l=Math.sin(n),u=Math.cos(n),c=23*(o+.305)*r/(23*s+11*r*u+108*r*l),d=c*u,h=c*l,f=(460*o+451*d+288*h)/1403,p=(460*o-891*d-261*h)/1403,m=(460*o-220*d-6300*h)/1403,y=Math.max(0,27.13*Math.abs(f)/(400-Math.abs(f))),g=Qr(f)*(100/e.fl)*Math.pow(y,1/.42),_=Math.max(0,27.13*Math.abs(p)/(400-Math.abs(p))),v=Qr(p)*(100/e.fl)*Math.pow(_,1/.42),b=Math.max(0,27.13*Math.abs(m)/(400-Math.abs(m))),w=Qr(m)*(100/e.fl)*Math.pow(b,1/.42),x=g/e.rgbD[0],I=v/e.rgbD[1],T=w/e.rgbD[2];return mn(1.86206786*x-1.01125463*I+.14918677*T,.38752654*x+.62144744*I-.00897398*T,-.0158415*x-.03412294*I+1.04996444*T)}static fromXyzInViewingConditions(t,r,n,i){const a=.401288*t+.650173*r-.051461*n,s=-.250268*t+1.204414*r+.045854*n,o=-.002079*t+.048952*r+.953127*n,l=i.rgbD[0]*a,u=i.rgbD[1]*s,c=i.rgbD[2]*o,d=Math.pow(i.fl*Math.abs(l)/100,.42),h=Math.pow(i.fl*Math.abs(u)/100,.42),f=Math.pow(i.fl*Math.abs(c)/100,.42),p=400*Qr(l)*d/(d+27.13),m=400*Qr(u)*h/(h+27.13),y=400*Qr(c)*f/(f+27.13),g=(11*p+-12*m+y)/11,_=(p+m-2*y)/9,v=(20*p+20*m+21*y)/20,b=(40*p+20*m+y)/20,w=180*Math.atan2(_,g)/Math.PI,x=w<0?w+360:w>=360?w-360:w,I=x*Math.PI/180,T=b*i.nbb,E=100*Math.pow(T/i.aw,i.c*i.z),A=4/i.c*Math.sqrt(E/100)*(i.aw+4)*i.fLRoot,S=x<20.14?x+360:x,k=5e4/13*(1/4*(Math.cos(S*Math.PI/180+2)+3.8))*i.nc*i.ncb*Math.sqrt(g*g+_*_)/(v+.305),C=Math.pow(k,.9)*Math.pow(1.64-Math.pow(.29,i.n),.73),P=C*Math.sqrt(E/100),R=P*i.fLRoot,M=50*Math.sqrt(C*i.c/(i.aw+4)),L=(1+100*.007)*E/(1+.007*E),O=Math.log(1+.0228*R)/.0228,F=O*Math.cos(I),D=O*Math.sin(I);return new e(x,P,E,A,R,M,L,F,D)}xyzInViewingConditions(e){const t=0===this.chroma||0===this.j?0:this.chroma/Math.sqrt(this.j/100),r=Math.pow(t/Math.pow(1.64-Math.pow(.29,e.n),.73),1/.9),n=this.hue*Math.PI/180,i=.25*(Math.cos(n+2)+3.8),a=e.aw*Math.pow(this.j/100,1/e.c/e.z),s=i*(5e4/13)*e.nc*e.ncb,o=a/e.nbb,l=Math.sin(n),u=Math.cos(n),c=23*(o+.305)*r/(23*s+11*r*u+108*r*l),d=c*u,h=c*l,f=(460*o+451*d+288*h)/1403,p=(460*o-891*d-261*h)/1403,m=(460*o-220*d-6300*h)/1403,y=Math.max(0,27.13*Math.abs(f)/(400-Math.abs(f))),g=Qr(f)*(100/e.fl)*Math.pow(y,1/.42),_=Math.max(0,27.13*Math.abs(p)/(400-Math.abs(p))),v=Qr(p)*(100/e.fl)*Math.pow(_,1/.42),b=Math.max(0,27.13*Math.abs(m)/(400-Math.abs(m))),w=Qr(m)*(100/e.fl)*Math.pow(b,1/.42),x=g/e.rgbD[0],I=v/e.rgbD[1],T=w/e.rgbD[2];return[1.86206786*x-1.01125463*I+.14918677*T,.38752654*x+.62144744*I-.00897398*T,-.0158415*x-.03412294*I+1.04996444*T]}},En=class e{static sanitizeRadians(e){return(e+8*Math.PI)%(2*Math.PI)}static trueDelinearized(e){const t=e/100;let r=0;return r=t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,255*r}static chromaticAdaptation(e){const t=Math.pow(Math.abs(e),.42);return 400*Qr(e)*t/(t+27.13)}static hueOf(t){const r=an(t,e.SCALED_DISCOUNT_FROM_LINRGB),n=e.chromaticAdaptation(r[0]),i=e.chromaticAdaptation(r[1]),a=e.chromaticAdaptation(r[2]),s=(11*n+-12*i+a)/11,o=(n+i-2*a)/9;return Math.atan2(o,s)}static areInCyclicOrder(t,r,n){return e.sanitizeRadians(r-t)<e.sanitizeRadians(n-t)}static intercept(e,t,r){return(t-e)/(r-e)}static lerpPoint(e,t,r){return[e[0]+(r[0]-e[0])*t,e[1]+(r[1]-e[1])*t,e[2]+(r[2]-e[2])*t]}static setCoordinate(t,r,n,i){const a=e.intercept(t[i],r,n[i]);return e.lerpPoint(t,a,n)}static isBounded(e){return 0<=e&&e<=100}static nthVertex(t,r){const n=e.Y_FROM_LINRGB[0],i=e.Y_FROM_LINRGB[1],a=e.Y_FROM_LINRGB[2],s=r%4<=1?0:100,o=r%2==0?0:100;if(r<4){const r=s,l=o,u=(t-r*i-l*a)/n;return e.isBounded(u)?[u,r,l]:[-1,-1,-1]}if(r<8){const r=s,l=o,u=(t-l*n-r*a)/i;return e.isBounded(u)?[l,u,r]:[-1,-1,-1]}{const r=s,l=o,u=(t-r*n-l*i)/a;return e.isBounded(u)?[r,l,u]:[-1,-1,-1]}}static bisectToSegment(t,r){let n=[-1,-1,-1],i=n,a=0,s=0,o=!1,l=!0;for(let u=0;u<12;u++){const c=e.nthVertex(t,u);if(c[0]<0)continue;const d=e.hueOf(c);o?(l||e.areInCyclicOrder(a,d,s))&&(l=!1,e.areInCyclicOrder(a,r,d)?(i=c,s=d):(n=c,a=d)):(n=c,i=c,a=d,s=d,o=!0)}return[n,i]}static midpoint(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2,(e[2]+t[2])/2]}static criticalPlaneBelow(e){return Math.floor(e-.5)}static criticalPlaneAbove(e){return Math.ceil(e-.5)}static bisectToLimit(t,r){const n=e.bisectToSegment(t,r);let i=n[0],a=e.hueOf(i),s=n[1];for(let o=0;o<3;o++)if(i[o]!==s[o]){let t=-1,n=255;i[o]<s[o]?(t=e.criticalPlaneBelow(e.trueDelinearized(i[o])),n=e.criticalPlaneAbove(e.trueDelinearized(s[o]))):(t=e.criticalPlaneAbove(e.trueDelinearized(i[o])),n=e.criticalPlaneBelow(e.trueDelinearized(s[o])));for(let l=0;l<8&&!(Math.abs(n-t)<=1);l++){const l=Math.floor((t+n)/2),u=e.CRITICAL_PLANES[l],c=e.setCoordinate(i,u,s,o),d=e.hueOf(c);e.areInCyclicOrder(a,r,d)?(s=c,n=l):(i=c,a=d,t=l)}}return e.midpoint(i,s)}static inverseChromaticAdaptation(e){const t=Math.abs(e),r=Math.max(0,27.13*t/(400-t));return Qr(e)*Math.pow(r,1/.42)}static findResultByJ(t,r,n){let i=11*Math.sqrt(n);const a=In.DEFAULT,s=1/Math.pow(1.64-Math.pow(.29,a.n),.73),o=.25*(Math.cos(t+2)+3.8)*(5e4/13)*a.nc*a.ncb,l=Math.sin(t),u=Math.cos(t);for(let c=0;c<5;c++){const t=i/100,d=0===r||0===i?0:r/Math.sqrt(t),h=Math.pow(d*s,1/.9),f=a.aw*Math.pow(t,1/a.c/a.z)/a.nbb,p=23*(f+.305)*h/(23*o+11*h*u+108*h*l),m=p*u,y=p*l,g=(460*f+451*m+288*y)/1403,_=(460*f-891*m-261*y)/1403,v=(460*f-220*m-6300*y)/1403,b=an([e.inverseChromaticAdaptation(g),e.inverseChromaticAdaptation(_),e.inverseChromaticAdaptation(v)],e.LINRGB_FROM_SCALED_DISCOUNT);if(b[0]<0||b[1]<0||b[2]<0)return 0;const w=e.Y_FROM_LINRGB[0],x=e.Y_FROM_LINRGB[1],I=e.Y_FROM_LINRGB[2],T=w*b[0]+x*b[1]+I*b[2];if(T<=0)return 0;if(4===c||Math.abs(T-n)<.002)return b[0]>100.01||b[1]>100.01||b[2]>100.01?0:cn(b);i-=(T-n)*i/(2*T)}return 0}static solveToInt(t,r,n){if(r<1e-4||n<1e-4||n>99.9999)return function(e){const t=bn(gn(e));return un(t,t,t)}(n);const i=(t=rn(t))/180*Math.PI,a=gn(n),s=e.findResultByJ(i,r,a);if(0!==s)return s;return cn(e.bisectToLimit(a,i))}static solveToCam(t,r,n){return Tn.fromInt(e.solveToInt(t,r,n))}};
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En.SCALED_DISCOUNT_FROM_LINRGB=[[.001200833568784504,.002389694492170889,.0002795742885861124],[.0005891086651375999,.0029785502573438758,.0003270666104008398],[.00010146692491640572,.0005364214359186694,.0032979401770712076]],En.LINRGB_FROM_SCALED_DISCOUNT=[[1373.2198709594231,-1100.4251190754821,-7.278681089101213],[-271.815969077903,559.6580465940733,-32.46047482791194],[1.9622899599665666,-57.173814538844006,308.7233197812385]],En.Y_FROM_LINRGB=[.2126,.7152,.0722],En.CRITICAL_PLANES=[.015176349177441876,.045529047532325624,.07588174588720938,.10623444424209313,.13658714259697685,.16693984095186062,.19729253930674434,.2276452376616281,.2579979360165119,.28835063437139563,.3188300904430532,.350925934958123,.3848314933096426,.42057480301049466,.458183274052838,.4976837250274023,.5391024159806381,.5824650784040898,.6277969426914107,.6751227633498623,.7244668422128921,.775853049866786,.829304845476233,.8848452951698498,.942497089126609,1.0022825574869039,1.0642236851973577,1.1283421258858297,1.1946592148522128,1.2631959812511864,1.3339731595349034,1.407011200216447,1.4823302800086415,1.5599503113873272,1.6398909516233677,1.7221716113234105,1.8068114625156377,1.8938294463134073,1.9832442801866852,2.075074464868551,2.1693382909216234,2.2660538449872063,2.36523901573795,2.4669114995532007,2.5710888059345764,2.6777882626779785,2.7870270208169257,2.898822059350997,3.0131901897720907,3.1301480604002863,3.2497121605402226,3.3718988244681087,3.4967242352587946,3.624204428461639,3.754355295633311,3.887192587735158,4.022731918402185,4.160988767090289,4.301978482107941,4.445716283538092,4.592217266055746,4.741496401646282,4.893568542229298,5.048448422192488,5.20615066083972,5.3666897647573375,5.5300801301023865,5.696336044816294,5.865471690767354,6.037501145825082,6.212438385869475,6.390297286737924,6.571091626112461,6.7548350853498045,6.941541251256611,7.131223617812143,7.323895587840543,7.5195704746346665,7.7182615035334345,7.919981813454504,8.124744458384042,8.332562408825165,8.543448553206703,8.757415699253682,8.974476575321063,9.194643831691977,9.417930041841839,9.644347703669503,9.873909240696694,10.106627003236781,10.342513269534024,10.58158024687427,10.8238400726681,11.069304815507364,11.317986476196008,11.569896988756009,11.825048221409341,12.083451977536606,12.345119996613247,12.610063955123938,12.878295467455942,13.149826086772048,13.42466730586372,13.702830557985108,13.984327217668513,14.269168601521828,14.55736596900856,14.848930523210871,15.143873411576273,15.44220572664832,15.743938506781891,16.04908273684337,16.35764934889634,16.66964922287304,16.985093187232053,17.30399201960269,17.62635644741625,17.95219714852476,18.281524751807332,18.614349837764564,18.95068293910138,19.290534541298456,19.633915083172692,19.98083495742689,20.331304511189067,20.685334046541502,21.042933821039977,21.404114048223256,21.76888489811322,22.137256497705877,22.50923893145328,22.884842241736916,23.264076429332462,23.6469514538663,24.033477234264016,24.42366364919083,24.817520537484558,25.21505769858089,25.61628489293138,26.021211842414342,26.429848230738664,26.842203703840827,27.258287870275353,27.678110301598522,28.10168053274597,28.529008062403893,28.96010235337422,29.39497283293396,29.83362889318845,30.276079891419332,30.722335150426627,31.172403958865512,31.62629557157785,32.08401920991837,32.54558406207592,33.010999283389665,33.4802739966603,33.953417292456834,34.430438229418264,34.911345834551085,35.39614910352207,35.88485700094671,36.37747846067349,36.87402238606382,37.37449765026789,37.87891309649659,38.38727753828926,38.89959975977785,39.41588851594697,39.93615253289054,40.460400508064545,40.98864111053629,41.520882981230194,42.05713473317016,42.597404951718396,43.141702194811224,43.6900349931913,44.24241185063697,44.798841244188324,45.35933162437017,45.92389141541209,46.49252901546552,47.065252796817916,47.64207110610409,48.22299226451468,48.808024568002054,49.3971762874833,49.9904556690408,50.587870934119984,51.189430279724725,51.79514187861014,52.40501387947288,53.0190544071392,53.637271562750364,54.259673423945976,54.88626804504493,55.517063457223934,56.15206766869424,56.79128866487574,57.43473440856916,58.08241284012621,58.734331877617365,59.39049941699807,60.05092333227251,60.715611475655585,61.38457167773311,62.057811747619894,62.7353394731159,63.417162620860914,64.10328893648692,64.79372614476921,65.48848194977529,66.18756403501224,66.89098006357258,67.59873767827808,68.31084450182222,69.02730813691093,69.74813616640164,70.47333615344107,71.20291564160104,71.93688215501312,72.67524319850172,73.41800625771542,74.16517879925733,74.9167682708136,75.67278210128072,76.43322770089146,77.1981124613393,77.96744375590167,78.74122893956174,79.51947534912904,80.30219030335869,81.08938110306934,81.88105503125999,82.67721935322541,83.4778813166706,84.28304815182372,85.09272707154808,85.90692527145302,86.72564993000343,87.54890820862819,88.3767072518277,89.2090541872801,90.04595612594655,90.88742016217518,91.73345337380438,92.58406282226491,93.43925555268066,94.29903859396902,95.16341895893969,96.03240364439274,96.9059996312159,97.78421388448044,98.6670533535366,99.55452497210776];
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let An=class e{static from(t,r,n){return new e(En.solveToInt(t,r,n))}static fromInt(t){return new e(t)}toInt(){return this.argb}get hue(){return this.internalHue}set hue(e){this.setInternalState(En.solveToInt(e,this.internalChroma,this.internalTone))}get chroma(){return this.internalChroma}set chroma(e){this.setInternalState(En.solveToInt(this.internalHue,e,this.internalTone))}get tone(){return this.internalTone}set tone(e){this.setInternalState(En.solveToInt(this.internalHue,this.internalChroma,e))}constructor(e){this.argb=e;const t=Tn.fromInt(e);this.internalHue=t.hue,this.internalChroma=t.chroma,this.internalTone=yn(e),this.argb=e}setInternalState(e){const t=Tn.fromInt(e);this.internalHue=t.hue,this.internalChroma=t.chroma,this.internalTone=yn(e),this.argb=e}inViewingConditions(t){const r=Tn.fromInt(this.toInt()).xyzInViewingConditions(t),n=Tn.fromXyzInViewingConditions(r[0],r[1],r[2],In.make());return e.from(n.hue,n.chroma,_n(r[1]))}};
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{static harmonize(e,t){const r=An.fromInt(e),n=An.fromInt(t),i=nn(r.hue,n.hue),a=Math.min(.5*i,15),s=rn(r.hue+a*(o=r.hue,rn(n.hue-o)<=180?1:-1));var o;return An.from(s,r.chroma,r.tone).toInt()}static hctHue(e,t,r){const n=Sn.cam16Ucs(e,t,r),i=Tn.fromInt(n),a=Tn.fromInt(e);return An.from(i.hue,a.chroma,yn(e)).toInt()}static cam16Ucs(e,t,r){const n=Tn.fromInt(e),i=Tn.fromInt(t),a=n.jstar,s=n.astar,o=n.bstar,l=a+(i.jstar-a)*r,u=s+(i.astar-s)*r,c=o+(i.bstar-o)*r;return Tn.fromUcs(l,u,c).toInt()}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kn=class e{static ratioOfTones(t,r){return t=en(0,100,t),r=en(0,100,r),e.ratioOfYs(gn(t),gn(r))}static ratioOfYs(e,t){const r=e>t?e:t;return(r+5)/((r===t?e:t)+5)}static lighter(t,r){if(t<0||t>100)return-1;const n=gn(t),i=r*(n+5)-5,a=e.ratioOfYs(i,n),s=Math.abs(a-r);if(a<r&&s>.04)return-1;const o=_n(i)+.4;return o<0||o>100?-1:o}static darker(t,r){if(t<0||t>100)return-1;const n=gn(t),i=(n+5)/r-5,a=e.ratioOfYs(n,i),s=Math.abs(a-r);if(a<r&&s>.04)return-1;const o=_n(i)-.4;return o<0||o>100?-1:o}static lighterUnsafe(t,r){const n=e.lighter(t,r);return n<0?100:n}static darkerUnsafe(t,r){const n=e.darker(t,r);return n<0?0:n}},Cn=class e{static isDisliked(e){const t=Math.round(e.hue)>=90&&Math.round(e.hue)<=111,r=Math.round(e.chroma)>16,n=Math.round(e.tone)<65;return t&&r&&n}static fixIfDisliked(t){return e.isDisliked(t)?An.from(t.hue,t.chroma,70):t}},Pn=class e{static fromPalette(t){return new e(t.name??"",t.palette,t.tone,t.isBackground??!1,t.background,t.secondBackground,t.contrastCurve,t.toneDeltaPair)}constructor(e,t,r,n,i,a,s,o){if(this.name=e,this.palette=t,this.tone=r,this.isBackground=n,this.background=i,this.secondBackground=a,this.contrastCurve=s,this.toneDeltaPair=o,this.hctCache=new Map,!i&&a)throw new Error(`Color ${e} has secondBackgrounddefined, but background is not defined.`);if(!i&&s)throw new Error(`Color ${e} has contrastCurvedefined, but background is not defined.`);if(i&&!s)throw new Error(`Color ${e} has backgrounddefined, but contrastCurve is not defined.`)}getArgb(e){return this.getHct(e).toInt()}getHct(e){const t=this.hctCache.get(e);if(null!=t)return t;const r=this.getTone(e),n=this.palette(e).getHct(r);return this.hctCache.size>4&&this.hctCache.clear(),this.hctCache.set(e,n),n}getTone(t){const r=t.contrastLevel<0;if(this.toneDeltaPair){const n=this.toneDeltaPair(t),i=n.roleA,a=n.roleB,s=n.delta,o=n.polarity,l=n.stayTogether,u=this.background(t).getTone(t),c="nearer"===o||"lighter"===o&&!t.isDark||"darker"===o&&t.isDark,d=c?i:a,h=c?a:i,f=this.name===d.name,p=t.isDark?1:-1,m=d.contrastCurve.get(t.contrastLevel),y=h.contrastCurve.get(t.contrastLevel),g=d.tone(t);let _=kn.ratioOfTones(u,g)>=m?g:e.foregroundTone(u,m);const v=h.tone(t);let b=kn.ratioOfTones(u,v)>=y?v:e.foregroundTone(u,y);return r&&(_=e.foregroundTone(u,m),b=e.foregroundTone(u,y)),(b-_)*p>=s||(b=en(0,100,_+s*p),(b-_)*p>=s||(_=en(0,100,b-s*p))),50<=_&&_<60?p>0?(_=60,b=Math.max(b,_+s*p)):(_=49,b=Math.min(b,_+s*p)):50<=b&&b<60&&(l?p>0?(_=60,b=Math.max(b,_+s*p)):(_=49,b=Math.min(b,_+s*p)):b=p>0?60:49),f?_:b}{let n=this.tone(t);if(null==this.background)return n;const i=this.background(t).getTone(t),a=this.contrastCurve.get(t.contrastLevel);if(kn.ratioOfTones(i,n)>=a||(n=e.foregroundTone(i,a)),r&&(n=e.foregroundTone(i,a)),this.isBackground&&50<=n&&n<60&&(n=kn.ratioOfTones(49,i)>=a?49:60),this.secondBackground){const[r,i]=[this.background,this.secondBackground],[s,o]=[r(t).getTone(t),i(t).getTone(t)],[l,u]=[Math.max(s,o),Math.min(s,o)];if(kn.ratioOfTones(l,n)>=a&&kn.ratioOfTones(u,n)>=a)return n;const c=kn.lighter(l,a),d=kn.darker(u,a),h=[];-1!==c&&h.push(c),-1!==d&&h.push(d);return e.tonePrefersLightForeground(s)||e.tonePrefersLightForeground(o)?c<0?100:c:1===h.length?h[0]:d<0?0:d}return n}}static foregroundTone(t,r){const n=kn.lighterUnsafe(t,r),i=kn.darkerUnsafe(t,r),a=kn.ratioOfTones(n,t),s=kn.ratioOfTones(i,t);if(e.tonePrefersLightForeground(t)){const e=Math.abs(a-s)<.1&&a<r&&s<r;return a>=r||a>=s||e?n:i}return s>=r||s>=a?i:n}static tonePrefersLightForeground(e){return Math.round(e)<60}static toneAllowsLightForeground(e){return Math.round(e)<=49}static enableLightForeground(t){return e.tonePrefersLightForeground(t)&&!e.toneAllowsLightForeground(t)?49:t}},Rn=class e{static fromInt(t){const r=An.fromInt(t);return e.fromHct(r)}static fromHct(t){return new e(t.hue,t.chroma,t)}static fromHueAndChroma(t,r){const n=new Mn(t,r).create();return new e(t,r,n)}constructor(e,t,r){this.hue=e,this.chroma=t,this.keyColor=r,this.cache=new Map}tone(e){let t=this.cache.get(e);return void 0===t&&(t=An.from(this.hue,this.chroma,e).toInt(),this.cache.set(e,t)),t}getHct(e){return An.fromInt(this.tone(e))}};
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e,t){this.hue=e,this.requestedChroma=t,this.chromaCache=new Map,this.maxChromaValue=200}create(){let e=0,t=100;for(;e<t;){const r=Math.floor((e+t)/2),n=this.maxChroma(r)<this.maxChroma(r+1);if(this.maxChroma(r)>=this.requestedChroma-.01)if(Math.abs(e-50)<Math.abs(t-50))t=r;else{if(e===r)return An.from(this.hue,this.requestedChroma,e);e=r}else n?e=r+1:t=r}return An.from(this.hue,this.requestedChroma,e)}maxChroma(e){if(this.chromaCache.has(e))return this.chromaCache.get(e);const t=An.from(this.hue,this.maxChromaValue,e).chroma;return this.chromaCache.set(e,t),t}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ln=class{constructor(e,t,r,n){this.low=e,this.normal=t,this.medium=r,this.high=n}get(e){return e<=-1?this.low:e<0?Jr(this.low,this.normal,(e- -1)/1):e<.5?Jr(this.normal,this.medium,(e-0)/.5):e<1?Jr(this.medium,this.high,(e-.5)/.5):this.high}},On=class{constructor(e,t,r,n,i){this.roleA=e,this.roleB=t,this.delta=r,this.polarity=n,this.stayTogether=i}};
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Fn,Dn;
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Nn(e){return e.variant===Fn.FIDELITY||e.variant===Fn.CONTENT}function Bn(e){return e.variant===Fn.MONOCHROME}(Dn=Fn||(Fn={}))[Dn.MONOCHROME=0]="MONOCHROME",Dn[Dn.NEUTRAL=1]="NEUTRAL",Dn[Dn.TONAL_SPOT=2]="TONAL_SPOT",Dn[Dn.VIBRANT=3]="VIBRANT",Dn[Dn.EXPRESSIVE=4]="EXPRESSIVE",Dn[Dn.FIDELITY=5]="FIDELITY",Dn[Dn.CONTENT=6]="CONTENT",Dn[Dn.RAINBOW=7]="RAINBOW",Dn[Dn.FRUIT_SALAD=8]="FRUIT_SALAD";let Un=class e{static highestSurface(t){return t.isDark?e.surfaceBright:e.surfaceDim}};Un.contentAccentToneDelta=15,Un.primaryPaletteKeyColor=Pn.fromPalette({name:"primary_palette_key_color",palette:e=>e.primaryPalette,tone:e=>e.primaryPalette.keyColor.tone}),Un.secondaryPaletteKeyColor=Pn.fromPalette({name:"secondary_palette_key_color",palette:e=>e.secondaryPalette,tone:e=>e.secondaryPalette.keyColor.tone}),Un.tertiaryPaletteKeyColor=Pn.fromPalette({name:"tertiary_palette_key_color",palette:e=>e.tertiaryPalette,tone:e=>e.tertiaryPalette.keyColor.tone}),Un.neutralPaletteKeyColor=Pn.fromPalette({name:"neutral_palette_key_color",palette:e=>e.neutralPalette,tone:e=>e.neutralPalette.keyColor.tone}),Un.neutralVariantPaletteKeyColor=Pn.fromPalette({name:"neutral_variant_palette_key_color",palette:e=>e.neutralVariantPalette,tone:e=>e.neutralVariantPalette.keyColor.tone}),Un.background=Pn.fromPalette({name:"background",palette:e=>e.neutralPalette,tone:e=>e.isDark?6:98,isBackground:!0}),Un.onBackground=Pn.fromPalette({name:"on_background",palette:e=>e.neutralPalette,tone:e=>e.isDark?90:10,background:e=>Un.background,contrastCurve:new Ln(3,3,4.5,7)}),Un.surface=Pn.fromPalette({name:"surface",palette:e=>e.neutralPalette,tone:e=>e.isDark?6:98,isBackground:!0}),Un.surfaceDim=Pn.fromPalette({name:"surface_dim",palette:e=>e.neutralPalette,tone:e=>e.isDark?6:new Ln(87,87,80,75).get(e.contrastLevel),isBackground:!0}),Un.surfaceBright=Pn.fromPalette({name:"surface_bright",palette:e=>e.neutralPalette,tone:e=>e.isDark?new Ln(24,24,29,34).get(e.contrastLevel):98,isBackground:!0}),Un.surfaceContainerLowest=Pn.fromPalette({name:"surface_container_lowest",palette:e=>e.neutralPalette,tone:e=>e.isDark?new Ln(4,4,2,0).get(e.contrastLevel):100,isBackground:!0}),Un.surfaceContainerLow=Pn.fromPalette({name:"surface_container_low",palette:e=>e.neutralPalette,tone:e=>e.isDark?new Ln(10,10,11,12).get(e.contrastLevel):new Ln(96,96,96,95).get(e.contrastLevel),isBackground:!0}),Un.surfaceContainer=Pn.fromPalette({name:"surface_container",palette:e=>e.neutralPalette,tone:e=>e.isDark?new Ln(12,12,16,20).get(e.contrastLevel):new Ln(94,94,92,90).get(e.contrastLevel),isBackground:!0}),Un.surfaceContainerHigh=Pn.fromPalette({name:"surface_container_high",palette:e=>e.neutralPalette,tone:e=>e.isDark?new Ln(17,17,21,25).get(e.contrastLevel):new Ln(92,92,88,85).get(e.contrastLevel),isBackground:!0}),Un.surfaceContainerHighest=Pn.fromPalette({name:"surface_container_highest",palette:e=>e.neutralPalette,tone:e=>e.isDark?new Ln(22,22,26,30).get(e.contrastLevel):new Ln(90,90,84,80).get(e.contrastLevel),isBackground:!0}),Un.onSurface=Pn.fromPalette({name:"on_surface",palette:e=>e.neutralPalette,tone:e=>e.isDark?90:10,background:e=>Un.highestSurface(e),contrastCurve:new Ln(4.5,7,11,21)}),Un.surfaceVariant=Pn.fromPalette({name:"surface_variant",palette:e=>e.neutralVariantPalette,tone:e=>e.isDark?30:90,isBackground:!0}),Un.onSurfaceVariant=Pn.fromPalette({name:"on_surface_variant",palette:e=>e.neutralVariantPalette,tone:e=>e.isDark?80:30,background:e=>Un.highestSurface(e),contrastCurve:new Ln(3,4.5,7,11)}),Un.inverseSurface=Pn.fromPalette({name:"inverse_surface",palette:e=>e.neutralPalette,tone:e=>e.isDark?90:20}),Un.inverseOnSurface=Pn.fromPalette({name:"inverse_on_surface",palette:e=>e.neutralPalette,tone:e=>e.isDark?20:95,background:e=>Un.inverseSurface,contrastCurve:new Ln(4.5,7,11,21)}),Un.outline=Pn.fromPalette({name:"outline",palette:e=>e.neutralVariantPalette,tone:e=>e.isDark?60:50,background:e=>Un.highestSurface(e),contrastCurve:new Ln(1.5,3,4.5,7)}),Un.outlineVariant=Pn.fromPalette({name:"outline_variant",palette:e=>e.neutralVariantPalette,tone:e=>e.isDark?30:80,background:e=>Un.highestSurface(e),contrastCurve:new Ln(1,1,3,4.5)}),Un.shadow=Pn.fromPalette({name:"shadow",palette:e=>e.neutralPalette,tone:e=>0}),Un.scrim=Pn.fromPalette({name:"scrim",palette:e=>e.neutralPalette,tone:e=>0}),Un.surfaceTint=Pn.fromPalette({name:"surface_tint",palette:e=>e.primaryPalette,tone:e=>e.isDark?80:40,isBackground:!0}),Un.primary=Pn.fromPalette({name:"primary",palette:e=>e.primaryPalette,tone:e=>Bn(e)?e.isDark?100:0:e.isDark?80:40,isBackground:!0,background:e=>Un.highestSurface(e),contrastCurve:new Ln(3,4.5,7,7),toneDeltaPair:e=>new On(Un.primaryContainer,Un.primary,10,"nearer",!1)}),Un.onPrimary=Pn.fromPalette({name:"on_primary",palette:e=>e.primaryPalette,tone:e=>Bn(e)?e.isDark?10:90:e.isDark?20:100,background:e=>Un.primary,contrastCurve:new Ln(4.5,7,11,21)}),Un.primaryContainer=Pn.fromPalette({name:"primary_container",palette:e=>e.primaryPalette,tone:e=>Nn(e)?e.sourceColorHct.tone:Bn(e)?e.isDark?85:25:e.isDark?30:90,isBackground:!0,background:e=>Un.highestSurface(e),contrastCurve:new Ln(1,1,3,4.5),toneDeltaPair:e=>new On(Un.primaryContainer,Un.primary,10,"nearer",!1)}),Un.onPrimaryContainer=Pn.fromPalette({name:"on_primary_container",palette:e=>e.primaryPalette,tone:e=>Nn(e)?Pn.foregroundTone(Un.primaryContainer.tone(e),4.5):Bn(e)?e.isDark?0:100:e.isDark?90:30,background:e=>Un.primaryContainer,contrastCurve:new Ln(3,4.5,7,11)}),Un.inversePrimary=Pn.fromPalette({name:"inverse_primary",palette:e=>e.primaryPalette,tone:e=>e.isDark?40:80,background:e=>Un.inverseSurface,contrastCurve:new Ln(3,4.5,7,7)}),Un.secondary=Pn.fromPalette({name:"secondary",palette:e=>e.secondaryPalette,tone:e=>e.isDark?80:40,isBackground:!0,background:e=>Un.highestSurface(e),contrastCurve:new Ln(3,4.5,7,7),toneDeltaPair:e=>new On(Un.secondaryContainer,Un.secondary,10,"nearer",!1)}),Un.onSecondary=Pn.fromPalette({name:"on_secondary",palette:e=>e.secondaryPalette,tone:e=>Bn(e)?e.isDark?10:100:e.isDark?20:100,background:e=>Un.secondary,contrastCurve:new Ln(4.5,7,11,21)}),Un.secondaryContainer=Pn.fromPalette({name:"secondary_container",palette:e=>e.secondaryPalette,tone:e=>{const t=e.isDark?30:90;return Bn(e)?e.isDark?30:85:Nn(e)?function(e,t,r,n){let i=r,a=An.from(e,t,r);if(a.chroma<t){let r=a.chroma;for(;a.chroma<t;){i+=n?-1:1;const s=An.from(e,t,i);if(r>s.chroma)break;if(Math.abs(s.chroma-t)<.4)break;Math.abs(s.chroma-t)<Math.abs(a.chroma-t)&&(a=s),r=Math.max(r,s.chroma)}}return i}(e.secondaryPalette.hue,e.secondaryPalette.chroma,t,!e.isDark):t},isBackground:!0,background:e=>Un.highestSurface(e),contrastCurve:new Ln(1,1,3,4.5),toneDeltaPair:e=>new On(Un.secondaryContainer,Un.secondary,10,"nearer",!1)}),Un.onSecondaryContainer=Pn.fromPalette({name:"on_secondary_container",palette:e=>e.secondaryPalette,tone:e=>Bn(e)?e.isDark?90:10:Nn(e)?Pn.foregroundTone(Un.secondaryContainer.tone(e),4.5):e.isDark?90:30,background:e=>Un.secondaryContainer,contrastCurve:new Ln(3,4.5,7,11)}),Un.tertiary=Pn.fromPalette({name:"tertiary",palette:e=>e.tertiaryPalette,tone:e=>Bn(e)?e.isDark?90:25:e.isDark?80:40,isBackground:!0,background:e=>Un.highestSurface(e),contrastCurve:new Ln(3,4.5,7,7),toneDeltaPair:e=>new On(Un.tertiaryContainer,Un.tertiary,10,"nearer",!1)}),Un.onTertiary=Pn.fromPalette({name:"on_tertiary",palette:e=>e.tertiaryPalette,tone:e=>Bn(e)?e.isDark?10:90:e.isDark?20:100,background:e=>Un.tertiary,contrastCurve:new Ln(4.5,7,11,21)}),Un.tertiaryContainer=Pn.fromPalette({name:"tertiary_container",palette:e=>e.tertiaryPalette,tone:e=>{if(Bn(e))return e.isDark?60:49;if(!Nn(e))return e.isDark?30:90;const t=e.tertiaryPalette.getHct(e.sourceColorHct.tone);return Cn.fixIfDisliked(t).tone},isBackground:!0,background:e=>Un.highestSurface(e),contrastCurve:new Ln(1,1,3,4.5),toneDeltaPair:e=>new On(Un.tertiaryContainer,Un.tertiary,10,"nearer",!1)}),Un.onTertiaryContainer=Pn.fromPalette({name:"on_tertiary_container",palette:e=>e.tertiaryPalette,tone:e=>Bn(e)?e.isDark?0:100:Nn(e)?Pn.foregroundTone(Un.tertiaryContainer.tone(e),4.5):e.isDark?90:30,background:e=>Un.tertiaryContainer,contrastCurve:new Ln(3,4.5,7,11)}),Un.error=Pn.fromPalette({name:"error",palette:e=>e.errorPalette,tone:e=>e.isDark?80:40,isBackground:!0,background:e=>Un.highestSurface(e),contrastCurve:new Ln(3,4.5,7,7),toneDeltaPair:e=>new On(Un.errorContainer,Un.error,10,"nearer",!1)}),Un.onError=Pn.fromPalette({name:"on_error",palette:e=>e.errorPalette,tone:e=>e.isDark?20:100,background:e=>Un.error,contrastCurve:new Ln(4.5,7,11,21)}),Un.errorContainer=Pn.fromPalette({name:"error_container",palette:e=>e.errorPalette,tone:e=>e.isDark?30:90,isBackground:!0,background:e=>Un.highestSurface(e),contrastCurve:new Ln(1,1,3,4.5),toneDeltaPair:e=>new On(Un.errorContainer,Un.error,10,"nearer",!1)}),Un.onErrorContainer=Pn.fromPalette({name:"on_error_container",palette:e=>e.errorPalette,tone:e=>Bn(e)?e.isDark?90:10:e.isDark?90:30,background:e=>Un.errorContainer,contrastCurve:new Ln(3,4.5,7,11)}),Un.primaryFixed=Pn.fromPalette({name:"primary_fixed",palette:e=>e.primaryPalette,tone:e=>Bn(e)?40:90,isBackground:!0,background:e=>Un.highestSurface(e),contrastCurve:new Ln(1,1,3,4.5),toneDeltaPair:e=>new On(Un.primaryFixed,Un.primaryFixedDim,10,"lighter",!0)}),Un.primaryFixedDim=Pn.fromPalette({name:"primary_fixed_dim",palette:e=>e.primaryPalette,tone:e=>Bn(e)?30:80,isBackground:!0,background:e=>Un.highestSurface(e),contrastCurve:new Ln(1,1,3,4.5),toneDeltaPair:e=>new On(Un.primaryFixed,Un.primaryFixedDim,10,"lighter",!0)}),Un.onPrimaryFixed=Pn.fromPalette({name:"on_primary_fixed",palette:e=>e.primaryPalette,tone:e=>Bn(e)?100:10,background:e=>Un.primaryFixedDim,secondBackground:e=>Un.primaryFixed,contrastCurve:new Ln(4.5,7,11,21)}),Un.onPrimaryFixedVariant=Pn.fromPalette({name:"on_primary_fixed_variant",palette:e=>e.primaryPalette,tone:e=>Bn(e)?90:30,background:e=>Un.primaryFixedDim,secondBackground:e=>Un.primaryFixed,contrastCurve:new Ln(3,4.5,7,11)}),Un.secondaryFixed=Pn.fromPalette({name:"secondary_fixed",palette:e=>e.secondaryPalette,tone:e=>Bn(e)?80:90,isBackground:!0,background:e=>Un.highestSurface(e),contrastCurve:new Ln(1,1,3,4.5),toneDeltaPair:e=>new On(Un.secondaryFixed,Un.secondaryFixedDim,10,"lighter",!0)}),Un.secondaryFixedDim=Pn.fromPalette({name:"secondary_fixed_dim",palette:e=>e.secondaryPalette,tone:e=>Bn(e)?70:80,isBackground:!0,background:e=>Un.highestSurface(e),contrastCurve:new Ln(1,1,3,4.5),toneDeltaPair:e=>new On(Un.secondaryFixed,Un.secondaryFixedDim,10,"lighter",!0)}),Un.onSecondaryFixed=Pn.fromPalette({name:"on_secondary_fixed",palette:e=>e.secondaryPalette,tone:e=>10,background:e=>Un.secondaryFixedDim,secondBackground:e=>Un.secondaryFixed,contrastCurve:new Ln(4.5,7,11,21)}),Un.onSecondaryFixedVariant=Pn.fromPalette({name:"on_secondary_fixed_variant",palette:e=>e.secondaryPalette,tone:e=>Bn(e)?25:30,background:e=>Un.secondaryFixedDim,secondBackground:e=>Un.secondaryFixed,contrastCurve:new Ln(3,4.5,7,11)}),Un.tertiaryFixed=Pn.fromPalette({name:"tertiary_fixed",palette:e=>e.tertiaryPalette,tone:e=>Bn(e)?40:90,isBackground:!0,background:e=>Un.highestSurface(e),contrastCurve:new Ln(1,1,3,4.5),toneDeltaPair:e=>new On(Un.tertiaryFixed,Un.tertiaryFixedDim,10,"lighter",!0)}),Un.tertiaryFixedDim=Pn.fromPalette({name:"tertiary_fixed_dim",palette:e=>e.tertiaryPalette,tone:e=>Bn(e)?30:80,isBackground:!0,background:e=>Un.highestSurface(e),contrastCurve:new Ln(1,1,3,4.5),toneDeltaPair:e=>new On(Un.tertiaryFixed,Un.tertiaryFixedDim,10,"lighter",!0)}),Un.onTertiaryFixed=Pn.fromPalette({name:"on_tertiary_fixed",palette:e=>e.tertiaryPalette,tone:e=>Bn(e)?100:10,background:e=>Un.tertiaryFixedDim,secondBackground:e=>Un.tertiaryFixed,contrastCurve:new Ln(4.5,7,11,21)}),Un.onTertiaryFixedVariant=Pn.fromPalette({name:"on_tertiary_fixed_variant",palette:e=>e.tertiaryPalette,tone:e=>Bn(e)?90:30,background:e=>Un.tertiaryFixedDim,secondBackground:e=>Un.tertiaryFixed,contrastCurve:new Ln(3,4.5,7,11)});
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let jn=class e{static of(t){return new e(t,!1)}static contentOf(t){return new e(t,!0)}static fromColors(t){return e.createPaletteFromColors(!1,t)}static contentFromColors(t){return e.createPaletteFromColors(!0,t)}static createPaletteFromColors(t,r){const n=new e(r.primary,t);if(r.secondary){const i=new e(r.secondary,t);n.a2=i.a1}if(r.tertiary){const i=new e(r.tertiary,t);n.a3=i.a1}if(r.error){const i=new e(r.error,t);n.error=i.a1}if(r.neutral){const i=new e(r.neutral,t);n.n1=i.n1}if(r.neutralVariant){const i=new e(r.neutralVariant,t);n.n2=i.n2}return n}constructor(e,t){const r=An.fromInt(e),n=r.hue,i=r.chroma;t?(this.a1=Rn.fromHueAndChroma(n,i),this.a2=Rn.fromHueAndChroma(n,i/3),this.a3=Rn.fromHueAndChroma(n+60,i/2),this.n1=Rn.fromHueAndChroma(n,Math.min(i/12,4)),this.n2=Rn.fromHueAndChroma(n,Math.min(i/6,8))):(this.a1=Rn.fromHueAndChroma(n,Math.max(48,i)),this.a2=Rn.fromHueAndChroma(n,16),this.a3=Rn.fromHueAndChroma(n+60,24),this.n1=Rn.fromHueAndChroma(n,4),this.n2=Rn.fromHueAndChroma(n,8)),this.error=Rn.fromHueAndChroma(25,84)}};
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{fromInt(e){return function(e){const t=vn(hn(e)),r=vn(fn(e)),n=vn(pn(e)),i=sn,a=i[0][0]*t+i[0][1]*r+i[0][2]*n,s=i[1][0]*t+i[1][1]*r+i[1][2]*n,o=i[2][0]*t+i[2][1]*r+i[2][2]*n,l=s/ln[1],u=o/ln[2],c=wn(a/ln[0]),d=wn(l);return[116*d-16,500*(c-d),200*(d-wn(u))]}(e)}toInt(e){return function(e,t,r){const n=ln,i=(e+16)/116,a=i-r/200,s=xn(t/500+i),o=xn(i),l=xn(a);return mn(s*n[0],o*n[1],l*n[2])}(e[0],e[1],e[2])}distance(e,t){const r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{static quantize(e,t,r){const n=new Map,i=new Array,a=new Array,s=new Gn;let o=0;for(let g=0;g<e.length;g++){const t=e[g],r=n.get(t);void 0===r?(o++,i.push(s.fromInt(t)),a.push(t),n.set(t,1)):n.set(t,r+1)}const l=new Array;for(let g=0;g<o;g++){const e=a[g],t=n.get(e);void 0!==t&&(l[g]=t)}let u=Math.min(r,o);t.length>0&&(u=Math.min(u,t.length));const c=new Array;for(let g=0;g<t.length;g++)c.push(s.fromInt(t[g]));const d=u-c.length;if(0===t.length&&d>0)for(let g=0;g<d;g++){const e=100*Math.random(),t=201*Math.random()-100,r=201*Math.random()-100;c.push(new Array(e,t,r))}const h=new Array;for(let g=0;g<o;g++)h.push(Math.floor(Math.random()*u));const f=new Array;for(let g=0;g<u;g++){f.push(new Array);for(let e=0;e<u;e++)f[g].push(0)}const p=new Array;for(let g=0;g<u;g++){p.push(new Array);for(let e=0;e<u;e++)p[g].push(new Hn)}const m=new Array;for(let g=0;g<u;g++)m.push(0);for(let g=0;g<10;g++){for(let i=0;i<u;i++){for(let e=i+1;e<u;e++){const t=s.distance(c[i],c[e]);p[e][i].distance=t,p[e][i].index=i,p[i][e].distance=t,p[i][e].index=e}p[i].sort();for(let e=0;e<u;e++)f[i][e]=p[i][e].index}let e=0;for(let a=0;a<o;a++){const t=i[a],r=h[a],n=c[r],o=s.distance(t,n);let l=o,d=-1;for(let e=0;e<u;e++){if(p[r][e].distance>=4*o)continue;const n=s.distance(t,c[e]);n<l&&(l=n,d=e)}if(-1!==d){Math.abs(Math.sqrt(l)-Math.sqrt(o))>3&&(e++,h[a]=d)}}if(0===e&&0!==g)break;const t=new Array(u).fill(0),r=new Array(u).fill(0),n=new Array(u).fill(0);for(let i=0;i<u;i++)m[i]=0;for(let a=0;a<o;a++){const e=h[a],s=i[a],o=l[a];m[e]+=o,t[e]+=s[0]*o,r[e]+=s[1]*o,n[e]+=s[2]*o}for(let i=0;i<u;i++){const e=m[i];if(0===e){c[i]=[0,0,0];continue}const a=t[i]/e,s=r[i]/e,o=n[i]/e;c[i]=[a,s,o]}}const y=new Map;for(let g=0;g<u;g++){const e=m[g];if(0===e)continue;const t=s.toInt(c[g]);y.has(t)||y.set(t,e)}return y}}class Hn{constructor(){this.distance=-1,this.index=-1}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{static quantize(e){const t=new Map;for(let r=0;r<e.length;r++){const n=e[r];dn(n)<255||t.set(n,(t.get(n)??0)+1)}return t}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n=33,Xn=35937,qn="red",Wn="green",Yn="blue";class Kn{constructor(e=[],t=[],r=[],n=[],i=[],a=[]){this.weights=e,this.momentsR=t,this.momentsG=r,this.momentsB=n,this.moments=i,this.cubes=a}quantize(e,t){this.constructHistogram(e),this.computeMoments();const r=this.createBoxes(t);return this.createResult(r.resultCount)}constructHistogram(e){this.weights=Array.from({length:Xn}).fill(0),this.momentsR=Array.from({length:Xn}).fill(0),this.momentsG=Array.from({length:Xn}).fill(0),this.momentsB=Array.from({length:Xn}).fill(0),this.moments=Array.from({length:Xn}).fill(0);const t=Vn.quantize(e);for(const[r,n]of t.entries()){const e=hn(r),t=fn(r),i=pn(r),a=3,s=1+(e>>a),o=1+(t>>a),l=1+(i>>a),u=this.getIndex(s,o,l);this.weights[u]=(this.weights[u]??0)+n,this.momentsR[u]+=n*e,this.momentsG[u]+=n*t,this.momentsB[u]+=n*i,this.moments[u]+=n*(e*e+t*t+i*i)}}computeMoments(){for(let e=1;e<$n;e++){const t=Array.from({length:$n}).fill(0),r=Array.from({length:$n}).fill(0),n=Array.from({length:$n}).fill(0),i=Array.from({length:$n}).fill(0),a=Array.from({length:$n}).fill(0);for(let s=1;s<$n;s++){let o=0,l=0,u=0,c=0,d=0;for(let h=1;h<$n;h++){const f=this.getIndex(e,s,h);o+=this.weights[f],l+=this.momentsR[f],u+=this.momentsG[f],c+=this.momentsB[f],d+=this.moments[f],t[h]+=o,r[h]+=l,n[h]+=u,i[h]+=c,a[h]+=d;const p=this.getIndex(e-1,s,h);this.weights[f]=this.weights[p]+t[h],this.momentsR[f]=this.momentsR[p]+r[h],this.momentsG[f]=this.momentsG[p]+n[h],this.momentsB[f]=this.momentsB[p]+i[h],this.moments[f]=this.moments[p]+a[h]}}}}createBoxes(e){this.cubes=Array.from({length:e}).fill(0).map(()=>new Zn);const t=Array.from({length:e}).fill(0);this.cubes[0].r0=0,this.cubes[0].g0=0,this.cubes[0].b0=0,this.cubes[0].r1=32,this.cubes[0].g1=32,this.cubes[0].b1=32;let r=e,n=0;for(let i=1;i<e;i++){this.cut(this.cubes[n],this.cubes[i])?(t[n]=this.cubes[n].vol>1?this.variance(this.cubes[n]):0,t[i]=this.cubes[i].vol>1?this.variance(this.cubes[i]):0):(t[n]=0,i--),n=0;let e=t[0];for(let r=1;r<=i;r++)t[r]>e&&(e=t[r],n=r);if(e<=0){r=i+1;break}}return new Qn(e,r)}createResult(e){const t=[];for(let r=0;r<e;++r){const e=this.cubes[r],n=this.volume(e,this.weights);if(n>0){const r=255<<24|(255&Math.round(this.volume(e,this.momentsR)/n))<<16|(255&Math.round(this.volume(e,this.momentsG)/n))<<8|255&Math.round(this.volume(e,this.momentsB)/n);t.push(r)}}return t}variance(e){const t=this.volume(e,this.momentsR),r=this.volume(e,this.momentsG),n=this.volume(e,this.momentsB);return this.moments[this.getIndex(e.r1,e.g1,e.b1)]-this.moments[this.getIndex(e.r1,e.g1,e.b0)]-this.moments[this.getIndex(e.r1,e.g0,e.b1)]+this.moments[this.getIndex(e.r1,e.g0,e.b0)]-this.moments[this.getIndex(e.r0,e.g1,e.b1)]+this.moments[this.getIndex(e.r0,e.g1,e.b0)]+this.moments[this.getIndex(e.r0,e.g0,e.b1)]-this.moments[this.getIndex(e.r0,e.g0,e.b0)]-(t*t+r*r+n*n)/this.volume(e,this.weights)}cut(e,t){const r=this.volume(e,this.momentsR),n=this.volume(e,this.momentsG),i=this.volume(e,this.momentsB),a=this.volume(e,this.weights),s=this.maximize(e,qn,e.r0+1,e.r1,r,n,i,a),o=this.maximize(e,Wn,e.g0+1,e.g1,r,n,i,a),l=this.maximize(e,Yn,e.b0+1,e.b1,r,n,i,a);let u;const c=s.maximum,d=o.maximum,h=l.maximum;if(c>=d&&c>=h){if(s.cutLocation<0)return!1;u=qn}else u=d>=c&&d>=h?Wn:Yn;switch(t.r1=e.r1,t.g1=e.g1,t.b1=e.b1,u){case qn:e.r1=s.cutLocation,t.r0=e.r1,t.g0=e.g0,t.b0=e.b0;break;case Wn:e.g1=o.cutLocation,t.r0=e.r0,t.g0=e.g1,t.b0=e.b0;break;case Yn:e.b1=l.cutLocation,t.r0=e.r0,t.g0=e.g0,t.b0=e.b1;break;default:throw new Error("unexpected direction "+u)}return e.vol=(e.r1-e.r0)*(e.g1-e.g0)*(e.b1-e.b0),t.vol=(t.r1-t.r0)*(t.g1-t.g0)*(t.b1-t.b0),!0}maximize(e,t,r,n,i,a,s,o){const l=this.bottom(e,t,this.momentsR),u=this.bottom(e,t,this.momentsG),c=this.bottom(e,t,this.momentsB),d=this.bottom(e,t,this.weights);let h=0,f=-1,p=0,m=0,y=0,g=0;for(let _=r;_<n;_++){if(p=l+this.top(e,t,_,this.momentsR),m=u+this.top(e,t,_,this.momentsG),y=c+this.top(e,t,_,this.momentsB),g=d+this.top(e,t,_,this.weights),0===g)continue;let r=1*(p*p+m*m+y*y),n=1*g,v=r/n;p=i-p,m=a-m,y=s-y,g=o-g,0!==g&&(r=1*(p*p+m*m+y*y),n=1*g,v+=r/n,v>h&&(h=v,f=_))}return new Jn(f,h)}volume(e,t){return t[this.getIndex(e.r1,e.g1,e.b1)]-t[this.getIndex(e.r1,e.g1,e.b0)]-t[this.getIndex(e.r1,e.g0,e.b1)]+t[this.getIndex(e.r1,e.g0,e.b0)]-t[this.getIndex(e.r0,e.g1,e.b1)]+t[this.getIndex(e.r0,e.g1,e.b0)]+t[this.getIndex(e.r0,e.g0,e.b1)]-t[this.getIndex(e.r0,e.g0,e.b0)]}bottom(e,t,r){switch(t){case qn:return-r[this.getIndex(e.r0,e.g1,e.b1)]+r[this.getIndex(e.r0,e.g1,e.b0)]+r[this.getIndex(e.r0,e.g0,e.b1)]-r[this.getIndex(e.r0,e.g0,e.b0)];case Wn:return-r[this.getIndex(e.r1,e.g0,e.b1)]+r[this.getIndex(e.r1,e.g0,e.b0)]+r[this.getIndex(e.r0,e.g0,e.b1)]-r[this.getIndex(e.r0,e.g0,e.b0)];case Yn:return-r[this.getIndex(e.r1,e.g1,e.b0)]+r[this.getIndex(e.r1,e.g0,e.b0)]+r[this.getIndex(e.r0,e.g1,e.b0)]-r[this.getIndex(e.r0,e.g0,e.b0)];default:throw new Error("unexpected direction $direction")}}top(e,t,r,n){switch(t){case qn:return n[this.getIndex(r,e.g1,e.b1)]-n[this.getIndex(r,e.g1,e.b0)]-n[this.getIndex(r,e.g0,e.b1)]+n[this.getIndex(r,e.g0,e.b0)];case Wn:return n[this.getIndex(e.r1,r,e.b1)]-n[this.getIndex(e.r1,r,e.b0)]-n[this.getIndex(e.r0,r,e.b1)]+n[this.getIndex(e.r0,r,e.b0)];case Yn:return n[this.getIndex(e.r1,e.g1,r)]-n[this.getIndex(e.r1,e.g0,r)]-n[this.getIndex(e.r0,e.g1,r)]+n[this.getIndex(e.r0,e.g0,r)];default:throw new Error("unexpected direction $direction")}}getIndex(e,t,r){return(e<<10)+(e<<6)+e+(t<<5)+t+r}}class Zn{constructor(e=0,t=0,r=0,n=0,i=0,a=0,s=0){this.r0=e,this.r1=t,this.g0=r,this.g1=n,this.b0=i,this.b1=a,this.vol=s}}class Qn{constructor(e,t){this.requestedCount=e,this.resultCount=t}}class Jn{constructor(e,t){this.cutLocation=e,this.maximum=t}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{static quantize(e,t){const r=(new Kn).quantize(e,t);return zn.quantize(e,r,t)}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ti=class e{get primary(){return this.props.primary}get onPrimary(){return this.props.onPrimary}get primaryContainer(){return this.props.primaryContainer}get onPrimaryContainer(){return this.props.onPrimaryContainer}get secondary(){return this.props.secondary}get onSecondary(){return this.props.onSecondary}get secondaryContainer(){return this.props.secondaryContainer}get onSecondaryContainer(){return this.props.onSecondaryContainer}get tertiary(){return this.props.tertiary}get onTertiary(){return this.props.onTertiary}get tertiaryContainer(){return this.props.tertiaryContainer}get onTertiaryContainer(){return this.props.onTertiaryContainer}get error(){return this.props.error}get onError(){return this.props.onError}get errorContainer(){return this.props.errorContainer}get onErrorContainer(){return this.props.onErrorContainer}get background(){return this.props.background}get onBackground(){return this.props.onBackground}get surface(){return this.props.surface}get onSurface(){return this.props.onSurface}get surfaceVariant(){return this.props.surfaceVariant}get onSurfaceVariant(){return this.props.onSurfaceVariant}get outline(){return this.props.outline}get outlineVariant(){return this.props.outlineVariant}get shadow(){return this.props.shadow}get scrim(){return this.props.scrim}get inverseSurface(){return this.props.inverseSurface}get inverseOnSurface(){return this.props.inverseOnSurface}get inversePrimary(){return this.props.inversePrimary}static light(t){return e.lightFromCorePalette(jn.of(t))}static dark(t){return e.darkFromCorePalette(jn.of(t))}static lightContent(t){return e.lightFromCorePalette(jn.contentOf(t))}static darkContent(t){return e.darkFromCorePalette(jn.contentOf(t))}static lightFromCorePalette(t){return new e({primary:t.a1.tone(40),onPrimary:t.a1.tone(100),primaryContainer:t.a1.tone(90),onPrimaryContainer:t.a1.tone(10),secondary:t.a2.tone(40),onSecondary:t.a2.tone(100),secondaryContainer:t.a2.tone(90),onSecondaryContainer:t.a2.tone(10),tertiary:t.a3.tone(40),onTertiary:t.a3.tone(100),tertiaryContainer:t.a3.tone(90),onTertiaryContainer:t.a3.tone(10),error:t.error.tone(40),onError:t.error.tone(100),errorContainer:t.error.tone(90),onErrorContainer:t.error.tone(10),background:t.n1.tone(99),onBackground:t.n1.tone(10),surface:t.n1.tone(99),onSurface:t.n1.tone(10),surfaceVariant:t.n2.tone(90),onSurfaceVariant:t.n2.tone(30),outline:t.n2.tone(50),outlineVariant:t.n2.tone(80),shadow:t.n1.tone(0),scrim:t.n1.tone(0),inverseSurface:t.n1.tone(20),inverseOnSurface:t.n1.tone(95),inversePrimary:t.a1.tone(80)})}static darkFromCorePalette(t){return new e({primary:t.a1.tone(80),onPrimary:t.a1.tone(20),primaryContainer:t.a1.tone(30),onPrimaryContainer:t.a1.tone(90),secondary:t.a2.tone(80),onSecondary:t.a2.tone(20),secondaryContainer:t.a2.tone(30),onSecondaryContainer:t.a2.tone(90),tertiary:t.a3.tone(80),onTertiary:t.a3.tone(20),tertiaryContainer:t.a3.tone(30),onTertiaryContainer:t.a3.tone(90),error:t.error.tone(80),onError:t.error.tone(20),errorContainer:t.error.tone(30),onErrorContainer:t.error.tone(80),background:t.n1.tone(10),onBackground:t.n1.tone(90),surface:t.n1.tone(10),onSurface:t.n1.tone(90),surfaceVariant:t.n2.tone(30),onSurfaceVariant:t.n2.tone(80),outline:t.n2.tone(60),outlineVariant:t.n2.tone(30),shadow:t.n1.tone(0),scrim:t.n1.tone(0),inverseSurface:t.n1.tone(90),inverseOnSurface:t.n1.tone(20),inversePrimary:t.a1.tone(40)})}constructor(e){this.props=e}toJSON(){return{...this.props}}};
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ri={desired:4,fallbackColorARGB:4282549748,filter:!0};function ni(e,t){return e.score>t.score?-1:e.score<t.score?1:0}class ii{constructor(){}static score(e,t){const{desired:r,fallbackColorARGB:n,filter:i}={...ri,...t},a=[],s=new Array(360).fill(0);let o=0;for(const[h,f]of e.entries()){const e=An.fromInt(h);a.push(e);s[Math.floor(e.hue)]+=f,o+=f}const l=new Array(360).fill(0);for(let h=0;h<360;h++){const e=s[h]/o;for(let t=h-14;t<h+16;t++){l[tn(t)]+=e}}const u=new Array;for(const h of a){const e=l[tn(Math.round(h.hue))];if(i&&(h.chroma<ii.CUTOFF_CHROMA||e<=ii.CUTOFF_EXCITED_PROPORTION))continue;const t=100*e*ii.WEIGHT_PROPORTION,r=h.chroma<ii.TARGET_CHROMA?ii.WEIGHT_CHROMA_BELOW:ii.WEIGHT_CHROMA_ABOVE,n=t+(h.chroma-ii.TARGET_CHROMA)*r;u.push({hct:h,score:n})}u.sort(ni);const c=[];for(let h=90;h>=15;h--){c.length=0;for(const{hct:e}of u){if(c.find(t=>nn(e.hue,t.hue)<h)||c.push(e),c.length>=r)break}if(c.length>=r)break}const d=[];0===c.length&&d.push(n);for(const h of c)d.push(h.toInt());return d}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ai(e,t=[]){const r=jn.of(e);return{source:e,schemes:{light:ti.light(e),dark:ti.dark(e)},palettes:{primary:r.a1,secondary:r.a2,tertiary:r.a3,neutral:r.n1,neutralVariant:r.n2,error:r.error},customColors:t.map(t=>function(e,t){let r=t.value;const n=r,i=e;t.blend&&(r=Sn.harmonize(n,i));const a=jn.of(r),s=a.a1;return{color:t,value:r,light:{color:s.tone(40),onColor:s.tone(100),colorContainer:s.tone(90),onColorContainer:s.tone(10)},dark:{color:s.tone(80),onColor:s.tone(20),colorContainer:s.tone(30),onColorContainer:s.tone(90)}}}(e,t))}}ii.TARGET_CHROMA=48,ii.WEIGHT_PROPORTION=.7,ii.WEIGHT_CHROMA_ABOVE=.3,ii.WEIGHT_CHROMA_BELOW=.1,ii.CUTOFF_CHROMA=5,ii.CUTOFF_EXCITED_PROPORTION=.01;const si=(e,t,r)=>{const n=e=>e.toString(16).padStart(2,"0");return`#${n(e)}${n(t)}${n(r)}`.toUpperCase()},oi=(e,t,r)=>{e/=255,t/=255,r/=255;const n=Math.max(e,t,r),i=Math.min(e,t,r),a=n-i;let s=0,o=0;const l=(n+i)/2;if(0!==a){switch(o=a/(1-Math.abs(2*l-1)),n){case e:s=(t-r)/a%6;break;case t:s=(r-e)/a+2;break;case r:s=(e-t)/a+4}s*=60,s<0&&(s+=360)}return{h:Math.round(s),s:Math.round(100*o),l:Math.round(100*l)}};
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function li(e){return e<0?-1:0===e?0:1}function ui(e,t,r){return(1-r)*e+r*t}function ci(e,t,r){return r<e?e:r>t?t:r}function di(e,t){return[e[0]*t[0][0]+e[1]*t[0][1]+e[2]*t[0][2],e[0]*t[1][0]+e[1]*t[1][1]+e[2]*t[1][2],e[0]*t[2][0]+e[1]*t[2][1]+e[2]*t[2][2]]}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi=[[.41233895,.35762064,.18051042],[.2126,.7152,.0722],[.01932141,.11916382,.95034478]],fi=[[3.2413774792388685,-1.5376652402851851,-.49885366846268053],[-.9691452513005321,1.8758853451067872,.04156585616912061],[.05562093689691305,-.20395524564742123,1.0571799111220335]],pi=[95.047,100,108.883];function mi(e,t,r){return(255<<24|(255&e)<<16|(255&t)<<8|255&r)>>>0}function yi(e){return mi(Ti(e[0]),Ti(e[1]),Ti(e[2]))}function gi(e){return e>>16&255}function _i(e){return e>>8&255}function vi(e){return 255&e}function bi(e){const t=function(e){return di([Ii(gi(e)),Ii(_i(e)),Ii(vi(e))],hi)}(e)[1];return 116*Ei(t/100)-16}function wi(e){return 100*function(e){const t=24389/27,r=e*e*e;return r>216/24389?r:(116*e-16)/t}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */((e+16)/116)}function xi(e){return 116*Ei(e/100)-16}function Ii(e){const t=e/255;return t<=.040449936?t/12.92*100:100*Math.pow((t+.055)/1.055,2.4)}function Ti(e){const t=e/100;let r=0;return r=t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,n=0,i=255,(a=Math.round(255*r))<n?n:a>i?i:a;var n,i,a}function Ei(e){const t=24389/27;return e>216/24389?Math.pow(e,1/3):(t*e+16)/116}class Ai{static make(e=function(){return pi}(),t=200/Math.PI*wi(50)/100,r=50,n=2,i=!1){const a=e,s=.401288*a[0]+.650173*a[1]+-.051461*a[2],o=-.250268*a[0]+1.204414*a[1]+.045854*a[2],l=-.002079*a[0]+.048952*a[1]+.953127*a[2],u=.8+n/10,c=u>=.9?ui(.59,.69,10*(u-.9)):ui(.525,.59,10*(u-.8));let d=i?1:u*(1-1/3.6*Math.exp((-t-42)/92));d=d>1?1:d<0?0:d;const h=u,f=[d*(100/s)+1-d,d*(100/o)+1-d,d*(100/l)+1-d],p=1/(5*t+1),m=p*p*p*p,y=1-m,g=m*t+.1*y*y*Math.cbrt(5*t),_=wi(r)/e[1],v=1.48+Math.sqrt(_),b=.725/Math.pow(_,.2),w=b,x=[Math.pow(g*f[0]*s/100,.42),Math.pow(g*f[1]*o/100,.42),Math.pow(g*f[2]*l/100,.42)],I=[400*x[0]/(x[0]+27.13),400*x[1]/(x[1]+27.13),400*x[2]/(x[2]+27.13)];return new Ai(_,(2*I[0]+I[1]+.05*I[2])*b,b,w,c,h,f,g,Math.pow(g,.25),v)}constructor(e,t,r,n,i,a,s,o,l,u){this.n=e,this.aw=t,this.nbb=r,this.ncb=n,this.c=i,this.nc=a,this.rgbD=s,this.fl=o,this.fLRoot=l,this.z=u}}Ai.DEFAULT=Ai.make();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Si{constructor(e,t,r,n,i,a,s,o,l){this.hue=e,this.chroma=t,this.j=r,this.q=n,this.m=i,this.s=a,this.jstar=s,this.astar=o,this.bstar=l}distance(e){const t=this.jstar-e.jstar,r=this.astar-e.astar,n=this.bstar-e.bstar,i=Math.sqrt(t*t+r*r+n*n);return 1.41*Math.pow(i,.63)}static fromInt(e){return Si.fromIntInViewingConditions(e,Ai.DEFAULT)}static fromIntInViewingConditions(e,t){const r=(65280&e)>>8,n=255&e,i=Ii((16711680&e)>>16),a=Ii(r),s=Ii(n),o=.41233895*i+.35762064*a+.18051042*s,l=.2126*i+.7152*a+.0722*s,u=.01932141*i+.11916382*a+.95034478*s,c=.401288*o+.650173*l-.051461*u,d=-.250268*o+1.204414*l+.045854*u,h=-.002079*o+.048952*l+.953127*u,f=t.rgbD[0]*c,p=t.rgbD[1]*d,m=t.rgbD[2]*h,y=Math.pow(t.fl*Math.abs(f)/100,.42),g=Math.pow(t.fl*Math.abs(p)/100,.42),_=Math.pow(t.fl*Math.abs(m)/100,.42),v=400*li(f)*y/(y+27.13),b=400*li(p)*g/(g+27.13),w=400*li(m)*_/(_+27.13),x=(11*v+-12*b+w)/11,I=(v+b-2*w)/9,T=(20*v+20*b+21*w)/20,E=(40*v+20*b+w)/20,A=180*Math.atan2(I,x)/Math.PI,S=A<0?A+360:A>=360?A-360:A,k=S*Math.PI/180,C=E*t.nbb,P=100*Math.pow(C/t.aw,t.c*t.z),R=4/t.c*Math.sqrt(P/100)*(t.aw+4)*t.fLRoot,M=S<20.14?S+360:S,L=5e4/13*(.25*(Math.cos(M*Math.PI/180+2)+3.8))*t.nc*t.ncb*Math.sqrt(x*x+I*I)/(T+.305),O=Math.pow(L,.9)*Math.pow(1.64-Math.pow(.29,t.n),.73),F=O*Math.sqrt(P/100),D=F*t.fLRoot,N=50*Math.sqrt(O*t.c/(t.aw+4)),B=(1+100*.007)*P/(1+.007*P),U=1/.0228*Math.log(1+.0228*D),j=U*Math.cos(k),G=U*Math.sin(k);return new Si(S,F,P,R,D,N,B,j,G)}static fromJch(e,t,r){return Si.fromJchInViewingConditions(e,t,r,Ai.DEFAULT)}static fromJchInViewingConditions(e,t,r,n){const i=4/n.c*Math.sqrt(e/100)*(n.aw+4)*n.fLRoot,a=t*n.fLRoot,s=t/Math.sqrt(e/100),o=50*Math.sqrt(s*n.c/(n.aw+4)),l=r*Math.PI/180,u=(1+100*.007)*e/(1+.007*e),c=1/.0228*Math.log(1+.0228*a),d=c*Math.cos(l),h=c*Math.sin(l);return new Si(r,t,e,i,a,o,u,d,h)}static fromUcs(e,t,r){return Si.fromUcsInViewingConditions(e,t,r,Ai.DEFAULT)}static fromUcsInViewingConditions(e,t,r,n){const i=t,a=r,s=Math.sqrt(i*i+a*a),o=(Math.exp(.0228*s)-1)/.0228/n.fLRoot;let l=Math.atan2(a,i)*(180/Math.PI);l<0&&(l+=360);const u=e/(1-.007*(e-100));return Si.fromJchInViewingConditions(u,o,l,n)}toInt(){return this.viewed(Ai.DEFAULT)}viewed(e){const t=0===this.chroma||0===this.j?0:this.chroma/Math.sqrt(this.j/100),r=Math.pow(t/Math.pow(1.64-Math.pow(.29,e.n),.73),1/.9),n=this.hue*Math.PI/180,i=.25*(Math.cos(n+2)+3.8),a=e.aw*Math.pow(this.j/100,1/e.c/e.z),s=i*(5e4/13)*e.nc*e.ncb,o=a/e.nbb,l=Math.sin(n),u=Math.cos(n),c=23*(o+.305)*r/(23*s+11*r*u+108*r*l),d=c*u,h=c*l,f=(460*o+451*d+288*h)/1403,p=(460*o-891*d-261*h)/1403,m=(460*o-220*d-6300*h)/1403,y=Math.max(0,27.13*Math.abs(f)/(400-Math.abs(f))),g=li(f)*(100/e.fl)*Math.pow(y,1/.42),_=Math.max(0,27.13*Math.abs(p)/(400-Math.abs(p))),v=li(p)*(100/e.fl)*Math.pow(_,1/.42),b=Math.max(0,27.13*Math.abs(m)/(400-Math.abs(m))),w=li(m)*(100/e.fl)*Math.pow(b,1/.42),x=g/e.rgbD[0],I=v/e.rgbD[1],T=w/e.rgbD[2],E=function(e,t,r){const n=fi,i=n[0][0]*e+n[0][1]*t+n[0][2]*r,a=n[1][0]*e+n[1][1]*t+n[1][2]*r,s=n[2][0]*e+n[2][1]*t+n[2][2]*r;return mi(Ti(i),Ti(a),Ti(s))}(1.86206786*x-1.01125463*I+.14918677*T,.38752654*x+.62144744*I-.00897398*T,-.0158415*x-.03412294*I+1.04996444*T);return E}static fromXyzInViewingConditions(e,t,r,n){const i=.401288*e+.650173*t-.051461*r,a=-.250268*e+1.204414*t+.045854*r,s=-.002079*e+.048952*t+.953127*r,o=n.rgbD[0]*i,l=n.rgbD[1]*a,u=n.rgbD[2]*s,c=Math.pow(n.fl*Math.abs(o)/100,.42),d=Math.pow(n.fl*Math.abs(l)/100,.42),h=Math.pow(n.fl*Math.abs(u)/100,.42),f=400*li(o)*c/(c+27.13),p=400*li(l)*d/(d+27.13),m=400*li(u)*h/(h+27.13),y=(11*f+-12*p+m)/11,g=(f+p-2*m)/9,_=(20*f+20*p+21*m)/20,v=(40*f+20*p+m)/20,b=180*Math.atan2(g,y)/Math.PI,w=b<0?b+360:b>=360?b-360:b,x=w*Math.PI/180,I=v*n.nbb,T=100*Math.pow(I/n.aw,n.c*n.z),E=4/n.c*Math.sqrt(T/100)*(n.aw+4)*n.fLRoot,A=w<20.14?w+360:w,S=5e4/13*(1/4*(Math.cos(A*Math.PI/180+2)+3.8))*n.nc*n.ncb*Math.sqrt(y*y+g*g)/(_+.305),k=Math.pow(S,.9)*Math.pow(1.64-Math.pow(.29,n.n),.73),C=k*Math.sqrt(T/100),P=C*n.fLRoot,R=50*Math.sqrt(k*n.c/(n.aw+4)),M=(1+100*.007)*T/(1+.007*T),L=Math.log(1+.0228*P)/.0228,O=L*Math.cos(x),F=L*Math.sin(x);return new Si(w,C,T,E,P,R,M,O,F)}xyzInViewingConditions(e){const t=0===this.chroma||0===this.j?0:this.chroma/Math.sqrt(this.j/100),r=Math.pow(t/Math.pow(1.64-Math.pow(.29,e.n),.73),1/.9),n=this.hue*Math.PI/180,i=.25*(Math.cos(n+2)+3.8),a=e.aw*Math.pow(this.j/100,1/e.c/e.z),s=i*(5e4/13)*e.nc*e.ncb,o=a/e.nbb,l=Math.sin(n),u=Math.cos(n),c=23*(o+.305)*r/(23*s+11*r*u+108*r*l),d=c*u,h=c*l,f=(460*o+451*d+288*h)/1403,p=(460*o-891*d-261*h)/1403,m=(460*o-220*d-6300*h)/1403,y=Math.max(0,27.13*Math.abs(f)/(400-Math.abs(f))),g=li(f)*(100/e.fl)*Math.pow(y,1/.42),_=Math.max(0,27.13*Math.abs(p)/(400-Math.abs(p))),v=li(p)*(100/e.fl)*Math.pow(_,1/.42),b=Math.max(0,27.13*Math.abs(m)/(400-Math.abs(m))),w=li(m)*(100/e.fl)*Math.pow(b,1/.42),x=g/e.rgbD[0],I=v/e.rgbD[1],T=w/e.rgbD[2];return[1.86206786*x-1.01125463*I+.14918677*T,.38752654*x+.62144744*I-.00897398*T,-.0158415*x-.03412294*I+1.04996444*T]}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{static sanitizeRadians(e){return(e+8*Math.PI)%(2*Math.PI)}static trueDelinearized(e){const t=e/100;let r=0;return r=t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,255*r}static chromaticAdaptation(e){const t=Math.pow(Math.abs(e),.42);return 400*li(e)*t/(t+27.13)}static hueOf(e){const t=di(e,ki.SCALED_DISCOUNT_FROM_LINRGB),r=ki.chromaticAdaptation(t[0]),n=ki.chromaticAdaptation(t[1]),i=ki.chromaticAdaptation(t[2]),a=(11*r+-12*n+i)/11,s=(r+n-2*i)/9;return Math.atan2(s,a)}static areInCyclicOrder(e,t,r){return ki.sanitizeRadians(t-e)<ki.sanitizeRadians(r-e)}static intercept(e,t,r){return(t-e)/(r-e)}static lerpPoint(e,t,r){return[e[0]+(r[0]-e[0])*t,e[1]+(r[1]-e[1])*t,e[2]+(r[2]-e[2])*t]}static setCoordinate(e,t,r,n){const i=ki.intercept(e[n],t,r[n]);return ki.lerpPoint(e,i,r)}static isBounded(e){return 0<=e&&e<=100}static nthVertex(e,t){const r=ki.Y_FROM_LINRGB[0],n=ki.Y_FROM_LINRGB[1],i=ki.Y_FROM_LINRGB[2],a=t%4<=1?0:100,s=t%2==0?0:100;if(t<4){const t=a,o=s,l=(e-t*n-o*i)/r;return ki.isBounded(l)?[l,t,o]:[-1,-1,-1]}if(t<8){const t=a,o=s,l=(e-o*r-t*i)/n;return ki.isBounded(l)?[o,l,t]:[-1,-1,-1]}{const t=a,o=s,l=(e-t*r-o*n)/i;return ki.isBounded(l)?[t,o,l]:[-1,-1,-1]}}static bisectToSegment(e,t){let r=[-1,-1,-1],n=r,i=0,a=0,s=!1,o=!0;for(let l=0;l<12;l++){const u=ki.nthVertex(e,l);if(u[0]<0)continue;const c=ki.hueOf(u);s?(o||ki.areInCyclicOrder(i,c,a))&&(o=!1,ki.areInCyclicOrder(i,t,c)?(n=u,a=c):(r=u,i=c)):(r=u,n=u,i=c,a=c,s=!0)}return[r,n]}static midpoint(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2,(e[2]+t[2])/2]}static criticalPlaneBelow(e){return Math.floor(e-.5)}static criticalPlaneAbove(e){return Math.ceil(e-.5)}static bisectToLimit(e,t){const r=ki.bisectToSegment(e,t);let n=r[0],i=ki.hueOf(n),a=r[1];for(let s=0;s<3;s++)if(n[s]!==a[s]){let e=-1,r=255;n[s]<a[s]?(e=ki.criticalPlaneBelow(ki.trueDelinearized(n[s])),r=ki.criticalPlaneAbove(ki.trueDelinearized(a[s]))):(e=ki.criticalPlaneAbove(ki.trueDelinearized(n[s])),r=ki.criticalPlaneBelow(ki.trueDelinearized(a[s])));for(let o=0;o<8&&!(Math.abs(r-e)<=1);o++){const o=Math.floor((e+r)/2),l=ki.CRITICAL_PLANES[o],u=ki.setCoordinate(n,l,a,s),c=ki.hueOf(u);ki.areInCyclicOrder(i,t,c)?(a=u,r=o):(n=u,i=c,e=o)}}return ki.midpoint(n,a)}static inverseChromaticAdaptation(e){const t=Math.abs(e),r=Math.max(0,27.13*t/(400-t));return li(e)*Math.pow(r,1/.42)}static findResultByJ(e,t,r){let n=11*Math.sqrt(r);const i=Ai.DEFAULT,a=1/Math.pow(1.64-Math.pow(.29,i.n),.73),s=.25*(Math.cos(e+2)+3.8)*(5e4/13)*i.nc*i.ncb,o=Math.sin(e),l=Math.cos(e);for(let u=0;u<5;u++){const e=n/100,c=0===t||0===n?0:t/Math.sqrt(e),d=Math.pow(c*a,1/.9),h=i.aw*Math.pow(e,1/i.c/i.z)/i.nbb,f=23*(h+.305)*d/(23*s+11*d*l+108*d*o),p=f*l,m=f*o,y=(460*h+451*p+288*m)/1403,g=(460*h-891*p-261*m)/1403,_=(460*h-220*p-6300*m)/1403,v=di([ki.inverseChromaticAdaptation(y),ki.inverseChromaticAdaptation(g),ki.inverseChromaticAdaptation(_)],ki.LINRGB_FROM_SCALED_DISCOUNT);if(v[0]<0||v[1]<0||v[2]<0)return 0;const b=ki.Y_FROM_LINRGB[0],w=ki.Y_FROM_LINRGB[1],x=ki.Y_FROM_LINRGB[2],I=b*v[0]+w*v[1]+x*v[2];if(I<=0)return 0;if(4===u||Math.abs(I-r)<.002)return v[0]>100.01||v[1]>100.01||v[2]>100.01?0:yi(v);n-=(I-r)*n/(2*I)}return 0}static solveToInt(e,t,r){if(t<1e-4||r<1e-4||r>99.9999)return function(e){const t=Ti(wi(e));return mi(t,t,t)}(r);var n;n=e,(n%=360)<0&&(n+=360);const i=(e=n)/180*Math.PI,a=wi(r),s=ki.findResultByJ(i,t,a);if(0!==s)return s;return yi(ki.bisectToLimit(a,i))}static solveToCam(e,t,r){return Si.fromInt(ki.solveToInt(e,t,r))}}ki.SCALED_DISCOUNT_FROM_LINRGB=[[.001200833568784504,.002389694492170889,.0002795742885861124],[.0005891086651375999,.0029785502573438758,.0003270666104008398],[.00010146692491640572,.0005364214359186694,.0032979401770712076]],ki.LINRGB_FROM_SCALED_DISCOUNT=[[1373.2198709594231,-1100.4251190754821,-7.278681089101213],[-271.815969077903,559.6580465940733,-32.46047482791194],[1.9622899599665666,-57.173814538844006,308.7233197812385]],ki.Y_FROM_LINRGB=[.2126,.7152,.0722],ki.CRITICAL_PLANES=[.015176349177441876,.045529047532325624,.07588174588720938,.10623444424209313,.13658714259697685,.16693984095186062,.19729253930674434,.2276452376616281,.2579979360165119,.28835063437139563,.3188300904430532,.350925934958123,.3848314933096426,.42057480301049466,.458183274052838,.4976837250274023,.5391024159806381,.5824650784040898,.6277969426914107,.6751227633498623,.7244668422128921,.775853049866786,.829304845476233,.8848452951698498,.942497089126609,1.0022825574869039,1.0642236851973577,1.1283421258858297,1.1946592148522128,1.2631959812511864,1.3339731595349034,1.407011200216447,1.4823302800086415,1.5599503113873272,1.6398909516233677,1.7221716113234105,1.8068114625156377,1.8938294463134073,1.9832442801866852,2.075074464868551,2.1693382909216234,2.2660538449872063,2.36523901573795,2.4669114995532007,2.5710888059345764,2.6777882626779785,2.7870270208169257,2.898822059350997,3.0131901897720907,3.1301480604002863,3.2497121605402226,3.3718988244681087,3.4967242352587946,3.624204428461639,3.754355295633311,3.887192587735158,4.022731918402185,4.160988767090289,4.301978482107941,4.445716283538092,4.592217266055746,4.741496401646282,4.893568542229298,5.048448422192488,5.20615066083972,5.3666897647573375,5.5300801301023865,5.696336044816294,5.865471690767354,6.037501145825082,6.212438385869475,6.390297286737924,6.571091626112461,6.7548350853498045,6.941541251256611,7.131223617812143,7.323895587840543,7.5195704746346665,7.7182615035334345,7.919981813454504,8.124744458384042,8.332562408825165,8.543448553206703,8.757415699253682,8.974476575321063,9.194643831691977,9.417930041841839,9.644347703669503,9.873909240696694,10.106627003236781,10.342513269534024,10.58158024687427,10.8238400726681,11.069304815507364,11.317986476196008,11.569896988756009,11.825048221409341,12.083451977536606,12.345119996613247,12.610063955123938,12.878295467455942,13.149826086772048,13.42466730586372,13.702830557985108,13.984327217668513,14.269168601521828,14.55736596900856,14.848930523210871,15.143873411576273,15.44220572664832,15.743938506781891,16.04908273684337,16.35764934889634,16.66964922287304,16.985093187232053,17.30399201960269,17.62635644741625,17.95219714852476,18.281524751807332,18.614349837764564,18.95068293910138,19.290534541298456,19.633915083172692,19.98083495742689,20.331304511189067,20.685334046541502,21.042933821039977,21.404114048223256,21.76888489811322,22.137256497705877,22.50923893145328,22.884842241736916,23.264076429332462,23.6469514538663,24.033477234264016,24.42366364919083,24.817520537484558,25.21505769858089,25.61628489293138,26.021211842414342,26.429848230738664,26.842203703840827,27.258287870275353,27.678110301598522,28.10168053274597,28.529008062403893,28.96010235337422,29.39497283293396,29.83362889318845,30.276079891419332,30.722335150426627,31.172403958865512,31.62629557157785,32.08401920991837,32.54558406207592,33.010999283389665,33.4802739966603,33.953417292456834,34.430438229418264,34.911345834551085,35.39614910352207,35.88485700094671,36.37747846067349,36.87402238606382,37.37449765026789,37.87891309649659,38.38727753828926,38.89959975977785,39.41588851594697,39.93615253289054,40.460400508064545,40.98864111053629,41.520882981230194,42.05713473317016,42.597404951718396,43.141702194811224,43.6900349931913,44.24241185063697,44.798841244188324,45.35933162437017,45.92389141541209,46.49252901546552,47.065252796817916,47.64207110610409,48.22299226451468,48.808024568002054,49.3971762874833,49.9904556690408,50.587870934119984,51.189430279724725,51.79514187861014,52.40501387947288,53.0190544071392,53.637271562750364,54.259673423945976,54.88626804504493,55.517063457223934,56.15206766869424,56.79128866487574,57.43473440856916,58.08241284012621,58.734331877617365,59.39049941699807,60.05092333227251,60.715611475655585,61.38457167773311,62.057811747619894,62.7353394731159,63.417162620860914,64.10328893648692,64.79372614476921,65.48848194977529,66.18756403501224,66.89098006357258,67.59873767827808,68.31084450182222,69.02730813691093,69.74813616640164,70.47333615344107,71.20291564160104,71.93688215501312,72.67524319850172,73.41800625771542,74.16517879925733,74.9167682708136,75.67278210128072,76.43322770089146,77.1981124613393,77.96744375590167,78.74122893956174,79.51947534912904,80.30219030335869,81.08938110306934,81.88105503125999,82.67721935322541,83.4778813166706,84.28304815182372,85.09272707154808,85.90692527145302,86.72564993000343,87.54890820862819,88.3767072518277,89.2090541872801,90.04595612594655,90.88742016217518,91.73345337380438,92.58406282226491,93.43925555268066,94.29903859396902,95.16341895893969,96.03240364439274,96.9059996312159,97.78421388448044,98.6670533535366,99.55452497210776];
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ci{static from(e,t,r){return new Ci(ki.solveToInt(e,t,r))}static fromInt(e){return new Ci(e)}toInt(){return this.argb}get hue(){return this.internalHue}set hue(e){this.setInternalState(ki.solveToInt(e,this.internalChroma,this.internalTone))}get chroma(){return this.internalChroma}set chroma(e){this.setInternalState(ki.solveToInt(this.internalHue,e,this.internalTone))}get tone(){return this.internalTone}set tone(e){this.setInternalState(ki.solveToInt(this.internalHue,this.internalChroma,e))}constructor(e){this.argb=e;const t=Si.fromInt(e);this.internalHue=t.hue,this.internalChroma=t.chroma,this.internalTone=bi(e),this.argb=e}setInternalState(e){const t=Si.fromInt(e);this.internalHue=t.hue,this.internalChroma=t.chroma,this.internalTone=bi(e),this.argb=e}inViewingConditions(e){const t=Si.fromInt(this.toInt()).xyzInViewingConditions(e),r=Si.fromXyzInViewingConditions(t[0],t[1],t[2],Ai.make());return Ci.from(r.hue,r.chroma,xi(t[1]))}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{static ratioOfTones(e,t){return e=ci(0,100,e),t=ci(0,100,t),Pi.ratioOfYs(wi(e),wi(t))}static ratioOfYs(e,t){const r=e>t?e:t;return(r+5)/((r===t?e:t)+5)}static lighter(e,t){if(e<0||e>100)return-1;const r=wi(e),n=t*(r+5)-5,i=Pi.ratioOfYs(n,r),a=Math.abs(i-t);if(i<t&&a>.04)return-1;const s=xi(n)+.4;return s<0||s>100?-1:s}static darker(e,t){if(e<0||e>100)return-1;const r=wi(e),n=(r+5)/t-5,i=Pi.ratioOfYs(r,n),a=Math.abs(i-t);if(i<t&&a>.04)return-1;const s=xi(n)-.4;return s<0||s>100?-1:s}static lighterUnsafe(e,t){const r=Pi.lighter(e,t);return r<0?100:r}static darkerUnsafe(e,t){const r=Pi.darker(e,t);return r<0?0:r}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{static isDisliked(e){const t=Math.round(e.hue)>=90&&Math.round(e.hue)<=111,r=Math.round(e.chroma)>16,n=Math.round(e.tone)<65;return t&&r&&n}static fixIfDisliked(e){return Ri.isDisliked(e)?Ci.from(e.hue,e.chroma,70):e}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{static fromPalette(e){return new Mi(e.name??"",e.palette,e.tone,e.isBackground??!1,e.background,e.secondBackground,e.contrastCurve,e.toneDeltaPair)}constructor(e,t,r,n,i,a,s,o){if(this.name=e,this.palette=t,this.tone=r,this.isBackground=n,this.background=i,this.secondBackground=a,this.contrastCurve=s,this.toneDeltaPair=o,this.hctCache=new Map,!i&&a)throw new Error(`Color ${e} has secondBackgrounddefined, but background is not defined.`);if(!i&&s)throw new Error(`Color ${e} has contrastCurvedefined, but background is not defined.`);if(i&&!s)throw new Error(`Color ${e} has backgrounddefined, but contrastCurve is not defined.`)}getArgb(e){return this.getHct(e).toInt()}getHct(e){const t=this.hctCache.get(e);if(null!=t)return t;const r=this.getTone(e),n=this.palette(e).getHct(r);return this.hctCache.size>4&&this.hctCache.clear(),this.hctCache.set(e,n),n}getTone(e){const t=e.contrastLevel<0;if(this.toneDeltaPair){const r=this.toneDeltaPair(e),n=r.roleA,i=r.roleB,a=r.delta,s=r.polarity,o=r.stayTogether,l=this.background(e).getTone(e),u="nearer"===s||"lighter"===s&&!e.isDark||"darker"===s&&e.isDark,c=u?n:i,d=u?i:n,h=this.name===c.name,f=e.isDark?1:-1,p=c.contrastCurve.getContrast(e.contrastLevel),m=d.contrastCurve.getContrast(e.contrastLevel),y=c.tone(e);let g=Pi.ratioOfTones(l,y)>=p?y:Mi.foregroundTone(l,p);const _=d.tone(e);let v=Pi.ratioOfTones(l,_)>=m?_:Mi.foregroundTone(l,m);return t&&(g=Mi.foregroundTone(l,p),v=Mi.foregroundTone(l,m)),(v-g)*f>=a||(v=ci(0,100,g+a*f),(v-g)*f>=a||(g=ci(0,100,v-a*f))),50<=g&&g<60?f>0?(g=60,v=Math.max(v,g+a*f)):(g=49,v=Math.min(v,g+a*f)):50<=v&&v<60&&(o?f>0?(g=60,v=Math.max(v,g+a*f)):(g=49,v=Math.min(v,g+a*f)):v=f>0?60:49),h?g:v}{let r=this.tone(e);if(null==this.background)return r;const n=this.background(e).getTone(e),i=this.contrastCurve.getContrast(e.contrastLevel);if(Pi.ratioOfTones(n,r)>=i||(r=Mi.foregroundTone(n,i)),t&&(r=Mi.foregroundTone(n,i)),this.isBackground&&50<=r&&r<60&&(r=Pi.ratioOfTones(49,n)>=i?49:60),this.secondBackground){const[t,n]=[this.background,this.secondBackground],[a,s]=[t(e).getTone(e),n(e).getTone(e)],[o,l]=[Math.max(a,s),Math.min(a,s)];if(Pi.ratioOfTones(o,r)>=i&&Pi.ratioOfTones(l,r)>=i)return r;const u=Pi.lighter(o,i),c=Pi.darker(l,i),d=[];-1!==u&&d.push(u),-1!==c&&d.push(c);return Mi.tonePrefersLightForeground(a)||Mi.tonePrefersLightForeground(s)?u<0?100:u:1===d.length?d[0]:c<0?0:c}return r}}static foregroundTone(e,t){const r=Pi.lighterUnsafe(e,t),n=Pi.darkerUnsafe(e,t),i=Pi.ratioOfTones(r,e),a=Pi.ratioOfTones(n,e);if(Mi.tonePrefersLightForeground(e)){const e=Math.abs(i-a)<.1&&i<t&&a<t;return i>=t||i>=a||e?r:n}return a>=t||a>=i?n:r}static tonePrefersLightForeground(e){return Math.round(e)<60}static toneAllowsLightForeground(e){return Math.round(e)<=49}static enableLightForeground(e){return Mi.tonePrefersLightForeground(e)&&!Mi.toneAllowsLightForeground(e)?49:e}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Li;!function(e){e[e.MONOCHROME=0]="MONOCHROME",e[e.NEUTRAL=1]="NEUTRAL",e[e.TONAL_SPOT=2]="TONAL_SPOT",e[e.VIBRANT=3]="VIBRANT",e[e.EXPRESSIVE=4]="EXPRESSIVE",e[e.FIDELITY=5]="FIDELITY",e[e.CONTENT=6]="CONTENT",e[e.RAINBOW=7]="RAINBOW",e[e.FRUIT_SALAD=8]="FRUIT_SALAD"}(Li||(Li={}));
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Oi{constructor(e,t,r,n){this.low=e,this.normal=t,this.medium=r,this.high=n}getContrast(e){return e<=-1?this.low:e<0?ui(this.low,this.normal,(e- -1)/1):e<.5?ui(this.normal,this.medium,(e-0)/.5):e<1?ui(this.medium,this.high,(e-.5)/.5):this.high}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,t,r,n,i){this.roleA=e,this.roleB=t,this.delta=r,this.polarity=n,this.stayTogether=i}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(e){return e.variant===Li.FIDELITY||e.variant===Li.CONTENT}function Ni(e){return e.variant===Li.MONOCHROME}function Bi(e,t){const r=e.inViewingConditions(function(e){return Ai.make(void 0,void 0,e.isDark?30:80,void 0,void 0)}(t));return Mi.tonePrefersLightForeground(e.tone)&&!Mi.toneAllowsLightForeground(r.tone)?Mi.enableLightForeground(e.tone):Mi.enableLightForeground(r.tone)}class Ui{static highestSurface(e){return e.isDark?Ui.surfaceBright:Ui.surfaceDim}}Ui.contentAccentToneDelta=15,Ui.primaryPaletteKeyColor=Mi.fromPalette({name:"primary_palette_key_color",palette:e=>e.primaryPalette,tone:e=>e.primaryPalette.keyColor.tone}),Ui.secondaryPaletteKeyColor=Mi.fromPalette({name:"secondary_palette_key_color",palette:e=>e.secondaryPalette,tone:e=>e.secondaryPalette.keyColor.tone}),Ui.tertiaryPaletteKeyColor=Mi.fromPalette({name:"tertiary_palette_key_color",palette:e=>e.tertiaryPalette,tone:e=>e.tertiaryPalette.keyColor.tone}),Ui.neutralPaletteKeyColor=Mi.fromPalette({name:"neutral_palette_key_color",palette:e=>e.neutralPalette,tone:e=>e.neutralPalette.keyColor.tone}),Ui.neutralVariantPaletteKeyColor=Mi.fromPalette({name:"neutral_variant_palette_key_color",palette:e=>e.neutralVariantPalette,tone:e=>e.neutralVariantPalette.keyColor.tone}),Ui.background=Mi.fromPalette({name:"background",palette:e=>e.neutralPalette,tone:e=>e.isDark?6:98,isBackground:!0}),Ui.onBackground=Mi.fromPalette({name:"on_background",palette:e=>e.neutralPalette,tone:e=>e.isDark?90:10,background:e=>Ui.background,contrastCurve:new Oi(3,3,4.5,7)}),Ui.surface=Mi.fromPalette({name:"surface",palette:e=>e.neutralPalette,tone:e=>e.isDark?6:98,isBackground:!0}),Ui.surfaceDim=Mi.fromPalette({name:"surface_dim",palette:e=>e.neutralPalette,tone:e=>e.isDark?6:87,isBackground:!0}),Ui.surfaceBright=Mi.fromPalette({name:"surface_bright",palette:e=>e.neutralPalette,tone:e=>e.isDark?24:98,isBackground:!0}),Ui.surfaceContainerLowest=Mi.fromPalette({name:"surface_container_lowest",palette:e=>e.neutralPalette,tone:e=>e.isDark?4:100,isBackground:!0}),Ui.surfaceContainerLow=Mi.fromPalette({name:"surface_container_low",palette:e=>e.neutralPalette,tone:e=>e.isDark?10:96,isBackground:!0}),Ui.surfaceContainer=Mi.fromPalette({name:"surface_container",palette:e=>e.neutralPalette,tone:e=>e.isDark?12:94,isBackground:!0}),Ui.surfaceContainerHigh=Mi.fromPalette({name:"surface_container_high",palette:e=>e.neutralPalette,tone:e=>e.isDark?17:92,isBackground:!0}),Ui.surfaceContainerHighest=Mi.fromPalette({name:"surface_container_highest",palette:e=>e.neutralPalette,tone:e=>e.isDark?22:90,isBackground:!0}),Ui.onSurface=Mi.fromPalette({name:"on_surface",palette:e=>e.neutralPalette,tone:e=>e.isDark?90:10,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(4.5,7,11,21)}),Ui.surfaceVariant=Mi.fromPalette({name:"surface_variant",palette:e=>e.neutralVariantPalette,tone:e=>e.isDark?30:90,isBackground:!0}),Ui.onSurfaceVariant=Mi.fromPalette({name:"on_surface_variant",palette:e=>e.neutralVariantPalette,tone:e=>e.isDark?80:30,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(3,4.5,7,11)}),Ui.inverseSurface=Mi.fromPalette({name:"inverse_surface",palette:e=>e.neutralPalette,tone:e=>e.isDark?90:20}),Ui.inverseOnSurface=Mi.fromPalette({name:"inverse_on_surface",palette:e=>e.neutralPalette,tone:e=>e.isDark?20:95,background:e=>Ui.inverseSurface,contrastCurve:new Oi(4.5,7,11,21)}),Ui.outline=Mi.fromPalette({name:"outline",palette:e=>e.neutralVariantPalette,tone:e=>e.isDark?60:50,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(1.5,3,4.5,7)}),Ui.outlineVariant=Mi.fromPalette({name:"outline_variant",palette:e=>e.neutralVariantPalette,tone:e=>e.isDark?30:80,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(1,1,3,7)}),Ui.shadow=Mi.fromPalette({name:"shadow",palette:e=>e.neutralPalette,tone:e=>0}),Ui.scrim=Mi.fromPalette({name:"scrim",palette:e=>e.neutralPalette,tone:e=>0}),Ui.surfaceTint=Mi.fromPalette({name:"surface_tint",palette:e=>e.primaryPalette,tone:e=>e.isDark?80:40,isBackground:!0}),Ui.primary=Mi.fromPalette({name:"primary",palette:e=>e.primaryPalette,tone:e=>Ni(e)?e.isDark?100:0:e.isDark?80:40,isBackground:!0,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(3,4.5,7,11),toneDeltaPair:e=>new Fi(Ui.primaryContainer,Ui.primary,15,"nearer",!1)}),Ui.onPrimary=Mi.fromPalette({name:"on_primary",palette:e=>e.primaryPalette,tone:e=>Ni(e)?e.isDark?10:90:e.isDark?20:100,background:e=>Ui.primary,contrastCurve:new Oi(4.5,7,11,21)}),Ui.primaryContainer=Mi.fromPalette({name:"primary_container",palette:e=>e.primaryPalette,tone:e=>Di(e)?Bi(e.sourceColorHct,e):Ni(e)?e.isDark?85:25:e.isDark?30:90,isBackground:!0,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(1,1,3,7),toneDeltaPair:e=>new Fi(Ui.primaryContainer,Ui.primary,15,"nearer",!1)}),Ui.onPrimaryContainer=Mi.fromPalette({name:"on_primary_container",palette:e=>e.primaryPalette,tone:e=>Di(e)?Mi.foregroundTone(Ui.primaryContainer.tone(e),4.5):Ni(e)?e.isDark?0:100:e.isDark?90:10,background:e=>Ui.primaryContainer,contrastCurve:new Oi(4.5,7,11,21)}),Ui.inversePrimary=Mi.fromPalette({name:"inverse_primary",palette:e=>e.primaryPalette,tone:e=>e.isDark?40:80,background:e=>Ui.inverseSurface,contrastCurve:new Oi(3,4.5,7,11)}),Ui.secondary=Mi.fromPalette({name:"secondary",palette:e=>e.secondaryPalette,tone:e=>e.isDark?80:40,isBackground:!0,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(3,4.5,7,11),toneDeltaPair:e=>new Fi(Ui.secondaryContainer,Ui.secondary,15,"nearer",!1)}),Ui.onSecondary=Mi.fromPalette({name:"on_secondary",palette:e=>e.secondaryPalette,tone:e=>Ni(e)?e.isDark?10:100:e.isDark?20:100,background:e=>Ui.secondary,contrastCurve:new Oi(4.5,7,11,21)}),Ui.secondaryContainer=Mi.fromPalette({name:"secondary_container",palette:e=>e.secondaryPalette,tone:e=>{const t=e.isDark?30:90;if(Ni(e))return e.isDark?30:85;if(!Di(e))return t;let r=function(e,t,r,n){let i=r,a=Ci.from(e,t,r);if(a.chroma<t){let r=a.chroma;for(;a.chroma<t;){i+=n?-1:1;const s=Ci.from(e,t,i);if(r>s.chroma)break;if(Math.abs(s.chroma-t)<.4)break;Math.abs(s.chroma-t)<Math.abs(a.chroma-t)&&(a=s),r=Math.max(r,s.chroma)}}return i}(e.secondaryPalette.hue,e.secondaryPalette.chroma,t,!e.isDark);return r=Bi(e.secondaryPalette.getHct(r),e),r},isBackground:!0,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(1,1,3,7),toneDeltaPair:e=>new Fi(Ui.secondaryContainer,Ui.secondary,15,"nearer",!1)}),Ui.onSecondaryContainer=Mi.fromPalette({name:"on_secondary_container",palette:e=>e.secondaryPalette,tone:e=>Di(e)?Mi.foregroundTone(Ui.secondaryContainer.tone(e),4.5):e.isDark?90:10,background:e=>Ui.secondaryContainer,contrastCurve:new Oi(4.5,7,11,21)}),Ui.tertiary=Mi.fromPalette({name:"tertiary",palette:e=>e.tertiaryPalette,tone:e=>Ni(e)?e.isDark?90:25:e.isDark?80:40,isBackground:!0,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(3,4.5,7,11),toneDeltaPair:e=>new Fi(Ui.tertiaryContainer,Ui.tertiary,15,"nearer",!1)}),Ui.onTertiary=Mi.fromPalette({name:"on_tertiary",palette:e=>e.tertiaryPalette,tone:e=>Ni(e)?e.isDark?10:90:e.isDark?20:100,background:e=>Ui.tertiary,contrastCurve:new Oi(4.5,7,11,21)}),Ui.tertiaryContainer=Mi.fromPalette({name:"tertiary_container",palette:e=>e.tertiaryPalette,tone:e=>{if(Ni(e))return e.isDark?60:49;if(!Di(e))return e.isDark?30:90;const t=Bi(e.tertiaryPalette.getHct(e.sourceColorHct.tone),e),r=e.tertiaryPalette.getHct(t);return Ri.fixIfDisliked(r).tone},isBackground:!0,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(1,1,3,7),toneDeltaPair:e=>new Fi(Ui.tertiaryContainer,Ui.tertiary,15,"nearer",!1)}),Ui.onTertiaryContainer=Mi.fromPalette({name:"on_tertiary_container",palette:e=>e.tertiaryPalette,tone:e=>Ni(e)?e.isDark?0:100:Di(e)?Mi.foregroundTone(Ui.tertiaryContainer.tone(e),4.5):e.isDark?90:10,background:e=>Ui.tertiaryContainer,contrastCurve:new Oi(4.5,7,11,21)}),Ui.error=Mi.fromPalette({name:"error",palette:e=>e.errorPalette,tone:e=>e.isDark?80:40,isBackground:!0,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(3,4.5,7,11),toneDeltaPair:e=>new Fi(Ui.errorContainer,Ui.error,15,"nearer",!1)}),Ui.onError=Mi.fromPalette({name:"on_error",palette:e=>e.errorPalette,tone:e=>e.isDark?20:100,background:e=>Ui.error,contrastCurve:new Oi(4.5,7,11,21)}),Ui.errorContainer=Mi.fromPalette({name:"error_container",palette:e=>e.errorPalette,tone:e=>e.isDark?30:90,isBackground:!0,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(1,1,3,7),toneDeltaPair:e=>new Fi(Ui.errorContainer,Ui.error,15,"nearer",!1)}),Ui.onErrorContainer=Mi.fromPalette({name:"on_error_container",palette:e=>e.errorPalette,tone:e=>e.isDark?90:10,background:e=>Ui.errorContainer,contrastCurve:new Oi(4.5,7,11,21)}),Ui.primaryFixed=Mi.fromPalette({name:"primary_fixed",palette:e=>e.primaryPalette,tone:e=>Ni(e)?40:90,isBackground:!0,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(1,1,3,7),toneDeltaPair:e=>new Fi(Ui.primaryFixed,Ui.primaryFixedDim,10,"lighter",!0)}),Ui.primaryFixedDim=Mi.fromPalette({name:"primary_fixed_dim",palette:e=>e.primaryPalette,tone:e=>Ni(e)?30:80,isBackground:!0,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(1,1,3,7),toneDeltaPair:e=>new Fi(Ui.primaryFixed,Ui.primaryFixedDim,10,"lighter",!0)}),Ui.onPrimaryFixed=Mi.fromPalette({name:"on_primary_fixed",palette:e=>e.primaryPalette,tone:e=>Ni(e)?100:10,background:e=>Ui.primaryFixedDim,secondBackground:e=>Ui.primaryFixed,contrastCurve:new Oi(4.5,7,11,21)}),Ui.onPrimaryFixedVariant=Mi.fromPalette({name:"on_primary_fixed_variant",palette:e=>e.primaryPalette,tone:e=>Ni(e)?90:30,background:e=>Ui.primaryFixedDim,secondBackground:e=>Ui.primaryFixed,contrastCurve:new Oi(3,4.5,7,11)}),Ui.secondaryFixed=Mi.fromPalette({name:"secondary_fixed",palette:e=>e.secondaryPalette,tone:e=>Ni(e)?80:90,isBackground:!0,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(1,1,3,7),toneDeltaPair:e=>new Fi(Ui.secondaryFixed,Ui.secondaryFixedDim,10,"lighter",!0)}),Ui.secondaryFixedDim=Mi.fromPalette({name:"secondary_fixed_dim",palette:e=>e.secondaryPalette,tone:e=>Ni(e)?70:80,isBackground:!0,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(1,1,3,7),toneDeltaPair:e=>new Fi(Ui.secondaryFixed,Ui.secondaryFixedDim,10,"lighter",!0)}),Ui.onSecondaryFixed=Mi.fromPalette({name:"on_secondary_fixed",palette:e=>e.secondaryPalette,tone:e=>10,background:e=>Ui.secondaryFixedDim,secondBackground:e=>Ui.secondaryFixed,contrastCurve:new Oi(4.5,7,11,21)}),Ui.onSecondaryFixedVariant=Mi.fromPalette({name:"on_secondary_fixed_variant",palette:e=>e.secondaryPalette,tone:e=>Ni(e)?25:30,background:e=>Ui.secondaryFixedDim,secondBackground:e=>Ui.secondaryFixed,contrastCurve:new Oi(3,4.5,7,11)}),Ui.tertiaryFixed=Mi.fromPalette({name:"tertiary_fixed",palette:e=>e.tertiaryPalette,tone:e=>Ni(e)?40:90,isBackground:!0,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(1,1,3,7),toneDeltaPair:e=>new Fi(Ui.tertiaryFixed,Ui.tertiaryFixedDim,10,"lighter",!0)}),Ui.tertiaryFixedDim=Mi.fromPalette({name:"tertiary_fixed_dim",palette:e=>e.tertiaryPalette,tone:e=>Ni(e)?30:80,isBackground:!0,background:e=>Ui.highestSurface(e),contrastCurve:new Oi(1,1,3,7),toneDeltaPair:e=>new Fi(Ui.tertiaryFixed,Ui.tertiaryFixedDim,10,"lighter",!0)}),Ui.onTertiaryFixed=Mi.fromPalette({name:"on_tertiary_fixed",palette:e=>e.tertiaryPalette,tone:e=>Ni(e)?100:10,background:e=>Ui.tertiaryFixedDim,secondBackground:e=>Ui.tertiaryFixed,contrastCurve:new Oi(4.5,7,11,21)}),Ui.onTertiaryFixedVariant=Mi.fromPalette({name:"on_tertiary_fixed_variant",palette:e=>e.tertiaryPalette,tone:e=>Ni(e)?90:30,background:e=>Ui.tertiaryFixedDim,secondBackground:e=>Ui.tertiaryFixed,contrastCurve:new Oi(3,4.5,7,11)});
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ji{static fromInt(e){const t=Ci.fromInt(e);return ji.fromHct(t)}static fromHct(e){return new ji(e.hue,e.chroma,e)}static fromHueAndChroma(e,t){return new ji(e,t,ji.createKeyColor(e,t))}constructor(e,t,r){this.hue=e,this.chroma=t,this.keyColor=r,this.cache=new Map}static createKeyColor(e,t){let r=Ci.from(e,t,50),n=Math.abs(r.chroma-t);for(let i=1;i<50;i+=1){if(Math.round(t)===Math.round(r.chroma))return r;const a=Ci.from(e,t,50+i),s=Math.abs(a.chroma-t);s<n&&(n=s,r=a);const o=Ci.from(e,t,50-i),l=Math.abs(o.chroma-t);l<n&&(n=l,r=o)}return r}tone(e){let t=this.cache.get(e);return void 0===t&&(t=Ci.from(this.hue,this.chroma,e).toInt(),this.cache.set(e,t)),t}getHct(e){return Ci.fromInt(this.tone(e))}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{static of(e){return new Gi(e,!1)}static contentOf(e){return new Gi(e,!0)}static fromColors(e){return Gi.createPaletteFromColors(!1,e)}static contentFromColors(e){return Gi.createPaletteFromColors(!0,e)}static createPaletteFromColors(e,t){const r=new Gi(t.primary,e);if(t.secondary){const n=new Gi(t.secondary,e);r.a2=n.a1}if(t.tertiary){const n=new Gi(t.tertiary,e);r.a3=n.a1}if(t.error){const n=new Gi(t.error,e);r.error=n.a1}if(t.neutral){const n=new Gi(t.neutral,e);r.n1=n.n1}if(t.neutralVariant){const n=new Gi(t.neutralVariant,e);r.n2=n.n2}return r}constructor(e,t){const r=Ci.fromInt(e),n=r.hue,i=r.chroma;t?(this.a1=ji.fromHueAndChroma(n,i),this.a2=ji.fromHueAndChroma(n,i/3),this.a3=ji.fromHueAndChroma(n+60,i/2),this.n1=ji.fromHueAndChroma(n,Math.min(i/12,4)),this.n2=ji.fromHueAndChroma(n,Math.min(i/6,8))):(this.a1=ji.fromHueAndChroma(n,Math.max(48,i)),this.a2=ji.fromHueAndChroma(n,16),this.a3=ji.fromHueAndChroma(n+60,24),this.n1=ji.fromHueAndChroma(n,4),this.n2=ji.fromHueAndChroma(n,8)),this.error=ji.fromHueAndChroma(25,84)}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{get primary(){return this.props.primary}get onPrimary(){return this.props.onPrimary}get primaryContainer(){return this.props.primaryContainer}get onPrimaryContainer(){return this.props.onPrimaryContainer}get secondary(){return this.props.secondary}get onSecondary(){return this.props.onSecondary}get secondaryContainer(){return this.props.secondaryContainer}get onSecondaryContainer(){return this.props.onSecondaryContainer}get tertiary(){return this.props.tertiary}get onTertiary(){return this.props.onTertiary}get tertiaryContainer(){return this.props.tertiaryContainer}get onTertiaryContainer(){return this.props.onTertiaryContainer}get error(){return this.props.error}get onError(){return this.props.onError}get errorContainer(){return this.props.errorContainer}get onErrorContainer(){return this.props.onErrorContainer}get background(){return this.props.background}get onBackground(){return this.props.onBackground}get surface(){return this.props.surface}get onSurface(){return this.props.onSurface}get surfaceVariant(){return this.props.surfaceVariant}get onSurfaceVariant(){return this.props.onSurfaceVariant}get outline(){return this.props.outline}get outlineVariant(){return this.props.outlineVariant}get shadow(){return this.props.shadow}get scrim(){return this.props.scrim}get inverseSurface(){return this.props.inverseSurface}get inverseOnSurface(){return this.props.inverseOnSurface}get inversePrimary(){return this.props.inversePrimary}static light(e){return zi.lightFromCorePalette(Gi.of(e))}static dark(e){return zi.darkFromCorePalette(Gi.of(e))}static lightContent(e){return zi.lightFromCorePalette(Gi.contentOf(e))}static darkContent(e){return zi.darkFromCorePalette(Gi.contentOf(e))}static lightFromCorePalette(e){return new zi({primary:e.a1.tone(40),onPrimary:e.a1.tone(100),primaryContainer:e.a1.tone(90),onPrimaryContainer:e.a1.tone(10),secondary:e.a2.tone(40),onSecondary:e.a2.tone(100),secondaryContainer:e.a2.tone(90),onSecondaryContainer:e.a2.tone(10),tertiary:e.a3.tone(40),onTertiary:e.a3.tone(100),tertiaryContainer:e.a3.tone(90),onTertiaryContainer:e.a3.tone(10),error:e.error.tone(40),onError:e.error.tone(100),errorContainer:e.error.tone(90),onErrorContainer:e.error.tone(10),background:e.n1.tone(99),onBackground:e.n1.tone(10),surface:e.n1.tone(99),onSurface:e.n1.tone(10),surfaceVariant:e.n2.tone(90),onSurfaceVariant:e.n2.tone(30),outline:e.n2.tone(50),outlineVariant:e.n2.tone(80),shadow:e.n1.tone(0),scrim:e.n1.tone(0),inverseSurface:e.n1.tone(20),inverseOnSurface:e.n1.tone(95),inversePrimary:e.a1.tone(80)})}static darkFromCorePalette(e){return new zi({primary:e.a1.tone(80),onPrimary:e.a1.tone(20),primaryContainer:e.a1.tone(30),onPrimaryContainer:e.a1.tone(90),secondary:e.a2.tone(80),onSecondary:e.a2.tone(20),secondaryContainer:e.a2.tone(30),onSecondaryContainer:e.a2.tone(90),tertiary:e.a3.tone(80),onTertiary:e.a3.tone(20),tertiaryContainer:e.a3.tone(30),onTertiaryContainer:e.a3.tone(90),error:e.error.tone(80),onError:e.error.tone(20),errorContainer:e.error.tone(30),onErrorContainer:e.error.tone(80),background:e.n1.tone(10),onBackground:e.n1.tone(90),surface:e.n1.tone(10),onSurface:e.n1.tone(90),surfaceVariant:e.n2.tone(30),onSurfaceVariant:e.n2.tone(80),outline:e.n2.tone(60),outlineVariant:e.n2.tone(30),shadow:e.n1.tone(0),scrim:e.n1.tone(0),inverseSurface:e.n1.tone(90),inverseOnSurface:e.n1.tone(20),inversePrimary:e.a1.tone(40)})}constructor(e){this.props=e}toJSON(){return{...this.props}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(e){return parseInt(e,16)}const Vi=e=>({r:gi(e),g:_i(e),b:vi(e)}),$i=(e,t={type:"rgb"})=>{const r=function(e){const t=3===(e=e.replace("#","")).length,r=6===e.length,n=8===e.length;if(!t&&!r&&!n)throw new Error("unexpected hex "+e);let i=0,a=0,s=0;return t?(i=Hi(e.slice(0,1).repeat(2)),a=Hi(e.slice(1,2).repeat(2)),s=Hi(e.slice(2,3).repeat(2))):r?(i=Hi(e.slice(0,2)),a=Hi(e.slice(2,4)),s=Hi(e.slice(4,6))):n&&(i=Hi(e.slice(2,4)),a=Hi(e.slice(4,6)),s=Hi(e.slice(6,8))),(255<<24|(255&i)<<16|(255&a)<<8|255&s)>>>0}(e),{type:n}=t,i={light:zi.light(r).toJSON(),dark:zi.dark(r).toJSON()},a=Gi.of(r);return Object.assign(i.light,{"surface-dim":a.n1.tone(87),"surface-bright":a.n1.tone(98),"surface-container-lowest":a.n1.tone(100),"surface-container-low":a.n1.tone(96),"surface-container":a.n1.tone(94),"surface-container-high":a.n1.tone(92),"surface-container-highest":a.n1.tone(90),"surface-tint-color":i.light.primary}),Object.assign(i.dark,{"surface-dim":a.n1.tone(6),"surface-bright":a.n1.tone(24),"surface-container-lowest":a.n1.tone(4),"surface-container-low":a.n1.tone(10),"surface-container":a.n1.tone(12),"surface-container-high":a.n1.tone(17),"surface-container-highest":a.n1.tone(22),"surface-tint-color":i.dark.primary}),((e,t)=>{for(const r in e)if(e.hasOwnProperty(r)){const n=e[r];for(const e in n)if(n.hasOwnProperty(e)){const r=n[e];if("number"==typeof r){const i=Vi(r);"rgb"===t?n[e]=i:"hsl"===t?n[e]=oi(i.r,i.g,i.b):"hex"===t&&(n[e]=si(i.r,i.g,i.b))}}}})(i,n),i},Xi=e=>{const[r,n,i]=[...t(e)];return{r:r,g:n,b:i}},qi=(e,t)=>{if(!e.startsWith("--"))throw new Error("Variable name must start with '--'");const r=document.body;getComputedStyle(r).getPropertyValue(e).trim()!==t&&r.style.setProperty(e,t)},Wi=(e,t)=>{const n=r(),i="string"==typeof e?$i(e):e;if(!i)throw new Error("Color data not found");const a=i[t],s={};!n.themeGlobalColor&&a&&(a.background="dark"===t?{r:16,g:16,b:20}:{r:239,g:239,b:239},a["surface-container"]="dark"===t?{r:24,g:24,b:28}:{r:255,g:255,b:255});for(const r in a){const e=a[r];if("object"==typeof e&&"r"in e&&"g"in e&&"b"in e){const t=si(e.r,e.g,e.b);s[`${r}-hex`]=t,s[r]=`${e.r}, ${e.g}, ${e.b}`,qi(`--${r}`,`${e.r}, ${e.g}, ${e.b}`),qi(`--${r}-hex`,t)}else console.error(`Invalid color data for key: ${r}`)}return s},Yi={default:{label:"default",name:"默认",color:"#fe7971"},orange:{label:"orange",name:"橙色",color:"#ff8c00"},blue:{label:"blue",name:"蓝色",color:"#3b5998"},pink:{label:"pink",name:"粉色",color:"#e91e63"},brown:{label:"brown",name:"棕色",color:"#795548"},indigo:{label:"indigo",name:"靛青色",color:"#3f51b5"},green:{label:"green",name:"绿色",color:"#2ecc71"},purple:{label:"purple",name:"紫色",color:"#9c27b0"},yellow:{label:"yellow",name:"黄色",color:"#FBC02D"},teal:{label:"teal",name:"青色",color:"#009688"},custom:{label:"custom",name:"自定义",color:""}},Ki=n({__name:"Provider",setup(e){const t=i(),L=r(),O=a(),F=s({}),D=o(()=>"auto"===L.themeMode?"dark"===O.value?l:null:"dark"===L.themeMode?l:null),N=()=>{try{const e=(()=>{const e=D.value?"dark":"light";if(L.themeFollowCover&&t.songCoverTheme){const r=t.songCoverTheme;return r?Wi(r,e):{}}return"custom"!==L.themeColorType?Wi(Yi[L.themeColorType].color,e):Wi(L.themeCustomColor,e)})();if(!e||0===Object.keys(e).length)return void(F.value={});F.value=L.themeGlobalColor?{common:{fontFamily:`${"default"===L.globalFont?"v-sans":L.globalFont}, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"`,primaryColor:`rgb(${e.primary})`,primaryColorHover:`rgba(${e.primary}, 0.78)`,primaryColorPressed:`rgba(${e.primary}, 0.26)`,primaryColorSuppl:`rgba(${e.primary}, 0.12)`,textColorBase:e.primary,textColor1:`rgb(${e.primary})`,textColor2:`rgba(${e.primary}, 0.82)`,textColor3:`rgba(${e.primary}, 0.52)`,bodyColor:`rgb(${e.background})`,cardColor:`rgb(${e["surface-container"]})`,tagColor:`rgb(${e["surface-container"]})`,modalColor:`rgb(${e["surface-container"]})`,popoverColor:`rgb(${e["surface-container"]})`,buttonColor2:`rgba(${e.primary}, 0.08)`,buttonColor2Hover:`rgba(${e.primary}, 0.12)`,buttonColor2Pressed:`rgba(${e.primary}, 0.08)`,iconColor:`rgb(${e.primary})`,iconColorHover:`rgba(${e.primary}, 0.475)`,closeIconColor:`rgba(${e.primary}, 0.58)`,hoverColor:`rgba(${e.primary}, 0.09)`,borderColor:`rgba(${e.primary}, 0.09)`,textColorDisabled:`rgba(${e.primary}, 0.3)`,placeholderColorDisabled:`rgba(${e.primary}, 0.3)`,iconColorDisabled:`rgba(${e.primary}, 0.3)`},Card:{borderColor:`rgba(${e.primary}, 0.09)`},Button:{textColorHover:`rgba(${e.primary}, 0.78)`,textColorFocus:`rgba(${e.primary}, 0.58)`,colorPrimary:`rgba(${e.primary}, 0.9)`,colorHoverPrimary:`rgb(${e.primary})`,colorPressedPrimary:`rgba(${e.primary}, 0.8)`,colorFocusPrimary:`rgb(${e.primary})`},Slider:{handleColor:`rgb(${e.primary})`,fillColor:`rgb(${e.primary})`,fillColorHover:`rgb(${e.primary})`,railColor:`rgba(${e.primary}, 0.2)`,railColorHover:`rgba(${e.primary}, 0.3)`},Switch:{railColorActive:`rgba(${e.primary}, 0.8)`},Input:{color:`rgba(${e.primary}, 0.1)`,colorFocus:`rgb(${e["surface-container"]})`,placeholderColor:`rgba(${e.primary}, 0.58)`,border:`1px solid rgba(${e.primary}, 0.1)`,clearColor:`rgba(${e.primary}, 0.38)`,clearColorHover:`rgba(${e.primary}, 0.48)`,clearColorPressed:`rgba(${e.primary}, 0.3)`},Icon:{color:`rgb(${e.primary})`},Empty:{textColor:`rgba(${e.primary}, 0.38)`},Divider:{color:`rgba(${e.primary}, 0.09)`},Dropdown:{dividerColor:`rgba(${e.primary}, 0.09)`},Layout:{siderBorderColor:`rgba(${e.primary}, 0.09)`},Tabs:{colorSegment:`rgba(${e.primary}, 0.08)`,tabColorSegment:`rgba(${e.primary}, 0.12)`},Drawer:{headerBorderBottom:`1px solid rgba(${e.primary}, 0.09)`,footerBorderTop:`1px solid rgba(${e.primary}, 0.09)`},Menu:{dividerColor:`rgba(${e.primary}, 0.09)`},Progress:{railColor:`rgba(${e.primary}, 0.16)`},Popover:{color:`rgb(${e["surface-container"]})`}}:{common:{fontFamily:`${"default"===L.globalFont?"v-sans":L.globalFont}, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"`,primaryColor:`rgb(${e.primary})`,primaryColorHover:`rgba(${e.primary}, 0.78)`,primaryColorPressed:`rgba(${e.primary}, 0.26)`,primaryColorSuppl:`rgba(${e.primary}, 0.12)`},Icon:{color:`rgb(${e.primary})`},Slider:{handleColor:`rgb(${e.primary})`,fillColor:`rgb(${e.primary})`,fillColorHover:`rgb(${e.primary})`,railColor:`rgba(${e.primary}, 0.2)`,railColorHover:`rgba(${e.primary}, 0.3)`},Popover:{color:`rgb(${e["surface-container"]})`}}}catch(e){F.value={},console.error("切换主题色出现错误：",e),window.$message.error("切换主题色出现错误，已使用默认配置")}},B=n({setup(){window.$loadingBar=k(),window.$notification=C(),window.$message=P(),window.$dialog=R(),window.$modal=M()},render:()=>S("div",{className:"main-tools"})});return u(()=>[L.themeColorType,L.themeFollowCover,L.themeGlobalColor,L.globalFont,t.songCoverTheme?.main,D.value],()=>N()),c(()=>L.themeCustomColor,()=>{N()},{debounce:500,maxWait:1e3}),d(()=>{N()}),(e,t)=>{const r=b,n=E,i=T,a=I,s=x,o=w,l=p;return f(),h(l,{locale:m(g),"date-locale":m(y),theme:m(D),"theme-overrides":m(F),abstract:"","inline-theme-disabled":"","preflight-style-disabled":""},{default:_(()=>[v(r),v(o,null,{default:_(()=>[v(s,null,{default:_(()=>[v(a,null,{default:_(()=>[v(i,{max:1,placement:"bottom"},{default:_(()=>[v(n,null,{default:_(()=>[A(e.$slots,"default"),v(m(B))]),_:3})]),_:3})]),_:3})]),_:3})]),_:3})]),_:3},8,["locale","date-locale","theme","theme-overrides"])}}}),Zi=B(n({__name:"PlayerSpectrum",props:{show:{type:Boolean},height:{},radius:{},color:{}},setup(e){const t=e,r=i(),n=s(null),a=s(!0),o=(e,t,r,n,i,a)=>{e.beginPath(),e.moveTo(t+a,r),e.lineTo(t+n-a,r),e.quadraticCurveTo(t+n,r,t+n,r+a),e.lineTo(t+n,r+i-a),e.quadraticCurveTo(t+n,r+i,t+n-a,r+i),e.lineTo(t+a,r+i),e.quadraticCurveTo(t,r+i,t,r+i-a),e.lineTo(t,r+a),e.quadraticCurveTo(t,r,t+a,r),e.closePath(),e.fill()},{pause:l,resume:u}=L(()=>{(e=>{if(!e)return;if(!a.value||!n.value)return;e=e.slice(10),n.value.width=document.body.clientWidth>=1600?1600:document.body.clientWidth,n.value.height=t.height||80;const i=n.value.getContext("2d"),s=n.value.width,l=n.value.height,u=r.spectrumsData.length/2.5,c=t.radius||2.5,d=s/u/2;if(i){i.clearRect(0,0,s,l);for(let r=0;r<u;r++){const n=e[r]/255*l,a=r*d+s/2,u=s/2-(r+1)*d,h=l-n;i.fillStyle=t.color||"#efefef",n>0&&(o(i,a,h,d-3,n,c),o(i,u,h,d-3,n,c))}}})(r.spectrumsData)});return d(()=>{u()}),O(()=>{l()}),(e,t)=>(f(),F("div",{style:D({opacity:e.show?"0.6":"0.1"}),class:"player-spectrum"},[N("canvas",{ref_key:"canvasRef",ref:n,style:D({height:e.height+"px"}),class:"spectrum-line"},null,4)],4))}}),[["__scopeId","data-v-7da8e9d2"]]),Qi="undefined"!=typeof document;function Ji(e){return"object"==typeof e||"displayName"in e||"props"in e||"__vccOpts"in e}const ea=Object.assign;function ta(e,t){const r={};for(const n in t){const i=t[n];r[n]=na(i)?i.map(e):e(i)}return r}const ra=()=>{},na=Array.isArray,ia=/#/g,aa=/&/g,sa=/\//g,oa=/=/g,la=/\?/g,ua=/\+/g,ca=/%5B/g,da=/%5D/g,ha=/%5E/g,fa=/%60/g,pa=/%7B/g,ma=/%7C/g,ya=/%7D/g,ga=/%20/g;function _a(e){return encodeURI(""+e).replace(ma,"|").replace(ca,"[").replace(da,"]")}function va(e){return _a(e).replace(ua,"%2B").replace(ga,"+").replace(ia,"%23").replace(aa,"%26").replace(fa,"`").replace(pa,"{").replace(ya,"}").replace(ha,"^")}function ba(e){return va(e).replace(oa,"%3D")}function wa(e){return null==e?"":function(e){return _a(e).replace(ia,"%23").replace(la,"%3F")}(e).replace(sa,"%2F")}function xa(e){try{return decodeURIComponent(""+e)}catch(t){}return""+e}const Ia=/\/$/;function Ta(e,t,r="/"){let n,i={},a="",s="";const o=t.indexOf("#");let l=t.indexOf("?");return o<l&&o>=0&&(l=-1),l>-1&&(n=t.slice(0,l),a=t.slice(l+1,o>-1?o:t.length),i=e(a)),o>-1&&(n=n||t.slice(0,o),s=t.slice(o,t.length)),n=function(e,t){if(e.startsWith("/"))return e;if(!e)return t;const r=t.split("/"),n=e.split("/"),i=n[n.length-1];".."!==i&&"."!==i||n.push("");let a,s,o=r.length-1;for(a=0;a<n.length;a++)if(s=n[a],"."!==s){if(".."!==s)break;o>1&&o--}return r.slice(0,o).join("/")+"/"+n.slice(a).join("/")}(null!=n?n:t,r),{fullPath:n+(a&&"?")+a+s,path:n,query:i,hash:xa(s)}}function Ea(e,t){return t&&e.toLowerCase().startsWith(t.toLowerCase())?e.slice(t.length)||"/":e}function Aa(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Sa(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!ka(e[r],t[r]))return!1;return!0}function ka(e,t){return na(e)?Ca(e,t):na(t)?Ca(t,e):e===t}function Ca(e,t){return na(t)?e.length===t.length&&e.every((e,r)=>e===t[r]):1===e.length&&e[0]===t}const Pa={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Ra,Ma,La,Oa;function Fa(e){if(!e)if(Qi){const t=document.querySelector("base");e=(e=t&&t.getAttribute("href")||"/").replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return"/"!==e[0]&&"#"!==e[0]&&(e="/"+e),e.replace(Ia,"")}(Ma=Ra||(Ra={})).pop="pop",Ma.push="push",(Oa=La||(La={})).back="back",Oa.forward="forward",Oa.unknown="";const Da=/^[^#]+#/;function Na(e,t){return e.replace(Da,"#")+t}const Ba=()=>({left:window.scrollX,top:window.scrollY});function Ua(e){let t;if("el"in e){const r=e.el,n="string"==typeof r&&r.startsWith("#"),i="string"==typeof r?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!i)return;t=function(e,t){const r=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-r.left-(t.left||0),top:n.top-r.top-(t.top||0)}}(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(null!=t.left?t.left:window.scrollX,null!=t.top?t.top:window.scrollY)}function ja(e,t){return(history.state?history.state.position-t:-1)+e}const Ga=new Map;function za(e,t){const{pathname:r,search:n,hash:i}=t,a=e.indexOf("#");if(a>-1){let t=i.includes(e.slice(a))?e.slice(a).length:1,r=i.slice(t);return"/"!==r[0]&&(r="/"+r),Ea(r,"")}return Ea(r,e)+n+i}function Ha(e,t,r,n=!1,i=!1){return{back:e,current:t,forward:r,replaced:n,position:window.history.length,scroll:i?Ba():null}}function Va(e){const{history:t,location:r}=window,n={value:za(e,r)},i={value:t.state};function a(n,a,s){const o=e.indexOf("#"),l=o>-1?(r.host&&document.querySelector("base")?e:e.slice(o))+n:location.protocol+"//"+location.host+e+n;try{t[s?"replaceState":"pushState"](a,"",l),i.value=a}catch(u){console.error(u),r[s?"replace":"assign"](l)}}return i.value||a(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0),{location:n,state:i,push:function(e,r){const s=ea({},i.value,t.state,{forward:e,scroll:Ba()});a(s.current,s,!0),a(e,ea({},Ha(n.value,e,null),{position:s.position+1},r),!1),n.value=e},replace:function(e,r){a(e,ea({},t.state,Ha(i.value.back,e,i.value.forward,!0),r,{position:i.value.position}),!0),n.value=e}}}function $a(e){const t=Va(e=Fa(e)),r=function(e,t,r,n){let i=[],a=[],s=null;const o=({state:a})=>{const o=za(e,location),l=r.value,u=t.value;let c=0;if(a){if(r.value=o,t.value=a,s&&s===l)return void(s=null);c=u?a.position-u.position:0}else n(o);i.forEach(e=>{e(r.value,l,{delta:c,type:Ra.pop,direction:c?c>0?La.forward:La.back:La.unknown})})};function l(){const{history:e}=window;e.state&&e.replaceState(ea({},e.state,{scroll:Ba()}),"")}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",l,{passive:!0}),{pauseListeners:function(){s=r.value},listen:function(e){i.push(e);const t=()=>{const t=i.indexOf(e);t>-1&&i.splice(t,1)};return a.push(t),t},destroy:function(){for(const e of a)e();a=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",l)}}}(e,t.state,t.location,t.replace);const n=ea({location:"",base:e,go:function(e,t=!0){t||r.pauseListeners(),history.go(e)},createHref:Na.bind(null,e)},t,r);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>t.state.value}),n}function Xa(e){return"string"==typeof e||"symbol"==typeof e}const qa=Symbol("");var Wa,Ya;function Ka(e,t){return ea(new Error,{type:e,[qa]:!0},t)}function Za(e,t){return e instanceof Error&&qa in e&&(null==t||!!(e.type&t))}(Ya=Wa||(Wa={}))[Ya.aborted=4]="aborted",Ya[Ya.cancelled=8]="cancelled",Ya[Ya.duplicated=16]="duplicated";const Qa="[^/]+?",Ja={sensitive:!1,strict:!1,start:!0,end:!0},es=/[.+*?^${}()[\]/\\]/g;function ts(e,t){let r=0;for(;r<e.length&&r<t.length;){const n=t[r]-e[r];if(n)return n;r++}return e.length<t.length?1===e.length&&80===e[0]?-1:1:e.length>t.length?1===t.length&&80===t[0]?1:-1:0}function rs(e,t){let r=0;const n=e.score,i=t.score;for(;r<n.length&&r<i.length;){const e=ts(n[r],i[r]);if(e)return e;r++}if(1===Math.abs(i.length-n.length)){if(ns(n))return 1;if(ns(i))return-1}return i.length-n.length}function ns(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const is={type:0,value:""},as=/[a-zA-Z0-9_]/;function ss(e,t,r){const n=function(e,t){const r=ea({},Ja,t),n=[];let i=r.start?"^":"";const a=[];for(const l of e){const e=l.length?[]:[90];r.strict&&!l.length&&(i+="/");for(let t=0;t<l.length;t++){const n=l[t];let s=40+(r.sensitive?.25:0);if(0===n.type)t||(i+="/"),i+=n.value.replace(es,"\\$&"),s+=40;else if(1===n.type){const{value:e,repeatable:r,optional:u,regexp:c}=n;a.push({name:e,repeatable:r,optional:u});const d=c||Qa;if(d!==Qa){s+=10;try{new RegExp(`(${d})`)}catch(o){throw new Error(`Invalid custom RegExp for param "${e}" (${d}): `+o.message)}}let h=r?`((?:${d})(?:/(?:${d}))*)`:`(${d})`;t||(h=u&&l.length<2?`(?:/${h})`:"/"+h),u&&(h+="?"),i+=h,s+=20,u&&(s+=-8),r&&(s+=-20),".*"===d&&(s+=-50)}e.push(s)}n.push(e)}if(r.strict&&r.end){const e=n.length-1;n[e][n[e].length-1]+=.7000000000000001}r.strict||(i+="/?"),r.end?i+="$":r.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const s=new RegExp(i,r.sensitive?"":"i");return{re:s,score:n,keys:a,parse:function(e){const t=e.match(s),r={};if(!t)return null;for(let n=1;n<t.length;n++){const e=t[n]||"",i=a[n-1];r[i.name]=e&&i.repeatable?e.split("/"):e}return r},stringify:function(t){let r="",n=!1;for(const i of e){n&&r.endsWith("/")||(r+="/"),n=!1;for(const e of i)if(0===e.type)r+=e.value;else if(1===e.type){const{value:a,repeatable:s,optional:o}=e,l=a in t?t[a]:"";if(na(l)&&!s)throw new Error(`Provided param "${a}" is an array but it is not repeatable (* or + modifiers)`);const u=na(l)?l.join("/"):l;if(!u){if(!o)throw new Error(`Missing required param "${a}"`);i.length<2&&(r.endsWith("/")?r=r.slice(0,-1):n=!0)}r+=u}}return r||"/"}}}(function(e){if(!e)return[[]];if("/"===e)return[[is]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(e){throw new Error(`ERR (${r})/"${u}": ${e}`)}let r=0,n=r;const i=[];let a;function s(){a&&i.push(a),a=[]}let o,l=0,u="",c="";function d(){u&&(0===r?a.push({type:0,value:u}):1===r||2===r||3===r?(a.length>1&&("*"===o||"+"===o)&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:u,regexp:c,repeatable:"*"===o||"+"===o,optional:"*"===o||"?"===o})):t("Invalid state to consume buffer"),u="")}function h(){u+=o}for(;l<e.length;)if(o=e[l++],"\\"!==o||2===r)switch(r){case 0:"/"===o?(u&&d(),s()):":"===o?(d(),r=1):h();break;case 4:h(),r=n;break;case 1:"("===o?r=2:as.test(o)?h():(d(),r=0,"*"!==o&&"?"!==o&&"+"!==o&&l--);break;case 2:")"===o?"\\"==c[c.length-1]?c=c.slice(0,-1)+o:r=3:c+=o;break;case 3:d(),r=0,"*"!==o&&"?"!==o&&"+"!==o&&l--,c="";break;default:t("Unknown state")}else n=r,r=4;return 2===r&&t(`Unfinished custom RegExp for param "${u}"`),d(),s(),i}(e.path),r),i=ea(n,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function os(e,t){const r=[],n=new Map;function i(e,r,n){const o=!n,l=us(e);l.aliasOf=n&&n.record;const u=fs(t,e),c=[l];if("alias"in e){const t="string"==typeof e.alias?[e.alias]:e.alias;for(const e of t)c.push(us(ea({},l,{components:n?n.record.components:l.components,path:e,aliasOf:n?n.record:l})))}let d,h;for(const t of c){const{path:c}=t;if(r&&"/"!==c[0]){const e=r.record.path,n="/"===e[e.length-1]?"":"/";t.path=r.record.path+(c&&n+c)}if(d=ss(t,r,u),n?n.alias.push(d):(h=h||d,h!==d&&h.alias.push(d),o&&e.name&&!ds(d)&&a(e.name)),ps(d)&&s(d),l.children){const e=l.children;for(let t=0;t<e.length;t++)i(e[t],d,n&&n.children[t])}n=n||d}return h?()=>{a(h)}:ra}function a(e){if(Xa(e)){const t=n.get(e);t&&(n.delete(e),r.splice(r.indexOf(t),1),t.children.forEach(a),t.alias.forEach(a))}else{const t=r.indexOf(e);t>-1&&(r.splice(t,1),e.record.name&&n.delete(e.record.name),e.children.forEach(a),e.alias.forEach(a))}}function s(e){const t=function(e,t){let r=0,n=t.length;for(;r!==n;){const i=r+n>>1;rs(e,t[i])<0?n=i:r=i+1}const i=function(e){let t=e;for(;t=t.parent;)if(ps(t)&&0===rs(e,t))return t;return}(e);i&&(n=t.lastIndexOf(i,n-1));return n}(e,r);r.splice(t,0,e),e.record.name&&!ds(e)&&n.set(e.record.name,e)}return t=fs({strict:!1,end:!0,sensitive:!1},t),e.forEach(e=>i(e)),{addRoute:i,resolve:function(e,t){let i,a,s,o={};if("name"in e&&e.name){if(i=n.get(e.name),!i)throw Ka(1,{location:e});s=i.record.name,o=ea(ls(t.params,i.keys.filter(e=>!e.optional).concat(i.parent?i.parent.keys.filter(e=>e.optional):[]).map(e=>e.name)),e.params&&ls(e.params,i.keys.map(e=>e.name))),a=i.stringify(o)}else if(null!=e.path)a=e.path,i=r.find(e=>e.re.test(a)),i&&(o=i.parse(a),s=i.record.name);else{if(i=t.name?n.get(t.name):r.find(e=>e.re.test(t.path)),!i)throw Ka(1,{location:e,currentLocation:t});s=i.record.name,o=ea({},t.params,e.params),a=i.stringify(o)}const l=[];let u=i;for(;u;)l.unshift(u.record),u=u.parent;return{name:s,path:a,params:o,matched:l,meta:hs(l)}},removeRoute:a,clearRoutes:function(){r.length=0,n.clear()},getRoutes:function(){return r},getRecordMatcher:function(e){return n.get(e)}}}function ls(e,t){const r={};for(const n of t)n in e&&(r[n]=e[n]);return r}function us(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:cs(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function cs(e){const t={},r=e.props||!1;if("component"in e)t.default=r;else for(const n in e.components)t[n]="object"==typeof r?r[n]:r;return t}function ds(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function hs(e){return e.reduce((e,t)=>ea(e,t.meta),{})}function fs(e,t){const r={};for(const n in e)r[n]=n in t?t[n]:e[n];return r}function ps({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function ms(e){const t={};if(""===e||"?"===e)return t;const r=("?"===e[0]?e.slice(1):e).split("&");for(let n=0;n<r.length;++n){const e=r[n].replace(ua," "),i=e.indexOf("="),a=xa(i<0?e:e.slice(0,i)),s=i<0?null:xa(e.slice(i+1));if(a in t){let e=t[a];na(e)||(e=t[a]=[e]),e.push(s)}else t[a]=s}return t}function ys(e){let t="";for(let r in e){const n=e[r];if(r=ba(r),null==n){void 0!==n&&(t+=(t.length?"&":"")+r);continue}(na(n)?n.map(e=>e&&va(e)):[n&&va(n)]).forEach(e=>{void 0!==e&&(t+=(t.length?"&":"")+r,null!=e&&(t+="="+e))})}return t}function gs(e){const t={};for(const r in e){const n=e[r];void 0!==n&&(t[r]=na(n)?n.map(e=>null==e?null:""+e):null==n?n:""+n)}return t}const _s=Symbol(""),vs=Symbol(""),bs=Symbol(""),ws=Symbol(""),xs=Symbol("");function Is(){let e=[];return{add:function(t){return e.push(t),()=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)}},list:()=>e.slice(),reset:function(){e=[]}}}function Ts(e,t,r){const n=()=>{e[t].delete(r)};V(n),$(n),X(()=>{e[t].add(r)}),e[t].add(r)}function Es(e){const t=G(_s,{}).value;t&&Ts(t,"leaveGuards",e)}function As(e){const t=G(_s,{}).value;t&&Ts(t,"updateGuards",e)}function Ss(e,t,r,n,i,a=e=>e()){const s=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((o,l)=>{const u=e=>{var a;!1===e?l(Ka(4,{from:r,to:t})):e instanceof Error?l(e):"string"==typeof(a=e)||a&&"object"==typeof a?l(Ka(2,{from:t,to:e})):(s&&n.enterCallbacks[i]===s&&"function"==typeof e&&s.push(e),o())},c=a(()=>e.call(n&&n.instances[i],t,r,u));let d=Promise.resolve(c);e.length<3&&(d=d.then(u)),d.catch(e=>l(e))})}function ks(e,t,r,n,i=e=>e()){const a=[];for(const s of e)for(const e in s.components){let o=s.components[e];if("beforeRouteEnter"===t||s.instances[e])if(Ji(o)){const l=(o.__vccOpts||o)[t];l&&a.push(Ss(l,r,n,s,e,i))}else{let l=o();a.push(()=>l.then(a=>{if(!a)throw new Error(`Couldn't resolve component "${e}" at "${s.path}"`);const o=(l=a).__esModule||"Module"===l[Symbol.toStringTag]||l.default&&Ji(l.default)?a.default:a;var l;s.mods[e]=a,s.components[e]=o;const u=(o.__vccOpts||o)[t];return u&&Ss(u,r,n,s,e,i)()}))}}return a}function Cs(e){const t=G(bs),r=G(ws),n=o(()=>{const r=m(e.to);return t.resolve(r)}),i=o(()=>{const{matched:e}=n.value,{length:t}=e,i=e[t-1],a=r.matched;if(!i||!a.length)return-1;const s=a.findIndex(Aa.bind(null,i));if(s>-1)return s;const o=Ms(e[t-2]);return t>1&&Ms(i)===o&&a[a.length-1].path!==o?a.findIndex(Aa.bind(null,e[t-2])):s}),a=o(()=>i.value>-1&&function(e,t){for(const r in t){const n=t[r],i=e[r];if("string"==typeof n){if(n!==i)return!1}else if(!na(i)||i.length!==n.length||n.some((e,t)=>e!==i[t]))return!1}return!0}(r.params,n.value.params)),s=o(()=>i.value>-1&&i.value===r.matched.length-1&&Sa(r.params,n.value.params));return{route:n,href:o(()=>n.value.href),isActive:a,isExactActive:s,navigate:function(r={}){if(function(e){if(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)return;if(e.defaultPrevented)return;if(void 0!==e.button&&0!==e.button)return;if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}e.preventDefault&&e.preventDefault();return!0}(r)){const r=t[m(e.replace)?"replace":"push"](m(e.to)).catch(ra);return e.viewTransition&&"undefined"!=typeof document&&"startViewTransition"in document&&document.startViewTransition(()=>r),r}return Promise.resolve()}}}const Ps=n({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Cs,setup(e,{slots:t}){const r=q(Cs(e)),{options:n}=G(bs),i=o(()=>({[Ls(e.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[Ls(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const n=t.default&&(1===(a=t.default(r)).length?a[0]:a);var a;return e.custom?n:S("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:i.value},n)}}}),Rs=Ps;function Ms(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Ls=(e,t,r)=>null!=e?e:null!=t?t:r;function Os(e,t){if(!e)return null;const r=e(t);return 1===r.length?r[0]:r}const Fs=n({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:r}){const n=G(xs),i=o(()=>e.route||n.value),a=G(vs,0),l=o(()=>{let e=m(a);const{matched:t}=i.value;let r;for(;(r=t[e])&&!r.components;)e++;return e}),c=o(()=>i.value.matched[l.value]);z(vs,o(()=>l.value+1)),z(_s,c),z(xs,i);const d=s();return u(()=>[d.value,c.value,e.name],([e,t,r],[n,i,a])=>{t&&(t.instances[r]=e,i&&i!==t&&e&&e===n&&(t.leaveGuards.size||(t.leaveGuards=i.leaveGuards),t.updateGuards.size||(t.updateGuards=i.updateGuards))),!e||!t||i&&Aa(t,i)&&n||(t.enterCallbacks[r]||[]).forEach(t=>t(e))},{flush:"post"}),()=>{const n=i.value,a=e.name,s=c.value,o=s&&s.components[a];if(!o)return Os(r.default,{Component:o,route:n});const l=s.props[a],u=l?!0===l?n.params:"function"==typeof l?l(n):l:null,h=S(o,ea({},u,t,{onVnodeUnmounted:e=>{e.component.isUnmounted&&(s.instances[a]=null)},ref:d}));return Os(r.default,{Component:h,route:n})||h}}});function Ds(){return G(bs)}const Ns=[{path:"",name:"home",component:()=>W(()=>import("./index-DivaB3dl.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]),import.meta.url)},{path:"/search",name:"search",component:()=>W(()=>import("./layout-y54zT348.js"),__vite__mapDeps([12,1,2,13]),import.meta.url),beforeEnter:(e,t,r)=>{e.query.keyword?r():r({path:"/403"})},redirect:"/search/songs",children:[{path:"songs",name:"search-songs",component:()=>W(()=>import("./songs-CEQwoq9V.js"),__vite__mapDeps([14,1,2,15,16]),import.meta.url)},{path:"playlists",name:"search-playlists",component:()=>W(()=>import("./playlists-DlwLdJ7G.js"),__vite__mapDeps([17,1,2,3,4,5]),import.meta.url)},{path:"artists",name:"search-artists",component:()=>W(()=>import("./artists-DmIXm_d8.js"),__vite__mapDeps([18,1,2,6,7]),import.meta.url)},{path:"albums",name:"search-albums",component:()=>W(()=>import("./albums-SKFwRxG1.js"),__vite__mapDeps([19,1,2,3,4,5]),import.meta.url)},{path:"videos",name:"search-videos",component:()=>W(()=>import("./videos-BiLnAlfy.js"),__vite__mapDeps([20,1,2,3,4,5]),import.meta.url)},{path:"radios",name:"search-radios",component:()=>W(()=>import("./radios-CzHhnbtc.js"),__vite__mapDeps([21,1,2,3,4,5]),import.meta.url)}]},{path:"/discover",name:"discover",component:()=>W(()=>import("./layout-CaVeMPlC.js"),__vite__mapDeps([22,1,2,23]),import.meta.url),redirect:"/discover/playlists",children:[{path:"playlists",name:"discover-playlists",component:()=>W(()=>import("./playlists-_DCDfctH.js"),__vite__mapDeps([24,3,1,2,4,5,25]),import.meta.url)},{path:"toplists",name:"discover-toplists",component:()=>W(()=>import("./toplists-BSLoCNHH.js"),__vite__mapDeps([26,3,1,2,4,5,8,9,27]),import.meta.url)},{path:"artists",name:"discover-artists",component:()=>W(()=>import("./artists-Cx4x_0Ak.js"),__vite__mapDeps([28,6,1,2,7,29]),import.meta.url)},{path:"new",name:"discover-new",component:()=>W(()=>import("./new-Dwh7zQhC.js"),__vite__mapDeps([30,15,1,2,16,3,4,5,31]),import.meta.url)}]},{path:"/artist",name:"artist",beforeEnter:(e,t,r)=>{e.query.id?r():r({path:"/403"})},component:()=>W(()=>import("./layout-Dd1J43KE.js"),__vite__mapDeps([32,1,2,33]),import.meta.url),redirect:"/artist/songs",children:[{path:"songs",name:"artist-songs",component:()=>W(()=>import("./songs-TBjFoxnP.js"),__vite__mapDeps([34,15,1,2,16]),import.meta.url)},{path:"albums",name:"artist-albums",component:()=>W(()=>import("./albums-DPJ3_IWr.js"),__vite__mapDeps([35,3,1,2,4,5]),import.meta.url)},{path:"videos",name:"artist-videos",component:()=>W(()=>import("./videos-DyJWLoMe.js"),__vite__mapDeps([36,3,1,2,4,5]),import.meta.url)}]},{path:"/video",name:"video",beforeEnter:(e,t,r)=>{e.query.id?r():r({path:"/403"})},component:()=>W(()=>import("./Video-CLNCoIuN.js"),__vite__mapDeps([37,1,2,10,38]),import.meta.url)},{path:"/album",name:"album",beforeEnter:(e,t,r)=>{e.query.id?r():r({path:"/403"})},component:()=>W(()=>import("./album-bq95-lJo.js"),__vite__mapDeps([39,15,1,2,16,4,40]),import.meta.url)},{path:"/playlist",name:"playlist",beforeEnter:(e,t,r)=>{e.query.id?r():r({path:"/403"})},component:()=>W(()=>import("./playlist-Fm8y-zEF.js"),__vite__mapDeps([41,15,1,2,16,42]),import.meta.url)},{path:"/radio",name:"radio",beforeEnter:(e,t,r)=>{e.query.id?r():r({path:"/403"})},component:()=>W(()=>import("./radio-BRF0p2hH.js"),__vite__mapDeps([43,15,1,2,16,44]),import.meta.url)},{path:"/radio-hot",name:"radio-hot",component:()=>W(()=>import("./hot-Xhx6-q8f.js"),__vite__mapDeps([45,3,1,2,4,5,46]),import.meta.url)},{path:"/radio-type",name:"radio-type",beforeEnter:(e,t,r)=>{e.query.id&&e.query.name?r():r({path:"/403"})},component:()=>W(()=>import("./type-eXN3-asR.js"),__vite__mapDeps([47,3,1,2,4,5,48]),import.meta.url)},{path:"/like-songs",name:"like-songs",meta:{needLogin:!0},component:()=>W(()=>import("./liked-BUFm5JTn.js"),__vite__mapDeps([49,15,1,2,16,50]),import.meta.url)},{path:"/cloud",name:"cloud",meta:{needLogin:!0},component:()=>W(()=>import("./Cloud-B2_Lqfud.js"),__vite__mapDeps([51,15,1,2,16,52]),import.meta.url)},{path:"/daily-songs",name:"daily-songs",meta:{needLogin:!0},component:()=>W(()=>import("./DailySongs-DWWK4bqF.js"),__vite__mapDeps([53,15,1,2,16,54]),import.meta.url)},{path:"/like",name:"like",meta:{needLogin:!0},component:()=>W(()=>import("./layout-SgEYO6WK.js"),__vite__mapDeps([55,1,2,56]),import.meta.url),redirect:"/like/playlists",children:[{path:"playlists",name:"like-playlists",component:()=>W(()=>import("./playlists-C-H0Yzzx.js"),__vite__mapDeps([57,3,1,2,4,5,58]),import.meta.url)},{path:"albums",name:"like-albums",component:()=>W(()=>import("./albums-BXDeEQRZ.js"),__vite__mapDeps([59,3,1,2,4,5]),import.meta.url)},{path:"artists",name:"like-artists",component:()=>W(()=>import("./artists-0AzMz_fL.js"),__vite__mapDeps([60,6,1,2,7]),import.meta.url)},{path:"videos",name:"like-videos",component:()=>W(()=>import("./videos-BpBKpLT9.js"),__vite__mapDeps([61,3,1,2,4,5]),import.meta.url)},{path:"radios",name:"like-radios",component:()=>W(()=>import("./radios-50BeT3Ff.js"),__vite__mapDeps([62,3,1,2,4,5]),import.meta.url)}]},{path:"/local",name:"local",meta:{needApp:!0},component:()=>W(()=>import("./layout-CGgJHSD_.js"),__vite__mapDeps([63,1,2,64]),import.meta.url),redirect:"/local/songs",children:[{path:"songs",name:"local-songs",component:()=>W(()=>import("./song-ddsaSMfo.js"),__vite__mapDeps([65,15,1,2,16]),import.meta.url)},{path:"artists",name:"local-artists",component:()=>W(()=>import("./artists-CuLfuMpc.js"),__vite__mapDeps([66,15,1,2,16,67]),import.meta.url)},{path:"albums",name:"local-albums",component:()=>W(()=>import("./albums-DmVugSIr.js"),__vite__mapDeps([68,15,1,2,16,69]),import.meta.url)}]},{path:"/history",name:"history",component:()=>W(()=>import("./History-DXKAaL77.js"),__vite__mapDeps([70,15,1,2,16,71]),import.meta.url)},{path:"/403",name:"403",component:()=>W(()=>import("./403-Dmr38sKn.js"),__vite__mapDeps([72,1,2]),import.meta.url)},{path:"/404",name:"404",component:()=>W(()=>import("./404-Bljx37bK.js"),__vite__mapDeps([73,1,2]),import.meta.url)},{path:"/500",name:"500",component:()=>W(()=>import("./500-C1HTmq2U.js"),__vite__mapDeps([74,1,2]),import.meta.url)}],Bs=function(e){const t=os(e.routes,e),r=e.parseQuery||ms,n=e.stringifyQuery||ys,i=e.history,a=Is(),s=Is(),o=Is(),l=U(Pa);let u=Pa;Qi&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=ta.bind(null,e=>""+e),d=ta.bind(null,wa),h=ta.bind(null,xa);function f(e,a){if(a=ea({},a||l.value),"string"==typeof e){const n=Ta(r,e,a.path),s=t.resolve({path:n.path},a),o=i.createHref(n.fullPath);return ea(n,s,{params:h(s.params),hash:xa(n.hash),redirectedFrom:void 0,href:o})}let s;if(null!=e.path)s=ea({},e,{path:Ta(r,e.path,a.path).path});else{const t=ea({},e.params);for(const e in t)null==t[e]&&delete t[e];s=ea({},e,{params:d(t)}),a.params=d(a.params)}const o=t.resolve(s,a),u=e.hash||"";o.params=c(h(o.params));const f=function(e,t){const r=t.query?e(t.query):"";return t.path+(r&&"?")+r+(t.hash||"")}(n,ea({},e,{hash:(p=u,_a(p).replace(pa,"{").replace(ya,"}").replace(ha,"^")),path:o.path}));var p;const m=i.createHref(f);return ea({fullPath:f,hash:u,query:n===ys?gs(e.query):e.query||{}},o,{redirectedFrom:void 0,href:m})}function p(e){return"string"==typeof e?Ta(r,e,l.value.path):ea({},e)}function y(e,t){if(u!==e)return Ka(8,{from:t,to:e})}function g(e){return v(e)}function _(e){const t=e.matched[e.matched.length-1];if(t&&t.redirect){const{redirect:r}=t;let n="function"==typeof r?r(e):r;return"string"==typeof n&&(n=n.includes("?")||n.includes("#")?n=p(n):{path:n},n.params={}),ea({query:e.query,hash:e.hash,params:null!=n.path?{}:e.params},n)}}function v(e,t){const r=u=f(e),i=l.value,a=e.state,s=e.force,o=!0===e.replace,c=_(r);if(c)return v(ea(p(c),{state:"object"==typeof c?ea({},a,c.state):a,force:s,replace:o}),t||r);const d=r;let h;return d.redirectedFrom=t,!s&&function(e,t,r){const n=t.matched.length-1,i=r.matched.length-1;return n>-1&&n===i&&Aa(t.matched[n],r.matched[i])&&Sa(t.params,r.params)&&e(t.query)===e(r.query)&&t.hash===r.hash}(n,i,r)&&(h=Ka(16,{to:d,from:i}),M(i,i,!0,!1)),(h?Promise.resolve(h):x(d,i)).catch(e=>Za(e)?Za(e,2)?e:R(e):P(e,d,i)).then(e=>{if(e){if(Za(e,2))return v(ea({replace:o},p(e.to),{state:"object"==typeof e.to?ea({},a,e.to.state):a,force:s}),t||d)}else e=T(d,i,!0,o,a);return I(d,i,e),e})}function b(e,t){const r=y(e,t);return r?Promise.reject(r):Promise.resolve()}function w(e){const t=F.values().next().value;return t&&"function"==typeof t.runWithContext?t.runWithContext(e):e()}function x(e,t){let r;const[n,i,o]=function(e,t){const r=[],n=[],i=[],a=Math.max(t.matched.length,e.matched.length);for(let s=0;s<a;s++){const a=t.matched[s];a&&(e.matched.find(e=>Aa(e,a))?n.push(a):r.push(a));const o=e.matched[s];o&&(t.matched.find(e=>Aa(e,o))||i.push(o))}return[r,n,i]}(e,t);r=ks(n.reverse(),"beforeRouteLeave",e,t);for(const a of n)a.leaveGuards.forEach(n=>{r.push(Ss(n,e,t))});const l=b.bind(null,e,t);return r.push(l),N(r).then(()=>{r=[];for(const n of a.list())r.push(Ss(n,e,t));return r.push(l),N(r)}).then(()=>{r=ks(i,"beforeRouteUpdate",e,t);for(const n of i)n.updateGuards.forEach(n=>{r.push(Ss(n,e,t))});return r.push(l),N(r)}).then(()=>{r=[];for(const n of o)if(n.beforeEnter)if(na(n.beforeEnter))for(const i of n.beforeEnter)r.push(Ss(i,e,t));else r.push(Ss(n.beforeEnter,e,t));return r.push(l),N(r)}).then(()=>(e.matched.forEach(e=>e.enterCallbacks={}),r=ks(o,"beforeRouteEnter",e,t,w),r.push(l),N(r))).then(()=>{r=[];for(const n of s.list())r.push(Ss(n,e,t));return r.push(l),N(r)}).catch(e=>Za(e,8)?e:Promise.reject(e))}function I(e,t,r){o.list().forEach(n=>w(()=>n(e,t,r)))}function T(e,t,r,n,a){const s=y(e,t);if(s)return s;const o=t===Pa,u=Qi?history.state:{};r&&(n||o?i.replace(e.fullPath,ea({scroll:o&&u&&u.scroll},a)):i.push(e.fullPath,a)),l.value=e,M(e,t,r,o),R()}let E;function A(){E||(E=i.listen((e,t,r)=>{if(!D.listening)return;const n=f(e),a=_(n);if(a)return void v(ea(a,{replace:!0,force:!0}),n).catch(ra);u=n;const s=l.value;Qi&&function(e,t){Ga.set(e,t)}(ja(s.fullPath,r.delta),Ba()),x(n,s).catch(e=>Za(e,12)?e:Za(e,2)?(v(ea(p(e.to),{force:!0}),n).then(e=>{Za(e,20)&&!r.delta&&r.type===Ra.pop&&i.go(-1,!1)}).catch(ra),Promise.reject()):(r.delta&&i.go(-r.delta,!1),P(e,n,s))).then(e=>{(e=e||T(n,s,!1))&&(r.delta&&!Za(e,8)?i.go(-r.delta,!1):r.type===Ra.pop&&Za(e,20)&&i.go(-1,!1)),I(n,s,e)}).catch(ra)}))}let S,k=Is(),C=Is();function P(e,t,r){R(e);const n=C.list();return n.length?n.forEach(n=>n(e,t,r)):console.error(e),Promise.reject(e)}function R(e){return S||(S=!e,A(),k.list().forEach(([t,r])=>e?r(e):t()),k.reset()),e}function M(t,r,n,i){const{scrollBehavior:a}=e;if(!Qi||!a)return Promise.resolve();const s=!n&&function(e){const t=Ga.get(e);return Ga.delete(e),t}(ja(t.fullPath,0))||(i||!n)&&history.state&&history.state.scroll||null;return H().then(()=>a(t,r,s)).then(e=>e&&Ua(e)).catch(e=>P(e,t,r))}const L=e=>i.go(e);let O;const F=new Set,D={currentRoute:l,listening:!0,addRoute:function(e,r){let n,i;return Xa(e)?(n=t.getRecordMatcher(e),i=r):i=e,t.addRoute(i,n)},removeRoute:function(e){const r=t.getRecordMatcher(e);r&&t.removeRoute(r)},clearRoutes:t.clearRoutes,hasRoute:function(e){return!!t.getRecordMatcher(e)},getRoutes:function(){return t.getRoutes().map(e=>e.record)},resolve:f,options:e,push:g,replace:function(e){return g(ea(p(e),{replace:!0}))},go:L,back:()=>L(-1),forward:()=>L(1),beforeEach:a.add,beforeResolve:s.add,afterEach:o.add,onError:C.add,isReady:function(){return S&&l.value!==Pa?Promise.resolve():new Promise((e,t)=>{k.add([e,t])})},install(e){e.component("RouterLink",Rs),e.component("RouterView",Fs),e.config.globalProperties.$router=this,Object.defineProperty(e.config.globalProperties,"$route",{enumerable:!0,get:()=>m(l)}),Qi&&!O&&l.value===Pa&&(O=!0,g(i.location).catch(e=>{}));const t={};for(const n in Pa)Object.defineProperty(t,n,{get:()=>l.value[n],enumerable:!0});e.provide(bs,this),e.provide(ws,j(t)),e.provide(xs,l);const r=e.unmount;F.add(e),e.unmount=function(){F.delete(e),F.size<1&&(u=Pa,E&&E(),E=null,l.value=Pa,O=!1,S=!1),r()}}};function N(e){return e.reduce((e,t)=>e.then(()=>w(t)),Promise.resolve())}return D}({history:(Us="./",(Us=location.host?Us||location.pathname+location.search:"").includes("#")||(Us+="#"),$a(Us)),routes:Ns});var Us;Bs.beforeEach((e,t,r)=>{if(Y||e.path===t.path||window.$loadingBar.start(),e.meta.needLogin&&!K())return Y||window.$loadingBar.error(),window.$message.warning("请登录后使用"),void dd();e.meta.needApp&&!Y&&(window.$message.warning("该功能为客户端独占功能"),r("/403")),r()}),Bs.afterEach(()=>{window.$loadingBar.finish()});const js={required:!0,message:"请填写必要信息",trigger:["blur"]},Gs={required:!0,type:"number",message:"请输入数字",trigger:["input","blur"]},zs={required:!0,type:"number",message:"请输入正确的手机号",trigger:["input","blur"],validator:(e,t)=>t?!!/^1(3\d|4[5-9]|5[0-35-9]|6[567]|7[0-8]|8\d|9[0-35-9])\d{8}$/.test(t)||new Error("请输入正确的手机号"):new Error("请输入手机号")},Hs={class:"login-phone"},Vs=B(n({__name:"LoginPhone",emits:["saveLogin"],setup(e,{emit:t}){const r=t,n=s(null),i=s({country:86,phone:null,captcha:null}),a=o(()=>({country:{...Gs,message:"请选择国家"},phone:86===i.value.country?{...zs,key:"phone"}:{...Gs,key:"phone",message:"请输入手机号"},captcha:{...Gs,message:"请输入正确的验证码"}})),l=s(60),u=s("获取验证码"),c=s(!1),h=s([]),p=async e=>{e.preventDefault(),await(n.value?.validate(e=>e,e=>"phone"===e?.key)),c.value=!0;200===(await de(i.value.phone,i.value.country)).code?(g(),window.$message.success("验证码发送成功")):(c.value=!1,window.$message.error("验证码发送失败，请重试"))},{pause:y,resume:g}=Z(()=>{l.value--,u.value=`${l.value} s`,l.value<=0&&(y(),l.value=60,u.value="重新获取",c.value=!1)},1e3,{immediate:!1}),b=Q(async e=>{e.preventDefault(),await(n.value?.validate());if(200!==(await J(i.value.phone,i.value.captcha,i.value.country)).code)return void window.$message.error("验证码错误，请重试");const t=await ee(i.value.phone,i.value.captcha,i.value.country);200===t.code?t.cookie&&t.cookie.includes("MUSIC_U")?(t.cookie=t.cookie.replaceAll(" HTTPOnly",""),r("saveLogin",t,"phone")):window.$message.error("登录出错，请重试"):window.$message.error("登录失败，请重试")},300);return d(()=>{(async()=>{try{const e=(await ue(ce,{storage:"localStorage",key:"countryListData",time:0})).data.map(e=>({type:"group",label:e.label,key:e.label,children:e.countryList.map(e=>({label:`${e.zh} (+${e.code})`,value:Number(e.code)}))}));h.value=e}catch(e){console.error("获取国家列表失败：",e),h.value=[{key:"86",label:"中国 (+86)",value:86}]}})()}),(e,t)=>{const r=ne,s=re,o=ae,l=ie,d=se,y=te;return f(),F("div",Hs,[v(y,{ref_key:"phoneFormRef",ref:n,model:m(i),rules:m(a),class:"phone-form"},{default:_(()=>[v(s,{label:"国家",path:"country"},{default:_(()=>[v(r,{value:m(i).country,"onUpdate:value":t[0]||(t[0]=e=>m(i).country=e),filterable:"",options:m(h)},null,8,["value","options"])]),_:1}),v(s,{label:"手机号",path:"phone"},{default:_(()=>[v(l,{value:m(i).phone,"onUpdate:value":t[1]||(t[1]=e=>m(i).phone=e),"show-button":!1,placeholder:"请输入手机号","passively-activated":"",clearable:""},{prefix:_(()=>[v(o,{name:"Phone",depth:3})]),_:1},8,["value"])]),_:1}),v(s,{label:"验证码",path:"captcha"},{default:_(()=>[v(l,{value:m(i).captcha,"onUpdate:value":t[2]||(t[2]=e=>m(i).captcha=e),"show-button":!1,disabled:null===m(i).phone,placeholder:"请输入短信验证码","passively-activated":"",clearable:""},{prefix:_(()=>[v(o,{name:"Password",depth:3})]),_:1},8,["value","disabled"]),v(d,{disabled:m(c),class:"send",type:"primary",onClick:p},{default:_(()=>[oe(le(m(u)),1)]),_:1},8,["disabled"])]),_:1}),v(s,{"show-label":!1},{default:_(()=>[v(d,{class:"login",type:"primary",onClick:m(b)},{default:_(()=>t[3]||(t[3]=[oe(" 登录 ")])),_:1,__:[3]},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])])}}}),[["__scopeId","data-v-550f3e11"]]),$s=""+new URL("../images/avatar.jpg?assest",import.meta.url).href,Xs={class:"login-qrcode"},qs={class:"qr-img"},Ws={key:0,class:"login-data"},Ys=B(n({__name:"LoginQRCode",props:{pause:{type:Boolean}},emits:["saveLogin"],setup(e,{emit:t}){const r=e,n=t,i={800:"二维码过期，即将重试",801:"请打开云音乐 APP 扫码登录",802:"扫描成功，请在客户端确认登录",803:"登录成功"},a=s(""),l=s(""),u=s(801),c=o(()=>i[u.value]||"遇到未知状态，请重试"),p=s(""),y=s(""),g=async()=>{try{b(),u.value=801,p.value="",y.value="";const e=await be();a.value=`https://music.163.com/login?codekey=${e.data.unikey}`,l.value=e.data.unikey,w()}catch(e){b(),console.error("二维码获取失败：",e)}},{pause:b,resume:w}=Z(async()=>{if(!l.value||r.pause)return;const{code:e,cookie:t,nickname:i,avatarUrl:a}=await we(l.value);switch(e){case 800:u.value=800,g();break;case 801:u.value=801;break;case 802:u.value=802,p.value=i,y.value=a;break;case 803:u.value=803,b(),t&&t.includes("MUSIC_U")?n("saveLogin",{code:200,cookie:t},"qr"):(window.$message.error("登录出错，请重试"),g())}},1e3,{immediate:!1});return d(g),O(b),(e,t)=>{const r=fe,n=ye,i=_e,s=ve;return f(),F("div",Xs,[N("div",qs,[m(a)?(f(),F("div",{key:0,class:he(["qr",{success:802===m(u),error:800===m(u)}])},[v(r,{value:m(a),size:160,"icon-size":30,"icon-src":"/icons/favicon.png?assest","error-correction-level":"H"},null,8,["value"]),v(pe,{name:"fade",mode:"out-in"},{default:_(()=>[m(p)?(f(),F("div",Ws,[v(n,{src:m(y).replace(/^http:/,"https:")+"?param=100y100",class:"cover","preview-disabled":"",onLoad:m(ge)},{placeholder:_(()=>t[0]||(t[0]=[N("div",{class:"cover-loading"},[N("img",{src:$s,class:"loading-img",alt:"loading-img"})],-1)])),_:1},8,["src","onLoad"]),v(i,null,{default:_(()=>[oe(le(m(p)),1)]),_:1})])):me("",!0)]),_:1})],2)):(f(),h(s,{key:1,class:"qr"}))]),v(i,{class:"tip",depth:"3"},{default:_(()=>[oe(le(m(c)),1)]),_:1})])}}}),[["__scopeId","data-v-6f45dcdc"]]),Ks=""+new URL("../icons/favicon.png?assest",import.meta.url).href,Zs={class:"login-uid"},Qs=n({__name:"LoginUID",emits:["close","saveLogin"],setup(e,{emit:t}){const r=t,n=s(),i=s(null),a=async()=>{if(n.value){i.value=window.$message.loading("正在尝试登录",{duration:0});try{const e=await Ee(n.value);window.$message.success("登录成功"),r("saveLogin",e,"uid"),r("close")}catch(e){window.$message.error("登录失败，请重试"),console.error("UID 登录出错：",e)}finally{i.value?.destroy(),i.value=null}}else window.$message.warning("请输入 UID")};return(e,t)=>{const r=ae,s=xe,o=Ie,l=ie,u=se;return f(),F("div",Zs,[v(o,{bordered:!1,title:"如何获取 UID"},{icon:_(()=>[v(r,{name:"Help"})]),default:_(()=>[t[2]||(t[2]=oe(" 可前往 ")),v(s,{href:"https://music.163.com/",target:"_blank"},{default:_(()=>t[1]||(t[1]=[oe("网易云音乐")])),_:1,__:[1]}),t[3]||(t[3]=oe(" 官网登录并前往个人中心，即可从地址栏获取到 UID，也可在客户端分享链接中获取 UID。 "))]),_:1,__:[2,3]}),v(l,{value:m(n),"onUpdate:value":t[0]||(t[0]=e=>Te(n)?n.value=e:null),"show-button":!1,placeholder:"请输入 UID"},null,8,["value"]),v(u,{loading:!!m(i),type:"primary",onClick:a},{default:_(()=>t[4]||(t[4]=[oe("登录")])),_:1,__:[4]},8,["loading"])])}}}),Js=B(Qs,[["__scopeId","data-v-a0d6a3a1"]]),eo={class:"login-cookie"},to=B(n({__name:"LoginCookie",emits:["close","saveLogin"],setup(e,{emit:t}){const r=t,n=s(),i=()=>{window.$dialog.info({title:"使用前告知",content:"请知悉，该功能仍旧无法确保账号的安全性！请自行决定是否使用！如遇打开窗口后页面出现白屏或者无法点击等情况，请关闭后重试",positiveText:"我已了解",negativeText:"取消",onPositiveClick:()=>window.electron.ipcRenderer.send("open-login-web")})},a=async()=>{if(n.value)if(n.value=n.value.trim(),n.value.endsWith(";"),n.value.includes("MUSIC_U")&&n.value.endsWith(";"))try{window.$message.success("登录成功"),r("saveLogin",{code:200,cookie:n.value},"cookie"),r("close")}catch(e){window.$message.error("登录失败，请重试"),console.error("Cookie 登录出错：",e)}else window.$message.warning("请输入有效的 Cookie");else window.$message.warning("请输入 Cookie")};return d(()=>{Y&&window.electron.ipcRenderer.on("send-cookies",(e,t)=>{t&&(n.value=t,a())})}),(e,t)=>{const r=ae,s=xe,o=Ie,l=Ae,u=se,c=Se;return f(),F("div",eo,[v(o,{bordered:!1,title:"如何获取 Cookie"},{icon:_(()=>[v(r,{name:"Help"})]),default:_(()=>[t[2]||(t[2]=oe(" 可在官方的 ")),v(s,{href:"https://music.163.com/",target:"_blank"},{default:_(()=>t[1]||(t[1]=[oe("网页端")])),_:1,__:[1]}),t[3]||(t[3]=oe(" 或点击下方的自动获取，只需要 Cookie 中的 ")),t[4]||(t[4]=N("code",null,"MUSIC_U",-1)),t[5]||(t[5]=oe(" 字段即可，例如： ")),t[6]||(t[6]=N("code",null,"MUSIC_U=00C7...;",-1)),t[7]||(t[7]=N("br",null,null,-1)),t[8]||(t[8]=oe("请注意：必须以 ")),t[9]||(t[9]=N("code",null,";",-1)),t[10]||(t[10]=oe(" 结束 "))]),_:1,__:[2,3,4,5,6,7,8,9,10]}),v(l,{value:m(n),"onUpdate:value":t[0]||(t[0]=e=>Te(n)?n.value=e:null),autosize:{minRows:3,maxRows:6},type:"textarea",placeholder:"请输入 Cookie"},null,8,["value"]),v(c,{class:"menu"},{default:_(()=>[m(Y)?(f(),h(u,{key:0,type:"primary",onClick:i},{default:_(()=>t[11]||(t[11]=[oe("自动获取")])),_:1,__:[11]})):me("",!0),v(u,{type:"primary",onClick:a},{default:_(()=>t[12]||(t[12]=[oe("登录")])),_:1,__:[12]})]),_:1})])}}}),[["__scopeId","data-v-35d7bc5b"]]),ro={class:"login"},no=B(n({__name:"Login",emits:["close"],setup(e,{emit:t}){const r=t,n=ke(),i=s(!1),a=async(e,t="qr")=>{e&&(200===e.code?(r("close"),n.userLoginStatus=!0,n.loginType=t,window.$message.success("登录成功"),"uid"!==t&&Le(e.cookie),localStorage.setItem("lastLoginTime",Date.now().toString()),"uid"!==t?await Oe():await Fe(e?.profile)):window.$message.error(e.msg??e.message??"账号或密码错误，请重试"))},o=(e="uid")=>{i.value=!0;const t=window.$modal.create({title:"uid"===e?"UID 登录":"Cookie 登录",preset:"card",transformOrigin:"center",style:{width:"400px"},content:()=>S("uid"===e?Js:to,{onClose:()=>t.destroy(),onSaveLogin:a}),onClose:()=>{i.value=!1,t.destroy()}})};return Ce(()=>{n.userLoginStatus&&(window.$message.warning("已登录，请勿再次操作"),r("close"))}),(e,t)=>{const n=Ys,s=Re,l=Vs,u=Pe,c=se,d=Me,h=Se,p=ae;return f(),F("div",ro,[t[6]||(t[6]=N("img",{src:Ks,alt:"logo",class:"logo"},null,-1)),v(u,{class:"login-tabs","default-value":"login-qr",type:"segment",animated:""},{default:_(()=>[v(s,{name:"login-qr",tab:"扫码登录"},{default:_(()=>[v(n,{pause:m(i),onSaveLogin:a},null,8,["pause"])]),_:1}),v(s,{name:"login-phone",tab:"验证码登录"},{default:_(()=>[v(l,{onSaveLogin:a})]),_:1})]),_:1}),v(h,{align:"center",class:"other"},{default:_(()=>[v(c,{focusable:!1,size:"small",quaternary:"",round:"",onClick:t[0]||(t[0]=e=>o("uid"))},{default:_(()=>t[3]||(t[3]=[oe(" UID 登录 ")])),_:1,__:[3]}),v(d,{vertical:""}),v(c,{focusable:!1,size:"small",quaternary:"",round:"",onClick:t[1]||(t[1]=e=>o("cookie"))},{default:_(()=>t[4]||(t[4]=[oe(" Cookie 登录 ")])),_:1,__:[4]})]),_:1}),v(c,{focusable:!1,class:"close",strong:"",secondary:"",round:"",onClick:t[2]||(t[2]=e=>r("close"))},{icon:_(()=>[v(p,{name:"WindowClose"})]),default:_(()=>[t[5]||(t[5]=oe(" 取消 "))]),_:1,__:[5]})])}}}),[["__scopeId","data-v-4a498f61"]]),io={class:"jump-artist"},ao={key:0,class:"ar-list"},so={key:1,class:"ar-list"},oo=n({__name:"JumpArtist",props:{artist:{}},emits:["close"],setup(e,{emit:t}){const n=e,i=t,a=Ds(),o=r(),l=s([]);return d(async()=>{if(!n.artist)return;const e=(e,t)=>{if(!e)return;const r=e.filter(e=>e.artistName===t).map(e=>({id:e.artistId,name:e.artistName,cover:e.artistAvatarPicUrl}));l.value.push(...r)};if("string"==typeof n.artist){let t=[];if(o.localSeparators.some(e=>n.artist.includes(e)))o.localSeparators.forEach(e=>{t=t.concat(n.artist.split(e))}),t=Ge(t.map(e=>e.trim()).filter(e=>e&&e!==n.artist)),t.map(async t=>{const r=await je(t);e(r.data.list,t)});else{const t=n.artist.trim(),r=await je(t);e(r.data.list,t)}}else Array.isArray(n.artist)&&(l.value=n.artist)}),(e,t)=>{const r=Ie,n=Ue,s=_e,o=Be,u=ve;return f(),F("div",io,[v(pe,{name:"fade",mode:"out-in"},{default:_(()=>[m(l)?.length?(f(),F("div",ao,["string"==typeof e.artist?(f(),h(r,{key:0,"show-icon":!1},{default:_(()=>t[0]||(t[0]=[oe(" 以下结果来自在线搜索，仅供参考 ")])),_:1,__:[0]})):me("",!0),(f(!0),F(De,null,Ne(m(l),(e,t)=>(f(),h(o,{key:t,class:"ar-item",hoverable:"",onClick:t=>{var r;(r=e.id)&&(i("close"),a.push({name:"artist",query:{id:r}}))}},{default:_(()=>[v(n,{src:e.cover||"/images/artist.jpg?assest",class:"cover",round:""},null,8,["src"]),v(s,{class:"name"},{default:_(()=>[oe(le(e.name),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))])):(f(),F("div",so,[v(u,{class:"ar-item",repeat:2,text:""})]))]),_:1})])}}}),lo=B(oo,[["__scopeId","data-v-e81a1533"]]),uo={class:"user-agreement"},co=B(n({__name:"UserAgreement",emits:["close"],setup(e,{emit:t}){const r=t,n=s(null),i=ze(n),a=()=>{window.electron.ipcRenderer.send("win-close")};return(e,t)=>{const s=He,o=Ve,l=Se,u=$e,c=Xe,d=We,p=qe,y=xe,g=Be,b=Ye,w=se;return f(),F("div",uo,[v(s,{class:"title"},{default:_(()=>t[1]||(t[1]=[oe("用户协议")])),_:1,__:[1]}),v(b,{class:"scrollbar"},{default:_(()=>[v(l,{class:"date",justify:"center"},{default:_(()=>[v(o,{round:""},{default:_(()=>t[2]||(t[2]=[oe("生效日期：2024 年 7 月 16 日")])),_:1,__:[2]}),v(o,{type:"warning",round:""},{default:_(()=>t[3]||(t[3]=[oe("更新日期：2024 年 9 月 28 日")])),_:1,__:[3]})]),_:1}),v(u,null,{default:_(()=>t[4]||(t[4]=[oe(" 欢迎使用 SPlayer（以下简称“本软件”）。本软件是一个本地音乐播放软件，可能会调用第三方 API 来增强其功能。请在使用本软件前仔细阅读本用户协议。本协议是您（以下简称“用户”）与 SPlayer 开发团队（以下简称“开发者”）之间的法律协议。一旦您下载、安装或使用本软件，即表示您同意接受本协议的所有条款和条件。 ")])),_:1,__:[4]}),v(c,{prefix:"bar"},{default:_(()=>t[5]||(t[5]=[oe(" 软件使用 ")])),_:1,__:[5]}),v(p,null,{default:_(()=>[v(d,null,{default:_(()=>t[6]||(t[6]=[oe("本软件是一款本地音乐播放软件，允许用户播放存储在设备上的音频文件。")])),_:1,__:[6]}),v(d,null,{default:_(()=>t[7]||(t[7]=[oe("开发者保留随时修改、更新或终止软件及其功能的权利，而无需提前通知用户。")])),_:1,__:[7]}),v(d,null,{default:_(()=>t[8]||(t[8]=[oe("用户必须年满 18 岁或在父母或监护人的监督下使用本软件。")])),_:1,__:[8]})]),_:1}),v(c,{prefix:"bar"},{default:_(()=>t[9]||(t[9]=[oe(" 开源许可 ")])),_:1,__:[9]}),v(p,null,{default:_(()=>[v(d,null,{default:_(()=>t[10]||(t[10]=[oe("本软件是基于 AGPL-3.0 许可发布的开源软件。")])),_:1,__:[10]}),v(d,null,{default:_(()=>t[11]||(t[11]=[oe("用户在使用、修改和分发 SPlayer 时，必须遵守 AGPL-3.0 许可的条款和条件。")])),_:1,__:[11]}),v(d,null,{default:_(()=>[t[13]||(t[13]=oe(" AGPL-3.0 许可的详细信息可以在以下链接找到： ")),v(y,{href:"https://www.gnu.org/licenses/agpl-3.0.html",target:"_blank"},{default:_(()=>t[12]||(t[12]=[oe(" GNU Affero General Public License v3.0 ")])),_:1,__:[12]})]),_:1,__:[13]})]),_:1}),v(c,{prefix:"bar"},{default:_(()=>t[14]||(t[14]=[oe(" 第三方 ")])),_:1,__:[14]}),v(p,null,{default:_(()=>[v(d,null,{default:_(()=>t[15]||(t[15]=[oe("本软件可能会调用第三方 API 以提供额外功能（例如，歌词显示、专辑封面获取等）。")])),_:1,__:[15]}),v(d,null,{default:_(()=>t[16]||(t[16]=[oe(" 开发者不对第三方 API 的准确性、完整性或合法性负责。用户使用第三方 API 时，应遵守第三方提供商的服务条款和隐私政策。 ")])),_:1,__:[16]}),v(d,null,{default:_(()=>t[17]||(t[17]=[oe("由于第三方 API 引起的任何问题或纠纷，开发者不承担任何责任。")])),_:1,__:[17]})]),_:1}),v(c,{prefix:"bar"},{default:_(()=>t[18]||(t[18]=[oe(" 用户责任 ")])),_:1,__:[18]}),v(p,null,{default:_(()=>[v(d,null,{default:_(()=>t[19]||(t[19]=[oe(" 用户应遵守所有适用的法律法规，确保通过合法手段获取音乐文件，并在使用本软件时不侵犯任何第三方的版权或其他合法权益。 ")])),_:1,__:[19]}),v(d,null,{default:_(()=>t[20]||(t[20]=[oe(" 用户不得使用本软件进行任何非法活动，包括但不限于侵犯版权、传播恶意软件、非法获取数据等。 ")])),_:1,__:[20]})]),_:1}),v(c,{prefix:"bar"},{default:_(()=>t[21]||(t[21]=[oe(" 知识产权 ")])),_:1,__:[21]}),v(p,null,{default:_(()=>[v(d,null,{default:_(()=>t[22]||(t[22]=[oe(" 除了根据 AGPL-3.0 许可使用的开源部分外，本软件及其所有内容（包括但不限于软件、标识、图形、用户界面、脚本和服务名称）均为开发者或其许可方的财产，受知识产权法保护。 ")])),_:1,__:[22]}),v(d,null,{default:_(()=>t[23]||(t[23]=[oe(" 未经开发者书面许可，用户不得复制、修改、分发、出售或租赁本软件及其内容。 ")])),_:1,__:[23]})]),_:1}),v(c,{prefix:"bar"},{default:_(()=>t[24]||(t[24]=[oe(" 免责声明 ")])),_:1,__:[24]}),v(p,null,{default:_(()=>[v(d,null,{default:_(()=>t[25]||(t[25]=[oe(" 本软件按“现状”提供，不提供任何形式的明示或暗示保证，包括但不限于适销性、特定用途适用性和非侵权性。 ")])),_:1,__:[25]}),v(d,null,{default:_(()=>t[26]||(t[26]=[oe(" 开发者不保证本软件的功能不会中断或无错误，也不保证本软件适用于用户的特定需求。 ")])),_:1,__:[26]}),v(d,null,{default:_(()=>t[27]||(t[27]=[oe(" 用户使用本软件过程中产生的任何直接或间接损失，开发者不承担任何责任。 ")])),_:1,__:[27]})]),_:1}),v(c,{prefix:"bar"},{default:_(()=>t[28]||(t[28]=[oe(" 责任限制 ")])),_:1,__:[28]}),v(p,null,{default:_(()=>[v(d,null,{default:_(()=>t[29]||(t[29]=[oe(" 在适用法律允许的最大范围内，开发者对因使用或无法使用本软件而导致的任何间接、偶然、特殊、继发或惩罚性损害不承担责任，即使开发者已被告知此类损害的可能性。 ")])),_:1,__:[29]}),v(d,null,{default:_(()=>t[30]||(t[30]=[oe(" 在任何情况下，开发者对用户的全部责任，不论是合同、侵权（包括过失）或其他方面的责任，总额不超过用户为使用本软件所支付的费用（如果有）。 ")])),_:1,__:[30]})]),_:1}),v(c,{prefix:"bar"},{default:_(()=>t[31]||(t[31]=[oe(" 终止 ")])),_:1,__:[31]}),v(p,null,{default:_(()=>[v(d,null,{default:_(()=>t[32]||(t[32]=[oe(" 开发者有权在不提前通知的情况下，因任何原因或无原因终止本协议。 ")])),_:1,__:[32]}),v(d,null,{default:_(()=>t[33]||(t[33]=[oe(" 本协议终止后，用户应停止使用本软件并删除其所有副本。 ")])),_:1,__:[33]})]),_:1}),v(c,{prefix:"bar"},{default:_(()=>t[34]||(t[34]=[oe(" 隐私政策 ")])),_:1,__:[34]}),v(p,null,{default:_(()=>[v(d,null,{default:_(()=>t[35]||(t[35]=[oe(" 本软件可能会收集和使用用户的某些信息，以提供和改进软件服务。 ")])),_:1,__:[35]}),v(d,null,{default:_(()=>t[36]||(t[36]=[oe(" 开发者承诺保护用户的隐私，不会将用户信息出售给第三方。详细的隐私政策请参考我们的隐私声明。 ")])),_:1,__:[36]})]),_:1}),v(c,{prefix:"bar"},{default:_(()=>t[37]||(t[37]=[oe(" 更新与变更 ")])),_:1,__:[37]}),v(p,null,{default:_(()=>[v(d,null,{default:_(()=>t[38]||(t[38]=[oe(" 开发者保留随时更新和修改本协议的权利。 ")])),_:1,__:[38]}),v(d,null,{default:_(()=>t[39]||(t[39]=[oe(" 更新后的协议将通过适当的方式通知用户，包括但不限于在本软件中发布或通过电子邮件发送通知。 ")])),_:1,__:[39]})]),_:1}),v(c,{prefix:"bar"},{default:_(()=>t[40]||(t[40]=[oe(" 其他 ")])),_:1,__:[40]}),v(p,null,{default:_(()=>[v(d,null,{default:_(()=>t[41]||(t[41]=[oe(" 本协议受中华人民共和国法律管辖，不考虑其法律冲突条款。")])),_:1,__:[41]}),v(d,null,{default:_(()=>t[42]||(t[42]=[oe(" 如果本协议的任何条款被视为无效或不可执行，该条款将被修改以反映双方的意图，其余条款仍然完全有效。 ")])),_:1,__:[42]}),v(d,null,{default:_(()=>t[43]||(t[43]=[oe(" 本协议构成您与开发者之间关于使用本软件的完整协议，并取代之前的所有口头或书面协议和陈述。 ")])),_:1,__:[43]})]),_:1}),v(g,{ref_key:"readOverRef",ref:n},{default:_(()=>t[44]||(t[44]=[oe(" 若你（使用者）接受以上协议，请点击下面的“同意并使用”按钮签署本协议，若不接受，请点击“不同意”后软件将退出并清除本软件的所有数据。 ")])),_:1,__:[44]},512)]),_:1}),v(l,{justify:"center"},{default:_(()=>[m(Y)?(f(),h(w,{key:0,type:"error",onClick:a},{default:_(()=>t[45]||(t[45]=[oe("不同意")])),_:1,__:[45]})):me("",!0),v(w,{type:"success",onClick:t[0]||(t[0]=e=>r("close")),disabled:!m(i)},{default:_(()=>[oe(le(m(i)?"同意并使用":"请先完整阅读"),1)]),_:1},8,["disabled"])]),_:1})])}}}),[["__scopeId","data-v-5034249b"]]);const ho=new class{blobURLs;constructor(){this.blobURLs=new Map}createBlobURL(e,t,r){try{if(this.blobURLs.has(r))return this.blobURLs.get(r);const n=new Blob([e],{type:t}),i=URL.createObjectURL(n);return this.blobURLs.set(r,i),i}catch(n){throw console.error("❌ Error creating Blob URL:",n),n}}revokeBlobURL(e){try{const t=this.blobURLs.get(e);t&&(URL.revokeObjectURL(t),this.blobURLs.delete(e))}catch(t){console.error("❌ Error revoking Blob URL:",t)}}revokeAllBlobURLs(){try{this.blobURLs.forEach(e=>{URL.revokeObjectURL(e)}),this.blobURLs.clear()}catch(e){console.error("❌ Error revoking all Blob URLs:",e)}}},fo={class:"song-info-editor"},po=n({__name:"SongInfoEditor",props:{song:{}},emits:["close"],setup(e,{emit:t}){const r=e,n=t,i=ke(),a=Ke(),o=ot("local"),l=s(null),u=s({name:"",fileName:"",artist:"",album:""}),c={name:js,artist:js,album:js},h=s("/images/song.jpg?assest"),p=Q(async()=>{try{if(!r.song||!u.value.md5)return;const{result:e}=await Ze(u.value.name||"",u.value.artist||"",u.value.album||"",u.value.duration||0,u.value.md5),t=e.songs?.[0];if(Qe(t))return void window.$message.error("无法匹配，请修改信息后重试");{const e=Je([t])[0];u.value={...u.value,name:e.name,artist:tt(e.artists)?e.artists.map(e=>e.name).join(" / "):e.artists,album:et(e.album)?e.album.name:e.album,alia:e.alia};const r=await rt(e.id);u.value.lyric=r.lrc.lyric,window.$message.success("匹配成功")}}catch(e){console.error("Error online matching:",e),window.$message.error("匹配出错，请重试")}},300,{leading:!0,trailing:!1}),y=async()=>{const e=await window.electron.ipcRenderer.invoke("choose-image");e&&(h.value=e)},g=Q(async e=>{try{if(!l.value)return;await(l.value?.validate());const t={...u.value,cover:h.value.startsWith("blob:")||"/images/song.jpg?assest"===h.value?null:h.value};e.path,await window.electron.ipcRenderer.invoke("set-music-metadata",e.path,t),window.$message.success("歌曲信息修改成功"),(e=>{const t={name:e.name,artists:e.artist,album:e.album,alia:e.alia,cover:h.value||""};a.playSong?.id===r.song.id&&(a.playSong={...a.playSong,...t});const n=i.playList.findIndex(e=>e.id===r.song.id);-1!==n&&(i.playList[n]={...i.playList[n],...t}),o.emit()})(t),n("close")}catch(t){console.error("Error saving song info:",t),window.$message.error("歌曲信息修改失败，请重试")}},300);return d(async()=>{if(!r.song||!r.song.path)return;const e=r.song.path,t=await window.electron.ipcRenderer.invoke("get-music-metadata",e),{fileName:n,fileSize:i,common:a,format:s,md5:o}=t;u.value={fileName:n,name:a.title||"",artist:a.artist||"",album:a.album||"",alia:a.comment?.[0]||"",lyric:a.lyrics?.[0]||"",type:s.codec,duration:s.duration?Number(s.duration.toFixed(2)):0,size:i,br:s.bitrate?Math.floor(s.bitrate/1e3||0):0,frequency:s.sampleRate,md5:o};const l=a.picture?.[0]?.data||"",c=a.picture?.[0]?.format||"";l&&(h.value=ho.createBlobURL(l,c,e))}),(e,t)=>{const r=_e,i=ae,a=se,s=Se,o=Ae,d=re,b=it,w=ie,x=at,I=nt,T=te,E=Ye,A=Re,S=ye,k=Pe;return f(),F("div",fo,[v(k,{type:"segment",animated:""},{default:_(()=>[v(A,{name:"info",tab:"信息","display-directive":"show"},{default:_(()=>[v(s,{class:"match",justify:"space-between",align:"center"},{default:_(()=>[v(r,null,{default:_(()=>t[14]||(t[14]=[oe("不想手动填写标签？")])),_:1,__:[14]}),v(a,{type:"primary",strong:"",secondary:"",onClick:m(p)},{icon:_(()=>[v(i,{name:"AutoFix"})]),default:_(()=>[t[15]||(t[15]=oe(" 自动匹配标签 "))]),_:1,__:[15]},8,["onClick"])]),_:1}),v(E,{class:"scrollbar"},{default:_(()=>[v(T,{ref_key:"infoFormRef",ref:l,model:m(u),rules:c,class:"phone-form"},{default:_(()=>[v(d,{label:"文件名",path:"fileName"},{default:_(()=>[v(o,{value:m(u).fileName,"onUpdate:value":t[0]||(t[0]=e=>m(u).fileName=e),disabled:""},null,8,["value"])]),_:1}),v(d,{label:"歌曲名",path:"name"},{default:_(()=>[v(o,{value:m(u).name,"onUpdate:value":t[1]||(t[1]=e=>m(u).name=e),placeholder:"请输入歌曲名",clearable:""},null,8,["value"])]),_:1}),v(d,{label:"歌手",path:"artist"},{default:_(()=>[v(o,{value:m(u).artist,"onUpdate:value":t[2]||(t[2]=e=>m(u).artist=e),placeholder:"请输入歌手名",clearable:""},null,8,["value"])]),_:1}),v(d,{label:"专辑",path:"album"},{default:_(()=>[v(o,{value:m(u).album,"onUpdate:value":t[3]||(t[3]=e=>m(u).album=e),placeholder:"请输入专辑名",clearable:""},null,8,["value"])]),_:1}),v(d,{label:"别名",path:"alia"},{default:_(()=>[v(o,{value:m(u).alia,"onUpdate:value":t[4]||(t[4]=e=>m(u).alia=e),placeholder:"请输入别名",clearable:""},null,8,["value"])]),_:1}),v(d,{label:"歌词",path:"lyric"},{default:_(()=>[v(o,{value:m(u).lyric,"onUpdate:value":t[5]||(t[5]=e=>m(u).lyric=e),autosize:{minRows:3,maxRows:6},placeholder:"请输入歌词",type:"textarea"},null,8,["value"])]),_:1}),v(I,{cols:24,"x-gap":24},{default:_(()=>[v(b,{span:12,label:"类型",path:"type"},{default:_(()=>[v(o,{value:m(u).type,"onUpdate:value":t[6]||(t[6]=e=>m(u).type=e),disabled:""},null,8,["value"])]),_:1}),v(b,{span:12,label:"码率",path:"br"},{default:_(()=>[v(w,{value:m(u).br,"onUpdate:value":t[7]||(t[7]=e=>m(u).br=e),"show-button":!1,style:{width:"100%"},disabled:""},{suffix:_(()=>[v(r,{depth:"3"},{default:_(()=>t[16]||(t[16]=[oe("kbps")])),_:1,__:[16]})]),_:1},8,["value"])]),_:1}),v(b,{span:12,label:"时长",path:"duration"},{default:_(()=>[v(w,{value:m(u).duration,"onUpdate:value":t[8]||(t[8]=e=>m(u).duration=e),"show-button":!1,style:{width:"100%"},disabled:""},{suffix:_(()=>[v(r,{depth:"3"},{default:_(()=>t[17]||(t[17]=[oe("s")])),_:1,__:[17]})]),_:1},8,["value"])]),_:1}),v(b,{span:12,label:"频率",path:"br"},{default:_(()=>[v(w,{value:m(u).frequency,"onUpdate:value":t[9]||(t[9]=e=>m(u).frequency=e),"show-button":!1,style:{width:"100%"},disabled:""},{suffix:_(()=>[v(r,{depth:"3"},{default:_(()=>t[18]||(t[18]=[oe("Hz")])),_:1,__:[18]})]),_:1},8,["value"])]),_:1}),v(b,{span:12,label:"路径",path:"path"},{default:_(()=>[v(x,null,{default:_(()=>[v(o,{value:e.song.path,disabled:""},null,8,["value"]),v(a,{type:"primary",ghost:"",onClick:t[10]||(t[10]=t=>m(st)(e.song.path))},{icon:_(()=>[v(i,{name:"Copy"})]),_:1})]),_:1})]),_:1}),v(b,{span:12,label:"MD5",path:"md5"},{default:_(()=>[v(x,null,{default:_(()=>[v(o,{value:m(u).md5,disabled:""},null,8,["value"]),v(a,{type:"primary",ghost:"",onClick:t[11]||(t[11]=e=>m(st)(m(u).md5))},{icon:_(()=>[v(i,{name:"Copy"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1}),v(A,{name:"cover",tab:"封面","display-directive":"show"},{default:_(()=>[v(S,{src:m(h),"preview-disabled":!0,width:"300",height:"300",class:"cover",onClick:y},null,8,["src"]),v(s,{class:"menu",justify:"center"},{default:_(()=>[v(r,{depth:"3"},{default:_(()=>t[19]||(t[19]=[oe("点击封面以更换")])),_:1,__:[19]})]),_:1})]),_:1})]),_:1}),v(s,{class:"menu",justify:"center"},{default:_(()=>[v(a,{class:"btn",strong:"",secondary:"",onClick:t[12]||(t[12]=e=>n("close"))},{default:_(()=>t[20]||(t[20]=[oe("取消")])),_:1,__:[20]}),v(a,{class:"btn",type:"primary",onClick:t[13]||(t[13]=t=>m(g)(e.song))},{default:_(()=>t[21]||(t[21]=[oe("保存修改")])),_:1,__:[21]})]),_:1})])}}}),mo=B(po,[["__scopeId","data-v-298a1c67"]]),yo=""+new URL("../images/album.jpg?assest",import.meta.url).href,go={class:"playlist-add"},_o=n({__name:"PlaylistAdd",props:{data:{},isLocal:{type:Boolean}},emits:["close"],setup(e,{emit:t}){const r=e,n=t,i=ke(),a=s(),l=o(()=>i.userLikeData.playlists.filter(e=>e.userId===i.userData?.userId)||[]),u=Q(async(e,t)=>{if(2===K())return void window.$message.warning("该登录模式暂不支持该操作");a.value=window.$message.loading("正在添加歌曲至歌单",{duration:0});const i=r.data.map(e=>e.id).filter(e=>0!==e),s=await lt(e,i);if(a.value&&a.value.destroy(),200===s.status){if(200!==s.body?.code)return void window.$message.error(s.body?.message||"添加失败，请重试");n("close"),window.$message.success("添加歌曲至歌单成功"),0===t&&await ut(),await ct()}else window.$message.error(s?.message||"添加失败，请重试")},500,{leading:!0,trailing:!1});return(e,t)=>{const r=ae,n=ft,i=ht,a=ye,s=_e,o=dt,c=Ye,d=Re,p=pt,y=Pe;return f(),F("div",go,[v(y,{"default-value":e.isLocal?"local":"online",type:"segment",animated:""},{default:_(()=>[v(d,{disabled:e.isLocal,name:"online",tab:"在线歌单"},{default:_(()=>[v(c,{style:{"max-height":"70vh"}},{default:_(()=>[v(o,{class:"playlists-list",hoverable:"",clickable:""},{default:_(()=>[v(i,{class:"playlist add",onClick:m(gd)},{prefix:_(()=>[v(r,{name:"Add",size:20})]),default:_(()=>[v(n,{title:"创建新歌单"})]),_:1},8,["onClick"]),(f(!0),F(De,null,Ne(m(l),(e,r)=>(f(),h(i,{key:r,class:"playlist",onClick:t=>m(u)(e?.id,r)},{prefix:_(()=>[v(a,{src:e?.coverSize?.s||"/images/album.jpg?assest",class:"cover","preview-disabled":"",lazy:"",onLoad:m(ge)},{placeholder:_(()=>t[0]||(t[0]=[N("div",{class:"cover-loading"},[N("img",{class:"loading-img",src:yo,alt:"loading-img"})],-1)])),_:2},1032,["src","onLoad"])]),default:_(()=>[v(n,{title:0===r?"我喜欢的音乐":e.name},{description:_(()=>[v(s,{depth:"3",class:"size"},{default:_(()=>[oe(le(e.count)+" 首音乐",1)]),_:2},1024)]),_:2},1032,["title"])]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["disabled"]),v(d,{name:"local",tab:"本地歌单"},{default:_(()=>[v(p,{description:"暂未实现"})]),_:1})]),_:1},8,["default-value"])])}}}),vo=B(_o,[["__scopeId","data-v-68226d40"]]),bo={class:"batch-list"},wo=B(n({__name:"batchList",props:{data:{},isLocal:{type:Boolean},playListId:{}},setup(e){const t=e,r=s(0),n=s([]),i=o(()=>[{type:"selection",disabled:e=>!e.id},{title:"#",key:"key",width:80},{title:"标题",key:"name",ellipsis:{tooltip:!0}},{title:"歌手",key:"artists",ellipsis:{tooltip:!0}},{title:"专辑",key:"album",ellipsis:{tooltip:!0}}]),a=o(()=>t.data.map((e,t)=>({key:t+1,id:e?.id,name:e?.name||"未知曲目",artists:tt(e?.artists)?e?.artists.map(e=>e.name).join(" / "):e?.artists||"未知歌手",album:et(e?.album)?e?.album.name:e?.album||"未知专辑",origin:e}))),l=(e,t)=>{r.value=e.length,n.value=t.map(e=>e.origin).filter(e=>e)};return(e,t)=>{const s=mt,o=_e,u=ae,c=se,d=Se;return f(),F("div",bo,[v(s,{columns:m(i),data:m(a),"max-height":"60vh","virtual-scroll":"","onUpdate:checkedRowKeys":l},null,8,["columns","data"]),v(d,{class:"batch-footer",justify:"space-between",align:"center"},{default:_(()=>[v(o,{depth:3,class:"count"},{default:_(()=>[oe("已选择 "+le(m(r))+" 首",1)]),_:1}),v(d,{class:"menu"},{default:_(()=>[e.playListId?(f(),h(c,{key:0,disabled:!m(r),type:"error",strong:"",secondary:"",onClick:t[0]||(t[0]=t=>m(yt)(e.playListId,m(n).map(e=>e.id)))},{icon:_(()=>[v(u,{name:"Delete"})]),default:_(()=>[t[2]||(t[2]=oe(" 删除选中的歌曲 "))]),_:1,__:[2]},8,["disabled"])):me("",!0),v(c,{disabled:!m(r),type:"primary",strong:"",secondary:"",onClick:t[1]||(t[1]=t=>m(pd)(m(n),e.isLocal))},{icon:_(()=>[v(u,{name:"AddList"})]),default:_(()=>[t[3]||(t[3]=oe(" 添加到歌单 "))]),_:1,__:[3]},8,["disabled"])]),_:1})]),_:1})])}}}),[["__scopeId","data-v-873ae06a"]]),xo=""+new URL("../images/song.jpg?assest",import.meta.url).href,Io={key:0,class:"data"},To={key:0,class:"artists text-hidden"},Eo={key:1,class:"artists text-hidden"},Ao={class:"album text-hidden"},So={key:1,class:"data"},ko=B(n({__name:"SongDataCard",props:{data:{},canJump:{type:Boolean}},setup:e=>(e,t)=>{const r=ye,n=_e,i=ae,a=ve,s=Be;return f(),h(s,{class:"song-data-card"},{default:_(()=>[v(r,{src:e.data?.coverSize?.s||e.data?.cover,class:"cover","preview-disabled":"",lazy:"",onLoad:m(ge)},{placeholder:_(()=>t[0]||(t[0]=[N("div",{class:"cover-loading"},[N("img",{src:xo,class:"loading-img",alt:"loading-img"})],-1)])),_:1},8,["src","onLoad"]),v(pe,{name:"fade",mode:"out-in"},{default:_(()=>[e.data?(f(),F("div",Io,[v(n,{class:"name"},{default:_(()=>[oe(le(e.data.name||"未知曲目"),1)]),_:1}),Array.isArray(e.data.artists)?(f(),F("div",To,[v(i,{name:"Artist",depth:3}),(f(!0),F(De,null,Ne(e.data.artists,e=>(f(),h(n,{key:e.id,class:"ar"},{default:_(()=>[oe(le(e.name),1)]),_:2},1024))),128))])):(f(),F("div",Eo,[v(i,{name:"Artist",depth:3}),v(n,{class:"ar"},{default:_(()=>[oe(le(e.data.artists||"未知艺术家"),1)]),_:1})])),N("div",Ao,[v(i,{name:"Album",depth:3}),m(et)(e.data.album)?(f(),h(n,{key:0,class:"album-text"},{default:_(()=>[oe(le(e.data.album?.name||"未知专辑"),1)]),_:1})):(f(),h(n,{key:1,class:"album-text"},{default:_(()=>[oe(le(e.data.album||"未知专辑"),1)]),_:1}))])])):(f(),F("div",So,[v(a,{text:"",round:"",repeat:2})]))]),_:1})]),_:1})}}),[["__scopeId","data-v-06b07da2"]]),Co=(e=50,t=0)=>gt({url:"/user/cloud",params:{limit:e,offset:t,timestamp:Date.now()}}),Po=e=>gt({url:"/user/cloud/del",params:{id:e,timestamp:Date.now()}}),Ro=(e,t,r,n,i,a,s,o)=>gt({url:"/cloud/import",method:"POST",params:{id:a,song:e,fileType:t,fileSize:r,bitrate:n,md5:i,artist:s,album:o,timestamp:Date.now()}}),Mo={class:"cloud-match"},Lo=n({__name:"CloudMatch",props:{id:{},index:{}},emits:["close"],setup(e,{emit:t}){const r=e,n=t,i=ke(),a=s(!1),o=s(null),l=s(null),u=s({sid:r.id,asid:null}),c={asid:{...Gs,message:"请输入歌曲 ID"}},d=Q(async()=>{const e=u.value.asid;if(!e)return void window.$message.warning("请输入歌曲 ID");const{songs:t}=await _t(e);t?.length?(window.$message.success("验证成功"),a.value=!0,o.value=Je(t)[0]):window.$message.warning("未找到该歌曲，请重试")},300,{leading:!0,trailing:!1}),h=Q(async()=>{const e=i.userData.userId;if(!u.value.asid||!e)return void window.$message.warning("获取必要信息失败，请重试");if(u.value.sid===u.value.asid)return void window.$message.warning("与原歌曲 ID 一致，无需纠正");if(!a.value)return void window.$message.warning("歌曲未通过验证，请重试");const t=await(s=e,l=u.value.sid,c=u.value.asid,gt({url:"/cloud/match",params:{uid:s,sid:l,asid:c,timestamp:Date.now()}}));var s,l,c;200===t.code?(n("close"),o.value&&(i.cloudPlayList[r.index]=o.value,i.setCloudPlayList(i.cloudPlayList)),window.$message.success("歌曲信息纠正成功")):window.$message.error(t.message||"纠正失败，请重试")},300,{leading:!0,trailing:!1});return(e,t)=>{const r=ie,i=re,s=se,p=Se,y=te,g=ko,b=vt;return f(),F("div",Mo,[v(y,{ref_key:"matchFormRef",ref:l,model:m(u),rules:c},{default:_(()=>[v(i,{path:"sid",label:"原歌曲 ID"},{default:_(()=>[v(r,{value:m(u).sid,"onUpdate:value":t[0]||(t[0]=e=>m(u).sid=e),"show-button":!1,disabled:""},null,8,["value"])]),_:1}),v(i,{path:"asid",label:"匹配的 ID"},{default:_(()=>[v(p,{size:12,wrap:!1,class:"input"},{default:_(()=>[v(r,{value:m(u).asid,"onUpdate:value":t[1]||(t[1]=e=>m(u).asid=e),"show-button":!1,placeholder:"请输入要匹配的歌曲 ID",onInput:t[2]||(t[2]=e=>a.value=!1)},null,8,["value"]),v(s,{disabled:!m(u).asid||m(a),type:m(a)?"success":"primary",onClick:m(d)},{default:_(()=>[oe(le(m(a)?"验证成功":"验证"),1)]),_:1},8,["disabled","type","onClick"])]),_:1})]),_:1})]),_:1},8,["model"]),v(b,{show:m(a)},{default:_(()=>[v(g,{data:m(o)},null,8,["data"])]),_:1},8,["show"]),v(p,{class:"menu",justify:"end"},{default:_(()=>[v(s,{strong:"",secondary:"",onClick:t[3]||(t[3]=e=>n("close"))},{default:_(()=>t[4]||(t[4]=[oe(" 取消 ")])),_:1,__:[4]}),v(s,{type:"primary",strong:"",secondary:"",onClick:m(h)},{default:_(()=>t[5]||(t[5]=[oe(" 确认纠正 ")])),_:1,__:[5]},8,["onClick"])]),_:1})])}}}),Oo=B(Lo,[["__scopeId","data-v-c80f17b7"]]),Fo={class:"create-playlist"},Do=n({__name:"CreatePlaylist",emits:["close"],setup(e,{emit:t}){const r=t,n=ke(),i=s(1===K()?"online":"local"),a=s(null),o=s({name:"",type:"NORMAL",privacy:!1}),l={name:js},u=[{label:"普通歌单",value:"NORMAL"},{label:"视频歌单",disabled:!0,value:"VIDEO"},{label:"共享歌单",disabled:!0,value:"SHARED"}],c=Q(async e=>{if(e.preventDefault(),"online"===i.value){await(a.value?.validate(e=>e));const e=await bt(o.value.name,o.value.privacy,o.value.type);200===e.code?(r("close"),window.$message.success("新建歌单成功"),n.userData.createdPlaylistCount&&n.userData.createdPlaylistCount++,await ct()):window.$message.error(e.message||"新建歌单失败，请重试")}},300,{leading:!0,trailing:!1});return(e,t)=>{const r=Ae,n=re,s=ne,d=wt,h=te,p=Re,y=pt,g=Pe,b=se;return f(),F("div",Fo,[v(g,{value:m(i),"onUpdate:value":t[3]||(t[3]=e=>Te(i)?i.value=e:null),type:"segment",animated:""},{default:_(()=>[v(p,{disabled:1!==m(K)(),name:"online",tab:"在线歌单"},{default:_(()=>[v(h,{ref_key:"onlineFormRef",ref:a,model:m(o),rules:l},{default:_(()=>[v(n,{label:"歌单名称",path:"name"},{default:_(()=>[v(r,{value:m(o).name,"onUpdate:value":t[0]||(t[0]=e=>m(o).name=e),placeholder:"请输入歌单名称"},null,8,["value"])]),_:1}),v(n,{label:"歌单类型",path:"type"},{default:_(()=>[v(s,{value:m(o).type,"onUpdate:value":t[1]||(t[1]=e=>m(o).type=e),options:u},null,8,["value"])]),_:1}),v(n,{label:"设为隐私歌单",path:"privacy","label-placement":"left"},{default:_(()=>[v(d,{value:m(o).privacy,"onUpdate:value":t[2]||(t[2]=e=>m(o).privacy=e)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["disabled"]),v(p,{name:"local",tab:"本地歌单"},{default:_(()=>[v(y,{description:"暂未实现"})]),_:1})]),_:1},8,["value"]),v(b,{class:"create",type:"primary",onClick:m(c)},{default:_(()=>t[4]||(t[4]=[oe(" 新建 ")])),_:1,__:[4]},8,["onClick"])])}}}),No=B(Do,[["__scopeId","data-v-3a5f1a4f"]]),Bo={class:"update-playlist"},Uo=n({__name:"UpdatePlaylist",props:{id:{},data:{}},emits:["success"],setup(e,{emit:t}){const r=e,n=t,i=ke(),a=o(()=>i.userLikeData.playlists?.[0]?.id===r.id),l=s(null),u=s({name:a.value?"我喜欢的音乐":r.data.name,desc:r.data.description,tags:r.data.tags}),c={name:js},h=o(()=>Qe(i.catData?.cats)?[]:Object.keys(i.catData?.type).map(e=>({type:"group",key:e,label:i.catData?.type[e],children:i.catData?.cats?.filter(t=>t.category===Number(e)).map(e=>({label:e.name,value:e.name}))}))),p=e=>{It(e)>3&&(u.value.tags=e.slice(0,3),window.$message.warning("最多只能有3个标签"))},y=Q(async e=>{e.preventDefault(),await(l.value?.validate(e=>e));const t=await xt(r.id,u.value.name,u.value.desc??"",u.value.tags??[]);200===t.code?(n("success"),window.$message.success("歌单编辑成功"),await ct()):window.$message.error(t.message||"歌单编辑失败，请重试")},300,{leading:!0,trailing:!1});return d(()=>i.getPlaylistCatList()),(e,t)=>{const r=Ae,n=re,i=ne,s=te,o=se;return f(),F("div",Bo,[v(s,{ref_key:"updateFormRef",ref:l,model:m(u),rules:c},{default:_(()=>[v(n,{label:"歌单名",path:"name"},{default:_(()=>[v(r,{value:m(u).name,"onUpdate:value":t[0]||(t[0]=e=>m(u).name=e),disabled:m(a),placeholder:"请输入歌单名"},null,8,["value","disabled"])]),_:1}),v(n,{label:"歌单描述",path:"desc"},{default:_(()=>[v(r,{value:m(u).desc,"onUpdate:value":t[1]||(t[1]=e=>m(u).desc=e),autosize:{minRows:3,maxRows:6},maxlength:800,placeholder:"请输入歌单描述",type:"textarea","show-count":"",clearable:""},null,8,["value"])]),_:1}),v(n,{label:"歌单分类",path:"tags"},{default:_(()=>[v(i,{value:m(u).tags,"onUpdate:value":[t[2]||(t[2]=e=>m(u).tags=e),p],options:m(h),placeholder:"请选择歌单标签",filterable:"",multiple:""},null,8,["value","options"])]),_:1})]),_:1},8,["model"]),v(o,{class:"create",type:"primary",onClick:m(y)},{default:_(()=>t[3]||(t[3]=[oe(" 编辑 ")])),_:1,__:[3]},8,["onClick"])])}}}),jo=B(Uo,[["__scopeId","data-v-4a138492"]]);var Go,zo={exports:{}};Go=zo,function(){function e(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function t(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){s(n.response,t,r)},n.onerror=function(){console.error("could not download file")},n.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(r){}return 200<=t.status&&299>=t.status}function n(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(r){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof Tt&&Tt.global===Tt?Tt:void 0,a=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(e,a,s){var o=i.URL||i.webkitURL,l=document.createElement("a");a=a||e.name||"download",l.download=a,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?n(l):r(l.href)?t(e,a,s):n(l,l.target="_blank")):(l.href=o.createObjectURL(e),setTimeout(function(){o.revokeObjectURL(l.href)},4e4),setTimeout(function(){n(l)},0))}:"msSaveOrOpenBlob"in navigator?function(i,a,s){if(a=a||i.name||"download","string"!=typeof i)navigator.msSaveOrOpenBlob(e(i,s),a);else if(r(i))t(i,a,s);else{var o=document.createElement("a");o.href=i,o.target="_blank",setTimeout(function(){n(o)})}}:function(e,r,n,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof e)return t(e,r,n);var o="application/octet-stream"===e.type,l=/constructor/i.test(i.HTMLElement)||i.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||o&&l||a)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=e:location=e,s=null},c.readAsDataURL(e)}else{var d=i.URL||i.webkitURL,h=d.createObjectURL(e);s?s.location=h:location.href=h,s=null,setTimeout(function(){d.revokeObjectURL(h)},4e4)}});i.saveAs=s.saveAs=s,Go.exports=s}();var Ho,Vo=zo.exports,$o={};
/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
Ho=$o,function(){var e=function(){this.init()};e.prototype={init:function(){var e=this||t;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var r=this||t;if(e=parseFloat(e),r.ctx||u(),void 0!==e&&e>=0&&e<=1){if(r._volume=e,r._muted)return r;r.usingWebAudio&&r.masterGain.gain.setValueAtTime(e,t.ctx.currentTime);for(var n=0;n<r._howls.length;n++)if(!r._howls[n]._webAudio)for(var i=r._howls[n]._getSoundIds(),a=0;a<i.length;a++){var s=r._howls[n]._soundById(i[a]);s&&s._node&&(s._node.volume=s._volume*e)}return r}return r._volume},mute:function(e){var r=this||t;r.ctx||u(),r._muted=e,r.usingWebAudio&&r.masterGain.gain.setValueAtTime(e?0:r._volume,t.ctx.currentTime);for(var n=0;n<r._howls.length;n++)if(!r._howls[n]._webAudio)for(var i=r._howls[n]._getSoundIds(),a=0;a<i.length;a++){var s=r._howls[n]._soundById(i[a]);s&&s._node&&(s._node.muted=!!e||s._muted)}return r},stop:function(){for(var e=this||t,r=0;r<e._howls.length;r++)e._howls[r].stop();return e},unload:function(){for(var e=this||t,r=e._howls.length-1;r>=0;r--)e._howls[r].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,u()),e},codecs:function(e){return(this||t)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||t;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(r){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(r){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||t,r=null;try{r="undefined"!=typeof Audio?new Audio:null}catch(c){return e}if(!r||"function"!=typeof r.canPlayType)return e;var n=r.canPlayType("audio/mpeg;").replace(/^no$/,""),i=e._navigator?e._navigator.userAgent:"",a=i.match(/OPR\/(\d+)/g),s=a&&parseInt(a[0].split("/")[1],10)<33,o=-1!==i.indexOf("Safari")&&-1===i.indexOf("Chrome"),l=i.match(/Version\/(.*?) /),u=o&&l&&parseInt(l[1],10)<15;return e._codecs={mp3:!(s||!n&&!r.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!r.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!r.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!r.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(r.canPlayType('audio/wav; codecs="1"')||r.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!r.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!r.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(r.canPlayType("audio/x-m4a;")||r.canPlayType("audio/m4a;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(r.canPlayType("audio/x-m4b;")||r.canPlayType("audio/m4b;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(r.canPlayType("audio/x-mp4;")||r.canPlayType("audio/mp4;")||r.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(u||!r.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(u||!r.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!r.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(r.canPlayType("audio/x-flac;")||r.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||t;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var r=function(t){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var n=new Audio;n._unlocked=!0,e._releaseHtml5Audio(n)}catch(u){e.noAudio=!0;break}for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var a=e._howls[i]._getSoundIds(),s=0;s<a.length;s++){var o=e._howls[i]._soundById(a[s]);o&&o._node&&!o._node._unlocked&&(o._node._unlocked=!0,o._node.load())}e._autoResume();var l=e.ctx.createBufferSource();l.buffer=e._scratchBuffer,l.connect(e.ctx.destination),void 0===l.start?l.noteOn(0):l.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),l.onended=function(){l.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",r,!0),document.removeEventListener("touchend",r,!0),document.removeEventListener("click",r,!0),document.removeEventListener("keydown",r,!0);for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("unlock")}};return document.addEventListener("touchstart",r,!0),document.addEventListener("touchend",r,!0),document.addEventListener("click",r,!0),document.addEventListener("keydown",r,!0),e}},_obtainHtml5Audio:function(){var e=this||t;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var r=(new Audio).play();return r&&"undefined"!=typeof Promise&&(r instanceof Promise||"function"==typeof r.then)&&r.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var r=this||t;return e._unlocked&&r._html5AudioPool.push(e),r},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&t.usingWebAudio){for(var r=0;r<e._howls.length;r++)if(e._howls[r]._webAudio)for(var n=0;n<e._howls[r]._sounds.length;n++)if(!e._howls[r]._sounds[n]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var t=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(t,t)}},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&t.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var t=new e,r=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};r.prototype={init:function(e){var r=this;return t.ctx||u(),r._autoplay=e.autoplay||!1,r._format="string"!=typeof e.format?e.format:[e.format],r._html5=e.html5||!1,r._muted=e.mute||!1,r._loop=e.loop||!1,r._pool=e.pool||5,r._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,r._rate=e.rate||1,r._sprite=e.sprite||{},r._src="string"!=typeof e.src?e.src:[e.src],r._volume=void 0!==e.volume?e.volume:1,r._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},r._duration=0,r._state="unloaded",r._sounds=[],r._endTimers={},r._queue=[],r._playLock=!1,r._onend=e.onend?[{fn:e.onend}]:[],r._onfade=e.onfade?[{fn:e.onfade}]:[],r._onload=e.onload?[{fn:e.onload}]:[],r._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],r._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],r._onpause=e.onpause?[{fn:e.onpause}]:[],r._onplay=e.onplay?[{fn:e.onplay}]:[],r._onstop=e.onstop?[{fn:e.onstop}]:[],r._onmute=e.onmute?[{fn:e.onmute}]:[],r._onvolume=e.onvolume?[{fn:e.onvolume}]:[],r._onrate=e.onrate?[{fn:e.onrate}]:[],r._onseek=e.onseek?[{fn:e.onseek}]:[],r._onunlock=e.onunlock?[{fn:e.onunlock}]:[],r._onresume=[],r._webAudio=t.usingWebAudio&&!r._html5,void 0!==t.ctx&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(r),r._autoplay&&r._queue.push({event:"play",action:function(){r.play()}}),r._preload&&"none"!==r._preload&&r.load(),r},load:function(){var e=this,r=null;if(t.noAudio)e._emit("loaderror",null,"No audio support.");else{"string"==typeof e._src&&(e._src=[e._src]);for(var i=0;i<e._src.length;i++){var s,o;if(e._format&&e._format[i])s=e._format[i];else{if("string"!=typeof(o=e._src[i])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(s=/^data:audio\/([^;,]+);/i.exec(o))||(s=/\.([^.]+)$/.exec(o.split("?",1)[0])),s&&(s=s[1].toLowerCase())}if(s||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),s&&t.codecs(s)){r=e._src[i];break}}if(r)return e._src=r,e._state="loading","https:"===window.location.protocol&&"http:"===r.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new n(e),e._webAudio&&a(e),e;e._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,r){var n=this,i=null;if("number"==typeof e)i=e,e=null;else{if("string"==typeof e&&"loaded"===n._state&&!n._sprite[e])return null;if(void 0===e&&(e="__default",!n._playLock)){for(var a=0,s=0;s<n._sounds.length;s++)n._sounds[s]._paused&&!n._sounds[s]._ended&&(a++,i=n._sounds[s]._id);1===a?e=null:i=null}}var o=i?n._soundById(i):n._inactiveSound();if(!o)return null;if(i&&!e&&(e=o._sprite||"__default"),"loaded"!==n._state){o._sprite=e,o._ended=!1;var l=o._id;return n._queue.push({event:"play",action:function(){n.play(l)}}),l}if(i&&!o._paused)return r||n._loadQueue("play"),o._id;n._webAudio&&t._autoResume();var u=Math.max(0,o._seek>0?o._seek:n._sprite[e][0]/1e3),c=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-u),d=1e3*c/Math.abs(o._rate),h=n._sprite[e][0]/1e3,f=(n._sprite[e][0]+n._sprite[e][1])/1e3;o._sprite=e,o._ended=!1;var p=function(){o._paused=!1,o._seek=u,o._start=h,o._stop=f,o._loop=!(!o._loop&&!n._sprite[e][2])};if(!(u>=f)){var m=o._node;if(n._webAudio){var y=function(){n._playLock=!1,p(),n._refreshBuffer(o);var e=o._muted||n._muted?0:o._volume;m.gain.setValueAtTime(e,t.ctx.currentTime),o._playStart=t.ctx.currentTime,void 0===m.bufferSource.start?o._loop?m.bufferSource.noteGrainOn(0,u,86400):m.bufferSource.noteGrainOn(0,u,c):o._loop?m.bufferSource.start(0,u,86400):m.bufferSource.start(0,u,c),d!==1/0&&(n._endTimers[o._id]=setTimeout(n._ended.bind(n,o),d)),r||setTimeout(function(){n._emit("play",o._id),n._loadQueue()},0)};"running"===t.state&&"interrupted"!==t.ctx.state?y():(n._playLock=!0,n.once("resume",y),n._clearTimer(o._id))}else{var g=function(){m.currentTime=u,m.muted=o._muted||n._muted||t._muted||m.muted,m.volume=o._volume*t.volume(),m.playbackRate=o._rate;try{var i=m.play();if(i&&"undefined"!=typeof Promise&&(i instanceof Promise||"function"==typeof i.then)?(n._playLock=!0,p(),i.then(function(){n._playLock=!1,m._unlocked=!0,r?n._loadQueue():n._emit("play",o._id)}).catch(function(){n._playLock=!1,n._emit("playerror",o._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),o._ended=!0,o._paused=!0})):r||(n._playLock=!1,p(),n._emit("play",o._id)),m.playbackRate=o._rate,m.paused)return void n._emit("playerror",o._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||o._loop?n._endTimers[o._id]=setTimeout(n._ended.bind(n,o),d):(n._endTimers[o._id]=function(){n._ended(o),m.removeEventListener("ended",n._endTimers[o._id],!1)},m.addEventListener("ended",n._endTimers[o._id],!1))}catch(a){n._emit("playerror",o._id,a)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===m.src&&(m.src=n._src,m.load());var _=window&&window.ejecta||!m.readyState&&t._navigator.isCocoonJS;if(m.readyState>=3||_)g();else{n._playLock=!0,n._state="loading";var v=function(){n._state="loaded",g(),m.removeEventListener(t._canPlayEvent,v,!1)};m.addEventListener(t._canPlayEvent,v,!1),n._clearTimer(o._id)}}return o._id}n._ended(o)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var r=t._getSoundIds(e),n=0;n<r.length;n++){t._clearTimer(r[n]);var i=t._soundById(r[n]);if(i&&!i._paused&&(i._seek=t.seek(r[n]),i._rateSeek=0,i._paused=!0,t._stopFade(r[n]),i._node))if(t._webAudio){if(!i._node.bufferSource)continue;void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),t._cleanBuffer(i._node)}else isNaN(i._node.duration)&&i._node.duration!==1/0||i._node.pause();arguments[1]||t._emit("pause",i?i._id:null)}return t},stop:function(e,t){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"stop",action:function(){r.stop(e)}}),r;for(var n=r._getSoundIds(e),i=0;i<n.length;i++){r._clearTimer(n[i]);var a=r._soundById(n[i]);a&&(a._seek=a._start||0,a._rateSeek=0,a._paused=!0,a._ended=!0,r._stopFade(n[i]),a._node&&(r._webAudio?a._node.bufferSource&&(void 0===a._node.bufferSource.stop?a._node.bufferSource.noteOff(0):a._node.bufferSource.stop(0),r._cleanBuffer(a._node)):isNaN(a._node.duration)&&a._node.duration!==1/0||(a._node.currentTime=a._start||0,a._node.pause(),a._node.duration===1/0&&r._clearSound(a._node))),t||r._emit("stop",a._id))}return r},mute:function(e,r){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(e,r)}}),n;if(void 0===r){if("boolean"!=typeof e)return n._muted;n._muted=e}for(var i=n._getSoundIds(r),a=0;a<i.length;a++){var s=n._soundById(i[a]);s&&(s._muted=e,s._interval&&n._stopFade(s._id),n._webAudio&&s._node?s._node.gain.setValueAtTime(e?0:s._volume,t.ctx.currentTime):s._node&&(s._node.muted=!!t._muted||e),n._emit("mute",s._id))}return n},volume:function(){var e,r,n,i=this,a=arguments;if(0===a.length)return i._volume;if(1===a.length||2===a.length&&void 0===a[1]?i._getSoundIds().indexOf(a[0])>=0?r=parseInt(a[0],10):e=parseFloat(a[0]):a.length>=2&&(e=parseFloat(a[0]),r=parseInt(a[1],10)),!(void 0!==e&&e>=0&&e<=1))return(n=r?i._soundById(r):i._sounds[0])?n._volume:0;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"volume",action:function(){i.volume.apply(i,a)}}),i;void 0===r&&(i._volume=e),r=i._getSoundIds(r);for(var s=0;s<r.length;s++)(n=i._soundById(r[s]))&&(n._volume=e,a[2]||i._stopFade(r[s]),i._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(e,t.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=e*t.volume()),i._emit("volume",n._id));return i},fade:function(e,r,n,i){var a=this;if("loaded"!==a._state||a._playLock)return a._queue.push({event:"fade",action:function(){a.fade(e,r,n,i)}}),a;e=Math.min(Math.max(0,parseFloat(e)),1),r=Math.min(Math.max(0,parseFloat(r)),1),n=parseFloat(n),a.volume(e,i);for(var s=a._getSoundIds(i),o=0;o<s.length;o++){var l=a._soundById(s[o]);if(l){if(i||a._stopFade(s[o]),a._webAudio&&!l._muted){var u=t.ctx.currentTime,c=u+n/1e3;l._volume=e,l._node.gain.setValueAtTime(e,u),l._node.gain.linearRampToValueAtTime(r,c)}a._startFadeInterval(l,e,r,n,s[o],void 0===i)}}return a},_startFadeInterval:function(e,t,r,n,i,a){var s=this,o=t,l=r-t,u=Math.abs(l/.01),c=Math.max(4,u>0?n/u:n),d=Date.now();e._fadeTo=r,e._interval=setInterval(function(){var i=(Date.now()-d)/n;d=Date.now(),o+=l*i,o=Math.round(100*o)/100,o=l<0?Math.max(r,o):Math.min(r,o),s._webAudio?e._volume=o:s.volume(o,e._id,!0),a&&(s._volume=o),(r<t&&o<=r||r>t&&o>=r)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,s.volume(r,e._id),s._emit("fade",e._id))},c)},_stopFade:function(e){var r=this,n=r._soundById(e);return n&&n._interval&&(r._webAudio&&n._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(n._interval),n._interval=null,r.volume(n._fadeTo,e),n._fadeTo=null,r._emit("fade",e)),r},loop:function(){var e,t,r,n=this,i=arguments;if(0===i.length)return n._loop;if(1===i.length){if("boolean"!=typeof i[0])return!!(r=n._soundById(parseInt(i[0],10)))&&r._loop;e=i[0],n._loop=e}else 2===i.length&&(e=i[0],t=parseInt(i[1],10));for(var a=n._getSoundIds(t),s=0;s<a.length;s++)(r=n._soundById(a[s]))&&(r._loop=e,n._webAudio&&r._node&&r._node.bufferSource&&(r._node.bufferSource.loop=e,e&&(r._node.bufferSource.loopStart=r._start||0,r._node.bufferSource.loopEnd=r._stop,n.playing(a[s])&&(n.pause(a[s],!0),n.play(a[s],!0)))));return n},rate:function(){var e,r,n,i=this,a=arguments;if(0===a.length?r=i._sounds[0]._id:1===a.length?i._getSoundIds().indexOf(a[0])>=0?r=parseInt(a[0],10):e=parseFloat(a[0]):2===a.length&&(e=parseFloat(a[0]),r=parseInt(a[1],10)),"number"!=typeof e)return(n=i._soundById(r))?n._rate:i._rate;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"rate",action:function(){i.rate.apply(i,a)}}),i;void 0===r&&(i._rate=e),r=i._getSoundIds(r);for(var s=0;s<r.length;s++)if(n=i._soundById(r[s])){i.playing(r[s])&&(n._rateSeek=i.seek(r[s]),n._playStart=i._webAudio?t.ctx.currentTime:n._playStart),n._rate=e,i._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(e,t.ctx.currentTime):n._node&&(n._node.playbackRate=e);var o=i.seek(r[s]),l=1e3*((i._sprite[n._sprite][0]+i._sprite[n._sprite][1])/1e3-o)/Math.abs(n._rate);!i._endTimers[r[s]]&&n._paused||(i._clearTimer(r[s]),i._endTimers[r[s]]=setTimeout(i._ended.bind(i,n),l)),i._emit("rate",n._id)}return i},seek:function(){var e,r,n=this,i=arguments;if(0===i.length?n._sounds.length&&(r=n._sounds[0]._id):1===i.length?n._getSoundIds().indexOf(i[0])>=0?r=parseInt(i[0],10):n._sounds.length&&(r=n._sounds[0]._id,e=parseFloat(i[0])):2===i.length&&(e=parseFloat(i[0]),r=parseInt(i[1],10)),void 0===r)return 0;if("number"==typeof e&&("loaded"!==n._state||n._playLock))return n._queue.push({event:"seek",action:function(){n.seek.apply(n,i)}}),n;var a=n._soundById(r);if(a){if(!("number"==typeof e&&e>=0)){if(n._webAudio){var s=n.playing(r)?t.ctx.currentTime-a._playStart:0,o=a._rateSeek?a._rateSeek-a._seek:0;return a._seek+(o+s*Math.abs(a._rate))}return a._node.currentTime}var l=n.playing(r);l&&n.pause(r,!0),a._seek=e,a._ended=!1,n._clearTimer(r),n._webAudio||!a._node||isNaN(a._node.duration)||(a._node.currentTime=e);var u=function(){l&&n.play(r,!0),n._emit("seek",r)};if(l&&!n._webAudio){var c=function(){n._playLock?setTimeout(c,0):u()};setTimeout(c,0)}else u()}return n},playing:function(e){var t=this;if("number"==typeof e){var r=t._soundById(e);return!!r&&!r._paused}for(var n=0;n<t._sounds.length;n++)if(!t._sounds[n]._paused)return!0;return!1},duration:function(e){var t=this,r=t._duration,n=t._soundById(e);return n&&(r=t._sprite[n._sprite][1]/1e3),r},state:function(){return this._state},unload:function(){for(var e=this,r=e._sounds,n=0;n<r.length;n++)r[n]._paused||e.stop(r[n]._id),e._webAudio||(e._clearSound(r[n]._node),r[n]._node.removeEventListener("error",r[n]._errorFn,!1),r[n]._node.removeEventListener(t._canPlayEvent,r[n]._loadFn,!1),r[n]._node.removeEventListener("ended",r[n]._endFn,!1),t._releaseHtml5Audio(r[n]._node)),delete r[n]._node,e._clearTimer(r[n]._id);var a=t._howls.indexOf(e);a>=0&&t._howls.splice(a,1);var s=!0;for(n=0;n<t._howls.length;n++)if(t._howls[n]._src===e._src||e._src.indexOf(t._howls[n]._src)>=0){s=!1;break}return i&&s&&delete i[e._src],t.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,r,n){var i=this["_on"+e];return"function"==typeof t&&i.push(n?{id:r,fn:t,once:n}:{id:r,fn:t}),this},off:function(e,t,r){var n=this,i=n["_on"+e],a=0;if("number"==typeof t&&(r=t,t=null),t||r)for(a=0;a<i.length;a++){var s=r===i[a].id;if(t===i[a].fn&&s||!t&&s){i.splice(a,1);break}}else if(e)n["_on"+e]=[];else{var o=Object.keys(n);for(a=0;a<o.length;a++)0===o[a].indexOf("_on")&&Array.isArray(n[o[a]])&&(n[o[a]]=[])}return n},once:function(e,t,r){return this.on(e,t,r,1),this},_emit:function(e,t,r){for(var n=this,i=n["_on"+e],a=i.length-1;a>=0;a--)i[a].id&&i[a].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,r)}.bind(n,i[a].fn),0),i[a].once&&n.off(e,i[a].fn,i[a].id));return n._loadQueue(e),n},_loadQueue:function(e){var t=this;if(t._queue.length>0){var r=t._queue[0];r.event===e&&(t._queue.shift(),t._loadQueue()),e||r.action()}return t},_ended:function(e){var r=this,n=e._sprite;if(!r._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(r._ended.bind(r,e),100),r;var i=!(!e._loop&&!r._sprite[n][2]);if(r._emit("end",e._id),!r._webAudio&&i&&r.stop(e._id,!0).play(e._id),r._webAudio&&i){r._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=t.ctx.currentTime;var a=1e3*(e._stop-e._start)/Math.abs(e._rate);r._endTimers[e._id]=setTimeout(r._ended.bind(r,e),a)}return r._webAudio&&!i&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,r._clearTimer(e._id),r._cleanBuffer(e._node),t._autoSuspend()),r._webAudio||i||r.stop(e._id,!0),r},_clearTimer:function(e){var t=this;if(t._endTimers[e]){if("function"!=typeof t._endTimers[e])clearTimeout(t._endTimers[e]);else{var r=t._soundById(e);r&&r._node&&r._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function(e){for(var t=this,r=0;r<t._sounds.length;r++)if(e===t._sounds[r]._id)return t._sounds[r];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new n(e)},_drain:function(){var e=this,t=e._pool,r=0,n=0;if(!(e._sounds.length<t)){for(n=0;n<e._sounds.length;n++)e._sounds[n]._ended&&r++;for(n=e._sounds.length-1;n>=0;n--){if(r<=t)return;e._sounds[n]._ended&&(e._webAudio&&e._sounds[n]._node&&e._sounds[n]._node.disconnect(0),e._sounds.splice(n,1),r--)}}},_getSoundIds:function(e){if(void 0===e){for(var t=[],r=0;r<this._sounds.length;r++)t.push(this._sounds[r]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=t.ctx.createBufferSource(),e._node.bufferSource.buffer=i[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,t.ctx.currentTime),this},_cleanBuffer:function(e){var r=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(!e.bufferSource)return this;if(t._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),r))try{e.bufferSource.buffer=t._scratchBuffer}catch(n){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var n=function(e){this._parent=e,this.init()};n.prototype={init:function(){var e=this,r=e._parent;return e._muted=r._muted,e._loop=r._loop,e._volume=r._volume,e._rate=r._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++t._counter,r._sounds.push(e),e.create(),e},create:function(){var e=this,r=e._parent,n=t._muted||e._muted||e._parent._muted?0:e._volume;return r._webAudio?(e._node=void 0===t.ctx.createGain?t.ctx.createGainNode():t.ctx.createGain(),e._node.gain.setValueAtTime(n,t.ctx.currentTime),e._node.paused=!0,e._node.connect(t.masterGain)):t.noAudio||(e._node=t._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(t._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=r._src,e._node.preload=!0===r._preload?"auto":r._preload,e._node.volume=n*t.volume(),e._node.load()),e},reset:function(){var e=this,r=e._parent;return e._muted=r._muted,e._loop=r._loop,e._volume=r._volume,e._rate=r._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++t._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,r=e._parent;r._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(r._sprite).length&&(r._sprite={__default:[0,1e3*r._duration]}),"loaded"!==r._state&&(r._state="loaded",r._emit("load"),r._loadQueue()),e._node.removeEventListener(t._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,t=e._parent;t._duration===1/0&&(t._duration=Math.ceil(10*e._node.duration)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=1e3*t._duration),t._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var i={},a=function(e){var t=e._src;if(i[t])return e._duration=i[t].duration,void l(e);if(/^data:[^;]+;base64,/.test(t)){for(var r=atob(t.split(",")[1]),n=new Uint8Array(r.length),a=0;a<r.length;++a)n[a]=r.charCodeAt(a);o(n.buffer,e)}else{var u=new XMLHttpRequest;u.open(e._xhr.method,t,!0),u.withCredentials=e._xhr.withCredentials,u.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach(function(t){u.setRequestHeader(t,e._xhr.headers[t])}),u.onload=function(){var t=(u.status+"")[0];"0"===t||"2"===t||"3"===t?o(u.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+u.status+".")},u.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete i[t],e.load())},s(u)}},s=function(e){try{e.send()}catch(t){e.onerror()}},o=function(e,r){var n=function(){r._emit("loaderror",null,"Decoding audio data failed.")},a=function(e){e&&r._sounds.length>0?(i[r._src]=e,l(r,e)):n()};"undefined"!=typeof Promise&&1===t.ctx.decodeAudioData.length?t.ctx.decodeAudioData(e).then(a).catch(n):t.ctx.decodeAudioData(e,a,n)},l=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},u=function(){if(t.usingWebAudio){try{"undefined"!=typeof AudioContext?t.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch(a){t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),r=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=r?parseInt(r[1],10):null;if(e&&n&&n<9){var i=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!i&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=void 0===t.ctx.createGain?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};Ho.Howler=t,Ho.Howl=r,void 0!==Tt?(Tt.HowlerGlobal=e,Tt.Howler=t,Tt.Howl=r,Tt.Sound=n):"undefined"!=typeof window&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=r,window.Sound=n)}(),
/*!
   *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
   *  
   *  howler.js v2.2.4
   *  howlerjs.com
   *
   *  (c) 2013-2020, James Simpson of GoldFire Studios
   *  goldfirestudios.com
   *
   *  MIT License
   */
function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;for(var r=t._howls.length-1;r>=0;r--)t._howls[r].stereo(e);return t},HowlerGlobal.prototype.pos=function(e,t,r){var n=this;return n.ctx&&n.ctx.listener?(t="number"!=typeof t?n._pos[1]:t,r="number"!=typeof r?n._pos[2]:r,"number"!=typeof e?n._pos:(n._pos=[e,t,r],void 0!==n.ctx.listener.positionX?(n.ctx.listener.positionX.setTargetAtTime(n._pos[0],Howler.ctx.currentTime,.1),n.ctx.listener.positionY.setTargetAtTime(n._pos[1],Howler.ctx.currentTime,.1),n.ctx.listener.positionZ.setTargetAtTime(n._pos[2],Howler.ctx.currentTime,.1)):n.ctx.listener.setPosition(n._pos[0],n._pos[1],n._pos[2]),n)):n},HowlerGlobal.prototype.orientation=function(e,t,r,n,i,a){var s=this;if(!s.ctx||!s.ctx.listener)return s;var o=s._orientation;return t="number"!=typeof t?o[1]:t,r="number"!=typeof r?o[2]:r,n="number"!=typeof n?o[3]:n,i="number"!=typeof i?o[4]:i,a="number"!=typeof a?o[5]:a,"number"!=typeof e?o:(s._orientation=[e,t,r,n,i,a],void 0!==s.ctx.listener.forwardX?(s.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),s.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),s.ctx.listener.forwardZ.setTargetAtTime(r,Howler.ctx.currentTime,.1),s.ctx.listener.upX.setTargetAtTime(n,Howler.ctx.currentTime,.1),s.ctx.listener.upY.setTargetAtTime(i,Howler.ctx.currentTime,.1),s.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,.1)):s.ctx.listener.setOrientation(e,t,r,n,i,a),s)},Howl.prototype.init=function(e){return function(t){var r=this;return r._orientation=t.orientation||[1,0,0],r._stereo=t.stereo||null,r._pos=t.pos||null,r._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},r._onstereo=t.onstereo?[{fn:t.onstereo}]:[],r._onpos=t.onpos?[{fn:t.onpos}]:[],r._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,r){var n=this;if(!n._webAudio)return n;if("loaded"!==n._state)return n._queue.push({event:"stereo",action:function(){n.stereo(t,r)}}),n;var i=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===r){if("number"!=typeof t)return n._stereo;n._stereo=t,n._pos=[t,0,0]}for(var a=n._getSoundIds(r),s=0;s<a.length;s++){var o=n._soundById(a[s]);if(o){if("number"!=typeof t)return o._stereo;o._stereo=t,o._pos=[t,0,0],o._node&&(o._pannerAttr.panningModel="equalpower",o._panner&&o._panner.pan||e(o,i),"spatial"===i?void 0!==o._panner.positionX?(o._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),o._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),o._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):o._panner.setPosition(t,0,0):o._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),n._emit("stereo",o._id)}}return n},Howl.prototype.pos=function(t,r,n,i){var a=this;if(!a._webAudio)return a;if("loaded"!==a._state)return a._queue.push({event:"pos",action:function(){a.pos(t,r,n,i)}}),a;if(r="number"!=typeof r?0:r,n="number"!=typeof n?-.5:n,void 0===i){if("number"!=typeof t)return a._pos;a._pos=[t,r,n]}for(var s=a._getSoundIds(i),o=0;o<s.length;o++){var l=a._soundById(s[o]);if(l){if("number"!=typeof t)return l._pos;l._pos=[t,r,n],l._node&&(l._panner&&!l._panner.pan||e(l,"spatial"),void 0!==l._panner.positionX?(l._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(r,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):l._panner.setPosition(t,r,n)),a._emit("pos",l._id)}}return a},Howl.prototype.orientation=function(t,r,n,i){var a=this;if(!a._webAudio)return a;if("loaded"!==a._state)return a._queue.push({event:"orientation",action:function(){a.orientation(t,r,n,i)}}),a;if(r="number"!=typeof r?a._orientation[1]:r,n="number"!=typeof n?a._orientation[2]:n,void 0===i){if("number"!=typeof t)return a._orientation;a._orientation=[t,r,n]}for(var s=a._getSoundIds(i),o=0;o<s.length;o++){var l=a._soundById(s[o]);if(l){if("number"!=typeof t)return l._orientation;l._orientation=[t,r,n],l._node&&(l._panner||(l._pos||(l._pos=a._pos||[0,0,-.5]),e(l,"spatial")),void 0!==l._panner.orientationX?(l._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.orientationY.setValueAtTime(r,Howler.ctx.currentTime),l._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):l._panner.setOrientation(t,r,n)),a._emit("orientation",l._id)}}return a},Howl.prototype.pannerAttr=function(){var t,r,n,i=this,a=arguments;if(!i._webAudio)return i;if(0===a.length)return i._pannerAttr;if(1===a.length){if("object"!=typeof a[0])return(n=i._soundById(parseInt(a[0],10)))?n._pannerAttr:i._pannerAttr;t=a[0],void 0===r&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),i._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:i._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:i._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:i._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:i._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:i._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:i._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:i._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:i._panningModel})}else 2===a.length&&(t=a[0],r=parseInt(a[1],10));for(var s=i._getSoundIds(r),o=0;o<s.length;o++)if(n=i._soundById(s[o])){var l=n._pannerAttr;l={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:l.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:l.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:l.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:l.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:l.maxDistance,refDistance:void 0!==t.refDistance?t.refDistance:l.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:l.rolloffFactor,panningModel:void 0!==t.panningModel?t.panningModel:l.panningModel};var u=n._panner;u||(n._pos||(n._pos=i._pos||[0,0,-.5]),e(n,"spatial"),u=n._panner),u.coneInnerAngle=l.coneInnerAngle,u.coneOuterAngle=l.coneOuterAngle,u.coneOuterGain=l.coneOuterGain,u.distanceModel=l.distanceModel,u.maxDistance=l.maxDistance,u.refDistance=l.refDistance,u.rolloffFactor=l.rolloffFactor,u.panningModel=l.panningModel}return i},Sound.prototype.init=function(e){return function(){var t=this,r=t._parent;t._orientation=r._orientation,t._stereo=r._stereo,t._pos=r._pos,t._pannerAttr=r._pannerAttr,e.call(this),t._stereo?r.stereo(t._stereo):t._pos&&r.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this,r=t._parent;return t._orientation=r._orientation,t._stereo=r._stereo,t._pos=r._pos,t._pannerAttr=r._pannerAttr,t._stereo?r.stereo(t._stereo):t._pos?r.pos(t._pos[0],t._pos[1],t._pos[2],t._id):t._panner&&(t._panner.disconnect(0),t._panner=void 0,r._refreshBuffer(t)),e.call(this)}}(Sound.prototype.reset);var e=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}();const Xo=""+new URL("amll_lyric_bg-Dy4VPaCX.wasm",import.meta.url).href;let qo;const Wo=new Array(128).fill(void 0);function Yo(e){return Wo[e]}Wo.push(void 0,null,!0,!1);let Ko=Wo.length;function Zo(e){const t=Yo(e);return function(e){e<132||(Wo[e]=Ko,Ko=e)}(e),t}function Qo(e){Ko===Wo.length&&Wo.push(Wo.length+1);const t=Ko;return Ko=Wo[t],Wo[t]=e,t}let Jo=new("undefined"==typeof TextDecoder?(0,module.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});Jo.decode();let el=null;function tl(){return null!==el&&0!==el.byteLength||(el=new Uint8Array(qo.memory.buffer)),el}function rl(e,t){return e>>>=0,Jo.decode(tl().subarray(e,e+t))}let nl=0;let il=new("undefined"==typeof TextEncoder?(0,module.require)("util").TextEncoder:TextEncoder)("utf-8");const al="function"==typeof il.encodeInto?function(e,t){return il.encodeInto(e,t)}:function(e,t){const r=il.encode(e);return t.set(r),{read:e.length,written:r.length}};function sl(e,t,r){if(void 0===r){const r=il.encode(e),n=t(r.length,1)>>>0;return tl().subarray(n,n+r.length).set(r),nl=r.length,n}let n=e.length,i=t(n,1)>>>0;const a=tl();let s=0;for(;s<n;s++){const t=e.charCodeAt(s);if(t>127)break;a[i+s]=t}if(s!==n){0!==s&&(e=e.slice(s)),i=r(i,n,n=s+3*e.length,1)>>>0;const t=tl().subarray(i+s,i+n);s+=al(e,t).written,i=r(i,n,s,1)>>>0}return nl=s,i}function ol(e){return null==e}let ll=null;function ul(){return(null===ll||!0===ll.buffer.detached||void 0===ll.buffer.detached&&ll.buffer!==qo.memory.buffer)&&(ll=new DataView(qo.memory.buffer)),ll}function cl(e){const t=typeof e;if("number"==t||"boolean"==t||null==e)return`${e}`;if("string"==t)return`"${e}"`;if("symbol"==t){const t=e.description;return null==t?"Symbol":`Symbol(${t})`}if("function"==t){const t=e.name;return"string"==typeof t&&t.length>0?`Function(${t})`:"Function"}if(Array.isArray(e)){const t=e.length;let r="[";t>0&&(r+=cl(e[0]));for(let n=1;n<t;n++)r+=", "+cl(e[n]);return r+="]",r}const r=/\[object ([^\]]+)\]/.exec(toString.call(e));let n;if(!(r.length>1))return toString.call(e);if(n=r[1],"Object"==n)try{return"Object("+JSON.stringify(e)+")"}catch(i){return"Object"}return e instanceof Error?`${e.name}: ${e.message}\n${e.stack}`:n}function dl(e){const t=sl(e,qo.__wbindgen_malloc,qo.__wbindgen_realloc),r=nl;return Zo(qo.parseLrc(t,r))}function hl(e,t){try{return e.apply(this,t)}catch(r){qo.__wbindgen_exn_store(Qo(r))}}URL=globalThis.URL;const fl=await(async(e={},t)=>{let r;if(t.startsWith("data:")){const n=t.replace(/^data:.*?base64,/,"");let i;if("function"==typeof Buffer&&"function"==typeof Buffer.from)i=Buffer.from(n,"base64");else{if("function"!=typeof atob)throw new Error("Cannot decode base64-encoded data URL");{const e=atob(n);i=new Uint8Array(e.length);for(let t=0;t<e.length;t++)i[t]=e.charCodeAt(t)}}r=await WebAssembly.instantiate(i,e)}else{const n=await fetch(t),i=n.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&i.startsWith("application/wasm"))r=await WebAssembly.instantiateStreaming(n,e);else{const t=await n.arrayBuffer();r=await WebAssembly.instantiate(t,e)}}return r.instance.exports})({"./amll_lyric_bg.js":{__wbindgen_object_drop_ref:function(e){Zo(e)},__wbindgen_is_bigint:function(e){return"bigint"==typeof Yo(e)},__wbindgen_bigint_from_u64:function(e){return Qo(BigInt.asUintN(64,e))},__wbindgen_jsval_eq:function(e,t){return Yo(e)===Yo(t)},__wbindgen_error_new:function(e,t){return Qo(new Error(rl(e,t)))},__wbindgen_is_object:function(e){const t=Yo(e);return"object"==typeof t&&null!==t},__wbindgen_is_undefined:function(e){return void 0===Yo(e)},__wbindgen_in:function(e,t){return Yo(e)in Yo(t)},__wbindgen_string_get:function(e,t){const r=Yo(t),n="string"==typeof r?r:void 0;var i=ol(n)?0:sl(n,qo.__wbindgen_malloc,qo.__wbindgen_realloc),a=nl;ul().setInt32(e+4,a,!0),ul().setInt32(e+0,i,!0)},__wbindgen_boolean_get:function(e){const t=Yo(e);return"boolean"==typeof t?t?1:0:2},__wbindgen_jsval_loose_eq:function(e,t){return Yo(e)==Yo(t)},__wbindgen_number_get:function(e,t){const r=Yo(t),n="number"==typeof r?r:void 0;ul().setFloat64(e+8,ol(n)?0:n,!0),ul().setInt32(e+0,!ol(n),!0)},__wbindgen_as_number:function(e){return+Yo(e)},__wbindgen_number_new:function(e){return Qo(e)},__wbindgen_object_clone_ref:function(e){return Qo(Yo(e))},__wbindgen_string_new:function(e,t){return Qo(rl(e,t))},__wbg_getwithrefkey_edc2c8960f0f1191:function(e,t){return Qo(Yo(e)[Yo(t)])},__wbg_set_f975102236d3c502:function(e,t,r){Yo(e)[Zo(t)]=Zo(r)},__wbg_call_1084a111329e68ce:function(){return hl(function(e,t){return Qo(Yo(e).call(Yo(t)))},arguments)},__wbg_get_3baa728f9d58d3f6:function(e,t){return Qo(Yo(e)[t>>>0])},__wbg_length_ae22078168b726f5:function(e){return Yo(e).length},__wbg_new_a220cf903aa02ca2:function(){return Qo(new Array)},__wbindgen_is_function:function(e){return"function"==typeof Yo(e)},__wbg_next_de3e9db4440638b2:function(e){return Qo(Yo(e).next)},__wbg_next_f9cb570345655b9a:function(){return hl(function(e){return Qo(Yo(e).next())},arguments)},__wbg_done_bfda7aa8f252b39f:function(e){return Yo(e).done},__wbg_value_6d39332ab4788d86:function(e){return Qo(Yo(e).value)},__wbg_iterator_888179a48810a9fe:function(){return Qo(Symbol.iterator)},__wbg_get_224d16597dbbfd96:function(){return hl(function(e,t){return Qo(Reflect.get(Yo(e),Yo(t)))},arguments)},__wbg_new_525245e2b9901204:function(){return Qo(new Object)},__wbg_set_673dda6c73d19609:function(e,t,r){Yo(e)[t>>>0]=Zo(r)},__wbg_isArray_8364a5371e9737d8:function(e){return Array.isArray(Yo(e))},__wbg_instanceof_ArrayBuffer_61dfc3198373c902:function(e){let t;try{t=Yo(e)instanceof ArrayBuffer}catch(r){t=!1}return t},__wbg_isSafeInteger_7f1ed56200d90674:function(e){return Number.isSafeInteger(Yo(e))},__wbg_buffer_b7b08af79b0b0974:function(e){return Qo(Yo(e).buffer)},__wbg_new_ea1883e1e5e86686:function(e){return Qo(new Uint8Array(Yo(e)))},__wbg_set_d1e79e2388520f18:function(e,t,r){Yo(e).set(Yo(t),r>>>0)},__wbg_length_8339fcf5d8ecd12e:function(e){return Yo(e).length},__wbg_instanceof_Uint8Array_247a91427532499e:function(e){let t;try{t=Yo(e)instanceof Uint8Array}catch(r){t=!1}return t},__wbindgen_bigint_get_as_i64:function(e,t){const r=Yo(t),n="bigint"==typeof r?r:void 0;ul().setBigInt64(e+8,ol(n)?BigInt(0):n,!0),ul().setInt32(e+0,!ol(n),!0)},__wbindgen_debug_string:function(e,t){const r=sl(cl(Yo(t)),qo.__wbindgen_malloc,qo.__wbindgen_realloc),n=nl;ul().setInt32(e+4,n,!0),ul().setInt32(e+0,r,!0)},__wbindgen_throw:function(e,t){throw new Error(rl(e,t))},__wbindgen_memory:function(){return Qo(qo.memory)}}},Xo),pl=fl.memory,ml=fl.stringifyAss,yl=fl.decryptQrcHex,gl=fl.parseEslrc,_l=fl.stringifyEslrc,vl=fl.parseLrc,bl=fl.stringifyLrc,wl=fl.parseLys,xl=fl.stringifyLys,Il=fl.parseQrc,Tl=fl.stringifyQrc,El=fl.parseTTML,Al=fl.stringifyTTML,Sl=fl.parseYrc,kl=fl.stringifyYrc,Cl=fl.wasm_start,Pl=fl.__wbindgen_malloc,Rl=fl.__wbindgen_realloc,Ml=fl.__wbindgen_add_to_stack_pointer,Ll=fl.__wbindgen_free,Ol=fl.__wbindgen_exn_store,Fl=fl.__wbindgen_start,Dl=Object.freeze(Object.defineProperty({__proto__:null,__wbindgen_add_to_stack_pointer:Ml,__wbindgen_exn_store:Ol,__wbindgen_free:Ll,__wbindgen_malloc:Pl,__wbindgen_realloc:Rl,__wbindgen_start:Fl,decryptQrcHex:yl,memory:pl,parseEslrc:gl,parseLrc:vl,parseLys:wl,parseQrc:Il,parseTTML:El,parseYrc:Sl,stringifyAss:ml,stringifyEslrc:_l,stringifyLrc:bl,stringifyLys:xl,stringifyQrc:Tl,stringifyTTML:Al,stringifyYrc:kl,wasm_start:Cl},Symbol.toStringTag,{value:"Module"}));qo=Dl,Fl();const Nl=()=>r().excludeKeywords,Bl=()=>{Ke().songLyric={lrcData:[],lrcAMData:[],yrcData:[],yrcAMData:[]}},Ul=e=>{const t=Ke();if(200!==e.code)return void Bl();let r=[],n=[],i=[],a=[],s=[],o=[],l=[],u=[];e?.lrc?.lyric&&(i=dl(e.lrc.lyric),r=jl(i),e?.tlyric?.lyric&&(a=dl(e.tlyric.lyric),r=zl(r,jl(a),"tran")),e?.romalrc?.lyric&&(s=dl(e.romalrc.lyric),r=zl(r,jl(s),"roma"))),e?.yrc?.lyric&&(o=function(e){const t=sl(e,qo.__wbindgen_malloc,qo.__wbindgen_realloc),r=nl;return Zo(qo.parseYrc(t,r))}(e.yrc.lyric),n=Gl(o),e?.ytlrc?.lyric&&(l=dl(e.ytlrc.lyric),n=zl(n,jl(l),"tran")),e?.yromalrc?.lyric&&(u=dl(e.yromalrc.lyric),n=zl(n,jl(u),"roma"))),t.songLyric={lrcData:r,yrcData:n,lrcAMData:Hl(i,a,s),yrcAMData:Hl(o,l,u)}},jl=e=>{if(!e)return[];return e.map(e=>{const t=e.words,r=Et(t[0].startTime),n=t[0].word.trim();return!n||Nl().some(e=>n.includes(e))?null:{time:r,content:n}}).filter(e=>null!==e)},Gl=e=>{if(!e)return[];return e.map(e=>{const t=e.words,r=Et(t[0].startTime),n=Et(t[t.length-1].endTime),i=t.map(e=>({time:Et(e.startTime),endTime:Et(e.endTime),duration:Et(e.endTime-e.startTime),content:e.word.trim(),endsWithSpace:e.word.endsWith(" ")})),a=i.map(e=>e.content+(e.endsWithSpace?" ":"")).join("");return!a||Nl().some(e=>a.includes(e))?null:{time:r,endTime:n,content:a,contents:i}}).filter(e=>null!==e)},zl=(e,t,r)=>{const n=e;return n.length&&t.length&&n.forEach(e=>{t.forEach(t=>{(e.time===t.time||Math.abs(e.time-t.time)<.6)&&(e[r]=t.content)})}),n},Hl=(e,t,r)=>e.map((e,n,i)=>({words:e.words,startTime:e.words[0]?.startTime??0,endTime:i[n+1]?.words?.[0]?.startTime??e.words?.[e.words.length-1]?.endTime??1/0,translatedLyric:t?.[n]?.words?.[0]?.word??"",romanLyric:r?.[n]?.words?.[0]?.word??"",isBG:e.isBG??!1,isDuet:e.isDuet??!1})),Vl=["mp3","flac","webm","ogg","wav"];const $l=new class{player;playerInterval;audioContext=null;analyser=null;dataArray=null;source=null;testNumber=0;message=null;constructor(){this.player=new $o.Howl({src:[""],format:Vl,autoplay:!1}),this.initMediaSession()}resetStatus(){const e=i(),t=Ke();e.$patch({currentTime:0,duration:0,progress:0,chorus:0,currentTimeOffset:0,lyricIndex:-1,playStatus:!1,playLoading:!1}),t.$patch({playPlaylistId:0,playSong:{}})}getPlaySongData(){const e=ke(),t=Ke(),r=i();if(r.personalFmMode)return t.personalFMSong;const n=e.playList;return n.length?n[r.playIndex]:null}getFadeTime(){const e=r(),{songVolumeFade:t,songVolumeFadeTime:n}=e;return t?n:0}handlePlayStatus(){const e=Ke(),t=i(),n=r();clearInterval(this.playerInterval),this.playerInterval=setInterval(()=>{if(!this.player.playing())return;const r=this.getSeek(),i=this.player.duration(),a=At(r,i),s=!e.songLyric.yrcData.length||!n.showYrc?e.songLyric.lrcData:e.songLyric.yrcData,o=t.currentTimeOffset,l=s?.findIndex(e=>e?.time>=r+o),u=-1===l?s.length-1:l-1;t.$patch({currentTime:r,duration:i,progress:a,lyricIndex:u}),Y&&(window.electron.ipcRenderer.send("play-lyric-change",{index:u,lyric:St(n.showYrc&&e.songLyric.yrcData?.length?e.songLyric.yrcData:e.songLyric.lrcData)}),n.showTaskbarProgress&&window.electron.ipcRenderer.send("set-bar",a))},250)}async getOnlineUrl(e){const t=r(),n=await kt(e,t.songLevel),i=n.data?.[0];if(!i||!i?.url)return null;if(null!==i?.freeTrialInfo){if(!t.playSongDemo)return null;window.$message.warning("当前歌曲仅可试听，请开通会员后重试")}return Y?i.url:i.url.replace(/^http:/,"https:")}async getUnlockSongUrl(e){try{const t=e.id,r=Array.isArray(e.artists)?e.artists[0].name:e.artists,n=e.name+"-"+r;if(!t||!n)return null;const[i,a]=await Promise.all([Ct(t,n,"netease"),Ct(t,n,"kuwo")]);return 200===i.code&&""!==i.url?i.url:200===a.code&&""!==a.url?a.url:null}catch(t){return console.error("Error in getUnlockSongUrl",t),null}}async createPlayer(e,t=!0,n=0){const a=ke(),s=Ke(),o=i(),l=r(),{id:u,path:c,type:d}=s.playSong;$o.Howler.unload(),this.player=new $o.Howl({src:e,format:Vl,html5:!0,autoplay:t,preload:"metadata",pool:1,volume:o.playVolume,rate:o.playRate}),this.playerEvent({seek:n}),l.showSpectrums||this.toggleOutputDevice(),t&&this.play(),"radio"===d||c?Bl():(this.getLyricData(u),this.getChorus(u)),this.playerInterval||this.handlePlayStatus(),"radio"!==d&&a.setHistory(s.playSong),c||this.getCoverColor(s.songCover),c||this.updateMediaSession()}playerEvent(e={seek:0}){const t=ke(),n=i(),a=r(),s=this.getPlaySongData(),{seek:o}=e;this.player.once("load",()=>{if(a.showSpectrums){this.getAudioDom().crossOrigin="anonymous"}o&&n.duration-n.currentTime>2&&this.setSeek(o),n.playLoading=!1,Y&&(window.electron.ipcRenderer.send("play-song-change",this.getPlayerInfo()),window.electron.ipcRenderer.send("like-status-change",t.isLikeSong(s?.id||0)))}),this.player.on("play",()=>{window.document.title=this.getPlayerInfo()||"SPlayer",Y&&(window.electron.ipcRenderer.send("play-status-change",!0),window.electron.ipcRenderer.send("play-song-change",this.getPlayerInfo()))}),this.player.on("pause",()=>{Y||(window.document.title="SPlayer"),Y&&window.electron.ipcRenderer.send("play-status-change",!1)}),this.player.on("end",()=>{this.nextOrPrev("next")}),this.player.on("loaderror",(e,t)=>{this.errorNext(t),console.error("❌ song error:",e,s,t)})}initMediaSession(){"mediaSession"in navigator&&(navigator.mediaSession.setActionHandler("play",()=>this.play()),navigator.mediaSession.setActionHandler("pause",()=>this.pause()),navigator.mediaSession.setActionHandler("previoustrack",()=>this.nextOrPrev("prev")),navigator.mediaSession.setActionHandler("nexttrack",()=>this.nextOrPrev("next")),navigator.mediaSession.setActionHandler("seekto",e=>{e.seekTime&&this.setSeek(e.seekTime)}))}updateMediaSession(){if(!("mediaSession"in navigator))return;const e=Ke(),t=r(),n=this.getPlaySongData();if(!n)return;const i="radio"===n.type,a={title:n.name,artist:i?"播客电台":Array.isArray(n.artists)?n.artists.map(e=>e.name).join(" / "):String(n.artists),album:i?"播客电台":"object"==typeof n.album?n.album.name:String(n.album),artwork:t.smtcOutputHighQualityCover?[{src:e.getSongCover("xl"),sizes:"1920x1920",type:"image/jpeg"}]:[{src:e.getSongCover("cover"),sizes:"512x512",type:"image/jpeg"},{src:e.getSongCover("s"),sizes:"100x100",type:"image/jpeg"},{src:e.getSongCover("m"),sizes:"300x300",type:"image/jpeg"},{src:e.getSongCover("l"),sizes:"1024x1024",type:"image/jpeg"},{src:e.getSongCover("xl"),sizes:"1920x1920",type:"image/jpeg"}]};navigator.mediaSession.metadata=new window.MediaMetadata(a)}generateSpectrumData(){const e=i();this.analyser&&this.dataArray||this.initSpectrumData();const t=()=>{this.analyser&&this.dataArray&&(this.analyser.getByteFrequencyData(this.dataArray),e.spectrumsData=Array.from(this.dataArray)),requestAnimationFrame(t)};t()}async getLyricData(e){if(!e)return void Bl();const t=await rt(e);Ul(t)}async getChorus(e){const t=i(),r=await Pt(e);if(200!==r?.code||0===r?.chorus?.length)return void(t.chorus=0);const n=r?.chorus?.[0]?.startTime,a=(n/1e3/t.duration*100).toFixed(2);t.chorus=Number(a)}async errorNext(e){const t=ke();if(this.testNumber++,this.testNumber>5)return this.testNumber=0,this.resetStatus(),void window.$message.error("当前重试次数过多，请稍后再试");2!==e?t.playList.length>1?await this.nextOrPrev("next"):(window.$message.error("当前列表暂无可播放歌曲"),this.cleanPlayList()):await this.initPlayer(!0,this.getSeek())}getAudioDom(){const e=this.player._sounds[0]._node;if(!e)throw new Error("Audio Dom is null");return e}async parseLocalMusicInfo(e){try{const t=Ke(),r=await window.electron.ipcRenderer.invoke("get-music-cover",e);if(r){const{data:n,format:i}=r,a=ho.createBlobURL(n,i,e);a&&(t.playSong.cover=a)}else t.playSong.cover="/images/song.jpg?assest";this.getCoverColor(t.playSong.cover);(e=>{if(!e)return void Bl();const t=Ke(),r=dl(e),n=jl(r),i=[];for(let a=0;a<n.length;a++){const e=n[a],t=i.find(t=>t.time===e.time);t?t.tran=e.content:i.push(e)}t.songLyric={lrcData:i,lrcAMData:i.map((e,t,r)=>({words:[{startTime:e.time,endTime:0,word:e.content}],startTime:1e3*e.time,endTime:1e3*r[t+1]?.time,translatedLyric:e.tran??"",romanLyric:e.roma??"",isBG:!1,isDuet:!1})),yrcData:[],yrcAMData:[]}})(await window.electron.ipcRenderer.invoke("get-music-lyric",e)),this.updateMediaSession()}catch(t){window.$message.error("获取本地歌曲元信息失败"),console.error("Failed to parse local music info:",t)}}getPlayerInfo(e,t="/"){const r=e||this.getPlaySongData();if(!r)return null;return`${`${r.name||"未知歌曲"}`} - ${"radio"===r.type?"播客电台":Array.isArray(r.artists)?r.artists.map(e=>e.name).join(t):String(r?.artists||"未知歌手")}`}async initPlayer(e=!0,t=0){const n=ke(),a=Ke(),s=i(),o=r();try{const r=this.getPlaySongData();if(!r)return;const{id:i,dj:l,path:u,type:c}=r;if(a.playSong=r,s.playLoading=!0,u)await this.createPlayer(u,e,t),await this.parseLocalMusicInfo(u);else if(i&&n.playList.length){const a="radio"===c?l?.id:i;if(!a)throw new Error("Get song id error");const u=await this.getOnlineUrl(a);if(u)s.playUblock=!1,await this.createPlayer(u,e,t);else{if(!Y||"radio"===c||!o.useSongUnlock)return 1===n.playList.length?(this.resetStatus(),void window.$message.warning("当前播放列表已无可播放歌曲，请更换")):(window.$message.error("该歌曲无法播放，跳至下一首"),void this.nextOrPrev());{const i=await this.getUnlockSongUrl(r);i?(s.playUblock=!0,await this.createPlayer(i,e,t)):(s.playUblock=!1,s.playIndex===n.playList.length-1?(s.$patch({playStatus:!1,playLoading:!1}),window.$message.warning("当前列表歌曲无法播放，请更换歌曲")):(window.$message.error("该歌曲暂无音源，跳至下一首"),this.nextOrPrev("next")))}}}}catch(l){console.error("❌ 初始化音乐播放器出错：",l),window.$message.error("播放器遇到错误，请尝试软件热重载")}}async play(){const e=i();this.player.playing()?e.playStatus=!0:(this.player.play(),e.playStatus=!0,await new Promise(t=>{this.player.once("play",()=>{this.player.fade(0,e.playVolume,this.getFadeTime()),t()})}))}async pause(e=!0){const t=i();"loaded"===this.player.state()&&await new Promise(r=>{this.player.fade(t.playVolume,0,this.getFadeTime()),this.player.once("fade",()=>{this.player.pause(),e&&(t.playStatus=!1),r()})})}async playOrPause(){i().playStatus?await this.pause():await this.play()}async nextOrPrev(e="next",t=!0){try{const r=i(),n=ke(),a=Ke(),{playList:s}=n,{playSong:o}=a,{playSongMode:l,playHeartbeatMode:u}=r,c=s.length;if(0===c)throw new Error("Play list is empty");if(r.personalFmMode)return void(await this.initPersonalFM(!0));if(1===c&&(r.lyricIndex=-1,this.setSeek(0),await this.play()),"repeat"===l||u||"radio"===o.type)r.playIndex+="next"===e?1:-1;else{if("shuffle"!==l){if("repeat-once"===l)return r.lyricIndex=-1,this.setSeek(0),void(await this.play());throw new Error("The play mode is not supported")}{let e;do{e=Math.floor(Math.random()*c)}while(e===r.playIndex);r.playIndex=e}}r.playIndex<0?r.playIndex=c-1:r.playIndex>=c&&(r.playIndex=0),await this.pause(!1),await this.initPlayer(t)}catch(r){throw console.error("Error in nextOrPrev:",r),r}}togglePlayMode(e){const t=i();if(t.playHeartbeatMode&&this.toggleHeartMode(!1),e)t.playSongMode=e;else switch(t.playSongMode){case"repeat":t.playSongMode="repeat-once";break;case"shuffle":default:t.playSongMode="repeat";break;case"repeat-once":t.playSongMode="shuffle"}this.playModeSyncIpc()}playModeSyncIpc(){const e=i();Y&&window.electron.ipcRenderer.send("play-mode-change",e.playSongMode)}setSeek(e){const t=i();this.player.seek(e),t.currentTime=e}getSeek(){return this.player.seek()}setRate(e){const t=i();this.player.rate(e),t.playRate=e}setVolume(e){const t=i(),r=.05;if("number"==typeof e)e=Math.max(0,Math.min(e,1));else if("up"===e||"down"===e)t.playVolume=Math.max(0,Math.min(t.playVolume+("up"===e?r:-.05),1));else{const n=e.deltaY>0?-.05:r;t.playVolume=Math.max(0,Math.min(t.playVolume+n,1))}this.player.volume(t.playVolume)}toggleMute(){const e=i();0===e.playVolume?e.playVolume=e.playVolumeMute:(e.playVolumeMute=this.player.volume(),e.playVolume=0),this.player.volume(e.playVolume)}async getCoverColor(r){if(!r)return;const n=i(),a=new Image;a.crossOrigin="Anonymous",a.src=r,a.onload=()=>{const r=(r=>{if(!r)return null;const n=document.createElement("canvas");n.width=50,n.height=50;const i=n.getContext("2d");if(!i)return null;i.drawImage(r,0,0,r.naturalWidth,r.naturalHeight,0,0,50,50);const a=e(i.getImageData(0,0,50,50).data,4).map(e=>(e[3]<<24>>>0|e[0]<<16>>>0|e[1]<<8>>>0|e[2])>>>0),s=ei.quantize(a,128),o=Array.from(s).sort((e,t)=>t[1]-e[1]);if(o.slice(0,5).map(e=>t(e[0])).every(e=>Math.max(...e)-Math.min(...e)<5))return{main:{r:239,g:239,b:239},light:{primary:{r:10,g:10,b:10},background:{r:238,g:238,b:238},"surface-container":{r:212,g:212,b:212}},dark:{primary:{r:239,g:239,b:239},background:{r:31,g:31,b:31},"surface-container":{r:39,g:39,b:39}}};const l=ai(ii.score(new Map(o.slice(0,50)))[0]),u="secondary";return n.remove(),{main:Xi(An.from(l.palettes[u].hue,l.palettes[u].chroma,90).toInt()),light:{primary:Xi(An.from(l.palettes[u].hue,l.palettes[u].chroma,10).toInt()),background:Xi(An.from(l.palettes[u].hue,l.palettes[u].chroma,94).toInt()),"surface-container":Xi(An.from(l.palettes[u].hue,l.palettes[u].chroma,90).toInt())},dark:{primary:Xi(An.from(l.palettes[u].hue,l.palettes[u].chroma,90).toInt()),background:Xi(An.from(l.palettes[u].hue,l.palettes[u].chroma,20).toInt()),"surface-container":Xi(An.from(l.palettes[u].hue,l.palettes[u].chroma,16).toInt())}}})(a);r&&(n.songCoverTheme=r),a.remove()}}async updatePlayList(e,t,r,n={showTip:!0,scrobble:!0,play:!0}){if(!e||!e.length)return;const a=ke(),s=Ke(),o=i(),{showTip:l,play:u}=n;await a.setPlayList(St(e)),o.playHeartbeatMode&&this.toggleHeartMode(!1),o.personalFmMode&&(o.personalFmMode=!1),t&&"object"==typeof t&&"id"in t?s.playSong.id===t.id?u&&await this.play():(o.playIndex=e.findIndex(e=>e.id===t.id),await this.pause(!1),await this.initPlayer()):(o.playIndex="shuffle"===o.playSongMode?Math.floor(Math.random()*e.length):0,await this.pause(!1),await this.initPlayer()),s.playPlaylistId=r??0,l&&window.$message.success("已开始播放")}async addNextSong(e,t=!1){const r=ke(),n=Ke(),a=i();if(a.personalFmMode&&(a.personalFmMode=!1),n.playSong.id===e.id)return this.play(),void window.$message.success("已开始播放");const s=await r.setNextPlaySong(e,a.playIndex);s<0||(t?this.togglePlayIndex(s,!0):window.$message.success("已添加至下一首播放"))}async togglePlayIndex(e,t=!1){const r=ke(),n=i(),{playList:a}=r;e>=a.length||(t||n.playIndex!==e?(n.playIndex=e,this.resetStatus(),await this.initPlayer()):this.play())}removeSongIndex(e){const t=ke(),r=i(),{playList:n}=t;if(e>=n.length)return;if(1===n.length)return void this.cleanPlayList();const a=r.playIndex===e,s=St(n);e===n.length-1?r.playIndex=0:r.playIndex>e&&r.playIndex--,s.splice(e,1),t.setPlayList(s),a&&this.initPlayer(r.playStatus)}async cleanPlayList(){const e=ke(),t=Ke(),r=i();$o.Howler.unload(),this.resetStatus(),r.$patch({playListShow:!1,showFullPlayer:!1,playHeartbeatMode:!1,personalFmMode:!1,playIndex:-1}),t.resetMusicData(),e.setPlayList([]),window.$message.success("已清空播放列表")}toggleOutputDevice(e){try{const t=r(),n=e??t.playDevice;if(!this.player?._sounds.length)return;const i=this.getAudioDom();n&&i?.setSinkId&&i.setSinkId(n)}catch(t){console.error("Failed to change audio output device:",t)}}initSpectrumData(){try{if(this.audioContext)return;this.audioContext=new(window.AudioContext||window.webkitAudioContext);const e=this.getAudioDom();this.source=this.audioContext.createMediaElementSource(e),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=512,this.source.connect(this.analyser),this.analyser.connect(this.audioContext.destination);const t=this.analyser.frequencyBinCount;this.dataArray=new Uint8Array(t),this.generateSpectrumData()}catch(e){console.error("🎼 Initialize music spectrum failed:",e)}}toggleDesktopLyric(){const e=i(),t=!e.showDesktopLyric;e.showDesktopLyric=t,window.electron.ipcRenderer.send("change-desktop-lyric",t),window.$message.success((t?"已开启":"已关闭")+"桌面歌词")}async toggleHeartMode(e=!0){try{const t=ke(),r=Ke(),n=i();if(!e&&n.playHeartbeatMode)return n.playHeartbeatMode=!1,void window.$message.success("已退出心动模式");if(1!==K())return void(0===K()?dd(!0):window.$message.warning("该登录模式暂不支持该操作"));if(n.playHeartbeatMode)return window.$message.warning("已处于心动模式"),void this.play();this.message?.destroy(),this.message=window.$message.loading("心动模式开启中",{duration:0});const a=this.getPlaySongData(),s=await t.getUserLikePlaylist(),o=r.playPlaylistId&&0!==r.playPlaylistId?r.playPlaylistId:s?.detail?.id,l=await Rt(a?.id||0,o);if(200===l.code){this.message?.destroy();const e=Je(l.data);await this.updatePlayList(e,e[0]),n.playHeartbeatMode=!0}else this.message?.destroy(),window.$message.error(l.message||"心动模式开启出错，请重试")}catch(t){console.error("Failed to toggle heart mode:",t),this.message?.destroy(),window.$message.error("心动模式开启出错，请重试")}finally{this.message?.destroy()}}async initPersonalFM(e=!1){const t=Ke(),r=i();try{const n=async()=>{const e=await Mt(),r=Je(e.data);t.personalFM.list=r,t.personalFM.playIndex=0};0===t.personalFM.list.length&&await n(),e&&(r.personalFmMode=!0,t.personalFM.playIndex<t.personalFM.list.length-1?t.personalFM.playIndex++:await n(),this.resetStatus(),await this.initPlayer())}catch(n){console.error("Failed to initialize personal FM:",n)}}async personalFMTrash(e){try{const t=i();if(!K())return void dd(!0);t.personalFmMode=!0,t.playHeartbeatMode=!1;200===(await Lt(e)).code&&(window.$message.success("已移至垃圾桶"),this.nextOrPrev("next"))}catch(t){console.error("Error adding to trash:",t),window.$message.error("移至垃圾桶失败，请重试")}}},Xl={class:"download-song"},ql=n({__name:"DownloadSong",props:{id:{}},emits:["close"],setup(e,{emit:t}){const n=e,i=t,a=r(),l=s(null),u=s(!1),c=s(a.downloadPath),p=s("h"),y=s([]),g=o(()=>l.value&&l.value?.pc),b=(e,t)=>e&&t?Gt(e,(e,r,n)=>(t[n]&&r&&e.push({name:r.name,level:r.level,value:n,br:t[n]?.br,size:t[n]?.size}),e),[]):[],w=async()=>{const e=await window.electron.ipcRenderer.invoke("choose-path");e&&(c.value=e)},x=async()=>{if(l.value){u.value=!0,a.downloadPath&&(c.value=a.downloadPath);try{const e=await zt(n.id,p.value);if(200!==e.code||!e?.data?.url)return void window.$message.error(e.message||"获取下载链接失败，请重试");if(""===c.value&&Y)return void window.$notification.warning({title:"缺少配置",description:"请前往设置页配置默认下载目录",duration:5e3});const{url:t,type:r="mp3"}=e.data,a=$l.getPlayerInfo(l.value)||"未知曲目";Y?await I(t,a,r.toLowerCase()):Vo.saveAs(e.data.url,`${a}.${e.data?.type||"mp3"}`),i("close"),window.$message.success("歌曲下载成功")}catch(e){console.error("Error downloading song:",e),window.$message.error("下载歌曲出现错误，请重试")}finally{u.value=!1}}},I=async(e,t,r)=>{const{downloadMeta:i,downloadCover:s,downloadLyric:o,saveMetaFile:u}=a;let d="";if(o){const e=await rt(n.id);d=e?.lrc?.lyric||""}const h={fileName:t.replace(/[/:*?"<>|]/g,"&"),fileType:r,path:c.value,downloadMeta:i,downloadCover:s,downloadLyric:o,saveMetaFile:u,songData:St(l.value),lyric:d};if(!(await window.electron.ipcRenderer.invoke("download-file",e,h)))throw new Error("下载歌曲出现错误，请重试")};return d(()=>(async()=>{if(!n.id)return;const e=await _t(n.id);l.value=Je(e.songs)[0];const t=await Ut(n.id),r=jt(e?.privileges?.[0]?.downloadMaxBrLevel);if(!r)return window.$message.error("获取下载信息失败，请重试");y.value=b(r,t?.data)})()),(e,t)=>{const r=_e,n=vt,a=Ie,s=ko,o=Se,d=Nt,b=Dt,I=Ft,T=ae,E=Ae,A=se,S=at,k=Ot;return f(),F("div",Xl,[v(n,{show:!m(l)},{default:_(()=>[v(r,{class:"loading"},{default:_(()=>t[3]||(t[3]=[oe(" 正在加载歌曲信息... ")])),_:1,__:[3]})]),_:1},8,["show"]),v(n,{show:!!m(l)},{default:_(()=>[v(a,{type:m(g)?"info":"warning",title:m(g)?void 0:"请知悉",closable:""},{default:_(()=>[oe(le(m(g)?"当前为云盘歌曲，下载的文件均为上传时的源文件":"本软件仅支持从官方途径合法合规的下载歌曲，并用于学习研究用途。本功能将严格按照相应账户的权限来提供基础的下载功能"),1)]),_:1},8,["type","title"]),v(s,{data:m(l)},null,8,["data"]),v(k,{"default-expanded-names":["path"],"arrow-placement":"right"},{default:_(()=>[v(I,{title:"音质选择",name:"level"},{default:_(()=>[v(b,{value:m(p),"onUpdate:value":t[0]||(t[0]=e=>Te(p)?p.value=e:null),name:"level"},{default:_(()=>[v(o,null,{default:_(()=>[(f(!0),F(De,null,Ne(m(y),(e,t)=>(f(),h(d,{key:t,value:e.value},{default:_(()=>[v(o,null,{default:_(()=>[v(r,{class:"name"},{default:_(()=>[oe(le(e.name),1)]),_:2},1024),v(r,{depth:"3"},{default:_(()=>[oe(le(m(Bt)(e.size||0)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["value"])]),_:1}),m(Y)?(f(),h(I,{key:0,title:"本次下载路径",name:"path"},{default:_(()=>[v(S,null,{default:_(()=>[v(E,{value:m(c)||"未配置下载目录",disabled:""},{prefix:_(()=>[v(T,{name:"Folder"})]),_:1},8,["value"]),v(A,{type:"primary",strong:"",secondary:"",onClick:w},{icon:_(()=>[v(T,{name:"Folder"})]),_:1}),v(A,{type:"primary",strong:"",secondary:"",onClick:t[1]||(t[1]=e=>m(bd)("local"))},{icon:_(()=>[v(T,{name:"Settings"})]),default:_(()=>[t[4]||(t[4]=oe(" 更多设置 "))]),_:1,__:[4]})]),_:1})]),_:1})):me("",!0)]),_:1})]),_:1},8,["show"]),v(o,{class:"menu",justify:"end"},{default:_(()=>[v(A,{strong:"",secondary:"",onClick:t[2]||(t[2]=e=>i("close"))},{default:_(()=>t[5]||(t[5]=[oe(" 取消 ")])),_:1,__:[5]}),v(A,{loading:m(u),type:"primary",onClick:x},{default:_(()=>t[6]||(t[6]=[oe(" 下载歌曲 ")])),_:1,__:[6]},8,["loading"])]),_:1})])}}}),Wl=B(ql,[["__scopeId","data-v-a1bc5dd8"]]),Yl={name:"splayer",productName:"SPlayer",version:"3.0.0-beta.2",description:"A minimalist music player",main:"./out/main/index.js",author:"imsyy",home:"https://imsyy.top",github:"https://github.com/imsyy/SPlayer",blog:"https://blog.imsyy.top",repository:"github:imsyy/SPlayer",license:"AGPL-3.0","license-file":"LICENSE",engines:{node:">=20",npm:">=10"},type:"module",scripts:{format:"prettier --write .",lint:"npx eslint . --fix","typecheck:node":"tsc --noEmit -p tsconfig.node.json --composite false","typecheck:web":"vue-tsc --noEmit -p tsconfig.web.json --composite false",typecheck:"npm run typecheck:node && npm run typecheck:web",start:"electron-vite preview",dev:"electron-vite dev",build:"npm run typecheck && electron-vite build",postinstall:"electron-builder install-app-deps","build:web":"npm run build","build:unpack":"npm run build && electron-builder --dir","build:win":"npm run build && electron-builder --win","build:mac":"npm run build && electron-builder --mac","build:linux":"npm run build && electron-builder --linux"},dependencies:{"@applemusic-like-lyrics/core":"^0.1.3","@applemusic-like-lyrics/lyric":"^0.2.4","@applemusic-like-lyrics/vue":"^0.1.5","@electron-toolkit/preload":"^3.0.1","@electron-toolkit/utils":"^3.0.0","@imsyy/color-utils":"^1.0.2","@material/material-color-utilities":"^0.3.0","@pixi/app":"^7.4.3","@pixi/core":"^7.4.3","@pixi/display":"^7.4.3","@pixi/filter-blur":"^7.4.3","@pixi/filter-bulge-pinch":"^5.1.1","@pixi/filter-color-matrix":"^7.4.3","@pixi/sprite":"^7.4.3","@vueuse/core":"^12.8.2",NeteaseCloudMusicApi:"^4.27.0",axios:"^1.8.4","change-case":"^5.4.4",dayjs:"^1.11.13","electron-dl":"^4.0.0","electron-store":"^8.2.0","electron-updater":"^6.6.2","file-saver":"^2.0.5","font-list":"^1.5.1","get-port":"^7.1.0","github-markdown-css":"^5.8.1",howler:"^2.2.4","js-cookie":"^3.0.5",jss:"^10.10.0","jss-preset-default":"^10.10.0",localforage:"^1.10.0","lodash-es":"^4.17.21",marked:"^15.0.8",md5:"^2.3.0","music-metadata":"10.5.1",pinia:"^2.3.1","pinia-plugin-persistedstate":"^4.2.0",plyr:"^3.7.8","vue-virt-list":"^1.5.10"},devDependencies:{"@electron-toolkit/preload":"^3.0.1","@electron-toolkit/tsconfig":"^1.0.1","@electron-toolkit/utils":"^3.0.0","@fastify/cookie":"^11.0.2","@fastify/http-proxy":"^11.1.2","@fastify/multipart":"^9.0.3","@fastify/static":"^8.1.1","@types/file-saver":"^2.0.7","@types/howler":"^2.2.12","@types/js-cookie":"^3.0.6","@types/md5":"^2.3.5","@types/node":"^22.14.1","@typescript-eslint/eslint-plugin":"^8.30.1","@typescript-eslint/parser":"^8.30.1","@vitejs/plugin-vue":"^5.2.3",ajv:"^8.17.1","crypto-js":"^4.2.0",electron:"^35.1.5","electron-builder":"^26.0.12","electron-log":"^5.3.4","electron-vite":"^3.1.0",eslint:"^9.24.0","eslint-plugin-vue":"^9.33.0","fast-glob":"^3.3.3",fastify:"^5.3.1","naive-ui":"^2.41.0","node-taglib-sharp":"^6.0.1",prettier:"^3.5.3",sass:"^1.86.3",terser:"^5.39.0",typescript:"^5.8.3","unplugin-auto-import":"^0.19.0","unplugin-vue-components":"^28.5.0",vite:"^5.4.18","vite-plugin-compression":"^0.5.1","vite-plugin-wasm":"^3.4.1",vue:"^3.5.13","vue-router":"^4.5.0","vue-tsc":"^2.2.8"},pnpm:{overrides:{"dmg-builder":"25.1.8","electron-builder-squirrel-windows":"25.1.8"},onlyBuiltDependencies:["@parcel/watcher","core-js","electron","esbuild","vue-demi"]}},Kl={class:"setting-type"},Zl={class:"set-list"},Ql=["innerHTML"],Jl={class:"set-list"},eu=["innerHTML"],tu={class:"set-list"},ru=B(n({__name:"AboutSetting",setup(e){const t=i(),r=[{name:"GitHub",url:Yl.github,icon:"Github"},{name:"官方博客",url:Yl.blog,icon:"RssFeed"}],n=s(null),a=o(()=>n.value?.[0]),l=o(()=>{const e=n.value?.slice(1);return e||[]}),u=Q(()=>{Y?(t.updateCheck=!0,window.electron.ipcRenderer.send("check-update",!0)):window.open(Yl.github+"/releases","_blank")},300,{leading:!0,trailing:!1}),c=e=>{const t=e.target;"A"===t.tagName&&(e.preventDefault(),Vt(t.href))};return d(async()=>n.value=await Ht()),(e,i)=>{const s=Xe,o=ae,d=_e,p=Ve,y=Se,g=se,b=Be,w=vt,x=Ft,I=Ot;return f(),F("div",Kl,[N("div",Zl,[v(s,{prefix:"bar"},{default:_(()=>i[0]||(i[0]=[oe(" 关于软件 ")])),_:1,__:[0]}),v(b,{class:"set-item"},{default:_(()=>[v(y,{align:"center",class:"about"},{default:_(()=>[v(o,{name:"SPlayer",size:"26"}),v(d,{class:"logo-name"},{default:_(()=>i[1]||(i[1]=[oe("SPlayer")])),_:1,__:[1]}),v(p,{bordered:!1,size:"small",type:"primary"},{default:_(()=>[oe(le(m(Yl).version),1)]),_:1})]),_:1}),v(g,{loading:m(t).updateCheck,type:"primary",strong:"",secondary:"",onClick:m(u)},{default:_(()=>[oe(le(m(t).updateCheck?"检查更新中":"检查更新"),1)]),_:1},8,["loading","onClick"])]),_:1}),v(w,{show:!!m(n)},{default:_(()=>[v(b,{class:"set-item update-data"},{default:_(()=>[v(y,{class:"version"},{default:_(()=>[v(d,null,{default:_(()=>i[2]||(i[2]=[oe("最新版本")])),_:1,__:[2]}),v(p,{bordered:!1,size:"small",type:"primary"},{default:_(()=>[oe(le(m(a)?.version||"v0.0.0"),1)]),_:1}),m(a)?.prerelease?(f(),h(p,{key:0,class:"test",size:"small",type:"warning"},{default:_(()=>i[3]||(i[3]=[oe(" 测试版 ")])),_:1,__:[3]})):me("",!0),v(d,{depth:3,class:"time"},{default:_(()=>[oe(le(m(a)?.time),1)]),_:1})]),_:1}),N("div",{class:"markdown-body",innerHTML:m(a)?.changelog,onClick:c},null,8,Ql)]),_:1})]),_:1},8,["show"])]),N("div",Jl,[v(s,{prefix:"bar"},{default:_(()=>i[4]||(i[4]=[oe(" 历史版本 ")])),_:1,__:[4]}),v(w,{show:m(l)?.length>0},{default:_(()=>[v(I,{accordion:""},{default:_(()=>[(f(!0),F(De,null,Ne(m(l),(e,t)=>(f(),h(x,{key:t,title:e.version,name:e.version},{default:_(()=>[v(b,{class:"set-item update-data"},{default:_(()=>[v(y,{class:"version",justify:"space-between"},{default:_(()=>[v(p,{bordered:!1,size:"small",type:"primary"},{default:_(()=>[oe(le(e?.version||"v0.0.0"),1)]),_:2},1024),v(d,{depth:3,class:"time"},{default:_(()=>[oe(le(e?.time),1)]),_:2},1024)]),_:2},1024),N("div",{class:"markdown-body",innerHTML:e?.changelog,onClick:c},null,8,eu)]),_:2},1024)]),_:2},1032,["title","name"]))),128))]),_:1})]),_:1},8,["show"])]),N("div",tu,[v(s,{prefix:"bar"},{default:_(()=>i[5]||(i[5]=[oe(" 社区与资讯 ")])),_:1,__:[5]}),v(y,{class:"link"},{default:_(()=>[(f(),F(De,null,Ne(r,(e,t)=>v(b,{key:t,class:"link-item",hoverable:"",onClick:t=>m(Vt)(e.url)},{default:_(()=>[v(o,{name:e.icon,size:26},null,8,["name"]),v(d,{class:"name"},{default:_(()=>[oe(le(e.name),1)]),_:2},1024)]),_:2},1032,["onClick"])),64))]),_:1})])])}}}),[["__scopeId","data-v-ce3553d4"]]),nu={class:"setting-type"},iu={class:"set-list"},au={class:"label"},su={class:"label"},ou={key:0,class:"set-list"},lu={class:"label"},uu={class:"label"},cu={class:"label"},du={class:"label"},hu={class:"set-list"},fu={class:"label"},pu={class:"label"},mu=n({__name:"OtherSetting",setup(e){const t=ke(),n=r(),i=s(!1),a=o(()=>({protocol:n.proxyProtocol,server:n.proxyServe,port:n.proxyPort})),l=Q(()=>{if("off"===n.proxyProtocol||!n.proxyServe||!n.proxyPort)return window.electron.ipcRenderer.send("remove-proxy"),void window.$message.success("成功关闭网络代理");window.electron.ipcRenderer.send("set-proxy",a.value),window.$message.success("网络代理配置完成，请重启软件")},300),u=async()=>{i.value=!0;await window.electron.ipcRenderer.invoke("test-proxy",a.value)?window.$message.success("该代理可正常使用"):window.$message.error("代理测试失败，请重试"),i.value=!1},c=()=>{window.$dialog.warning({title:"警告",content:"此操作将重置所有设置，是否继续?",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{n.$reset(),Y&&window.electron.ipcRenderer.send("reset-setting"),window.$message.success("设置重置完成")}})},d=()=>{window.$dialog.warning({title:"高危操作",content:"此操作将重置所有设置并清除全部数据，同时将退出登录状态，是否继续?",positiveText:"确定",negativeText:"取消",onPositiveClick:async()=>{window.localStorage.clear(),window.sessionStorage.clear(),await t.deleteDB(),Y&&window.electron.ipcRenderer.send("reset-setting"),window.$message.loading("数据清除完成，软件即将热重载",{duration:3e3,onAfterLeave:()=>window.location.reload()})}})};return(e,t)=>{const r=Xe,a=_e,s=wt,o=Be,h=Ae,p=se,y=ne,g=Se,b=ie,w=vt;return f(),F("div",nu,[N("div",iu,[v(r,{prefix:"bar"},{default:_(()=>t[5]||(t[5]=[oe(" 地区解锁 ")])),_:1,__:[5]}),v(o,{class:"set-item"},{default:_(()=>[N("div",au,[v(a,{class:"name"},{default:_(()=>t[6]||(t[6]=[oe("使用真实 IP 地址")])),_:1,__:[6]}),v(a,{class:"tip",depth:3},{default:_(()=>t[7]||(t[7]=[oe("在海外或部分地区可能会受到限制，可开启此处尝试解决")])),_:1,__:[7]})]),v(s,{class:"set",value:m(n).useRealIP,"onUpdate:value":t[0]||(t[0]=e=>m(n).useRealIP=e),round:!1},null,8,["value"])]),_:1}),v(o,{class:"set-item"},{default:_(()=>[N("div",su,[v(a,{class:"name"},{default:_(()=>t[8]||(t[8]=[oe("真实 IP 地址")])),_:1,__:[8]}),v(a,{class:"tip",depth:3},{default:_(()=>t[9]||(t[9]=[oe("可在此处输入国内 IP")])),_:1,__:[9]})]),v(h,{value:m(n).realIP,"onUpdate:value":t[1]||(t[1]=e=>m(n).realIP=e),disabled:!m(n).useRealIP,placeholder:"请填写真实 IP 地址",class:"set"},{prefix:_(()=>[v(a,{depth:"3"},{default:_(()=>t[10]||(t[10]=[oe("IP")])),_:1,__:[10]})]),_:1},8,["value","disabled"])]),_:1})]),m(Y)?(f(),F("div",ou,[v(r,{prefix:"bar"},{default:_(()=>t[11]||(t[11]=[oe(" 网络代理 ")])),_:1,__:[11]}),v(o,{class:"set-item"},{default:_(()=>[N("div",lu,[v(a,{class:"name"},{default:_(()=>t[12]||(t[12]=[oe("网络代理")])),_:1,__:[12]}),v(a,{class:"tip",depth:3},{default:_(()=>t[13]||(t[13]=[oe("修改后请点击保存或重启软件以应用")])),_:1,__:[13]})]),v(g,null,{default:_(()=>[v(p,{type:"primary",strong:"",secondary:"",onClick:m(l)},{default:_(()=>t[14]||(t[14]=[oe(" 保存并应用 ")])),_:1,__:[14]},8,["onClick"]),v(y,{value:m(n).proxyProtocol,"onUpdate:value":t[2]||(t[2]=e=>m(n).proxyProtocol=e),options:[{label:"关闭代理",value:"off"},{label:"HTTP 代理",value:"HTTP"},{label:"HTTPS 代理",value:"HTTPS"}],class:"set"},null,8,["value"])]),_:1})]),_:1}),v(o,{class:"set-item"},{default:_(()=>[N("div",uu,[v(a,{class:"name"},{default:_(()=>t[15]||(t[15]=[oe("代理服务器地址")])),_:1,__:[15]}),v(a,{class:"tip",depth:3},{default:_(()=>t[16]||(t[16]=[oe("请填写代理服务器地址，如 127.0.0.1")])),_:1,__:[16]})]),v(h,{value:m(n).proxyServe,"onUpdate:value":t[3]||(t[3]=e=>m(n).proxyServe=e),disabled:"off"===m(n).proxyProtocol,placeholder:"请填写代理服务器地址",class:"set"},{prefix:_(()=>[v(a,{depth:"3"},{default:_(()=>[oe(le("off"===m(n).proxyProtocol?"-":m(n).proxyProtocol),1)]),_:1})]),_:1},8,["value","disabled"])]),_:1}),v(o,{class:"set-item"},{default:_(()=>[N("div",cu,[v(a,{class:"name"},{default:_(()=>t[17]||(t[17]=[oe("代理服务器端口")])),_:1,__:[17]}),v(a,{class:"tip",depth:3},{default:_(()=>t[18]||(t[18]=[oe("请填写代理服务器端口，如 80")])),_:1,__:[18]})]),v(b,{value:m(n).proxyPort,"onUpdate:value":t[4]||(t[4]=e=>m(n).proxyPort=e),disabled:"off"===m(n).proxyProtocol,"show-button":!1,min:1,max:65535,placeholder:"请填写代理服务器端口",class:"set"},null,8,["value","disabled"])]),_:1}),v(w,{show:"off"!==m(n).proxyProtocol},{default:_(()=>[v(o,{class:"set-item"},{default:_(()=>[N("div",du,[v(a,{class:"name"},{default:_(()=>t[19]||(t[19]=[oe("测试代理")])),_:1,__:[19]}),v(a,{class:"tip",depth:3},{default:_(()=>t[20]||(t[20]=[oe("测试代理配置是否可正常连通")])),_:1,__:[20]})]),v(p,{loading:m(i),type:"primary",strong:"",secondary:"",onClick:u},{default:_(()=>t[21]||(t[21]=[oe(" 测试代理 ")])),_:1,__:[21]},8,["loading"])]),_:1})]),_:1},8,["show"])])):me("",!0),N("div",hu,[v(r,{prefix:"bar"},{default:_(()=>t[22]||(t[22]=[oe(" 重置 ")])),_:1,__:[22]}),v(o,{class:"set-item"},{default:_(()=>[N("div",fu,[v(a,{class:"name"},{default:_(()=>t[23]||(t[23]=[oe("重置所有设置")])),_:1,__:[23]}),v(a,{class:"tip",depth:3},{default:_(()=>t[24]||(t[24]=[oe("重置所有设置，恢复软件默认值")])),_:1,__:[24]})]),v(p,{type:"warning",strong:"",secondary:"",onClick:c},{default:_(()=>t[25]||(t[25]=[oe(" 重置设置 ")])),_:1,__:[25]})]),_:1}),v(o,{class:"set-item"},{default:_(()=>[N("div",pu,[v(a,{class:"name"},{default:_(()=>t[26]||(t[26]=[oe("清除全部数据")])),_:1,__:[26]}),v(a,{class:"tip",depth:3},{default:_(()=>t[27]||(t[27]=[oe("重置所有设置，清除全部数据")])),_:1,__:[27]})]),v(p,{type:"error",strong:"",secondary:"",onClick:d},{default:_(()=>t[28]||(t[28]=[oe(" 清除全部 ")])),_:1,__:[28]})]),_:1})])])}}}),yu={class:"setting-type"},gu={class:"set-list"},_u={class:"label"},vu={class:"label"},bu={class:"label"},wu={class:"label"},xu={class:"set-list"},Iu={class:"label"},Tu={class:"label"},Eu={class:"label"},Au={class:"label"},Su={class:"label"},ku=B(n({__name:"LocalSetting",setup(e){const t=r(),n=async()=>{const e=await window.electron.ipcRenderer.invoke("choose-path");e&&(t.downloadPath=e)};return(e,r)=>{const i=Xe,a=_e,s=wt,o=Be,l=ae,u=se,c=Se,d=vt;return f(),F("div",yu,[N("div",gu,[v(i,{prefix:"bar"},{default:_(()=>r[8]||(r[8]=[oe(" 本地歌曲 ")])),_:1,__:[8]}),v(o,{class:"set-item"},{default:_(()=>[N("div",_u,[v(a,{class:"name"},{default:_(()=>r[9]||(r[9]=[oe("显示本地歌曲封面")])),_:1,__:[9]}),v(a,{class:"tip",depth:3},{default:_(()=>r[10]||(r[10]=[oe("当数量过多时请勿开启，会严重影响性能")])),_:1,__:[10]})]),v(s,{class:"set",value:m(t).showLocalCover,"onUpdate:value":r[0]||(r[0]=e=>m(t).showLocalCover=e),round:!1},null,8,["value"])]),_:1}),v(o,{class:"set-item"},{default:_(()=>[N("div",vu,[v(a,{class:"name"},{default:_(()=>r[11]||(r[11]=[oe("显示本地默认歌曲目录")])),_:1,__:[11]})]),v(s,{class:"set",value:m(t).showDefaultLocalPath,"onUpdate:value":r[1]||(r[1]=e=>m(t).showDefaultLocalPath=e),round:!1},null,8,["value"])]),_:1}),v(o,{class:"set-item",id:"local-list-choose","content-style":"flex-direction: column"},{default:_(()=>[v(c,{justify:"space-between"},{default:_(()=>[N("div",bu,[v(a,{class:"name"},{default:_(()=>r[12]||(r[12]=[oe("本地歌曲目录")])),_:1,__:[12]}),v(a,{class:"tip",depth:3},{default:_(()=>r[13]||(r[13]=[oe("可在此增删本地歌曲目录，歌曲增删实时同步")])),_:1,__:[13]})]),v(u,{strong:"",secondary:"",onClick:r[2]||(r[2]=e=>m($t)())},{icon:_(()=>[v(l,{name:"Folder"})]),default:_(()=>[r[14]||(r[14]=oe(" 更改 "))]),_:1,__:[14]})]),_:1}),v(d,{show:m(t).localFilesPath.length>0},{default:_(()=>[(f(!0),F(De,null,Ne(m(t).localFilesPath,(e,t)=>(f(),h(o,{key:t,class:"set-item"},{default:_(()=>[N("div",wu,[v(a,{class:"name"},{default:_(()=>[oe(le(e),1)]),_:2},1024)]),v(u,{strong:"",secondary:"",onClick:e=>m($t)(t)},{icon:_(()=>[v(l,{name:"Delete"})]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1},8,["show"])]),_:1})]),N("div",xu,[v(i,{prefix:"bar"},{default:_(()=>r[15]||(r[15]=[oe(" 下载配置 ")])),_:1,__:[15]}),v(o,{class:"set-item"},{default:_(()=>[N("div",Iu,[v(a,{class:"name"},{default:_(()=>r[16]||(r[16]=[oe("默认下载目录")])),_:1,__:[16]}),v(a,{class:"tip",depth:3},{default:_(()=>[oe(le(m(t).downloadPath||"若不设置则无法进行下载"),1)]),_:1})]),v(c,null,{default:_(()=>[v(pe,{name:"fade",mode:"out-in"},{default:_(()=>[m(t).downloadPath?(f(),h(u,{key:0,type:"primary",strong:"",secondary:"",onClick:r[3]||(r[3]=e=>m(t).downloadPath="")},{default:_(()=>r[17]||(r[17]=[oe(" 清除选择 ")])),_:1,__:[17]})):me("",!0)]),_:1}),v(u,{strong:"",secondary:"",onClick:n},{icon:_(()=>[v(l,{name:"Folder"})]),default:_(()=>[r[18]||(r[18]=oe(" 更改 "))]),_:1,__:[18]})]),_:1})]),_:1}),v(o,{class:"set-item"},{default:_(()=>[N("div",Tu,[v(a,{class:"name"},{default:_(()=>r[19]||(r[19]=[oe("下载歌曲元信息")])),_:1,__:[19]}),v(a,{class:"tip",depth:3},{default:_(()=>r[20]||(r[20]=[oe("为当前下载歌曲附加封面及歌词等元信息")])),_:1,__:[20]})]),v(s,{class:"set",value:m(t).downloadMeta,"onUpdate:value":r[4]||(r[4]=e=>m(t).downloadMeta=e),round:!1},null,8,["value"])]),_:1}),v(o,{class:"set-item"},{default:_(()=>[N("div",Eu,[v(a,{class:"name"},{default:_(()=>r[21]||(r[21]=[oe("同时下载封面")])),_:1,__:[21]}),v(a,{class:"tip",depth:3},{default:_(()=>r[22]||(r[22]=[oe("下载歌曲时同时下载封面")])),_:1,__:[22]})]),v(s,{value:m(t).downloadCover,"onUpdate:value":r[5]||(r[5]=e=>m(t).downloadCover=e),disabled:!m(t).downloadMeta,round:!1,class:"set"},null,8,["value","disabled"])]),_:1}),v(o,{class:"set-item"},{default:_(()=>[N("div",Au,[v(a,{class:"name"},{default:_(()=>r[23]||(r[23]=[oe("同时下载歌词")])),_:1,__:[23]}),v(a,{class:"tip",depth:3},{default:_(()=>r[24]||(r[24]=[oe("下载歌曲时同时下载歌词")])),_:1,__:[24]})]),v(s,{value:m(t).downloadLyric,"onUpdate:value":r[6]||(r[6]=e=>m(t).downloadLyric=e),disabled:!m(t).downloadMeta,round:!1,class:"set"},null,8,["value","disabled"])]),_:1}),v(o,{class:"set-item"},{default:_(()=>[N("div",Su,[v(a,{class:"name"},{default:_(()=>r[25]||(r[25]=[oe("保留元信息文件")])),_:1,__:[25]}),v(a,{class:"tip",depth:3},{default:_(()=>r[26]||(r[26]=[oe("是否在下载目录中保留元信息文件")])),_:1,__:[26]})]),v(s,{value:m(t).saveMetaFile,"onUpdate:value":r[7]||(r[7]=e=>m(t).saveMetaFile=e),disabled:!m(t).downloadMeta,round:!1,class:"set"},null,8,["value","disabled"])]),_:1})])])}}}),[["__scopeId","data-v-fcb6889a"]]),Cu={class:"setting-type"},Pu={class:"set-list"},Ru={class:"label"},Mu={class:"set-list"},Lu={class:"label"},Ou=n({__name:"KeyboardSetting",setup(e){const t=Xt(),r=s(null),n=s(!1),i=s(""),a=s(St(t.shortcutList)),o=(e,t=!1)=>{r.value=e,n.value=t,t&&window.electron.ipcRenderer.send("unregister-all-shortcut")},l=()=>{r.value&&t.registerAllShortcuts(),r.value=null,n.value=!1},u=async e=>{if(e.preventDefault(),e.stopPropagation(),!r.value)return;if(e.code===i.value)return;if(i.value=e.code,"Backspace"===e.code)return void c("");const t=e.ctrlKey||e.metaKey,s=e.shiftKey,o=e.altKey,l=(e=>["KeyA","KeyB","KeyC","KeyD","KeyE","KeyF","KeyG","KeyH","KeyI","KeyJ","KeyK","KeyL","KeyM","KeyN","KeyO","KeyP","KeyQ","KeyR","KeyS","KeyT","KeyU","KeyV","KeyW","KeyX","KeyY","KeyZ","Digit0","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","Space","ArrowLeft","ArrowUp","ArrowRight","ArrowDown"].includes(e.code)?e.code:"")(e),u=[t&&"CmdOrCtrl",s&&"Shift",o&&"Alt",l].filter(Boolean).join("+");if(p(u))window.$message.warning("快捷键设置冲突");else if(n.value){const e=qt(t||s||o?u:"CmdOrCtrl+Shift+"+l);if(!e)return;a.value[r.value].globalShortcut=e,await y(e),c(e)}else c(u),window.$message.success("快捷键设置成功")},c=async e=>{r.value&&(a.value[r.value][n.value?"globalShortcut":"shortcut"]=e,t.shortcutList[r.value][n.value?"globalShortcut":"shortcut"]=e)},p=e=>Yt(Object.values(t.shortcutList),t=>Kt([t.shortcut,t.globalShortcut],e)),y=Q(async e=>{try{if(!e||!r.value)return;const t=await window.electron.ipcRenderer.invoke("is-shortcut-registered",qt(e));t&&window.$message.warning("快捷键已被占用"),a.value[r.value].isRegistered=t}catch(t){console.error("Error checking shortcut registration:",t),window.$message.error("快捷键检查出现错误"),c("")}},500),g=e=>{e?t.registerAllShortcuts():window.electron.ipcRenderer.send("unregister-all-shortcut")},b=()=>{window.$dialog.warning({title:"重置快捷键",content:"确定重置当前快捷键配置？",positiveText:"重置",negativeText:"取消",onPositiveClick:()=>{t.$reset(),a.value=St(t.shortcutList),window.$message.success("快捷键重置成功")}})};return d(()=>{t.registerAllShortcuts()}),(e,r)=>{const n=Xe,s=_e,c=wt,d=Be,p=Ae,y=Se,w=ft,x=ht,I=dt,T=se;return f(),F("div",Cu,[N("div",Pu,[v(n,{prefix:"bar"},{default:_(()=>r[3]||(r[3]=[oe(" 全局快捷键 ")])),_:1,__:[3]}),v(d,{class:"set-item"},{default:_(()=>[N("div",Ru,[v(s,{class:"name"},{default:_(()=>r[4]||(r[4]=[oe("开启全局快捷键")])),_:1,__:[4]}),v(s,{class:"tip",depth:3},{default:_(()=>r[5]||(r[5]=[oe("可能会导致与其他软件相互冲突，请谨慎开启")])),_:1,__:[5]})]),v(c,{class:"set",value:m(t).globalOpen,"onUpdate:value":[r[0]||(r[0]=e=>m(t).globalOpen=e),g],round:!1},null,8,["value"])]),_:1})]),N("div",Mu,[v(n,{prefix:"bar"},{default:_(()=>r[6]||(r[6]=[oe(" 快捷键更改 ")])),_:1,__:[6]}),v(d,{id:"shortcut-list",class:"set-item"},{default:_(()=>[(f(!0),F(De,null,Ne(m(a),(e,n,a)=>(f(),h(I,{key:a,class:"shortcut",hoverable:""},{default:_(()=>[v(x,null,{prefix:_(()=>[v(s,{class:"name"},{default:_(()=>[oe(le(e.name),1)]),_:2},1024)]),default:_(()=>[v(w,null,{default:_(()=>[v(y,null,{default:_(()=>[v(p,{value:e.shortcut,placeholder:"快捷键为空",readonly:"",onFocus:e=>o(n),onBlur:l,onKeydown:Wt(u,["stop"]),onKeyup:r[1]||(r[1]=e=>i.value="")},null,8,["value","onFocus"]),v(p,{value:e.globalShortcut,disabled:!m(t).globalOpen,status:e?.isRegistered?"error":"success",placeholder:"快捷键为空",readonly:"",onFocus:e=>o(n,!0),onBlur:l,onKeydown:Wt(u,["stop"]),onKeyup:r[2]||(r[2]=e=>i.value="")},{prefix:_(()=>[v(s,{depth:3},{default:_(()=>r[7]||(r[7]=[oe("全局")])),_:1,__:[7]})]),_:2},1032,["value","disabled","status","onFocus"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),v(d,{class:"set-item"},{default:_(()=>[N("div",Lu,[v(s,{class:"name"},{default:_(()=>r[8]||(r[8]=[oe("恢复默认")])),_:1,__:[8]})]),v(T,{type:"primary",strong:"",secondary:"",onClick:b},{default:_(()=>r[9]||(r[9]=[oe(" 恢复默认 ")])),_:1,__:[9]})]),_:1})])])}}}),Fu=B(Ou,[["__scopeId","data-v-d085098a"]]),Du={class:"setting-type"},Nu={class:"set-list"},Bu={class:"label"},Uu={class:"label"},ju={class:"label"},Gu={class:"label"},zu={class:"label"},Hu={class:"label"},Vu={class:"label"},$u={class:"label"},Xu={class:"label"},qu={class:"label"},Wu={class:"label"},Yu={class:"label"},Ku={class:"label"},Zu={class:"set-list"},Qu={class:"label"},Ju={class:"label"},ec={key:0,class:"set-list"},tc={class:"label"},rc={class:"label"},nc={class:"label"},ic={class:"label"},ac={class:"label"},sc=B(n({__name:"LyricsSetting",setup(e){const t=i(),n=r(),a={fontSize:30,mainColor:"#fff",shadowColor:"rgba(0, 0, 0, 0.5)"},s=q({...a}),o=async()=>{if(!Y)return;const e=await window.electron.ipcRenderer.invoke("get-desktop-lyric-option");e&&Object.assign(s,e),window.electron.ipcRenderer.on("desktop-lyric-option-change",(e,t)=>{t&&!Qt(s,t)&&Object.assign(s,t)})},l=()=>{try{if(!Y)return;St(s),window.electron.ipcRenderer.send("set-desktop-lyric-option",St(s),!0),window.$message.success("桌面歌词配置已保存")}catch(e){console.error("Failed to save options:",e),window.$message.error("桌面歌词配置保存失败"),o()}},u=()=>{try{if(!Y)return;window.electron.ipcRenderer.send("set-desktop-lyric-option",a,!0),window.$message.success("桌面歌词配置已恢复默认")}catch(e){console.error("Failed to save options:",e),window.$message.error("桌面歌词配置恢复默认失败"),o()}};return d(()=>{o()}),(e,r)=>{const i=Xe,a=_e,o=Be,c=se,d=ie,p=Se,y=wt,g=ne,b=vt,w=Zt;return f(),F("div",Du,[N("div",Nu,[v(i,{prefix:"bar"},{default:_(()=>r[23]||(r[23]=[oe(" 歌词设置 ")])),_:1,__:[23]}),v(o,{id:"lyrics-show","content-style":{"flex-direction":"column","align-items":m(n).lyricsPosition,"--font-weight":m(n).lyricFontBold?"bold":"normal","--font-size":m(n).lyricFontSize,"--font-tran-size":m(n).lyricTranFontSize,"--font-roma-size":m(n).lyricRomaFontSize,"--transform-origin":"center"===m(n).lyricsPosition?"center":"flex-start"===m(n).lyricsPosition?"left":"right"},class:"set-item"},{default:_(()=>[(f(),F(De,null,Ne(2,e=>N("div",{key:e,class:he(["lrc-item",{on:2===e}])},[v(a,null,{default:_(()=>r[24]||(r[24]=[oe("我是一句歌词")])),_:1,__:[24]}),m(n).showTran?(f(),h(a,{key:0},{default:_(()=>r[25]||(r[25]=[oe("I'm the lyric")])),_:1,__:[25]})):me("",!0),m(n).showRoma?(f(),h(a,{key:1},{default:_(()=>r[26]||(r[26]=[oe("wo shi yi ju ge ci")])),_:1,__:[26]})):me("",!0)],2)),64))]),_:1},8,["content-style"]),v(o,{class:"set-item"},{default:_(()=>[N("div",Bu,[v(a,{class:"name"},{default:_(()=>r[27]||(r[27]=[oe("歌词字体大小")])),_:1,__:[27]}),v(a,{class:"tip",depth:3},{default:_(()=>r[28]||(r[28]=[oe("单位 px，最小 30，最大 60")])),_:1,__:[28]})]),v(p,null,{default:_(()=>[v(pe,{name:"fade",mode:"out-in"},{default:_(()=>[46!==m(n).lyricFontSize?(f(),h(c,{key:0,type:"primary",strong:"",secondary:"",onClick:r[0]||(r[0]=e=>m(n).lyricFontSize=46)},{default:_(()=>r[29]||(r[29]=[oe(" 恢复默认 ")])),_:1,__:[29]})):me("",!0)]),_:1}),v(d,{value:m(n).lyricFontSize,"onUpdate:value":r[1]||(r[1]=e=>m(n).lyricFontSize=e),min:30,max:60,class:"set",placeholder:"请输入歌词字体大小",onBlur:r[2]||(r[2]=e=>null===m(n).lyricFontSize?m(n).lyricFontSize=30:null)},{suffix:_(()=>r[30]||(r[30]=[oe(" px ")])),_:1},8,["value"])]),_:1})]),_:1}),v(o,{class:"set-item"},{default:_(()=>[N("div",Uu,[v(a,{class:"name"},{default:_(()=>r[31]||(r[31]=[oe("翻译歌词大小")])),_:1,__:[31]}),v(a,{class:"tip",depth:3},{default:_(()=>r[32]||(r[32]=[oe("单位 px，最小 12，最大 40")])),_:1,__:[32]})]),v(p,null,{default:_(()=>[v(pe,{name:"fade",mode:"out-in"},{default:_(()=>[22!==m(n).lyricTranFontSize?(f(),h(c,{key:0,type:"primary",strong:"",secondary:"",onClick:r[3]||(r[3]=e=>m(n).lyricTranFontSize=22)},{default:_(()=>r[33]||(r[33]=[oe(" 恢复默认 ")])),_:1,__:[33]})):me("",!0)]),_:1}),v(d,{value:m(n).lyricTranFontSize,"onUpdate:value":r[4]||(r[4]=e=>m(n).lyricTranFontSize=e),min:12,max:40,disabled:m(n).useAMLyrics,class:"set",placeholder:"请输入翻译歌词字体大小",onBlur:r[5]||(r[5]=e=>null===m(n).lyricTranFontSize?m(n).lyricTranFontSize=22:null)},{suffix:_(()=>r[34]||(r[34]=[oe(" px ")])),_:1},8,["value","disabled"])]),_:1})]),_:1}),v(o,{class:"set-item"},{default:_(()=>[N("div",ju,[v(a,{class:"name"},{default:_(()=>r[35]||(r[35]=[oe("音译歌词大小")])),_:1,__:[35]}),v(a,{class:"tip",depth:3},{default:_(()=>r[36]||(r[36]=[oe("单位 px，最小 12，最大 40")])),_:1,__:[36]})]),v(p,null,{default:_(()=>[v(pe,{name:"fade",mode:"out-in"},{default:_(()=>[18!==m(n).lyricRomaFontSize?(f(),h(c,{key:0,type:"primary",strong:"",secondary:"",onClick:r[6]||(r[6]=e=>m(n).lyricRomaFontSize=18)},{default:_(()=>r[37]||(r[37]=[oe(" 恢复默认 ")])),_:1,__:[37]})):me("",!0)]),_:1}),v(d,{value:m(n).lyricRomaFontSize,"onUpdate:value":r[7]||(r[7]=e=>m(n).lyricRomaFontSize=e),min:12,max:40,disabled:m(n).useAMLyrics,class:"set",placeholder:"请输入歌词字体大小",onBlur:r[8]||(r[8]=e=>null===m(n).lyricRomaFontSize?m(n).lyricRomaFontSize=18:null)},{suffix:_(()=>r[38]||(r[38]=[oe(" px ")])),_:1},8,["value","disabled"])]),_:1})]),_:1}),v(o,{class:"set-item"},{default:_(()=>[N("div",Gu,[v(a,{class:"name"},{default:_(()=>r[39]||(r[39]=[oe("歌词字体加粗")])),_:1,__:[39]}),v(a,{class:"tip",depth:3},{default:_(()=>r[40]||(r[40]=[oe("是否将歌词字体加粗显示，部分字体可能显示异常")])),_:1,__:[40]})]),v(y,{value:m(n).lyricFontBold,"onUpdate:value":r[9]||(r[9]=e=>m(n).lyricFontBold=e),class:"set",round:!1},null,8,["value"])]),_:1}),v(o,{class:"set-item"},{default:_(()=>[N("div",zu,[v(a,{class:"name"},{default:_(()=>r[41]||(r[41]=[oe("歌词位置")])),_:1,__:[41]}),v(a,{class:"tip",depth:3},{default:_(()=>r[42]||(r[42]=[oe("歌词的默认垂直位置")])),_:1,__:[42]})]),v(g,{value:m(n).lyricsPosition,"onUpdate:value":r[10]||(r[10]=e=>m(n).lyricsPosition=e),disabled:m(n).useAMLyrics,options:[{label:"居左",value:"flex-start"},{label:"居中",value:"center"},{label:"居右",value:"flex-end"}],class:"set"},null,8,["value","disabled"])]),_:1}),v(o,{class:"set-item"},{default:_(()=>[N("div",Hu,[v(a,{class:"name"},{default:_(()=>r[43]||(r[43]=[oe("歌词滚动位置")])),_:1,__:[43]}),v(a,{class:"tip",depth:3},{default:_(()=>r[44]||(r[44]=[oe("歌词高亮时所处的位置")])),_:1,__:[44]})]),v(g,{value:m(n).lyricsScrollPosition,"onUpdate:value":r[11]||(r[11]=e=>m(n).lyricsScrollPosition=e),options:[{label:"靠近顶部",value:"start"},{label:"水平居中",value:"center"}],class:"set"},null,8,["value"])]),_:1}),v(o,{class:"set-item"},{default:_(()=>[N("div",Vu,[v(a,{class:"name"},{default:_(()=>r[45]||(r[45]=[oe("自动暂停滚动")])),_:1,__:[45]}),v(a,{class:"tip",depth:3},{default:_(()=>r[46]||(r[46]=[oe(" 鼠标移入歌词区域时是否暂停滚动 ")])),_:1,__:[46]})]),v(y,{value:m(n).lrcMousePause,"onUpdate:value":r[12]||(r[12]=e=>m(n).lrcMousePause=e),disabled:m(n).useAMLyrics,round:!1,class:"set"},null,8,["value","disabled"])]),_:1}),v(o,{class:"set-item"},{default:_(()=>[N("div",$u,[v(a,{class:"name"},{default:_(()=>r[47]||(r[47]=[oe("显示逐字歌词")])),_:1,__:[47]})]),v(y,{value:m(n).showYrc,"onUpdate:value":r[13]||(r[13]=e=>m(n).showYrc=e),class:"set",round:!1},null,8,["value"])]),_:1}),v(b,{show:m(n).showYrc},{default:_(()=>[v(o,{class:"set-item"},{default:_(()=>[N("div",Xu,[v(a,{class:"name"},{default:_(()=>r[48]||(r[48]=[oe("显示逐字歌词动画")])),_:1,__:[48]}),v(a,{class:"tip",depth:3},{default:_(()=>r[49]||(r[49]=[oe(" 可能会造成性能问题，如遇卡顿请关闭 ")])),_:1,__:[49]})]),v(y,{value:m(n).showYrcAnimation,"onUpdate:value":r[14]||(r[14]=e=>m(n).showYrcAnimation=e),disabled:m(n).useAMLyrics,round:!1,class:"set"},null,8,["value","disabled"])]),_:1})]),_:1},8,["show"]),v(o,{class:"set-item"},{default:_(()=>[N("div",qu,[v(a,{class:"name"},{default:_(()=>r[50]||(r[50]=[oe("显示歌词翻译")])),_:1,__:[50]})]),v(y,{value:m(n).showTran,"onUpdate:value":r[15]||(r[15]=e=>m(n).showTran=e),class:"set",round:!1,disabled:m(n).useAMLyrics},null,8,["value","disabled"])]),_:1}),v(o,{class:"set-item"},{default:_(()=>[N("div",Wu,[v(a,{class:"name"},{default:_(()=>r[51]||(r[51]=[oe("显示歌词音译")])),_:1,__:[51]})]),v(y,{value:m(n).showRoma,"onUpdate:value":r[16]||(r[16]=e=>m(n).showRoma=e),class:"set",round:!1,disabled:m(n).useAMLyrics},null,8,["value","disabled"])]),_:1}),v(o,{class:"set-item"},{default:_(()=>[N("div",Yu,[v(a,{class:"name"},{default:_(()=>r[52]||(r[52]=[oe("歌词自动模糊")])),_:1,__:[52]}),v(a,{class:"tip",depth:3},{default:_(()=>r[53]||(r[53]=[oe(" 是否聚焦显示当前播放行，其他行将模糊显示 ")])),_:1,__:[53]})]),v(y,{value:m(n).lyricsBlur,"onUpdate:value":r[17]||(r[17]=e=>m(n).lyricsBlur=e),class:"set",round:!1},null,8,["value"])]),_:1}),v(o,{class:"set-item"},{default:_(()=>[N("div",Ku,[v(a,{class:"name"},{default:_(()=>r[54]||(r[54]=[oe("歌词排除内容")])),_:1,__:[54]}),v(a,{class:"tip",depth:3},{default:_(()=>r[55]||(r[55]=[oe(" 歌词中包含的关键词将不会显示 ")])),_:1,__:[55]})]),v(c,{type:"primary",strong:"",secondary:"",onClick:m(wd)},{default:_(()=>r[56]||(r[56]=[oe("配置")])),_:1,__:[56]},8,["onClick"])]),_:1})]),N("div",Zu,[v(i,{prefix:"bar"},{default:_(()=>r[57]||(r[57]=[oe(" Apple Music-like Lyrics ")])),_:1,__:[57]}),v(o,{class:"set-item"},{default:_(()=>[N("div",Qu,[v(a,{class:"name"},{default:_(()=>r[58]||(r[58]=[oe("使用 Apple Music-like Lyrics")])),_:1,__:[58]}),v(a,{class:"tip",depth:3},{default:_(()=>r[59]||(r[59]=[oe(" 歌词使用 Apple Music-like Lyrics 进行渲染，需要高性能设备 ")])),_:1,__:[59]})]),v(y,{value:m(n).useAMLyrics,"onUpdate:value":r[18]||(r[18]=e=>m(n).useAMLyrics=e),class:"set",round:!1},null,8,["value"])]),_:1}),v(o,{class:"set-item"},{default:_(()=>[N("div",Ju,[v(a,{class:"name"},{default:_(()=>r[60]||(r[60]=[oe("歌词弹簧效果")])),_:1,__:[60]}),v(a,{class:"tip",depth:3},{default:_(()=>r[61]||(r[61]=[oe(" 是否使用物理弹簧算法实现歌词动画效果，需要高性能设备 ")])),_:1,__:[61]})]),v(y,{value:m(n).useAMSpring,"onUpdate:value":r[19]||(r[19]=e=>m(n).useAMSpring=e),class:"set",round:!1},null,8,["value"])]),_:1})]),m(Y)?(f(),F("div",ec,[v(i,{prefix:"bar"},{default:_(()=>r[62]||(r[62]=[oe(" 桌面歌词 ")])),_:1,__:[62]}),v(o,{class:"set-item"},{default:_(()=>[N("div",tc,[v(a,{class:"name"},{default:_(()=>r[63]||(r[63]=[oe("开启桌面歌词")])),_:1,__:[63]}),v(a,{class:"tip",depth:3},{default:_(()=>r[64]||(r[64]=[oe(" 如遇问题请向开发者反馈 ")])),_:1,__:[64]})]),v(y,{value:m(t).showDesktopLyric,round:!1,class:"set","onUpdate:value":m($l).toggleDesktopLyric},null,8,["value","onUpdate:value"])]),_:1}),v(o,{class:"set-item"},{default:_(()=>[N("div",rc,[v(a,{class:"name"},{default:_(()=>r[65]||(r[65]=[oe("桌面歌词文字大小")])),_:1,__:[65]}),v(a,{class:"tip",depth:3},{default:_(()=>r[66]||(r[66]=[oe("翻译或其他文字将会跟随变化")])),_:1,__:[66]})]),v(g,{value:m(s).fontSize,"onUpdate:value":[r[20]||(r[20]=e=>m(s).fontSize=e),l],options:Array.from({length:41},(e,t)=>({label:`${20+t} px`,value:20+t})),class:"set"},null,8,["value","options"])]),_:1}),v(o,{class:"set-item"},{default:_(()=>[N("div",nc,[v(a,{class:"name"},{default:_(()=>r[67]||(r[67]=[oe("主题色")])),_:1,__:[67]}),v(a,{class:"tip",depth:3},{default:_(()=>r[68]||(r[68]=[oe("桌面歌词文字主色")])),_:1,__:[68]})]),v(w,{value:m(s).mainColor,"onUpdate:value":r[21]||(r[21]=e=>m(s).mainColor=e),"show-alpha":!1,modes:["hex"],class:"set",onComplete:l},null,8,["value"])]),_:1}),v(o,{class:"set-item"},{default:_(()=>[N("div",ic,[v(a,{class:"name"},{default:_(()=>r[69]||(r[69]=[oe("描边色")])),_:1,__:[69]}),v(a,{class:"tip",depth:3},{default:_(()=>r[70]||(r[70]=[oe("桌面歌词文字描边色")])),_:1,__:[70]})]),v(w,{value:m(s).shadowColor,"onUpdate:value":r[22]||(r[22]=e=>m(s).shadowColor=e),modes:["rgb"],class:"set",onComplete:l},null,8,["value"])]),_:1}),v(o,{class:"set-item"},{default:_(()=>[N("div",ac,[v(a,{class:"name"},{default:_(()=>r[71]||(r[71]=[oe("恢复默认配置")])),_:1,__:[71]}),v(a,{class:"tip",depth:3},{default:_(()=>r[72]||(r[72]=[oe("恢复默认桌面歌词配置")])),_:1,__:[72]})]),v(c,{type:"primary",onClick:u},{default:_(()=>r[73]||(r[73]=[oe("恢复默认")])),_:1,__:[73]})]),_:1})])):me("",!0)])}}}),[["__scopeId","data-v-c6bc73d4"]]);var oc={exports:{}};
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */!function(e,t){(function(){var r,n="Expected a function",i="__lodash_hash_undefined__",a="__lodash_placeholder__",s=32,o=128,l=256,u=1/0,c=9007199254740991,d=NaN,h=4294967295,f=[["ary",o],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",s],["partialRight",64],["rearg",l]],p="[object Arguments]",m="[object Array]",y="[object Boolean]",g="[object Date]",_="[object Error]",v="[object Function]",b="[object GeneratorFunction]",w="[object Map]",x="[object Number]",I="[object Object]",T="[object Promise]",E="[object RegExp]",A="[object Set]",S="[object String]",k="[object Symbol]",C="[object WeakMap]",P="[object ArrayBuffer]",R="[object DataView]",M="[object Float32Array]",L="[object Float64Array]",O="[object Int8Array]",F="[object Int16Array]",D="[object Int32Array]",N="[object Uint8Array]",B="[object Uint8ClampedArray]",U="[object Uint16Array]",j="[object Uint32Array]",G=/\b__p \+= '';/g,z=/\b(__p \+=) '' \+/g,H=/(__e\(.*?\)|\b__t\)) \+\n'';/g,V=/&(?:amp|lt|gt|quot|#39);/g,$=/[&<>"']/g,X=RegExp(V.source),q=RegExp($.source),W=/<%-([\s\S]+?)%>/g,Y=/<%([\s\S]+?)%>/g,K=/<%=([\s\S]+?)%>/g,Z=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,J=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ee=/[\\^$.*+?()[\]{}|]/g,te=RegExp(ee.source),re=/^\s+/,ne=/\s/,ie=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ae=/\{\n\/\* \[wrapped with (.+)\] \*/,se=/,? & /,oe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,le=/[()=,{}\[\]\/\s]/,ue=/\\(\\)?/g,ce=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,de=/\w*$/,he=/^[-+]0x[0-9a-f]+$/i,fe=/^0b[01]+$/i,pe=/^\[object .+?Constructor\]$/,me=/^0o[0-7]+$/i,ye=/^(?:0|[1-9]\d*)$/,ge=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_e=/($^)/,ve=/['\n\r\u2028\u2029\\]/g,be="\\ud800-\\udfff",we="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",xe="\\u2700-\\u27bf",Ie="a-z\\xdf-\\xf6\\xf8-\\xff",Te="A-Z\\xc0-\\xd6\\xd8-\\xde",Ee="\\ufe0e\\ufe0f",Ae="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Se="['’]",ke="["+be+"]",Ce="["+Ae+"]",Pe="["+we+"]",Re="\\d+",Me="["+xe+"]",Le="["+Ie+"]",Oe="[^"+be+Ae+Re+xe+Ie+Te+"]",Fe="\\ud83c[\\udffb-\\udfff]",De="[^"+be+"]",Ne="(?:\\ud83c[\\udde6-\\uddff]){2}",Be="[\\ud800-\\udbff][\\udc00-\\udfff]",Ue="["+Te+"]",je="\\u200d",Ge="(?:"+Le+"|"+Oe+")",ze="(?:"+Ue+"|"+Oe+")",He="(?:['’](?:d|ll|m|re|s|t|ve))?",Ve="(?:['’](?:D|LL|M|RE|S|T|VE))?",$e="(?:"+Pe+"|"+Fe+")"+"?",Xe="["+Ee+"]?",qe=Xe+$e+("(?:"+je+"(?:"+[De,Ne,Be].join("|")+")"+Xe+$e+")*"),We="(?:"+[Me,Ne,Be].join("|")+")"+qe,Ye="(?:"+[De+Pe+"?",Pe,Ne,Be,ke].join("|")+")",Ke=RegExp(Se,"g"),Ze=RegExp(Pe,"g"),Qe=RegExp(Fe+"(?="+Fe+")|"+Ye+qe,"g"),Je=RegExp([Ue+"?"+Le+"+"+He+"(?="+[Ce,Ue,"$"].join("|")+")",ze+"+"+Ve+"(?="+[Ce,Ue+Ge,"$"].join("|")+")",Ue+"?"+Ge+"+"+He,Ue+"+"+Ve,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Re,We].join("|"),"g"),et=RegExp("["+je+be+we+Ee+"]"),tt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,rt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],nt=-1,it={};it[M]=it[L]=it[O]=it[F]=it[D]=it[N]=it[B]=it[U]=it[j]=!0,it[p]=it[m]=it[P]=it[y]=it[R]=it[g]=it[_]=it[v]=it[w]=it[x]=it[I]=it[E]=it[A]=it[S]=it[C]=!1;var at={};at[p]=at[m]=at[P]=at[R]=at[y]=at[g]=at[M]=at[L]=at[O]=at[F]=at[D]=at[w]=at[x]=at[I]=at[E]=at[A]=at[S]=at[k]=at[N]=at[B]=at[U]=at[j]=!0,at[_]=at[v]=at[C]=!1;var st={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ot=parseFloat,lt=parseInt,ut="object"==typeof Tt&&Tt&&Tt.Object===Object&&Tt,ct="object"==typeof self&&self&&self.Object===Object&&self,dt=ut||ct||Function("return this")(),ht=t&&!t.nodeType&&t,ft=ht&&e&&!e.nodeType&&e,pt=ft&&ft.exports===ht,mt=pt&&ut.process,yt=function(){try{var e=ft&&ft.require&&ft.require("util").types;return e||mt&&mt.binding&&mt.binding("util")}catch(t){}}(),gt=yt&&yt.isArrayBuffer,_t=yt&&yt.isDate,vt=yt&&yt.isMap,bt=yt&&yt.isRegExp,wt=yt&&yt.isSet,xt=yt&&yt.isTypedArray;function It(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function Et(e,t,r,n){for(var i=-1,a=null==e?0:e.length;++i<a;){var s=e[i];t(n,s,r(s),e)}return n}function At(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function St(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function kt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function Ct(e,t){for(var r=-1,n=null==e?0:e.length,i=0,a=[];++r<n;){var s=e[r];t(s,r,e)&&(a[i++]=s)}return a}function Pt(e,t){return!!(null==e?0:e.length)&&jt(e,t,0)>-1}function Rt(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}function Mt(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function Lt(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function Ot(e,t,r,n){var i=-1,a=null==e?0:e.length;for(n&&a&&(r=e[++i]);++i<a;)r=t(r,e[i],i,e);return r}function Ft(e,t,r,n){var i=null==e?0:e.length;for(n&&i&&(r=e[--i]);i--;)r=t(r,e[i],i,e);return r}function Dt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var Nt=Vt("length");function Bt(e,t,r){var n;return r(e,function(e,r,i){if(t(e,r,i))return n=r,!1}),n}function Ut(e,t,r,n){for(var i=e.length,a=r+(n?1:-1);n?a--:++a<i;)if(t(e[a],a,e))return a;return-1}function jt(e,t,r){return t==t?function(e,t,r){var n=r-1,i=e.length;for(;++n<i;)if(e[n]===t)return n;return-1}(e,t,r):Ut(e,zt,r)}function Gt(e,t,r,n){for(var i=r-1,a=e.length;++i<a;)if(n(e[i],t))return i;return-1}function zt(e){return e!=e}function Ht(e,t){var r=null==e?0:e.length;return r?qt(e,t)/r:d}function Vt(e){return function(t){return null==t?r:t[e]}}function $t(e){return function(t){return null==e?r:e[t]}}function Xt(e,t,r,n,i){return i(e,function(e,i,a){r=n?(n=!1,e):t(r,e,i,a)}),r}function qt(e,t){for(var n,i=-1,a=e.length;++i<a;){var s=t(e[i]);s!==r&&(n=n===r?s:n+s)}return n}function Wt(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function Yt(e){return e?e.slice(0,dr(e)+1).replace(re,""):e}function Kt(e){return function(t){return e(t)}}function Zt(e,t){return Mt(t,function(t){return e[t]})}function Qt(e,t){return e.has(t)}function Jt(e,t){for(var r=-1,n=e.length;++r<n&&jt(t,e[r],0)>-1;);return r}function er(e,t){for(var r=e.length;r--&&jt(t,e[r],0)>-1;);return r}var tr=$t({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),rr=$t({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function nr(e){return"\\"+st[e]}function ir(e){return et.test(e)}function ar(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function sr(e,t){return function(r){return e(t(r))}}function or(e,t){for(var r=-1,n=e.length,i=0,s=[];++r<n;){var o=e[r];o!==t&&o!==a||(e[r]=a,s[i++]=r)}return s}function lr(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}function ur(e){return ir(e)?function(e){var t=Qe.lastIndex=0;for(;Qe.test(e);)++t;return t}(e):Nt(e)}function cr(e){return ir(e)?function(e){return e.match(Qe)||[]}(e):function(e){return e.split("")}(e)}function dr(e){for(var t=e.length;t--&&ne.test(e.charAt(t)););return t}var hr=$t({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var fr=function e(t){var ne,be=(t=null==t?dt:fr.defaults(dt.Object(),t,fr.pick(dt,rt))).Array,we=t.Date,xe=t.Error,Ie=t.Function,Te=t.Math,Ee=t.Object,Ae=t.RegExp,Se=t.String,ke=t.TypeError,Ce=be.prototype,Pe=Ie.prototype,Re=Ee.prototype,Me=t["__core-js_shared__"],Le=Pe.toString,Oe=Re.hasOwnProperty,Fe=0,De=(ne=/[^.]+$/.exec(Me&&Me.keys&&Me.keys.IE_PROTO||""))?"Symbol(src)_1."+ne:"",Ne=Re.toString,Be=Le.call(Ee),Ue=dt._,je=Ae("^"+Le.call(Oe).replace(ee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ge=pt?t.Buffer:r,ze=t.Symbol,He=t.Uint8Array,Ve=Ge?Ge.allocUnsafe:r,$e=sr(Ee.getPrototypeOf,Ee),Xe=Ee.create,qe=Re.propertyIsEnumerable,We=Ce.splice,Ye=ze?ze.isConcatSpreadable:r,Qe=ze?ze.iterator:r,et=ze?ze.toStringTag:r,st=function(){try{var e=ua(Ee,"defineProperty");return e({},"",{}),e}catch(t){}}(),ut=t.clearTimeout!==dt.clearTimeout&&t.clearTimeout,ct=we&&we.now!==dt.Date.now&&we.now,ht=t.setTimeout!==dt.setTimeout&&t.setTimeout,ft=Te.ceil,mt=Te.floor,yt=Ee.getOwnPropertySymbols,Tt=Ge?Ge.isBuffer:r,Nt=t.isFinite,$t=Ce.join,pr=sr(Ee.keys,Ee),mr=Te.max,yr=Te.min,gr=we.now,_r=t.parseInt,vr=Te.random,br=Ce.reverse,wr=ua(t,"DataView"),xr=ua(t,"Map"),Ir=ua(t,"Promise"),Tr=ua(t,"Set"),Er=ua(t,"WeakMap"),Ar=ua(Ee,"create"),Sr=Er&&new Er,kr={},Cr=Ba(wr),Pr=Ba(xr),Rr=Ba(Ir),Mr=Ba(Tr),Lr=Ba(Er),Or=ze?ze.prototype:r,Fr=Or?Or.valueOf:r,Dr=Or?Or.toString:r;function Nr(e){if(to(e)&&!Vs(e)&&!(e instanceof Gr)){if(e instanceof jr)return e;if(Oe.call(e,"__wrapped__"))return Ua(e)}return new jr(e)}var Br=function(){function e(){}return function(t){if(!eo(t))return{};if(Xe)return Xe(t);e.prototype=t;var n=new e;return e.prototype=r,n}}();function Ur(){}function jr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}function Gr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=h,this.__views__=[]}function zr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Hr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Vr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function $r(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Vr;++t<r;)this.add(e[t])}function Xr(e){var t=this.__data__=new Hr(e);this.size=t.size}function qr(e,t){var r=Vs(e),n=!r&&Hs(e),i=!r&&!n&&Ws(e),a=!r&&!n&&!i&&uo(e),s=r||n||i||a,o=s?Wt(e.length,Se):[],l=o.length;for(var u in e)!t&&!Oe.call(e,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ya(u,l))||o.push(u);return o}function Wr(e){var t=e.length;return t?e[Xn(0,t-1)]:r}function Yr(e,t){return Ma(Si(e),an(t,0,e.length))}function Kr(e){return Ma(Si(e))}function Zr(e,t,n){(n!==r&&!js(e[t],n)||n===r&&!(t in e))&&rn(e,t,n)}function Qr(e,t,n){var i=e[t];Oe.call(e,t)&&js(i,n)&&(n!==r||t in e)||rn(e,t,n)}function Jr(e,t){for(var r=e.length;r--;)if(js(e[r][0],t))return r;return-1}function en(e,t,r,n){return cn(e,function(e,i,a){t(n,e,r(e),a)}),n}function tn(e,t){return e&&ki(t,Mo(t),e)}function rn(e,t,r){"__proto__"==t&&st?st(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function nn(e,t){for(var n=-1,i=t.length,a=be(i),s=null==e;++n<i;)a[n]=s?r:So(e,t[n]);return a}function an(e,t,n){return e==e&&(n!==r&&(e=e<=n?e:n),t!==r&&(e=e>=t?e:t)),e}function sn(e,t,n,i,a,s){var o,l=1&t,u=2&t,c=4&t;if(n&&(o=a?n(e,i,a,s):n(e)),o!==r)return o;if(!eo(e))return e;var d=Vs(e);if(d){if(o=function(e){var t=e.length,r=new e.constructor(t);t&&"string"==typeof e[0]&&Oe.call(e,"index")&&(r.index=e.index,r.input=e.input);return r}(e),!l)return Si(e,o)}else{var h=ha(e),f=h==v||h==b;if(Ws(e))return wi(e,l);if(h==I||h==p||f&&!a){if(o=u||f?{}:pa(e),!l)return u?function(e,t){return ki(e,da(e),t)}(e,function(e,t){return e&&ki(t,Lo(t),e)}(o,e)):function(e,t){return ki(e,ca(e),t)}(e,tn(o,e))}else{if(!at[h])return a?e:{};o=function(e,t,r){var n=e.constructor;switch(t){case P:return xi(e);case y:case g:return new n(+e);case R:return function(e,t){var r=t?xi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case M:case L:case O:case F:case D:case N:case B:case U:case j:return Ii(e,r);case w:return new n;case x:case S:return new n(e);case E:return function(e){var t=new e.constructor(e.source,de.exec(e));return t.lastIndex=e.lastIndex,t}(e);case A:return new n;case k:return i=e,Fr?Ee(Fr.call(i)):{}}var i}(e,h,l)}}s||(s=new Xr);var m=s.get(e);if(m)return m;s.set(e,o),so(e)?e.forEach(function(r){o.add(sn(r,t,n,r,e,s))}):ro(e)&&e.forEach(function(r,i){o.set(i,sn(r,t,n,i,e,s))});var _=d?r:(c?u?ra:ta:u?Lo:Mo)(e);return At(_||e,function(r,i){_&&(r=e[i=r]),Qr(o,i,sn(r,t,n,i,e,s))}),o}function on(e,t,n){var i=n.length;if(null==e)return!i;for(e=Ee(e);i--;){var a=n[i],s=t[a],o=e[a];if(o===r&&!(a in e)||!s(o))return!1}return!0}function ln(e,t,i){if("function"!=typeof e)throw new ke(n);return ka(function(){e.apply(r,i)},t)}function un(e,t,r,n){var i=-1,a=Pt,s=!0,o=e.length,l=[],u=t.length;if(!o)return l;r&&(t=Mt(t,Kt(r))),n?(a=Rt,s=!1):t.length>=200&&(a=Qt,s=!1,t=new $r(t));e:for(;++i<o;){var c=e[i],d=null==r?c:r(c);if(c=n||0!==c?c:0,s&&d==d){for(var h=u;h--;)if(t[h]===d)continue e;l.push(c)}else a(t,d,n)||l.push(c)}return l}Nr.templateSettings={escape:W,evaluate:Y,interpolate:K,variable:"",imports:{_:Nr}},Nr.prototype=Ur.prototype,Nr.prototype.constructor=Nr,jr.prototype=Br(Ur.prototype),jr.prototype.constructor=jr,Gr.prototype=Br(Ur.prototype),Gr.prototype.constructor=Gr,zr.prototype.clear=function(){this.__data__=Ar?Ar(null):{},this.size=0},zr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},zr.prototype.get=function(e){var t=this.__data__;if(Ar){var n=t[e];return n===i?r:n}return Oe.call(t,e)?t[e]:r},zr.prototype.has=function(e){var t=this.__data__;return Ar?t[e]!==r:Oe.call(t,e)},zr.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Ar&&t===r?i:t,this},Hr.prototype.clear=function(){this.__data__=[],this.size=0},Hr.prototype.delete=function(e){var t=this.__data__,r=Jr(t,e);return!(r<0)&&(r==t.length-1?t.pop():We.call(t,r,1),--this.size,!0)},Hr.prototype.get=function(e){var t=this.__data__,n=Jr(t,e);return n<0?r:t[n][1]},Hr.prototype.has=function(e){return Jr(this.__data__,e)>-1},Hr.prototype.set=function(e,t){var r=this.__data__,n=Jr(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},Vr.prototype.clear=function(){this.size=0,this.__data__={hash:new zr,map:new(xr||Hr),string:new zr}},Vr.prototype.delete=function(e){var t=oa(this,e).delete(e);return this.size-=t?1:0,t},Vr.prototype.get=function(e){return oa(this,e).get(e)},Vr.prototype.has=function(e){return oa(this,e).has(e)},Vr.prototype.set=function(e,t){var r=oa(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},$r.prototype.add=$r.prototype.push=function(e){return this.__data__.set(e,i),this},$r.prototype.has=function(e){return this.__data__.has(e)},Xr.prototype.clear=function(){this.__data__=new Hr,this.size=0},Xr.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Xr.prototype.get=function(e){return this.__data__.get(e)},Xr.prototype.has=function(e){return this.__data__.has(e)},Xr.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Hr){var n=r.__data__;if(!xr||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Vr(n)}return r.set(e,t),this.size=r.size,this};var cn=Ri(_n),dn=Ri(vn,!0);function hn(e,t){var r=!0;return cn(e,function(e,n,i){return r=!!t(e,n,i)}),r}function fn(e,t,n){for(var i=-1,a=e.length;++i<a;){var s=e[i],o=t(s);if(null!=o&&(l===r?o==o&&!lo(o):n(o,l)))var l=o,u=s}return u}function pn(e,t){var r=[];return cn(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r}function mn(e,t,r,n,i){var a=-1,s=e.length;for(r||(r=ma),i||(i=[]);++a<s;){var o=e[a];t>0&&r(o)?t>1?mn(o,t-1,r,n,i):Lt(i,o):n||(i[i.length]=o)}return i}var yn=Mi(),gn=Mi(!0);function _n(e,t){return e&&yn(e,t,Mo)}function vn(e,t){return e&&gn(e,t,Mo)}function bn(e,t){return Ct(t,function(t){return Zs(e[t])})}function wn(e,t){for(var n=0,i=(t=gi(t,e)).length;null!=e&&n<i;)e=e[Na(t[n++])];return n&&n==i?e:r}function xn(e,t,r){var n=t(e);return Vs(e)?n:Lt(n,r(e))}function In(e){return null==e?e===r?"[object Undefined]":"[object Null]":et&&et in Ee(e)?function(e){var t=Oe.call(e,et),n=e[et];try{e[et]=r;var i=!0}catch(s){}var a=Ne.call(e);i&&(t?e[et]=n:delete e[et]);return a}(e):function(e){return Ne.call(e)}(e)}function Tn(e,t){return e>t}function En(e,t){return null!=e&&Oe.call(e,t)}function An(e,t){return null!=e&&t in Ee(e)}function Sn(e,t,n){for(var i=n?Rt:Pt,a=e[0].length,s=e.length,o=s,l=be(s),u=1/0,c=[];o--;){var d=e[o];o&&t&&(d=Mt(d,Kt(t))),u=yr(d.length,u),l[o]=!n&&(t||a>=120&&d.length>=120)?new $r(o&&d):r}d=e[0];var h=-1,f=l[0];e:for(;++h<a&&c.length<u;){var p=d[h],m=t?t(p):p;if(p=n||0!==p?p:0,!(f?Qt(f,m):i(c,m,n))){for(o=s;--o;){var y=l[o];if(!(y?Qt(y,m):i(e[o],m,n)))continue e}f&&f.push(m),c.push(p)}}return c}function kn(e,t,n){var i=null==(e=Ea(e,t=gi(t,e)))?e:e[Na(Ka(t))];return null==i?r:It(i,e,n)}function Cn(e){return to(e)&&In(e)==p}function Pn(e,t,n,i,a){return e===t||(null==e||null==t||!to(e)&&!to(t)?e!=e&&t!=t:function(e,t,n,i,a,s){var o=Vs(e),l=Vs(t),u=o?m:ha(e),c=l?m:ha(t),d=(u=u==p?I:u)==I,h=(c=c==p?I:c)==I,f=u==c;if(f&&Ws(e)){if(!Ws(t))return!1;o=!0,d=!1}if(f&&!d)return s||(s=new Xr),o||uo(e)?Ji(e,t,n,i,a,s):function(e,t,r,n,i,a,s){switch(r){case R:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case P:return!(e.byteLength!=t.byteLength||!a(new He(e),new He(t)));case y:case g:case x:return js(+e,+t);case _:return e.name==t.name&&e.message==t.message;case E:case S:return e==t+"";case w:var o=ar;case A:var l=1&n;if(o||(o=lr),e.size!=t.size&&!l)return!1;var u=s.get(e);if(u)return u==t;n|=2,s.set(e,t);var c=Ji(o(e),o(t),n,i,a,s);return s.delete(e),c;case k:if(Fr)return Fr.call(e)==Fr.call(t)}return!1}(e,t,u,n,i,a,s);if(!(1&n)){var v=d&&Oe.call(e,"__wrapped__"),b=h&&Oe.call(t,"__wrapped__");if(v||b){var T=v?e.value():e,C=b?t.value():t;return s||(s=new Xr),a(T,C,n,i,s)}}if(!f)return!1;return s||(s=new Xr),function(e,t,n,i,a,s){var o=1&n,l=ta(e),u=l.length,c=ta(t),d=c.length;if(u!=d&&!o)return!1;var h=u;for(;h--;){var f=l[h];if(!(o?f in t:Oe.call(t,f)))return!1}var p=s.get(e),m=s.get(t);if(p&&m)return p==t&&m==e;var y=!0;s.set(e,t),s.set(t,e);var g=o;for(;++h<u;){var _=e[f=l[h]],v=t[f];if(i)var b=o?i(v,_,f,t,e,s):i(_,v,f,e,t,s);if(!(b===r?_===v||a(_,v,n,i,s):b)){y=!1;break}g||(g="constructor"==f)}if(y&&!g){var w=e.constructor,x=t.constructor;w==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof x&&x instanceof x||(y=!1)}return s.delete(e),s.delete(t),y}(e,t,n,i,a,s)}(e,t,n,i,Pn,a))}function Rn(e,t,n,i){var a=n.length,s=a,o=!i;if(null==e)return!s;for(e=Ee(e);a--;){var l=n[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<s;){var u=(l=n[a])[0],c=e[u],d=l[1];if(o&&l[2]){if(c===r&&!(u in e))return!1}else{var h=new Xr;if(i)var f=i(c,d,u,e,t,h);if(!(f===r?Pn(d,c,3,i,h):f))return!1}}return!0}function Mn(e){return!(!eo(e)||(t=e,De&&De in t))&&(Zs(e)?je:pe).test(Ba(e));var t}function Ln(e){return"function"==typeof e?e:null==e?il:"object"==typeof e?Vs(e)?Un(e[0],e[1]):Bn(e):fl(e)}function On(e){if(!wa(e))return pr(e);var t=[];for(var r in Ee(e))Oe.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Fn(e){if(!eo(e))return function(e){var t=[];if(null!=e)for(var r in Ee(e))t.push(r);return t}(e);var t=wa(e),r=[];for(var n in e)("constructor"!=n||!t&&Oe.call(e,n))&&r.push(n);return r}function Dn(e,t){return e<t}function Nn(e,t){var r=-1,n=Xs(e)?be(e.length):[];return cn(e,function(e,i,a){n[++r]=t(e,i,a)}),n}function Bn(e){var t=la(e);return 1==t.length&&t[0][2]?Ia(t[0][0],t[0][1]):function(r){return r===e||Rn(r,e,t)}}function Un(e,t){return _a(e)&&xa(t)?Ia(Na(e),t):function(n){var i=So(n,e);return i===r&&i===t?ko(n,e):Pn(t,i,3)}}function jn(e,t,n,i,a){e!==t&&yn(t,function(s,o){if(a||(a=new Xr),eo(s))!function(e,t,n,i,a,s,o){var l=Aa(e,n),u=Aa(t,n),c=o.get(u);if(c)return void Zr(e,n,c);var d=s?s(l,u,n+"",e,t,o):r,h=d===r;if(h){var f=Vs(u),p=!f&&Ws(u),m=!f&&!p&&uo(u);d=u,f||p||m?Vs(l)?d=l:qs(l)?d=Si(l):p?(h=!1,d=wi(u,!0)):m?(h=!1,d=Ii(u,!0)):d=[]:io(u)||Hs(u)?(d=l,Hs(l)?d=_o(l):eo(l)&&!Zs(l)||(d=pa(u))):h=!1}h&&(o.set(u,d),a(d,u,i,s,o),o.delete(u));Zr(e,n,d)}(e,t,o,n,jn,i,a);else{var l=i?i(Aa(e,o),s,o+"",e,t,a):r;l===r&&(l=s),Zr(e,o,l)}},Lo)}function Gn(e,t){var n=e.length;if(n)return ya(t+=t<0?n:0,n)?e[t]:r}function zn(e,t,r){t=t.length?Mt(t,function(e){return Vs(e)?function(t){return wn(t,1===e.length?e[0]:e)}:e}):[il];var n=-1;return t=Mt(t,Kt(sa())),function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(Nn(e,function(e,r,i){return{criteria:Mt(t,function(t){return t(e)}),index:++n,value:e}}),function(e,t){return function(e,t,r){var n=-1,i=e.criteria,a=t.criteria,s=i.length,o=r.length;for(;++n<s;){var l=Ti(i[n],a[n]);if(l)return n>=o?l:l*("desc"==r[n]?-1:1)}return e.index-t.index}(e,t,r)})}function Hn(e,t,r){for(var n=-1,i=t.length,a={};++n<i;){var s=t[n],o=wn(e,s);r(o,s)&&Zn(a,gi(s,e),o)}return a}function Vn(e,t,r,n){var i=n?Gt:jt,a=-1,s=t.length,o=e;for(e===t&&(t=Si(t)),r&&(o=Mt(e,Kt(r)));++a<s;)for(var l=0,u=t[a],c=r?r(u):u;(l=i(o,c,l,n))>-1;)o!==e&&We.call(o,l,1),We.call(e,l,1);return e}function $n(e,t){for(var r=e?t.length:0,n=r-1;r--;){var i=t[r];if(r==n||i!==a){var a=i;ya(i)?We.call(e,i,1):ui(e,i)}}return e}function Xn(e,t){return e+mt(vr()*(t-e+1))}function qn(e,t){var r="";if(!e||t<1||t>c)return r;do{t%2&&(r+=e),(t=mt(t/2))&&(e+=e)}while(t);return r}function Wn(e,t){return Ca(Ta(e,t,il),e+"")}function Yn(e){return Wr(Go(e))}function Kn(e,t){var r=Go(e);return Ma(r,an(t,0,r.length))}function Zn(e,t,n,i){if(!eo(e))return e;for(var a=-1,s=(t=gi(t,e)).length,o=s-1,l=e;null!=l&&++a<s;){var u=Na(t[a]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(a!=o){var d=l[u];(c=i?i(d,u,l):r)===r&&(c=eo(d)?d:ya(t[a+1])?[]:{})}Qr(l,u,c),l=l[u]}return e}var Qn=Sr?function(e,t){return Sr.set(e,t),e}:il,Jn=st?function(e,t){return st(e,"toString",{configurable:!0,enumerable:!1,value:tl(t),writable:!0})}:il;function ei(e){return Ma(Go(e))}function ti(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var a=be(i);++n<i;)a[n]=e[n+t];return a}function ri(e,t){var r;return cn(e,function(e,n,i){return!(r=t(e,n,i))}),!!r}function ni(e,t,r){var n=0,i=null==e?n:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;n<i;){var a=n+i>>>1,s=e[a];null!==s&&!lo(s)&&(r?s<=t:s<t)?n=a+1:i=a}return i}return ii(e,t,il,r)}function ii(e,t,n,i){var a=0,s=null==e?0:e.length;if(0===s)return 0;for(var o=(t=n(t))!=t,l=null===t,u=lo(t),c=t===r;a<s;){var d=mt((a+s)/2),h=n(e[d]),f=h!==r,p=null===h,m=h==h,y=lo(h);if(o)var g=i||m;else g=c?m&&(i||f):l?m&&f&&(i||!p):u?m&&f&&!p&&(i||!y):!p&&!y&&(i?h<=t:h<t);g?a=d+1:s=d}return yr(s,4294967294)}function ai(e,t){for(var r=-1,n=e.length,i=0,a=[];++r<n;){var s=e[r],o=t?t(s):s;if(!r||!js(o,l)){var l=o;a[i++]=0===s?0:s}}return a}function si(e){return"number"==typeof e?e:lo(e)?d:+e}function oi(e){if("string"==typeof e)return e;if(Vs(e))return Mt(e,oi)+"";if(lo(e))return Dr?Dr.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function li(e,t,r){var n=-1,i=Pt,a=e.length,s=!0,o=[],l=o;if(r)s=!1,i=Rt;else if(a>=200){var u=t?null:qi(e);if(u)return lr(u);s=!1,i=Qt,l=new $r}else l=t?[]:o;e:for(;++n<a;){var c=e[n],d=t?t(c):c;if(c=r||0!==c?c:0,s&&d==d){for(var h=l.length;h--;)if(l[h]===d)continue e;t&&l.push(d),o.push(c)}else i(l,d,r)||(l!==o&&l.push(d),o.push(c))}return o}function ui(e,t){return null==(e=Ea(e,t=gi(t,e)))||delete e[Na(Ka(t))]}function ci(e,t,r,n){return Zn(e,t,r(wn(e,t)),n)}function di(e,t,r,n){for(var i=e.length,a=n?i:-1;(n?a--:++a<i)&&t(e[a],a,e););return r?ti(e,n?0:a,n?a+1:i):ti(e,n?a+1:0,n?i:a)}function hi(e,t){var r=e;return r instanceof Gr&&(r=r.value()),Ot(t,function(e,t){return t.func.apply(t.thisArg,Lt([e],t.args))},r)}function fi(e,t,r){var n=e.length;if(n<2)return n?li(e[0]):[];for(var i=-1,a=be(n);++i<n;)for(var s=e[i],o=-1;++o<n;)o!=i&&(a[i]=un(a[i]||s,e[o],t,r));return li(mn(a,1),t,r)}function pi(e,t,n){for(var i=-1,a=e.length,s=t.length,o={};++i<a;){var l=i<s?t[i]:r;n(o,e[i],l)}return o}function mi(e){return qs(e)?e:[]}function yi(e){return"function"==typeof e?e:il}function gi(e,t){return Vs(e)?e:_a(e,t)?[e]:Da(vo(e))}var _i=Wn;function vi(e,t,n){var i=e.length;return n=n===r?i:n,!t&&n>=i?e:ti(e,t,n)}var bi=ut||function(e){return dt.clearTimeout(e)};function wi(e,t){if(t)return e.slice();var r=e.length,n=Ve?Ve(r):new e.constructor(r);return e.copy(n),n}function xi(e){var t=new e.constructor(e.byteLength);return new He(t).set(new He(e)),t}function Ii(e,t){var r=t?xi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Ti(e,t){if(e!==t){var n=e!==r,i=null===e,a=e==e,s=lo(e),o=t!==r,l=null===t,u=t==t,c=lo(t);if(!l&&!c&&!s&&e>t||s&&o&&u&&!l&&!c||i&&o&&u||!n&&u||!a)return 1;if(!i&&!s&&!c&&e<t||c&&n&&a&&!i&&!s||l&&n&&a||!o&&a||!u)return-1}return 0}function Ei(e,t,r,n){for(var i=-1,a=e.length,s=r.length,o=-1,l=t.length,u=mr(a-s,0),c=be(l+u),d=!n;++o<l;)c[o]=t[o];for(;++i<s;)(d||i<a)&&(c[r[i]]=e[i]);for(;u--;)c[o++]=e[i++];return c}function Ai(e,t,r,n){for(var i=-1,a=e.length,s=-1,o=r.length,l=-1,u=t.length,c=mr(a-o,0),d=be(c+u),h=!n;++i<c;)d[i]=e[i];for(var f=i;++l<u;)d[f+l]=t[l];for(;++s<o;)(h||i<a)&&(d[f+r[s]]=e[i++]);return d}function Si(e,t){var r=-1,n=e.length;for(t||(t=be(n));++r<n;)t[r]=e[r];return t}function ki(e,t,n,i){var a=!n;n||(n={});for(var s=-1,o=t.length;++s<o;){var l=t[s],u=i?i(n[l],e[l],l,n,e):r;u===r&&(u=e[l]),a?rn(n,l,u):Qr(n,l,u)}return n}function Ci(e,t){return function(r,n){var i=Vs(r)?Et:en,a=t?t():{};return i(r,e,sa(n,2),a)}}function Pi(e){return Wn(function(t,n){var i=-1,a=n.length,s=a>1?n[a-1]:r,o=a>2?n[2]:r;for(s=e.length>3&&"function"==typeof s?(a--,s):r,o&&ga(n[0],n[1],o)&&(s=a<3?r:s,a=1),t=Ee(t);++i<a;){var l=n[i];l&&e(t,l,i,s)}return t})}function Ri(e,t){return function(r,n){if(null==r)return r;if(!Xs(r))return e(r,n);for(var i=r.length,a=t?i:-1,s=Ee(r);(t?a--:++a<i)&&!1!==n(s[a],a,s););return r}}function Mi(e){return function(t,r,n){for(var i=-1,a=Ee(t),s=n(t),o=s.length;o--;){var l=s[e?o:++i];if(!1===r(a[l],l,a))break}return t}}function Li(e){return function(t){var n=ir(t=vo(t))?cr(t):r,i=n?n[0]:t.charAt(0),a=n?vi(n,1).join(""):t.slice(1);return i[e]()+a}}function Oi(e){return function(t){return Ot(Qo(Vo(t).replace(Ke,"")),e,"")}}function Fi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Br(e.prototype),n=e.apply(r,t);return eo(n)?n:r}}function Di(e){return function(t,n,i){var a=Ee(t);if(!Xs(t)){var s=sa(n,3);t=Mo(t),n=function(e){return s(a[e],e,a)}}var o=e(t,n,i);return o>-1?a[s?t[o]:o]:r}}function Ni(e){return ea(function(t){var i=t.length,a=i,s=jr.prototype.thru;for(e&&t.reverse();a--;){var o=t[a];if("function"!=typeof o)throw new ke(n);if(s&&!l&&"wrapper"==ia(o))var l=new jr([],!0)}for(a=l?a:i;++a<i;){var u=ia(o=t[a]),c="wrapper"==u?na(o):r;l=c&&va(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?l[ia(c[0])].apply(l,c[3]):1==o.length&&va(o)?l[u]():l.thru(o)}return function(){var e=arguments,r=e[0];if(l&&1==e.length&&Vs(r))return l.plant(r).value();for(var n=0,a=i?t[n].apply(this,e):r;++n<i;)a=t[n].call(this,a);return a}})}function Bi(e,t,n,i,a,s,l,u,c,d){var h=t&o,f=1&t,p=2&t,m=24&t,y=512&t,g=p?r:Fi(e);return function o(){for(var _=arguments.length,v=be(_),b=_;b--;)v[b]=arguments[b];if(m)var w=aa(o),x=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}(v,w);if(i&&(v=Ei(v,i,a,m)),s&&(v=Ai(v,s,l,m)),_-=x,m&&_<d){var I=or(v,w);return $i(e,t,Bi,o.placeholder,n,v,I,u,c,d-_)}var T=f?n:this,E=p?T[e]:e;return _=v.length,u?v=function(e,t){var n=e.length,i=yr(t.length,n),a=Si(e);for(;i--;){var s=t[i];e[i]=ya(s,n)?a[s]:r}return e}(v,u):y&&_>1&&v.reverse(),h&&c<_&&(v.length=c),this&&this!==dt&&this instanceof o&&(E=g||Fi(E)),E.apply(T,v)}}function Ui(e,t){return function(r,n){return function(e,t,r,n){return _n(e,function(e,i,a){t(n,r(e),i,a)}),n}(r,e,t(n),{})}}function ji(e,t){return function(n,i){var a;if(n===r&&i===r)return t;if(n!==r&&(a=n),i!==r){if(a===r)return i;"string"==typeof n||"string"==typeof i?(n=oi(n),i=oi(i)):(n=si(n),i=si(i)),a=e(n,i)}return a}}function Gi(e){return ea(function(t){return t=Mt(t,Kt(sa())),Wn(function(r){var n=this;return e(t,function(e){return It(e,n,r)})})})}function zi(e,t){var n=(t=t===r?" ":oi(t)).length;if(n<2)return n?qn(t,e):t;var i=qn(t,ft(e/ur(t)));return ir(t)?vi(cr(i),0,e).join(""):i.slice(0,e)}function Hi(e){return function(t,n,i){return i&&"number"!=typeof i&&ga(t,n,i)&&(n=i=r),t=po(t),n===r?(n=t,t=0):n=po(n),function(e,t,r,n){for(var i=-1,a=mr(ft((t-e)/(r||1)),0),s=be(a);a--;)s[n?a:++i]=e,e+=r;return s}(t,n,i=i===r?t<n?1:-1:po(i),e)}}function Vi(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=go(t),r=go(r)),e(t,r)}}function $i(e,t,n,i,a,o,l,u,c,d){var h=8&t;t|=h?s:64,4&(t&=~(h?64:s))||(t&=-4);var f=[e,t,a,h?o:r,h?l:r,h?r:o,h?r:l,u,c,d],p=n.apply(r,f);return va(e)&&Sa(p,f),p.placeholder=i,Pa(p,e,t)}function Xi(e){var t=Te[e];return function(e,r){if(e=go(e),(r=null==r?0:yr(mo(r),292))&&Nt(e)){var n=(vo(e)+"e").split("e");return+((n=(vo(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var qi=Tr&&1/lr(new Tr([,-0]))[1]==u?function(e){return new Tr(e)}:ul;function Wi(e){return function(t){var r=ha(t);return r==w?ar(t):r==A?function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=[e,e]}),r}(t):function(e,t){return Mt(t,function(t){return[t,e[t]]})}(t,e(t))}}function Yi(e,t,i,u,c,d,h,f){var p=2&t;if(!p&&"function"!=typeof e)throw new ke(n);var m=u?u.length:0;if(m||(t&=-97,u=c=r),h=h===r?h:mr(mo(h),0),f=f===r?f:mo(f),m-=c?c.length:0,64&t){var y=u,g=c;u=c=r}var _=p?r:na(e),v=[e,t,i,u,c,y,g,d,h,f];if(_&&function(e,t){var r=e[1],n=t[1],i=r|n,s=i<131,u=n==o&&8==r||n==o&&r==l&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==r;if(!s&&!u)return e;1&n&&(e[2]=t[2],i|=1&r?0:4);var c=t[3];if(c){var d=e[3];e[3]=d?Ei(d,c,t[4]):c,e[4]=d?or(e[3],a):t[4]}(c=t[5])&&(d=e[5],e[5]=d?Ai(d,c,t[6]):c,e[6]=d?or(e[5],a):t[6]);(c=t[7])&&(e[7]=c);n&o&&(e[8]=null==e[8]?t[8]:yr(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(v,_),e=v[0],t=v[1],i=v[2],u=v[3],c=v[4],!(f=v[9]=v[9]===r?p?0:e.length:mr(v[9]-m,0))&&24&t&&(t&=-25),t&&1!=t)b=8==t||16==t?function(e,t,n){var i=Fi(e);return function a(){for(var s=arguments.length,o=be(s),l=s,u=aa(a);l--;)o[l]=arguments[l];var c=s<3&&o[0]!==u&&o[s-1]!==u?[]:or(o,u);return(s-=c.length)<n?$i(e,t,Bi,a.placeholder,r,o,c,r,r,n-s):It(this&&this!==dt&&this instanceof a?i:e,this,o)}}(e,t,f):t!=s&&33!=t||c.length?Bi.apply(r,v):function(e,t,r,n){var i=1&t,a=Fi(e);return function t(){for(var s=-1,o=arguments.length,l=-1,u=n.length,c=be(u+o),d=this&&this!==dt&&this instanceof t?a:e;++l<u;)c[l]=n[l];for(;o--;)c[l++]=arguments[++s];return It(d,i?r:this,c)}}(e,t,i,u);else var b=function(e,t,r){var n=1&t,i=Fi(e);return function t(){return(this&&this!==dt&&this instanceof t?i:e).apply(n?r:this,arguments)}}(e,t,i);return Pa((_?Qn:Sa)(b,v),e,t)}function Ki(e,t,n,i){return e===r||js(e,Re[n])&&!Oe.call(i,n)?t:e}function Zi(e,t,n,i,a,s){return eo(e)&&eo(t)&&(s.set(t,e),jn(e,t,r,Zi,s),s.delete(t)),e}function Qi(e){return io(e)?r:e}function Ji(e,t,n,i,a,s){var o=1&n,l=e.length,u=t.length;if(l!=u&&!(o&&u>l))return!1;var c=s.get(e),d=s.get(t);if(c&&d)return c==t&&d==e;var h=-1,f=!0,p=2&n?new $r:r;for(s.set(e,t),s.set(t,e);++h<l;){var m=e[h],y=t[h];if(i)var g=o?i(y,m,h,t,e,s):i(m,y,h,e,t,s);if(g!==r){if(g)continue;f=!1;break}if(p){if(!Dt(t,function(e,t){if(!Qt(p,t)&&(m===e||a(m,e,n,i,s)))return p.push(t)})){f=!1;break}}else if(m!==y&&!a(m,y,n,i,s)){f=!1;break}}return s.delete(e),s.delete(t),f}function ea(e){return Ca(Ta(e,r,$a),e+"")}function ta(e){return xn(e,Mo,ca)}function ra(e){return xn(e,Lo,da)}var na=Sr?function(e){return Sr.get(e)}:ul;function ia(e){for(var t=e.name+"",r=kr[t],n=Oe.call(kr,t)?r.length:0;n--;){var i=r[n],a=i.func;if(null==a||a==e)return i.name}return t}function aa(e){return(Oe.call(Nr,"placeholder")?Nr:e).placeholder}function sa(){var e=Nr.iteratee||al;return e=e===al?Ln:e,arguments.length?e(arguments[0],arguments[1]):e}function oa(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function la(e){for(var t=Mo(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,xa(i)]}return t}function ua(e,t){var n=function(e,t){return null==e?r:e[t]}(e,t);return Mn(n)?n:r}var ca=yt?function(e){return null==e?[]:(e=Ee(e),Ct(yt(e),function(t){return qe.call(e,t)}))}:yl,da=yt?function(e){for(var t=[];e;)Lt(t,ca(e)),e=$e(e);return t}:yl,ha=In;function fa(e,t,r){for(var n=-1,i=(t=gi(t,e)).length,a=!1;++n<i;){var s=Na(t[n]);if(!(a=null!=e&&r(e,s)))break;e=e[s]}return a||++n!=i?a:!!(i=null==e?0:e.length)&&Js(i)&&ya(s,i)&&(Vs(e)||Hs(e))}function pa(e){return"function"!=typeof e.constructor||wa(e)?{}:Br($e(e))}function ma(e){return Vs(e)||Hs(e)||!!(Ye&&e&&e[Ye])}function ya(e,t){var r=typeof e;return!!(t=null==t?c:t)&&("number"==r||"symbol"!=r&&ye.test(e))&&e>-1&&e%1==0&&e<t}function ga(e,t,r){if(!eo(r))return!1;var n=typeof t;return!!("number"==n?Xs(r)&&ya(t,r.length):"string"==n&&t in r)&&js(r[t],e)}function _a(e,t){if(Vs(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!lo(e))||(Q.test(e)||!Z.test(e)||null!=t&&e in Ee(t))}function va(e){var t=ia(e),r=Nr[t];if("function"!=typeof r||!(t in Gr.prototype))return!1;if(e===r)return!0;var n=na(r);return!!n&&e===n[0]}(wr&&ha(new wr(new ArrayBuffer(1)))!=R||xr&&ha(new xr)!=w||Ir&&ha(Ir.resolve())!=T||Tr&&ha(new Tr)!=A||Er&&ha(new Er)!=C)&&(ha=function(e){var t=In(e),n=t==I?e.constructor:r,i=n?Ba(n):"";if(i)switch(i){case Cr:return R;case Pr:return w;case Rr:return T;case Mr:return A;case Lr:return C}return t});var ba=Me?Zs:gl;function wa(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Re)}function xa(e){return e==e&&!eo(e)}function Ia(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==r||e in Ee(n)))}}function Ta(e,t,n){return t=mr(t===r?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=mr(r.length-t,0),s=be(a);++i<a;)s[i]=r[t+i];i=-1;for(var o=be(t+1);++i<t;)o[i]=r[i];return o[t]=n(s),It(e,this,o)}}function Ea(e,t){return t.length<2?e:wn(e,ti(t,0,-1))}function Aa(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Sa=Ra(Qn),ka=ht||function(e,t){return dt.setTimeout(e,t)},Ca=Ra(Jn);function Pa(e,t,r){var n=t+"";return Ca(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(ie,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return At(f,function(r){var n="_."+r[0];t&r[1]&&!Pt(e,n)&&e.push(n)}),e.sort()}(function(e){var t=e.match(ae);return t?t[1].split(se):[]}(n),r)))}function Ra(e){var t=0,n=0;return function(){var i=gr(),a=16-(i-n);if(n=i,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(r,arguments)}}function Ma(e,t){var n=-1,i=e.length,a=i-1;for(t=t===r?i:t;++n<t;){var s=Xn(n,a),o=e[s];e[s]=e[n],e[n]=o}return e.length=t,e}var La,Oa,Fa,Da=(La=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(J,function(e,r,n,i){t.push(n?i.replace(ue,"$1"):r||e)}),t},Oa=Os(La,function(e){return 500===Fa.size&&Fa.clear(),e}),Fa=Oa.cache,Oa);function Na(e){if("string"==typeof e||lo(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ba(e){if(null!=e){try{return Le.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Ua(e){if(e instanceof Gr)return e.clone();var t=new jr(e.__wrapped__,e.__chain__);return t.__actions__=Si(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var ja=Wn(function(e,t){return qs(e)?un(e,mn(t,1,qs,!0)):[]}),Ga=Wn(function(e,t){var n=Ka(t);return qs(n)&&(n=r),qs(e)?un(e,mn(t,1,qs,!0),sa(n,2)):[]}),za=Wn(function(e,t){var n=Ka(t);return qs(n)&&(n=r),qs(e)?un(e,mn(t,1,qs,!0),r,n):[]});function Ha(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:mo(r);return i<0&&(i=mr(n+i,0)),Ut(e,sa(t,3),i)}function Va(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var a=i-1;return n!==r&&(a=mo(n),a=n<0?mr(i+a,0):yr(a,i-1)),Ut(e,sa(t,3),a,!0)}function $a(e){return(null==e?0:e.length)?mn(e,1):[]}function Xa(e){return e&&e.length?e[0]:r}var qa=Wn(function(e){var t=Mt(e,mi);return t.length&&t[0]===e[0]?Sn(t):[]}),Wa=Wn(function(e){var t=Ka(e),n=Mt(e,mi);return t===Ka(n)?t=r:n.pop(),n.length&&n[0]===e[0]?Sn(n,sa(t,2)):[]}),Ya=Wn(function(e){var t=Ka(e),n=Mt(e,mi);return(t="function"==typeof t?t:r)&&n.pop(),n.length&&n[0]===e[0]?Sn(n,r,t):[]});function Ka(e){var t=null==e?0:e.length;return t?e[t-1]:r}var Za=Wn(Qa);function Qa(e,t){return e&&e.length&&t&&t.length?Vn(e,t):e}var Ja=ea(function(e,t){var r=null==e?0:e.length,n=nn(e,t);return $n(e,Mt(t,function(e){return ya(e,r)?+e:e}).sort(Ti)),n});function es(e){return null==e?e:br.call(e)}var ts=Wn(function(e){return li(mn(e,1,qs,!0))}),rs=Wn(function(e){var t=Ka(e);return qs(t)&&(t=r),li(mn(e,1,qs,!0),sa(t,2))}),ns=Wn(function(e){var t=Ka(e);return t="function"==typeof t?t:r,li(mn(e,1,qs,!0),r,t)});function is(e){if(!e||!e.length)return[];var t=0;return e=Ct(e,function(e){if(qs(e))return t=mr(e.length,t),!0}),Wt(t,function(t){return Mt(e,Vt(t))})}function as(e,t){if(!e||!e.length)return[];var n=is(e);return null==t?n:Mt(n,function(e){return It(t,r,e)})}var ss=Wn(function(e,t){return qs(e)?un(e,t):[]}),os=Wn(function(e){return fi(Ct(e,qs))}),ls=Wn(function(e){var t=Ka(e);return qs(t)&&(t=r),fi(Ct(e,qs),sa(t,2))}),us=Wn(function(e){var t=Ka(e);return t="function"==typeof t?t:r,fi(Ct(e,qs),r,t)}),cs=Wn(is);var ds=Wn(function(e){var t=e.length,n=t>1?e[t-1]:r;return n="function"==typeof n?(e.pop(),n):r,as(e,n)});function hs(e){var t=Nr(e);return t.__chain__=!0,t}function fs(e,t){return t(e)}var ps=ea(function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,a=function(t){return nn(t,e)};return!(t>1||this.__actions__.length)&&i instanceof Gr&&ya(n)?((i=i.slice(n,+n+(t?1:0))).__actions__.push({func:fs,args:[a],thisArg:r}),new jr(i,this.__chain__).thru(function(e){return t&&!e.length&&e.push(r),e})):this.thru(a)});var ms=Ci(function(e,t,r){Oe.call(e,r)?++e[r]:rn(e,r,1)});var ys=Di(Ha),gs=Di(Va);function _s(e,t){return(Vs(e)?At:cn)(e,sa(t,3))}function vs(e,t){return(Vs(e)?St:dn)(e,sa(t,3))}var bs=Ci(function(e,t,r){Oe.call(e,r)?e[r].push(t):rn(e,r,[t])});var ws=Wn(function(e,t,r){var n=-1,i="function"==typeof t,a=Xs(e)?be(e.length):[];return cn(e,function(e){a[++n]=i?It(t,e,r):kn(e,t,r)}),a}),xs=Ci(function(e,t,r){rn(e,r,t)});function Is(e,t){return(Vs(e)?Mt:Nn)(e,sa(t,3))}var Ts=Ci(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]});var Es=Wn(function(e,t){if(null==e)return[];var r=t.length;return r>1&&ga(e,t[0],t[1])?t=[]:r>2&&ga(t[0],t[1],t[2])&&(t=[t[0]]),zn(e,mn(t,1),[])}),As=ct||function(){return dt.Date.now()};function Ss(e,t,n){return t=n?r:t,t=e&&null==t?e.length:t,Yi(e,o,r,r,r,r,t)}function ks(e,t){var i;if("function"!=typeof t)throw new ke(n);return e=mo(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=r),i}}var Cs=Wn(function(e,t,r){var n=1;if(r.length){var i=or(r,aa(Cs));n|=s}return Yi(e,n,t,r,i)}),Ps=Wn(function(e,t,r){var n=3;if(r.length){var i=or(r,aa(Ps));n|=s}return Yi(t,n,e,r,i)});function Rs(e,t,i){var a,s,o,l,u,c,d=0,h=!1,f=!1,p=!0;if("function"!=typeof e)throw new ke(n);function m(t){var n=a,i=s;return a=s=r,d=t,l=e.apply(i,n)}function y(e){var n=e-c;return c===r||n>=t||n<0||f&&e-d>=o}function g(){var e=As();if(y(e))return _(e);u=ka(g,function(e){var r=t-(e-c);return f?yr(r,o-(e-d)):r}(e))}function _(e){return u=r,p&&a?m(e):(a=s=r,l)}function v(){var e=As(),n=y(e);if(a=arguments,s=this,c=e,n){if(u===r)return function(e){return d=e,u=ka(g,t),h?m(e):l}(c);if(f)return bi(u),u=ka(g,t),m(c)}return u===r&&(u=ka(g,t)),l}return t=go(t)||0,eo(i)&&(h=!!i.leading,o=(f="maxWait"in i)?mr(go(i.maxWait)||0,t):o,p="trailing"in i?!!i.trailing:p),v.cancel=function(){u!==r&&bi(u),d=0,a=c=s=u=r},v.flush=function(){return u===r?l:_(As())},v}var Ms=Wn(function(e,t){return ln(e,1,t)}),Ls=Wn(function(e,t,r){return ln(e,go(t)||0,r)});function Os(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ke(n);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var s=e.apply(this,n);return r.cache=a.set(i,s)||a,s};return r.cache=new(Os.Cache||Vr),r}function Fs(e){if("function"!=typeof e)throw new ke(n);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Os.Cache=Vr;var Ds=_i(function(e,t){var r=(t=1==t.length&&Vs(t[0])?Mt(t[0],Kt(sa())):Mt(mn(t,1),Kt(sa()))).length;return Wn(function(n){for(var i=-1,a=yr(n.length,r);++i<a;)n[i]=t[i].call(this,n[i]);return It(e,this,n)})}),Ns=Wn(function(e,t){var n=or(t,aa(Ns));return Yi(e,s,r,t,n)}),Bs=Wn(function(e,t){var n=or(t,aa(Bs));return Yi(e,64,r,t,n)}),Us=ea(function(e,t){return Yi(e,l,r,r,r,t)});function js(e,t){return e===t||e!=e&&t!=t}var Gs=Vi(Tn),zs=Vi(function(e,t){return e>=t}),Hs=Cn(function(){return arguments}())?Cn:function(e){return to(e)&&Oe.call(e,"callee")&&!qe.call(e,"callee")},Vs=be.isArray,$s=gt?Kt(gt):function(e){return to(e)&&In(e)==P};function Xs(e){return null!=e&&Js(e.length)&&!Zs(e)}function qs(e){return to(e)&&Xs(e)}var Ws=Tt||gl,Ys=_t?Kt(_t):function(e){return to(e)&&In(e)==g};function Ks(e){if(!to(e))return!1;var t=In(e);return t==_||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!io(e)}function Zs(e){if(!eo(e))return!1;var t=In(e);return t==v||t==b||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Qs(e){return"number"==typeof e&&e==mo(e)}function Js(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=c}function eo(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function to(e){return null!=e&&"object"==typeof e}var ro=vt?Kt(vt):function(e){return to(e)&&ha(e)==w};function no(e){return"number"==typeof e||to(e)&&In(e)==x}function io(e){if(!to(e)||In(e)!=I)return!1;var t=$e(e);if(null===t)return!0;var r=Oe.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Le.call(r)==Be}var ao=bt?Kt(bt):function(e){return to(e)&&In(e)==E};var so=wt?Kt(wt):function(e){return to(e)&&ha(e)==A};function oo(e){return"string"==typeof e||!Vs(e)&&to(e)&&In(e)==S}function lo(e){return"symbol"==typeof e||to(e)&&In(e)==k}var uo=xt?Kt(xt):function(e){return to(e)&&Js(e.length)&&!!it[In(e)]};var co=Vi(Dn),ho=Vi(function(e,t){return e<=t});function fo(e){if(!e)return[];if(Xs(e))return oo(e)?cr(e):Si(e);if(Qe&&e[Qe])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[Qe]());var t=ha(e);return(t==w?ar:t==A?lr:Go)(e)}function po(e){return e?(e=go(e))===u||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function mo(e){var t=po(e),r=t%1;return t==t?r?t-r:t:0}function yo(e){return e?an(mo(e),0,h):0}function go(e){if("number"==typeof e)return e;if(lo(e))return d;if(eo(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=eo(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Yt(e);var r=fe.test(e);return r||me.test(e)?lt(e.slice(2),r?2:8):he.test(e)?d:+e}function _o(e){return ki(e,Lo(e))}function vo(e){return null==e?"":oi(e)}var bo=Pi(function(e,t){if(wa(t)||Xs(t))ki(t,Mo(t),e);else for(var r in t)Oe.call(t,r)&&Qr(e,r,t[r])}),wo=Pi(function(e,t){ki(t,Lo(t),e)}),xo=Pi(function(e,t,r,n){ki(t,Lo(t),e,n)}),Io=Pi(function(e,t,r,n){ki(t,Mo(t),e,n)}),To=ea(nn);var Eo=Wn(function(e,t){e=Ee(e);var n=-1,i=t.length,a=i>2?t[2]:r;for(a&&ga(t[0],t[1],a)&&(i=1);++n<i;)for(var s=t[n],o=Lo(s),l=-1,u=o.length;++l<u;){var c=o[l],d=e[c];(d===r||js(d,Re[c])&&!Oe.call(e,c))&&(e[c]=s[c])}return e}),Ao=Wn(function(e){return e.push(r,Zi),It(Fo,r,e)});function So(e,t,n){var i=null==e?r:wn(e,t);return i===r?n:i}function ko(e,t){return null!=e&&fa(e,t,An)}var Co=Ui(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=Ne.call(t)),e[t]=r},tl(il)),Po=Ui(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=Ne.call(t)),Oe.call(e,t)?e[t].push(r):e[t]=[r]},sa),Ro=Wn(kn);function Mo(e){return Xs(e)?qr(e):On(e)}function Lo(e){return Xs(e)?qr(e,!0):Fn(e)}var Oo=Pi(function(e,t,r){jn(e,t,r)}),Fo=Pi(function(e,t,r,n){jn(e,t,r,n)}),Do=ea(function(e,t){var r={};if(null==e)return r;var n=!1;t=Mt(t,function(t){return t=gi(t,e),n||(n=t.length>1),t}),ki(e,ra(e),r),n&&(r=sn(r,7,Qi));for(var i=t.length;i--;)ui(r,t[i]);return r});var No=ea(function(e,t){return null==e?{}:function(e,t){return Hn(e,t,function(t,r){return ko(e,r)})}(e,t)});function Bo(e,t){if(null==e)return{};var r=Mt(ra(e),function(e){return[e]});return t=sa(t),Hn(e,r,function(e,r){return t(e,r[0])})}var Uo=Wi(Mo),jo=Wi(Lo);function Go(e){return null==e?[]:Zt(e,Mo(e))}var zo=Oi(function(e,t,r){return t=t.toLowerCase(),e+(r?Ho(t):t)});function Ho(e){return Zo(vo(e).toLowerCase())}function Vo(e){return(e=vo(e))&&e.replace(ge,tr).replace(Ze,"")}var $o=Oi(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),Xo=Oi(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),qo=Li("toLowerCase");var Wo=Oi(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()});var Yo=Oi(function(e,t,r){return e+(r?" ":"")+Zo(t)});var Ko=Oi(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),Zo=Li("toUpperCase");function Qo(e,t,n){return e=vo(e),(t=n?r:t)===r?function(e){return tt.test(e)}(e)?function(e){return e.match(Je)||[]}(e):function(e){return e.match(oe)||[]}(e):e.match(t)||[]}var Jo=Wn(function(e,t){try{return It(e,r,t)}catch(n){return Ks(n)?n:new xe(n)}}),el=ea(function(e,t){return At(t,function(t){t=Na(t),rn(e,t,Cs(e[t],e))}),e});function tl(e){return function(){return e}}var rl=Ni(),nl=Ni(!0);function il(e){return e}function al(e){return Ln("function"==typeof e?e:sn(e,1))}var sl=Wn(function(e,t){return function(r){return kn(r,e,t)}}),ol=Wn(function(e,t){return function(r){return kn(e,r,t)}});function ll(e,t,r){var n=Mo(t),i=bn(t,n);null!=r||eo(t)&&(i.length||!n.length)||(r=t,t=e,e=this,i=bn(t,Mo(t)));var a=!(eo(r)&&"chain"in r&&!r.chain),s=Zs(e);return At(i,function(r){var n=t[r];e[r]=n,s&&(e.prototype[r]=function(){var t=this.__chain__;if(a||t){var r=e(this.__wrapped__);return(r.__actions__=Si(this.__actions__)).push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,Lt([this.value()],arguments))})}),e}function ul(){}var cl=Gi(Mt),dl=Gi(kt),hl=Gi(Dt);function fl(e){return _a(e)?Vt(Na(e)):function(e){return function(t){return wn(t,e)}}(e)}var pl=Hi(),ml=Hi(!0);function yl(){return[]}function gl(){return!1}var _l=ji(function(e,t){return e+t},0),vl=Xi("ceil"),bl=ji(function(e,t){return e/t},1),wl=Xi("floor");var xl,Il=ji(function(e,t){return e*t},1),Tl=Xi("round"),El=ji(function(e,t){return e-t},0);return Nr.after=function(e,t){if("function"!=typeof t)throw new ke(n);return e=mo(e),function(){if(--e<1)return t.apply(this,arguments)}},Nr.ary=Ss,Nr.assign=bo,Nr.assignIn=wo,Nr.assignInWith=xo,Nr.assignWith=Io,Nr.at=To,Nr.before=ks,Nr.bind=Cs,Nr.bindAll=el,Nr.bindKey=Ps,Nr.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Vs(e)?e:[e]},Nr.chain=hs,Nr.chunk=function(e,t,n){t=(n?ga(e,t,n):t===r)?1:mr(mo(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var a=0,s=0,o=be(ft(i/t));a<i;)o[s++]=ti(e,a,a+=t);return o},Nr.compact=function(e){for(var t=-1,r=null==e?0:e.length,n=0,i=[];++t<r;){var a=e[t];a&&(i[n++]=a)}return i},Nr.concat=function(){var e=arguments.length;if(!e)return[];for(var t=be(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return Lt(Vs(r)?Si(r):[r],mn(t,1))},Nr.cond=function(e){var t=null==e?0:e.length,r=sa();return e=t?Mt(e,function(e){if("function"!=typeof e[1])throw new ke(n);return[r(e[0]),e[1]]}):[],Wn(function(r){for(var n=-1;++n<t;){var i=e[n];if(It(i[0],this,r))return It(i[1],this,r)}})},Nr.conforms=function(e){return function(e){var t=Mo(e);return function(r){return on(r,e,t)}}(sn(e,1))},Nr.constant=tl,Nr.countBy=ms,Nr.create=function(e,t){var r=Br(e);return null==t?r:tn(r,t)},Nr.curry=function e(t,n,i){var a=Yi(t,8,r,r,r,r,r,n=i?r:n);return a.placeholder=e.placeholder,a},Nr.curryRight=function e(t,n,i){var a=Yi(t,16,r,r,r,r,r,n=i?r:n);return a.placeholder=e.placeholder,a},Nr.debounce=Rs,Nr.defaults=Eo,Nr.defaultsDeep=Ao,Nr.defer=Ms,Nr.delay=Ls,Nr.difference=ja,Nr.differenceBy=Ga,Nr.differenceWith=za,Nr.drop=function(e,t,n){var i=null==e?0:e.length;return i?ti(e,(t=n||t===r?1:mo(t))<0?0:t,i):[]},Nr.dropRight=function(e,t,n){var i=null==e?0:e.length;return i?ti(e,0,(t=i-(t=n||t===r?1:mo(t)))<0?0:t):[]},Nr.dropRightWhile=function(e,t){return e&&e.length?di(e,sa(t,3),!0,!0):[]},Nr.dropWhile=function(e,t){return e&&e.length?di(e,sa(t,3),!0):[]},Nr.fill=function(e,t,n,i){var a=null==e?0:e.length;return a?(n&&"number"!=typeof n&&ga(e,t,n)&&(n=0,i=a),function(e,t,n,i){var a=e.length;for((n=mo(n))<0&&(n=-n>a?0:a+n),(i=i===r||i>a?a:mo(i))<0&&(i+=a),i=n>i?0:yo(i);n<i;)e[n++]=t;return e}(e,t,n,i)):[]},Nr.filter=function(e,t){return(Vs(e)?Ct:pn)(e,sa(t,3))},Nr.flatMap=function(e,t){return mn(Is(e,t),1)},Nr.flatMapDeep=function(e,t){return mn(Is(e,t),u)},Nr.flatMapDepth=function(e,t,n){return n=n===r?1:mo(n),mn(Is(e,t),n)},Nr.flatten=$a,Nr.flattenDeep=function(e){return(null==e?0:e.length)?mn(e,u):[]},Nr.flattenDepth=function(e,t){return(null==e?0:e.length)?mn(e,t=t===r?1:mo(t)):[]},Nr.flip=function(e){return Yi(e,512)},Nr.flow=rl,Nr.flowRight=nl,Nr.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var i=e[t];n[i[0]]=i[1]}return n},Nr.functions=function(e){return null==e?[]:bn(e,Mo(e))},Nr.functionsIn=function(e){return null==e?[]:bn(e,Lo(e))},Nr.groupBy=bs,Nr.initial=function(e){return(null==e?0:e.length)?ti(e,0,-1):[]},Nr.intersection=qa,Nr.intersectionBy=Wa,Nr.intersectionWith=Ya,Nr.invert=Co,Nr.invertBy=Po,Nr.invokeMap=ws,Nr.iteratee=al,Nr.keyBy=xs,Nr.keys=Mo,Nr.keysIn=Lo,Nr.map=Is,Nr.mapKeys=function(e,t){var r={};return t=sa(t,3),_n(e,function(e,n,i){rn(r,t(e,n,i),e)}),r},Nr.mapValues=function(e,t){var r={};return t=sa(t,3),_n(e,function(e,n,i){rn(r,n,t(e,n,i))}),r},Nr.matches=function(e){return Bn(sn(e,1))},Nr.matchesProperty=function(e,t){return Un(e,sn(t,1))},Nr.memoize=Os,Nr.merge=Oo,Nr.mergeWith=Fo,Nr.method=sl,Nr.methodOf=ol,Nr.mixin=ll,Nr.negate=Fs,Nr.nthArg=function(e){return e=mo(e),Wn(function(t){return Gn(t,e)})},Nr.omit=Do,Nr.omitBy=function(e,t){return Bo(e,Fs(sa(t)))},Nr.once=function(e){return ks(2,e)},Nr.orderBy=function(e,t,n,i){return null==e?[]:(Vs(t)||(t=null==t?[]:[t]),Vs(n=i?r:n)||(n=null==n?[]:[n]),zn(e,t,n))},Nr.over=cl,Nr.overArgs=Ds,Nr.overEvery=dl,Nr.overSome=hl,Nr.partial=Ns,Nr.partialRight=Bs,Nr.partition=Ts,Nr.pick=No,Nr.pickBy=Bo,Nr.property=fl,Nr.propertyOf=function(e){return function(t){return null==e?r:wn(e,t)}},Nr.pull=Za,Nr.pullAll=Qa,Nr.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?Vn(e,t,sa(r,2)):e},Nr.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Vn(e,t,r,n):e},Nr.pullAt=Ja,Nr.range=pl,Nr.rangeRight=ml,Nr.rearg=Us,Nr.reject=function(e,t){return(Vs(e)?Ct:pn)(e,Fs(sa(t,3)))},Nr.remove=function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,i=[],a=e.length;for(t=sa(t,3);++n<a;){var s=e[n];t(s,n,e)&&(r.push(s),i.push(n))}return $n(e,i),r},Nr.rest=function(e,t){if("function"!=typeof e)throw new ke(n);return Wn(e,t=t===r?t:mo(t))},Nr.reverse=es,Nr.sampleSize=function(e,t,n){return t=(n?ga(e,t,n):t===r)?1:mo(t),(Vs(e)?Yr:Kn)(e,t)},Nr.set=function(e,t,r){return null==e?e:Zn(e,t,r)},Nr.setWith=function(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:Zn(e,t,n,i)},Nr.shuffle=function(e){return(Vs(e)?Kr:ei)(e)},Nr.slice=function(e,t,n){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&ga(e,t,n)?(t=0,n=i):(t=null==t?0:mo(t),n=n===r?i:mo(n)),ti(e,t,n)):[]},Nr.sortBy=Es,Nr.sortedUniq=function(e){return e&&e.length?ai(e):[]},Nr.sortedUniqBy=function(e,t){return e&&e.length?ai(e,sa(t,2)):[]},Nr.split=function(e,t,n){return n&&"number"!=typeof n&&ga(e,t,n)&&(t=n=r),(n=n===r?h:n>>>0)?(e=vo(e))&&("string"==typeof t||null!=t&&!ao(t))&&!(t=oi(t))&&ir(e)?vi(cr(e),0,n):e.split(t,n):[]},Nr.spread=function(e,t){if("function"!=typeof e)throw new ke(n);return t=null==t?0:mr(mo(t),0),Wn(function(r){var n=r[t],i=vi(r,0,t);return n&&Lt(i,n),It(e,this,i)})},Nr.tail=function(e){var t=null==e?0:e.length;return t?ti(e,1,t):[]},Nr.take=function(e,t,n){return e&&e.length?ti(e,0,(t=n||t===r?1:mo(t))<0?0:t):[]},Nr.takeRight=function(e,t,n){var i=null==e?0:e.length;return i?ti(e,(t=i-(t=n||t===r?1:mo(t)))<0?0:t,i):[]},Nr.takeRightWhile=function(e,t){return e&&e.length?di(e,sa(t,3),!1,!0):[]},Nr.takeWhile=function(e,t){return e&&e.length?di(e,sa(t,3)):[]},Nr.tap=function(e,t){return t(e),e},Nr.throttle=function(e,t,r){var i=!0,a=!0;if("function"!=typeof e)throw new ke(n);return eo(r)&&(i="leading"in r?!!r.leading:i,a="trailing"in r?!!r.trailing:a),Rs(e,t,{leading:i,maxWait:t,trailing:a})},Nr.thru=fs,Nr.toArray=fo,Nr.toPairs=Uo,Nr.toPairsIn=jo,Nr.toPath=function(e){return Vs(e)?Mt(e,Na):lo(e)?[e]:Si(Da(vo(e)))},Nr.toPlainObject=_o,Nr.transform=function(e,t,r){var n=Vs(e),i=n||Ws(e)||uo(e);if(t=sa(t,4),null==r){var a=e&&e.constructor;r=i?n?new a:[]:eo(e)&&Zs(a)?Br($e(e)):{}}return(i?At:_n)(e,function(e,n,i){return t(r,e,n,i)}),r},Nr.unary=function(e){return Ss(e,1)},Nr.union=ts,Nr.unionBy=rs,Nr.unionWith=ns,Nr.uniq=function(e){return e&&e.length?li(e):[]},Nr.uniqBy=function(e,t){return e&&e.length?li(e,sa(t,2)):[]},Nr.uniqWith=function(e,t){return t="function"==typeof t?t:r,e&&e.length?li(e,r,t):[]},Nr.unset=function(e,t){return null==e||ui(e,t)},Nr.unzip=is,Nr.unzipWith=as,Nr.update=function(e,t,r){return null==e?e:ci(e,t,yi(r))},Nr.updateWith=function(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:ci(e,t,yi(n),i)},Nr.values=Go,Nr.valuesIn=function(e){return null==e?[]:Zt(e,Lo(e))},Nr.without=ss,Nr.words=Qo,Nr.wrap=function(e,t){return Ns(yi(t),e)},Nr.xor=os,Nr.xorBy=ls,Nr.xorWith=us,Nr.zip=cs,Nr.zipObject=function(e,t){return pi(e||[],t||[],Qr)},Nr.zipObjectDeep=function(e,t){return pi(e||[],t||[],Zn)},Nr.zipWith=ds,Nr.entries=Uo,Nr.entriesIn=jo,Nr.extend=wo,Nr.extendWith=xo,ll(Nr,Nr),Nr.add=_l,Nr.attempt=Jo,Nr.camelCase=zo,Nr.capitalize=Ho,Nr.ceil=vl,Nr.clamp=function(e,t,n){return n===r&&(n=t,t=r),n!==r&&(n=(n=go(n))==n?n:0),t!==r&&(t=(t=go(t))==t?t:0),an(go(e),t,n)},Nr.clone=function(e){return sn(e,4)},Nr.cloneDeep=function(e){return sn(e,5)},Nr.cloneDeepWith=function(e,t){return sn(e,5,t="function"==typeof t?t:r)},Nr.cloneWith=function(e,t){return sn(e,4,t="function"==typeof t?t:r)},Nr.conformsTo=function(e,t){return null==t||on(e,t,Mo(t))},Nr.deburr=Vo,Nr.defaultTo=function(e,t){return null==e||e!=e?t:e},Nr.divide=bl,Nr.endsWith=function(e,t,n){e=vo(e),t=oi(t);var i=e.length,a=n=n===r?i:an(mo(n),0,i);return(n-=t.length)>=0&&e.slice(n,a)==t},Nr.eq=js,Nr.escape=function(e){return(e=vo(e))&&q.test(e)?e.replace($,rr):e},Nr.escapeRegExp=function(e){return(e=vo(e))&&te.test(e)?e.replace(ee,"\\$&"):e},Nr.every=function(e,t,n){var i=Vs(e)?kt:hn;return n&&ga(e,t,n)&&(t=r),i(e,sa(t,3))},Nr.find=ys,Nr.findIndex=Ha,Nr.findKey=function(e,t){return Bt(e,sa(t,3),_n)},Nr.findLast=gs,Nr.findLastIndex=Va,Nr.findLastKey=function(e,t){return Bt(e,sa(t,3),vn)},Nr.floor=wl,Nr.forEach=_s,Nr.forEachRight=vs,Nr.forIn=function(e,t){return null==e?e:yn(e,sa(t,3),Lo)},Nr.forInRight=function(e,t){return null==e?e:gn(e,sa(t,3),Lo)},Nr.forOwn=function(e,t){return e&&_n(e,sa(t,3))},Nr.forOwnRight=function(e,t){return e&&vn(e,sa(t,3))},Nr.get=So,Nr.gt=Gs,Nr.gte=zs,Nr.has=function(e,t){return null!=e&&fa(e,t,En)},Nr.hasIn=ko,Nr.head=Xa,Nr.identity=il,Nr.includes=function(e,t,r,n){e=Xs(e)?e:Go(e),r=r&&!n?mo(r):0;var i=e.length;return r<0&&(r=mr(i+r,0)),oo(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&jt(e,t,r)>-1},Nr.indexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:mo(r);return i<0&&(i=mr(n+i,0)),jt(e,t,i)},Nr.inRange=function(e,t,n){return t=po(t),n===r?(n=t,t=0):n=po(n),function(e,t,r){return e>=yr(t,r)&&e<mr(t,r)}(e=go(e),t,n)},Nr.invoke=Ro,Nr.isArguments=Hs,Nr.isArray=Vs,Nr.isArrayBuffer=$s,Nr.isArrayLike=Xs,Nr.isArrayLikeObject=qs,Nr.isBoolean=function(e){return!0===e||!1===e||to(e)&&In(e)==y},Nr.isBuffer=Ws,Nr.isDate=Ys,Nr.isElement=function(e){return to(e)&&1===e.nodeType&&!io(e)},Nr.isEmpty=function(e){if(null==e)return!0;if(Xs(e)&&(Vs(e)||"string"==typeof e||"function"==typeof e.splice||Ws(e)||uo(e)||Hs(e)))return!e.length;var t=ha(e);if(t==w||t==A)return!e.size;if(wa(e))return!On(e).length;for(var r in e)if(Oe.call(e,r))return!1;return!0},Nr.isEqual=function(e,t){return Pn(e,t)},Nr.isEqualWith=function(e,t,n){var i=(n="function"==typeof n?n:r)?n(e,t):r;return i===r?Pn(e,t,r,n):!!i},Nr.isError=Ks,Nr.isFinite=function(e){return"number"==typeof e&&Nt(e)},Nr.isFunction=Zs,Nr.isInteger=Qs,Nr.isLength=Js,Nr.isMap=ro,Nr.isMatch=function(e,t){return e===t||Rn(e,t,la(t))},Nr.isMatchWith=function(e,t,n){return n="function"==typeof n?n:r,Rn(e,t,la(t),n)},Nr.isNaN=function(e){return no(e)&&e!=+e},Nr.isNative=function(e){if(ba(e))throw new xe("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Mn(e)},Nr.isNil=function(e){return null==e},Nr.isNull=function(e){return null===e},Nr.isNumber=no,Nr.isObject=eo,Nr.isObjectLike=to,Nr.isPlainObject=io,Nr.isRegExp=ao,Nr.isSafeInteger=function(e){return Qs(e)&&e>=-9007199254740991&&e<=c},Nr.isSet=so,Nr.isString=oo,Nr.isSymbol=lo,Nr.isTypedArray=uo,Nr.isUndefined=function(e){return e===r},Nr.isWeakMap=function(e){return to(e)&&ha(e)==C},Nr.isWeakSet=function(e){return to(e)&&"[object WeakSet]"==In(e)},Nr.join=function(e,t){return null==e?"":$t.call(e,t)},Nr.kebabCase=$o,Nr.last=Ka,Nr.lastIndexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var a=i;return n!==r&&(a=(a=mo(n))<0?mr(i+a,0):yr(a,i-1)),t==t?function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}(e,t,a):Ut(e,zt,a,!0)},Nr.lowerCase=Xo,Nr.lowerFirst=qo,Nr.lt=co,Nr.lte=ho,Nr.max=function(e){return e&&e.length?fn(e,il,Tn):r},Nr.maxBy=function(e,t){return e&&e.length?fn(e,sa(t,2),Tn):r},Nr.mean=function(e){return Ht(e,il)},Nr.meanBy=function(e,t){return Ht(e,sa(t,2))},Nr.min=function(e){return e&&e.length?fn(e,il,Dn):r},Nr.minBy=function(e,t){return e&&e.length?fn(e,sa(t,2),Dn):r},Nr.stubArray=yl,Nr.stubFalse=gl,Nr.stubObject=function(){return{}},Nr.stubString=function(){return""},Nr.stubTrue=function(){return!0},Nr.multiply=Il,Nr.nth=function(e,t){return e&&e.length?Gn(e,mo(t)):r},Nr.noConflict=function(){return dt._===this&&(dt._=Ue),this},Nr.noop=ul,Nr.now=As,Nr.pad=function(e,t,r){e=vo(e);var n=(t=mo(t))?ur(e):0;if(!t||n>=t)return e;var i=(t-n)/2;return zi(mt(i),r)+e+zi(ft(i),r)},Nr.padEnd=function(e,t,r){e=vo(e);var n=(t=mo(t))?ur(e):0;return t&&n<t?e+zi(t-n,r):e},Nr.padStart=function(e,t,r){e=vo(e);var n=(t=mo(t))?ur(e):0;return t&&n<t?zi(t-n,r)+e:e},Nr.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),_r(vo(e).replace(re,""),t||0)},Nr.random=function(e,t,n){if(n&&"boolean"!=typeof n&&ga(e,t,n)&&(t=n=r),n===r&&("boolean"==typeof t?(n=t,t=r):"boolean"==typeof e&&(n=e,e=r)),e===r&&t===r?(e=0,t=1):(e=po(e),t===r?(t=e,e=0):t=po(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var a=vr();return yr(e+a*(t-e+ot("1e-"+((a+"").length-1))),t)}return Xn(e,t)},Nr.reduce=function(e,t,r){var n=Vs(e)?Ot:Xt,i=arguments.length<3;return n(e,sa(t,4),r,i,cn)},Nr.reduceRight=function(e,t,r){var n=Vs(e)?Ft:Xt,i=arguments.length<3;return n(e,sa(t,4),r,i,dn)},Nr.repeat=function(e,t,n){return t=(n?ga(e,t,n):t===r)?1:mo(t),qn(vo(e),t)},Nr.replace=function(){var e=arguments,t=vo(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Nr.result=function(e,t,n){var i=-1,a=(t=gi(t,e)).length;for(a||(a=1,e=r);++i<a;){var s=null==e?r:e[Na(t[i])];s===r&&(i=a,s=n),e=Zs(s)?s.call(e):s}return e},Nr.round=Tl,Nr.runInContext=e,Nr.sample=function(e){return(Vs(e)?Wr:Yn)(e)},Nr.size=function(e){if(null==e)return 0;if(Xs(e))return oo(e)?ur(e):e.length;var t=ha(e);return t==w||t==A?e.size:On(e).length},Nr.snakeCase=Wo,Nr.some=function(e,t,n){var i=Vs(e)?Dt:ri;return n&&ga(e,t,n)&&(t=r),i(e,sa(t,3))},Nr.sortedIndex=function(e,t){return ni(e,t)},Nr.sortedIndexBy=function(e,t,r){return ii(e,t,sa(r,2))},Nr.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var n=ni(e,t);if(n<r&&js(e[n],t))return n}return-1},Nr.sortedLastIndex=function(e,t){return ni(e,t,!0)},Nr.sortedLastIndexBy=function(e,t,r){return ii(e,t,sa(r,2),!0)},Nr.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var r=ni(e,t,!0)-1;if(js(e[r],t))return r}return-1},Nr.startCase=Yo,Nr.startsWith=function(e,t,r){return e=vo(e),r=null==r?0:an(mo(r),0,e.length),t=oi(t),e.slice(r,r+t.length)==t},Nr.subtract=El,Nr.sum=function(e){return e&&e.length?qt(e,il):0},Nr.sumBy=function(e,t){return e&&e.length?qt(e,sa(t,2)):0},Nr.template=function(e,t,n){var i=Nr.templateSettings;n&&ga(e,t,n)&&(t=r),e=vo(e),t=xo({},t,i,Ki);var a,s,o=xo({},t.imports,i.imports,Ki),l=Mo(o),u=Zt(o,l),c=0,d=t.interpolate||_e,h="__p += '",f=Ae((t.escape||_e).source+"|"+d.source+"|"+(d===K?ce:_e).source+"|"+(t.evaluate||_e).source+"|$","g"),p="//# sourceURL="+(Oe.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++nt+"]")+"\n";e.replace(f,function(t,r,n,i,o,l){return n||(n=i),h+=e.slice(c,l).replace(ve,nr),r&&(a=!0,h+="' +\n__e("+r+") +\n'"),o&&(s=!0,h+="';\n"+o+";\n__p += '"),n&&(h+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),c=l+t.length,t}),h+="';\n";var m=Oe.call(t,"variable")&&t.variable;if(m){if(le.test(m))throw new xe("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(s?h.replace(G,""):h).replace(z,"$1").replace(H,"$1;"),h="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var y=Jo(function(){return Ie(l,p+"return "+h).apply(r,u)});if(y.source=h,Ks(y))throw y;return y},Nr.times=function(e,t){if((e=mo(e))<1||e>c)return[];var r=h,n=yr(e,h);t=sa(t),e-=h;for(var i=Wt(n,t);++r<e;)t(r);return i},Nr.toFinite=po,Nr.toInteger=mo,Nr.toLength=yo,Nr.toLower=function(e){return vo(e).toLowerCase()},Nr.toNumber=go,Nr.toSafeInteger=function(e){return e?an(mo(e),-9007199254740991,c):0===e?e:0},Nr.toString=vo,Nr.toUpper=function(e){return vo(e).toUpperCase()},Nr.trim=function(e,t,n){if((e=vo(e))&&(n||t===r))return Yt(e);if(!e||!(t=oi(t)))return e;var i=cr(e),a=cr(t);return vi(i,Jt(i,a),er(i,a)+1).join("")},Nr.trimEnd=function(e,t,n){if((e=vo(e))&&(n||t===r))return e.slice(0,dr(e)+1);if(!e||!(t=oi(t)))return e;var i=cr(e);return vi(i,0,er(i,cr(t))+1).join("")},Nr.trimStart=function(e,t,n){if((e=vo(e))&&(n||t===r))return e.replace(re,"");if(!e||!(t=oi(t)))return e;var i=cr(e);return vi(i,Jt(i,cr(t))).join("")},Nr.truncate=function(e,t){var n=30,i="...";if(eo(t)){var a="separator"in t?t.separator:a;n="length"in t?mo(t.length):n,i="omission"in t?oi(t.omission):i}var s=(e=vo(e)).length;if(ir(e)){var o=cr(e);s=o.length}if(n>=s)return e;var l=n-ur(i);if(l<1)return i;var u=o?vi(o,0,l).join(""):e.slice(0,l);if(a===r)return u+i;if(o&&(l+=u.length-l),ao(a)){if(e.slice(l).search(a)){var c,d=u;for(a.global||(a=Ae(a.source,vo(de.exec(a))+"g")),a.lastIndex=0;c=a.exec(d);)var h=c.index;u=u.slice(0,h===r?l:h)}}else if(e.indexOf(oi(a),l)!=l){var f=u.lastIndexOf(a);f>-1&&(u=u.slice(0,f))}return u+i},Nr.unescape=function(e){return(e=vo(e))&&X.test(e)?e.replace(V,hr):e},Nr.uniqueId=function(e){var t=++Fe;return vo(e)+t},Nr.upperCase=Ko,Nr.upperFirst=Zo,Nr.each=_s,Nr.eachRight=vs,Nr.first=Xa,ll(Nr,(xl={},_n(Nr,function(e,t){Oe.call(Nr.prototype,t)||(xl[t]=e)}),xl),{chain:!1}),Nr.VERSION="4.17.21",At(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){Nr[e].placeholder=Nr}),At(["drop","take"],function(e,t){Gr.prototype[e]=function(n){n=n===r?1:mr(mo(n),0);var i=this.__filtered__&&!t?new Gr(this):this.clone();return i.__filtered__?i.__takeCount__=yr(n,i.__takeCount__):i.__views__.push({size:yr(n,h),type:e+(i.__dir__<0?"Right":"")}),i},Gr.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),At(["filter","map","takeWhile"],function(e,t){var r=t+1,n=1==r||3==r;Gr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:sa(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}}),At(["head","last"],function(e,t){var r="take"+(t?"Right":"");Gr.prototype[e]=function(){return this[r](1).value()[0]}}),At(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");Gr.prototype[e]=function(){return this.__filtered__?new Gr(this):this[r](1)}}),Gr.prototype.compact=function(){return this.filter(il)},Gr.prototype.find=function(e){return this.filter(e).head()},Gr.prototype.findLast=function(e){return this.reverse().find(e)},Gr.prototype.invokeMap=Wn(function(e,t){return"function"==typeof e?new Gr(this):this.map(function(r){return kn(r,e,t)})}),Gr.prototype.reject=function(e){return this.filter(Fs(sa(e)))},Gr.prototype.slice=function(e,t){e=mo(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Gr(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(n=(t=mo(t))<0?n.dropRight(-t):n.take(t-e)),n)},Gr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Gr.prototype.toArray=function(){return this.take(h)},_n(Gr.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),a=Nr[i?"take"+("last"==t?"Right":""):t],s=i||/^find/.test(t);a&&(Nr.prototype[t]=function(){var t=this.__wrapped__,o=i?[1]:arguments,l=t instanceof Gr,u=o[0],c=l||Vs(t),d=function(e){var t=a.apply(Nr,Lt([e],o));return i&&h?t[0]:t};c&&n&&"function"==typeof u&&1!=u.length&&(l=c=!1);var h=this.__chain__,f=!!this.__actions__.length,p=s&&!h,m=l&&!f;if(!s&&c){t=m?t:new Gr(this);var y=e.apply(t,o);return y.__actions__.push({func:fs,args:[d],thisArg:r}),new jr(y,h)}return p&&m?e.apply(this,o):(y=this.thru(d),p?i?y.value()[0]:y.value():y)})}),At(["pop","push","shift","sort","splice","unshift"],function(e){var t=Ce[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);Nr.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var i=this.value();return t.apply(Vs(i)?i:[],e)}return this[r](function(r){return t.apply(Vs(r)?r:[],e)})}}),_n(Gr.prototype,function(e,t){var r=Nr[t];if(r){var n=r.name+"";Oe.call(kr,n)||(kr[n]=[]),kr[n].push({name:t,func:r})}}),kr[Bi(r,2).name]=[{name:"wrapper",func:r}],Gr.prototype.clone=function(){var e=new Gr(this.__wrapped__);return e.__actions__=Si(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Si(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Si(this.__views__),e},Gr.prototype.reverse=function(){if(this.__filtered__){var e=new Gr(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Gr.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=Vs(e),n=t<0,i=r?e.length:0,a=function(e,t,r){var n=-1,i=r.length;for(;++n<i;){var a=r[n],s=a.size;switch(a.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=yr(t,e+s);break;case"takeRight":e=mr(e,t-s)}}return{start:e,end:t}}(0,i,this.__views__),s=a.start,o=a.end,l=o-s,u=n?o:s-1,c=this.__iteratees__,d=c.length,h=0,f=yr(l,this.__takeCount__);if(!r||!n&&i==l&&f==l)return hi(e,this.__actions__);var p=[];e:for(;l--&&h<f;){for(var m=-1,y=e[u+=t];++m<d;){var g=c[m],_=g.iteratee,v=g.type,b=_(y);if(2==v)y=b;else if(!b){if(1==v)continue e;break e}}p[h++]=y}return p},Nr.prototype.at=ps,Nr.prototype.chain=function(){return hs(this)},Nr.prototype.commit=function(){return new jr(this.value(),this.__chain__)},Nr.prototype.next=function(){this.__values__===r&&(this.__values__=fo(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?r:this.__values__[this.__index__++]}},Nr.prototype.plant=function(e){for(var t,n=this;n instanceof Ur;){var i=Ua(n);i.__index__=0,i.__values__=r,t?a.__wrapped__=i:t=i;var a=i;n=n.__wrapped__}return a.__wrapped__=e,t},Nr.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Gr){var t=e;return this.__actions__.length&&(t=new Gr(this)),(t=t.reverse()).__actions__.push({func:fs,args:[es],thisArg:r}),new jr(t,this.__chain__)}return this.thru(es)},Nr.prototype.toJSON=Nr.prototype.valueOf=Nr.prototype.value=function(){return hi(this.__wrapped__,this.__actions__)},Nr.prototype.first=Nr.prototype.head,Qe&&(Nr.prototype[Qe]=function(){return this}),Nr}();ft?((ft.exports=fr)._=fr,ht._=fr):dt._=fr}).call(Tt)}(oc,oc.exports);var lc=oc.exports;const uc={class:"setting-type"},cc={class:"set-list"},dc={class:"label"},hc={class:"label"},fc={class:"label"},pc={class:"label"},mc={class:"label"},yc={class:"label"},gc={class:"label"},_c={class:"label"},vc={class:"set-list"},bc={class:"label"},wc={class:"label"},xc={class:"label"},Ic={class:"label"},Tc={class:"label"},Ec={class:"label"},Ac={class:"label"},Sc={class:"label"},kc={class:"set-list"},Cc={class:"label"},Pc={class:"label"},Rc=n({__name:"PlaySetting",setup(e){const t=r(),n=s([]),i=s(t.showSpectrums),a={standard:{label:"标准音质",tip:"标准音质 128kbps",value:"standard"},higher:{label:"较高音质",tip:"较高音质 328kbps",value:"higher"},exhigh:{label:"极高 (HQ)",tip:"近CD品质的细节体验，最高320kbps",value:"exhigh"},lossless:{label:"无损 (SQ)",tip:"高保真无损音质，最高48kHz/16bit",value:"lossless"},hires:{label:"高解析度无损 (Hi-Res)",tip:"更饱满清晰的高解析度音质，最高192kHz/24bit",value:"hires"},jyeffect:{label:"高清臻音 (Spatial Audio)",tip:"声音听感增强，96kHz/24bit",value:"jyeffect"},jymaster:{label:"超清母带 (Master)",tip:"还原音频细节，192kHz/24bit",value:"jymaster"},sky:{label:"沉浸环绕声 (Surround Audio)",tip:"沉浸式空间环绕音感，最高5.1声道",value:"sky"},vivid:{label:"臻音全景声 (Audio Vivid)",tip:"极致沉浸三维空间音频，最高7.1.4声道",value:"vivid"},dolby:{label:"杜比全景声 (Dolby Atmos)",tip:"杜比全景声音乐，沉浸式聆听体验",value:"dolby"}},o=(e,r)=>{t.showSpectrums?window.$dialog.warning({title:"音频通道占用",content:"由于系统限制，切换音频输出设备会导致音乐频谱失效，将会关闭音乐频谱，并将于热重载后生效（ 请点击右上角的设置菜单中的热重载按钮 ），是否继续？",positiveText:"继续",negativeText:"取消",closeOnEsc:!1,closable:!1,maskClosable:!1,autoFocus:!1,onPositiveClick:()=>{i.value=!1,t.showSpectrums=!1,$l.toggleOutputDevice(e),window.$message.success(`已切换输出设备为 ${r.label}`)},onNegativeClick:()=>{t.playDevice="default"}}):($l.toggleOutputDevice(e),window.$message.success(`已切换输出设备为 ${r.label}`))},l=e=>{if(e){if("default"!==t.playDevice)return void window.$dialog.warning({title:"音频通道占用",content:"开启音乐频谱会导致自定义音频输出设备失效，将会恢复默认输出设备，是否继续开启？",positiveText:"开启",negativeText:"取消",onPositiveClick:()=>{i.value=!0,t.showSpectrums=!0,t.playDevice="default",$l.toggleOutputDevice("default")}});i.value=!0,t.showSpectrums=!0}else i.value=!1,t.showSpectrums=!1};return d(()=>{Y&&(async()=>{const e=await navigator.mediaDevices.enumerateDevices(),t=lc.uniqBy(e.filter(e=>"audiooutput"===e.kind&&e.deviceId),"groupId").filter(e=>"audiooutput"===e.kind);n.value=t.map(e=>({label:e.label,value:e.deviceId}))})()}),(e,r)=>{const s=Xe,u=_e,c=wt,d=Be,p=ie,y=vt,g=ne;return f(),F("div",uc,[N("div",cc,[v(s,{prefix:"bar"},{default:_(()=>r[17]||(r[17]=[oe(" 歌曲播放 ")])),_:1,__:[17]}),v(d,{class:"set-item"},{default:_(()=>[N("div",dc,[v(u,{class:"name"},{default:_(()=>r[18]||(r[18]=[oe("自动播放")])),_:1,__:[18]}),m(Y)?(f(),h(u,{key:0,class:"tip",depth:3},{default:_(()=>r[19]||(r[19]=[oe("启动时是否自动播放")])),_:1,__:[19]})):(f(),h(u,{key:1,class:"tip",depth:3},{default:_(()=>r[20]||(r[20]=[oe("网页端不支持该功能")])),_:1,__:[20]}))]),v(c,{value:m(t).autoPlay,"onUpdate:value":r[0]||(r[0]=e=>m(t).autoPlay=e),class:"set",round:!1,disabled:!m(Y)},null,8,["value","disabled"])]),_:1}),v(d,{class:"set-item"},{default:_(()=>[N("div",hc,[v(u,{class:"name"},{default:_(()=>r[21]||(r[21]=[oe("记忆上次播放位置")])),_:1,__:[21]}),v(u,{class:"tip",depth:3},{default:_(()=>r[22]||(r[22]=[oe("程序启动时恢复上次播放位置")])),_:1,__:[22]})]),v(c,{value:m(t).memoryLastSeek,"onUpdate:value":r[1]||(r[1]=e=>m(t).memoryLastSeek=e),class:"set",round:!1},null,8,["value"])]),_:1}),v(d,{class:"set-item"},{default:_(()=>[N("div",fc,[v(u,{class:"name"},{default:_(()=>r[23]||(r[23]=[oe("音乐渐入渐出")])),_:1,__:[23]})]),v(c,{value:m(t).songVolumeFade,"onUpdate:value":r[2]||(r[2]=e=>m(t).songVolumeFade=e),class:"set",round:!1},null,8,["value"])]),_:1}),v(y,{show:m(t).songVolumeFade},{default:_(()=>[v(d,{class:"set-item"},{default:_(()=>[N("div",pc,[v(u,{class:"name"},{default:_(()=>r[24]||(r[24]=[oe("渐入渐出时长")])),_:1,__:[24]}),v(u,{class:"tip",depth:3},{default:_(()=>r[25]||(r[25]=[oe("单位 ms，最小 200，最大 2000")])),_:1,__:[25]})]),v(p,{value:m(t).songVolumeFadeTime,"onUpdate:value":r[3]||(r[3]=e=>m(t).songVolumeFadeTime=e),min:200,max:2e3,"show-button":!1,class:"set",placeholder:"请输入渐入渐出时长"},{suffix:_(()=>r[26]||(r[26]=[oe(" ms ")])),_:1},8,["value"])]),_:1})]),_:1},8,["show"]),v(d,{class:"set-item"},{default:_(()=>[N("div",mc,[v(u,{class:"name"},{default:_(()=>r[27]||(r[27]=[oe("在线歌曲音质")])),_:1,__:[27]}),v(u,{class:"tip",depth:3},{default:_(()=>[oe(le(a[m(t).songLevel].tip),1)]),_:1})]),v(g,{value:m(t).songLevel,"onUpdate:value":r[4]||(r[4]=e=>m(t).songLevel=e),options:Object.values(a),"render-option":m(Jt),class:"set"},null,8,["value","options","render-option"])]),_:1}),m(Y)?me("",!0):(f(),h(d,{key:0,class:"set-item"},{default:_(()=>[N("div",yc,[v(u,{class:"name"},{default:_(()=>r[28]||(r[28]=[oe("播放试听")])),_:1,__:[28]}),v(u,{class:"tip",depth:3},{default:_(()=>r[29]||(r[29]=[oe("是否在非会员状态下播放试听歌曲")])),_:1,__:[29]})]),v(c,{value:m(t).playSongDemo,"onUpdate:value":r[5]||(r[5]=e=>m(t).playSongDemo=e),class:"set",round:!1},null,8,["value"])]),_:1})),m(Y)?(f(),h(d,{key:1,class:"set-item"},{default:_(()=>[N("div",gc,[v(u,{class:"name"},{default:_(()=>r[30]||(r[30]=[oe("音乐解锁")])),_:1,__:[30]}),v(u,{class:"tip",depth:3},{default:_(()=>r[31]||(r[31]=[oe("在无法正常播放时进行替换，可能会与原曲不符")])),_:1,__:[31]})]),v(c,{value:m(t).useSongUnlock,"onUpdate:value":r[6]||(r[6]=e=>m(t).useSongUnlock=e),class:"set",round:!1},null,8,["value"])]),_:1})):me("",!0),m(Y)?(f(),h(d,{key:2,class:"set-item"},{default:_(()=>[N("div",_c,[v(u,{class:"name"},{default:_(()=>r[32]||(r[32]=[oe("音频输出设备")])),_:1,__:[32]}),v(u,{class:"tip",depth:3},{default:_(()=>r[33]||(r[33]=[oe("新增或移除音频设备后请重新打开设置")])),_:1,__:[33]})]),v(g,{value:m(t).playDevice,"onUpdate:value":[r[7]||(r[7]=e=>m(t).playDevice=e),o],class:"set",options:m(n),"render-option":m(Jt)},null,8,["value","options","render-option"])]),_:1})):me("",!0)]),N("div",vc,[v(s,{prefix:"bar"},{default:_(()=>r[34]||(r[34]=[oe(" 播放器 ")])),_:1,__:[34]}),v(d,{class:"set-item"},{default:_(()=>[N("div",bc,[v(u,{class:"name"},{default:_(()=>r[35]||(r[35]=[oe("播放器样式")])),_:1,__:[35]}),v(u,{class:"tip",depth:3},{default:_(()=>r[36]||(r[36]=[oe("播放器主体样式")])),_:1,__:[36]})]),v(g,{value:m(t).playerType,"onUpdate:value":r[8]||(r[8]=e=>m(t).playerType=e),options:[{label:"封面模式",value:"cover"},{label:"唱片模式",value:"record"}],class:"set"},null,8,["value"])]),_:1}),v(d,{class:"set-item"},{default:_(()=>[N("div",wc,[v(u,{class:"name"},{default:_(()=>r[37]||(r[37]=[oe("播放器背景样式")])),_:1,__:[37]}),v(u,{class:"tip",depth:3},{default:_(()=>r[38]||(r[38]=[oe("切换播放器背景类型")])),_:1,__:[38]})]),v(g,{value:m(t).playerBackgroundType,"onUpdate:value":r[9]||(r[9]=e=>m(t).playerBackgroundType=e),options:[{label:"流体效果",disabled:!0,value:"animation"},{label:"封面模糊",value:"blur"},{label:"封面主色",disabled:!0,value:"color"},{label:"无背景",disabled:!0,value:"none"}],class:"set"},null,8,["value"])]),_:1}),v(d,{class:"set-item"},{default:_(()=>[N("div",xc,[v(u,{class:"name"},{default:_(()=>r[39]||(r[39]=[oe("全屏播放器留存")])),_:1,__:[39]}),v(u,{class:"tip",depth:3},{default:_(()=>r[40]||(r[40]=[oe("在播放器收起时是否销毁，开启将会增大内存占用")])),_:1,__:[40]})]),v(c,{value:m(t).fullPlayerCache,"onUpdate:value":r[10]||(r[10]=e=>m(t).fullPlayerCache=e),class:"set",round:!1},null,8,["value"])]),_:1}),v(d,{class:"set-item"},{default:_(()=>[N("div",Ic,[v(u,{class:"name"},{default:_(()=>r[41]||(r[41]=[oe("显示前奏倒计时")])),_:1,__:[41]}),v(u,{class:"tip",depth:3},{default:_(()=>r[42]||(r[42]=[oe("部分歌曲前奏可能存在显示错误")])),_:1,__:[42]})]),v(c,{value:m(t).countDownShow,"onUpdate:value":r[11]||(r[11]=e=>m(t).countDownShow=e),class:"set",round:!1},null,8,["value"])]),_:1}),v(d,{class:"set-item"},{default:_(()=>[N("div",Tc,[v(u,{class:"name"},{default:_(()=>r[43]||(r[43]=[oe("底栏歌词显示")])),_:1,__:[43]}),v(u,{class:"tip",depth:3},{default:_(()=>r[44]||(r[44]=[oe("在播放时将歌手信息更改为歌词")])),_:1,__:[44]})]),v(c,{value:m(t).barLyricShow,"onUpdate:value":r[12]||(r[12]=e=>m(t).barLyricShow=e),class:"set",round:!1},null,8,["value"])]),_:1}),v(d,{class:"set-item"},{default:_(()=>[N("div",Ec,[v(u,{class:"name"},{default:_(()=>r[45]||(r[45]=[oe("播放列表歌曲数量")])),_:1,__:[45]})]),v(c,{value:m(t).showPlaylistCount,"onUpdate:value":r[13]||(r[13]=e=>m(t).showPlaylistCount=e),class:"set",round:!1},null,8,["value"])]),_:1}),v(d,{class:"set-item"},{default:_(()=>[N("div",Ac,[v(u,{class:"name"},{default:_(()=>r[46]||(r[46]=[oe("动态封面")])),_:1,__:[46]}),v(u,{class:"tip",depth:3},{default:_(()=>r[47]||(r[47]=[oe("可展示部分歌曲的动态封面，仅在封面模式有效")])),_:1,__:[47]})]),v(c,{value:m(t).dynamicCover,"onUpdate:value":r[14]||(r[14]=e=>m(t).dynamicCover=e),disabled:1!==m(K)(),round:!1,class:"set"},null,8,["value","disabled"])]),_:1}),v(d,{class:"set-item"},{default:_(()=>[N("div",Sc,[v(u,{class:"name"},{default:_(()=>r[48]||(r[48]=[oe("音乐频谱")])),_:1,__:[48]}),v(u,{class:"tip",depth:3},{default:_(()=>[oe(le(m(Y)?"开启音乐频谱会影响性能或音频输出切换等功能，如遇问题请关闭":"开启可能会造成无法播放或其他问题，如遇任何问题请关闭"),1)]),_:1})]),v(c,{class:"set",value:m(i),round:!1,"onUpdate:value":l},null,8,["value"])]),_:1})]),N("div",kc,[v(s,{prefix:"bar"},{default:_(()=>r[49]||(r[49]=[oe(" 系统集成 ")])),_:1,__:[49]}),v(d,{class:"set-item"},{default:_(()=>[N("div",Cc,[v(u,{class:"name"},{default:_(()=>r[50]||(r[50]=[oe("开启 SMTC")])),_:1,__:[50]}),v(u,{class:"tip",depth:3},{default:_(()=>r[51]||(r[51]=[oe("与系统集成以显示媒体元数据")])),_:1,__:[51]})]),v(c,{value:m(t).smtcOpen,"onUpdate:value":r[15]||(r[15]=e=>m(t).smtcOpen=e),class:"set",round:!1},null,8,["value"])]),_:1}),v(d,{class:"set-item"},{default:_(()=>[N("div",Pc,[v(u,{class:"name"},{default:_(()=>r[52]||(r[52]=[oe("输出高清封面")])),_:1,__:[52]}),v(u,{class:"tip",depth:3},{default:_(()=>r[53]||(r[53]=[oe("开启 SMTC 时是否输出高清封面")])),_:1,__:[53]})]),v(c,{value:m(t).smtcOutputHighQualityCover,"onUpdate:value":r[16]||(r[16]=e=>m(t).smtcOutputHighQualityCover=e),class:"set",round:!1,disabled:!m(t).smtcOpen||!0},null,8,["value","disabled"])]),_:1})])])}}}),Mc={class:"setting-type"},Lc={class:"set-list"},Oc={class:"label"},Fc={class:"label"},Dc={class:"label"},Nc={class:"label"},Bc={class:"label"},Uc={class:"set-list"},jc={class:"label"},Gc={class:"label"},zc={class:"label"},Hc={class:"label"},Vc={key:0,class:"set-list"},$c={class:"label"},Xc={class:"label"},qc={class:"label"},Wc={class:"label"},Yc={class:"label"},Kc={class:"label"},Zc={class:"label"},Qc={class:"label"},Jc=n({__name:"GeneralSetting",setup(e){const t=Ke(),n=r(),a=i(),o=s([]),l=s(n.useOnlineService),u=[...Object.keys(Yi).map(e=>({value:e,label:Yi[e].name,style:{color:Yi[e].color}}))],c=e=>{e||window.electron.ipcRenderer.send("set-bar","none")},p=e=>{e?window.$dialog.warning({title:"开启在线服务",content:"确定开启软件的在线服务？更改将在重启后生效！",positiveText:"开启",negativeText:"取消",onPositiveClick:()=>{l.value=!0,n.useOnlineService=!0}}):window.$dialog.warning({title:"关闭在线服务",content:"确定关闭软件的在线服务？将关闭包括搜索、登录、在线音乐播放等在内的全部在线服务，软件将会变为本地播放器！更改将在软件重启后生效！",positiveText:"关闭",negativeText:"取消",onPositiveClick:()=>{l.value=!1,n.useOnlineService=!1,window.electron.ipcRenderer.send("win-reload")},onNegativeClick:()=>{l.value=!0,n.useOnlineService=!0}})},y=e=>{e&&$l.getCoverColor(t.songCover)};return d(()=>{Y&&(async()=>{(await window.electron.ipcRenderer.invoke("get-all-fonts")).map(e=>{e=e.replace(/^['"]+|['"]+$/g,""),o.value.push({label:e,value:e,style:{fontFamily:e}})}),o.value.unshift({label:"系统默认",value:"default",style:{fontFamily:"v-sans, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'"}})})()}),(e,t)=>{const r=Xe,i=_e,s=ne,d=Be,g=Zt,b=vt,w=wt,x=se,I=Se;return f(),F("div",Mc,[N("div",Lc,[v(r,{prefix:"bar"},{default:_(()=>t[18]||(t[18]=[oe(" 主题设置 ")])),_:1,__:[18]}),v(d,{class:"set-item"},{default:_(()=>[N("div",Oc,[v(i,{class:"name"},{default:_(()=>t[19]||(t[19]=[oe("主题模式")])),_:1,__:[19]}),v(i,{class:"tip",depth:3},{default:_(()=>t[20]||(t[20]=[oe("调整全局主题明暗模式")])),_:1,__:[20]})]),v(s,{value:m(n).themeMode,"onUpdate:value":t[0]||(t[0]=e=>m(n).themeMode=e),class:"set",options:[{label:"跟随系统",value:"auto"},{label:"浅色模式",value:"light"},{label:"深色模式",value:"dark"}]},null,8,["value"])]),_:1}),v(d,{class:"set-item"},{default:_(()=>[N("div",Fc,[v(i,{class:"name"},{default:_(()=>t[21]||(t[21]=[oe("全局主题色")])),_:1,__:[21]}),v(i,{class:"tip",depth:3},{default:_(()=>t[22]||(t[22]=[oe("更改全局主题色")])),_:1,__:[22]})]),v(s,{value:m(n).themeColorType,"onUpdate:value":t[1]||(t[1]=e=>m(n).themeColorType=e),class:"set",disabled:m(n).themeFollowCover,options:u},null,8,["value","disabled"])]),_:1}),v(b,{show:"custom"===m(n).themeColorType&&!m(n).themeFollowCover},{default:_(()=>[v(d,{class:"set-item"},{default:_(()=>[N("div",Dc,[v(i,{class:"name"},{default:_(()=>t[23]||(t[23]=[oe("自定义主题色")])),_:1,__:[23]}),v(i,{class:"tip",depth:3},{default:_(()=>t[24]||(t[24]=[oe("可在此处自定义全局主题色")])),_:1,__:[24]})]),v(g,{value:m(n).themeCustomColor,"onUpdate:value":t[2]||(t[2]=e=>m(n).themeCustomColor=e),class:"set","show-alpha":!1,modes:["hex"]},null,8,["value"])]),_:1})]),_:1},8,["show"]),v(d,{class:"set-item"},{default:_(()=>[N("div",Nc,[v(i,{class:"name"},{default:_(()=>t[25]||(t[25]=[oe("全局着色")])),_:1,__:[25]}),v(i,{class:"tip",depth:3},{default:_(()=>t[26]||(t[26]=[oe("是否将主题色应用至所有元素")])),_:1,__:[26]})]),v(w,{value:m(n).themeGlobalColor,"onUpdate:value":[t[3]||(t[3]=e=>m(n).themeGlobalColor=e),y],class:"set",round:!1},null,8,["value"])]),_:1}),v(d,{class:"set-item"},{default:_(()=>[N("div",Bc,[v(i,{class:"name"},{default:_(()=>t[27]||(t[27]=[oe("全局动态取色")])),_:1,__:[27]}),v(i,{class:"tip",depth:3},{default:_(()=>t[28]||(t[28]=[oe("主题色是否跟随封面，目前感觉不好看")])),_:1,__:[28]})]),v(w,{value:m(n).themeFollowCover,"onUpdate:value":t[4]||(t[4]=e=>m(n).themeFollowCover=e),disabled:m(Qe)(m(a).songCoverTheme),class:"set",round:!1},null,8,["value","disabled"])]),_:1})]),N("div",Uc,[v(r,{prefix:"bar"},{default:_(()=>t[29]||(t[29]=[oe(" 杂项设置 ")])),_:1,__:[29]}),v(d,{class:"set-item"},{default:_(()=>[N("div",jc,[v(i,{class:"name"},{default:_(()=>t[30]||(t[30]=[oe("显示搜索历史")])),_:1,__:[30]})]),v(w,{class:"set",value:m(n).showSearchHistory,"onUpdate:value":t[5]||(t[5]=e=>m(n).showSearchHistory=e),round:!1},null,8,["value"])]),_:1}),v(d,{class:"set-item"},{default:_(()=>[N("div",Gc,[v(i,{class:"name"},{default:_(()=>t[31]||(t[31]=[oe("侧边栏显示封面")])),_:1,__:[31]}),v(i,{class:"tip",depth:3},{default:_(()=>t[32]||(t[32]=[oe("是否显示歌单的封面，如果有")])),_:1,__:[32]})]),v(w,{class:"set",value:m(n).menuShowCover,"onUpdate:value":t[6]||(t[6]=e=>m(n).menuShowCover=e),round:!1},null,8,["value"])]),_:1}),v(d,{class:"set-item"},{default:_(()=>[N("div",zc,[v(i,{class:"name"},{default:_(()=>t[33]||(t[33]=[oe("开启页面缓存")])),_:1,__:[33]}),v(i,{class:"tip",depth:3},{default:_(()=>t[34]||(t[34]=[oe("是否开启部分页面的缓存，这将会增加内存占用")])),_:1,__:[34]})]),v(w,{class:"set",value:m(n).useKeepAlive,"onUpdate:value":t[7]||(t[7]=e=>m(n).useKeepAlive=e),round:!1},null,8,["value"])]),_:1}),v(d,{class:"set-item"},{default:_(()=>[N("div",Hc,[v(i,{class:"name"},{default:_(()=>t[35]||(t[35]=[oe("页面切换动画")])),_:1,__:[35]}),v(i,{class:"tip",depth:3},{default:_(()=>t[36]||(t[36]=[oe("选择页面切换时的动画效果")])),_:1,__:[36]})]),v(s,{value:m(n).routeAnimation,"onUpdate:value":t[8]||(t[8]=e=>m(n).routeAnimation=e),options:[{label:"无动画",value:"none"},{label:"淡入淡出",value:"fade"},{label:"缩放",value:"zoom"},{label:"滑动",value:"slide"},{label:"上浮",value:"up"}],class:"set"},null,8,["value"])]),_:1})]),m(Y)?(f(),F("div",Vc,[v(r,{prefix:"bar"},{default:_(()=>t[37]||(t[37]=[oe(" 系统设置 ")])),_:1,__:[37]}),v(d,{class:"set-item"},{default:_(()=>[N("div",$c,[v(i,{class:"name"},{default:_(()=>t[38]||(t[38]=[oe("在线服务")])),_:1,__:[38]}),v(i,{class:"tip",depth:3},{default:_(()=>t[39]||(t[39]=[oe("是否开启软件的在线服务")])),_:1,__:[39]})]),v(w,{class:"set",disabled:!0,value:m(l),round:!1,"onUpdate:value":p},null,8,["value"])]),_:1}),v(d,{class:"set-item"},{default:_(()=>[N("div",Xc,[v(i,{class:"name"},{default:_(()=>t[40]||(t[40]=[oe("自定义字体")])),_:1,__:[40]}),v(i,{class:"tip",depth:3},{default:_(()=>t[41]||(t[41]=[oe(" 更改软件内全局字体 ")])),_:1,__:[41]})]),v(I,null,{default:_(()=>[v(pe,{name:"fade",mode:"out-in"},{default:_(()=>["default"!==m(n).globalFont?(f(),h(x,{key:0,type:"primary",strong:"",secondary:"",onClick:t[9]||(t[9]=e=>m(n).globalFont="default")},{default:_(()=>t[42]||(t[42]=[oe(" 恢复默认 ")])),_:1,__:[42]})):me("",!0)]),_:1}),v(s,{value:m(n).globalFont,"onUpdate:value":t[10]||(t[10]=e=>m(n).globalFont=e),options:m(o),class:"set"},null,8,["value","options"])]),_:1})]),_:1}),v(d,{class:"set-item"},{default:_(()=>[N("div",qc,[v(i,{class:"name"},{default:_(()=>t[43]||(t[43]=[oe("歌词区域字体")])),_:1,__:[43]}),v(i,{class:"tip",depth:3},{default:_(()=>t[44]||(t[44]=[oe(" 是否独立更改歌词区域字体 ")])),_:1,__:[44]})]),v(I,null,{default:_(()=>[v(pe,{name:"fade",mode:"out-in"},{default:_(()=>["follow"!==m(n).LyricFont?(f(),h(x,{key:0,type:"primary",strong:"",secondary:"",onClick:t[11]||(t[11]=e=>m(n).LyricFont="follow")},{default:_(()=>t[45]||(t[45]=[oe(" 恢复默认 ")])),_:1,__:[45]})):me("",!0)]),_:1}),v(s,{value:m(n).LyricFont,"onUpdate:value":t[12]||(t[12]=e=>m(n).LyricFont=e),options:[{label:"跟随全局",value:"follow"},...m(o).filter(e=>"default"!==e.value)],class:"set"},null,8,["value","options"])]),_:1})]),_:1}),v(d,{class:"set-item"},{default:_(()=>[N("div",Wc,[v(i,{class:"name"},{default:_(()=>t[46]||(t[46]=[oe("关闭软件时")])),_:1,__:[46]}),v(i,{class:"tip",depth:3},{default:_(()=>t[47]||(t[47]=[oe("选择关闭软件的方式")])),_:1,__:[47]})]),v(s,{value:m(n).closeAppMethod,"onUpdate:value":t[13]||(t[13]=e=>m(n).closeAppMethod=e),disabled:m(n).showCloseAppTip,options:[{label:"最小化到任务栏",value:"hide"},{label:"直接退出",value:"close"}],class:"set"},null,8,["value","disabled"])]),_:1}),v(d,{class:"set-item"},{default:_(()=>[N("div",Yc,[v(i,{class:"name"},{default:_(()=>t[48]||(t[48]=[oe("每次关闭前都进行提醒")])),_:1,__:[48]})]),v(w,{value:m(n).showCloseAppTip,"onUpdate:value":t[14]||(t[14]=e=>m(n).showCloseAppTip=e),class:"set",round:!1},null,8,["value"])]),_:1}),v(d,{class:"set-item"},{default:_(()=>[N("div",Kc,[v(i,{class:"name"},{default:_(()=>t[49]||(t[49]=[oe("任务栏显示播放进度")])),_:1,__:[49]}),v(i,{class:"tip",depth:3},{default:_(()=>t[50]||(t[50]=[oe(" 是否在任务栏显示歌曲播放进度 ")])),_:1,__:[50]})]),v(w,{value:m(n).showTaskbarProgress,"onUpdate:value":[t[15]||(t[15]=e=>m(n).showTaskbarProgress=e),c],class:"set",round:!1},null,8,["value"])]),_:1}),v(d,{class:"set-item"},{default:_(()=>[N("div",Zc,[v(i,{class:"name"},{default:_(()=>t[51]||(t[51]=[oe("阻止系统息屏")])),_:1,__:[51]}),v(i,{class:"tip",depth:3},{default:_(()=>t[52]||(t[52]=[oe("是否在播放界面阻止系统息屏")])),_:1,__:[52]})]),v(w,{value:m(n).preventSleep,"onUpdate:value":t[16]||(t[16]=e=>m(n).preventSleep=e),class:"set",round:!1},null,8,["value"])]),_:1}),v(d,{class:"set-item"},{default:_(()=>[N("div",Qc,[v(i,{class:"name"},{default:_(()=>t[53]||(t[53]=[oe("自动检查更新")])),_:1,__:[53]}),v(i,{class:"tip",depth:3},{default:_(()=>t[54]||(t[54]=[oe("在每次开启软件时自动检查更新")])),_:1,__:[54]})]),v(w,{value:m(n).checkUpdateOnStart,"onUpdate:value":t[17]||(t[17]=e=>m(n).checkUpdateOnStart=e),class:"set",round:!1},null,8,["value"])]),_:1})])):me("",!0)])}}}),ed={class:"setting"},td={class:"set-left"},rd={class:"title"},nd={class:"power"},id=B(n({__name:"MainSetting",props:{type:{}},setup(e){const t=e,r=s(null),n=s(t.type),i=[{key:"general",label:"常规设置",icon:er("SettingsLine")},{key:"play",label:"播放设置",icon:er("Music")},{key:"lyrics",label:"歌词设置",icon:er("Lyrics")},{key:"keyboard",label:"快捷键设置",show:Y,icon:er("Keyboard")},{key:"local",label:"本地与下载",show:Y,icon:er("Storage")},{key:"other",label:"其他设置",icon:er("SettingsOther")},{key:"about",label:"关于",icon:er("Info")}],a=()=>{window.open(Yl.github)};return(e,t)=>{const s=He,o=_e,l=tr,u=ae,c=Jc,d=Rc,p=sc,y=Fu,g=ku,b=mu,w=ru,x=Ye;return f(),F("div",ed,[N("div",td,[N("div",rd,[v(s,null,{default:_(()=>t[2]||(t[2]=[oe("设置")])),_:1,__:[2]}),v(o,{depth:3},{default:_(()=>t[3]||(t[3]=[oe("个性化与全局设置")])),_:1,__:[3]})]),v(l,{value:m(n),"onUpdate:value":[t[0]||(t[0]=e=>Te(n)?n.value=e:null),t[1]||(t[1]=e=>m(r)?.scrollTo({top:0,behavior:"smooth"}))],options:i,indent:10},null,8,["value"]),N("div",nd,[v(o,{class:"author",depth:2,onClick:a},{default:_(()=>[v(u,{name:"Github",size:20}),oe(" "+le(m(Yl).author),1)]),_:1}),v(o,{class:"name"},{default:_(()=>t[4]||(t[4]=[oe("SPlayer")])),_:1,__:[4]}),v(o,{class:"version",depth:"3"},{default:_(()=>[oe(le(m(Yl).version),1)]),_:1})])]),v(x,{ref_key:"setScrollbar",ref:r,class:"set-content","content-style":{overflow:"hidden",padding:"40px 0"}},{default:_(()=>[v(pe,{name:"fade",mode:"out-in"},{default:_(()=>["general"===m(n)?(f(),h(c,{key:0})):"play"===m(n)?(f(),h(d,{key:1})):"lyrics"===m(n)?(f(),h(p,{key:2})):"keyboard"===m(n)?(f(),h(y,{key:3})):"local"===m(n)?(f(),h(g,{key:4})):"other"===m(n)?(f(),h(b,{key:5})):"about"===m(n)?(f(),h(w,{key:6})):(f(),h(o,{key:7,class:"error"},{default:_(()=>t[5]||(t[5]=[oe("暂无该设置项")])),_:1,__:[5]}))]),_:1})]),_:1},512)])}}}),[["__scopeId","data-v-c127b7c2"]]),ad={class:"update-app"},sd=["innerHTML"],od={key:1,class:"markdown-body"},ld=B(n({__name:"UpdateApp",props:{data:{}},emits:["close"],setup(e,{emit:t}){const r=t,n=s(!1),i=s(0),a=async()=>{n.value=!0,window.electron.ipcRenderer.send("start-download-update"),window.electron.ipcRenderer.on("download-progress",(e,t)=>{i.value=Number((t?.percent||0).toFixed(2))}),window.electron.ipcRenderer.on("update-error",(e,t)=>{n.value=!1,console.error("Error updating:",t),window.$message.error("更新过程出现错误")}),window.electron.ipcRenderer.on("update-downloaded",()=>{r("close"),n.value=!1,window.$message.success("更新下载完成")})},o=()=>{r("close"),window.open(Yl.github+"/releases","_blank")};return(e,t)=>{const s=Ve,l=ae,u=Se,c=Ye,d=se;return f(),F("div",ad,[v(u,{size:10,class:"version",align:"center"},{default:_(()=>[v(s,{bordered:!1,type:"primary"},{default:_(()=>[oe(le(m(Yl)?.version||"v0.0.0"),1)]),_:1}),v(l,{name:"Right"}),v(s,{bordered:!1,type:"warning"},{default:_(()=>[oe(le(e.data?.version||"v0.0.0"),1)]),_:1})]),_:1}),v(c,{style:{"max-height":"500px"}},{default:_(()=>[e.data?.releaseNotes?(f(),F("div",{key:0,class:"markdown-body",innerHTML:e.data.releaseNotes},null,8,sd)):(f(),F("div",od,"暂无更新日志"))]),_:1}),v(u,{class:"menu",justify:"end"},{default:_(()=>[v(d,{strong:"",secondary:"",onClick:t[0]||(t[0]=e=>r("close"))},{default:_(()=>t[1]||(t[1]=[oe(" 取消 ")])),_:1,__:[1]}),v(d,{type:"warning",strong:"",secondary:"",onClick:o},{default:_(()=>t[2]||(t[2]=[oe(" 前往下载 ")])),_:1,__:[2]}),v(d,{loading:m(n),type:"primary",onClick:a},{default:_(()=>[oe(le(m(n)?`下载中 ${m(i)}%`:"立即更新"),1)]),_:1},8,["loading"])]),_:1})])}}}),[["__scopeId","data-v-673f8de6"]]),ud={class:"exclude"},cd=B(n({__name:"ExcludeKeywords",setup(e){const t=r();return(e,r)=>{const n=Ie,i=rr;return f(),F("div",ud,[v(n,{"show-icon":!1},{default:_(()=>r[1]||(r[1]=[oe("请勿添加过多，以免影响歌词的正常显示")])),_:1,__:[1]}),v(i,{value:m(t).excludeKeywords,"onUpdate:value":r[0]||(r[0]=e=>m(t).excludeKeywords=e)},null,8,["value"])])}}}),[["__scopeId","data-v-c7f8d114"]]),dd=(e=!1)=>{e&&window.$message.warning("请登录后使用");const t=window.$modal.create({preset:"card",transformOrigin:"center",autoFocus:!1,maskClosable:!1,closeOnEsc:!1,closable:!1,style:{width:"400px"},content:()=>S(no,{onClose:()=>t.destroy()})})},hd=e=>{if(tt(e)&&1===e.length){const t=e[0].id;return void Bs.push({name:"artist",query:{id:t}})}const t=window.$modal.create({preset:"card",transformOrigin:"center",autoFocus:!1,style:{width:"600px"},title:"跳转到歌手",content:()=>S(lo,{artist:e,onClose:()=>t.destroy()})})},fd=e=>{const t=window.$modal.create({preset:"card",transformOrigin:"center",autoFocus:!1,style:{width:"600px"},title:"编辑歌曲信息",content:()=>S(mo,{song:e,onClose:()=>t.destroy()})})},pd=(e,t)=>{if(!e.length)return window.$message.warning("请正确选择歌曲");if(!K()&&!t)return dd();const r=window.$modal.create({preset:"card",transformOrigin:"center",autoFocus:!1,style:{width:"600px"},title:"添加到歌单",content:()=>S(vo,{data:e,isLocal:t,onClose:()=>r.destroy()})})},md=(e,t,r)=>{window.$modal.create({preset:"card",transformOrigin:"center",autoFocus:!1,style:{maxWidth:"70vw"},title:"批量操作",content:()=>S(wo,{data:e,isLocal:t,playListId:r})})},yd=(e,t)=>{const r=window.$modal.create({preset:"card",transformOrigin:"center",autoFocus:!1,style:{width:"600px"},title:"云盘歌曲纠正",content:()=>S(Oo,{id:e,index:t,onClose:()=>r.destroy()})})},gd=()=>{const e=window.$modal.create({preset:"card",transformOrigin:"center",autoFocus:!1,style:{width:"600px"},title:"新建歌单",content:()=>S(No,{onClose:()=>e.destroy()})})},_d=(e,t,r)=>{const n=window.$modal.create({preset:"card",transformOrigin:"center",autoFocus:!1,style:{width:"600px"},title:"编辑歌单",content:()=>S(jo,{id:e,data:t,onSuccess:()=>{n.destroy(),nr(r)&&r()}})})},vd=e=>{const t=ke();if(!K())return dd();if(!e)return window.$message.warning("请正确选择歌曲");if(0!==e.free&&0===t.userData.vipType&&!e?.pc)return window.$message.warning("账号会员等级不足，请提升权限");const r=window.$modal.create({preset:"card",transformOrigin:"center",autoFocus:!1,style:{width:"600px"},title:"下载歌曲",content:()=>S(Wl,{id:e.id,onClose:()=>r.destroy()})})},bd=(e="general")=>{window.$modal.create({preset:"card",transformOrigin:"center",autoFocus:!1,maskClosable:!1,closeOnEsc:!1,bordered:!0,class:"main-setting",content:()=>S(id,{type:e})})},wd=()=>{window.$modal.create({preset:"card",transformOrigin:"center",autoFocus:!1,style:{width:"600px"},title:"歌词排除内容",content:()=>S(cd)})},xd={class:"player-control"},Id={class:"center"},Td={class:"btn"},Ed={key:0,class:"btn-icon"},Ad={key:1,class:"btn-icon"},Sd={class:"btn-icon"},kd={class:"slider"},Cd=n({__name:"PlayerControl",setup(e){const t=ke(),r=Ke(),n=i(),a=()=>{const e=dr(n.progress,n.duration);n.playStatus=!0,$l.setSeek(e),$l.play()};return(e,i)=>{const s=ae,o=Se,l=se,u=lr,c=_e,d=ur,p=ir("debounce");return f(),F("div",xd,[v(pe,{name:"fade",mode:"out-in"},{default:_(()=>[ar(N("div",{class:"control-content",onClick:i[14]||(i[14]=Wt(()=>{},["stop"]))},[v(o,{class:"left",align:"center"},{default:_(()=>["radio"!==m(r).playSong.type?(f(),F("div",{key:0,class:"menu-icon",onClick:i[0]||(i[0]=e=>m(sr)(m(r).playSong,!m(t).isLikeSong(m(r).playSong.id)))},[v(s,{name:m(t).isLikeSong(m(r).playSong.id)?"Favorite":"FavoriteBorder"},null,8,["name"])])):me("",!0),N("div",{class:"menu-icon",onClick:i[1]||(i[1]=Wt(e=>m(pd)([m(r).playSong],!!m(r).playSong.path),["stop"]))},[v(s,{name:"AddList"})]),N("div",{class:"menu-icon",onClick:i[2]||(i[2]=Wt(e=>m(vd)(m(r).playSong),["stop"]))},[v(s,{name:"Download"})])]),_:1}),N("div",Id,[N("div",Td,[m(n).personalFmMode?ar((f(),F("div",Ed,[v(s,{class:"icon",size:18,name:"ThumbDown"})])),[[p,()=>m($l).personalFMTrash(m(r).personalFMSong?.id)]]):ar((f(),F("div",Ad,[v(s,{size:26,name:"SkipPrev"})])),[[p,()=>m($l).nextOrPrev("prev")]]),v(l,{loading:m(n).playLoading,focusable:!1,keyboard:!1,class:"play-pause",type:"primary",strong:"",secondary:"",circle:"",onClick:i[3]||(i[3]=Wt(e=>m($l).playOrPause(),["stop"]))},{icon:_(()=>[v(pe,{name:"fade",mode:"out-in"},{default:_(()=>[(f(),h(s,{key:m(n).playStatus?"Pause":"Play",name:m(n).playStatus?"Pause":"Play",size:28},null,8,["name"]))]),_:1})]),_:1},8,["loading"]),ar((f(),F("div",Sd,[v(s,{size:26,name:"SkipNext"})])),[[p,()=>m($l).nextOrPrev("next")]])]),N("div",kd,[N("span",null,le(m(or)(m(n).currentTime)),1),v(u,{value:m(n).progress,"onUpdate:value":i[4]||(i[4]=e=>m(n).progress=e),step:.01,min:0,max:100,tooltip:!1,keyboard:!1,class:"player-slider",onDragstart:i[5]||(i[5]=e=>m($l).pause(!1)),onDragend:a},null,8,["value"]),N("span",null,le(m(or)(m(n).duration)),1)])]),v(o,{class:"right",align:"center",justify:"end"},{default:_(()=>[m(r).playSong.path||m(n).pureLyricMode?me("",!0):(f(),F("div",{key:0,class:"menu-icon",onClick:i[6]||(i[6]=Wt(e=>m(n).showPlayerComment=!m(n).showPlayerComment,["stop"]))},[v(s,{depth:m(n).showPlayerComment?1:3,name:"Message"},null,8,["depth"])])),N("div",{class:"menu-icon",onClick:i[7]||(i[7]=Wt(e=>m($l).togglePlayMode(!1),["stop"]))},[v(s,{name:m(n).playModeIcon},null,8,["name"])]),v(d,{"show-arrow":!1,style:D({"--main-color":m(n).mainColor}),raw:""},{trigger:_(()=>[N("div",{class:"menu-icon",onClick:i[8]||(i[8]=Wt((...e)=>m($l).toggleMute&&m($l).toggleMute(...e),["stop"])),onWheel:i[9]||(i[9]=(...e)=>m($l).setVolume&&m($l).setVolume(...e))},[v(s,{name:m(n).playVolumeIcon},null,8,["name"])],32)]),default:_(()=>[N("div",{class:"volume-change",onWheel:i[12]||(i[12]=(...e)=>m($l).setVolume&&m($l).setVolume(...e))},[v(u,{value:m(n).playVolume,"onUpdate:value":[i[10]||(i[10]=e=>m(n).playVolume=e),i[11]||(i[11]=e=>m($l).setVolume(e))],tooltip:!1,min:0,max:1,step:.01,vertical:""},null,8,["value"]),v(c,{class:"slider-num"},{default:_(()=>[oe(le(m(n).playVolumePercent)+"%",1)]),_:1})],32)]),_:1},8,["style"]),m(n).personalFmMode?me("",!0):(f(),F("div",{key:1,class:"menu-icon",onClick:i[13]||(i[13]=Wt(e=>m(n).playListShow=!m(n).playListShow,["stop"]))},[v(s,{name:"PlayList"})]))]),_:1})],512),[[cr,m(n).playerMetaShow]])]),_:1})])}}}),Pd=B(Cd,[["__scopeId","data-v-0f4c1278"]]),Rd=B(n({__name:"CountDown",props:{start:{},duration:{},seek:{},playing:{type:Boolean}},setup(e){const t=e,r=o(()=>t.seek+.5<t.start+t.duration),n=e=>{const r=t.duration/3,n=t.seek-t.start;if(n<=0)return 0;if(n<r*(e+1)){return.1+.7*(1-(n-r*e)/r)}return.1};return(e,t)=>(f(),h(pe,{name:"fade",mode:"out-in"},{default:_(()=>[m(r)?(f(),F("div",{key:0,style:D({animationPlayState:e.playing?"running":"paused"}),class:"count-down"},[(f(),F(De,null,Ne(3,e=>N("div",{key:e,class:"point",style:D({opacity:n(e-1)})},null,4)),64))],4)):me("",!0)]),_:1}))}}),[["__scopeId","data-v-de8f8857"]]),Md={id:"lrc-placeholder",class:"placeholder"},Ld=["id","onClick"],Od={class:"content"},Fd={class:"word"},Dd={key:0,class:"tran"},Nd={key:1,class:"roma"},Bd={key:2,class:"count-down-content"},Ud={id:"lrc-placeholder",class:"placeholder"},jd=["id","onClick"],Gd={class:"content"},zd={key:0,class:"tran"},Hd={key:1,class:"roma"},Vd=n({__name:"MainLyric",setup(e){const t=Ke(),n=i(),a=r(),l=s(!1),c=s(null),p=s($l.getSeek()),{pause:y,resume:g}=L(()=>{p.value=$l.getSeek()+n.currentTimeOffset}),b=o(()=>{const e=n.currentTimeOffset;return e>0?`+${e}`:e}),w=()=>{l.value=!1,x(n.lyricIndex)},x=e=>{const t=document.getElementById(e>=0?"lrc-"+e:"lrc-placeholder");if(t&&(!l.value||n.pureLyricMode)){const e=t.parentElement;if(!e)return;const r=t.offsetTop-e.offsetTop-80;"center"===a.lyricsScrollPosition?t?.scrollIntoView({behavior:"smooth",block:"center"}):c.value?.scrollTo({top:r,behavior:"smooth"})}},I=e=>{e&&(l.value=!1,$l.setSeek(e),$l.play())};return u(()=>n.lyricIndex,e=>x(e)),d(()=>{g(),H().then(()=>{x(n.lyricIndex)})}),O(()=>{y()}),(e,r)=>{const i=Rd,s=ae,o=Se;return f(),F("div",{style:D({"--lrc-size":m(a).lyricFontSize+"px","--lrc-tran-size":m(a).lyricTranFontSize+"px","--lrc-roma-size":m(a).lyricRomaFontSize+"px","--lrc-bold":m(a).lyricFontBold?"bold":"normal","font-family":"follow"!==m(a).LyricFont?m(a).LyricFont:"",cursor:m(n).playerMetaShow?"auto":"none"}),class:he(["lyric",m(a).playerType,m(a).lyricsPosition,{pure:m(n).pureLyricMode}]),onMouseenter:r[6]||(r[6]=e=>l.value=!!m(a).lrcMousePause),onMouseleave:w},[v(pe,{name:"fade",mode:"out-in"},{default:_(()=>[(f(),F("div",{key:m(t).songLyric.lrcData?.[0]?.content,class:"lyric-content",onAfterEnter:r[0]||(r[0]=e=>x(m(n).lyricIndex)),onAfterLeave:r[1]||(r[1]=e=>x(m(n).lyricIndex))},[v(m(Ye),{ref_key:"lyricScroll",ref:c,class:"lyric-scroll"},{default:_(()=>[m(a).showYrc&&m(t).isHasYrc?(f(),F(De,{key:0},[N("div",Md,[m(a).countDownShow?(f(),h(i,{key:0,start:0,duration:m(t).songLyric.yrcData[0].time||0,seek:m(p),playing:m(n).playStatus},null,8,["duration","seek","playing"])):me("",!0)]),(f(!0),F(De,null,Ne(m(t).songLyric.yrcData,(e,r)=>(f(),F("div",{key:r,id:`lrc-${r}`,class:he(["lrc-line","is-yrc",{on:m(n).lyricIndex===r}]),style:D({filter:m(a).lyricsBlur?`blur(${Math.min(1.8*Math.abs(m(n).lyricIndex-r),10)}px)`:"blur(0)"}),onClick:t=>I(e.time)},[N("div",Od,[(f(!0),F(De,null,Ne(e.contents,(e,t)=>{return f(),F("div",{key:t,class:he({"content-text":!0,"content-long":e.duration>=1.5&&m(p)<=e.endTime,"end-with-space":e.endsWithSpace})},[N("span",Fd,le(e.content),1),N("span",{class:"filler",style:D((i=e,s=r,a.showYrcAnimation?n.lyricIndex!==s?{transitionDuration:"0ms, 0ms, 0.35s",transitionDelay:"0ms"}:!1===n.playLoading&&i.time+i.duration-p.value>0?{transitionDuration:"0s, 0s, 0.35s",transitionDelay:"0ms",WebkitMaskPositionX:100-Math.max((p.value-i.time)/i.duration*100,0)+"%"}:{transitionDuration:`${i.duration}ms, ${.8*i.duration}ms, 0.35s`,transitionDelay:`${i.time-p.value}ms, ${i.time-p.value+.5*i.duration}ms, 0ms`}:n.lyricIndex!==s||!1===n.playLoading&&i.time>=p.value?{opacity:0}:{opacity:1}))},le(e.content),5)],2);var i,s}),128))]),e.tran&&m(a).showTran?(f(),F("span",Dd,le(e.tran),1)):me("",!0),e.roma&&m(a).showRoma?(f(),F("span",Nd,le(e.roma),1)):me("",!0),m(a).countDownShow&&m(t).songLyric.yrcData[r+1]?.time-e.endTime>=10?(f(),F("div",Bd,[v(i,{start:e.endTime,duration:m(t).songLyric.yrcData[r+1]?.time-e.endTime||0,seek:m(p),playing:m(n).playStatus},null,8,["start","duration","seek","playing"])])):me("",!0)],14,Ld))),128)),r[7]||(r[7]=N("div",{class:"placeholder"},null,-1))],64)):m(t).isHasLrc?(f(),F(De,{key:1},[N("div",Ud,[m(a).countDownShow?(f(),h(i,{key:0,start:0,duration:m(t).songLyric.lrcData[0].time||0,seek:m(p),playing:m(n).playStatus},null,8,["duration","seek","playing"])):me("",!0)]),(f(!0),F(De,null,Ne(m(t).songLyric.lrcData,(e,t)=>(f(),F("div",{key:t,id:`lrc-${t}`,class:he(["lrc-line","is-lrc",{on:m(n).lyricIndex===t}]),style:D({filter:m(a).lyricsBlur?`blur(${Math.min(1.8*Math.abs(m(n).lyricIndex-t),10)}px)`:"blur(0)"}),onClick:t=>I(e.time)},[N("span",Gd,le(e.content),1),e.tran&&m(a).showTran?(f(),F("span",zd,le(e.tran),1)):me("",!0),e.roma&&m(a).showRoma?(f(),F("span",Hd,le(e.roma),1)):me("",!0)],14,jd))),128)),r[8]||(r[8]=N("div",{class:"placeholder"},null,-1))],64)):me("",!0)]),_:1},512)],32))]),_:1}),v(o,{class:"menu",justify:"center",vertical:""},{default:_(()=>[N("div",{class:"menu-icon",onClick:r[2]||(r[2]=e=>m(n).currentTimeOffset-=.5)},[v(s,{name:"Replay5"})]),N("span",{class:"time",onClick:r[3]||(r[3]=e=>m(n).currentTimeOffset=0)},le(m(b)),1),N("div",{class:"menu-icon",onClick:r[4]||(r[4]=e=>m(n).currentTimeOffset+=.5)},[v(s,{name:"Forward5"})]),r[9]||(r[9]=N("div",{class:"divider"},null,-1)),N("div",{class:"menu-icon",onClick:r[5]||(r[5]=e=>m(bd)("lyrics"))},[v(s,{name:"Settings"})])]),_:1,__:[9]})],38)}}}),$d=B(Vd,[["__scopeId","data-v-d9fac121"]]);var Xd=(e=>(e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2",e))(Xd||{}),qd=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS",e))(qd||{}),Wd=(e=>(e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e))(Wd||{}),Yd=(e=>(e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR",e))(Yd||{}),Kd=(e=>(e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e))(Kd||{}),Zd=(e=>(e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e))(Zd||{}),Qd=(e=>(e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e))(Qd||{}),Jd=(e=>(e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT",e))(Jd||{}),eh=(e=>(e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT",e))(eh||{}),th=(e=>(e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR",e))(th||{}),rh=(e=>(e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e))(rh||{}),nh=(e=>(e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL",e))(nh||{}),ih=(e=>(e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",e))(ih||{}),ah=(e=>(e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT",e))(ah||{}),sh=(e=>(e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL",e))(sh||{}),oh=(e=>(e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp",e))(oh||{}),lh=(e=>(e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR",e))(lh||{}),uh=(e=>(e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH",e))(uh||{}),ch=(e=>(e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e))(ch||{});const dh={createCanvas:(e,t)=>{const r=document.createElement("canvas");return r.width=e,r.height=t,r},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(e,t)=>fetch(e,t),parseXML:e=>(new DOMParser).parseFromString(e,"text/xml")},hh={ADAPTER:dh,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var fh=/iPhone/i,ph=/iPod/i,mh=/iPad/i,yh=/\biOS-universal(?:.+)Mac\b/i,gh=/\bAndroid(?:.+)Mobile\b/i,_h=/Android/i,vh=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,bh=/Silk/i,wh=/Windows Phone/i,xh=/\bWindows(?:.+)ARM\b/i,Ih=/BlackBerry/i,Th=/BB10/i,Eh=/Opera Mini/i,Ah=/\b(CriOS|Chrome)(?:.+)Mobile/i,Sh=/Mobile(?:.+)Firefox\b/i,kh=function(e){return void 0!==e&&"MacIntel"===e.platform&&"number"==typeof e.maxTouchPoints&&e.maxTouchPoints>1&&"undefined"==typeof MSStream};function Ch(e){var t={userAgent:"",platform:"",maxTouchPoints:0};e||"undefined"==typeof navigator?"string"==typeof e?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0}):t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r=t.userAgent,n=r.split("[FBAN");void 0!==n[1]&&(r=n[0]),void 0!==(n=r.split("Twitter"))[1]&&(r=n[0]);var i=function(e){return function(t){return t.test(e)}}(r),a={apple:{phone:i(fh)&&!i(wh),ipod:i(ph),tablet:!i(fh)&&(i(mh)||kh(t))&&!i(wh),universal:i(yh),device:(i(fh)||i(ph)||i(mh)||i(yh)||kh(t))&&!i(wh)},amazon:{phone:i(vh),tablet:!i(vh)&&i(bh),device:i(vh)||i(bh)},android:{phone:!i(wh)&&i(vh)||!i(wh)&&i(gh),tablet:!i(wh)&&!i(vh)&&!i(gh)&&(i(bh)||i(_h)),device:!i(wh)&&(i(vh)||i(bh)||i(gh)||i(_h))||i(/\bokhttp\b/i)},windows:{phone:i(wh),tablet:i(xh),device:i(wh)||i(xh)},other:{blackberry:i(Ih),blackberry10:i(Th),opera:i(Eh),firefox:i(Sh),chrome:i(Ah),device:i(Ih)||i(Th)||i(Eh)||i(Sh)||i(Ah)},any:!1,phone:!1,tablet:!1};return a.any=a.apple.device||a.android.device||a.windows.device||a.other.device,a.phone=a.apple.phone||a.android.phone||a.windows.phone,a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet,a}const Ph=(Ch.default??Ch)(globalThis.navigator);hh.RETINA_PREFIX=/@([0-9\.]+)x/,hh.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Rh={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,n,a,s){if("function"!=typeof n)throw new TypeError("The listener must be a function");var o=new i(n,a||e,s),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),o.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,a=n.length,s=new Array(a);i<a;i++)s[i]=n[i].fn;return s},o.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},o.prototype.emit=function(e,t,n,i,a,s){var o=r?r+e:e;if(!this._events[o])return!1;var l,u,c=this._events[o],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,i),!0;case 5:return c.fn.call(c.context,t,n,i,a),!0;case 6:return c.fn.call(c.context,t,n,i,a,s),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var h,f=c.length;for(u=0;u<f;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,n);break;case 4:c[u].fn.call(c[u].context,t,n,i);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];c[u].fn.apply(c[u].context,l)}}return!0},o.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,n,i){var a=r?r+e:e;if(!this._events[a])return this;if(!t)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||i&&!o.once||n&&o.context!==n||s(this,a);else{for(var l=0,u=[],c=o.length;l<c;l++)(o[l].fn!==t||i&&!o[l].once||n&&o[l].context!==n)&&u.push(o[l]);u.length?this._events[a]=1===u.length?u[0]:u:s(this,a)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o}(Rh);const Mh=hr(Rh.exports);var Lh={exports:{}};function Oh(e,t,r){r=r||2;var n,i,a,s,o,l,u,c=t&&t.length,d=c?t[0]*r:e.length,h=Fh(e,0,d,r,!0),f=[];if(!h||h.next===h.prev)return f;if(c&&(h=function(e,t,r,n){var i,a,s,o=[];for(i=0,a=t.length;i<a;i++)(s=Fh(e,t[i]*n,i<a-1?t[i+1]*n:e.length,n,!1))===s.next&&(s.steiner=!0),o.push(Xh(s));for(o.sort(zh),i=0;i<o.length;i++)r=Hh(o[i],r);return r}(e,t,h,r)),e.length>80*r){n=a=e[0],i=s=e[1];for(var p=r;p<d;p+=r)(o=e[p])<n&&(n=o),(l=e[p+1])<i&&(i=l),o>a&&(a=o),l>s&&(s=l);u=0!==(u=Math.max(a-n,s-i))?32767/u:0}return Nh(h,f,r,n,i,u,0),f}function Fh(e,t,r,n,i){var a,s;if(i===sf(e,t,r,n)>0)for(a=t;a<r;a+=n)s=rf(a,e[a],e[a+1],s);else for(a=r-n;a>=t;a-=n)s=rf(a,e[a],e[a+1],s);return s&&Kh(s,s.next)&&(nf(s),s=s.next),s}function Dh(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!Kh(n,n.next)&&0!==Yh(n.prev,n,n.next))n=n.next;else{if(nf(n),(n=t=n.prev)===n.next)break;r=!0}}while(r||n!==t);return t}function Nh(e,t,r,n,i,a,s){if(e){!s&&a&&function(e,t,r,n){var i=e;do{0===i.z&&(i.z=$h(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,r,n,i,a,s,o,l,u=1;do{for(r=e,e=null,a=null,s=0;r;){for(s++,n=r,o=0,t=0;t<u&&(o++,n=n.nextZ);t++);for(l=u;o>0||l>0&&n;)0!==o&&(0===l||!n||r.z<=n.z)?(i=r,r=r.nextZ,o--):(i=n,n=n.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;r=n}a.nextZ=null,u*=2}while(s>1)}(i)}(e,n,i,a);for(var o,l,u=e;e.prev!==e.next;)if(o=e.prev,l=e.next,a?Uh(e,n,i,a):Bh(e))t.push(o.i/r|0),t.push(e.i/r|0),t.push(l.i/r|0),nf(e),e=l.next,u=l.next;else if((e=l)===u){s?1===s?Nh(e=jh(Dh(e),t,r),t,r,n,i,a,2):2===s&&Gh(e,t,r,n,i,a):Nh(Dh(e),t,r,n,i,a,1);break}}}function Bh(e){var t=e.prev,r=e,n=e.next;if(Yh(t,r,n)>=0)return!1;for(var i=t.x,a=r.x,s=n.x,o=t.y,l=r.y,u=n.y,c=i<a?i<s?i:s:a<s?a:s,d=o<l?o<u?o:u:l<u?l:u,h=i>a?i>s?i:s:a>s?a:s,f=o>l?o>u?o:u:l>u?l:u,p=n.next;p!==t;){if(p.x>=c&&p.x<=h&&p.y>=d&&p.y<=f&&qh(i,o,a,l,s,u,p.x,p.y)&&Yh(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Uh(e,t,r,n){var i=e.prev,a=e,s=e.next;if(Yh(i,a,s)>=0)return!1;for(var o=i.x,l=a.x,u=s.x,c=i.y,d=a.y,h=s.y,f=o<l?o<u?o:u:l<u?l:u,p=c<d?c<h?c:h:d<h?d:h,m=o>l?o>u?o:u:l>u?l:u,y=c>d?c>h?c:h:d>h?d:h,g=$h(f,p,t,r,n),_=$h(m,y,t,r,n),v=e.prevZ,b=e.nextZ;v&&v.z>=g&&b&&b.z<=_;){if(v.x>=f&&v.x<=m&&v.y>=p&&v.y<=y&&v!==i&&v!==s&&qh(o,c,l,d,u,h,v.x,v.y)&&Yh(v.prev,v,v.next)>=0)return!1;if(v=v.prevZ,b.x>=f&&b.x<=m&&b.y>=p&&b.y<=y&&b!==i&&b!==s&&qh(o,c,l,d,u,h,b.x,b.y)&&Yh(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;v&&v.z>=g;){if(v.x>=f&&v.x<=m&&v.y>=p&&v.y<=y&&v!==i&&v!==s&&qh(o,c,l,d,u,h,v.x,v.y)&&Yh(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;b&&b.z<=_;){if(b.x>=f&&b.x<=m&&b.y>=p&&b.y<=y&&b!==i&&b!==s&&qh(o,c,l,d,u,h,b.x,b.y)&&Yh(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function jh(e,t,r){var n=e;do{var i=n.prev,a=n.next.next;!Kh(i,a)&&Zh(i,n,n.next,a)&&ef(i,a)&&ef(a,i)&&(t.push(i.i/r|0),t.push(n.i/r|0),t.push(a.i/r|0),nf(n),nf(n.next),n=e=a),n=n.next}while(n!==e);return Dh(n)}function Gh(e,t,r,n,i,a){var s=e;do{for(var o=s.next.next;o!==s.prev;){if(s.i!==o.i&&Wh(s,o)){var l=tf(s,o);return s=Dh(s,s.next),l=Dh(l,l.next),Nh(s,t,r,n,i,a,0),void Nh(l,t,r,n,i,a,0)}o=o.next}s=s.next}while(s!==e)}function zh(e,t){return e.x-t.x}function Hh(e,t){var r=function(e,t){var r,n=t,i=e.x,a=e.y,s=-1/0;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){var o=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(o<=i&&o>s&&(s=o,r=n.x<n.next.x?n:n.next,o===i))return r}n=n.next}while(n!==t);if(!r)return null;var l,u=r,c=r.x,d=r.y,h=1/0;n=r;do{i>=n.x&&n.x>=c&&i!==n.x&&qh(a<d?i:s,a,c,d,a<d?s:i,a,n.x,n.y)&&(l=Math.abs(a-n.y)/(i-n.x),ef(n,e)&&(l<h||l===h&&(n.x>r.x||n.x===r.x&&Vh(r,n)))&&(r=n,h=l)),n=n.next}while(n!==u);return r}(e,t);if(!r)return t;var n=tf(r,e);return Dh(n,n.next),Dh(r,r.next)}function Vh(e,t){return Yh(e.prev,e,t.prev)<0&&Yh(t.next,e,e.next)<0}function $h(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Xh(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function qh(e,t,r,n,i,a,s,o){return(i-s)*(t-o)>=(e-s)*(a-o)&&(e-s)*(n-o)>=(r-s)*(t-o)&&(r-s)*(a-o)>=(i-s)*(n-o)}function Wh(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&Zh(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&(ef(e,t)&&ef(t,e)&&function(e,t){var r=e,n=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{r.y>a!=r.next.y>a&&r.next.y!==r.y&&i<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}(e,t)&&(Yh(e.prev,e,t.prev)||Yh(e,t.prev,t))||Kh(e,t)&&Yh(e.prev,e,e.next)>0&&Yh(t.prev,t,t.next)>0)}function Yh(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function Kh(e,t){return e.x===t.x&&e.y===t.y}function Zh(e,t,r,n){var i=Jh(Yh(e,t,r)),a=Jh(Yh(e,t,n)),s=Jh(Yh(r,n,e)),o=Jh(Yh(r,n,t));return i!==a&&s!==o||(!(0!==i||!Qh(e,r,t))||(!(0!==a||!Qh(e,n,t))||(!(0!==s||!Qh(r,e,n))||!(0!==o||!Qh(r,t,n)))))}function Qh(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function Jh(e){return e>0?1:e<0?-1:0}function ef(e,t){return Yh(e.prev,e,e.next)<0?Yh(e,t,e.next)>=0&&Yh(e,e.prev,t)>=0:Yh(e,t,e.prev)<0||Yh(e,e.next,t)<0}function tf(e,t){var r=new af(e.i,e.x,e.y),n=new af(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,a.next=n,n.prev=a,n}function rf(e,t,r,n){var i=new af(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function nf(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function af(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function sf(e,t,r,n){for(var i=0,a=t,s=r-n;a<r;a+=n)i+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return i}Lh.exports=Oh,Lh.exports.default=Oh,Oh.deviation=function(e,t,r,n){var i=t&&t.length,a=i?t[0]*r:e.length,s=Math.abs(sf(e,0,a,r));if(i)for(var o=0,l=t.length;o<l;o++){var u=t[o]*r,c=o<l-1?t[o+1]*r:e.length;s-=Math.abs(sf(e,u,c,r))}var d=0;for(o=0;o<n.length;o+=3){var h=n[o]*r,f=n[o+1]*r,p=n[o+2]*r;d+=Math.abs((e[h]-e[p])*(e[f+1]-e[h+1])-(e[h]-e[f])*(e[p+1]-e[h+1]))}return 0===s&&0===d?0:Math.abs((d-s)/s)},Oh.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var a=0;a<e[i].length;a++)for(var s=0;s<t;s++)r.vertices.push(e[i][a][s]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r};var of={exports:{}};
/*! https://mths.be/punycode v1.4.1 by @mathias */!function(e,t){!function(r){var n=t&&!t.nodeType&&t,i=e&&!e.nodeType&&e,a="object"==typeof Tt&&Tt;a.global!==a&&a.window!==a&&a.self!==a||(r=a);var s,o,l=2147483647,u=36,c=/^xn--/,d=/[^\x20-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,m=String.fromCharCode;function y(e){throw new RangeError(f[e])}function g(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function _(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+g((e=e.replace(h,".")).split("."),t).join(".")}function v(e){for(var t,r,n=[],i=0,a=e.length;i<a;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<a?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}function b(e){return g(e,function(e){var t="";return e>65535&&(t+=m((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=m(e)}).join("")}function w(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:u}function x(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function I(e,t,r){var n=0;for(e=r?p(e/700):e>>1,e+=p(e/t);e>455;n+=u)e=p(e/35);return p(n+36*e/(e+38))}function T(e){var t,r,n,i,a,s,o,c,d,h,f=[],m=e.length,g=0,_=128,v=72;for((r=e.lastIndexOf("-"))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&y("not-basic"),f.push(e.charCodeAt(n));for(i=r>0?r+1:0;i<m;){for(a=g,s=1,o=u;i>=m&&y("invalid-input"),((c=w(e.charCodeAt(i++)))>=u||c>p((l-g)/s))&&y("overflow"),g+=c*s,!(c<(d=o<=v?1:o>=v+26?26:o-v));o+=u)s>p(l/(h=u-d))&&y("overflow"),s*=h;v=I(g-a,t=f.length+1,0==a),p(g/t)>l-_&&y("overflow"),_+=p(g/t),g%=t,f.splice(g++,0,_)}return b(f)}function E(e){var t,r,n,i,a,s,o,c,d,h,f,g,_,b,w,T=[];for(g=(e=v(e)).length,t=128,r=0,a=72,s=0;s<g;++s)(f=e[s])<128&&T.push(m(f));for(n=i=T.length,i&&T.push("-");n<g;){for(o=l,s=0;s<g;++s)(f=e[s])>=t&&f<o&&(o=f);for(o-t>p((l-r)/(_=n+1))&&y("overflow"),r+=(o-t)*_,t=o,s=0;s<g;++s)if((f=e[s])<t&&++r>l&&y("overflow"),f==t){for(c=r,d=u;!(c<(h=d<=a?1:d>=a+26?26:d-a));d+=u)w=c-h,b=u-h,T.push(m(x(h+w%b,0))),c=p(w/b);T.push(m(x(c,0))),a=I(r,_,n==i),r=0,++n}++r,++t}return T.join("")}if(s={version:"1.4.1",ucs2:{decode:v,encode:b},decode:T,encode:E,toASCII:function(e){return _(e,function(e){return d.test(e)?"xn--"+E(e):e})},toUnicode:function(e){return _(e,function(e){return c.test(e)?T(e.slice(4).toLowerCase()):e})}},n&&i)if(e.exports==n)i.exports=s;else for(o in s)s.hasOwnProperty(o)&&(n[o]=s[o]);else r.punycode=s}(Tt)}(of,of.exports);var lf=of.exports,uf=TypeError;const cf=fr(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var df="function"==typeof Map&&Map.prototype,hf=Object.getOwnPropertyDescriptor&&df?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,ff=df&&hf&&"function"==typeof hf.get?hf.get:null,pf=df&&Map.prototype.forEach,mf="function"==typeof Set&&Set.prototype,yf=Object.getOwnPropertyDescriptor&&mf?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,gf=mf&&yf&&"function"==typeof yf.get?yf.get:null,_f=mf&&Set.prototype.forEach,vf="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,bf="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,wf="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,xf=Boolean.prototype.valueOf,If=Object.prototype.toString,Tf=Function.prototype.toString,Ef=String.prototype.match,Af=String.prototype.slice,Sf=String.prototype.replace,kf=String.prototype.toUpperCase,Cf=String.prototype.toLowerCase,Pf=RegExp.prototype.test,Rf=Array.prototype.concat,Mf=Array.prototype.join,Lf=Array.prototype.slice,Of=Math.floor,Ff="function"==typeof BigInt?BigInt.prototype.valueOf:null,Df=Object.getOwnPropertySymbols,Nf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,Bf="function"==typeof Symbol&&"object"==typeof Symbol.iterator,Uf="function"==typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Bf||"symbol")?Symbol.toStringTag:null,jf=Object.prototype.propertyIsEnumerable,Gf=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function zf(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||Pf.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var n=e<0?-Of(-e):Of(e);if(n!==e){var i=String(n),a=Af.call(t,i.length+1);return Sf.call(i,r,"$&_")+"."+Sf.call(Sf.call(a,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Sf.call(t,r,"$&_")}var Hf=cf,Vf=Hf.custom,$f=ep(Vf)?Vf:null,Xf={__proto__:null,double:'"',single:"'"},qf={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},Wf=function e(t,r,n,i){var a=r||{};if(rp(a,"quoteStyle")&&!rp(Xf,a.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(rp(a,"maxStringLength")&&("number"==typeof a.maxStringLength?a.maxStringLength<0&&a.maxStringLength!==1/0:null!==a.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=!rp(a,"customInspect")||a.customInspect;if("boolean"!=typeof s&&"symbol"!==s)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(rp(a,"indent")&&null!==a.indent&&"\t"!==a.indent&&!(parseInt(a.indent,10)===a.indent&&a.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(rp(a,"numericSeparator")&&"boolean"!=typeof a.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var o=a.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return ap(t,a);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var l=String(t);return o?zf(t,l):l}if("bigint"==typeof t){var u=String(t)+"n";return o?zf(t,u):u}var c=void 0===a.depth?5:a.depth;if(void 0===n&&(n=0),n>=c&&c>0&&"object"==typeof t)return Qf(t)?"[Array]":"[Object]";var d=function(e,t){var r;if("\t"===e.indent)r="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;r=Mf.call(Array(e.indent+1)," ")}return{base:r,prev:Mf.call(Array(t+1),r)}}(a,n);if(void 0===i)i=[];else if(ip(i,t)>=0)return"[Circular]";function h(t,r,s){if(r&&(i=Lf.call(i)).push(r),s){var o={depth:a.depth};return rp(a,"quoteStyle")&&(o.quoteStyle=a.quoteStyle),e(t,o,n+1,i)}return e(t,a,n+1,i)}if("function"==typeof t&&!Jf(t)){var f=function(e){if(e.name)return e.name;var t=Ef.call(Tf.call(e),/^function\s*([\w$]+)/);if(t)return t[1];return null}(t),p=dp(t,h);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(p.length>0?" { "+Mf.call(p,", ")+" }":"")}if(ep(t)){var m=Bf?Sf.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):Nf.call(t);return"object"!=typeof t||Bf?m:op(m)}if(function(e){if(!e||"object"!=typeof e)return!1;if("undefined"!=typeof HTMLElement&&e instanceof HTMLElement)return!0;return"string"==typeof e.nodeName&&"function"==typeof e.getAttribute}(t)){for(var y="<"+Cf.call(String(t.nodeName)),g=t.attributes||[],_=0;_<g.length;_++)y+=" "+g[_].name+"="+Yf(Kf(g[_].value),"double",a);return y+=">",t.childNodes&&t.childNodes.length&&(y+="..."),y+="</"+Cf.call(String(t.nodeName))+">"}if(Qf(t)){if(0===t.length)return"[]";var v=dp(t,h);return d&&!function(e){for(var t=0;t<e.length;t++)if(ip(e[t],"\n")>=0)return!1;return!0}(v)?"["+cp(v,d)+"]":"[ "+Mf.call(v,", ")+" ]"}if(function(e){return"[object Error]"===np(e)&&Zf(e)}(t)){var b=dp(t,h);return"cause"in Error.prototype||!("cause"in t)||jf.call(t,"cause")?0===b.length?"["+String(t)+"]":"{ ["+String(t)+"] "+Mf.call(b,", ")+" }":"{ ["+String(t)+"] "+Mf.call(Rf.call("[cause]: "+h(t.cause),b),", ")+" }"}if("object"==typeof t&&s){if($f&&"function"==typeof t[$f]&&Hf)return Hf(t,{depth:c-n});if("symbol"!==s&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!ff||!e||"object"!=typeof e)return!1;try{ff.call(e);try{gf.call(e)}catch(y){return!0}return e instanceof Map}catch(t){}return!1}(t)){var w=[];return pf&&pf.call(t,function(e,r){w.push(h(r,t,!0)+" => "+h(e,t))}),up("Map",ff.call(t),w,d)}if(function(e){if(!gf||!e||"object"!=typeof e)return!1;try{gf.call(e);try{ff.call(e)}catch(t){return!0}return e instanceof Set}catch(r){}return!1}(t)){var x=[];return _f&&_f.call(t,function(e){x.push(h(e,t))}),up("Set",gf.call(t),x,d)}if(function(e){if(!vf||!e||"object"!=typeof e)return!1;try{vf.call(e,vf);try{bf.call(e,bf)}catch(y){return!0}return e instanceof WeakMap}catch(t){}return!1}(t))return lp("WeakMap");if(function(e){if(!bf||!e||"object"!=typeof e)return!1;try{bf.call(e,bf);try{vf.call(e,vf)}catch(y){return!0}return e instanceof WeakSet}catch(t){}return!1}(t))return lp("WeakSet");if(function(e){if(!wf||!e||"object"!=typeof e)return!1;try{return wf.call(e),!0}catch(t){}return!1}(t))return lp("WeakRef");if(function(e){return"[object Number]"===np(e)&&Zf(e)}(t))return op(h(Number(t)));if(function(e){if(!e||"object"!=typeof e||!Ff)return!1;try{return Ff.call(e),!0}catch(t){}return!1}(t))return op(h(Ff.call(t)));if(function(e){return"[object Boolean]"===np(e)&&Zf(e)}(t))return op(xf.call(t));if(function(e){return"[object String]"===np(e)&&Zf(e)}(t))return op(h(String(t)));if("undefined"!=typeof window&&t===window)return"{ [object Window] }";if("undefined"!=typeof globalThis&&t===globalThis||void 0!==Tt&&t===Tt)return"{ [object globalThis] }";if(!function(e){return"[object Date]"===np(e)&&Zf(e)}(t)&&!Jf(t)){var I=dp(t,h),T=Gf?Gf(t)===Object.prototype:t instanceof Object||t.constructor===Object,E=t instanceof Object?"":"null prototype",A=!T&&Uf&&Object(t)===t&&Uf in t?Af.call(np(t),8,-1):E?"Object":"",S=(T||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(A||E?"["+Mf.call(Rf.call([],A||[],E||[]),": ")+"] ":"");return 0===I.length?S+"{}":d?S+"{"+cp(I,d)+"}":S+"{ "+Mf.call(I,", ")+" }"}return String(t)};function Yf(e,t,r){var n=r.quoteStyle||t,i=Xf[n];return i+e+i}function Kf(e){return Sf.call(String(e),/"/g,"&quot;")}function Zf(e){return!Uf||!("object"==typeof e&&(Uf in e||void 0!==e[Uf]))}function Qf(e){return"[object Array]"===np(e)&&Zf(e)}function Jf(e){return"[object RegExp]"===np(e)&&Zf(e)}function ep(e){if(Bf)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!Nf)return!1;try{return Nf.call(e),!0}catch(t){}return!1}var tp=Object.prototype.hasOwnProperty||function(e){return e in this};function rp(e,t){return tp.call(e,t)}function np(e){return If.call(e)}function ip(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function ap(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return ap(Af.call(e,0,t.maxStringLength),t)+n}var i=qf[t.quoteStyle||"single"];return i.lastIndex=0,Yf(Sf.call(Sf.call(e,i,"\\$1"),/[\x00-\x1f]/g,sp),"single",t)}function sp(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+kf.call(t.toString(16))}function op(e){return"Object("+e+")"}function lp(e){return e+" { ? }"}function up(e,t,r,n){return e+" ("+t+") {"+(n?cp(r,n):Mf.call(r,", "))+"}"}function cp(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+Mf.call(e,","+r)+"\n"+t.prev}function dp(e,t){var r=Qf(e),n=[];if(r){n.length=e.length;for(var i=0;i<e.length;i++)n[i]=rp(e,i)?t(e[i],e):""}var a,s="function"==typeof Df?Df(e):[];if(Bf){a={};for(var o=0;o<s.length;o++)a["$"+s[o]]=s[o]}for(var l in e)rp(e,l)&&(r&&String(Number(l))===l&&l<e.length||Bf&&a["$"+l]instanceof Symbol||(Pf.call(/[^\w$]/,l)?n.push(t(l,e)+": "+t(e[l],e)):n.push(l+": "+t(e[l],e))));if("function"==typeof Df)for(var u=0;u<s.length;u++)jf.call(e,s[u])&&n.push("["+t(s[u])+"]: "+t(e[s[u]],e));return n}var hp=Wf,fp=uf,pp=function(e,t,r){for(var n,i=e;null!=(n=i.next);i=n)if(n.key===t)return i.next=n.next,r||(n.next=e.next,e.next=n),n},mp=Object,yp=Error,gp=EvalError,_p=RangeError,vp=ReferenceError,bp=SyntaxError,wp=URIError,xp=Math.abs,Ip=Math.floor,Tp=Math.max,Ep=Math.min,Ap=Math.pow,Sp=Math.round,kp=Number.isNaN||function(e){return e!=e},Cp=Object.getOwnPropertyDescriptor;if(Cp)try{Cp([],"length")}catch(lk){Cp=null}var Pp=Cp,Rp=Object.defineProperty||!1;if(Rp)try{Rp({},"a",{value:1})}catch(lk){Rp=!1}var Mp,Lp,Op,Fp,Dp,Np,Bp,Up,jp,Gp,zp,Hp,Vp,$p,Xp,qp,Wp=Rp;function Yp(){return Np?Dp:(Np=1,Dp="undefined"!=typeof Reflect&&Reflect.getPrototypeOf||null)}function Kp(){return Up?Bp:(Up=1,Bp=mp.getPrototypeOf||null)}function Zp(){if(Hp)return zp;Hp=1;var e=function(){if(Gp)return jp;Gp=1;var e=Object.prototype.toString,t=Math.max,r=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var i=0;i<t.length;i+=1)r[i+e.length]=t[i];return r};return jp=function(n){var i=this;if("function"!=typeof i||"[object Function]"!==e.apply(i))throw new TypeError("Function.prototype.bind called on incompatible "+i);for(var a,s=function(e){for(var t=[],r=1,n=0;r<e.length;r+=1,n+=1)t[n]=e[r];return t}(arguments),o=t(0,i.length-s.length),l=[],u=0;u<o;u++)l[u]="$"+u;if(a=Function("binder","return function ("+function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r}(l,",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof a){var e=i.apply(this,r(s,arguments));return Object(e)===e?e:this}return i.apply(n,r(s,arguments))}),i.prototype){var c=function(){};c.prototype=i.prototype,a.prototype=new c,c.prototype=null}return a},jp}();return zp=Function.prototype.bind||e}function Qp(){return $p?Vp:($p=1,Vp=Function.prototype.call)}function Jp(){return qp?Xp:(qp=1,Xp=Function.prototype.apply)}var em,tm,rm,nm,im,am,sm,om="undefined"!=typeof Reflect&&Reflect&&Reflect.apply,lm=Zp(),um=Jp(),cm=Qp(),dm=om||lm.call(cm,um),hm=Zp(),fm=uf,pm=Qp(),mm=dm,ym=function(e){if(e.length<1||"function"!=typeof e[0])throw new fm("a function is required");return mm(hm,pm,e)};var gm=mp,_m=yp,vm=gp,bm=_p,wm=vp,xm=bp,Im=uf,Tm=wp,Em=xp,Am=Ip,Sm=Tp,km=Ep,Cm=Ap,Pm=Sp,Rm=function(e){return kp(e)||0===e?e:e<0?-1:1},Mm=Function,Lm=function(e){try{return Mm('"use strict"; return ('+e+").constructor;")()}catch(lk){}},Om=Pp,Fm=Wp,Dm=function(){throw new Im},Nm=Om?function(){try{return Dm}catch(e){try{return Om(arguments,"callee").get}catch(t){return Dm}}}():Dm,Bm=function(){if(Fp)return Op;Fp=1;var e="undefined"!=typeof Symbol&&Symbol,t=Lp?Mp:(Lp=1,Mp=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(var n in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var i=Object.getOwnPropertySymbols(e);if(1!==i.length||i[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var a=Object.getOwnPropertyDescriptor(e,t);if(42!==a.value||!0!==a.enumerable)return!1}return!0});return Op=function(){return"function"==typeof e&&("function"==typeof Symbol&&("symbol"==typeof e("foo")&&("symbol"==typeof Symbol("bar")&&t())))}}()(),Um=function(){if(nm)return rm;nm=1;var e=Yp(),t=Kp(),r=function(){if(tm)return em;tm=1;var e,t=ym,r=Pp;try{e=[].__proto__===Array.prototype}catch(lk){if(!lk||"object"!=typeof lk||!("code"in lk)||"ERR_PROTO_ACCESS"!==lk.code)throw lk}var n=!!e&&r&&r(Object.prototype,"__proto__"),i=Object,a=i.getPrototypeOf;return em=n&&"function"==typeof n.get?t([n.get]):"function"==typeof a&&function(e){return a(null==e?e:i(e))}}();return rm=e?function(t){return e(t)}:t?function(e){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("getProto: not an object");return t(e)}:r?function(e){return r(e)}:null}(),jm=Kp(),Gm=Yp(),zm=Jp(),Hm=Qp(),Vm={},$m="undefined"!=typeof Uint8Array&&Um?Um(Uint8Array):sm,Xm={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?sm:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?sm:ArrayBuffer,"%ArrayIteratorPrototype%":Bm&&Um?Um([][Symbol.iterator]()):sm,"%AsyncFromSyncIteratorPrototype%":sm,"%AsyncFunction%":Vm,"%AsyncGenerator%":Vm,"%AsyncGeneratorFunction%":Vm,"%AsyncIteratorPrototype%":Vm,"%Atomics%":"undefined"==typeof Atomics?sm:Atomics,"%BigInt%":"undefined"==typeof BigInt?sm:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?sm:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?sm:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?sm:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":_m,"%eval%":eval,"%EvalError%":vm,"%Float16Array%":"undefined"==typeof Float16Array?sm:Float16Array,"%Float32Array%":"undefined"==typeof Float32Array?sm:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?sm:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?sm:FinalizationRegistry,"%Function%":Mm,"%GeneratorFunction%":Vm,"%Int8Array%":"undefined"==typeof Int8Array?sm:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?sm:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?sm:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Bm&&Um?Um(Um([][Symbol.iterator]())):sm,"%JSON%":"object"==typeof JSON?JSON:sm,"%Map%":"undefined"==typeof Map?sm:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&Bm&&Um?Um((new Map)[Symbol.iterator]()):sm,"%Math%":Math,"%Number%":Number,"%Object%":gm,"%Object.getOwnPropertyDescriptor%":Om,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?sm:Promise,"%Proxy%":"undefined"==typeof Proxy?sm:Proxy,"%RangeError%":bm,"%ReferenceError%":wm,"%Reflect%":"undefined"==typeof Reflect?sm:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?sm:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&Bm&&Um?Um((new Set)[Symbol.iterator]()):sm,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?sm:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Bm&&Um?Um(""[Symbol.iterator]()):sm,"%Symbol%":Bm?Symbol:sm,"%SyntaxError%":xm,"%ThrowTypeError%":Nm,"%TypedArray%":$m,"%TypeError%":Im,"%Uint8Array%":"undefined"==typeof Uint8Array?sm:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?sm:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?sm:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?sm:Uint32Array,"%URIError%":Tm,"%WeakMap%":"undefined"==typeof WeakMap?sm:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?sm:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?sm:WeakSet,"%Function.prototype.call%":Hm,"%Function.prototype.apply%":zm,"%Object.defineProperty%":Fm,"%Object.getPrototypeOf%":jm,"%Math.abs%":Em,"%Math.floor%":Am,"%Math.max%":Sm,"%Math.min%":km,"%Math.pow%":Cm,"%Math.round%":Pm,"%Math.sign%":Rm,"%Reflect.getPrototypeOf%":Gm};if(Um)try{null.error}catch(lk){var qm=Um(Um(lk));Xm["%Error.prototype%"]=qm}var Wm=function e(t){var r;if("%AsyncFunction%"===t)r=Lm("async function () {}");else if("%GeneratorFunction%"===t)r=Lm("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=Lm("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&Um&&(r=Um(i.prototype))}return Xm[t]=r,r},Ym={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Km=Zp(),Zm=function(){if(am)return im;am=1;var e=Function.prototype.call,t=Object.prototype.hasOwnProperty,r=Zp();return im=r.call(e,t)}(),Qm=Km.call(Hm,Array.prototype.concat),Jm=Km.call(zm,Array.prototype.splice),ey=Km.call(Hm,String.prototype.replace),ty=Km.call(Hm,String.prototype.slice),ry=Km.call(Hm,RegExp.prototype.exec),ny=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,iy=/\\(\\)?/g,ay=function(e,t){var r,n=e;if(Zm(Ym,n)&&(n="%"+(r=Ym[n])[0]+"%"),Zm(Xm,n)){var i=Xm[n];if(i===Vm&&(i=Wm(n)),void 0===i&&!t)throw new Im("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:i}}throw new xm("intrinsic "+e+" does not exist!")},sy=function(e,t){if("string"!=typeof e||0===e.length)throw new Im("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new Im('"allowMissing" argument must be a boolean');if(null===ry(/^%?[^%]*%?$/,e))throw new xm("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(e){var t=ty(e,0,1),r=ty(e,-1);if("%"===t&&"%"!==r)throw new xm("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new xm("invalid intrinsic syntax, expected opening `%`");var n=[];return ey(e,ny,function(e,t,r,i){n[n.length]=r?ey(i,iy,"$1"):t||e}),n}(e),n=r.length>0?r[0]:"",i=ay("%"+n+"%",t),a=i.name,s=i.value,o=!1,l=i.alias;l&&(n=l[0],Jm(r,Qm([0,1],l)));for(var u=1,c=!0;u<r.length;u+=1){var d=r[u],h=ty(d,0,1),f=ty(d,-1);if(('"'===h||"'"===h||"`"===h||'"'===f||"'"===f||"`"===f)&&h!==f)throw new xm("property names with quotes must have matching quotes");if("constructor"!==d&&c||(o=!0),Zm(Xm,a="%"+(n+="."+d)+"%"))s=Xm[a];else if(null!=s){if(!(d in s)){if(!t)throw new Im("base intrinsic for "+e+" exists, but the property is not available.");return}if(Om&&u+1>=r.length){var p=Om(s,d);s=(c=!!p)&&"get"in p&&!("originalValue"in p.get)?p.get:s[d]}else c=Zm(s,d),s=s[d];c&&!o&&(Xm[a]=s)}}return s},oy=sy,ly=ym,uy=ly([oy("%String.prototype.indexOf%")]),cy=function(e,t){var r=oy(e,!!t);return"function"==typeof r&&uy(e,".prototype.")>-1?ly([r]):r},dy=cy,hy=Wf,fy=uf,py=sy("%Map%",!0),my=dy("Map.prototype.get",!0),yy=dy("Map.prototype.set",!0),gy=dy("Map.prototype.has",!0),_y=dy("Map.prototype.delete",!0),vy=dy("Map.prototype.size",!0),by=!!py&&function(){var e,t={assert:function(e){if(!t.has(e))throw new fy("Side channel does not contain "+hy(e))},delete:function(t){if(e){var r=_y(e,t);return 0===vy(e)&&(e=void 0),r}return!1},get:function(t){if(e)return my(e,t)},has:function(t){return!!e&&gy(e,t)},set:function(t,r){e||(e=new py),yy(e,t,r)}};return t},wy=cy,xy=Wf,Iy=by,Ty=uf,Ey=sy("%WeakMap%",!0),Ay=wy("WeakMap.prototype.get",!0),Sy=wy("WeakMap.prototype.set",!0),ky=wy("WeakMap.prototype.has",!0),Cy=wy("WeakMap.prototype.delete",!0),Py=Ey?function(){var e,t,r={assert:function(e){if(!r.has(e))throw new Ty("Side channel does not contain "+xy(e))},delete:function(r){if(Ey&&r&&("object"==typeof r||"function"==typeof r)){if(e)return Cy(e,r)}else if(Iy&&t)return t.delete(r);return!1},get:function(r){return Ey&&r&&("object"==typeof r||"function"==typeof r)&&e?Ay(e,r):t&&t.get(r)},has:function(r){return Ey&&r&&("object"==typeof r||"function"==typeof r)&&e?ky(e,r):!!t&&t.has(r)},set:function(r,n){Ey&&r&&("object"==typeof r||"function"==typeof r)?(e||(e=new Ey),Sy(e,r,n)):Iy&&(t||(t=Iy()),t.set(r,n))}};return r}:Iy,Ry=uf,My=Wf,Ly=function(){var e,t={assert:function(e){if(!t.has(e))throw new fp("Side channel does not contain "+hp(e))},delete:function(t){var r=e&&e.next,n=function(e,t){if(e)return pp(e,t,!0)}(e,t);return n&&r&&r===n&&(e=void 0),!!n},get:function(t){return function(e,t){if(e){var r=pp(e,t);return r&&r.value}}(e,t)},has:function(t){return function(e,t){return!!e&&!!pp(e,t)}(e,t)},set:function(t,r){e||(e={next:void 0}),function(e,t,r){var n=pp(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}}(e,t,r)}};return t},Oy=Py||by||Ly,Fy=String.prototype.replace,Dy=/%20/g,Ny="RFC3986",By={default:Ny,formatters:{RFC1738:function(e){return Fy.call(e,Dy,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:Ny},Uy=By,jy=Object.prototype.hasOwnProperty,Gy=Array.isArray,zy=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),Hy=function(e,t){for(var r=t&&t.plainObjects?{__proto__:null}:{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r},Vy=1024,$y={arrayToObject:Hy,assign:function(e,t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var i=t[n],a=i.obj[i.prop],s=Object.keys(a),o=0;o<s.length;++o){var l=s[o],u=a[l];"object"==typeof u&&null!==u&&-1===r.indexOf(u)&&(t.push({obj:a,prop:l}),r.push(u))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(Gy(r)){for(var n=[],i=0;i<r.length;++i)void 0!==r[i]&&n.push(r[i]);t.obj[t.prop]=n}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(lk){return n}},encode:function(e,t,r,n,i){if(0===e.length)return e;var a=e;if("symbol"==typeof e?a=Symbol.prototype.toString.call(e):"string"!=typeof e&&(a=String(e)),"iso-8859-1"===r)return escape(a).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var s="",o=0;o<a.length;o+=Vy){for(var l=a.length>=Vy?a.slice(o,o+Vy):a,u=[],c=0;c<l.length;++c){var d=l.charCodeAt(c);45===d||46===d||95===d||126===d||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||i===Uy.RFC1738&&(40===d||41===d)?u[u.length]=l.charAt(c):d<128?u[u.length]=zy[d]:d<2048?u[u.length]=zy[192|d>>6]+zy[128|63&d]:d<55296||d>=57344?u[u.length]=zy[224|d>>12]+zy[128|d>>6&63]+zy[128|63&d]:(c+=1,d=65536+((1023&d)<<10|1023&l.charCodeAt(c)),u[u.length]=zy[240|d>>18]+zy[128|d>>12&63]+zy[128|d>>6&63]+zy[128|63&d])}s+=u.join("")}return s},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(Gy(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},merge:function e(t,r,n){if(!r)return t;if("object"!=typeof r&&"function"!=typeof r){if(Gy(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(n&&(n.plainObjects||n.allowPrototypes)||!jy.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var i=t;return Gy(t)&&!Gy(r)&&(i=Hy(t,n)),Gy(t)&&Gy(r)?(r.forEach(function(r,i){if(jy.call(t,i)){var a=t[i];a&&"object"==typeof a&&r&&"object"==typeof r?t[i]=e(a,r,n):t.push(r)}else t[i]=r}),t):Object.keys(r).reduce(function(t,i){var a=r[i];return jy.call(t,i)?t[i]=e(t[i],a,n):t[i]=a,t},i)}},Xy=function(){var e,t={assert:function(e){if(!t.has(e))throw new Ry("Side channel does not contain "+My(e))},delete:function(t){return!!e&&e.delete(t)},get:function(t){return e&&e.get(t)},has:function(t){return!!e&&e.has(t)},set:function(t,r){e||(e=Oy()),e.set(t,r)}};return t},qy=$y,Wy=By,Yy=Object.prototype.hasOwnProperty,Ky={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},Zy=Array.isArray,Qy=Array.prototype.push,Jy=function(e,t){Qy.apply(e,Zy(t)?t:[t])},eg=Date.prototype.toISOString,tg=Wy.default,rg={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:qy.encode,encodeValuesOnly:!1,filter:void 0,format:tg,formatter:Wy.formatters[tg],indices:!1,serializeDate:function(e){return eg.call(e)},skipNulls:!1,strictNullHandling:!1},ng={},ig=function e(t,r,n,i,a,s,o,l,u,c,d,h,f,p,m,y,g,_){for(var v,b=t,w=_,x=0,I=!1;void 0!==(w=w.get(ng))&&!I;){var T=w.get(t);if(x+=1,void 0!==T){if(T===x)throw new RangeError("Cyclic object value");I=!0}void 0===w.get(ng)&&(x=0)}if("function"==typeof c?b=c(r,b):b instanceof Date?b=f(b):"comma"===n&&Zy(b)&&(b=qy.maybeMap(b,function(e){return e instanceof Date?f(e):e})),null===b){if(s)return u&&!y?u(r,rg.encoder,g,"key",p):r;b=""}if("string"==typeof(v=b)||"number"==typeof v||"boolean"==typeof v||"symbol"==typeof v||"bigint"==typeof v||qy.isBuffer(b))return u?[m(y?r:u(r,rg.encoder,g,"key",p))+"="+m(u(b,rg.encoder,g,"value",p))]:[m(r)+"="+m(String(b))];var E,A=[];if(void 0===b)return A;if("comma"===n&&Zy(b))y&&u&&(b=qy.maybeMap(b,u)),E=[{value:b.length>0?b.join(",")||null:void 0}];else if(Zy(c))E=c;else{var S=Object.keys(b);E=d?S.sort(d):S}var k=l?String(r).replace(/\./g,"%2E"):String(r),C=i&&Zy(b)&&1===b.length?k+"[]":k;if(a&&Zy(b)&&0===b.length)return C+"[]";for(var P=0;P<E.length;++P){var R=E[P],M="object"==typeof R&&R&&void 0!==R.value?R.value:b[R];if(!o||null!==M){var L=h&&l?String(R).replace(/\./g,"%2E"):String(R),O=Zy(b)?"function"==typeof n?n(C,L):C:C+(h?"."+L:"["+L+"]");_.set(t,x);var F=Xy();F.set(ng,_),Jy(A,e(M,O,n,i,a,s,o,l,"comma"===n&&y&&Zy(b)?null:u,c,d,h,f,p,m,y,g,F))}}return A},ag=$y,sg=Object.prototype.hasOwnProperty,og=Array.isArray,lg={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:ag.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},ug=function(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},cg=function(e,t,r){if(e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1)return e.split(",");if(t.throwOnLimitExceeded&&r>=t.arrayLimit)throw new RangeError("Array limit exceeded. Only "+t.arrayLimit+" element"+(1===t.arrayLimit?"":"s")+" allowed in an array.");return e},dg=function(e,t,r,n){if(e){var i=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,s=r.depth>0&&/(\[[^[\]]*])/.exec(i),o=s?i.slice(0,s.index):i,l=[];if(o){if(!r.plainObjects&&sg.call(Object.prototype,o)&&!r.allowPrototypes)return;l.push(o)}for(var u=0;r.depth>0&&null!==(s=a.exec(i))&&u<r.depth;){if(u+=1,!r.plainObjects&&sg.call(Object.prototype,s[1].slice(1,-1))&&!r.allowPrototypes)return;l.push(s[1])}if(s){if(!0===r.strictDepth)throw new RangeError("Input depth exceeded depth option of "+r.depth+" and strictDepth is true");l.push("["+i.slice(s.index)+"]")}return function(e,t,r,n){var i=0;if(e.length>0&&"[]"===e[e.length-1]){var a=e.slice(0,-1).join("");i=Array.isArray(t)&&t[a]?t[a].length:0}for(var s=n?t:cg(t,r,i),o=e.length-1;o>=0;--o){var l,u=e[o];if("[]"===u&&r.parseArrays)l=r.allowEmptyArrays&&(""===s||r.strictNullHandling&&null===s)?[]:ag.combine([],s);else{l=r.plainObjects?{__proto__:null}:{};var c="["===u.charAt(0)&&"]"===u.charAt(u.length-1)?u.slice(1,-1):u,d=r.decodeDotInKeys?c.replace(/%2E/g,"."):c,h=parseInt(d,10);r.parseArrays||""!==d?!isNaN(h)&&u!==d&&String(h)===d&&h>=0&&r.parseArrays&&h<=r.arrayLimit?(l=[])[h]=s:"__proto__"!==d&&(l[d]=s):l={0:s}}s=l}return s}(l,t,r,n)}},hg=function(e,t){var r,n=e,i=function(e){if(!e)return rg;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.encodeDotInKeys&&"boolean"!=typeof e.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||rg.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=Wy.default;if(void 0!==e.format){if(!Yy.call(Wy.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n,i=Wy.formatters[r],a=rg.filter;if(("function"==typeof e.filter||Zy(e.filter))&&(a=e.filter),n=e.arrayFormat in Ky?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":rg.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var s=void 0===e.allowDots?!0===e.encodeDotInKeys||rg.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:rg.addQueryPrefix,allowDots:s,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:rg.allowEmptyArrays,arrayFormat:n,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:rg.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:void 0===e.delimiter?rg.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:rg.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:rg.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:rg.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:rg.encodeValuesOnly,filter:a,format:r,formatter:i,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:rg.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:rg.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:rg.strictNullHandling}}(t);"function"==typeof i.filter?n=(0,i.filter)("",n):Zy(i.filter)&&(r=i.filter);var a=[];if("object"!=typeof n||null===n)return"";var s=Ky[i.arrayFormat],o="comma"===s&&i.commaRoundTrip;r||(r=Object.keys(n)),i.sort&&r.sort(i.sort);for(var l=Xy(),u=0;u<r.length;++u){var c=r[u],d=n[c];i.skipNulls&&null===d||Jy(a,ig(d,c,s,o,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,l))}var h=a.join(i.delimiter),f=!0===i.addQueryPrefix?"?":"";return i.charsetSentinel&&("iso-8859-1"===i.charset?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),h.length>0?f+h:""},fg=function(e,t){var r=function(e){if(!e)return lg;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.decodeDotInKeys&&"boolean"!=typeof e.decodeDotInKeys)throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(void 0!==e.throwOnLimitExceeded&&"boolean"!=typeof e.throwOnLimitExceeded)throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var t=void 0===e.charset?lg.charset:e.charset,r=void 0===e.duplicates?lg.duplicates:e.duplicates;if("combine"!==r&&"first"!==r&&"last"!==r)throw new TypeError("The duplicates option must be either combine, first, or last");return{allowDots:void 0===e.allowDots?!0===e.decodeDotInKeys||lg.allowDots:!!e.allowDots,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:lg.allowEmptyArrays,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:lg.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:lg.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:lg.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:lg.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:lg.comma,decodeDotInKeys:"boolean"==typeof e.decodeDotInKeys?e.decodeDotInKeys:lg.decodeDotInKeys,decoder:"function"==typeof e.decoder?e.decoder:lg.decoder,delimiter:"string"==typeof e.delimiter||ag.isRegExp(e.delimiter)?e.delimiter:lg.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:lg.depth,duplicates:r,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:lg.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:lg.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:lg.plainObjects,strictDepth:"boolean"==typeof e.strictDepth?!!e.strictDepth:lg.strictDepth,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:lg.strictNullHandling,throwOnLimitExceeded:"boolean"==typeof e.throwOnLimitExceeded&&e.throwOnLimitExceeded}}(t);if(""===e||null==e)return r.plainObjects?{__proto__:null}:{};for(var n="string"==typeof e?function(e,t){var r={__proto__:null},n=t.ignoreQueryPrefix?e.replace(/^\?/,""):e;n=n.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var i=t.parameterLimit===1/0?void 0:t.parameterLimit,a=n.split(t.delimiter,t.throwOnLimitExceeded?i+1:i);if(t.throwOnLimitExceeded&&a.length>i)throw new RangeError("Parameter limit exceeded. Only "+i+" parameter"+(1===i?"":"s")+" allowed.");var s,o=-1,l=t.charset;if(t.charsetSentinel)for(s=0;s<a.length;++s)0===a[s].indexOf("utf8=")&&("utf8=%E2%9C%93"===a[s]?l="utf-8":"utf8=%26%2310003%3B"===a[s]&&(l="iso-8859-1"),o=s,s=a.length);for(s=0;s<a.length;++s)if(s!==o){var u,c,d=a[s],h=d.indexOf("]="),f=-1===h?d.indexOf("="):h+1;-1===f?(u=t.decoder(d,lg.decoder,l,"key"),c=t.strictNullHandling?null:""):(u=t.decoder(d.slice(0,f),lg.decoder,l,"key"),c=ag.maybeMap(cg(d.slice(f+1),t,og(r[u])?r[u].length:0),function(e){return t.decoder(e,lg.decoder,l,"value")})),c&&t.interpretNumericEntities&&"iso-8859-1"===l&&(c=ug(String(c))),d.indexOf("[]=")>-1&&(c=og(c)?[c]:c);var p=sg.call(r,u);p&&"combine"===t.duplicates?r[u]=ag.combine(r[u],c):p&&"last"!==t.duplicates||(r[u]=c)}return r}(e,r):e,i=r.plainObjects?{__proto__:null}:{},a=Object.keys(n),s=0;s<a.length;++s){var o=a[s],l=dg(o,n[o],r,"string"==typeof e);i=ag.merge(i,l,r)}return!0===r.allowSparse?i:ag.compact(i)},pg={formats:By,parse:fg,stringify:hg},mg=lf;function yg(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var gg=/^([a-z0-9.+-]+:)/i,_g=/:[0-9]*$/,vg=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,bg=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),wg=["'"].concat(bg),xg=["%","/","?",";","#"].concat(wg),Ig=["/","?","#"],Tg=/^[+a-z0-9A-Z_-]{0,63}$/,Eg=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Ag={javascript:!0,"javascript:":!0},Sg={javascript:!0,"javascript:":!0},kg={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Cg=pg;yg.prototype.parse=function(e,t,r){if("string"!=typeof e)throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),i=-1!==n&&n<e.indexOf("#")?"?":"#",a=e.split(i);a[0]=a[0].replace(/\\/g,"/");var s=e=a.join(i);if(s=s.trim(),!r&&1===e.split("#").length){var o=vg.exec(s);if(o)return this.path=s,this.href=s,this.pathname=o[1],o[2]?(this.search=o[2],this.query=t?Cg.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var l=gg.exec(s);if(l){var u=(l=l[0]).toLowerCase();this.protocol=u,s=s.substr(l.length)}if(r||l||s.match(/^\/\/[^@/]+@[^@/]+/)){var c="//"===s.substr(0,2);!c||l&&Sg[l]||(s=s.substr(2),this.slashes=!0)}if(!Sg[l]&&(c||l&&!kg[l])){for(var d,h,f=-1,p=0;p<Ig.length;p++){-1!==(m=s.indexOf(Ig[p]))&&(-1===f||m<f)&&(f=m)}-1!==(h=-1===f?s.lastIndexOf("@"):s.lastIndexOf("@",f))&&(d=s.slice(0,h),s=s.slice(h+1),this.auth=decodeURIComponent(d)),f=-1;for(p=0;p<xg.length;p++){var m;-1!==(m=s.indexOf(xg[p]))&&(-1===f||m<f)&&(f=m)}-1===f&&(f=s.length),this.host=s.slice(0,f),s=s.slice(f),this.parseHost(),this.hostname=this.hostname||"";var y="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!y)for(var g=this.hostname.split(/\./),_=(p=0,g.length);p<_;p++){var v=g[p];if(v&&!v.match(Tg)){for(var b="",w=0,x=v.length;w<x;w++)v.charCodeAt(w)>127?b+="x":b+=v[w];if(!b.match(Tg)){var I=g.slice(0,p),T=g.slice(p+1),E=v.match(Eg);E&&(I.push(E[1]),T.unshift(E[2])),T.length&&(s="/"+T.join(".")+s),this.hostname=I.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=mg.toASCII(this.hostname));var A=this.port?":"+this.port:"",S=this.hostname||"";this.host=S+A,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!Ag[u])for(p=0,_=wg.length;p<_;p++){var k=wg[p];if(-1!==s.indexOf(k)){var C=encodeURIComponent(k);C===k&&(C=escape(k)),s=s.split(k).join(C)}}var P=s.indexOf("#");-1!==P&&(this.hash=s.substr(P),s=s.slice(0,P));var R=s.indexOf("?");if(-1!==R?(this.search=s.substr(R),this.query=s.substr(R+1),t&&(this.query=Cg.parse(this.query)),s=s.slice(0,R)):t&&(this.search="",this.query={}),s&&(this.pathname=s),kg[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){A=this.pathname||"";var M=this.search||"";this.path=A+M}return this.href=this.format(),this},yg.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,a="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&"object"==typeof this.query&&Object.keys(this.query).length&&(a=Cg.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var s=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||kg[t])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),t+i+(r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(s=s.replace("#","%23"))+n},yg.prototype.resolve=function(e){return this.resolveObject(function(e,t,r){if(e&&"object"==typeof e&&e instanceof yg)return e;var n=new yg;return n.parse(e,t,r),n}(e,!1,!0)).format()},yg.prototype.resolveObject=function(e){if("string"==typeof e){var t=new yg;t.parse(e,!1,!0),e=t}for(var r=new yg,n=Object.keys(this),i=0;i<n.length;i++){var a=n[i];r[a]=this[a]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),o=0;o<s.length;o++){var l=s[o];"protocol"!==l&&(r[l]=e[l])}return kg[r.protocol]&&r.hostname&&!r.pathname&&(r.pathname="/",r.path=r.pathname),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!kg[e.protocol]){for(var u=Object.keys(e),c=0;c<u.length;c++){var d=u[c];r[d]=e[d]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||Sg[e.protocol])r.pathname=e.pathname;else{for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),r.pathname=h.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var f=r.pathname||"",p=r.search||"";r.path=f+p}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var m=r.pathname&&"/"===r.pathname.charAt(0),y=e.host||e.pathname&&"/"===e.pathname.charAt(0),g=y||m||r.host&&e.pathname,_=g,v=r.pathname&&r.pathname.split("/")||[],b=(h=e.pathname&&e.pathname.split("/")||[],r.protocol&&!kg[r.protocol]);if(b&&(r.hostname="",r.port=null,r.host&&(""===v[0]?v[0]=r.host:v.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),g=g&&(""===h[0]||""===v[0])),y)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,v=h;else if(h.length)v||(v=[]),v.pop(),v=v.concat(h),r.search=e.search,r.query=e.query;else if(null!=e.search){if(b)r.host=v.shift(),r.hostname=r.host,(E=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=E.shift(),r.hostname=E.shift(),r.host=r.hostname);return r.search=e.search,r.query=e.query,null===r.pathname&&null===r.search||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!v.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var w=v.slice(-1)[0],x=(r.host||e.host||v.length>1)&&("."===w||".."===w)||""===w,I=0,T=v.length;T>=0;T--)"."===(w=v[T])?v.splice(T,1):".."===w?(v.splice(T,1),I++):I&&(v.splice(T,1),I--);if(!g&&!_)for(;I--;I)v.unshift("..");!g||""===v[0]||v[0]&&"/"===v[0].charAt(0)||v.unshift(""),x&&"/"!==v.join("/").substr(-1)&&v.push("");var E,A=""===v[0]||v[0]&&"/"===v[0].charAt(0);b&&(r.hostname=A?"":v.length?v.shift():"",r.host=r.hostname,(E=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=E.shift(),r.hostname=E.shift(),r.host=r.hostname));return(g=g||r.host&&v.length)&&!A&&v.unshift(""),v.length>0?r.pathname=v.join("/"):(r.pathname=null,r.path=null),null===r.pathname&&null===r.search||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},yg.prototype.parseHost=function(){var e=this.host,t=_g.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const Pg={};function Rg(e,t,r=3){if(Pg[t])return;let n=(new Error).stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}\nDeprecated since v${e}`):(n=n.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}\nDeprecated since v${e}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}\nDeprecated since v${e}`),console.warn(n))),Pg[t]=!0}let Mg;var Lg={grad:.9,turn:360,rad:360/(2*Math.PI)},Og=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},Fg=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=Math.pow(10,t)),Math.round(r*e)/r+0},Dg=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=1),e>r?r:e>t?e:t},Ng=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},Bg=function(e){return{r:Dg(e.r,0,255),g:Dg(e.g,0,255),b:Dg(e.b,0,255),a:Dg(e.a)}},Ug=function(e){return{r:Fg(e.r),g:Fg(e.g),b:Fg(e.b),a:Fg(e.a,3)}},jg=/^#([0-9a-f]{3,8})$/i,Gg=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},zg=function(e){var t=e.r,r=e.g,n=e.b,i=e.a,a=Math.max(t,r,n),s=a-Math.min(t,r,n),o=s?a===t?(r-n)/s:a===r?2+(n-t)/s:4+(t-r)/s:0;return{h:60*(o<0?o+6:o),s:a?s/a*100:0,v:a/255*100,a:i}},Hg=function(e){var t=e.h,r=e.s,n=e.v,i=e.a;t=t/360*6,r/=100,n/=100;var a=Math.floor(t),s=n*(1-r),o=n*(1-(t-a)*r),l=n*(1-(1-t+a)*r),u=a%6;return{r:255*[n,o,s,s,l,n][u],g:255*[l,n,n,o,s,s][u],b:255*[s,s,l,n,n,o][u],a:i}},Vg=function(e){return{h:Ng(e.h),s:Dg(e.s,0,100),l:Dg(e.l,0,100),a:Dg(e.a)}},$g=function(e){return{h:Fg(e.h),s:Fg(e.s),l:Fg(e.l),a:Fg(e.a,3)}},Xg=function(e){return Hg((r=(t=e).s,{h:t.h,s:(r*=((n=t.l)<50?n:100-n)/100)>0?2*r/(n+r)*100:0,v:n+r,a:t.a}));var t,r,n},qg=function(e){return{h:(t=zg(e)).h,s:(i=(200-(r=t.s))*(n=t.v)/100)>0&&i<200?r*n/100/(i<=100?i:200-i)*100:0,l:i/2,a:t.a};var t,r,n,i},Wg=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Yg=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Kg=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Zg=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Qg={string:[[function(e){var t=jg.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?Fg(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?Fg(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=Kg.exec(e)||Zg.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:Bg({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=Wg.exec(e)||Yg.exec(e);if(!t)return null;var r,n,i=Vg({h:(r=t[1],n=t[2],void 0===n&&(n="deg"),Number(r)*(Lg[n]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)});return Xg(i)},"hsl"]],object:[[function(e){var t=e.r,r=e.g,n=e.b,i=e.a,a=void 0===i?1:i;return Og(t)&&Og(r)&&Og(n)?Bg({r:Number(t),g:Number(r),b:Number(n),a:Number(a)}):null},"rgb"],[function(e){var t=e.h,r=e.s,n=e.l,i=e.a,a=void 0===i?1:i;if(!Og(t)||!Og(r)||!Og(n))return null;var s=Vg({h:Number(t),s:Number(r),l:Number(n),a:Number(a)});return Xg(s)},"hsl"],[function(e){var t=e.h,r=e.s,n=e.v,i=e.a,a=void 0===i?1:i;if(!Og(t)||!Og(r)||!Og(n))return null;var s,o=(s={h:Number(t),s:Number(r),v:Number(n),a:Number(a)},{h:Ng(s.h),s:Dg(s.s,0,100),v:Dg(s.v,0,100),a:Dg(s.a)});return Hg(o)},"hsv"]]},Jg=function(e,t){for(var r=0;r<t.length;r++){var n=t[r][0](e);if(n)return[n,t[r][1]]}return[null,void 0]},e_=function(e,t){var r=qg(e);return{h:r.h,s:Dg(r.s+100*t,0,100),l:r.l,a:r.a}},t_=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},r_=function(e,t){var r=qg(e);return{h:r.h,s:r.s,l:Dg(r.l+100*t,0,100),a:r.a}},n_=function(){function e(e){this.parsed=function(e){return"string"==typeof e?Jg(e.trim(),Qg.string):"object"==typeof e&&null!==e?Jg(e,Qg.object):[null,void 0]}(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return Fg(t_(this.rgba),2)},e.prototype.isDark=function(){return t_(this.rgba)<.5},e.prototype.isLight=function(){return t_(this.rgba)>=.5},e.prototype.toHex=function(){return t=(e=Ug(this.rgba)).r,r=e.g,n=e.b,a=(i=e.a)<1?Gg(Fg(255*i)):"","#"+Gg(t)+Gg(r)+Gg(n)+a;var e,t,r,n,i,a},e.prototype.toRgb=function(){return Ug(this.rgba)},e.prototype.toRgbString=function(){return t=(e=Ug(this.rgba)).r,r=e.g,n=e.b,(i=e.a)<1?"rgba("+t+", "+r+", "+n+", "+i+")":"rgb("+t+", "+r+", "+n+")";var e,t,r,n,i},e.prototype.toHsl=function(){return $g(qg(this.rgba))},e.prototype.toHslString=function(){return t=(e=$g(qg(this.rgba))).h,r=e.s,n=e.l,(i=e.a)<1?"hsla("+t+", "+r+"%, "+n+"%, "+i+")":"hsl("+t+", "+r+"%, "+n+"%)";var e,t,r,n,i},e.prototype.toHsv=function(){return e=zg(this.rgba),{h:Fg(e.h),s:Fg(e.s),v:Fg(e.v),a:Fg(e.a,3)};var e},e.prototype.invert=function(){return i_({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},e.prototype.saturate=function(e){return void 0===e&&(e=.1),i_(e_(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),i_(e_(this.rgba,-e))},e.prototype.grayscale=function(){return i_(e_(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),i_(r_(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),i_(r_(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){return"number"==typeof e?i_({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Fg(this.rgba.a,3);var t},e.prototype.hue=function(e){var t=qg(this.rgba);return"number"==typeof e?i_({h:e,s:t.s,l:t.l,a:t.a}):Fg(t.h)},e.prototype.isEqual=function(e){return this.toHex()===i_(e).toHex()},e}(),i_=function(e){return e instanceof n_?e:new n_(e)},a_=[];[function(e,t){var r={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var i in r)n[r[i]]=i;var a={};e.prototype.toName=function(t){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var i,s,o=n[this.toHex()];if(o)return o;if(null==t?void 0:t.closest){var l=this.toRgb(),u=1/0,c="black";if(!a.length)for(var d in r)a[d]=new e(r[d]).toRgb();for(var h in r){var f=(i=l,s=a[h],Math.pow(i.r-s.r,2)+Math.pow(i.g-s.g,2)+Math.pow(i.b-s.b,2));f<u&&(u=f,c=h)}return c}},t.string.push([function(t){var n=t.toLowerCase(),i="transparent"===n?"#0000":r[n];return i?new e(i).toRgb():null},"name"])}].forEach(function(e){a_.indexOf(e)<0&&(e(n_,Qg),a_.push(e))});const s_=class e{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(t){if(t instanceof e)this._value=this.cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(null===t)throw new Error("Cannot set PIXI.Color#value to null");(null===this._value||!this.isSourceEqual(this._value,t))&&(this.normalize(t),this._value=this.cloneSource(t))}}get value(){return this._value}cloneSource(e){return"string"==typeof e||"number"==typeof e||e instanceof Number||null===e?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):"object"==typeof e&&null!==e?{...e}:e}isSourceEqual(e,t){const r=typeof e;if(r!==typeof t)return!1;if("number"===r||"string"===r||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length===t.length&&e.every((e,r)=>e===t[r]);if(null!==e&&null!==t){const r=Object.keys(e),n=Object.keys(t);return r.length===n.length&&r.every(r=>e[r]===t[r])}return e===t}toRgba(){const[e,t,r,n]=this._components;return{r:e,g:t,b:r,a:n}}toRgb(){const[e,t,r]=this._components;return{r:e,g:t,b:r}}toRgbaString(){const[e,t,r]=this.toUint8RgbArray();return`rgba(${e},${t},${r},${this.alpha})`}toUint8RgbArray(e){const[t,r,n]=this._components;return(e=e??[])[0]=Math.round(255*t),e[1]=Math.round(255*r),e[2]=Math.round(255*n),e}toRgbArray(e){e=e??[];const[t,r,n]=this._components;return e[0]=t,e[1]=r,e[2]=n,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(65280&e)+((255&e)<<16)}multiply(t){const[r,n,i,a]=e.temp.setValue(t)._components;return this._components[0]*=r,this._components[1]*=n,this._components[2]*=i,this._components[3]*=a,this.refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(1===e)return(255<<24)+this._int;if(0===e)return t?0:this._int;let r=this._int>>16&255,n=this._int>>8&255,i=255&this._int;return t&&(r=r*e+.5|0,n=n*e+.5|0,i=i*e+.5|0),(255*e<<24)+(r<<16)+(n<<8)+i}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const e=Math.round(255*this._components[3]).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[t,r,n]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(r*e)/e,this._components[2]=Math.round(n*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[t,r,n,i]=this._components;return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}normalize(t){let r,n,i,a;if(("number"==typeof t||t instanceof Number)&&t>=0&&t<=16777215){r=(t>>16&255)/255,n=(t>>8&255)/255,i=(255&t)/255,a=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[r,n,i,a=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[r,n,i,a=255]=t,r/=255,n/=255,i/=255,a/=255;else if("string"==typeof t||"object"==typeof t){if("string"==typeof t){const r=e.HEX_PATTERN.exec(t);r&&(t=`#${r[2]}`)}const s=i_(t);s.isValid()&&(({r:r,g:n,b:i,a:a}=s.rgba),r/=255,n/=255,i/=255)}if(void 0===r)throw new Error(`Unable to convert color ${t}`);this._components[0]=r,this._components[1]=n,this._components[2]=i,this._components[3]=a,this.refreshInt()}refreshInt(){this._clamp(this._components);const[e,t,r]=this._components;this._int=(255*e<<16)+(255*t<<8)+(255*r|0)}_clamp(e,t=0,r=1){return"number"==typeof e?Math.min(Math.max(e,t),r):(e.forEach((n,i)=>{e[i]=Math.min(Math.max(n,t),r)}),e)}};s_.shared=new s_,s_.temp=new s_,s_.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let o_=s_;const l_=function(){const e=[],t=[];for(let n=0;n<32;n++)e[n]=n,t[n]=n;e[Yd.NORMAL_NPM]=Yd.NORMAL,e[Yd.ADD_NPM]=Yd.ADD,e[Yd.SCREEN_NPM]=Yd.SCREEN,t[Yd.NORMAL]=Yd.NORMAL_NPM,t[Yd.ADD]=Yd.ADD_NPM,t[Yd.SCREEN]=Yd.SCREEN_NPM;const r=[];return r.push(t),r.push(e),r}();function u_(e){if(4===e.BYTES_PER_ELEMENT)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===e.BYTES_PER_ELEMENT){if(e instanceof Uint16Array)return"Uint16Array"}else if(1===e.BYTES_PER_ELEMENT&&e instanceof Uint8Array)return"Uint8Array";return null}function c_(e){return e+=0===e?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1}function d_(e){return!(e&e-1||!e)}function h_(e){let t=(e>65535?1:0)<<4,r=((e>>>=t)>255?1:0)<<3;return t|=r,r=((e>>>=r)>15?1:0)<<2,t|=r,r=((e>>>=r)>3?1:0)<<1,t|=r,t|(e>>>=r)>>1}function f_(e,t,r){const n=e.length;let i;if(t>=n||0===r)return;const a=n-(r=t+r>n?n-t:r);for(i=t;i<a;++i)e[i]=e[i+r];e.length=a}let p_=0;function m_(){return++p_}const y_={},g_=Object.create(null),__=Object.create(null);function v_(e,t=1){const r=hh.RETINA_PREFIX?.exec(e);return r?parseFloat(r[1]):t}var b_=(e=>(e.Renderer="renderer",e.Application="application",e.RendererSystem="renderer-webgl-system",e.RendererPlugin="renderer-webgl-plugin",e.CanvasRendererSystem="renderer-canvas-system",e.CanvasRendererPlugin="renderer-canvas-plugin",e.Asset="asset",e.LoadParser="load-parser",e.ResolveParser="resolve-parser",e.CacheParser="cache-parser",e.DetectionParser="detection-parser",e))(b_||{});const w_=e=>{if("function"==typeof e||"object"==typeof e&&e.extension){if(!e.extension)throw new Error("Extension class must have an extension object");e={..."object"!=typeof e.extension?{type:e.extension}:e.extension,ref:e}}if("object"!=typeof e)throw new Error("Invalid extension type");return"string"==typeof(e={...e}).type&&(e.type=[e.type]),e},x_=(e,t)=>w_(e).priority??t,I_={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...e){return e.map(w_).forEach(e=>{e.type.forEach(t=>this._removeHandlers[t]?.(e))}),this},add(...e){return e.map(w_).forEach(e=>{e.type.forEach(t=>{const r=this._addHandlers,n=this._queue;r[t]?r[t]?.(e):(n[t]=n[t]||[],n[t]?.push(e))})}),this},handle(e,t,r){const n=this._addHandlers,i=this._removeHandlers;if(n[e]||i[e])throw new Error(`Extension type ${e} already has a handler`);n[e]=t,i[e]=r;const a=this._queue;return a[e]&&(a[e]?.forEach(e=>t(e)),delete a[e]),this},handleByMap(e,t){return this.handle(e,e=>{e.name&&(t[e.name]=e.ref)},e=>{e.name&&delete t[e.name]})},handleByList(e,t,r=-1){return this.handle(e,e=>{t.includes(e.ref)||(t.push(e.ref),t.sort((e,t)=>x_(t,r)-x_(e,r)))},e=>{const r=t.indexOf(e.ref);-1!==r&&t.splice(r,1)})}};class T_{constructor(e){"number"==typeof e?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const E_=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function A_(e){let t="";for(let r=0;r<e;++r)r>0&&(t+="\nelse "),r<e-1&&(t+=`if(test == ${r}.0){}`);return t}class S_{constructor(){this.data=0,this.blendMode=Yd.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(1&this.data)}set blend(e){!!(1&this.data)!==e&&(this.data^=1)}get offsets(){return!!(2&this.data)}set offsets(e){!!(2&this.data)!==e&&(this.data^=2)}get culling(){return!!(4&this.data)}set culling(e){!!(4&this.data)!==e&&(this.data^=4)}get depthTest(){return!!(8&this.data)}set depthTest(e){!!(8&this.data)!==e&&(this.data^=8)}get depthMask(){return!!(32&this.data)}set depthMask(e){!!(32&this.data)!==e&&(this.data^=32)}get clockwiseFrontFace(){return!!(16&this.data)}set clockwiseFrontFace(e){!!(16&this.data)!==e&&(this.data^=16)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==Yd.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){const e=new S_;return e.depthTest=!1,e.blend=!0,e}}S_.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const k_=[];function C_(e,t){if(!e)return null;let r="";if("string"==typeof e){const t=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);t&&(r=t[1].toLowerCase())}for(let n=k_.length-1;n>=0;--n){const i=k_[n];if(i.test&&i.test(e,r))return new i(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class P_{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,t,r,n,i,a,s,o){if(arguments.length>8)throw new Error("max arguments reached");const{name:l,items:u}=this;this._aliasCount++;for(let c=0,d=u.length;c<d;c++)u[c][l](e,t,r,n,i,a,s,o);return u===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return 0===this.items.length}get name(){return this._name}}Object.defineProperties(P_.prototype,{dispatch:{value:P_.prototype.emit},run:{value:P_.prototype.emit}});class R_{constructor(e=0,t=0){this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new P_("setRealSize"),this.onUpdate=new P_("update"),this.onError=new P_("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,t,r){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,t){return!1}}class M_ extends R_{constructor(e,t){const{width:r,height:n}=t||{};if(!r||!n)throw new Error("BufferResource width or height invalid");super(r,n),this.data=e,this.unpackAlignment=t.unpackAlignment??4}upload(e,t,r){const n=e.gl;n.pixelStorei(n.UNPACK_ALIGNMENT,this.unpackAlignment),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===ih.UNPACK);const i=t.realWidth,a=t.realHeight;return r.width===i&&r.height===a?n.texSubImage2D(t.target,0,0,0,i,a,t.format,r.type,this.data):(r.width=i,r.height=a,n.texImage2D(t.target,0,r.internalFormat,i,a,0,t.format,r.type,this.data)),!0}dispose(){this.data=null}static test(e){return null===e||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}const L_={scaleMode:th.NEAREST,alphaMode:ih.NPM},O_=class e extends Mh{constructor(t=null,r=null){super(),r=Object.assign({},e.defaultOptions,r);const{alphaMode:n,mipmap:i,anisotropicLevel:a,scaleMode:s,width:o,height:l,wrapMode:u,format:c,type:d,target:h,resolution:f,resourceOptions:p}=r;t&&!(t instanceof R_)&&((t=C_(t,p)).internal=!0),this.resolution=f||hh.RESOLUTION,this.width=Math.round((o||0)*this.resolution)/this.resolution,this.height=Math.round((l||0)*this.resolution)/this.resolution,this._mipmap=i,this.anisotropicLevel=a,this._wrapMode=u,this._scaleMode=s,this.format=c,this.type=d,this.target=h,this.alphaMode=n,this.uid=m_(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=o>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let r;return void 0!==e&&e!==this.scaleMode&&(this.scaleMode=e,r=!0),void 0!==t&&t!==this.mipmap&&(this.mipmap=t,r=!0),r&&this.dirtyStyleId++,this}setSize(e,t,r){return r=r||this.resolution,this.setRealSize(e*r,t*r,r)}setRealSize(e,t,r){return this.resolution=r||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=d_(this.realWidth)&&d_(this.realHeight)}setResolution(e){const t=this.resolution;return t===e||(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT()),this}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete __[this.cacheId],delete g_[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,r,n=hh.STRICT_TEXTURE_CACHE){const i="string"==typeof t;let a=null;if(i)a=t;else{if(!t._pixiId){const e=r?.pixiIdPrefix||"pixiid";t._pixiId=`${e}_${m_()}`}a=t._pixiId}let s=__[a];if(i&&n&&!s)throw new Error(`The cacheId "${a}" does not exist in BaseTextureCache.`);return s||(s=new e(t,r),s.cacheId=a,e.addToCache(s,a)),s}static fromBuffer(t,r,n,i){t=t||new Float32Array(r*n*4);const a=new M_(t,{width:r,height:n,...i?.resourceOptions});let s,o;return t instanceof Float32Array?(s=Zd.RGBA,o=Jd.FLOAT):t instanceof Int32Array?(s=Zd.RGBA_INTEGER,o=Jd.INT):t instanceof Uint32Array?(s=Zd.RGBA_INTEGER,o=Jd.UNSIGNED_INT):t instanceof Int16Array?(s=Zd.RGBA_INTEGER,o=Jd.SHORT):t instanceof Uint16Array?(s=Zd.RGBA_INTEGER,o=Jd.UNSIGNED_SHORT):t instanceof Int8Array?(s=Zd.RGBA,o=Jd.BYTE):(s=Zd.RGBA,o=Jd.UNSIGNED_BYTE),a.internal=!0,new e(a,Object.assign({},L_,{type:o,format:s},i))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),__[t]&&__[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),__[t]=e)}static removeFromCache(e){if("string"==typeof e){const t=__[e];if(t){const r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete __[e],t}}else if(e?.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete __[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};O_.defaultOptions={mipmap:nh.POW2,anisotropicLevel:0,scaleMode:th.LINEAR,wrapMode:rh.CLAMP,alphaMode:ih.UNPACK,target:Qd.TEXTURE_2D,format:Zd.RGBA,type:Jd.UNSIGNED_BYTE},O_._globalBatch=0;let F_=O_;class D_{constructor(){this.texArray=null,this.blend=0,this.type=Kd.TRIANGLES,this.start=0,this.size=0,this.data=null}}let N_=0,B_=class e{constructor(e,t=!0,r=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=t,this.id=N_++,this.disposeRunner=new P_("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?ch.ELEMENT_ARRAY_BUFFER:ch.ARRAY_BUFFER}get index(){return this.type===ch.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new e(t)}};class U_{constructor(e,t=0,r=!1,n=Jd.FLOAT,i,a,s,o=1){this.buffer=e,this.size=t,this.normalized=r,this.type=n,this.stride=i,this.start=a,this.instance=s,this.divisor=o}destroy(){this.buffer=null}static from(e,t,r,n,i){return new U_(e,t,r,n,i)}}const j_={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};const G_={5126:4,5123:2,5121:1};let z_=0;const H_={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array};class V_{constructor(e=[],t={}){this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=z_++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new P_("disposeGeometry"),this.refCount=0}addAttribute(e,t,r=0,n=!1,i,a,s,o=!1){if(!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof B_||(t instanceof Array&&(t=new Float32Array(t)),t=new B_(t));const l=e.split("|");if(l.length>1){for(let e=0;e<l.length;e++)this.addAttribute(l[e],t,r,n,i);return this}let u=this.buffers.indexOf(t);return-1===u&&(this.buffers.push(t),u=this.buffers.length-1),this.attributes[e]=new U_(u,r,n,i,a,s,o),this.instanced=this.instanced||o,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof B_||(e instanceof Array&&(e=new Uint16Array(e)),e=new B_(e)),e.type=ch.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;const e=[],t=[],r=new B_;let n;for(n in this.attributes){const r=this.attributes[n],i=this.buffers[r.buffer];e.push(i.data),t.push(r.size*G_[r.type]/4),r.buffer=0}for(r.data=function(e,t){let r=0,n=0;const i={};for(let l=0;l<e.length;l++)n+=t[l],r+=e[l].length;const a=new ArrayBuffer(4*r);let s=null,o=0;for(let l=0;l<e.length;l++){const r=t[l],u=e[l],c=u_(u);i[c]||(i[c]=new j_[c](a)),s=i[c];for(let e=0;e<u.length;e++)s[(e/r|0)*n+o+e%r]=u[e];o+=r}return new Float32Array(a)}(e,t),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new V_;for(let t=0;t<this.buffers.length;t++)e.buffers[t]=new B_(this.buffers[t].data.slice(0));for(const t in this.attributes){const r=this.attributes[t];e.attributes[t]=new U_(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=ch.ELEMENT_ARRAY_BUFFER),e}static merge(e){const t=new V_,r=[],n=[],i=[];let a;for(let s=0;s<e.length;s++){a=e[s];for(let e=0;e<a.buffers.length;e++)n[e]=n[e]||0,n[e]+=a.buffers[e].data.length,i[e]=0}for(let s=0;s<a.buffers.length;s++)r[s]=new(H_[u_(a.buffers[s].data)])(n[s]),t.buffers[s]=new B_(r[s]);for(let s=0;s<e.length;s++){a=e[s];for(let e=0;e<a.buffers.length;e++)r[e].set(a.buffers[e].data,i[e]),i[e]+=a.buffers[e].data.length}if(t.attributes=a.attributes,a.indexBuffer){t.indexBuffer=t.buffers[a.buffers.indexOf(a.indexBuffer)],t.indexBuffer.type=ch.ELEMENT_ARRAY_BUFFER;let r=0,n=0,i=0,s=0;for(let e=0;e<a.buffers.length;e++)if(a.buffers[e]!==a.indexBuffer){s=e;break}for(const e in a.attributes){const t=a.attributes[e];(0|t.buffer)===s&&(n+=t.size*G_[t.type]/4)}for(let a=0;a<e.length;a++){const o=e[a].indexBuffer.data;for(let e=0;e<o.length;e++)t.indexBuffer.data[e+i]+=r;r+=e[a].buffers[s].data.length/n,i+=o.length}}return t}}class $_ extends V_{constructor(e=!1){super(),this._buffer=new B_(null,e,!1),this._indexBuffer=new B_(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,Jd.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,Jd.FLOAT).addAttribute("aColor",this._buffer,4,!0,Jd.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Jd.FLOAT).addIndex(this._indexBuffer)}}const X_=2*Math.PI,q_=180/Math.PI,W_=Math.PI/180;var Y_=(e=>(e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC",e))(Y_||{});class K_{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new K_(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}}K_.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const Z_=[new K_,new K_,new K_,new K_];class Q_{constructor(e=0,t=0,r=0,n=0){this.x=Number(e),this.y=Number(t),this.width=Number(r),this.height=Number(n),this.type=Y_.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Q_(0,0,0,0)}clone(){return new Q_(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,t){return!(this.width<=0||this.height<=0)&&(e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height)}intersects(e,t){if(!t){const t=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=t)return!1;const r=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>r}const r=this.left,n=this.right,i=this.top,a=this.bottom;if(n<=r||a<=i)return!1;const s=Z_[0].set(e.left,e.top),o=Z_[1].set(e.left,e.bottom),l=Z_[2].set(e.right,e.top),u=Z_[3].set(e.right,e.bottom);if(l.x<=s.x||o.y<=s.y)return!1;const c=Math.sign(t.a*t.d-t.b*t.c);if(0===c||(t.apply(s,s),t.apply(o,o),t.apply(l,l),t.apply(u,u),Math.max(s.x,o.x,l.x,u.x)<=r||Math.min(s.x,o.x,l.x,u.x)>=n||Math.max(s.y,o.y,l.y,u.y)<=i||Math.min(s.y,o.y,l.y,u.y)>=a))return!1;const d=c*(o.y-s.y),h=c*(s.x-o.x),f=d*r+h*i,p=d*n+h*i,m=d*r+h*a,y=d*n+h*a;if(Math.max(f,p,m,y)<=d*s.x+h*s.y||Math.min(f,p,m,y)>=d*u.x+h*u.y)return!1;const g=c*(s.y-l.y),_=c*(l.x-s.x),v=g*r+_*i,b=g*n+_*i,w=g*r+_*a,x=g*n+_*a;return!(Math.max(v,b,w,x)<=g*s.x+_*s.y||Math.min(v,b,w,x)>=g*u.x+_*u.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this}fit(e){const t=Math.max(this.x,e.x),r=Math.min(this.x+this.width,e.x+e.width),n=Math.max(this.y,e.y),i=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(r-t,0),this.y=n,this.height=Math.max(i-n,0),this}ceil(e=1,t=.001){const r=Math.ceil((this.x+this.width-t)*e)/e,n=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=r-this.x,this.height=n-this.y,this}enlarge(e){const t=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),n=Math.min(this.y,e.y),i=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=r-t,this.y=n,this.height=i-n,this}}Q_.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class J_{constructor(e=1,t=0,r=0,n=1,i=0,a=0){this.array=null,this.a=e,this.b=t,this.c=r,this.d=n,this.tx=i,this.ty=a}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,r,n,i,a){return this.a=e,this.b=t,this.c=r,this.d=n,this.tx=i,this.ty=a,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const r=t||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(e,t){t=t||new K_;const r=e.x,n=e.y;return t.x=this.a*r+this.c*n+this.tx,t.y=this.b*r+this.d*n+this.ty,t}applyInverse(e,t){t=t||new K_;const r=1/(this.a*this.d+this.c*-this.b),n=e.x,i=e.y;return t.x=this.d*r*n+-this.c*r*i+(this.ty*this.c-this.tx*this.d)*r,t.y=this.a*r*i+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),r=Math.sin(e),n=this.a,i=this.c,a=this.tx;return this.a=n*t-this.b*r,this.b=n*r+this.b*t,this.c=i*t-this.d*r,this.d=i*r+this.d*t,this.tx=a*t-this.ty*r,this.ty=a*r+this.ty*t,this}append(e){const t=this.a,r=this.b,n=this.c,i=this.d;return this.a=e.a*t+e.b*n,this.b=e.a*r+e.b*i,this.c=e.c*t+e.d*n,this.d=e.c*r+e.d*i,this.tx=e.tx*t+e.ty*n+this.tx,this.ty=e.tx*r+e.ty*i+this.ty,this}setTransform(e,t,r,n,i,a,s,o,l){return this.a=Math.cos(s+l)*i,this.b=Math.sin(s+l)*i,this.c=-Math.sin(s-o)*a,this.d=Math.cos(s-o)*a,this.tx=e-(r*this.a+n*this.c),this.ty=t-(r*this.b+n*this.d),this}prepend(e){const t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){const t=this.a,r=this.c;this.a=t*e.a+this.b*e.c,this.b=t*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,r=this.b,n=this.c,i=this.d,a=e.pivot,s=-Math.atan2(-n,i),o=Math.atan2(r,t),l=Math.abs(s+o);return l<1e-5||Math.abs(X_-l)<1e-5?(e.rotation=o,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=s,e.skew.y=o),e.scale.x=Math.sqrt(t*t+r*r),e.scale.y=Math.sqrt(n*n+i*i),e.position.x=this.tx+(a.x*t+a.y*n),e.position.y=this.ty+(a.x*r+a.y*i),e}invert(){const e=this.a,t=this.b,r=this.c,n=this.d,i=this.tx,a=e*n-t*r;return this.a=n/a,this.b=-t/a,this.c=-r/a,this.d=e/a,this.tx=(r*this.ty-n*i)/a,this.ty=-(e*this.ty-t*i)/a,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new J_;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new J_}static get TEMP_MATRIX(){return new J_}}J_.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const ev=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],tv=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],rv=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],nv=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],iv=[],av=[],sv=Math.sign;!function(){for(let e=0;e<16;e++){const t=[];iv.push(t);for(let r=0;r<16;r++){const n=sv(ev[e]*ev[r]+rv[e]*tv[r]),i=sv(tv[e]*ev[r]+nv[e]*tv[r]),a=sv(ev[e]*rv[r]+rv[e]*nv[r]),s=sv(tv[e]*rv[r]+nv[e]*nv[r]);for(let e=0;e<16;e++)if(ev[e]===n&&tv[e]===i&&rv[e]===a&&nv[e]===s){t.push(e);break}}}for(let e=0;e<16;e++){const t=new J_;t.set(ev[e],tv[e],rv[e],nv[e],0,0),av.push(t)}}();const ov={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:e=>ev[e],uY:e=>tv[e],vX:e=>rv[e],vY:e=>nv[e],inv:e=>8&e?15&e:7&-e,add:(e,t)=>iv[e][t],sub:(e,t)=>iv[e][ov.inv(t)],rotate180:e=>4^e,isVertical:e=>2==(3&e),byDirection:(e,t)=>2*Math.abs(e)<=Math.abs(t)?t>=0?ov.S:ov.N:2*Math.abs(t)<=Math.abs(e)?e>0?ov.E:ov.W:t>0?e>0?ov.SE:ov.SW:e>0?ov.NE:ov.NW,matrixAppendRotationInv:(e,t,r=0,n=0)=>{const i=av[ov.inv(t)];i.tx=r,i.ty=n,e.append(i)}};class lv{constructor(e,t,r=0,n=0){this._x=r,this._y=n,this.cb=e,this.scope=t}clone(e=this.cb,t=this.scope){return new lv(e,t,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}lv.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const uv=class{constructor(){this.worldTransform=new J_,this.localTransform=new J_,this.position=new lv(this.onChange,this,0,0),this.scale=new lv(this.onChange,this,1,1),this.pivot=new lv(this.onChange,this,0,0),this.skew=new lv(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(e){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){const r=e.worldTransform,n=this.worldTransform;n.a=t.a*r.a+t.b*r.c,n.b=t.a*r.b+t.b*r.d,n.c=t.c*r.a+t.d*r.c,n.d=t.c*r.b+t.d*r.d,n.tx=t.tx*r.a+t.ty*r.c+r.tx,n.ty=t.tx*r.b+t.ty*r.d+r.ty,this._parentID=e._worldID,this._worldID++}}setFromMatrix(e){e.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())}};uv.IDENTITY=new uv;let cv=uv;cv.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};function dv(e,t,r){const n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),n}function hv(e){const t=new Array(e);for(let r=0;r<t.length;r++)t[r]=!1;return t}function fv(e,t){switch(e){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return hv(2*t);case"bvec3":return hv(3*t);case"bvec4":return hv(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const pv=[{test:e=>"float"===e.type&&1===e.size&&!e.isArray,code:e=>`\n            if(uv["${e}"] !== ud["${e}"].value)\n            {\n                ud["${e}"].value = uv["${e}"]\n                gl.uniform1f(ud["${e}"].location, uv["${e}"])\n            }\n            `},{test:(e,t)=>!("sampler2D"!==e.type&&"samplerCube"!==e.type&&"sampler2DArray"!==e.type||1!==e.size||e.isArray||null!=t&&void 0===t.castToBaseTexture),code:e=>`t = syncData.textureCount++;\n\n            renderer.texture.bind(uv["${e}"], t);\n\n            if(ud["${e}"].value !== t)\n            {\n                ud["${e}"].value = t;\n                gl.uniform1i(ud["${e}"].location, t);\n; // eslint-disable-line max-len\n            }`},{test:(e,t)=>"mat3"===e.type&&1===e.size&&!e.isArray&&void 0!==t.a,code:e=>`\n            gl.uniformMatrix3fv(ud["${e}"].location, false, uv["${e}"].toArray(true));\n            `,codeUbo:e=>`\n                var ${e}_matrix = uv.${e}.toArray(true);\n\n                data[offset] = ${e}_matrix[0];\n                data[offset+1] = ${e}_matrix[1];\n                data[offset+2] = ${e}_matrix[2];\n        \n                data[offset + 4] = ${e}_matrix[3];\n                data[offset + 5] = ${e}_matrix[4];\n                data[offset + 6] = ${e}_matrix[5];\n        \n                data[offset + 8] = ${e}_matrix[6];\n                data[offset + 9] = ${e}_matrix[7];\n                data[offset + 10] = ${e}_matrix[8];\n            `},{test:(e,t)=>"vec2"===e.type&&1===e.size&&!e.isArray&&void 0!==t.x,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["${e}"].location, v.x, v.y);\n                }`,codeUbo:e=>`\n                v = uv.${e};\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            `},{test:e=>"vec2"===e.type&&1===e.size&&!e.isArray,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["${e}"].location, v[0], v[1]);\n                }\n            `},{test:(e,t)=>"vec4"===e.type&&1===e.size&&!e.isArray&&void 0!==t.width,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["${e}"].location, v.x, v.y, v.width, v.height)\n                }`,codeUbo:e=>`\n                    v = uv.${e};\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                `},{test:(e,t)=>"vec4"===e.type&&1===e.size&&!e.isArray&&void 0!==t.red,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)\n                {\n                    cv[0] = v.red;\n                    cv[1] = v.green;\n                    cv[2] = v.blue;\n                    cv[3] = v.alpha;\n                    gl.uniform4f(ud["${e}"].location, v.red, v.green, v.blue, v.alpha)\n                }`,codeUbo:e=>`\n                    v = uv.${e};\n\n                    data[offset] = v.red;\n                    data[offset+1] = v.green;\n                    data[offset+2] = v.blue;\n                    data[offset+3] = v.alpha;\n                `},{test:(e,t)=>"vec3"===e.type&&1===e.size&&!e.isArray&&void 0!==t.red,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)\n                {\n                    cv[0] = v.red;\n                    cv[1] = v.green;\n                    cv[2] = v.blue;\n    \n                    gl.uniform3f(ud["${e}"].location, v.red, v.green, v.blue)\n                }`,codeUbo:e=>`\n                    v = uv.${e};\n\n                    data[offset] = v.red;\n                    data[offset+1] = v.green;\n                    data[offset+2] = v.blue;\n                `},{test:e=>"vec4"===e.type&&1===e.size&&!e.isArray,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["${e}"].location, v[0], v[1], v[2], v[3])\n                }`}],mv={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",samplerCube:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",sampler2DArray:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }"},yv={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};const gv={};let _v,vv=gv;function bv(){if(!_v){_v=oh.MEDIUM;const e=function(){if(vv===gv||vv?.isContextLost()){const e=hh.ADAPTER.createCanvas();let t;hh.PREFER_ENV>=Xd.WEBGL2&&(t=e.getContext("webgl2",{})),t||(t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),vv=t}return vv}();if(e&&e.getShaderPrecisionFormat){const t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);t&&(_v=t.precision?oh.HIGH:oh.MEDIUM)}}return _v}function wv(e,t){const r=e.getShaderSource(t).split("\n").map((e,t)=>`${t}: ${e}`),n=e.getShaderInfoLog(t),i=n.split("\n"),a={},s=i.map(e=>parseFloat(e.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(e=>!(!e||a[e])&&(a[e]=!0,!0)),o=[""];s.forEach(e=>{r[e-1]=`%c${r[e-1]}%c`,o.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=r.join("\n");o[0]=l,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...o),console.groupEnd()}const xv={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Iv(e){return xv[e]}let Tv=null;const Ev={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Av(e,t){if(!Tv){const t=Object.keys(Ev);Tv={};for(let r=0;r<t.length;++r){const n=t[r];Tv[e[n]]=Ev[n]}}return Tv[t]}function Sv(e,t,r){if("precision"!==e.substring(0,9)){let n=t;return t===oh.HIGH&&r!==oh.HIGH&&(n=oh.MEDIUM),`precision ${n} float;\n${e}`}return r!==oh.HIGH&&"precision highp"===e.substring(0,15)?e.replace("precision highp","precision mediump"):e}let kv;let Cv=0;const Pv={},Rv=class e{constructor(t,r,n="pixi-shader",i={}){this.extra={},this.id=Cv++,this.vertexSrc=t||e.defaultVertexSrc,this.fragmentSrc=r||e.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=i,"#version"!==this.vertexSrc.substring(0,8)&&(n=n.replace(/\s+/g,"-"),Pv[n]?(Pv[n]++,n+=`-${Pv[n]}`):Pv[n]=1,this.vertexSrc=`#define SHADER_NAME ${n}\n${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${n}\n${this.fragmentSrc}`,this.vertexSrc=Sv(this.vertexSrc,e.defaultVertexPrecision,oh.HIGH),this.fragmentSrc=Sv(this.fragmentSrc,e.defaultFragmentPrecision,bv())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"}static from(t,r,n){const i=t+r;let a=y_[i];return a||(y_[i]=a=new e(t,r,n)),a}};Rv.defaultVertexPrecision=oh.HIGH,Rv.defaultFragmentPrecision=Ph.apple.device?oh.HIGH:oh.MEDIUM;let Mv=Rv,Lv=0;class Ov{constructor(e,t,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Lv++,this.static=!!t,this.ubo=!!r,e instanceof B_?(this.buffer=e,this.buffer.type=ch.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new B_(new Float32Array(1)),this.buffer.type=ch.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,t,r){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[e]=new Ov(t,r)}static from(e,t,r){return new Ov(e,t,r)}static uboFrom(e,t){return new Ov(e,t??!0,!0)}}class Fv{constructor(e,t){this.uniformBindCount=0,this.program=e,this.uniformGroup=t?t instanceof Ov?t:new Ov(t):new Ov({}),this.disposeRunner=new P_("disposeShader")}checkUniformExists(e,t){if(t.uniforms[e])return!0;for(const r in t.uniforms){const n=t.uniforms[r];if(!0===n.group&&this.checkUniformExists(e,n))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,t,r){const n=Mv.from(e,t);return new Fv(n,r)}}class Dv{constructor(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},!t.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!t.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const t=new Int32Array(e);for(let n=0;n<e;n++)t[n]=n;this.defaultGroupCache[e]=Ov.from({uSamplers:t},!0);let r=this.fragTemplate;r=r.replace(/%count%/gi,`${e}`),r=r.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Mv(this.vertexSrc,r)}const t={tint:new Float32Array([1,1,1,1]),translationMatrix:new J_,default:this.defaultGroupCache[e]};return new Fv(this.programCache[e],t)}generateSampleSrc(e){let t="";t+="\n",t+="\n";for(let r=0;r<e;r++)r>0&&(t+="\nelse "),r<e-1&&(t+=`if(vTextureId < ${r}.5)`),t+="\n{",t+=`\n\tcolor = texture2D(uSamplers[${r}], vTextureCoord);`,t+="\n}";return t+="\n",t+="\n",t}}class Nv{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}class Bv{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}const Uv=class e extends Bv{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=$_,this.vertexSize=6,this.state=S_.for2d(),this.size=4*e.defaultBatchSize,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??function(e){let t=!0;const r=hh.ADAPTER.getNavigator();if(Ph.tablet||Ph.phone){if(Ph.apple.device){const e=r.userAgent.match(/OS (\d+)_(\d+)?/);e&&parseInt(e[1],10)<11&&(t=!1)}if(Ph.android.device){const e=r.userAgent.match(/Android\s([0-9.]*)/);e&&parseInt(e[1],10)<7&&(t=!1)}}return t?e:4}(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??!Ph.apple.device,this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return Rg("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n"}static get defaultFragmentTemplate(){return"varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n"}setShaderGenerator({vertex:t=e.defaultVertexSrc,fragment:r=e.defaultFragmentTemplate}={}){this.shaderGenerator=new Dv(t,r)}contextChange(){const t=this.renderer.gl;hh.PREFER_ENV===Xd.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),e.defaultMaxTextures),this.maxTextures=function(e,t){if(0===e)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const r=t.createShader(t.FRAGMENT_SHADER);for(;;){const n=E_.replace(/%forloop%/gi,A_(e));if(t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS))break;e=e/2|0}return e}(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:r}=e,n=this.size/4,i=Math.floor(n/this.maxTextures)+1;for(;t.length<n;)t.push(new D_);for(;r.length<i;)r.push(new Nv);for(let e=0;e<this.maxTextures;e++)this._tempBoundTextures[e]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,maxTextures:r}=this,n=e._textureArrayPool,i=this.renderer.batch,a=this._tempBoundTextures,s=this.renderer.textureGC.count;let o=++F_._globalBatch,l=0,u=n[0],c=0;i.copyBoundTextures(a,r);for(let e=0;e<this._bufferSize;++e){const d=t[e];t[e]=null,d._batchEnabled!==o&&(u.count>=r&&(i.boundArray(u,a,o,r),this.buildDrawCalls(u,c,e),c=e,u=n[++l],++o),d._batchEnabled=o,d.touched=s,u.elements[u.count++]=d)}u.count>0&&(i.boundArray(u,a,o,r),this.buildDrawCalls(u,c,this._bufferSize),++l,++o);for(let e=0;e<a.length;e++)a[e]=null;F_._globalBatch=o}buildDrawCalls(t,r,n){const{_bufferedElements:i,_attributeBuffer:a,_indexBuffer:s,vertexSize:o}=this,l=e._drawCallPool;let u=this._dcIndex,c=this._aIndex,d=this._iIndex,h=l[u];h.start=this._iIndex,h.texArray=t;for(let e=r;e<n;++e){const n=i[e],f=n._texture.baseTexture,p=l_[f.alphaMode?1:0][n.blendMode];i[e]=null,r<e&&h.blend!==p&&(h.size=d-h.start,r=e,h=l[++u],h.texArray=t,h.start=d),this.packInterleavedGeometry(n,a,s,c,d),c+=n.vertexData.length/2*o,d+=n.indices.length,h.blend=p}r<n&&(h.size=d-h.start,++u),this._dcIndex=u,this._aIndex=c,this._iIndex=d}bindAndClearTexArray(e){const t=this.renderer.texture;for(let r=0;r<e.count;r++)t.bind(e.elements[r],e.ids[r]),e.elements[r]=null;e.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:r,_indexBuffer:n}=this;e.canUploadSameBuffer?(t[this._flushId]._buffer.update(r.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(r.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:r,state:n}=this.renderer,i=e._drawCallPool;let a=null;for(let e=0;e<t;e++){const{texArray:t,type:s,size:o,start:l,blend:u}=i[e];a!==t&&(a=t,this.bindAndClearTexArray(t)),this.state.blendMode=u,n.set(this.state),r.drawElements(s,o,r.UNSIGNED_SHORT,2*l)}}flush(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),e.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const t=c_(Math.ceil(e/8)),r=h_(t),n=8*t;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);let i=this._aBuffers[n];return i||(this._aBuffers[n]=i=new T_(n*this.vertexSize*4)),i}getIndexBuffer(e){const t=c_(Math.ceil(e/12)),r=h_(t),n=12*t;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);let i=this._iBuffers[r];return i||(this._iBuffers[r]=i=new Uint16Array(n)),i}packInterleavedGeometry(e,t,r,n,i){const{uint32View:a,float32View:s}=t,o=n/this.vertexSize,l=e.uvs,u=e.indices,c=e.vertexData,d=e._texture.baseTexture._batchLocation,h=Math.min(e.worldAlpha,1),f=o_.shared.setValue(e._tintRGB).toPremultiplied(h,e._texture.baseTexture.alphaMode>0);for(let p=0;p<c.length;p+=2)s[n++]=c[p],s[n++]=c[p+1],s[n++]=l[p],s[n++]=l[p+1],a[n++]=f,s[n++]=d;for(let p=0;p<u.length;p++)r[i++]=o+u[p]}};Uv.defaultBatchSize=4096,Uv.extension={name:"batch",type:b_.RendererPlugin},Uv._drawCallPool=[],Uv._textureArrayPool=[];let jv=Uv;I_.add(jv);const Gv=class e extends Fv{constructor(t,r,n){super(Mv.from(t||e.defaultVertexSrc,r||e.defaultFragmentSrc),n),this.padding=0,this.resolution=e.defaultResolution,this.multisample=e.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new S_}apply(e,t,r,n,i){e.applyFilter(this,t,r,n)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"}};Gv.defaultResolution=1,Gv.defaultMultisample=uh.NONE;let zv=Gv;class Hv{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new o_(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:t,background:r,backgroundAlpha:n}=e,i=r??t;void 0!==i&&(this.color=i),this.alpha=n}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}Hv.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},Hv.extension={type:[b_.RendererSystem,b_.CanvasRendererSystem],name:"background"},I_.add(Hv);class Vv{constructor(e){this.renderer=e,this.emptyRenderer=new Bv(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,t){const{boundTextures:r}=this.renderer.texture;for(let n=t-1;n>=0;--n)e[n]=r[n]||null,e[n]&&(e[n]._batchLocation=n)}boundArray(e,t,r,n){const{elements:i,ids:a,count:s}=e;let o=0;for(let l=0;l<s;l++){const e=i[l],s=e._batchLocation;if(s>=0&&s<n&&t[s]===e)a[l]=s;else for(;o<n;){const n=t[o];if(!n||n._batchEnabled!==r||n._batchLocation!==o){a[l]=o,e._batchLocation=o,t[o]=e;break}o++}}}destroy(){this.renderer=null}}Vv.extension={type:b_.RendererSystem,name:"batch"},I_.add(Vv);let $v=0;class Xv{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=$v++}init(e){if(e.context)this.initFromContext(e.context);else{const t=this.renderer.background.alpha<1,r=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:t,premultipliedAlpha:r,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=$v++,this.renderer.runners.contextChange.emit(e);const t=this.renderer.view;void 0!==t.addEventListener&&(t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const t=this.createContext(this.renderer.view,e);this.initFromContext(t)}createContext(e,t){let r;if(hh.PREFER_ENV>=Xd.WEBGL2&&(r=e.getContext("webgl2",t)),r)this.webGLVersion=2;else if(this.webGLVersion=1,r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),!r)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,t={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc")};1===this.webGLVersion?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,void 0!==e.removeEventListener&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const t=e.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const n=r||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}Xv.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},Xv.extension={type:b_.RendererSystem,name:"context"},I_.add(Xv);class qv{constructor(e,t){if(this.width=Math.round(e),this.height=Math.round(t),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new P_("disposeFramebuffer"),this.multisample=uh.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,t){return this.colorTextures[e]=t||new F_(null,{scaleMode:th.NEAREST,resolution:1,mipmap:nh.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new F_(null,{scaleMode:th.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:nh.OFF,format:Zd.DEPTH_COMPONENT,type:Jd.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,t){if(e=Math.round(e),t=Math.round(t),!e||!t)throw new Error("Framebuffer width and height must not be zero");if(e!==this.width||t!==this.height){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(let r=0;r<this.colorTextures.length;r++){const n=this.colorTextures[r],i=n.resolution;n.setSize(e/i,t/i)}if(this.depthTexture){const r=this.depthTexture.resolution;this.depthTexture.setSize(e/r,t/r)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class Wv extends F_{constructor(e={}){if("number"==typeof e){e={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}}e.width=e.width??100,e.height=e.height??100,e.multisample??(e.multisample=uh.NONE),super(null,e),this.mipmap=nh.OFF,this.valid=!0,this._clear=new o_([0,0,0,0]),this.framebuffer=new qv(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t){this.framebuffer.resize(e*this.resolution,t*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Yv extends R_{constructor(e){const t=e;super(t.naturalWidth||t.videoWidth||t.displayWidth||t.width,t.naturalHeight||t.videoHeight||t.displayHeight||t.height),this.source=e,this.noSubImage=!1}static crossOrigin(e,t,r){void 0!==r||t.startsWith("data:")?!1!==r&&(e.crossOrigin="string"==typeof r?r:"anonymous"):e.crossOrigin=function(e,t=globalThis.location){if(e.startsWith("data:"))return"";t=t||globalThis.location;const r=new URL(e,document.baseURI);return r.hostname!==t.hostname||r.port!==t.port||r.protocol!==t.protocol?"anonymous":""}(t)}upload(e,t,r,n){const i=e.gl,a=t.realWidth,s=t.realHeight;if(n=n||this.source,typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement){if(!n.complete||0===n.naturalWidth)return!1}else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement&&n.readyState<=1)return!1;return i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===ih.UNPACK),this.noSubImage||t.target!==i.TEXTURE_2D||r.width!==a||r.height!==s?(r.width=a,r.height=s,i.texImage2D(t.target,0,r.internalFormat,t.format,r.type,n)):i.texSubImage2D(i.TEXTURE_2D,0,0,0,t.format,r.type,n),!0}update(){if(this.destroyed)return;const e=this.source,t=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;this.resize(t,r),super.update()}dispose(){this.source=null}}class Kv extends Yv{constructor(e,t){if(t=t||{},"string"==typeof e){const r=new Image;Yv.crossOrigin(r,e,t.crossorigin),r.src=e,e=r}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(t.createBitmap??hh.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode="number"==typeof t.alphaMode?t.alphaMode:null,this.bitmap=null,this._load=null,!1!==t.autoLoad&&this.load()}load(e){return this._load||(void 0!==e&&(this.createBitmap=e),this._load=new Promise((e,t)=>{const r=this.source;this.url=r.src;const n=()=>{this.destroyed||(r.onload=null,r.onerror=null,this.update(),this._load=null,this.createBitmap?e(this.process()):e(this))};r.complete&&r.src?n():(r.onload=n,r.onerror=e=>{t(e),this.onError.emit(e)})})),this._load}process(){const e=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);const t=globalThis.createImageBitmap,r=!e.crossOrigin||"anonymous"===e.crossOrigin;return this._process=fetch(e.src,{mode:r?"cors":"no-cors"}).then(e=>e.blob()).then(r=>t(r,0,0,e.width,e.height,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===ih.UNPACK?"premultiply":"none"})).then(e=>this.destroyed?Promise.reject():(this.bitmap=e,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,t,r){if("number"==typeof this.alphaMode&&(t.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,t,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,t,r,this.bitmap),!this.preserveBitmap){let e=!0;const n=t._glTextures;for(const i in n){const a=n[i];if(a!==r&&a.dirtyId!==t.dirtyId){e=!1;break}}e&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&("string"==typeof e||e instanceof HTMLImageElement)}}class Zv{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,t,r){const n=t.width,i=t.height;if(r){const t=e.width/2/n,a=e.height/2/i,s=e.x/n+t,o=e.y/i+a;r=ov.add(r,ov.NW),this.x0=s+t*ov.uX(r),this.y0=o+a*ov.uY(r),r=ov.add(r,2),this.x1=s+t*ov.uX(r),this.y1=o+a*ov.uY(r),r=ov.add(r,2),this.x2=s+t*ov.uX(r),this.y2=o+a*ov.uY(r),r=ov.add(r,2),this.x3=s+t*ov.uX(r),this.y3=o+a*ov.uY(r)}else this.x0=e.x/n,this.y0=e.y/i,this.x1=(e.x+e.width)/n,this.y1=e.y/i,this.x2=(e.x+e.width)/n,this.y2=(e.y+e.height)/i,this.x3=e.x/n,this.y3=(e.y+e.height)/i;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}Zv.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const Qv=new Zv;function Jv(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}class eb extends Mh{constructor(e,t,r,n,i,a,s){if(super(),this.noFrame=!1,t||(this.noFrame=!0,t=new Q_(0,0,1,1)),e instanceof eb&&(e=e.baseTexture),this.baseTexture=e,this._frame=t,this.trim=n,this.valid=!1,this.destroyed=!1,this._uvs=Qv,this.uvMatrix=null,this.orig=r||t,this._rotate=Number(i||0),!0===i)this._rotate=2;else if(this._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=a?new K_(a.x,a.y):new K_(0,0),this.defaultBorders=s,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=t:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:e}=this.baseTexture;e?.url&&g_[e.url]&&eb.removeFromCache(e.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,eb.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){const e=this._frame.clone(),t=this._frame===this.orig?e:this.orig.clone(),r=new eb(this.baseTexture,!this.noFrame&&e,t,this.trim?.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(r._frame=e),r}updateUvs(){this._uvs===Qv&&(this._uvs=new Zv),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,t={},r=hh.STRICT_TEXTURE_CACHE){const n="string"==typeof e;let i=null;if(n)i=e;else if(e instanceof F_){if(!e.cacheId){const r=t?.pixiIdPrefix||"pixiid";e.cacheId=`${r}-${m_()}`,F_.addToCache(e,e.cacheId)}i=e.cacheId}else{if(!e._pixiId){const r=t?.pixiIdPrefix||"pixiid";e._pixiId=`${r}_${m_()}`}i=e._pixiId}let a=g_[i];if(n&&r&&!a)throw new Error(`The cacheId "${i}" does not exist in TextureCache.`);return a||e instanceof F_?!a&&e instanceof F_&&(a=new eb(e),eb.addToCache(a,i)):(t.resolution||(t.resolution=v_(e)),a=new eb(new F_(e,t)),a.baseTexture.cacheId=i,F_.addToCache(a.baseTexture,i),eb.addToCache(a,i)),a}static fromURL(e,t){const r=Object.assign({autoLoad:!1},t?.resourceOptions),n=eb.from(e,Object.assign({resourceOptions:r},t),!1),i=n.baseTexture.resource;return n.baseTexture.valid?Promise.resolve(n):i.load().then(()=>Promise.resolve(n))}static fromBuffer(e,t,r,n){return new eb(F_.fromBuffer(e,t,r,n))}static fromLoader(e,t,r,n){const i=new F_(e,Object.assign({scaleMode:F_.defaultOptions.scaleMode,resolution:v_(t)},n)),{resource:a}=i;a instanceof Kv&&(a.url=t);const s=new eb(i);return r||(r=t),F_.addToCache(s.baseTexture,r),eb.addToCache(s,r),r!==t&&(F_.addToCache(s.baseTexture,t),eb.addToCache(s,t)),s.baseTexture.valid?Promise.resolve(s):new Promise(e=>{s.baseTexture.once("loaded",()=>e(s))})}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),g_[t]&&g_[t]!==e&&console.warn(`Texture added to the cache with an id [${t}] that already had an entry`),g_[t]=e)}static removeFromCache(e){if("string"==typeof e){const t=g_[e];if(t){const r=t.textureCacheIds.indexOf(e);return r>-1&&t.textureCacheIds.splice(r,1),delete g_[e],t}}else if(e?.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)g_[e.textureCacheIds[t]]===e&&delete g_[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:t,y:r,width:n,height:i}=e,a=t+n>this.baseTexture.width,s=r+i>this.baseTexture.height;if(a||s){const e=a&&s?"and":"or",o=`X: ${t} + ${n} = ${t+n} > ${this.baseTexture.width}`,l=`Y: ${r} + ${i} = ${r+i} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${o} ${e} ${l}`)}this.valid=n&&i&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return eb._EMPTY||(eb._EMPTY=new eb(new F_),Jv(eb._EMPTY),Jv(eb._EMPTY.baseTexture)),eb._EMPTY}static get WHITE(){if(!eb._WHITE){const e=hh.ADAPTER.createCanvas(16,16),t=e.getContext("2d");e.width=16,e.height=16,t.fillStyle="white",t.fillRect(0,0,16,16),eb._WHITE=new eb(F_.from(e)),Jv(eb._WHITE),Jv(eb._WHITE.baseTexture)}return eb._WHITE}}class tb extends eb{constructor(e,t){super(e,t),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t,r=!0){const n=this.baseTexture.resolution,i=Math.round(e*n)/n,a=Math.round(t*n)/n;this.valid=i>0&&a>0,this._frame.width=this.orig.width=i,this._frame.height=this.orig.height=a,r&&this.baseTexture.resize(i,a),this.updateUvs()}setResolution(e){const{baseTexture:t}=this;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))}static create(e){return new tb(new Wv(e))}}class rb{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,t,r=uh.NONE){const n=new Wv(Object.assign({width:e,height:t,resolution:1,multisample:r},this.textureOptions));return new tb(n)}getOptimalTexture(e,t,r=1,n=uh.NONE){let i;e=Math.max(Math.ceil(e*r-1e-6),1),t=Math.max(Math.ceil(t*r-1e-6),1),this.enableFullScreen&&e===this._pixelsWidth&&t===this._pixelsHeight?i=n>1?-n:-1:(i=((65535&(e=c_(e)))<<16|65535&(t=c_(t)))>>>0,n>1&&(i+=4294967296*n)),this.texturePool[i]||(this.texturePool[i]=[]);let a=this.texturePool[i].pop();return a||(a=this.createTexture(e,t,n)),a.filterPoolKey=i,a.setResolution(r),a}getFilterTexture(e,t,r){const n=this.getOptimalTexture(e.width,e.height,t||e.resolution,r||uh.NONE);return n.filterFrame=e.filterFrame,n}returnTexture(e){const t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=!1!==e)for(const t in this.texturePool){const e=this.texturePool[t];if(e)for(let t=0;t<e.length;t++)e[t].destroy(!0)}this.texturePool={}}setScreenSize(e){if(e.width!==this._pixelsWidth||e.height!==this._pixelsHeight){this.enableFullScreen=e.width>0&&e.height>0;for(const e in this.texturePool){if(!(Number(e)<0))continue;const t=this.texturePool[e];if(t)for(let e=0;e<t.length;e++)t[e].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}rb.SCREEN_KEY=-1;class nb extends V_{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class ib extends V_{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new B_(this.vertices),this.uvBuffer=new B_(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,t){let r=0,n=0;return this.uvs[0]=r,this.uvs[1]=n,this.uvs[2]=r+t.width/e.width,this.uvs[3]=n,this.uvs[4]=r+t.width/e.width,this.uvs[5]=n+t.height/e.height,this.uvs[6]=r,this.uvs[7]=n+t.height/e.height,r=t.x,n=t.y,this.vertices[0]=r,this.vertices[1]=n,this.vertices[2]=r+t.width,this.vertices[3]=n,this.vertices[4]=r+t.width,this.vertices[5]=n+t.height,this.vertices[6]=r,this.vertices[7]=n+t.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class ab{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=uh.NONE,this.sourceFrame=new Q_,this.destinationFrame=new Q_,this.bindingSourceFrame=new Q_,this.bindingDestinationFrame=new Q_,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const sb=[new K_,new K_,new K_,new K_],ob=new J_;class lb{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new rb,this.statePool=[],this.quad=new nb,this.quadUv=new ib,this.tempRect=new Q_,this.activeState={},this.globalUniforms=new Ov({outputFrame:new Q_,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,t){const r=this.renderer,n=this.defaultFilterStack,i=this.statePool.pop()||new ab,a=r.renderTexture;let s,o;if(a.current){const e=a.current;s=e.resolution,o=e.multisample}else s=r.resolution,o=r.multisample;let l=t[0].resolution||s,u=t[0].multisample??o,c=t[0].padding,d=t[0].autoFit,h=t[0].legacy??!0;for(let m=1;m<t.length;m++){const e=t[m];l=Math.min(l,e.resolution||s),u=Math.min(u,e.multisample??o),c=this.useMaxPadding?Math.max(c,e.padding):c+e.padding,d=d&&e.autoFit,h=h||(e.legacy??!0)}1===n.length&&(this.defaultFilterStack[0].renderTexture=a.current),n.push(i),i.resolution=l,i.multisample=u,i.legacy=h,i.target=e,i.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),i.sourceFrame.pad(c);const f=this.tempRect.copyFrom(a.sourceFrame);r.projection.transform&&this.transformAABB(ob.copyFrom(r.projection.transform).invert(),f),d?(i.sourceFrame.fit(f),(i.sourceFrame.width<=0||i.sourceFrame.height<=0)&&(i.sourceFrame.width=0,i.sourceFrame.height=0)):i.sourceFrame.intersects(f)||(i.sourceFrame.width=0,i.sourceFrame.height=0),this.roundFrame(i.sourceFrame,a.current?a.current.resolution:r.resolution,a.sourceFrame,a.destinationFrame,r.projection.transform),i.renderTexture=this.getOptimalFilterTexture(i.sourceFrame.width,i.sourceFrame.height,l,u),i.filters=t,i.destinationFrame.width=i.renderTexture.width,i.destinationFrame.height=i.renderTexture.height;const p=this.tempRect;p.x=0,p.y=0,p.width=i.sourceFrame.width,p.height=i.sourceFrame.height,i.renderTexture.filterFrame=i.sourceFrame,i.bindingSourceFrame.copyFrom(a.sourceFrame),i.bindingDestinationFrame.copyFrom(a.destinationFrame),i.transform=r.projection.transform,r.projection.transform=null,a.bind(i.renderTexture,i.sourceFrame,p),r.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,t=e.pop(),r=t.filters;this.activeState=t;const n=this.globalUniforms.uniforms;n.outputFrame=t.sourceFrame,n.resolution=t.resolution;const i=n.inputSize,a=n.inputPixel,s=n.inputClamp;if(i[0]=t.destinationFrame.width,i[1]=t.destinationFrame.height,i[2]=1/i[0],i[3]=1/i[1],a[0]=Math.round(i[0]*t.resolution),a[1]=Math.round(i[1]*t.resolution),a[2]=1/a[0],a[3]=1/a[1],s[0]=.5*a[2],s[1]=.5*a[3],s[2]=t.sourceFrame.width*i[2]-.5*a[2],s[3]=t.sourceFrame.height*i[3]-.5*a[3],t.legacy){const e=n.filterArea;e[0]=t.destinationFrame.width,e[1]=t.destinationFrame.height,e[2]=t.sourceFrame.x,e[3]=t.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();const o=e[e.length-1];if(this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,t.renderTexture,o.renderTexture,ah.BLEND,t),this.returnFilterTexture(t.renderTexture);else{let e=t.renderTexture,n=this.getOptimalFilterTexture(e.width,e.height,t.resolution);n.filterFrame=e.filterFrame;let i=0;for(i=0;i<r.length-1;++i){1===i&&t.multisample>1&&(n=this.getOptimalFilterTexture(e.width,e.height,t.resolution),n.filterFrame=e.filterFrame),r[i].apply(this,e,n,ah.CLEAR,t);const a=e;e=n,n=a}r[i].apply(this,e,o.renderTexture,ah.BLEND,t),i>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(e),this.returnFilterTexture(n)}t.clear(),this.statePool.push(t)}bindAndClear(e,t=ah.CLEAR){const{renderTexture:r,state:n}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e?.filterFrame){const t=this.tempRect;t.x=0,t.y=0,t.width=e.filterFrame.width,t.height=e.filterFrame.height,r.bind(e,e.filterFrame,t)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const i=1&n.stateId||this.forceClear;(t===ah.CLEAR||t===ah.BLIT&&i)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,t,r,n){const i=this.renderer;i.state.set(e.state),this.bindAndClear(r,n),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,i.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),i.geometry.bind(this.quadUv),i.geometry.draw(Kd.TRIANGLES)):(i.geometry.bind(this.quad),i.geometry.draw(Kd.TRIANGLE_STRIP))}calculateSpriteMatrix(e,t){const{sourceFrame:r,destinationFrame:n}=this.activeState,{orig:i}=t._texture,a=e.set(n.width,0,0,n.height,r.x,r.y),s=t.worldTransform.copyTo(J_.TEMP_MATRIX);return s.invert(),a.prepend(s),a.scale(1/i.width,1/i.height),a.translate(t.anchor.x,t.anchor.y),a}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,t,r=1,n=uh.NONE){return this.texturePool.getOptimalTexture(e,t,r,n)}getFilterTexture(e,t,r){if("number"==typeof e){const r=e;e=t,t=r}e=e||this.activeState.renderTexture;const n=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,r||uh.NONE);return n.filterFrame=e.filterFrame,n}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,t){const r=sb[0],n=sb[1],i=sb[2],a=sb[3];r.set(t.left,t.top),n.set(t.left,t.bottom),i.set(t.right,t.top),a.set(t.right,t.bottom),e.apply(r,r),e.apply(n,n),e.apply(i,i),e.apply(a,a);const s=Math.min(r.x,n.x,i.x,a.x),o=Math.min(r.y,n.y,i.y,a.y),l=Math.max(r.x,n.x,i.x,a.x),u=Math.max(r.y,n.y,i.y,a.y);t.x=s,t.y=o,t.width=l-s,t.height=u-o}roundFrame(e,t,r,n,i){if(!(e.width<=0||e.height<=0||r.width<=0||r.height<=0)){if(i){const{a:e,b:t,c:r,d:n}=i;if((Math.abs(t)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(n)>1e-4))return}(i=i?ob.copyFrom(i):ob.identity()).translate(-r.x,-r.y).scale(n.width/r.width,n.height/r.height).translate(n.x,n.y),this.transformAABB(i,e),e.ceil(t),this.transformAABB(i.invert(),e)}}}lb.extension={type:b_.RendererSystem,name:"filter"},I_.add(lb);class ub{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=uh.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const cb=new Q_;class db{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new qv(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Q_,this.hasMRT=!0,this.writeDepthTexture=!0,1===this.renderer.context.webGLVersion){let t=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;hh.PREFER_ENV===Xd.WEBGL_LEGACY&&(t=null,r=null),t?e.drawBuffers=e=>t.drawBuffersWEBGL(e):(this.hasMRT=!1,e.drawBuffers=()=>{}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,t,r=0){const{gl:n}=this;if(e){const i=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,n.bindFramebuffer(n.FRAMEBUFFER,i.framebuffer)),i.mipLevel!==r&&(e.dirtyId++,e.dirtyFormat++,i.mipLevel=r),i.dirtyId!==e.dirtyId&&(i.dirtyId=e.dirtyId,i.dirtyFormat!==e.dirtyFormat?(i.dirtyFormat=e.dirtyFormat,i.dirtySize=e.dirtySize,this.updateFramebuffer(e,r)):i.dirtySize!==e.dirtySize&&(i.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let t=0;t<e.colorTextures.length;t++){const r=e.colorTextures[t];this.renderer.texture.unbind(r.parentTextureArray||r)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){const e=t.width>>r,n=t.height>>r,i=e/t.width;this.setViewport(t.x*i,t.y*i,e,n)}else{const t=e.width>>r,n=e.height>>r;this.setViewport(0,0,t,n)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,t,r,n){const i=this.viewport;e=Math.round(e),t=Math.round(t),r=Math.round(r),n=Math.round(n),(i.width!==r||i.height!==n||i.x!==e||i.y!==t)&&(i.x=e,i.y=t,i.width=r,i.height=n,this.gl.viewport(e,t,r,n))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,t,r,n,i=Wd.COLOR|Wd.DEPTH){const{gl:a}=this;a.clearColor(e,t,r,n),a.clear(i)}initFramebuffer(e){const{gl:t}=this,r=new ub(t.createFramebuffer());return r.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(e),e.disposeRunner.add(this),r}resizeFramebuffer(e){const{gl:t}=this,r=e.glFramebuffers[this.CONTEXT_UID];if(r.stencil){let n;t.bindRenderbuffer(t.RENDERBUFFER,r.stencil),n=1===this.renderer.context.webGLVersion?t.DEPTH_STENCIL:e.depth&&e.stencil?t.DEPTH24_STENCIL8:e.depth?t.DEPTH_COMPONENT24:t.STENCIL_INDEX8,r.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,n,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,n,e.width,e.height)}const n=e.colorTextures;let i=n.length;t.drawBuffers||(i=Math.min(i,1));for(let a=0;a<i;a++){const i=n[a],s=i.parentTextureArray||i;this.renderer.texture.bind(s,0),0===a&&r.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,r.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,s._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,t){const{gl:r}=this,n=e.glFramebuffers[this.CONTEXT_UID],i=e.colorTextures;let a=i.length;r.drawBuffers||(a=Math.min(a,1)),n.multisample>1&&this.canMultisampleFramebuffer(e)?n.msaaBuffer=n.msaaBuffer||r.createRenderbuffer():n.msaaBuffer&&(r.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));const s=[];for(let o=0;o<a;o++){const a=i[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),0===o&&n.msaaBuffer?(r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,n.msaaBuffer)):(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+o,a.target,l._glTextures[this.CONTEXT_UID].texture,t),s.push(r.COLOR_ATTACHMENT0+o))}if(s.length>1&&r.drawBuffers(s),e.depthTexture&&this.writeDepthTexture){const n=e.depthTexture;this.renderer.texture.bind(n,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,n._glTextures[this.CONTEXT_UID].texture,t)}if(!e.stencil&&!e.depth||e.depthTexture&&this.writeDepthTexture)n.stencil&&(r.deleteRenderbuffer(n.stencil),n.stencil=null);else{let t,i;n.stencil=n.stencil||r.createRenderbuffer(),1===this.renderer.context.webGLVersion?(t=r.DEPTH_STENCIL_ATTACHMENT,i=r.DEPTH_STENCIL):e.depth&&e.stencil?(t=r.DEPTH_STENCIL_ATTACHMENT,i=r.DEPTH24_STENCIL8):e.depth?(t=r.DEPTH_ATTACHMENT,i=r.DEPTH_COMPONENT24):(t=r.STENCIL_ATTACHMENT,i=r.STENCIL_INDEX8),r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,i,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,i,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,t,r.RENDERBUFFER,n.stencil)}}canMultisampleFramebuffer(e){return 1!==this.renderer.context.webGLVersion&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:t}=this;let r=uh.NONE;if(e<=1||null===t)return r;for(let n=0;n<t.length;n++)if(t[n]<=e){r=t[n];break}return 1===r&&(r=uh.NONE),r}blit(e,t,r){const{current:n,renderer:i,gl:a,CONTEXT_UID:s}=this;if(2!==i.context.webGLVersion||!n)return;const o=n.glFramebuffers[s];if(!o)return;if(!e){if(!o.msaaBuffer)return;const t=n.colorTextures[0];if(!t)return;o.blitFramebuffer||(o.blitFramebuffer=new qv(n.width,n.height),o.blitFramebuffer.addColorTexture(0,t)),(e=o.blitFramebuffer).colorTextures[0]!==t&&(e.colorTextures[0]=t,e.dirtyId++,e.dirtyFormat++),(e.width!==n.width||e.height!==n.height)&&(e.width=n.width,e.height=n.height,e.dirtyId++,e.dirtySize++)}t||((t=cb).width=n.width,t.height=n.height),r||(r=t);const l=t.width===r.width&&t.height===r.height;this.bind(e),a.bindFramebuffer(a.READ_FRAMEBUFFER,o.framebuffer),a.blitFramebuffer(t.left,t.top,t.right,t.bottom,r.left,r.top,r.right,r.bottom,a.COLOR_BUFFER_BIT,l?a.NEAREST:a.LINEAR),a.bindFramebuffer(a.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,t){const r=e.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(!r)return;delete e.glFramebuffers[this.CONTEXT_UID];const i=this.managedFramebuffers.indexOf(e);i>=0&&this.managedFramebuffers.splice(i,1),e.disposeRunner.remove(this),t||(n.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&n.deleteRenderbuffer(r.msaaBuffer),r.stencil&&n.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&this.disposeFramebuffer(r.blitFramebuffer,t)}disposeAll(e){const t=this.managedFramebuffers;this.managedFramebuffers=[];for(let r=0;r<t.length;r++)this.disposeFramebuffer(t[r],e)}forceStencil(){const e=this.current;if(!e)return;const t=e.glFramebuffers[this.CONTEXT_UID];if(!t||t.stencil&&e.stencil)return;e.stencil=!0;const r=e.width,n=e.height,i=this.gl,a=t.stencil=i.createRenderbuffer();let s,o;i.bindRenderbuffer(i.RENDERBUFFER,a),1===this.renderer.context.webGLVersion?(s=i.DEPTH_STENCIL_ATTACHMENT,o=i.DEPTH_STENCIL):e.depth?(s=i.DEPTH_STENCIL_ATTACHMENT,o=i.DEPTH24_STENCIL8):(s=i.STENCIL_ATTACHMENT,o=i.STENCIL_INDEX8),t.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,t.multisample,o,r,n):i.renderbufferStorage(i.RENDERBUFFER,o,r,n),i.framebufferRenderbuffer(i.FRAMEBUFFER,s,i.RENDERBUFFER,a)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Q_}destroy(){this.renderer=null}}db.extension={type:b_.RendererSystem,name:"framebuffer"},I_.add(db);const hb={5126:4,5123:2,5121:1};class fb{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==t.webGLVersion){let t=this.renderer.context.extensions.vertexArrayObject;hh.PREFER_ENV===Xd.WEBGL_LEGACY&&(t=null),t?(e.createVertexArray=()=>t.createVertexArrayOES(),e.bindVertexArray=e=>t.bindVertexArrayOES(e),e.deleteVertexArray=e=>t.deleteVertexArrayOES(e)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(2!==t.webGLVersion){const t=e.getExtension("ANGLE_instanced_arrays");t?(e.vertexAttribDivisor=(e,r)=>t.vertexAttribDivisorANGLE(e,r),e.drawElementsInstanced=(e,r,n,i,a)=>t.drawElementsInstancedANGLE(e,r,n,i,a),e.drawArraysInstanced=(e,r,n,i)=>t.drawArraysInstancedANGLE(e,r,n,i)):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===t.webGLVersion||!!t.extensions.uint32ElementIndex}bind(e,t){t=t||this.renderer.shader.shader;const{gl:r}=this;let n=e.glVertexArrayObjects[this.CONTEXT_UID],i=!1;n||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=n={},i=!0);const a=n[t.program.id]||this.initGeometryVao(e,t,i);this._activeGeometry=e,this._activeVao!==a&&(this._activeVao=a,this.hasVao?r.bindVertexArray(a):this.activateVao(e,t.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,t=this.renderer.buffer;for(let r=0;r<e.buffers.length;r++){const n=e.buffers[r];t.update(n)}}checkCompatibility(e,t){const r=e.attributes,n=t.attributeData;for(const i in n)if(!r[i])throw new Error(`shader and geometry incompatible, geometry missing the "${i}" attribute`)}getSignature(e,t){const r=e.attributes,n=t.attributeData,i=["g",e.id];for(const a in r)n[a]&&i.push(a,n[a].location);return i.join("-")}initGeometryVao(e,t,r=!0){const n=this.gl,i=this.CONTEXT_UID,a=this.renderer.buffer,s=t.program;s.glPrograms[i]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,s);const o=this.getSignature(e,s),l=e.glVertexArrayObjects[this.CONTEXT_UID];let u=l[o];if(u)return l[s.id]=u,u;const c=e.buffers,d=e.attributes,h={},f={};for(const p in c)h[p]=0,f[p]=0;for(const p in d)!d[p].size&&s.attributeData[p]?d[p].size=s.attributeData[p].size:d[p].size||console.warn(`PIXI Geometry attribute '${p}' size cannot be determined (likely the bound shader does not have the attribute)`),h[d[p].buffer]+=d[p].size*hb[d[p].type];for(const p in d){const e=d[p],t=e.size;void 0===e.stride&&(h[e.buffer]===t*hb[e.type]?e.stride=0:e.stride=h[e.buffer]),void 0===e.start&&(e.start=f[e.buffer],f[e.buffer]+=t*hb[e.type])}u=n.createVertexArray(),n.bindVertexArray(u);for(let p=0;p<c.length;p++){const e=c[p];a.bind(e),r&&e._glBuffers[i].refCount++}return this.activateVao(e,s),l[s.id]=u,l[o]=u,n.bindVertexArray(null),a.unbind(ch.ARRAY_BUFFER),u}disposeGeometry(e,t){if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const r=e.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,i=e.buffers,a=this.renderer?.buffer;if(e.disposeRunner.remove(this),r){if(a)for(let e=0;e<i.length;e++){const r=i[e]._glBuffers[this.CONTEXT_UID];r&&(r.refCount--,0===r.refCount&&!t&&a.dispose(i[e],t))}if(!t)for(const e in r)if("g"===e[0]){const t=r[e];this._activeVao===t&&this.unbind(),n.deleteVertexArray(t)}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const t=Object.keys(this.managedGeometries);for(let r=0;r<t.length;r++)this.disposeGeometry(this.managedGeometries[t[r]],e)}activateVao(e,t){const r=this.gl,n=this.CONTEXT_UID,i=this.renderer.buffer,a=e.buffers,s=e.attributes;e.indexBuffer&&i.bind(e.indexBuffer);let o=null;for(const l in s){const e=s[l],u=a[e.buffer],c=u._glBuffers[n];if(t.attributeData[l]){o!==c&&(i.bind(u),o=c);const n=t.attributeData[l].location;if(r.enableVertexAttribArray(n),r.vertexAttribPointer(n,e.size,e.type||r.FLOAT,e.normalized,e.stride,e.start),e.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(n,e.divisor)}}}}draw(e,t,r,n){const{gl:i}=this,a=this._activeGeometry;if(a.indexBuffer){const s=a.indexBuffer.data.BYTES_PER_ELEMENT,o=2===s?i.UNSIGNED_SHORT:i.UNSIGNED_INT;2===s||4===s&&this.canUseUInt32ElementIndex?a.instanced?i.drawElementsInstanced(e,t||a.indexBuffer.data.length,o,(r||0)*s,n||1):i.drawElements(e,t||a.indexBuffer.data.length,o,(r||0)*s):console.warn("unsupported index buffer type: uint32")}else a.instanced?i.drawArraysInstanced(e,r,t||a.getSize(),n||1):i.drawArrays(e,r,t||a.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}fb.extension={type:b_.RendererSystem,name:"geometry"},I_.add(fb);const pb=new J_;class mb{constructor(e,t){this._texture=e,this.mapCoord=new J_,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,t){void 0===t&&(t=e);const r=this.mapCoord;for(let n=0;n<e.length;n+=2){const i=e[n],a=e[n+1];t[n]=i*r.a+a*r.c+r.tx,t[n+1]=i*r.b+a*r.d+r.ty}return t}update(e){const t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;const r=t._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);const n=t.orig,i=t.trim;i&&(pb.set(n.width/i.width,0,0,n.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(pb));const a=t.baseTexture,s=this.uClampFrame,o=this.clampMargin/a.resolution,l=this.clampOffset;return s[0]=(t._frame.x+o+l)/a.width,s[1]=(t._frame.y+o+l)/a.height,s[2]=(t._frame.x+t._frame.width-o+l)/a.width,s[3]=(t._frame.y+t._frame.height-o+l)/a.height,this.uClampOffset[0]=l/a.realWidth,this.uClampOffset[1]=l/a.realHeight,this.isSimple=t._frame.width===a.width&&t._frame.height===a.height&&0===t.rotate,!0}}class yb extends zv{constructor(e,t,r){let n=null;"string"!=typeof e&&void 0===t&&void 0===r&&(n=e,e=void 0,t=void 0,r=void 0),super(e||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",t||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",r),this.maskSprite=n,this.maskMatrix=new J_}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,t,r,n){const i=this._maskSprite,a=i._texture;a.valid&&(a.uvMatrix||(a.uvMatrix=new mb(a,0)),a.uvMatrix.update(),this.uniforms.npmAlpha=a.baseTexture.alphaMode?0:1,this.uniforms.mask=a,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,i).prepend(a.uvMatrix.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=a.uvMatrix.uClampFrame,e.applyFilter(this,t,r,n))}}class gb{constructor(e=null){this.type=lh.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=zv.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=lh.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class _b{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,t){let r=t;if(!r.isMaskData){const e=this.maskDataPool.pop()||new gb;e.pooled=!0,e.maskObject=t,r=e}const n=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(n),r._colorMask=n?n._colorMask:15,r.autoDetect&&this.detect(r),r._target=e,r.type!==lh.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case lh.SCISSOR:this.renderer.scissor.push(r);break;case lh.STENCIL:this.renderer.stencil.push(r);break;case lh.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case lh.COLOR:this.pushColorMask(r)}r.type===lh.SPRITE&&this.maskStack.push(r)}pop(e){const t=this.maskStack.pop();if(t&&t._target===e){if(t.enabled)switch(t.type){case lh.SCISSOR:this.renderer.scissor.pop(t);break;case lh.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case lh.SPRITE:this.popSpriteMask(t);break;case lh.COLOR:this.popColorMask(t)}if(t.reset(),t.pooled&&this.maskDataPool.push(t),0!==this.maskStack.length){const e=this.maskStack[this.maskStack.length-1];e.type===lh.SPRITE&&e._filters&&(e._filters[0].maskSprite=e.maskObject)}}}detect(e){const t=e.maskObject;t?t.isSprite?e.type=lh.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=lh.SCISSOR:e.type=lh.STENCIL:e.type=lh.COLOR}pushSpriteMask(e){const{maskObject:t}=e,r=e._target;let n=e._filters;n||(n=this.alphaMaskPool[this.alphaMaskIndex],n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new yb])),n[0].resolution=e.resolution,n[0].multisample=e.multisample,n[0].maskSprite=t;const i=r.filterArea;r.filterArea=t.getBounds(!0),this.renderer.filter.push(r,n),r.filterArea=i,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const t=e._colorMask,r=e._colorMask=t&e.colorMask;r!==t&&this.renderer.gl.colorMask(!!(1&r),!!(2&r),!!(4&r),!!(8&r))}popColorMask(e){const t=e._colorMask,r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==t&&this.renderer.gl.colorMask(!!(1&r),!!(2&r),!!(4&r),!!(8&r))}destroy(){this.renderer=null}}_b.extension={type:b_.RendererSystem,name:"mask"},I_.add(_b);class vb{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:t}=this.renderer,r=this.getStackLength();this.maskStack=e;const n=this.getStackLength();n!==r&&(0===n?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const bb=new J_,wb=[],xb=class e extends vb{constructor(e){super(e),this.glConst=hh.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const t=e._scissorRect,{maskObject:r}=e,{renderer:n}=this,i=n.renderTexture,a=r.getBounds(!0,wb.pop()??new Q_);this.roundFrameToPixels(a,i.current?i.current.resolution:n.resolution,i.sourceFrame,i.destinationFrame,n.projection.transform),t&&a.fit(t),e._scissorRectLocal=a}static isMatrixRotated(e){if(!e)return!1;const{a:t,b:r,c:n,d:i}=e;return(Math.abs(r)>1e-4||Math.abs(n)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(i)>1e-4)}testScissor(t){const{maskObject:r}=t;if(!r.isFastRect||!r.isFastRect()||e.isMatrixRotated(r.worldTransform)||e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const n=t._scissorRectLocal;return n.width>0&&n.height>0}roundFrameToPixels(t,r,n,i,a){e.isMatrixRotated(a)||((a=a?bb.copyFrom(a):bb.identity()).translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.renderer.filter.transformAABB(a,t),t.fit(i),t.x=Math.round(t.x*r),t.y=Math.round(t.y*r),t.width=Math.round(t.width*r),t.height=Math.round(t.height*r))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:t}=this.renderer;e&&wb.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let t;t=this.renderer.renderTexture.current?e.y:this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};xb.extension={type:b_.RendererSystem,name:"scissor"};let Ib=xb;I_.add(Ib);class Tb extends vb{constructor(e){super(e),this.glConst=hh.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const t=e.maskObject,{gl:r}=this.renderer,n=e._stencilCounter;0===n&&(this.renderer.framebuffer.forceStencil(),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT),r.enable(r.STENCIL_TEST)),e._stencilCounter++;const i=e._colorMask;0!==i&&(e._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilFunc(r.EQUAL,n,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,0!==i&&(e._colorMask=i,r.colorMask(!!(1&i),!!(2&i),!!(4&i),!!(8&i))),this._useCurrent()}pop(e){const t=this.renderer.gl;if(0===this.getStackLength())t.disable(t.STENCIL_TEST);else{const r=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null,n=r?r._colorMask:15;0!==n&&(r._colorMask=0,t.colorMask(!1,!1,!1,!1)),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,0!==n&&(r._colorMask=n,t.colorMask(!!(1&n),!!(2&n),!!(4&n),!!(8&n))),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}Tb.extension={type:b_.RendererSystem,name:"stencil"},I_.add(Tb);class Eb{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get:()=>(Rg("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract)},prepare:{enumerable:!1,get:()=>(Rg("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare)},interaction:{enumerable:!1,get:()=>(Rg("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events)}})}init(){const e=this.rendererPlugins;for(const t in e)this.plugins[t]=new e[t](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}Eb.extension={type:[b_.RendererSystem,b_.CanvasRendererSystem],name:"_plugin"},I_.add(Eb);class Ab{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new J_,this.transform=null}update(e,t,r,n){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,n),this.transform&&this.projectionMatrix.append(this.transform);const i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)}calculateProjection(e,t,r,n){const i=this.projectionMatrix,a=n?-1:1;i.identity(),i.a=1/t.width*2,i.d=a*(1/t.height*2),i.tx=-1-t.x*i.a,i.ty=-a-t.y*i.d}setTransform(e){}destroy(){this.renderer=null}}Ab.extension={type:b_.RendererSystem,name:"projection"},I_.add(Ab);const Sb=new cv,kb=new Q_;class Cb{constructor(e){this.renderer=e,this._tempMatrix=new J_}generateTexture(e,t){const{region:r,...n}=t||{},i=r?.copyTo(kb)||e.getLocalBounds(kb,!0),a=n.resolution||this.renderer.resolution;i.width=Math.max(i.width,1/a),i.height=Math.max(i.height,1/a),n.width=i.width,n.height=i.height,n.resolution=a,n.multisample??(n.multisample=this.renderer.multisample);const s=tb.create(n);this._tempMatrix.tx=-i.x,this._tempMatrix.ty=-i.y;const o=e.transform;return e.transform=Sb,this.renderer.render(e,{renderTexture:s,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=o,s}destroy(){}}Cb.extension={type:[b_.RendererSystem,b_.CanvasRendererSystem],name:"textureGenerator"},I_.add(Cb);const Pb=new Q_,Rb=new Q_;class Mb{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Q_,this.destinationFrame=new Q_,this.viewportFrame=new Q_}contextChange(){const e=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,t,r){const n=this.renderer;let i,a,s;this.current=e,e?(i=e.baseTexture,s=i.resolution,t||(Pb.width=e.frame.width,Pb.height=e.frame.height,t=Pb),r||(Rb.x=e.frame.x,Rb.y=e.frame.y,Rb.width=t.width,Rb.height=t.height,r=Rb),a=i.framebuffer):(s=n.resolution,t||(Pb.width=n._view.screen.width,Pb.height=n._view.screen.height,t=Pb),r||((r=Pb).width=t.width,r.height=t.height));const o=this.viewportFrame;o.x=r.x*s,o.y=r.y*s,o.width=r.width*s,o.height=r.height*s,e||(o.y=n.view.height-(o.y+o.height)),o.ceil(),this.renderer.framebuffer.bind(a,o),this.renderer.projection.update(r,t,s,!a),e?this.renderer.mask.setMaskStack(i.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(r)}clear(e,t){const r=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,n=o_.shared.setValue(e||r);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&n.premultiply(n.alpha);const i=this.destinationFrame,a=this.current?this.current.baseTexture:this.renderer._view.screen,s=i.width!==a.width||i.height!==a.height;if(s){let{x:e,y:t,width:r,height:n}=this.viewportFrame;e=Math.round(e),t=Math.round(t),r=Math.round(r),n=Math.round(n),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(e,t,r,n)}this.renderer.framebuffer.clear(n.red,n.green,n.blue,n.alpha,t),s&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}Mb.extension={type:b_.RendererSystem,name:"renderTexture"},I_.add(Mb);class Lb{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function Ob(e,t){const r=dv(e,e.VERTEX_SHADER,t.vertexSrc),n=dv(e,e.FRAGMENT_SHADER,t.fragmentSrc),i=e.createProgram();e.attachShader(i,r),e.attachShader(i,n);const a=t.extra?.transformFeedbackVaryings;if(a&&("function"!=typeof e.transformFeedbackVaryings?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):e.transformFeedbackVaryings(i,a.names,"separate"===a.bufferMode?e.SEPARATE_ATTRIBS:e.INTERLEAVED_ATTRIBS)),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS)||function(e,t,r,n){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(r,e.COMPILE_STATUS)||wv(e,r),e.getShaderParameter(n,e.COMPILE_STATUS)||wv(e,n),console.error("PixiJS Error: Could not initialize shader."),""!==e.getProgramInfoLog(t)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(t)))}(e,i,r,n),t.attributeData=function(e,t){const r={},n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const n=t.getActiveAttrib(e,i);if(n.name.startsWith("gl_"))continue;const a=Av(t,n.type),s={type:a,name:n.name,size:Iv(a),location:t.getAttribLocation(e,n.name)};r[n.name]=s}return r}(i,e),t.uniformData=function(e,t){const r={},n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let i=0;i<n;i++){const n=t.getActiveUniform(e,i),a=n.name.replace(/\[.*?\]$/,""),s=!!n.name.match(/\[.*?\]$/),o=Av(t,n.type);r[a]={name:a,index:i,type:o,size:n.size,isArray:s,value:fv(o,n.size)}}return r}(i,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const r=Object.keys(t.attributeData);r.sort((e,t)=>e>t?1:-1);for(let n=0;n<r.length;n++)t.attributeData[r[n]].location=n,e.bindAttribLocation(i,n,r[n]);e.linkProgram(i)}e.deleteShader(r),e.deleteShader(n);const s={};for(const o in t.uniformData){const r=t.uniformData[o];s[o]={location:e.getUniformLocation(i,o),value:fv(r.type,r.size)}}return new Lb(i,s)}function Fb(e,t,r,n,i){r.buffer.update(i)}const Db={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},Nb={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function Bb(e,t){if(!e.autoManage)return{size:0,syncFunc:Fb};const r=function(e,t){const r=[];for(const n in e)t[n]&&r.push(t[n]);return r.sort((e,t)=>e.index-t.index),r}(e.uniforms,t),{uboElements:n,size:i}=function(e){const t=e.map(e=>({data:e,offset:0,dataLen:0,dirty:0}));let r=0,n=0,i=0;for(let a=0;a<t.length;a++){const e=t[a];if(r=Nb[e.data.type],e.data.size>1&&(r=Math.max(r,16)*e.data.size),e.dataLen=r,n%r!==0&&n<16){const e=n%r%16;n+=e,i+=e}n+r>16?(i=16*Math.ceil(i/16),e.offset=i,i+=r,n=r):(e.offset=i,n+=r,i+=r)}return i=16*Math.ceil(i/16),{uboElements:t,size:i}}(r),a=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "];for(let s=0;s<n.length;s++){const t=n[s],r=e.uniforms[t.data.name],i=t.data.name;let o=!1;for(let e=0;e<pv.length;e++){const n=pv[e];if(n.codeUbo&&n.test(t.data,r)){a.push(`offset = ${t.offset/4};`,pv[e].codeUbo(t.data.name,r)),o=!0;break}}if(!o)if(t.data.size>1){const e=Iv(t.data.type),r=Math.max(Nb[t.data.type]/16,1),n=e/r,s=(4-n%4)%4;a.push(`\n                cv = ud.${i}.value;\n                v = uv.${i};\n                offset = ${t.offset/4};\n\n                t = 0;\n\n                for(var i=0; i < ${t.data.size*r}; i++)\n                {\n                    for(var j = 0; j < ${n}; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += ${s};\n                }\n\n                `)}else{const e=Db[t.data.type];a.push(`\n                cv = ud.${i}.value;\n                v = uv.${i};\n                offset = ${t.offset/4};\n                ${e};\n                `)}}return a.push("\n       renderer.buffer.update(buffer);\n    "),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",a.join("\n"))}}let Ub=0;const jb={textureCount:0,uboCount:0};class Gb{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=Ub++}systemCheck(){if(!function(){if("boolean"==typeof kv)return kv;try{kv=!0===new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")}catch{kv=!1}return kv}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,t){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const r=e.program,n=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==r&&(this.program=r,this.gl.useProgram(n.program)),t||(jb.textureCount=0,jb.uboCount=0,this.syncUniformGroup(e.uniformGroup,jb)),n}setUniforms(e){const t=this.shader.program,r=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(r.uniformData,e,this.renderer)}syncUniformGroup(e,t){const r=this.getGlProgram();(!e.static||e.dirtyId!==r.uniformDirtyGroups[e.id])&&(r.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,r,t))}syncUniforms(e,t,r){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,r)}createSyncGroups(e){const t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=function(e,t){const r=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(const n in e.uniforms){const i=t[n];if(!i){!0===e.uniforms[n]?.group&&(e.uniforms[n].ubo?r.push(`\n                        renderer.shader.syncUniformBufferGroup(uv.${n}, '${n}');\n                    `):r.push(`\n                        renderer.shader.syncUniformGroup(uv.${n}, syncData);\n                    `));continue}const a=e.uniforms[n];let s=!1;for(let e=0;e<pv.length;e++)if(pv[e].test(i,a)){r.push(pv[e].code(n,a)),s=!0;break}if(!s){const e=(1!==i.size||i.isArray?yv:mv)[i.type].replace("location",`ud["${n}"].location`);r.push(`\n            cu = ud["${n}"];\n            cv = cu.value;\n            v = uv["${n}"];\n            ${e};`)}}return new Function("ud","uv","renderer","syncData",r.join("\n"))}(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,t){const r=this.getGlProgram();if(!e.static||0!==e.dirtyId||!r.uniformGroups[e.id]){e.dirtyId=0;const n=r.uniformGroups[e.id]||this.createSyncBufferGroup(e,r,t);e.buffer.update(),n(r.uniformData,e.uniforms,this.renderer,jb,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,r.uniformBufferBindings[t])}createSyncBufferGroup(e,t,r){const{gl:n}=this.renderer;this.renderer.buffer.bind(e.buffer);const i=this.gl.getUniformBlockIndex(t.program,r);t.uniformBufferBindings[r]=this.shader.uniformBindCount,n.uniformBlockBinding(t.program,i,this.shader.uniformBindCount),this.shader.uniformBindCount++;const a=this.getSignature(e,this.shader.program.uniformData,"ubo");let s=this._uboCache[a];if(s||(s=this._uboCache[a]=Bb(e,this.shader.program.uniformData)),e.autoManage){const t=new Float32Array(s.size/4);e.buffer.update(t)}return t.uniformGroups[e.id]=s.syncFunc,t.uniformGroups[e.id]}getSignature(e,t,r){const n=e.uniforms,i=[`${r}-`];for(const a in n)i.push(a),t[a]&&i.push(t[a].type);return i.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const t=this.gl,r=e.program,n=Ob(t,r);return r.glPrograms[this.renderer.CONTEXT_UID]=n,n}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}Gb.extension={type:b_.RendererSystem,name:"shader"},I_.add(Gb);class zb{constructor(e){this.renderer=e}run(e){const{renderer:t}=this;t.runners.init.emit(t.options),e.hello&&t.rendererLogId,t.resize(t.screen.width,t.screen.height)}destroy(){}}zb.defaultOptions={hello:!1},zb.extension={type:[b_.RendererSystem,b_.CanvasRendererSystem],name:"startup"},I_.add(zb);const Hb=class e{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Yd.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new S_,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=function(e,t=[]){return t[Yd.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Yd.ADD]=[e.ONE,e.ONE],t[Yd.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Yd.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Yd.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Yd.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Yd.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Yd.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Yd.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Yd.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Yd.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Yd.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Yd.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Yd.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Yd.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Yd.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Yd.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Yd.NONE]=[0,0],t[Yd.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Yd.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[Yd.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Yd.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[Yd.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[Yd.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[Yd.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[Yd.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[Yd.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[Yd.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[Yd.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[Yd.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,r=0;for(;t;)1&t&&this.map[r].call(this,!!(e.data&1<<r)),t>>=1,r++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const t=this.blendModes[e],r=this.gl;2===t.length?r.blendFunc(t[0],t[1]):r.blendFuncSeparate(t[0],t[1],t[2],t[3]),6===t.length?(this._blendEq=!0,r.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){const r=this.checks.indexOf(e);t&&-1===r?this.checks.push(e):!t&&-1!==r&&this.checks.splice(r,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};Hb.extension={type:b_.RendererSystem,name:"state"};let Vb=Hb;I_.add(Vb);class $b extends Mh{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const t=(e.priority??[]).filter(t=>e.systems[t]),r=[...t,...Object.keys(e.systems).filter(e=>!t.includes(e))];for(const n of r)this.addSystem(e.systems[n],n)}addRunners(...e){e.forEach(e=>{this.runners[e]=new P_(e)})}addSystem(e,t){const r=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=r,this._systemsHash[t]=r;for(const n in this.runners)this.runners[n].add(r);return this}emitWithCustomOptions(e,t){const r=Object.keys(this._systemsHash);e.items.forEach(n=>{const i=r.find(e=>this._systemsHash[e]===n);n[e.name](t[i])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const Xb=class e{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=e.defaultMaxIdle,this.checkCountMax=e.defaultCheckCountMax,this.mode=e.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==sh.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,t=e.managedTextures;let r=!1;for(let n=0;n<t.length;n++){const i=t[n];i.resource&&this.count-i.touched>this.maxIdle&&(e.destroyTexture(i,!0),t[n]=null,r=!0)}if(r){let e=0;for(let r=0;r<t.length;r++)null!==t[r]&&(t[e++]=t[r]);t.length=e}}unload(e){const t=this.renderer.texture,r=e._texture;r&&!r.framebuffer&&t.destroyTexture(r);for(let n=e.children.length-1;n>=0;n--)this.unload(e.children[n])}destroy(){this.renderer=null}};Xb.defaultMode=sh.AUTO,Xb.defaultMaxIdle=3600,Xb.defaultCheckCountMax=600,Xb.extension={type:b_.RendererSystem,name:"textureGC"};let qb=Xb;I_.add(qb);class Wb{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Jd.UNSIGNED_BYTE,this.internalFormat=Zd.RGBA,this.samplerType=0}}class Yb{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new F_,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function(e){let t;return t="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?{[Jd.UNSIGNED_BYTE]:{[Zd.RGBA]:e.RGBA8,[Zd.RGB]:e.RGB8,[Zd.RG]:e.RG8,[Zd.RED]:e.R8,[Zd.RGBA_INTEGER]:e.RGBA8UI,[Zd.RGB_INTEGER]:e.RGB8UI,[Zd.RG_INTEGER]:e.RG8UI,[Zd.RED_INTEGER]:e.R8UI,[Zd.ALPHA]:e.ALPHA,[Zd.LUMINANCE]:e.LUMINANCE,[Zd.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[Jd.BYTE]:{[Zd.RGBA]:e.RGBA8_SNORM,[Zd.RGB]:e.RGB8_SNORM,[Zd.RG]:e.RG8_SNORM,[Zd.RED]:e.R8_SNORM,[Zd.RGBA_INTEGER]:e.RGBA8I,[Zd.RGB_INTEGER]:e.RGB8I,[Zd.RG_INTEGER]:e.RG8I,[Zd.RED_INTEGER]:e.R8I},[Jd.UNSIGNED_SHORT]:{[Zd.RGBA_INTEGER]:e.RGBA16UI,[Zd.RGB_INTEGER]:e.RGB16UI,[Zd.RG_INTEGER]:e.RG16UI,[Zd.RED_INTEGER]:e.R16UI,[Zd.DEPTH_COMPONENT]:e.DEPTH_COMPONENT16},[Jd.SHORT]:{[Zd.RGBA_INTEGER]:e.RGBA16I,[Zd.RGB_INTEGER]:e.RGB16I,[Zd.RG_INTEGER]:e.RG16I,[Zd.RED_INTEGER]:e.R16I},[Jd.UNSIGNED_INT]:{[Zd.RGBA_INTEGER]:e.RGBA32UI,[Zd.RGB_INTEGER]:e.RGB32UI,[Zd.RG_INTEGER]:e.RG32UI,[Zd.RED_INTEGER]:e.R32UI,[Zd.DEPTH_COMPONENT]:e.DEPTH_COMPONENT24},[Jd.INT]:{[Zd.RGBA_INTEGER]:e.RGBA32I,[Zd.RGB_INTEGER]:e.RGB32I,[Zd.RG_INTEGER]:e.RG32I,[Zd.RED_INTEGER]:e.R32I},[Jd.FLOAT]:{[Zd.RGBA]:e.RGBA32F,[Zd.RGB]:e.RGB32F,[Zd.RG]:e.RG32F,[Zd.RED]:e.R32F,[Zd.DEPTH_COMPONENT]:e.DEPTH_COMPONENT32F},[Jd.HALF_FLOAT]:{[Zd.RGBA]:e.RGBA16F,[Zd.RGB]:e.RGB16F,[Zd.RG]:e.RG16F,[Zd.RED]:e.R16F},[Jd.UNSIGNED_SHORT_5_6_5]:{[Zd.RGB]:e.RGB565},[Jd.UNSIGNED_SHORT_4_4_4_4]:{[Zd.RGBA]:e.RGBA4},[Jd.UNSIGNED_SHORT_5_5_5_1]:{[Zd.RGBA]:e.RGB5_A1},[Jd.UNSIGNED_INT_2_10_10_10_REV]:{[Zd.RGBA]:e.RGB10_A2,[Zd.RGBA_INTEGER]:e.RGB10_A2UI},[Jd.UNSIGNED_INT_10F_11F_11F_REV]:{[Zd.RGB]:e.R11F_G11F_B10F},[Jd.UNSIGNED_INT_5_9_9_9_REV]:{[Zd.RGB]:e.RGB9_E5},[Jd.UNSIGNED_INT_24_8]:{[Zd.DEPTH_STENCIL]:e.DEPTH24_STENCIL8},[Jd.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[Zd.DEPTH_STENCIL]:e.DEPTH32F_STENCIL8}}:{[Jd.UNSIGNED_BYTE]:{[Zd.RGBA]:e.RGBA,[Zd.RGB]:e.RGB,[Zd.ALPHA]:e.ALPHA,[Zd.LUMINANCE]:e.LUMINANCE,[Zd.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[Jd.UNSIGNED_SHORT_5_6_5]:{[Zd.RGB]:e.RGB},[Jd.UNSIGNED_SHORT_4_4_4_4]:{[Zd.RGBA]:e.RGBA},[Jd.UNSIGNED_SHORT_5_5_5_1]:{[Zd.RGBA]:e.RGBA}},t}(e),this.samplerTypes=function(e){let t;return t="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?{[e.RGB]:eh.FLOAT,[e.RGBA]:eh.FLOAT,[e.ALPHA]:eh.FLOAT,[e.LUMINANCE]:eh.FLOAT,[e.LUMINANCE_ALPHA]:eh.FLOAT,[e.R8]:eh.FLOAT,[e.R8_SNORM]:eh.FLOAT,[e.RG8]:eh.FLOAT,[e.RG8_SNORM]:eh.FLOAT,[e.RGB8]:eh.FLOAT,[e.RGB8_SNORM]:eh.FLOAT,[e.RGB565]:eh.FLOAT,[e.RGBA4]:eh.FLOAT,[e.RGB5_A1]:eh.FLOAT,[e.RGBA8]:eh.FLOAT,[e.RGBA8_SNORM]:eh.FLOAT,[e.RGB10_A2]:eh.FLOAT,[e.RGB10_A2UI]:eh.FLOAT,[e.SRGB8]:eh.FLOAT,[e.SRGB8_ALPHA8]:eh.FLOAT,[e.R16F]:eh.FLOAT,[e.RG16F]:eh.FLOAT,[e.RGB16F]:eh.FLOAT,[e.RGBA16F]:eh.FLOAT,[e.R32F]:eh.FLOAT,[e.RG32F]:eh.FLOAT,[e.RGB32F]:eh.FLOAT,[e.RGBA32F]:eh.FLOAT,[e.R11F_G11F_B10F]:eh.FLOAT,[e.RGB9_E5]:eh.FLOAT,[e.R8I]:eh.INT,[e.R8UI]:eh.UINT,[e.R16I]:eh.INT,[e.R16UI]:eh.UINT,[e.R32I]:eh.INT,[e.R32UI]:eh.UINT,[e.RG8I]:eh.INT,[e.RG8UI]:eh.UINT,[e.RG16I]:eh.INT,[e.RG16UI]:eh.UINT,[e.RG32I]:eh.INT,[e.RG32UI]:eh.UINT,[e.RGB8I]:eh.INT,[e.RGB8UI]:eh.UINT,[e.RGB16I]:eh.INT,[e.RGB16UI]:eh.UINT,[e.RGB32I]:eh.INT,[e.RGB32UI]:eh.UINT,[e.RGBA8I]:eh.INT,[e.RGBA8UI]:eh.UINT,[e.RGBA16I]:eh.INT,[e.RGBA16UI]:eh.UINT,[e.RGBA32I]:eh.INT,[e.RGBA32UI]:eh.UINT,[e.DEPTH_COMPONENT16]:eh.FLOAT,[e.DEPTH_COMPONENT24]:eh.FLOAT,[e.DEPTH_COMPONENT32F]:eh.FLOAT,[e.DEPTH_STENCIL]:eh.FLOAT,[e.DEPTH24_STENCIL8]:eh.FLOAT,[e.DEPTH32F_STENCIL8]:eh.FLOAT}:{[e.RGB]:eh.FLOAT,[e.RGBA]:eh.FLOAT,[e.ALPHA]:eh.FLOAT,[e.LUMINANCE]:eh.FLOAT,[e.LUMINANCE_ALPHA]:eh.FLOAT,[e.DEPTH_STENCIL]:eh.FLOAT},t}(e);const t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(let n=0;n<t;n++)this.boundTextures[n]=null;this.emptyTextures={};const r=new Wb(e.createTexture());e.bindTexture(e.TEXTURE_2D,r.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=r,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Wb(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let n=0;n<6;n++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let n=0;n<this.boundTextures.length;n++)this.bind(null,n)}bind(e,t=0){const{gl:r}=this;if(e=e?.castToBaseTexture(),e?.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const n=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(e.target,n.texture)),n.dirtyId!==e.dirtyId?(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),this.updateTexture(e)):n.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[t]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:t,boundTextures:r}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let e=0;e<r.length;e++)r[e]===this.unknownTexture&&this.bind(null,e)}for(let n=0;n<r.length;n++)r[n]===e&&(this.currentLocation!==n&&(t.activeTexture(t.TEXTURE0+n),this.currentLocation=n),t.bindTexture(e.target,this.emptyTextures[e.target].texture),r[n]=null)}ensureSamplerType(e){const{boundTextures:t,hasIntegerTextures:r,CONTEXT_UID:n}=this;if(r)for(let i=e-1;i>=0;--i){const e=t[i];e&&e._glTextures[n].samplerType!==eh.FLOAT&&this.renderer.texture.unbind(e)}}initTexture(e){const t=new Wb(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t}initTextureType(e,t){t.internalFormat=this.internalFormats[e.type]?.[e.format]??e.format,t.samplerType=this.samplerTypes[t.internalFormat]??eh.FLOAT,2===this.webGLVersion&&e.type===Jd.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type}updateTexture(e){const t=e._glTextures[this.CONTEXT_UID];if(!t)return;const r=this.renderer;if(this.initTextureType(e,t),e.resource?.upload(r,e,t))t.samplerType!==eh.FLOAT&&(this.hasIntegerTextures=!0);else{const n=e.realWidth,i=e.realHeight,a=r.gl;(t.width!==n||t.height!==i||t.dirtyId<0)&&(t.width=n,t.height=i,a.texImage2D(e.target,0,t.internalFormat,n,i,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}destroyTexture(e,t){const{gl:r}=this;if((e=e.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(e),r.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){const t=this.managedTextures.indexOf(e);-1!==t&&f_(this.managedTextures,t,1)}}updateTextureStyle(e){const t=e._glTextures[this.CONTEXT_UID];t&&(e.mipmap!==nh.POW2&&2===this.webGLVersion||e.isPowerOfTwo?t.mipmap=e.mipmap>=1:t.mipmap=!1,2===this.webGLVersion||e.isPowerOfTwo?t.wrapMode=e.wrapMode:t.wrapMode=rh.CLAMP,e.resource?.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)}setStyle(e,t){const r=this.gl;if(t.mipmap&&e.mipmap!==nh.ON_MANUAL&&r.generateMipmap(e.target),r.texParameteri(e.target,r.TEXTURE_WRAP_S,t.wrapMode),r.texParameteri(e.target,r.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===th.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);const t=this.renderer.context.extensions.anisotropicFiltering;if(t&&e.anisotropicLevel>0&&e.scaleMode===th.LINEAR){const n=Math.min(e.anisotropicLevel,r.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(e.target,t.TEXTURE_MAX_ANISOTROPY_EXT,n)}}else r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===th.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(e.target,r.TEXTURE_MAG_FILTER,e.scaleMode===th.LINEAR?r.LINEAR:r.NEAREST)}destroy(){this.renderer=null}}Yb.extension={type:b_.RendererSystem,name:"texture"},I_.add(Yb);class Kb{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:r}=this,n=e._glTransformFeedbacks[r]||this.createGLTransformFeedback(e);t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,n)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,t){const{gl:r,renderer:n}=this;t&&n.shader.bind(t),r.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:t,renderer:r,CONTEXT_UID:n}=this,i=t.createTransformFeedback();e._glTransformFeedbacks[n]=i,t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,i);for(let a=0;a<e.buffers.length;a++){const i=e.buffers[a];i&&(r.buffer.update(i),i._glBuffers[n].refCount++,t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,a,i._glBuffers[n].buffer||null))}return t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),i}disposeTransformFeedback(e,t){const r=e._glTransformFeedbacks[this.CONTEXT_UID],n=this.gl;e.disposeRunner.remove(this);const i=this.renderer.buffer;if(i)for(let a=0;a<e.buffers.length;a++){const r=e.buffers[a];if(!r)continue;const n=r._glBuffers[this.CONTEXT_UID];n&&(n.refCount--,0===n.refCount&&!t&&i.dispose(r,t))}r&&(t||n.deleteTransformFeedback(r),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}Kb.extension={type:b_.RendererSystem,name:"transformFeedback"},I_.add(Kb);class Zb{constructor(e){this.renderer=e}init(e){this.screen=new Q_(0,0,e.width,e.height),this.element=e.view||hh.ADAPTER.createCanvas(),this.resolution=e.resolution||hh.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,t){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(t*this.resolution);const r=this.element.width/this.resolution,n=this.element.height/this.resolution;this.screen.width=r,this.screen.height=n,this.autoDensity&&(this.element.style.width=`${r}px`,this.element.style.height=`${n}px`),this.renderer.emit("resize",r,n),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){e&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}}Zb.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},Zb.extension={type:[b_.RendererSystem,b_.CanvasRendererSystem],name:"_view"},I_.add(Zb),hh.PREFER_ENV=Xd.WEBGL2,hh.STRICT_TEXTURE_CACHE=!1,hh.RENDER_OPTIONS={...Xv.defaultOptions,...Hv.defaultOptions,...Zb.defaultOptions,...zb.defaultOptions},Object.defineProperties(hh,{WRAP_MODE:{get:()=>F_.defaultOptions.wrapMode,set(e){Rg("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),F_.defaultOptions.wrapMode=e}},SCALE_MODE:{get:()=>F_.defaultOptions.scaleMode,set(e){Rg("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),F_.defaultOptions.scaleMode=e}},MIPMAP_TEXTURES:{get:()=>F_.defaultOptions.mipmap,set(e){Rg("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),F_.defaultOptions.mipmap=e}},ANISOTROPIC_LEVEL:{get:()=>F_.defaultOptions.anisotropicLevel,set(e){Rg("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),F_.defaultOptions.anisotropicLevel=e}},FILTER_RESOLUTION:{get:()=>(Rg("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),zv.defaultResolution),set(e){zv.defaultResolution=e}},FILTER_MULTISAMPLE:{get:()=>(Rg("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),zv.defaultMultisample),set(e){zv.defaultMultisample=e}},SPRITE_MAX_TEXTURES:{get:()=>jv.defaultMaxTextures,set(e){Rg("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),jv.defaultMaxTextures=e}},SPRITE_BATCH_SIZE:{get:()=>jv.defaultBatchSize,set(e){Rg("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),jv.defaultBatchSize=e}},CAN_UPLOAD_SAME_BUFFER:{get:()=>jv.canUploadSameBuffer,set(e){Rg("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),jv.canUploadSameBuffer=e}},GC_MODE:{get:()=>qb.defaultMode,set(e){Rg("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),qb.defaultMode=e}},GC_MAX_IDLE:{get:()=>qb.defaultMaxIdle,set(e){Rg("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),qb.defaultMaxIdle=e}},GC_MAX_CHECK_COUNT:{get:()=>qb.defaultCheckCountMax,set(e){Rg("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),qb.defaultCheckCountMax=e}},PRECISION_VERTEX:{get:()=>Mv.defaultVertexPrecision,set(e){Rg("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Mv.defaultVertexPrecision=e}},PRECISION_FRAGMENT:{get:()=>Mv.defaultFragmentPrecision,set(e){Rg("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Mv.defaultFragmentPrecision=e}}});var Qb=(e=>(e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY",e))(Qb||{});class Jb{constructor(e,t=null,r=0,n=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=r,this.once=n}match(e,t=null){return this.fn===e&&this.context===t}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const ew=class e{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Jb(null,null,1/0),this.deltaMS=1/e.targetFPMS,this.elapsedMS=1/e.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&null===this._requestId&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,r=Qb.NORMAL){return this._addListener(new Jb(e,t,r))}addOnce(e,t,r=Qb.NORMAL){return this._addListener(new Jb(e,t,r,!0))}_addListener(e){let t=this._head.next,r=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(r);break}r=t,t=t.next}e.previous||e.connect(r)}else e.connect(r);return this._startIfPossible(),this}remove(e,t){let r=this._head.next;for(;r;)r=r.match(e,t)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let r;if(t>this.lastTime){if(r=this.elapsedMS=t-this.lastTime,r>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){const e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*e.targetFPMS;const n=this._head;let i=n.next;for(;i;)i=i.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const r=Math.min(this.maxFPS,t),n=Math.min(Math.max(0,r)/1e3,e.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(0===e)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!e._shared){const t=e._shared=new e;t.autoStart=!0,t._protected=!0}return e._shared}static get system(){if(!e._system){const t=e._system=new e;t.autoStart=!0,t._protected=!0}return e._system}};ew.targetFPMS=.06;let tw=ew;Object.defineProperties(hh,{TARGET_FPMS:{get:()=>tw.targetFPMS,set(e){Rg("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),tw.targetFPMS=e}}});class rw{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,Qb.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?tw.shared:new tw,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}rw.extension=b_.Application,I_.add(rw);const nw=[];I_.handleByList(b_.Renderer,nw);class iw{constructor(e){this.renderer=e}contextChange(e){let t;if(1===this.renderer.context.webGLVersion){const r=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,r)}else{const r=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,r)}t>=uh.HIGH?this.multisample=uh.HIGH:t>=uh.MEDIUM?this.multisample=uh.MEDIUM:t>=uh.LOW?this.multisample=uh.LOW:this.multisample=uh.NONE}destroy(){}}iw.extension={type:b_.RendererSystem,name:"_multisample"},I_.add(iw);class aw{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class sw{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:r}=this,n=e._glBuffers[r]||this.createGLBuffer(e);t.bindBuffer(e.type,n.buffer)}unbind(e){const{gl:t}=this;t.bindBuffer(e,null)}bindBufferBase(e,t){const{gl:r,CONTEXT_UID:n}=this;if(this.boundBufferBases[t]!==e){const i=e._glBuffers[n]||this.createGLBuffer(e);this.boundBufferBases[t]=e,r.bindBufferBase(r.UNIFORM_BUFFER,t,i.buffer)}}bindBufferRange(e,t,r){const{gl:n,CONTEXT_UID:i}=this;r=r||0;const a=e._glBuffers[i]||this.createGLBuffer(e);n.bindBufferRange(n.UNIFORM_BUFFER,t||0,a.buffer,256*r,256)}update(e){const{gl:t,CONTEXT_UID:r}=this,n=e._glBuffers[r]||this.createGLBuffer(e);if(e._updateID!==n.updateID)if(n.updateID=e._updateID,t.bindBuffer(e.type,n.buffer),n.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{const r=e.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;n.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,r)}}dispose(e,t){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const r=e._glBuffers[this.CONTEXT_UID],n=this.gl;e.disposeRunner.remove(this),r&&(t||n.deleteBuffer(r.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const t=Object.keys(this.managedBuffers);for(let r=0;r<t.length;r++)this.dispose(this.managedBuffers[t[r]],e)}createGLBuffer(e){const{CONTEXT_UID:t,gl:r}=this;return e._glBuffers[t]=new aw(r.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t]}}sw.extension={type:b_.RendererSystem,name:"buffer"},I_.add(sw);class ow{constructor(e){this.renderer=e}render(e,t){const r=this.renderer;let n,i,a,s;if(t&&(n=t.renderTexture,i=t.clear,a=t.transform,s=t.skipUpdateTransform),this.renderingToScreen=!n,r.runners.prerender.emit(),r.emit("prerender"),r.projection.transform=a,!r.context.isLost){if(n||(this.lastObjectRendered=e),!s){const t=e.enableTempParent();e.updateTransform(),e.disableTempParent(t)}r.renderTexture.bind(n),r.batch.currentRenderer.start(),(i??r.background.clearBeforeRender)&&r.renderTexture.clear(),e.render(r),r.batch.currentRenderer.flush(),n&&(t.blit&&r.framebuffer.blit(),n.baseTexture.update()),r.runners.postrender.emit(),r.projection.transform=null,r.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}ow.extension={type:b_.RendererSystem,name:"objectRenderer"},I_.add(ow);const lw=class e extends $b{constructor(t){super(),this.type=qd.WEBGL,t=Object.assign({},hh.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Ov({projectionMatrix:new J_},!0);const r={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:e.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(r),"useContextAlpha"in t&&(Rg("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&"notMultiplied"!==t.useContextAlpha,t.backgroundAlpha=!1===t.useContextAlpha?1:t.backgroundAlpha),this._plugin.rendererPlugins=e.__plugins,this.options=t,this.startup.run(this.options)}static test(e){return!e?.forceCanvas&&(typeof Mg>"u"&&(Mg=function(){const e={stencil:!0,failIfMajorPerformanceCaveat:hh.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!hh.ADAPTER.getWebGLRenderingContext())return!1;const t=hh.ADAPTER.createCanvas();let r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);const n=!!r?.getContextAttributes()?.stencil;if(r){const e=r.getExtension("WEBGL_lose_context");e&&e.loseContext()}return r=null,n}catch{return!1}}()),Mg)}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return Rg("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return Rg("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return Rg("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return Rg("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){Rg("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return Rg("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){Rg("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return Rg("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};lw.extension={type:b_.Renderer,priority:1},lw.__plugins={},lw.__systems={};let uw=lw;I_.handleByMap(b_.RendererPlugin,uw.__plugins),I_.handleByMap(b_.RendererSystem,uw.__systems),I_.add(uw);class cw extends R_{constructor(e,t){const{width:r,height:n}=t||{};super(r,n),this.items=[],this.itemDirtyIds=[];for(let i=0;i<e;i++){const e=new F_;this.items.push(e),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,t){for(let r=0;r<this.length;r++)e[r]&&(e[r].castToBaseTexture?this.addBaseTextureAt(e[r].castToBaseTexture(),r):e[r]instanceof R_?this.addResourceAt(e[r],r):this.addResourceAt(C_(e[r],t),r))}dispose(){for(let e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,t){if(!this.items[t])throw new Error(`Index ${t} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this}bind(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=e,this.items[t].on("update",e.update,e)}unbind(e){super.unbind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=null,this.items[t].off("update",e.update,e)}load(){if(this._load)return this._load;const e=this.items.map(e=>e.resource).filter(e=>e).map(e=>e.load());return this._load=Promise.all(e).then(()=>{const{realWidth:e,realHeight:t}=this.items[0];return this.resize(e,t),this.update(),Promise.resolve(this)}),this._load}}const dw=class e extends cw{constructor(t,r){const{width:n,height:i,autoLoad:a,linkBaseTexture:s}=r||{};if(t&&t.length!==e.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:n,height:i});for(let o=0;o<e.SIDES;o++)this.items[o].target=Qd.TEXTURE_CUBE_MAP_POSITIVE_X+o;this.linkBaseTexture=!1!==s,t&&this.initFromArray(t,r),!1!==a&&this.load()}bind(e){super.bind(e),e.target=Qd.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,r){if(void 0===r&&(r=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0){if(!e.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(e.resource,t)}else e.target=Qd.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(t,r,n){const i=this.itemDirtyIds;for(let a=0;a<e.SIDES;a++){const e=this.items[a];(i[a]<e.dirtyId||n.dirtyId<r.dirtyId)&&(e.valid&&e.resource?(e.resource.upload(t,e,n),i[a]=e.dirtyId):i[a]<-1&&(t.gl.texImage2D(e.target,0,n.internalFormat,r.realWidth,r.realHeight,0,r.format,n.type,null),i[a]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===e.SIDES}};dw.SIDES=6;let hw=dw;class fw extends Yv{constructor(e,t){let r,n,i;t=t||{},"string"==typeof e?(r=fw.EMPTY,n=e,i=!0):(r=e,n=null,i=!1),super(r),this.url=n,this.crossOrigin=t.crossOrigin??!0,this.alphaMode="number"==typeof t.alphaMode?t.alphaMode:null,this.ownsImageBitmap=t.ownsImageBitmap??i,this._load=null,!1!==t.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise(async(e,t)=>{if(null!==this.url)try{const t=await hh.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const r=await t.blob();if(this.destroyed)return;const n=await createImageBitmap(r,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===ih.UNPACK?"premultiply":"none"});if(this.destroyed)return void n.close();this.source=n,this.update(),e(this)}catch(lk){if(this.destroyed)return;t(lk),this.onError.emit(lk)}else e(this)})),this._load}upload(e,t,r){return this.source instanceof ImageBitmap?("number"==typeof this.alphaMode&&(t.alphaMode=this.alphaMode),super.upload(e,t,r)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&("string"==typeof e||e instanceof ImageBitmap)}static get EMPTY(){return fw._EMPTY=fw._EMPTY??hh.ADAPTER.createCanvas(0,0),fw._EMPTY}}const pw=class e extends Yv{constructor(e,t){t=t||{},super(hh.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,!1!==t.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise(t=>{if(this._resolve=()=>{this.update(),t(this)},e.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()})),this._load}_loadSvg(){const e=new Image;Yv.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{this._resolve&&(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;const t=e.width,r=e.height;if(!t||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let n=t*this.scale,i=r*this.scale;(this._overrideWidth||this._overrideHeight)&&(n=this._overrideWidth||this._overrideHeight/r*t,i=this._overrideHeight||this._overrideWidth/t*r),n=Math.round(n),i=Math.round(i);const a=this.source;a.width=n,a.height=i,a._pixiId=`canvas_${m_()}`,a.getContext("2d").drawImage(e,0,0,t,r,0,0,n,i),this._resolve(),this._resolve=null}}static getSize(t){const r=e.SVG_SIZE.exec(t),n={};return r&&(n[r[1]]=Math.round(parseFloat(r[3])),n[r[5]]=Math.round(parseFloat(r[7]))),n}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,r){return"svg"===r||"string"==typeof t&&t.startsWith("data:image/svg+xml")||"string"==typeof t&&e.SVG_XML.test(t)}};pw.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,pw.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let mw=pw;const yw=class e extends Yv{constructor(t,r){if(r=r||{},!(t instanceof HTMLVideoElement)){const n=document.createElement("video");!1!==r.autoLoad&&n.setAttribute("preload","auto"),!1!==r.playsinline&&(n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline","")),!0===r.muted&&(n.setAttribute("muted",""),n.muted=!0),!0===r.loop&&n.setAttribute("loop",""),!1!==r.autoPlay&&n.setAttribute("autoplay",""),"string"==typeof t&&(t=[t]);const i=t[0].src||t[0];Yv.crossOrigin(n,i,r.crossorigin);for(let r=0;r<t.length;++r){const i=document.createElement("source");let{src:a,mime:s}=t[r];if(a=a||t[r],a.startsWith("data:"))s=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){const t=a.split("?").shift().toLowerCase(),r=t.slice(t.lastIndexOf(".")+1);s=s||e.MIME_TYPES[r]||`video/${r}`}i.src=a,s&&(i.type=s),n.appendChild(i)}t=n}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=r.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==r.autoPlay,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),!1!==r.autoLoad&&this.load()}update(e=0){if(!this.destroyed){if(this._updateFPS){const e=tw.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((t,r)=>{this.valid?t(this):(this._resolve=t,this._reject=r,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!t&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();const e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(tw.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),null===this._videoFrameRequestCallbackHandle&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(null!==this._videoFrameRequestCallbackHandle&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(tw.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(null!==this._videoFrameRequestCallbackHandle&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(tw.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t,r){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||e.TYPES.includes(r)}};yw.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],yw.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let gw=yw;k_.push(fw,Kv,class extends Yv{constructor(e){super(e)}static test(e){const{OffscreenCanvas:t}=globalThis;return!!(t&&e instanceof t)||globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}},gw,class extends Yv{constructor(e){super(e)}static test(e){return!!globalThis.VideoFrame&&e instanceof globalThis.VideoFrame}},mw,M_,hw,class extends cw{constructor(e,t){const{width:r,height:n}=t||{};let i,a;Array.isArray(e)?(i=e,a=e.length):a=e,super(a,{width:r,height:n}),i&&this.initFromArray(i,t)}addBaseTextureAt(e,t){if(!e.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(e.resource,t),this}bind(e){super.bind(e),e.target=Qd.TEXTURE_2D_ARRAY}upload(e,t,r){const{length:n,itemDirtyIds:i,items:a}=this,{gl:s}=e;r.dirtyId<0&&s.texImage3D(s.TEXTURE_2D_ARRAY,0,r.internalFormat,this._width,this._height,n,0,t.format,r.type,null);for(let o=0;o<n;o++){const e=a[o];i[o]<e.dirtyId&&(i[o]=e.dirtyId,e.valid&&s.texSubImage3D(s.TEXTURE_2D_ARRAY,0,0,0,o,e.resource.width,e.resource.height,1,t.format,r.type,e.resource.source))}return!0}});class _w{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?Q_.EMPTY:((e=e||new Q_(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,t){const{a:r,b:n,c:i,d:a,tx:s,ty:o}=e,l=r*t.x+i*t.y+s,u=n*t.x+a*t.y+o;this.minX=Math.min(this.minX,l),this.maxX=Math.max(this.maxX,l),this.minY=Math.min(this.minY,u),this.maxY=Math.max(this.maxY,u)}addQuad(e){let t=this.minX,r=this.minY,n=this.maxX,i=this.maxY,a=e[0],s=e[1];t=a<t?a:t,r=s<r?s:r,n=a>n?a:n,i=s>i?s:i,a=e[2],s=e[3],t=a<t?a:t,r=s<r?s:r,n=a>n?a:n,i=s>i?s:i,a=e[4],s=e[5],t=a<t?a:t,r=s<r?s:r,n=a>n?a:n,i=s>i?s:i,a=e[6],s=e[7],t=a<t?a:t,r=s<r?s:r,n=a>n?a:n,i=s>i?s:i,this.minX=t,this.minY=r,this.maxX=n,this.maxY=i}addFrame(e,t,r,n,i){this.addFrameMatrix(e.worldTransform,t,r,n,i)}addFrameMatrix(e,t,r,n,i){const a=e.a,s=e.b,o=e.c,l=e.d,u=e.tx,c=e.ty;let d=this.minX,h=this.minY,f=this.maxX,p=this.maxY,m=a*t+o*r+u,y=s*t+l*r+c;d=m<d?m:d,h=y<h?y:h,f=m>f?m:f,p=y>p?y:p,m=a*n+o*r+u,y=s*n+l*r+c,d=m<d?m:d,h=y<h?y:h,f=m>f?m:f,p=y>p?y:p,m=a*t+o*i+u,y=s*t+l*i+c,d=m<d?m:d,h=y<h?y:h,f=m>f?m:f,p=y>p?y:p,m=a*n+o*i+u,y=s*n+l*i+c,d=m<d?m:d,h=y<h?y:h,f=m>f?m:f,p=y>p?y:p,this.minX=d,this.minY=h,this.maxX=f,this.maxY=p}addVertexData(e,t,r){let n=this.minX,i=this.minY,a=this.maxX,s=this.maxY;for(let o=t;o<r;o+=2){const t=e[o],r=e[o+1];n=t<n?t:n,i=r<i?r:i,a=t>a?t:a,s=r>s?r:s}this.minX=n,this.minY=i,this.maxX=a,this.maxY=s}addVertices(e,t,r,n){this.addVerticesMatrix(e.worldTransform,t,r,n)}addVerticesMatrix(e,t,r,n,i=0,a=i){const s=e.a,o=e.b,l=e.c,u=e.d,c=e.tx,d=e.ty;let h=this.minX,f=this.minY,p=this.maxX,m=this.maxY;for(let y=r;y<n;y+=2){const e=t[y],r=t[y+1],n=s*e+l*r+c,g=u*r+o*e+d;h=Math.min(h,n-i),p=Math.max(p,n+i),f=Math.min(f,g-a),m=Math.max(m,g+a)}this.minX=h,this.minY=f,this.maxX=p,this.maxY=m}addBounds(e){const t=this.minX,r=this.minY,n=this.maxX,i=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>n?e.maxX:n,this.maxY=e.maxY>i?e.maxY:i}addBoundsMask(e,t){const r=e.minX>t.minX?e.minX:t.minX,n=e.minY>t.minY?e.minY:t.minY,i=e.maxX<t.maxX?e.maxX:t.maxX,a=e.maxY<t.maxY?e.maxY:t.maxY;if(r<=i&&n<=a){const e=this.minX,t=this.minY,s=this.maxX,o=this.maxY;this.minX=r<e?r:e,this.minY=n<t?n:t,this.maxX=i>s?i:s,this.maxY=a>o?a:o}}addBoundsMatrix(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,t){const r=e.minX>t.x?e.minX:t.x,n=e.minY>t.y?e.minY:t.y,i=e.maxX<t.x+t.width?e.maxX:t.x+t.width,a=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(r<=i&&n<=a){const e=this.minX,t=this.minY,s=this.maxX,o=this.maxY;this.minX=r<e?r:e,this.minY=n<t?n:t,this.maxX=i>s?i:s,this.maxY=a>o?a:o}}pad(e=0,t=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)}addFramePad(e,t,r,n,i,a){e-=i,t-=a,r+=i,n+=a,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>n?this.maxY:n}}class vw extends Mh{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new cv,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new _w,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const t=Object.keys(e);for(let r=0;r<t.length;++r){const n=t[r];Object.defineProperty(vw.prototype,n,Object.getOwnPropertyDescriptor(e,n))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new Q_),t=this._boundsRect),this._bounds.getRectangle(t)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new Q_),e=this._localBoundsRect),this._localBounds||(this._localBounds=new _w);const t=this.transform,r=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=r?.worldAlpha??1,this.transform=this._tempDisplayObjectParent.transform;const n=this._bounds,i=this._boundsID;this._bounds=this._localBounds;const a=this.getBounds(!1,e);return this.parent=r,this.transform=t,this._bounds=n,this._bounds.updateID+=this._boundsID-i,a}toGlobal(e,t,r=!1){return r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)}toLocal(e,t,r,n){return t&&(e=t.toGlobal(e,r,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,r)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){this.parent?.removeChild(this)}setTransform(e=0,t=0,r=1,n=1,i=0,a=0,s=0,o=0,l=0){return this.position.x=e,this.position.y=t,this.scale.x=r||1,this.scale.y=n||1,this.rotation=i,this.skew.x=a,this.skew.y=s,this.pivot.x=o,this.pivot.y=l,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new bw),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*q_}set angle(e){this.transform.rotation=e*W_}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount--,0===e._maskRefCount&&(e.renderable=!0,e.isMask=!1))}if(this._mask=e,this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(0===e._maskRefCount&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++)}}}}class bw extends vw{constructor(){super(...arguments),this.sortDirty=null}}vw.prototype.displayObjectUpdateTransform=vw.prototype.updateTransform;const ww=new J_;function xw(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}const Iw=class e extends vw{constructor(){super(),this.children=[],this.sortableChildren=e.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{const t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;const r=this.getChildIndex(e),n=this.getChildIndex(t);this.children[r]=t,this.children[n]=e,this.onChildrenChange(r<n?r:n)}getChildIndex(e){const t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const r=this.getChildIndex(e);f_(this.children,r,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{const t=e[0],r=this.children.indexOf(t);if(-1===r)return null;t.parent=null,t.transform._parentID=-1,f_(this.children,r,1),this._boundsID++,this.onChildrenChange(r),t.emit("removed",this),this.emit("childRemoved",t,this,r)}return e[0]}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,f_(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){const r=e,n=t-r;let i;if(n>0&&n<=t){i=this.children.splice(r,n);for(let e=0;e<i.length;++e)i[e].parent=null,i[e].transform&&(i[e].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let e=0;e<i.length;++e)i[e].emit("removed",this),this.emit("childRemoved",i[e],this,e);return i}if(0===n&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,r=this.children.length;t<r;++t){const r=this.children[t];r._lastSortedIndex=t,!e&&0!==r.zIndex&&(e=!0)}e&&this.children.length>1&&this.children.sort(xw),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){const t=this.children[e];t.visible&&t.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const t=this.children[e];if(t.visible&&t.renderable)if(t.calculateBounds(),t._mask){const e=t._mask.isMaskData?t._mask.maskObject:t._mask;e?(e.calculateBounds(),this._bounds.addBoundsMask(t._bounds,e._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){const r=super.getLocalBounds(e);if(!t)for(let n=0,i=this.children.length;n<i;++n){const e=this.children[n];e.visible&&e.updateTransform()}return r}_calculateBounds(){}_renderWithCulling(t){const r=t.renderTexture.sourceFrame;if(!(r.width>0&&r.height>0))return;let n,i;this.cullArea?(n=this.cullArea,i=this.worldTransform):this._render!==e.prototype._render&&(n=this.getBounds(!0));const a=t.projection.transform;if(a&&(i?(i=ww.copyFrom(i),i.prepend(a)):i=a),n&&r.intersects(n,i))this._render(t);else if(this.cullArea)return;for(let e=0,s=this.children.length;e<s;++e){const r=this.children[e],n=r.cullable;r.cullable=n||!this.cullArea,r.render(t),r.cullable=n}}render(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters?.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let t=0,r=this.children.length;t<r;++t)this.children[t].render(e)}}renderAdvanced(e){const t=this.filters,r=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let e=0;e<t.length;e++)t[e].enabled&&this._enabledFilters.push(t[e])}const n=t&&this._enabledFilters?.length||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==lh.NONE));if(n&&e.batch.flush(),t&&this._enabledFilters?.length&&e.filter.push(this,this._enabledFilters),r&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let t=0,r=this.children.length;t<r;++t)this.children[t].render(e)}n&&e.batch.flush(),r&&e.mask.pop(this),t&&this._enabledFilters?.length&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const t="boolean"==typeof e?e:e?.children,r=this.removeChildren(0,this.children.length);if(t)for(let n=0;n<r.length;++n)r[n].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e}};Iw.defaultSortableChildren=!1;let Tw=Iw;Tw.prototype.containerUpdateTransform=Tw.prototype.updateTransform,Object.defineProperties(hh,{SORTABLE_CHILDREN:{get:()=>Tw.defaultSortableChildren,set(e){Rg("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Tw.defaultSortableChildren=e}}});const Ew=class e{constructor(t){this.stage=new Tw,t=Object.assign({forceCanvas:!1},t),this.renderer=function(e){for(const t of nw)if(t.test(e))return new t(e);throw new Error("Unable to auto-detect a suitable renderer.")}(t),e._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer?.view}get screen(){return this.renderer?.screen}destroy(t,r){const n=e._plugins.slice(0);n.reverse(),n.forEach(e=>{e.destroy.call(this)}),this.stage.destroy(r),this.stage=null,this.renderer.destroy(t),this.renderer=null}};Ew._plugins=[];let Aw=Ew;I_.handleByList(b_.Application,Aw._plugins);class Sw{static init(e){Object.defineProperty(this,"resizeTo",{set(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;let e,t;if(this.cancelResize(),this._resizeTo===globalThis.window)e=globalThis.innerWidth,t=globalThis.innerHeight;else{const{clientWidth:r,clientHeight:n}=this._resizeTo;e=r,t=n}this.renderer.resize(e,t),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}Sw.extension=b_.Application,I_.add(Sw);class kw extends zv{constructor(){super("attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",{m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1}),this.alpha=1}_loadMatrix(e,t=!1){let r=e;t&&(this._multiply(r,this.uniforms.m,e),r=this._colorMatrix(r)),this.uniforms.m=r}_multiply(e,t,r){return e[0]=t[0]*r[0]+t[1]*r[5]+t[2]*r[10]+t[3]*r[15],e[1]=t[0]*r[1]+t[1]*r[6]+t[2]*r[11]+t[3]*r[16],e[2]=t[0]*r[2]+t[1]*r[7]+t[2]*r[12]+t[3]*r[17],e[3]=t[0]*r[3]+t[1]*r[8]+t[2]*r[13]+t[3]*r[18],e[4]=t[0]*r[4]+t[1]*r[9]+t[2]*r[14]+t[3]*r[19]+t[4],e[5]=t[5]*r[0]+t[6]*r[5]+t[7]*r[10]+t[8]*r[15],e[6]=t[5]*r[1]+t[6]*r[6]+t[7]*r[11]+t[8]*r[16],e[7]=t[5]*r[2]+t[6]*r[7]+t[7]*r[12]+t[8]*r[17],e[8]=t[5]*r[3]+t[6]*r[8]+t[7]*r[13]+t[8]*r[18],e[9]=t[5]*r[4]+t[6]*r[9]+t[7]*r[14]+t[8]*r[19]+t[9],e[10]=t[10]*r[0]+t[11]*r[5]+t[12]*r[10]+t[13]*r[15],e[11]=t[10]*r[1]+t[11]*r[6]+t[12]*r[11]+t[13]*r[16],e[12]=t[10]*r[2]+t[11]*r[7]+t[12]*r[12]+t[13]*r[17],e[13]=t[10]*r[3]+t[11]*r[8]+t[12]*r[13]+t[13]*r[18],e[14]=t[10]*r[4]+t[11]*r[9]+t[12]*r[14]+t[13]*r[19]+t[14],e[15]=t[15]*r[0]+t[16]*r[5]+t[17]*r[10]+t[18]*r[15],e[16]=t[15]*r[1]+t[16]*r[6]+t[17]*r[11]+t[18]*r[16],e[17]=t[15]*r[2]+t[16]*r[7]+t[17]*r[12]+t[18]*r[17],e[18]=t[15]*r[3]+t[16]*r[8]+t[17]*r[13]+t[18]*r[18],e[19]=t[15]*r[4]+t[16]*r[9]+t[17]*r[14]+t[18]*r[19]+t[19],e}_colorMatrix(e){const t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t}brightness(e,t){const r=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)}tint(e,t){const[r,n,i]=o_.shared.setValue(e).toArray(),a=[r,0,0,0,0,0,n,0,0,0,0,0,i,0,0,0,0,0,1,0];this._loadMatrix(a,t)}greyscale(e,t){const r=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(r,t)}blackAndWhite(e){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e)}hue(e,t){e=(e||0)/180*Math.PI;const r=Math.cos(e),n=Math.sin(e),i=1/3,a=(0,Math.sqrt)(i),s=[r+(1-r)*i,i*(1-r)-a*n,i*(1-r)+a*n,0,0,i*(1-r)+a*n,r+i*(1-r),i*(1-r)-a*n,0,0,i*(1-r)-a*n,i*(1-r)+a*n,r+i*(1-r),0,0,0,0,0,1,0];this._loadMatrix(s,t)}contrast(e,t){const r=(e||0)+1,n=-.5*(r-1),i=[r,0,0,0,n,0,r,0,0,n,0,0,r,0,n,0,0,0,1,0];this._loadMatrix(i,t)}saturate(e=0,t){const r=2*e/3+1,n=-.5*(r-1),i=[r,n,n,0,0,n,r,n,0,0,n,n,r,0,0,0,0,0,1,0];this._loadMatrix(i,t)}desaturate(){this.saturate(-1)}negative(e){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],e)}sepia(e){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e)}technicolor(e){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)}polaroid(e){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e)}toBGR(e){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)}kodachrome(e){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)}browni(e){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)}vintage(e){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)}colorTone(e,t,r,n,i){e=e||.2,t=t||.15,r=r||16770432,n=n||3375104;const a=o_.shared,[s,o,l]=a.setValue(r).toArray(),[u,c,d]=a.setValue(n).toArray(),h=[.3,.59,.11,0,0,s,o,l,e,0,u,c,d,t,0,s-u,o-c,l-d,0,0];this._loadMatrix(h,i)}night(e,t){const r=[-2*(e=e||.1),-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0];this._loadMatrix(r,t)}predator(e,t){const r=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(r,t)}lsd(e){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e)}reset(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}kw.prototype.grayscale=kw.prototype.greyscale;const Cw=class extends zv{constructor(e){super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","uniform float radius;\nuniform float strength;\nuniform vec2 center;\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\n\nvoid main()\n{\n    vec2 coord = vTextureCoord * filterArea.xy;\n    coord -= center * dimensions.xy;\n    float distance = length(coord);\n    if (distance < radius) {\n        float percent = distance / radius;\n        if (strength > 0.0) {\n            coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);\n        } else {\n            coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);\n        }\n    }\n    coord += center * dimensions.xy;\n    coord /= filterArea.xy;\n    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    vec4 color = texture2D(uSampler, clampedCoord);\n    if (coord != clampedCoord) {\n        color *= max(0.0, 1.0 - length(coord - clampedCoord));\n    }\n\n    gl_FragColor = color;\n}\n"),this.uniforms.dimensions=new Float32Array(2),Object.assign(this,Cw.defaults,e)}apply(e,t,r,n){const{width:i,height:a}=t.filterFrame;this.uniforms.dimensions[0]=i,this.uniforms.dimensions[1]=a,e.applyFilter(this,t,r,n)}get radius(){return this.uniforms.radius}set radius(e){this.uniforms.radius=e}get strength(){return this.uniforms.strength}set strength(e){this.uniforms.strength=e}get center(){return this.uniforms.center}set center(e){this.uniforms.center=e}};function Pw(){return Pw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pw.apply(null,arguments)}Cw.defaults={center:[.5,.5],radius:100,strength:1};var Rw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mw="object"===("undefined"==typeof window?"undefined":Rw(window))&&"object"===("undefined"==typeof document?"undefined":Rw(document))&&9===document.nodeType;function Lw(e){return(Lw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ow(e){var t=function(e,t){if("object"!=Lw(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=Lw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==Lw(t)?t:t+""}function Fw(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ow(n.key),n)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Dw(e,t){return(Dw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Nw(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Dw(e,t)}function Bw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Uw={}.constructor;function jw(e){if(null==e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map(jw);if(e.constructor!==Uw)return e;var t={};for(var r in e)t[r]=jw(e[r]);return t}function Gw(e,t,r){void 0===e&&(e="unnamed");var n=r.jss,i=jw(t),a=n.plugins.onCreateRule(e,i,r);return a||(e[0],null)}var zw=function(e,t){for(var r="",n=0;n<e.length&&"!important"!==e[n];n++)r&&(r+=t),r+=e[n];return r},Hw=function(e){if(!Array.isArray(e))return e;var t="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&"!important"!==e[r];r++)t&&(t+=", "),t+=zw(e[r]," ");else t=zw(e,", ");return"!important"===e[e.length-1]&&(t+=" !important"),t};function Vw(e){return e&&!1===e.format?{linebreak:"",space:""}:{linebreak:"\n",space:" "}}function $w(e,t){for(var r="",n=0;n<t;n++)r+="  ";return r+e}function Xw(e,t,r){void 0===r&&(r={});var n="";if(!t)return n;var i=r.indent,a=void 0===i?0:i,s=t.fallbacks;!1===r.format&&(a=-1/0);var o=Vw(r),l=o.linebreak,u=o.space;if(e&&a++,s)if(Array.isArray(s))for(var c=0;c<s.length;c++){var d=s[c];for(var h in d){var f=d[h];null!=f&&(n&&(n+=l),n+=$w(h+":"+u+Hw(f)+";",a))}}else for(var p in s){var m=s[p];null!=m&&(n&&(n+=l),n+=$w(p+":"+u+Hw(m)+";",a))}for(var y in t){var g=t[y];null!=g&&"fallbacks"!==y&&(n&&(n+=l),n+=$w(y+":"+u+Hw(g)+";",a))}return(n||r.allowEmpty)&&e?(n&&(n=""+l+n+l),$w(""+e+u+"{"+n,--a)+$w("}",a)):n}var qw=/([[\].#*$><+~=|^:(),"'`\s])/g,Ww="undefined"!=typeof CSS&&CSS.escape,Yw=function(e){return Ww?Ww(e):e.replace(qw,"\\$1")},Kw=function(){function e(e,t,r){this.type="style",this.isProcessed=!1;var n=r.sheet,i=r.Renderer;this.key=e,this.options=r,this.style=t,n?this.renderer=n.renderer:i&&(this.renderer=new i)}return e.prototype.prop=function(e,t,r){if(void 0===t)return this.style[e];var n=!!r&&r.force;if(!n&&this.style[e]===t)return this;var i=t;r&&!1===r.process||(i=this.options.jss.plugins.onChangeValue(t,e,this));var a=null==i||!1===i,s=e in this.style;if(a&&!s&&!n)return this;var o=a&&s;if(o?delete this.style[e]:this.style[e]=i,this.renderable&&this.renderer)return o?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,i),this;var l=this.options.sheet;return l&&l.attached,this},e}(),Zw=function(e){function t(t,r,n){var i;i=e.call(this,t,r,n)||this;var a=n.selector,s=n.scoped,o=n.sheet,l=n.generateId;return a?i.selectorText=a:!1!==s&&(i.id=l(Bw(Bw(i)),o),i.selectorText="."+Yw(i.id)),i}Nw(t,e);var r=t.prototype;return r.applyTo=function(e){var t=this.renderer;if(t){var r=this.toJSON();for(var n in r)t.setProperty(e,n,r[n])}return this},r.toJSON=function(){var e={};for(var t in this.style){var r=this.style[t];"object"!=typeof r?e[t]=r:Array.isArray(r)&&(e[t]=Hw(r))}return e},r.toString=function(e){var t=this.options.sheet,r=!!t&&t.options.link?Pw({},e,{allowEmpty:!0}):e;return Xw(this.selectorText,this.style,r)},Fw(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,r=this.renderable;if(r&&t)t.setSelector(r,e)||t.replaceRule(r,this)}},get:function(){return this.selectorText}}]),t}(Kw),Qw={onCreateRule:function(e,t,r){return"@"===e[0]||r.parent&&"keyframes"===r.parent.type?null:new Zw(e,t,r)}},Jw={indent:1,children:!0},ex=/@([\w-]+)/,tx=function(){function e(e,t,r){this.type="conditional",this.isProcessed=!1,this.key=e;var n=e.match(ex);for(var i in this.at=n?n[1]:"unknown",this.query=r.name||"@"+this.at,this.options=r,this.rules=new Ex(Pw({},r,{parent:this})),t)this.rules.add(i,t[i]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,r){var n=this.rules.add(e,t,r);return n?(this.options.jss.plugins.onProcessRule(n),n):null},t.replaceRule=function(e,t,r){var n=this.rules.replace(e,t,r);return n&&this.options.jss.plugins.onProcessRule(n),n},t.toString=function(e){void 0===e&&(e=Jw);var t=Vw(e).linebreak;if(null==e.indent&&(e.indent=Jw.indent),null==e.children&&(e.children=Jw.children),!1===e.children)return this.query+" {}";var r=this.rules.toString(e);return r?this.query+" {"+t+r+t+"}":""},e}(),rx=/@container|@media|@supports\s+/,nx={onCreateRule:function(e,t,r){return rx.test(e)?new tx(e,t,r):null}},ix={indent:1,children:!0},ax=/@keyframes\s+([\w-]+)/,sx=function(){function e(e,t,r){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var n=e.match(ax);n&&n[1]?this.name=n[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=r;var i=r.scoped,a=r.sheet,s=r.generateId;for(var o in this.id=!1===i?this.name:Yw(s(this,a)),this.rules=new Ex(Pw({},r,{parent:this})),t)this.rules.add(o,t[o],Pw({},r,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){void 0===e&&(e=ix);var t=Vw(e).linebreak;if(null==e.indent&&(e.indent=ix.indent),null==e.children&&(e.children=ix.children),!1===e.children)return this.at+" "+this.id+" {}";var r=this.rules.toString(e);return r&&(r=""+t+r+t),this.at+" "+this.id+" {"+r+"}"},e}(),ox=/@keyframes\s+/,lx=/\$([\w-]+)/g,ux=function(e,t){return"string"==typeof e?e.replace(lx,function(e,r){return r in t?t[r]:e}):e},cx=function(e,t,r){var n=e[t],i=ux(n,r);i!==n&&(e[t]=i)},dx={onCreateRule:function(e,t,r){return"string"==typeof e&&ox.test(e)?new sx(e,t,r):null},onProcessStyle:function(e,t,r){return"style"===t.type&&r?("animation-name"in e&&cx(e,"animation-name",r.keyframes),"animation"in e&&cx(e,"animation",r.keyframes),e):e},onChangeValue:function(e,t,r){var n=r.options.sheet;if(!n)return e;switch(t){case"animation":case"animation-name":return ux(e,n.keyframes);default:return e}}},hx=function(e){function t(){return e.apply(this,arguments)||this}return Nw(t,e),t.prototype.toString=function(e){var t=this.options.sheet,r=!!t&&t.options.link?Pw({},e,{allowEmpty:!0}):e;return Xw(this.key,this.style,r)},t}(Kw),fx={onCreateRule:function(e,t,r){return r.parent&&"keyframes"===r.parent.type?new hx(e,t,r):null}},px=function(){function e(e,t,r){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=e,this.style=t,this.options=r}return e.prototype.toString=function(e){var t=Vw(e).linebreak;if(Array.isArray(this.style)){for(var r="",n=0;n<this.style.length;n++)r+=Xw(this.at,this.style[n]),this.style[n+1]&&(r+=t);return r}return Xw(this.at,this.style,e)},e}(),mx=/@font-face/,yx={onCreateRule:function(e,t,r){return mx.test(e)?new px(e,t,r):null}},gx=function(){function e(e,t,r){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=e,this.style=t,this.options=r}return e.prototype.toString=function(e){return Xw(this.key,this.style,e)},e}(),_x={onCreateRule:function(e,t,r){return"@viewport"===e||"@-ms-viewport"===e?new gx(e,t,r):null}},vx=function(){function e(e,t,r){this.type="simple",this.isProcessed=!1,this.key=e,this.value=t,this.options=r}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",r=0;r<this.value.length;r++)t+=this.key+" "+this.value[r]+";",this.value[r+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),bx={"@charset":!0,"@import":!0,"@namespace":!0},wx={onCreateRule:function(e,t,r){return e in bx?new vx(e,t,r):null}},xx=[Qw,nx,dx,fx,yx,_x,wx],Ix={process:!0},Tx={force:!0,process:!0},Ex=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,r){var n=this.options,i=n.parent,a=n.sheet,s=n.jss,o=n.Renderer,l=n.generateId,u=n.scoped,c=Pw({classes:this.classes,parent:i,sheet:a,jss:s,Renderer:o,generateId:l,scoped:u,name:e,keyframes:this.keyframes,selector:void 0},r),d=e;e in this.raw&&(d=e+"-d"+this.counter++),this.raw[d]=t,d in this.classes&&(c.selector="."+Yw(this.classes[d]));var h=Gw(d,t,c);if(!h)return null;this.register(h);var f=void 0===c.index?this.index.length:c.index;return this.index.splice(f,0,h),h},t.replace=function(e,t,r){var n=this.get(e),i=this.index.indexOf(n);n&&this.remove(n);var a=r;return-1!==i&&(a=Pw({},r,{index:i})),this.add(e,t,a)},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof Zw?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof sx&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof Zw?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof sx&&delete this.keyframes[e.name]},t.update=function(){var e,t,r;if("string"==typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],r=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.get(e),t,r);else for(var n=0;n<this.index.length;n++)this.updateOne(this.index[n],t,r)},t.updateOne=function(t,r,n){void 0===n&&(n=Ix);var i=this.options,a=i.jss.plugins,s=i.sheet;if(t.rules instanceof e)t.rules.update(r,n);else{var o=t.style;if(a.onUpdate(r,t,s,n),n.process&&o&&o!==t.style){for(var l in a.onProcessStyle(t.style,t,s),t.style){var u=t.style[l];u!==o[l]&&t.prop(l,u,Tx)}for(var c in o){var d=t.style[c],h=o[c];null==d&&d!==h&&t.prop(c,null,Tx)}}}},t.toString=function(e){for(var t="",r=this.options.sheet,n=!!r&&r.options.link,i=Vw(e).linebreak,a=0;a<this.index.length;a++){var s=this.index[a].toString(e);(s||n)&&(t&&(t+=i),t+=s)}return t},e}(),Ax=function(){function e(e,t){for(var r in this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Pw({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new Ex(this.options),e)this.rules.add(r,e[r]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(e,t,r){var n=this.queue;this.attached&&!n&&(this.queue=[]);var i=this.rules.add(e,t,r);return i?(this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(n?n.push(i):(this.insertRule(i),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),i):i:(this.deployed=!1,i)):null},t.replaceRule=function(e,t,r){var n=this.rules.get(e);if(!n)return this.addRule(e,t,r);var i=this.rules.replace(e,t,r);return i&&this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(this.renderer&&(i?n.renderable&&this.renderer.replaceRule(n.renderable,i):this.renderer.deleteRule(n)),i):i:(this.deployed=!1,i)},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var r=[];for(var n in e){var i=this.addRule(n,e[n],t);i&&r.push(i)}return r},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t="object"==typeof e?e:this.rules.get(e);return!(!t||this.attached&&!t.renderable)&&(this.rules.remove(t),!(this.attached&&t.renderable&&this.renderer)||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.updateOne=function(e,t,r){return this.rules.updateOne(e,t,r),this},t.toString=function(e){return this.rules.toString(e)},e}(),Sx=function(){function e(){this.plugins={internal:[],external:[]},this.registry={}}var t=e.prototype;return t.onCreateRule=function(e,t,r){for(var n=0;n<this.registry.onCreateRule.length;n++){var i=this.registry.onCreateRule[n](e,t,r);if(i)return i}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,r=0;r<this.registry.onProcessRule.length;r++)this.registry.onProcessRule[r](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,r){for(var n=0;n<this.registry.onProcessStyle.length;n++)t.style=this.registry.onProcessStyle[n](t.style,t,r)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,r,n){for(var i=0;i<this.registry.onUpdate.length;i++)this.registry.onUpdate[i](e,t,r,n)},t.onChangeValue=function(e,t,r){for(var n=e,i=0;i<this.registry.onChangeValue.length;i++)n=this.registry.onChangeValue[i](n,t,r);return n},t.use=function(e,t){void 0===t&&(t={queue:"external"});var r=this.plugins[t.queue];-1===r.indexOf(e)&&(r.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(e,t){for(var r in t)r in e&&e[r].push(t[r]);return e},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),kx=function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,r=e.options.index;if(-1===t.indexOf(e))if(0===t.length||r>=this.index)t.push(e);else for(var n=0;n<t.length;n++)if(t[n].options.index>r)return void t.splice(n,0,e)},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,r=t.attached,n=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(t,["attached"]),i=Vw(n).linebreak,a="",s=0;s<this.registry.length;s++){var o=this.registry[s];null!=r&&o.attached!==r||(a&&(a+=i),a+=o.toString(n))}return a},Fw(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}(),Cx=new kx,Px="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window&&window.Math===Math?window:"undefined"!=typeof self&&self.Math===Math?self:Function("return this")(),Rx="2f1acc6c3a606b082e5eef5e54414ffb";null==Px[Rx]&&(Px[Rx]=0);var Mx=Px[Rx]++,Lx=function(e){void 0===e&&(e={});var t=0;return function(r,n){t+=1;var i="",a="";return n&&(n.options.classNamePrefix&&(a=n.options.classNamePrefix),null!=n.options.jss.id&&(i=String(n.options.jss.id))),e.minify?""+(a||"c")+Mx+i+t:a+r.key+"-"+Mx+(i?"-"+i:"")+"-"+t}},Ox=function(e){var t;return function(){return t||(t=e()),t}},Fx=function(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch(r){return""}},Dx=function(e,t,r){try{var n=r;if(Array.isArray(r)&&(n=Hw(r)),e.attributeStyleMap)e.attributeStyleMap.set(t,n);else{var i=n?n.indexOf("!important"):-1,a=i>-1?n.substr(0,i-1):n;e.style.setProperty(t,a,i>-1?"important":"")}}catch(s){return!1}return!0},Nx=function(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(r){}},Bx=function(e,t){return e.selectorText=t,e.selectorText===t},Ux=Ox(function(){return document.querySelector("head")});function jx(e){var t=Cx.registry;if(t.length>0){var r=function(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(n.attached&&n.options.index>t.index&&n.options.insertionPoint===t.insertionPoint)return n}return null}(t,e);if(r&&r.renderer)return{parent:r.renderer.element.parentNode,node:r.renderer.element};if(r=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e[r];if(n.attached&&n.options.insertionPoint===t.insertionPoint)return n}return null}(t,e),r&&r.renderer)return{parent:r.renderer.element.parentNode,node:r.renderer.element.nextSibling}}var n=e.insertionPoint;if(n&&"string"==typeof n){var i=function(e){for(var t=Ux(),r=0;r<t.childNodes.length;r++){var n=t.childNodes[r];if(8===n.nodeType&&n.nodeValue.trim()===e)return n}return null}(n);if(i)return{parent:i.parentNode,node:i.nextSibling}}return!1}var Gx=Ox(function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null}),zx=function(e,t,r){try{"insertRule"in e?e.insertRule(t,r):"appendRule"in e&&e.appendRule(t)}catch(n){return!1}return e.cssRules[r]},Hx=function(e,t){var r=e.cssRules.length;return void 0===t||t>r?r:t},Vx=function(){function e(e){this.getPropertyValue=Fx,this.setProperty=Dx,this.removeProperty=Nx,this.setSelector=Bx,this.hasInsertedRules=!1,this.cssRules=[],e&&Cx.add(e),this.sheet=e;var t,r=this.sheet?this.sheet.options:{},n=r.media,i=r.meta,a=r.element;this.element=a||((t=document.createElement("style")).textContent="\n",t),this.element.setAttribute("data-jss",""),n&&this.element.setAttribute("media",n),i&&this.element.setAttribute("data-meta",i);var s=Gx();s&&this.element.setAttribute("nonce",s)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var r=t.insertionPoint,n=jx(t);if(!1!==n&&n.parent)n.parent.insertBefore(e,n.node);else if(r&&"number"==typeof r.nodeType){var i=r,a=i.parentNode;a&&a.insertBefore(e,i.nextSibling)}else Ux().appendChild(e)}(this.element,this.sheet.options);var e=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){if(this.sheet){var e=this.element.parentNode;e&&e.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},t.deploy=function(){var e=this.sheet;e&&(e.options.link?this.insertRules(e.rules):this.element.textContent="\n"+e.toString()+"\n")},t.insertRules=function(e,t){for(var r=0;r<e.index.length;r++)this.insertRule(e.index[r],r,t)},t.insertRule=function(e,t,r){if(void 0===r&&(r=this.element.sheet),e.rules){var n=e,i=r;if("conditional"===e.type||"keyframes"===e.type){var a=Hx(r,t);if(!1===(i=zx(r,n.toString({children:!1}),a)))return!1;this.refCssRule(e,a,i)}return this.insertRules(n.rules,i),i}var s=e.toString();if(!s)return!1;var o=Hx(r,t),l=zx(r,s,o);return!1!==l&&(this.hasInsertedRules=!0,this.refCssRule(e,o,l),l)},t.refCssRule=function(e,t,r){e.renderable=r,e.options.parent instanceof Ax&&this.cssRules.splice(t,0,r)},t.deleteRule=function(e){var t=this.element.sheet,r=this.indexOf(e);return-1!==r&&(t.deleteRule(r),this.cssRules.splice(r,1),!0)},t.indexOf=function(e){return this.cssRules.indexOf(e)},t.replaceRule=function(e,t){var r=this.indexOf(e);return-1!==r&&(this.element.sheet.deleteRule(r),this.cssRules.splice(r,1),this.insertRule(t,r))},t.getRules=function(){return this.element.sheet.cssRules},e}(),$x=0,Xx=function(){function e(e){this.id=$x++,this.version="10.10.0",this.plugins=new Sx,this.options={id:{minify:!1},createGenerateId:Lx,Renderer:Mw?Vx:null,plugins:[]},this.generateId=Lx({minify:!1});for(var t=0;t<xx.length;t++)this.plugins.use(xx[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=Pw({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var r=t.index;"number"!=typeof r&&(r=0===Cx.index?0:Cx.index+1);var n=new Ax(e,Pw({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:r}));return this.plugins.onProcessSheet(n),n},t.removeStyleSheet=function(e){return e.detach(),Cx.remove(e),this},t.createRule=function(e,t,r){if(void 0===t&&(t={}),void 0===r&&(r={}),"object"==typeof e)return this.createRule(void 0,e,t);var n=Pw({},r,{name:e,jss:this,Renderer:this.options.Renderer});n.generateId||(n.generateId=this.generateId),n.classes||(n.classes={}),n.keyframes||(n.keyframes={});var i=Gw(e,t,n);return i&&this.plugins.onProcessRule(i),i},t.use=function(){for(var e=this,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.forEach(function(t){e.plugins.use(t)}),this},e}(),qx=function(e){return new Xx(e)},Wx="object"==typeof CSS&&null!=CSS&&"number"in CSS;
/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */
qx();var Yx,Kx=Date.now(),Zx="fnValues"+Kx,Qx="fnStyle"+ ++Kx;Yx="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof module?module:Function("return this")();var Jx,eI,tI=("function"==typeof(eI=Yx.Symbol)?eI.observable?Jx=eI.observable:(Jx=eI("observable"),eI.observable=Jx):Jx="@@observable",Jx),rI=function(e){return e&&e[tI]&&e===e[tI]()},nI=/;\n/,iI=function(e){"string"==typeof e.style&&(e.style=function(e){for(var t={},r=e.split(nI),n=0;n<r.length;n++){var i=(r[n]||"").trim();if(i){var a=i.indexOf(":");if(-1!==a){var s=i.substr(0,a).trim(),o=i.substr(a+1).trim();t[s]=o}}}return t}(e.style))};var aI="@global",sI="@global ",oI=function(){function e(e,t,r){for(var n in this.type="global",this.at=aI,this.isProcessed=!1,this.key=e,this.options=r,this.rules=new Ex(Pw({},r,{parent:this})),t)this.rules.add(n,t[n]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.addRule=function(e,t,r){var n=this.rules.add(e,t,r);return n&&this.options.jss.plugins.onProcessRule(n),n},t.replaceRule=function(e,t,r){var n=this.rules.replace(e,t,r);return n&&this.options.jss.plugins.onProcessRule(n),n},t.indexOf=function(e){return this.rules.indexOf(e)},t.toString=function(e){return this.rules.toString(e)},e}(),lI=function(){function e(e,t,r){this.type="global",this.at=aI,this.isProcessed=!1,this.key=e,this.options=r;var n=e.substr(8);this.rule=r.jss.createRule(n,t,Pw({},r,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),uI=/\s*,\s*/g;function cI(e,t){for(var r=e.split(uI),n="",i=0;i<r.length;i++)n+=t+" "+r[i].trim(),r[i+1]&&(n+=", ");return n}function dI(){return{onCreateRule:function(e,t,r){if(!e)return null;if(e===aI)return new oI(e,t,r);if("@"===e[0]&&e.substr(0,8)===sI)return new lI(e,t,r);var n=r.parent;return n&&("global"===n.type||n.options.parent&&"global"===n.options.parent.type)&&(r.scoped=!1),r.selector||!1!==r.scoped||(r.selector=e),null},onProcessRule:function(e,t){"style"===e.type&&t&&(function(e,t){var r=e.options,n=e.style,i=n?n[aI]:null;if(i){for(var a in i)t.addRule(a,i[a],Pw({},r,{selector:cI(a,e.selector)}));delete n[aI]}}(e,t),function(e,t){var r=e.options,n=e.style;for(var i in n)if("@"===i[0]&&i.substr(0,7)===aI){var a=cI(i.substr(7),e.selector);t.addRule(a,n[i],Pw({},r,{selector:a})),delete n[i]}}(e,t))}}}var hI=function(e){return e&&"object"==typeof e&&!Array.isArray(e)},fI="extendCurrValue"+Date.now();function pI(e,t,r,n){return void 0===n&&(n={}),function(e,t,r,n){if("string"!=typeof e.extend)if(Array.isArray(e.extend))for(var i=0;i<e.extend.length;i++){var a=e.extend[i];pI("string"==typeof a?Pw({},e,{extend:a}):e.extend[i],t,r,n)}else for(var s in e.extend)"extend"!==s?hI(e.extend[s])?(s in n||(n[s]={}),pI(e.extend[s],t,r,n[s])):n[s]=e.extend[s]:pI(e.extend.extend,t,r,n);else{if(!r)return;var o=r.getRule(e.extend);if(!o)return;if(o===t)return;var l=o.options.parent;l&&pI(l.rules.raw[e.extend],t,r,n)}}(e,t,r,n),function(e,t,r,n){for(var i in e)"extend"!==i&&(hI(n[i])&&hI(e[i])?pI(e[i],t,r,n[i]):hI(e[i])?n[i]=pI(e[i],t,r):n[i]=e[i])}(e,t,r,n),n}var mI=/\s*,\s*/g,yI=/&/g,gI=/\$([\w-]+)/g;function _I(){function e(e,t){return function(r,n){var i=e.getRule(n)||t&&t.getRule(n);return i?i.selector:n}}function t(e,t){for(var r=t.split(mI),n=e.split(mI),i="",a=0;a<r.length;a++)for(var s=r[a],o=0;o<n.length;o++){var l=n[o];i&&(i+=", "),i+=-1!==l.indexOf("&")?l.replace(yI,s):s+" "+l}return i}function r(e,t,r){if(r)return Pw({},r,{index:r.index+1});var n=e.options.nestingLevel;n=void 0===n?1:n+1;var i=Pw({},e.options,{nestingLevel:n,index:t.indexOf(e)+1});return delete i.name,i}return{onProcessStyle:function(n,i,a){if("style"!==i.type)return n;var s,o,l=i,u=l.options.parent;for(var c in n){var d=-1!==c.indexOf("&"),h="@"===c[0];if(d||h){if(s=r(l,u,s),d){var f=t(c,l.selector);o||(o=e(u,a)),f=f.replace(gI,o);var p=l.key+"-"+c;"replaceRule"in u?u.replaceRule(p,n[c],Pw({},s,{selector:f})):u.addRule(p,n[c],Pw({},s,{selector:f}))}else h&&u.addRule(c,{},s).addRule(l.key,n[c],{selector:l.selector});delete n[c]}}return n}}}function vI(e,t){if(!t)return!0;if(Array.isArray(t)){for(var r=0;r<t.length;r++){if(!vI(e,t[r]))return!1}return!0}if(t.indexOf(" ")>-1)return vI(e,t.split(" "));var n=e.options.parent;if("$"===t[0]){var i=n.getRule(t.substr(1));return!!i&&(i!==e&&(n.classes[e.key]+=" "+n.classes[i.key],!0))}return n.classes[e.key]+=" "+t,!0}function bI(){return{onProcessStyle:function(e,t){return"composes"in e?(vI(t,e.composes),delete e.composes,e):e}}}var wI=/[A-Z]/g,xI=/^ms-/,II={};function TI(e){return"-"+e.toLowerCase()}function EI(e){if(II.hasOwnProperty(e))return II[e];var t=e.replace(wI,TI);return II[e]=xI.test(t)?"-"+t:t}function AI(e){var t={};for(var r in e){t[0===r.indexOf("--")?r:EI(r)]=e[r]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(AI):t.fallbacks=AI(e.fallbacks)),t}var SI=Wx&&CSS?CSS.px:"px",kI=Wx&&CSS?CSS.ms:"ms",CI=Wx&&CSS?CSS.percent:"%";function PI(e){var t=/(-[a-z])/g,r=function(e){return e[1].toUpperCase()},n={};for(var i in e)n[i]=e[i],n[i.replace(t,r)]=e[i];return n}var RI=PI({"animation-delay":kI,"animation-duration":kI,"background-position":SI,"background-position-x":SI,"background-position-y":SI,"background-size":SI,border:SI,"border-bottom":SI,"border-bottom-left-radius":SI,"border-bottom-right-radius":SI,"border-bottom-width":SI,"border-left":SI,"border-left-width":SI,"border-radius":SI,"border-right":SI,"border-right-width":SI,"border-top":SI,"border-top-left-radius":SI,"border-top-right-radius":SI,"border-top-width":SI,"border-width":SI,"border-block":SI,"border-block-end":SI,"border-block-end-width":SI,"border-block-start":SI,"border-block-start-width":SI,"border-block-width":SI,"border-inline":SI,"border-inline-end":SI,"border-inline-end-width":SI,"border-inline-start":SI,"border-inline-start-width":SI,"border-inline-width":SI,"border-start-start-radius":SI,"border-start-end-radius":SI,"border-end-start-radius":SI,"border-end-end-radius":SI,margin:SI,"margin-bottom":SI,"margin-left":SI,"margin-right":SI,"margin-top":SI,"margin-block":SI,"margin-block-end":SI,"margin-block-start":SI,"margin-inline":SI,"margin-inline-end":SI,"margin-inline-start":SI,padding:SI,"padding-bottom":SI,"padding-left":SI,"padding-right":SI,"padding-top":SI,"padding-block":SI,"padding-block-end":SI,"padding-block-start":SI,"padding-inline":SI,"padding-inline-end":SI,"padding-inline-start":SI,"mask-position-x":SI,"mask-position-y":SI,"mask-size":SI,height:SI,width:SI,"min-height":SI,"max-height":SI,"min-width":SI,"max-width":SI,bottom:SI,left:SI,top:SI,right:SI,inset:SI,"inset-block":SI,"inset-block-end":SI,"inset-block-start":SI,"inset-inline":SI,"inset-inline-end":SI,"inset-inline-start":SI,"box-shadow":SI,"text-shadow":SI,"column-gap":SI,"column-rule":SI,"column-rule-width":SI,"column-width":SI,"font-size":SI,"font-size-delta":SI,"letter-spacing":SI,"text-decoration-thickness":SI,"text-indent":SI,"text-stroke":SI,"text-stroke-width":SI,"word-spacing":SI,motion:SI,"motion-offset":SI,outline:SI,"outline-offset":SI,"outline-width":SI,perspective:SI,"perspective-origin-x":CI,"perspective-origin-y":CI,"transform-origin":CI,"transform-origin-x":CI,"transform-origin-y":CI,"transform-origin-z":CI,"transition-delay":kI,"transition-duration":kI,"vertical-align":SI,"flex-basis":SI,"shape-margin":SI,size:SI,gap:SI,grid:SI,"grid-gap":SI,"row-gap":SI,"grid-row-gap":SI,"grid-column-gap":SI,"grid-template-rows":SI,"grid-template-columns":SI,"grid-auto-rows":SI,"grid-auto-columns":SI,"box-shadow-x":SI,"box-shadow-y":SI,"box-shadow-blur":SI,"box-shadow-spread":SI,"font-line-height":SI,"text-shadow-x":SI,"text-shadow-y":SI,"text-shadow-blur":SI});function MI(e,t,r){if(null==t)return t;if(Array.isArray(t))for(var n=0;n<t.length;n++)t[n]=MI(e,t[n],r);else if("object"==typeof t)if("fallbacks"===e)for(var i in t)t[i]=MI(i,t[i],r);else for(var a in t)t[a]=MI(e+"-"+a,t[a],r);else if("number"==typeof t&&!1===isNaN(t)){var s=r[e]||RI[e];return!s||0===t&&s===SI?t.toString():"function"==typeof s?s(t).toString():""+t+s}return t}function LI(e){void 0===e&&(e={});var t=PI(e);return{onProcessStyle:function(e,r){if("style"!==r.type)return e;for(var n in e)e[n]=MI(n,e[n],t);return e},onChangeValue:function(e,r){return MI(r,e,t)}}}var OI={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},FI={position:!0,size:!0},DI={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},NI={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function BI(e,t,r,n){return null==r[t]?e:0===e.length?[]:Array.isArray(e[0])?BI(e[0],t,r,n):"object"==typeof e[0]?function(e,t,r){return e.map(function(e){return UI(e,t,r,!1,!0)})}(e,t,n):[e]}function UI(e,t,r,n,i){if(!DI[t]&&!NI[t])return[];var a=[];if(NI[t]&&(e=function(e,t,r,n){for(var i in r){var a=r[i];if(void 0!==e[i]&&(n||!t.prop(a))){var s,o=jI((s={},s[a]=e[i],s),t)[a];n?t.style.fallbacks[a]=o:t.style[a]=o}delete e[i]}return e}(e,r,NI[t],n)),Object.keys(e).length)for(var s in DI[t])e[s]?Array.isArray(e[s])?a.push(null===FI[s]?e[s]:e[s].join(" ")):a.push(e[s]):null!=DI[t][s]&&a.push(DI[t][s]);return!a.length||i?a:[a]}function jI(e,t,r){for(var n in e){var i=e[n];if(Array.isArray(i)){if(!Array.isArray(i[0])){if("fallbacks"===n){for(var a=0;a<e.fallbacks.length;a++)e.fallbacks[a]=jI(e.fallbacks[a],t,!0);continue}e[n]=BI(i,n,OI,t),e[n].length||delete e[n]}}else if("object"==typeof i){if("fallbacks"===n){e.fallbacks=jI(e.fallbacks,t,!0);continue}e[n]=UI(i,n,t,r),e[n].length||delete e[n]}else""===e[n]&&delete e[n]}return e}function GI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function zI(e){return function(e){if(Array.isArray(e))return GI(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return GI(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?GI(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var HI="",VI="",$I="",XI="",qI=Mw&&"ontouchstart"in document.documentElement;if(Mw){var WI={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},YI=document.createElement("p").style;for(var KI in WI)if(KI+"Transform"in YI){HI=KI,VI=WI[KI];break}"Webkit"===HI&&"msHyphens"in YI&&(HI="ms",VI=WI.ms,XI="edge"),"Webkit"===HI&&"-apple-trailing-word"in YI&&($I="apple")}var ZI=HI,QI=VI,JI=$I,eT=XI,tT=qI;var rT={noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===ZI?"-webkit-"+e:QI+e)}},nT={noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===ZI?QI+"print-"+e:e)}},iT=/[-\s]+(.)?/g;function aT(e,t){return t?t.toUpperCase():""}function sT(e){return e.replace(iT,aT)}function oT(e){return sT("-"+e)}var lT,uT={noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===ZI){var r="mask-image";if(sT(r)in t)return e;if(ZI+oT(r)in t)return QI+e}return e}},cT={noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==JI||tT?e:QI+e)}},dT={noPrefill:["transform"],supportedProperty:function(e,t,r){return"transform"===e&&(r.transform?e:QI+e)}},hT={noPrefill:["transition"],supportedProperty:function(e,t,r){return"transition"===e&&(r.transition?e:QI+e)}},fT={noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===ZI||"ms"===ZI&&"edge"!==eT?QI+e:e)}},pT={noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===ZI||"ms"===ZI||"apple"===JI?QI+e:e)}},mT={supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===ZI?"WebkitColumn"+oT(e)in t&&QI+"column-"+e:"Moz"===ZI&&("page"+oT(e)in t&&"page-"+e))}},yT={supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===ZI)return e;var r=e.replace("-inline","");return ZI+oT(r)in t&&QI+r}},gT={supportedProperty:function(e,t){return sT(e)in t&&e}},_T={supportedProperty:function(e,t){var r=oT(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:ZI+r in t?QI+e:"Webkit"!==ZI&&"Webkit"+r in t&&"-webkit-"+e}},vT={supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===ZI?""+QI+e:e)}},bT={supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===ZI?QI+"scroll-chaining":e)}},wT={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},xT={supportedProperty:function(e,t){var r=wT[e];return!!r&&(ZI+oT(r)in t&&QI+r)}},IT={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},TT=Object.keys(IT),ET=function(e){return QI+e},AT={supportedProperty:function(e,t,r){var n=r.multiple;if(TT.indexOf(e)>-1){var i=IT[e];if(!Array.isArray(i))return ZI+oT(i)in t&&QI+i;if(!n)return!1;for(var a=0;a<i.length;a++)if(!(ZI+oT(i[0])in t))return!1;return i.map(ET)}return!1}},ST=[rT,nT,uT,cT,dT,hT,fT,pT,mT,yT,gT,_T,vT,bT,xT,AT],kT=ST.filter(function(e){return e.supportedProperty}).map(function(e){return e.supportedProperty}),CT=ST.filter(function(e){return e.noPrefill}).reduce(function(e,t){return e.push.apply(e,zI(t.noPrefill)),e},[]),PT={};if(Mw){lT=document.createElement("p");var RT=window.getComputedStyle(document.documentElement,"");for(var MT in RT)isNaN(MT)||(PT[RT[MT]]=RT[MT]);CT.forEach(function(e){return delete PT[e]})}function LT(e,t){if(void 0===t&&(t={}),!lT)return e;if(null!=PT[e])return PT[e];"transition"!==e&&"transform"!==e||(t[e]=e in lT.style);for(var r=0;r<kT.length&&(PT[e]=kT[r](e,lT.style,t),!PT[e]);r++);try{lT.style[e]=""}catch(n){return!1}return PT[e]}var OT,FT={},DT={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},NT=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function BT(e,t,r){if("var"===t)return"var";if("all"===t)return"all";if("all"===r)return", all";var n=t?LT(t):", "+LT(r);return n||(t||r)}function UT(e,t){var r=t;if(!OT||"content"===e)return t;if("string"!=typeof r||!isNaN(parseInt(r,10)))return r;var n=e+r;if(null!=FT[n])return FT[n];try{OT.style[e]=r}catch(i){return FT[n]=!1,!1}if(DT[e])r=r.replace(NT,BT);else if(""===OT.style[e]&&("-ms-flex"===(r=QI+r)&&(OT.style[e]="-ms-flexbox"),OT.style[e]=r,""===OT.style[e]))return FT[n]=!1,!1;return OT.style[e]="",FT[n]=r,FT[n]}function jT(){function e(t){for(var r in t){var n=t[r];if("fallbacks"===r&&Array.isArray(n))t[r]=n.map(e);else{var i=!1,a=LT(r);a&&a!==r&&(i=!0);var s=!1,o=UT(a,Hw(n));o&&o!==n&&(s=!0),(i||s)&&(i&&delete t[r],t[a||r]=o||n)}}return t}return{onProcessRule:function(e){if("keyframes"===e.type){var t=e;t.at=function(e){return"-"===e[1]||"ms"===ZI?e:"@"+QI+"keyframes"+e.substr(10)}(t.at)}},onProcessStyle:function(t,r){return"style"!==r.type?t:e(t)},onChangeValue:function(e,t){return UT(t,Hw(e))||e}}}Mw&&(OT=document.createElement("p"));var GT=Object.defineProperty,zT=(e,t,r)=>(((e,t,r)=>{t in e?GT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);class HT{}class VT extends HT{constructor(e){super(),zT(this,"observer"),zT(this,"flowSpeed",2),zT(this,"currerntRenderScale",.75),this.canvas=e,this.observer=new ResizeObserver(()=>{const t=Math.max(1,e.clientWidth*window.devicePixelRatio*this.currerntRenderScale),r=Math.max(1,e.clientHeight*window.devicePixelRatio*this.currerntRenderScale);this.onResize(t,r)}),this.observer.observe(e)}setRenderScale(e){this.currerntRenderScale=e,this.onResize(this.canvas.clientWidth*window.devicePixelRatio*this.currerntRenderScale,this.canvas.clientHeight*window.devicePixelRatio*this.currerntRenderScale)}onResize(e,t){this.canvas.width=e,this.canvas.height=t}setFlowSpeed(e){this.flowSpeed=e}dispose(){this.observer.disconnect(),this.canvas.remove()}}function $T(e,t=!1){return t?function(e){return new Promise((t,r)=>{const n=document.createElement("video");let i=!1,a=!1,s=!1;function o(){i&&a&&!s&&t(n)}n.addEventListener("playing",()=>{i=!0,o()},!0),n.addEventListener("timeupdate",()=>{a=!0,o()},!0),n.addEventListener("error",e=>{s=!0,r(e)},!0),n.src=e,n.playsInline=!0,n.crossOrigin="anonymous",n.autoplay=!0,n.loop=!0,n.muted=!0,n.play()})}(e):function(e){return new Promise((t,r)=>{const n=document.createElement("img");n.onload=()=>t(n),n.onerror=r,n.src=e,n.crossOrigin="anonymous",n.decode().then(()=>t(n)).catch(r)})}(e)}function XT(e){return new Promise((t,r)=>{(e instanceof HTMLImageElement?e.complete:e.readyState>=3)?t(e):(e.onload=()=>t(e),e.onerror=r)})}const qT="#version 300 es\nprecision highp float;\n\nin vec2 v_coord;\nout vec2 f_v_coord;\n\nvoid main() {\n    gl_Position = vec4(v_coord, 0.0f, 1.0f);\n    f_v_coord = (vec2(v_coord.x, v_coord.y) + vec2(1.0f, 1.0f)) / 2.0f;\n}\n",WT=(()=>{const e=document.createElement("img");return e.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAYUklEQVR4nH3bV89VVRcF4IX7qNgVe8WKvaIiNsCuYCKCSEg0JCYm/gTjzf4R3njhlRdeWKKi2AvYEBV7b1ixY2+ofPuZcbwxXzie5OQ9Z5+11pxzjDHnKnu/k0477bSN+++/fzvyyCPbdttt17766qu2YcOG9ttvv7U33nijffHFF23atGntgAMOaN98803bc88926RJk9pnn31W10855ZT2888/1/vrr79ur732Wjv00EPbgQce2NavX99eeOGF+nvmmWfWuD4fc8wx1ffDDz9sTz31VPv000/bRx99VL/vsssu7eCDDy57hxxySPv222/L1saNG9vatWsbX19++eXyhb9//PFH23HHHdsHH3zQLrrooorjxRdfrPbG+/jjj9u6devaX3/91aZMmdImT57cdt1114lYu5133rnfeuut28yZM9t+++3XVq9e3T7//PMa9Ljjjqu/m222WTn73HPPtR122KF99913bcsttyyQnnzyybbbbrvVm4MMAe37778vUATIkaOPPrqCe+KJJ9qPP/7Ydt9993bvvfe2lStXtvfee69ttdVW7bzzzmvbbLNN++STT9rUqVPL7jvvvNP+/PPP8o1NNn7//fcakx3XL7300moPyC222KL8ev/99ws8Y2s3xFmAIpD9H374of36669txBEIvf3224UmR1w74YQTyhlgHHTQQeU845Bfs2ZN23fffcsQRn/55Zf6jQJOP/30GvjLL78sMPbee+8y6rM2gvPea6+9yg7Htt1223bSSSe1nXbaqWwC+K677iq2qMU1yqKK0WhUAWGREruuq3GBw8dVq1ZV4Pvss08744wzSgns/fTTT+UzoigIAL53gyM95P7+++9Cj1OQz+ACwb7PHAGA3133phKyY/TVV1+t3zHEAUa8t99++1IDJwAsKFIWkFQQOFaeffbZ9u6775aTgBXskKIVhDEBSxFJCaznOoCpNdJHGlvGNRa5s8N3PiLg5JNPbt1goNfIYKeeemo74ogjKmC5yxlIY/D5559v999/f8nxrLPOqsCBwknIkxcmpISXYFesWFGqIlNKck3bGTNmFNDyltPaUBXnsMWGfKZCeQto/QQqmOnTpxegvvNVH4G7Jg4AG4P8qVM6jCN5JDc5QYZyHHrynFGdDMBhaHJG8ZAy55xzThkFisABBxBsH3/88TUmprAM7VdeeaWcNz5wjSPoPfbYowDj+FFHHVWOC9bYWEuQ0ss1zALGi+qQRxUI8XrrrbdKfbFD5r6rSXzip2uPP/541aNuyJOeDMlCAVQLBI71Cy64oAAAzOabb16VnNzlELlTiNyEsOAES1bkDQhjcJIj2kghQLsmZ+W6AkyalCZAvwFn2bJl7b777qtAyFw9ELxgfNcWKcbBqOColB1KiF9qkBkJqeoNtehDAWaLETR9eemll+oHjPhOGRgnT1Md+WAYIJwCkoJHRgDhoP7amj4ffPDB+s5hzgpSmvjMMTkbx+LcM8880+644452+OGHV7CUE9bZ1t44FEcV2Accn9nHLv+MxXf1g1rFQJXIRSb/kCE1R6QHdQN7M0iCAsMCtA0kGMxoyxm5xEHKoAYseClkwNROP0owLjUASl/gahdGqcCMoroDmrLMCldeeeVE0dVeX05TERIAQJFsSDcgWIMYiz/85X+m1E2R3M2ZM6cXBEd0hK6B5KIgOK7QBSDXgcSov74fdthhZVg/ucZRwS9YsKDQ1wYzjzzyyES9YVMbrJIydqhCbZFKcj8KJGm21AHsymFSdt2iCRnkT9IUgV2xWIPoR5XGpgZ92DbT8KUbZNm//vrr1SBTneJDlhoZiFHyEohiBl3AGExg2mGDauS/MQBhTH0ee+yxxgaABMVJMseuImqqxAwgww7myFX9IHd9vc0kFIMUdYcN7xRYvpnNjMM/KuDjOJK7AZ1eReS01SAnOABVU5c04Lwlpe+c4TwDqrh8Jk+GTE++Y8Msojo//PDD1Q+r3ooSJwWAoTfffLPGAp4x2LntttuKAIEZm0JIX4DsewlGqjz99NMVHL+lFLtS0svMIFDFfRzJtQ4gKQxkackRkuSk62RkYB1cA44+rmE/CxpIG0PqCNqLAyR47LHHViDA5YTfBUtZxqUgNUV7/b0BBRjBGt8UJyW0k0bSwFzPB7OP2qWf4IyHbb4r2ONI7pYsWdLLQ3OiHGMoy0eyUihUezkOQQ6Zrw0GhKGGVCECxqOPPlprhlTqs88+u9pKF0YFzQaHpYLvFAMAQUoNTiNAANpiV0A+Uwq70sOYfjOzWPggzMKL//zljz58RsxYkhnUgEOQJSN5Ls/km+uYIDeGDaIjpuQYBlRZuQpplVa/E088cWLBwhkbHwwyLBBFTmD6ZI2PBPUAk/wwZlSgPdvmd7b1E5QiyA+phH22zCSu8RfT/FPwbr311vpOjcZEdDdIsNcYCxAlT8yTZ/LQ8vb2228vyWhjYPllCwsAIMoxVRZQggGgGkFJ2Vp7+Y2MOekap6mLpIFnfA4DPktfIGBV0bTZ4TiQgammABKJls/AVSuMpwZF6tkDULvZJxukbqiYtRfQwV9v8jKogmNgUx7HOTd79uzKW0FxHnjaYe38888viWqLIRLHmmCyaTJL6OvNpiBVY2mjH1uYZYtcrR0ALgjfAcu+lMEq9RhLe3aQkN0t8FwXwziSuyF/eo6q4JDmoOCxh33fVX25JacNgmWdLT44JQCoynN5B+1sPxcvXlyyxLpClTneNGlsL2yQsgLlulmEsrItF4CpVKDWCZbofGNfYGqKfuwotIihLsGqYfqPI3kkL7EGkeQrRg3KachD27rdddMSKUFbHjGieMlL8hQ4FjkIDLmJRYB5W1Nw0vjpy0EpwUGKYYeMqQLggASyIPXRjh1pB3S1i3+K27x58woUNUiAAlVoEWU5jH2+U6jr3ZATtRLknCpuUM6p7pjGJtbM5xYmgspmSaFStEhO7skv3zGqHVCgDTCBegGNw1RnbP3UEgGwByxqmzVrVsk4J05STIp4UwdyAJI0C+iCByYbfn/ooYeqFgicooANGNcqXa+++uragPgiIOhDSnFRLbNNlhJenIGu1ZYA4oAATUm+2+dLCewBgoqMmXUDYOR11u3eQMhCRS3BkrZs8I0NgfEPWAsXLqz2N998c7Wx1gC2Sp/ToUytmPYyywAPiFJeOo0wBilBYZqxVGFndIKRs1dcccXEAoXjXgySNFQBxRFOCVBOG1d7f6lEW3lLZVj23e/A1g8zWbo+8MADNY5CJ2gBAg2gCqF+0iIAYZ4qpIbP6hZFKtqIHEdyNwzWMwgpiHOKZKElDwWvIalyQK0wXVGF/M4aPfmZCisNBIutrNE5gh3fjccuMDDCvn7sC4wqAhJCslMFNACMq11Oe+W/V7bBNmL8Aqr8t1FShPmgnxlJmnQXXnhhz4gcSp7Zl2Pe96zMoEZuQBKEYqiNgoYlAetLdiqwwwzOYADqnFDdBaC+cE5d0Q5oxpUqWaMDPafPpj3X9c8hajY63tJO/2zEqDq72exlxpE8gpaGOUzMMZTpwytFjrxUXCypykuXLq1BcgKcvtghS44BIOnkdypRbAHlpT/JCkiQFEU1AFUT7r777gqI2vThBwapiRqxb9WaU5/MYoopEthSdLGtaAPTd3/1Y6u79tprax2gOECeLBjK92xNMYZdeZ9lKOYMQs4ANI6AIaxOZI1uegSeQw4Oquycyxkdh9gyDqCBLmDAsJFZBqhUwoYX9XlJFe35qq3lspegFTq+UDgwsxGjWEW7GwbrHV+5KChSwQQEpQAnbWxchx5jChEJCl6KQFgf4JAtI5auHDS1cspnbQGgHykCCHMY45xFjzrCOcE6g6REBTX3FbDNT4Sw601dctxv2e9bFltYqR2ujyN5JDdzNE2S2QSZcqBKvnII8j4DRcFhxEBmDymUU1vOY0JqAMR4ZhOOAQd7jBvLNcH7y1Y2MVIlS2XAIMNUxgZFUY125nLjKcp8ZJPv4sk5o1SSQs4ejJ9inrVAd/311/cGzJpaI85p5DMEIQ5Fn10j36zROakYYiF7eywyBBifscUYgBVTdSTLZYrIPiNyN7ZrCpl0sZfPBkv+21c45BC46zkNzkZMHH6XSj4bs3Z+/xyGiCG3zrphfV/nAQAQiMbylSKwaT619tbYfptsBJebE+ZrTMs1ewVBCVS6kDmnk9PGxKbr+hsTELlfl1NeTuuTtFMjqM34QDYmBr3ZokopR6VSjRLY0o//fBtH8uiGG24oZ8iF9HL7iCNBjGOcxV5Y/fca3SvTE4cpRD9jcFIOB7D04RgGpSBHc1qswKoRWXV6y38BYNHYQM69AX/1A5AUERx/2bn88strPKQ5mDEd80f6+l7bYQrADiMKnIsAoAroKh6mDLKUBjn3sw7gHOTVBODZWGXTop9xAcIhwQc8vyuO0sLvOfDwco0vWc8rjAAynnWICu83Y2W3illFGBiKJzD18XL32Wm0VAOEv2qEN1/rxghZuJCTFkhhGFoGzqnr/Pnzyxhpau86o+QKJEUOINQAsP9fo+tHrhijDr9zFKDSzwkQ4E2XChegOGlDgzVqyQ4vJ0EpmhQCHD7lZquZwW/GzDoEycD0uz4jVRKKZMdoKn3u5uTEJTcTrawAhX31IsfjWf/nuDlrdEDmODvTKIcAw4aVoJpiTuawqs4xuSylgMrxnOYMK9eJjRjQc8Mm/RHod/akBHL/i+Ru2Hn1VleZBhVAMjWtBADI55Qma3QA+Jt7evrliQ5oY4KEs/bOjRBzu+9UQ10kmoMSDnPe3A5MPnHYQStngZInVPIgBlUJhl1SR0Zs6ssXYPBTe2seqYkAr7ozZO3vom0oaXg4gRyzzfUSJIAMqNpqb4WV0yPsyE3zNEZUavnmL+epIUWLcgSubdboORkWmDW6Aqno5skQ/QAmHcwkublBCdIz878VX8772Oavv+NI7hYvXlxL4UiejMg8W0roAwUgAuQ8BxW87PoUrtziUoC0E6DAqIDkyFlwxvEbR6hLynn7LCALFjc2OMsnylMf+BQgzfuAZw8wuYXHX0HZZEkrlV4683Mcyd2iRYt6clC4FBHoWmzoTI4G4Az55D4+qasbpiTOUwTDuRvsb912+geMnPMLBOucN06mL4FhSb8ct2Gezdx4UQey7udfPd8zBJSjemMopmIIcEgxvrQdR3I3LGV7jio8mNLYOjrPBmALCKY/xn02MGUATS6THrkLTDtMAJBDJHjxxReXY1JF4BzGWJ4nYje3v/KkWZ4nstTO80B5CgRYira+OeaiQmDwzR7g3zdLEDaO5G5o3EMPS+ZJYPhMsqYykleUAMRBg2bOZthnrAsgFd8JLtXk6FklBxDQ5J4XoADB8eznpRV2qAdzxjVG6op3ahP2KYqd3PUxowkeYBSXs0mAjSN5xBAWb7zxxjLGkSw2ICdoAwRNbfVRpLwsMxkTPDDM90DDEEakhqCgLS+zrqeMFEbtVfJsUozPQbbcUcoZHhUgRtD8lM9ZXAEnj9T5zU1T/XLPUh9+skEJ/lYKXHPNNT2G5DGE/Gh+9aPvgMiDkQJRyDAlAIUL2lkJqtAMmcKgj0EPVOU5AgrLM35YsOABinQwllnF99w4ZRsp2XUKiK85cSZj/uRABohSQAxmAYTI+dxlsuaIyqVjgcSgvDQ4ySs8AsCEoAVo2lCZc9KjUHGOMWgz7lpuPlCMfg4e8xwAp4GDEcDmWFpu5jE3QAFDX3mqreMzvpjj9VEQL7vsstr53XnnnWWLCsVAMXzOnaqMxSf1SKrYSbKV5yK7AfV6TtAFAwJBwxwa5JydQ3nACCCKjODNu9oxQGp5YAHTxqEMbFiNaSdvpVZOinK/MU+DaeMzNrObNIbcFxzQkQaUPBfgL7+0U7Qpg39ZJ1AiUl3jCz+ziRvZb2d/rlHO7FRolZjspYRCSOoc0Q47rhtMfwrJI2kCURO0My4wMWH+xroUykFMpskoUMBuishtdQbouYfAJ8DdcsstBZJVJWCXL18+cZcoOz6qAwxy84QJpVojAMHCiDprJSjHLVMFKaDMs97WAtCFvE65YSF/9DOwwDjo0VTX5KTcV/gEgFVMMwgIwclT29UcvWed4LsZxWcF03pDIMDN84s5TkeI3wBllagtfxVxPtUzQEO+I1nO5wQpMQK6mzdvXp+5Ow8y5149qZrDIYhJQZGRtCA1gAmcY4pU7gxj1zv3HK26pAUbilie+7UHUBu8OQkk13OzBtu5xj6fsvESGPazzcaqFME+GwCiLvUmzy9tiuTuuuuu6w2oA4SkgPzIzQjVGiMGJ/l6vHQIkmwpIweUKmyOmrVJXckhZo7eVXi7zjwtlgch8xhtNl25pQ0ctgST2YlvnhCnAMEiUF9nFMbzpjSEZT8wjuRR7qZgirxyn93xU6RosDwdSrp5ykt7D074m2cAc2ydgxCMSB1F0iGIAsYxdYHDgFeZ3ckxjsKYnMW85bJ8lkZAy8YMKFRG+uqR3/xVd4BPffoLHvNABqA+SAJwHacrctD3A3TlukEE4MVQcl2RoQ4D+GwG4IAgsvkQKHTViewFBJUDyjy3x8GcCGlPeaY2iy2su82dp07N3UDQVyqxYTzTbB6sRIqiCHDpA2ASpxBKG0dyN3Tq5bMOAspGJVNfcpBTDKsLWZZyhvOAg7QCBCjocs7vCpm/VJBnhXNYIT/ZNdvYnEgZv+sL4OR6nlDJvQBpBWDM5kA1S2+2pAbwcgSe+xzSjzrMVMaRNt3s2bN7zEHPwHkKFFvY5rQtah5jIX1poGhZe7vGMNTNAooVoABkupPvwMyCCCtSK3d+yJLTOQTFvKBUdmMqsMADCDIUWzZIXhEFIDuqPBUYFwDiAH5OrsaR3A1r7t5FKSCgPA0GIY5i1xm7vFSgFBXXspICXp4Oz3+T5JSI9AHolVtj2PabVGMTIOeee26Bmp0eRgWVZ4CkmCLqWh53oSCB8oF/UklhzD9JmGncW0xdGkfyiIMcgZbAGTVFGBzr2HRnB4oG4wTkOE5iOQrPwUSeCs+JEWeyp89T3LmLxLZ8tMzNWeQ999xTzDqAVViNTWEYNLYXBWiPMH7pZ3pGAH9J3YJNDCXzwW9+SgW2kSANpdCIgdwPsJXMg4xA0JGDuWWFdahh0wDQZ0ghtQK75JJLqmCZXgQ8d+7casNZL7MAeVNMNinsAcBWWQ0RKDCBSHUC4o9+QFcsAY/J1CfAAoLiFDltgLZo0aKJ5xDGkTwiDdVYB3lh5XbTTTfVd8Uot5wZx7DUyBPcHHA9KzWv/PsbKWKZpLWjnNwu91ueFQJc2ExNwbAp1zojs4Xr+iliAAFWnlg3IwheKihw+TdAfbU3/jiSR3ngwUuuQTP/CwiMnMG5bv42oLV3FigegMgxE6dJ7qqrrqrC5rYZOWbLK2iHJUkdQOV5QH0BnHylOiyzR1G5EyU9qAUJuREDOGOYJXKD1wwDGDb+i+RukEEdiZn75QZZ5O5PVkyMCdbLsbLKndVZ7towbEGT5XAeY8sDUoBWYG1GyDX/08dZgUgPdmx/c64IWODnBgsl8lNAZhc2yZmvlJgjNgusrCiBovgCmF3+eSO0bph6PiCPkHFaFZfXJMMQozoYRKDeeRpb4REABshTO1LMqs3ciyGywyA25Cz2oc9xdqkGK3nWn/qoxSJGTVCsjAFAYyDKZ9cxihBA+y4WwXsDNAuncSTXsbjADcxgUNIIE/n/HpKSS/nfwey5oZi53wpRAHm8juy1zRkDUMnfdOQ6hrPUBRAbArPuMJXmDrHjsTDLR+AkiDweizR+ZK2iiOb/AgLApkjuhkLSa6ho5PFWZ23ZZpIKGVmiGsxMQE6CMKjPchXTEPbcIeQxJxU4zkGAaKuyq8ScEjCHyV/hYkuK5MFGIFj4eEsnR27GUgeAwh+gRJXqgJpBTT67TqE5ItsUyd1wsZdvcjTPB+SQQlCqtL85SMgBB5k6EyApixpsA0/ArpGk6UigipbxpEdWZoDEgBsWFGBrK42057D+7CFCigFA1RdQFmimtdxwzQMQpmkAZjutb9J4UyTXjRFS1kGFzp1f10hZB/muBvgLWZ2156w0seBRADmHee2sAchdgcMKY8aVyzl2pxQqE6xUkM+CBAC2MJj/CEOCswn+ZLWKCAqSotm18tl4iimfkaCQjiN5xAD5cUQ+GQBC8kwApjvIQk9OcoBBjDvREQgQGDVD5CwhMmSIPLURZJ48kfO2o9Irx+P2F5ziKOY4zSbV5Ukw9gFOMcayiKrpbPBRH2Pl2UGAq0m+U6mZBxh5WBtp/wOJEZce9OdHHAAAAABJRU5ErkJggg==",e})();class YT{constructor(e,t,r,n="unknown"){zT(this,"gl"),zT(this,"program"),zT(this,"vertexShader"),zT(this,"fragmentShader"),zT(this,"coordPos"),zT(this,"notFoundUniforms",new Set),this.label=n,this.gl=e,this.vertexShader=this.createShader(e.VERTEX_SHADER,t),this.fragmentShader=this.createShader(e.FRAGMENT_SHADER,r),this.program=this.createProgram();const i=e.getAttribLocation(this.program,"v_coord");if(-1===i)throw new Error(`Failed to get attribute location v_coord for "${this.label}"`);this.coordPos=i}createShader(e,t){const r=this.gl,n=r.createShader(e);if(!n)throw new Error("Failed to create shader");if(r.shaderSource(n,t),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS))throw new Error(`Failed to compile shader for type ${e} "${this.label}": ${r.getShaderInfoLog(n)}`);return n}createProgram(){const e=this.gl,t=e.createProgram();if(!t)throw new Error("Failed to create program");if(e.attachShader(t,this.vertexShader),e.attachShader(t,this.fragmentShader),e.linkProgram(t),e.validateProgram(t),!e.getProgramParameter(t,e.LINK_STATUS)){const r=e.getProgramInfoLog(t);throw e.deleteProgram(t),new Error(`Failed to link program "${this.label}": ${r}`)}return t}use(){const e=this.gl;e.useProgram(this.program),e.vertexAttribPointer(this.coordPos,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.coordPos)}warnUniformNotFound(e){this.notFoundUniforms.has(e)||(this.notFoundUniforms.add(e),console.warn(`Failed to get uniform location for program "${this.label}": ${e}`))}setUniform1f(e,t){const r=this.gl,n=r.getUniformLocation(this.program,e);n?r.uniform1f(n,t):this.warnUniformNotFound(e)}setUniform2f(e,t,r){const n=this.gl,i=n.getUniformLocation(this.program,e);i?n.uniform2f(i,t,r):this.warnUniformNotFound(e)}setUniform1i(e,t){const r=this.gl,n=r.getUniformLocation(this.program,e);n?r.uniform1i(n,t):this.warnUniformNotFound(e)}dispose(){const e=this.gl;e.deleteShader(this.vertexShader),e.deleteShader(this.fragmentShader),e.deleteProgram(this.program)}}class KT{constructor(e,t,r){zT(this,"fb"),zT(this,"tex"),zT(this,"_size"),this.gl=e,this._size=[t,r];const n=e.createFramebuffer();if(!n)throw new Error("Can't create framebuffer");const i=e.createTexture();if(!i)throw new Error("Failed to create texture");this.fb=n,this.tex=i,e.bindFramebuffer(e.FRAMEBUFFER,n),e.bindTexture(e.TEXTURE_2D,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),this.resize(t,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.MIRRORED_REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.MIRRORED_REPEAT)}get size(){return this._size}resize(e,t){const r=this.gl;this.bind(),r.bindTexture(r.TEXTURE_2D,this.tex),r.getExtension("EXT_color_buffer_float")?r.texImage2D(r.TEXTURE_2D,0,r.RGBA32F,e,t,0,r.RGBA,r.FLOAT,null):r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e,t,0,r.RGBA,r.UNSIGNED_BYTE,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.MIRRORED_REPEAT),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.MIRRORED_REPEAT)}bind(){const e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.fb)}active(e=this.gl.TEXTURE0){this.gl.activeTexture(e),this.gl.bindTexture(this.gl.TEXTURE_2D,this.tex)}dispose(){this.gl.deleteFramebuffer(this.fb),this.gl.deleteTexture(this.tex)}}class ZT{constructor(e,t,r,n){zT(this,"gl"),zT(this,"buffer"),zT(this,"type"),zT(this,"data"),zT(this,"usage"),zT(this,"length"),this.gl=e,this.type=t,this.data=r,this.usage=n;const i=e.createBuffer();if(!i)throw new Error("Failed to create buffer");this.buffer=i,this.length=r.byteLength,e.bindBuffer(t,this.buffer),e.bufferData(t,r,n)}bind(){this.gl.bindBuffer(this.type,this.buffer)}dispose(){this.gl.deleteBuffer(this.buffer)}}class QT{constructor(e,t,r,n,i){zT(this,"albumTexture"),zT(this,"alpha",0),this.gl=e,this.mainProgram=t,this.vertexBuffer=r,this.indexBuffer=n;const a=e.createTexture();if(!a)throw new Error("Failed to create texture");this.albumTexture=a,e.bindTexture(e.TEXTURE_2D,a),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.MIRRORED_REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.MIRRORED_REPEAT)}draw(e){const t=this.gl;this.mainProgram.use(),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.albumTexture),this.mainProgram.setUniform1i(e,0),t.drawArrays(t.TRIANGLE_STRIP,0,4)}dispose(){this.gl.deleteTexture(this.albumTexture)}}class JT{constructor(e){zT(this,"tex"),zT(this,"alpha",0),this.gl=e;const t=e.createTexture();if(!t)throw new Error("Failed to create texture");this.tex=t,WT.decode().then(()=>{e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,WT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)})}active(e=this.gl.TEXTURE1){this.gl.activeTexture(e),this.gl.bindTexture(this.gl.TEXTURE_2D,this.tex)}dispose(){this.gl.deleteTexture(this.tex)}}const eE=class e extends VT{constructor(t){super(t),zT(this,"hasLyric",!0),zT(this,"hasLyricValue",1),zT(this,"maxFPS",30),zT(this,"lastTickTime",0),zT(this,"lastFrameTime",0),zT(this,"_lowFreqVolume",1),zT(this,"paused",!1),zT(this,"staticMode",!1),zT(this,"gl",this.setupGL()),zT(this,"reduceImageSizeCanvas",new OffscreenCanvas(128,128)),zT(this,"tickHandle",0),zT(this,"sprites",[]),zT(this,"ampTransition",0),zT(this,"playTime",0),zT(this,"frameTime",0),zT(this,"IllIlllIlIIlllI",[-.1,0]),zT(this,"mainProgram",new YT(this.gl,qT,"#version 300 es\nprecision highp float;uniform float IIIlllllllIIIllIl,lIIIlllllIllIl,IIIlllIlIIllll;uniform sampler2D IlllIIlIlllIll;uniform vec2 IIlIlIIlIlIllI,IllIlllIlIIlllI;out vec4 lIIlIIIIIlIlIlllIIIIlIIl;float lIlIIllllIllIll(float IIIlIIlIIIlllIII){IIIlIIlIIIlllIII-=0.;return sin(IIIlIIlIIIlllIII);}float lIlIlllllIllIll(float IIIlIIlIIIlllIII){IIIlIIlIIIlllIII+=acos(0.);return sin(IIIlIIlIIIlllIII);}mat2 lIIllIIlIIIllIl(float IIIlIIlIIIlllIII){return mat2(lIlIlllllIllIll(IIIlIIlIIIlllIII),-lIlIIllllIllIll(IIIlIIlIIIlllIII),lIlIIllllIllIll(IIIlIIlIIIlllIII),lIlIlllllIllIll(IIIlIIlIIIlllIII));}mat2 lIIllIIlIIIlllI(float IIIlIIlIIIlllIII){return mat2(lIlIIllllIllIll(IIIlIIlIIIlllIII),-lIlIlllllIllIll(IIIlIIlIIIlllIII),lIlIlllllIllIll(IIIlIIlIIIlllIII),lIlIIllllIllIll(IIIlIIlIIIlllIII));}float IllllIIlIllII(float llIIllIllIIIllI){return fract(lIlIIllllIllIll(llIIllIllIIIllI)*43758.5453);}float llIlIIllllIII(vec2 IIIlIIlIIIlllIII){vec2 IIllIlIIlllI=floor(IIIlIIlIIIlllIII),lIlIllIIIIIlIl=fract(IIIlIIlIIIlllIII);lIlIllIIIIIlIl=lIlIllIIIIIlIl*lIlIllIIIIIlIl*(3.-2.*lIlIllIIIIIlIl);float lIlIlIlIlIlIIl=IIllIlIIlllI.x+IIllIlIIlllI.y*57.;return mix(mix(IllllIIlIllII(lIlIlIlIlIlIIl),IllllIIlIllII(lIlIlIlIlIlIIl+1.),lIlIllIIIIIlIl.x),mix(IllllIIlIllII(lIlIlIlIlIlIIl+57.),IllllIIlIllII(lIlIlIlIlIlIIl+58.),lIlIllIIIIIlIl.x),lIlIllIIIIIlIl.y);}vec2 lllIIIIIIllIlIIIlI(vec2 IlllIIlIIIIlIIII,float lIIIIlllIIIIllIlIlI,vec2 IlIlIIIIlIlllIlIII){float lIIlIllIIIlIl=llIlIIllllIII(IlllIIlIIIIlIIII*vec2(1)*3.5+.1)*4.2831*mix(.2,1.,IIIlllllllIIIllIl);IlllIIlIIIIlIIII+=vec2(-1,.5);lIIlIllIIIlIl-=lIIIIlllIIIIllIlIlI;return vec2(lIlIlllllIllIll(lIIlIllIIIlIl),lIlIIllllIllIll(lIIlIllIIIlIl));}const mat3 lIIllIIIlllIl=mat3(1.,.02,.002,.02,1.,.008,.002,.02,1.),lIIIlllIIIIll=mat3(1.022,-.02,-.002,-.02,1.028,-.008,-.002,-.02,1.022);void main(){vec2 lIIIlIIllIlIIlI=lIlIIllllIllIll(lIIIlllllIllIl*.2)*.01+.5+gl_FragCoord.xy/IIlIlIIlIlIllI.xy,lIIllIIlIIIllI=lIIIlIIllIlIIlI*.77f+IllIlllIlIIlllI;lIIllIIlIIIllI.x*=IIlIlIIlIlIllI.x/IIlIlIIlIlIllI.y;float lIIlIIlIIlIIIlII=gl_FragCoord.x/max(IIlIlIIlIlIllI.x,IIlIlIIlIlIllI.y),lIIIlIllIllIlIIl=0.f;vec3 lIIIlIlIIIlIlIIl=vec3(0);vec2 lIlIIlIlIIIllIll=lIIllIIlIIIllI;for(int IllIlIIlIIlllllIIIl=0;IllIlIIlIIlllllIIIl<8;IllIlIIlIIlllllIIIl++){bool lIlIlIIllIllIIll=IllIlIIlIIlllllIIIl%2==0;vec2 lIlllIlllIlllII=lllIIIIIIllIlIIIlI(lIIllIIlIIIllI,lIIlIIlIIlIIIlII,lIIIlIIllIlIIlI),lIllIIlIIlIIIll=lIlllIlllIlllII;float lIIlIlIIlIIlIllI=float(IllIlIIlIIlllllIIIl)/8.f;vec3 llIIlIIIIlIIlIII=texture(IlllIIlIlllIll,-lIIIlllllIllIl*.01+.8*lIIllIIlIIIllI*lIIllIIlIIIllIl(-lIIIlllllIllIl*.2)+vec2(IIIlllIlIIllll*.3*(float(lIlIlIIllIllIIll)*2.-1.)*lIIllIIlIIIlllI(lIIIlllllIllIl*.2+1.5))).xyz;lIIIlIlIIIlIlIIl+=llIIlIIIIlIIlIII;lIIIlIllIllIlIIl+=4.f*lIIlIlIIlIIlIllI*(1.f-lIIlIlIIlIIlIllI);lIIllIIlIIIllI+=.01f*lIllIIlIIlIIIll*(lIlIIllllIllIll(lIIIlllllIllIl)*4.8+.8);lIlIIlIlIIIllIll+=.05f*lIllIIlIIlIIIll;}lIIIlIlIIIlIlIIl/=lIIIlIllIllIlIIl;lIIIlIlIIIlIlIIl*=1.6f;lIIIlIlIIIlIlIIl=1.f-exp(-lIIIlIlIIIlIlIIl);lIIIlIlIIIlIlIIl=pow(lIIIlIlIIIlIlIIl,vec3(2.2));lIIIlIlIIIlIlIIl*=.8f;lIIlIIIIIlIlIlllIIIIlIIl=vec4(lIIIlIlIIIlIlIIl,1);}","main")),zT(this,"blendProgram",new YT(this.gl,qT,"#version 300 es\nprecision highp float;\n\nuniform sampler2D src;\nuniform float lerp;\nuniform float scale;\nin vec2 f_v_coord;\nout vec4 fragColor;\n\nvoid main() {\n    vec2 tex_coord = f_v_coord;\n    if(scale < 1.0f) {\n        tex_coord /= scale;\n    }\n    vec4 srcColor = texture(src, tex_coord);\n    fragColor = mix(vec4(srcColor.xyz, 0.0f), srcColor, lerp);\n}\n","blend")),zT(this,"copyProgram",new YT(this.gl,qT,"#version 300 es\nprecision highp float;\n\nuniform sampler2D src;\nin vec2 f_v_coord;\nout vec4 fragColor;\n\nvoid main() {\n    vec2 coord = f_v_coord;\n    fragColor = texture(src, coord);\n}\n","copy")),zT(this,"noiseProgram",new YT(this.gl,qT,"#version 300 es\nprecision highp float;\n\nuniform sampler2D src;\nin vec2 f_v_coord;\nout vec4 fragColor;\n\n/* Gradient noise from Jorge Jimenez's presentation: */\n/* http://www.iryoku.com/next-generation-post-processing-in-call-of-duty-advanced-warfare */\nfloat gradientNoise(in vec2 uv) {\n    return fract(52.9829189f * fract(dot(uv, vec2(0.06711056f, 0.00583715f))));\n}\n\nvoid main() {\n    vec2 tex_coord = f_v_coord;\n    float dither = (1.0f / 255.0f) * gradientNoise(gl_FragCoord.xy) - (0.5f / 255.0f);\n    vec4 color = texture(src, tex_coord);\n    color += dither;\n    fragColor = color;\n}\n","noise")),zT(this,"vertexBuffer",new ZT(this.gl,this.gl.ARRAY_BUFFER,e.rawVertexBuffer,this.gl.STATIC_DRAW)),zT(this,"indexBuffer",new ZT(this.gl,this.gl.ELEMENT_ARRAY_BUFFER,e.rawIndexBuffer,this.gl.STATIC_DRAW)),zT(this,"noiseTexture",new JT(this.gl)),zT(this,"fb"),zT(this,"historyFrameBuffer",[]),zT(this,"_currentSize",[0,0]),zT(this,"_targetSize",[0,0]),zT(this,"renderSize",[0,0]),zT(this,"pixelSize",[0,0]),this.canvas=t;const r=this.gl;r.enable(this.gl.BLEND),r.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.requestTick();const n=t.getBoundingClientRect(),i=n.width*window.devicePixelRatio*this.currerntRenderScale,a=n.height*window.devicePixelRatio*this.currerntRenderScale;this.fb=[new KT(this.gl,i,a),new KT(this.gl,i,a)];for(const e of this.fb)e.bind(),r.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA);this.historyFrameBuffer=new Array(2).fill(0).map(()=>new KT(this.gl,i,a)),this.onResize(i,a)}onTick(e){if(this.tickHandle=0,this.paused)return;const t=e-this.lastTickTime,r=e-this.lastFrameTime;this.lastFrameTime=e,t<1e3/this.maxFPS?this.requestTick():(this.hasLyric&&(this.playTime+=r*this.flowSpeed*.2),this.frameTime+=r,this.onRedraw(this.playTime,r)&&this.staticMode||this.requestTick(),this.lastTickTime=e,this.ampTransition)}onResize(e,t){this._targetSize=[Math.max(1,Math.round(e)),Math.max(1,Math.round(t))],this.staticMode&&this.requestTick()}checkResize(){if(this._currentSize[0]===this._targetSize[0]&&this._currentSize[1]===this._targetSize[1])return;this._currentSize=[...this._targetSize];const[e,t]=this._targetSize,r=Math.round(Math.max(e/this.currerntRenderScale,e)),n=Math.round(Math.max(t/this.currerntRenderScale,t));this.renderSize=[e,t],this.canvas.width=r,this.canvas.height=n,this.pixelSize=[r,n],this.gl.viewport(0,0,r,n);for(const i of this.fb)i.resize(e,t);for(const i of this.historyFrameBuffer)i.resize(r,n)}requestTick(){this.tickHandle||(this.tickHandle=requestAnimationFrame(e=>this.onTick(e)))}drawScreen(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)}bindDefaultFrameBuffer(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)}onRedraw(e,t){this.checkResize(),this.hasLyricValue=(19*this.hasLyricValue+(this.hasLyric?1:0))/20;const r=this.gl;this.vertexBuffer.bind(),this.indexBuffer.bind(),this.mainProgram.use(),this.noiseTexture.active(),this.mainProgram.setUniform1i("noisetex",1),this.mainProgram.setUniform2f("IIlIlIIlIlIllI",this.renderSize[0],this.renderSize[1]),this.mainProgram.setUniform1f("lIIIlllllIllIl",this.hasLyric?e/1e3:0),this.mainProgram.setUniform1f("IIIlllllllIIIllIl",this.hasLyricValue),this.mainProgram.setUniform1f("IIIlllIlIIllll",this.hasLyric?this._lowFreqVolume:0),this.mainProgram.setUniform2f("IllIlllIlIIlllI",this.IllIlllIlIIlllI[0],this.IllIlllIlIIlllI[1]);const[n,i]=this.fb;i.bind(),r.clearColor(0,0,0,0),r.clear(this.gl.COLOR_BUFFER_BIT);for(const o of this.sprites)n.bind(),r.clearColor(0,0,0,0),r.clear(this.gl.COLOR_BUFFER_BIT),this.mainProgram.use(),o.draw("IlllIIlIlllIll"),i.bind(),this.blendProgram.use(),n.active(),this.blendProgram.setUniform1i("src",0),this.blendProgram.setUniform1f("lerp",o.alpha),this.blendProgram.setUniform1f("scale",this.currerntRenderScale),this.drawScreen(),o.alpha=Math.min(1,o.alpha+t/200);if(this.noiseProgram.use(),this.noiseProgram.setUniform1i("src",0),n.bind(),i.active(),this.bindDefaultFrameBuffer(),this.drawScreen(),this.sprites.length>1&&this.sprites[this.sprites.length-1].alpha>=1)for(const o of this.sprites.splice(0,this.sprites.length-1))o.dispose();const a=1===this.sprites.length&&this.sprites[0].alpha>=1,s=this.hasLyric?this.hasLyricValue>1e-5:this.hasLyricValue<.99999;return a||!s}copyFrameBuffer(e,t=null){e!==t&&(e.active(this.gl.TEXTURE0),this.copyProgram.use(),t?t.bind():this.bindDefaultFrameBuffer(),this.copyProgram.setUniform1i("src",0),this.drawScreen())}setupGL(){const e=this.canvas.getContext("webgl2",{alpha:!0,depth:!1,powerPreference:"low-power"});if(!e)throw new Error("WebGL2 not supported");return this.gl=e,e.enable(e.BLEND),e.disable(e.DEPTH_TEST),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.getExtension("EXT_color_buffer_float")||console.warn("EXT_color_buffer_float not supported"),e.getExtension("EXT_float_blend")||console.warn("EXT_float_blend not supported"),e.getExtension("OES_texture_float_linear")||console.warn("OES_texture_float_linear not supported"),e}setLowFreqVolume(e){this._lowFreqVolume=e}setStaticMode(e){this.staticMode=e,this.lastFrameTime=performance.now(),this.requestTick()}setFPS(e){this.maxFPS=e}pause(){this.tickHandle&&(cancelAnimationFrame(this.tickHandle),this.tickHandle=0),this.paused=!0}resume(){this.paused=!1,this.requestTick()}async setAlbum(e,t=!1){if("string"==typeof e&&0===e.trim().length)throw new Error("Empty album url");let r=null,n=5;for(;!r&&n>0;)try{r="string"==typeof e?await $T(e,t):await XT(e)}catch(d){console.warn(`failed on loading album resource, retrying (${n})`,{albumSource:e,error:d}),n--}if(!r)return;const i=this.reduceImageSizeCanvas,a=i.getContext("2d");if(!a)throw new Error("Failed to create canvas context");a.clearRect(0,0,i.width,i.height);const s=r instanceof HTMLVideoElement?r.videoWidth:r.naturalWidth,o=r instanceof HTMLVideoElement?r.videoHeight:r.naturalHeight;if(s*o===0)throw new Error("Invalid image size");a.drawImage(r,0,0,s,o,0,0,i.width,i.height);const l=a.getImageData(0,0,i.width,i.height);(function(e,t){const r=e.data;for(let n=0;n<r.length;n+=4){const e=r[n],i=r[n+1],a=r[n+2],s=r[n+3];r[n]=(e-128)*t+128,r[n+1]=(i-128)*t+128,r[n+2]=(a-128)*t+128,r[n+3]=s}})(l,.8),function(e,t){const r=e.data;for(let n=0;n<r.length;n+=4){const e=r[n],i=r[n+1],a=r[n+2],s=r[n+3],o=.3*e+.59*i+.11*a;r[n]=o*(1-t)+e*t,r[n+1]=o*(1-t)+i*t,r[n+2]=o*(1-t)+a*t,r[n+3]=s}}(l,1.5),function(e,t,r){const n=e.data,i=e.width,a=e.height;let s,o,l,u,c,d,h,f,p,m,y,g,_;const v=i-1,b=a-1,w=t+1,x=t+1,I=1/((t+w)*(t+x)),T=[],E=[],A=[],S=[],k=[],C=[];for(;r-- >0;){for(_=g=0,d=0;d<a;d++){for(s=n[_]*w,o=n[_+1]*w,l=n[_+2]*w,u=n[_+3]*w,h=1;h<=t;h++)f=_+((h>v?v:h)<<2),s+=n[f++],o+=n[f++],l+=n[f++],u+=n[f];for(c=0;c<i;c++)T[g]=s,E[g]=o,A[g]=l,S[g]=u,0===d&&(k[c]=Math.min(c+w,v)<<2,C[c]=Math.max(c-t,0)<<2),p=_+k[c],m=_+C[c],s+=n[p++]-n[m++],o+=n[p++]-n[m++],l+=n[p++]-n[m++],u+=n[p]-n[m],g++;_+=i<<2}for(c=0;c<i;c++){for(y=c,s=T[y]*x,o=E[y]*x,l=A[y]*x,u=S[y]*x,h=1;h<=t;h++)y+=h>b?0:i,s+=T[y],o+=E[y],l+=A[y],u+=S[y];for(g=c<<2,d=0;d<a;d++)n[g]=s*I+.5|0,n[g+1]=o*I+.5|0,n[g+2]=l*I+.5|0,n[g+3]=u*I+.5|0,0===c&&(k[d]=Math.min(d+x,b)*i,C[d]=Math.max(d-t,0)*i),p=c+k[d],m=c+C[d],s+=T[p]-T[m],o+=E[p]-E[m],l+=A[p]-A[m],u+=S[p]-S[m],g+=i<<2}}}(l,10,4);const u=new QT(this.gl,this.mainProgram,this.vertexBuffer,this.indexBuffer,l);this.sprites.push(u),this.playTime=1e5*Math.random(),this.lastFrameTime=performance.now(),console.info(1e4*Math.random());const c=Number.parseInt((1e4*Math.random()).toFixed(0))%3;this.IllIlllIlIIlllI=0===c?[-1.3,-.9]:1===c?[-1.1,-.9]:[-1.3,-.9],this.requestTick()}setHasLyric(e){this.hasLyric=e,this.requestTick()}getElement(){return this.canvas}dispose(){super.dispose(),this.vertexBuffer.dispose(),this.indexBuffer.dispose(),this.noiseTexture.dispose();for(const e of this.sprites)e.dispose();this.copyProgram.dispose(),this.blendProgram.dispose(),this.mainProgram.dispose();for(const e of this.fb)e.dispose();for(const e of this.historyFrameBuffer)e.dispose();this.tickHandle&&(cancelAnimationFrame(this.tickHandle),this.tickHandle=0)}};zT(eE,"rawVertexBuffer",new Float32Array([-1,-1,1,-1,-1,1,1,1])),zT(eE,"rawIndexBuffer",new Uint16Array([0,1,2,1,2,3]));let tE=eE;class rE{constructor(e,t){zT(this,"element"),zT(this,"renderer"),this.renderer=e,this.element=t,t.style.pointerEvents="none",t.style.zIndex="-1",t.style.contain="strict"}static new(e){const t=document.createElement("canvas");return new rE(new e(t),t)}setRenderScale(e){this.renderer.setRenderScale(e)}setFlowSpeed(e){this.renderer.setFlowSpeed(e)}setStaticMode(e){this.renderer.setStaticMode(e)}setFPS(e){this.renderer.setFPS(e)}pause(){this.renderer.pause()}resume(){this.renderer.resume()}setLowFreqVolume(e){this.renderer.setLowFreqVolume(e)}setHasLyric(e){this.renderer.setHasLyric(e)}setAlbum(e,t){return this.renderer.setAlbum(e,t)}getElement(){return this.element}dispose(){this.renderer.dispose(),this.element.remove()}}function nE(e){return function(e){return t=>(e(t+.001)-e(t-.001))/.002}(e)}class iE{constructor(e=0){zT(this,"currentPosition",0),zT(this,"targetPosition",0),zT(this,"currentTime",0),zT(this,"params",{}),zT(this,"currentSolver"),zT(this,"getV"),zT(this,"getV2"),zT(this,"queueParams"),zT(this,"queuePosition"),this.targetPosition=e,this.currentPosition=this.targetPosition,this.currentSolver=()=>this.targetPosition,this.getV=()=>0,this.getV2=()=>0}resetSolver(){const e=this.getV(this.currentTime);this.currentTime=0,this.currentSolver=function(e,t,r,n=0,i){const a=(null==i?void 0:i.soft)??!1,s=(null==i?void 0:i.stiffness)??100,o=(null==i?void 0:i.damping)??10,l=(null==i?void 0:i.mass)??1,u=r-e;if(a||1<=o/(2*Math.sqrt(s*l))){const i=-Math.sqrt(s/l),a=-i*u-t;return t=>(t-=n)<0?e:r-(u+t*a)*Math.E**(t*i)}const c=Math.sqrt(4*l*s-o**2),d=(o*u-2*l*t)/c,h=.5*c/l,f=-.5*o/l;return t=>(t-=n)<0?e:r-(Math.cos(t*h)*u+Math.sin(t*h)*d)*Math.E**(t*f)}(this.currentPosition,e,this.targetPosition,0,this.params),this.getV=nE(this.currentSolver),this.getV2=nE(this.getV)}arrived(){return Math.abs(this.targetPosition-this.currentPosition)<.01&&this.getV(this.currentTime)<.01&&this.getV2(this.currentTime)<.01&&void 0===this.queueParams&&void 0===this.queuePosition}setPosition(e){this.targetPosition=e,this.currentPosition=e,this.currentSolver=()=>this.targetPosition,this.getV=()=>0,this.getV2=()=>0}update(e=0){this.currentTime+=e,this.currentPosition=this.currentSolver(this.currentTime),this.queueParams&&(this.queueParams.time-=e,this.queueParams.time<=0&&this.updateParams({...this.queueParams})),this.queuePosition&&(this.queuePosition.time-=e,this.queuePosition.time<=0&&this.setTargetPosition(this.queuePosition.position)),this.arrived()&&this.setPosition(this.targetPosition)}updateParams(e,t=0){t>0?this.queueParams={...this.queuePosition??{},...e,time:t}:(this.queuePosition=void 0,this.params={...this.params,...e},this.resetSolver())}setTargetPosition(e,t=0){t>0?this.queuePosition={...this.queuePosition??{},position:e,time:t}:(this.queuePosition=void 0,this.targetPosition=e,this.resetSolver())}getCurrentPosition(){return this.currentPosition}}class aE{constructor(e){zT(this,"element",document.createElement("div")),zT(this,"left",0),zT(this,"top",0),zT(this,"delay",0),zT(this,"lineSize",[0,0]),zT(this,"lineTransforms",{posX:new iE(0),posY:new iE(0)}),zT(this,"lastStyle",""),this.lyricPlayer=e,this.element.setAttribute("class",this.lyricPlayer.style.classes.lyricLine),this.rebuildStyle()}measureSize(){return[this.element.clientWidth,this.element.clientHeight]}show(){this.rebuildStyle()}hide(){this.rebuildStyle()}rebuildStyle(){let e=`transform:translate(${this.lineTransforms.posX.getCurrentPosition().toFixed(2)}px,${this.lineTransforms.posY.getCurrentPosition().toFixed(2)}px);`;!this.lyricPlayer.getEnableSpring()&&this.isInSight&&(e+=`transition-delay:${this.delay}ms;`),e!==this.lastStyle&&(this.lastStyle=e,this.element.setAttribute("style",e))}getElement(){return this.element}setTransform(e=this.left,t=this.top,r=!1,n=0){this.left=e,this.top=t,this.delay=1e3*n|0,r||!this.lyricPlayer.getEnableSpring()?(r&&this.element.classList.add(this.lyricPlayer.style.classes.tmpDisableTransition),this.lineTransforms.posX.setPosition(e),this.lineTransforms.posY.setPosition(t),this.lyricPlayer.getEnableSpring()?this.rebuildStyle():this.show(),r&&requestAnimationFrame(()=>{this.element.classList.remove(this.lyricPlayer.style.classes.tmpDisableTransition)})):(this.lineTransforms.posX.setTargetPosition(e,n),this.lineTransforms.posY.setTargetPosition(t,n))}update(e=0){this.lyricPlayer.getEnableSpring()&&(this.lineTransforms.posX.update(e),this.lineTransforms.posY.update(e),this.isInSight?this.show():this.hide())}get isInSight(){const e=this.lineTransforms.posX.getCurrentPosition(),t=this.lineTransforms.posY.getCurrentPosition(),r=e+this.lineSize[0],n=t+this.lineSize[1],i=this.lyricPlayer.size[0],a=this.lyricPlayer.size[1];return!(e>i||t>a||r<0||n<0)}dispose(){this.element.remove()}}const sE=(e,t,r)=>Math.max(e,Math.min(t,r));class oE{constructor(e){zT(this,"element",document.createElement("div")),zT(this,"dot0",document.createElement("span")),zT(this,"dot1",document.createElement("span")),zT(this,"dot2",document.createElement("span")),zT(this,"left",0),zT(this,"top",0),zT(this,"scale",1),zT(this,"playing",!0),zT(this,"lastStyle",""),zT(this,"currentInterlude"),zT(this,"currentTime",0),zT(this,"interludeTime",0),zT(this,"targetBreatheDuration",1500),this.lyricPlayer=e,this.element.className=this.lyricPlayer.style.classes.interludeDots,this.element.appendChild(this.dot0),this.element.appendChild(this.dot1),this.element.appendChild(this.dot2)}getElement(){return this.element}setTransform(e=this.left,t=this.top){this.left=e,this.top=t,this.update()}setInterlude(e){this.currentInterlude=e,this.currentTime=(null==e?void 0:e[0])??0}pause(){this.playing=!1}resume(){this.playing=!0}update(e=0){if(!this.playing)return;this.currentTime+=e;let t="";if(t+=`transform:translate(${this.left.toFixed(2)}px, ${this.top.toFixed(2)}px)`,this.currentInterlude){const e=this.currentInterlude[1]-this.currentInterlude[0],r=this.currentTime-this.currentInterlude[0];if(r<=e){const n=e/Math.ceil(e/this.targetBreatheDuration);let i=1,a=1;i*=Math.sin(1.5*Math.PI-r/n*2)/20+1,r<1e3&&(i*=1-((1e3-r)/1e3)**2),r<500?a=0:r<1e3&&(a*=(r-500)/500),e-r<750&&(i*=1-function(e){const t=2.5949095;return e<.5?Math.pow(2*e,2)*(7.189819*e-t)/2:(Math.pow(2*e-2,2)*((t+1)*(2*e-2)+t)+2)/2}((750-(e-r))/750/2)),e-r<375&&(a*=sE(0,(e-r)/375,1));const s=Math.max(0,e-750);i=.7*Math.max(0,i),t+=` scale(${i})`;const o=sE(.25,3*r/s*.75,1),l=sE(.25,3*(r-s/3)/s*.75,1),u=sE(.25,3*(r-s/3*2)/s*.75,1);this.dot0.style.opacity=`${sE(0,Math.max(0,a*o),1)}`,this.dot1.style.opacity=`${sE(0,Math.max(0,a*l),1)}`,this.dot2.style.opacity=`${sE(0,Math.max(0,a*u),1)}`}else t+=" scale(0)",this.dot0.style.opacity="0",this.dot1.style.opacity="0",this.dot2.style.opacity="0"}else t+=" scale(0)",this.dot0.style.opacity="0",this.dot1.style.opacity="0",this.dot2.style.opacity="0";t+=";",this.lastStyle!==t&&(this.element.setAttribute("style",t),this.lastStyle=t)}dispose(){this.element.remove()}}function lE(e,t=4){return`matrix3d(${e.map((e,r)=>e.toFixed(t)).join(", ")})`}function uE(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var cE=.1,dE="function"==typeof Float32Array;function hE(e,t){return 1-3*t+3*e}function fE(e,t){return 3*t-6*e}function pE(e){return 3*e}function mE(e,t,r){return((hE(t,r)*e+fE(t,r))*e+pE(t))*e}function yE(e,t,r){return 3*hE(t,r)*e*e+2*fE(t,r)*e+pE(t)}function gE(e){return e}var _E=function(e,t,r,n){if(!(0<=e&&e<=1&&0<=r&&r<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&r===n)return gE;for(var i=dE?new Float32Array(11):new Array(11),a=0;a<11;++a)i[a]=mE(a*cE,e,r);function s(t){for(var n=0,a=1;10!==a&&i[a]<=t;++a)n+=cE;--a;var s=n+(t-i[a])/(i[a+1]-i[a])*cE,o=yE(s,e,r);return o>=.001?function(e,t,r,n){for(var i=0;i<4;++i){var a=yE(t,r,n);if(0===a)return t;t-=(mE(t,r,n)-e)/a}return t}(t,s,e,r):0===o?s:function(e,t,r,n,i){var a,s,o=0;do{(a=mE(s=t+(r-t)/2,n,i)-e)>0?r=s:t=s}while(Math.abs(a)>1e-7&&++o<10);return s}(t,n,n+cE,e,r)}return function(e){return 0===e?0:1===e?1:mE(s(e),t,n)}};const vE=uE(_E),bE=/^[\p{Unified_Ideograph}\u0800-\u9FFC]+$/u,wE=(e,t)=>r=>Math.min(1,Math.max(0,(r-e)/(t-e))),xE=.4,IE=wE(0,xE),TE=wE(xE,1),EE=e=>{const t=vE(.3,0,.25,1),r=vE(.5,0,.3,1);return n=>n<e?t(IE(n)):1-r(TE(n))},AE=EE(xE);function SE(e,t=0,r="rgba(0,0,0,0.85)",n="rgba(0,0,0,0.25)"){const i=2+e+t,a=e/i,s=(1-a)/2;return[`linear-gradient(to right,${r} ${100*s}%,${n} ${100*(s+a)}%)`,i]}function kE(e){return e.endTime-e.startTime>=1e3&&e.word.trim().length<=7&&e.word.trim().length>=1}class CE extends MouseEvent{constructor(e,t){super(t.type,t),this.line=e}}class PE extends EventTarget{constructor(e,t={words:[],translatedLyric:"",romanLyric:"",startTime:0,endTime:0,isBG:!1,isDuet:!1}){super(),zT(this,"element",document.createElement("div")),zT(this,"left",0),zT(this,"top",0),zT(this,"scale",1),zT(this,"blur",0),zT(this,"delay",0),zT(this,"splittedWords",[]),zT(this,"lineSize",[0,0]),zT(this,"lineTransforms",{posX:new iE(0),posY:new iE(0),scale:new iE(1)}),zT(this,"listenersMap",new Map),zT(this,"onMouseEvent",e=>{const t=new CE(this,e);for(const r of this.listenersMap.get(e.type)??[])r.call(this,t);if(!this.dispatchEvent(t)||t.defaultPrevented)return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1}),zT(this,"isEnabled",!1),zT(this,"_hide",!0),zT(this,"_prevParentEl",null),zT(this,"lastStyle",""),this.lyricPlayer=e,this.lyricLine=t,this._prevParentEl=e.getElement(),this.element.setAttribute("class",this.lyricPlayer.style.classes.lyricLine),this.lyricLine.isBG&&this.element.classList.add(this.lyricPlayer.style.classes.lyricBgLine),this.lyricLine.isDuet&&this.element.classList.add(this.lyricPlayer.style.classes.lyricDuetLine),this.element.appendChild(document.createElement("div")),this.element.appendChild(document.createElement("div")),this.element.appendChild(document.createElement("div"));const r=this.element.children[0],n=this.element.children[1],i=this.element.children[2];r.setAttribute("class",this.lyricPlayer.style.classes.lyricMainLine),n.setAttribute("class",this.lyricPlayer.style.classes.lyricSubLine),i.setAttribute("class",this.lyricPlayer.style.classes.lyricSubLine),this.rebuildElement(),this.rebuildStyle()}addMouseEventListener(e,t,r){if(t){const n=this.listenersMap.get(e)??new Set;0===n.size&&this.element.addEventListener(e,this.onMouseEvent,r),n.add(t),this.listenersMap.set(e,n)}}removeMouseEventListener(e,t,r){if(t){const n=this.listenersMap.get(e);n&&(n.delete(t),0===n.size&&this.element.removeEventListener(e,this.onMouseEvent,r))}}enable(e=this.lyricLine.startTime){this.isEnabled=!0,this.element.classList.add("active");const t=this.element.children[0];for(const r of this.splittedWords){for(const e of r.elementAnimations)e.currentTime=0,e.playbackRate=1,e.play();for(const t of r.maskAnimations)t.currentTime=Math.min(this.totalDuration,Math.max(0,e-this.lyricLine.startTime)),t.playbackRate=1,t.play()}t.classList.add("active")}disable(e=0){this.isEnabled=!1,this.element.classList.remove("active");const t=this.element.children[0];for(const r of this.splittedWords){for(const e of r.elementAnimations)"float-word"===e.id&&(e.playbackRate=-1,e.play());for(const t of r.maskAnimations)t.currentTime=Math.min(this.totalDuration,Math.max(0,e-this.lyricLine.startTime)),t.pause()}t.classList.remove("active")}resume(){if(this.isEnabled)for(const e of this.splittedWords)for(const t of e.maskAnimations)t.play()}pause(){if(this.isEnabled)for(const e of this.splittedWords)for(const t of e.maskAnimations)t.pause()}setMaskAnimationState(e=0){const t=e-this.lyricLine.startTime;for(const r of this.splittedWords)for(const e of r.maskAnimations)e.currentTime=Math.min(this.totalDuration,Math.max(0,t)),e.playbackRate=1,t>=0&&t<this.totalDuration?e.play():e.pause()}measureSize(){this._hide&&(this._prevParentEl&&this._prevParentEl.appendChild(this.element),this.element.style.display="",this.element.style.visibility="hidden");const e=[this.element.clientWidth,this.element.clientHeight];return this._hide&&(this._prevParentEl&&this.element.remove(),this.element.style.display="none",this.element.style.visibility=""),e}setLine(e){this.lyricLine=e,this.lyricLine.isBG?this.element.classList.add(this.lyricPlayer.style.classes.lyricBgLine):this.element.classList.remove(this.lyricPlayer.style.classes.lyricBgLine),this.lyricLine.isDuet?this.element.classList.add(this.lyricPlayer.style.classes.lyricDuetLine):this.element.classList.remove(this.lyricPlayer.style.classes.lyricDuetLine),this.rebuildElement(),this.rebuildStyle()}getLine(){return this.lyricLine}show(){this._hide=!1,this._prevParentEl&&(this._prevParentEl.appendChild(this.element),this._prevParentEl=null),this.rebuildStyle()}hide(){this._hide=!0,this.element.parentElement&&(this._prevParentEl=this.element.parentElement,this.element.remove()),this.rebuildStyle()}rebuildStyle(){if(this._hide)return void("display:none;transform:translate(0,-10000px);"!==this.lastStyle&&(this.lastStyle="display:none;transform:translate(0,-10000px);",this.element.setAttribute("style","display:none;transform:translate(0,-10000px);")));let e="";e+=`transform:translate(${this.lineTransforms.posX.getCurrentPosition().toFixed(1)}px,${this.lineTransforms.posY.getCurrentPosition().toFixed(1)}px) scale(${this.lineTransforms.scale.getCurrentPosition().toFixed(4)});`,!this.lyricPlayer.getEnableSpring()&&this.isInSight&&(e+=`transition-delay:${this.delay}ms;`),e+=`filter:blur(${Math.min(32,this.blur)}px);`,e!==this.lastStyle&&(this.lastStyle=e,this.element.setAttribute("style",e))}rebuildElement(){const e=this.element.children[0],t=this.element.children[1],r=this.element.children[2];if(this.lyricPlayer._getIsNonDynamic())return e.innerText=this.lyricLine.words.map(e=>e.word).join(""),t.innerText=this.lyricLine.translatedLyric,void(r.innerText=this.lyricLine.romanLyric);const n=function(e){const t=[];for(const a of e){const e=a.word.replace(/\s/g,"").length,r=a.word.split(" ").filter(e=>e.trim().length>0);if(r.length>1){a.word.startsWith(" ")&&t.push({word:" ",startTime:0,endTime:0});let n=0;for(const i of r){const r={word:i,startTime:a.startTime+n/e*(a.endTime-a.startTime),endTime:a.startTime+(n+i.length)/e*(a.endTime-a.startTime)};t.push(r),t.push({word:" ",startTime:0,endTime:0}),n+=i.length}a.word.endsWith(" ")||t.pop()}else t.push(a)}let r=[],n=[];const i=[];for(const a of t){const e=a.word;r.push(e),n.push(a),e.length>0&&0===e.trim().length?(r.pop(),n.pop(),1===n.length?i.push(n[0]):n.length>1&&i.push(n),i.push(a),r=[],n=[]):(!/^\s*[^\s]*\s*$/.test(r.join(""))||bE.test(e))&&(r.pop(),n.pop(),1===n.length?i.push(n[0]):n.length>1&&i.push(n),r=[e],n=[a])}return 1===n.length?i.push(n[0]):i.push(n),i}(this.lyricLine.words);e.innerHTML="",this.splittedWords=[];for(const i of n)if(Array.isArray(i)){if(0===i.length)continue;const t=i.reduce((e,t)=>(e.endTime=Math.max(e.endTime,t.endTime),e.startTime=Math.min(e.startTime,t.startTime),e.word+=t.word,e),{word:"",startTime:1/0,endTime:-1/0}),r=i.map(e=>kE(e)).reduce((e,t)=>e||t,kE(t)),n=document.createElement("span");n.classList.add("emphasize-wrapper");const a=[];for(const e of i){const i=document.createElement("span");if(r){i.classList.add("emphasize");const n=[];for(const t of e.word.trim().split("")){const e=document.createElement("span");e.innerText=t,n.push(e),a.push(e),i.appendChild(e)}const s={...e,mainElement:i,subElements:n,elementAnimations:[this.initFloatAnimation(t,i)],maskAnimations:[],width:0,height:0,padding:0,shouldEmphasize:r};this.splittedWords.push(s)}else i.innerText=e.word,this.splittedWords.push({...e,mainElement:i,subElements:[],elementAnimations:[this.initFloatAnimation(e,i)],maskAnimations:[],width:0,height:0,padding:0,shouldEmphasize:r});n.appendChild(i)}r&&this.splittedWords[this.splittedWords.length-1].elementAnimations.push(...this.initEmphasizeAnimation(a,t.endTime-t.startTime,t.startTime-this.lyricLine.startTime)),t.word.trimStart()!==t.word&&e.appendChild(document.createTextNode(" ")),e.appendChild(n),t.word.trimEnd()!==t.word&&e.appendChild(document.createTextNode(" "))}else if(0===i.word.trim().length)e.appendChild(document.createTextNode(" "));else{const t=kE(i),r=document.createElement("span"),n={...i,mainElement:r,subElements:[],elementAnimations:[this.initFloatAnimation(i,r)],maskAnimations:[],width:0,height:0,padding:0,shouldEmphasize:t};if(t){r.classList.add("emphasize");const e=[];for(const n of i.word.trim().split("")){const t=document.createElement("span");t.innerText=n,e.push(t),r.appendChild(t)}n.subElements=e;const t=Math.abs(n.endTime-n.startTime);n.elementAnimations.push(...this.initEmphasizeAnimation(e,t,n.startTime-this.lyricLine.startTime))}else r.innerText=i.word.trim();i.word.trimStart()!==i.word&&e.appendChild(document.createTextNode(" ")),e.appendChild(r),i.word.trimEnd()!==i.word&&e.appendChild(document.createTextNode(" ")),this.splittedWords.push(n)}t.innerText=this.lyricLine.translatedLyric,r.innerText=this.lyricLine.romanLyric}initFloatAnimation(e,t){const r=e.startTime-this.lyricLine.startTime,n=Math.max(1e3,e.endTime-e.startTime);let i=.05;this.lyricLine.isBG&&(i*=2),kE(e)&&n<1200&&(i=0);const a=t.animate([{transform:"translateY(0px)"},{transform:`translateY(${-i}em)`}],{duration:isFinite(n)?n:0,delay:isFinite(r)?r:0,id:"float-word",composite:"add",fill:"both",easing:"ease-out"});return a.pause(),a}initEmphasizeAnimation(e,t,r){const n=Math.max(0,r),i=Math.max(1e3,t);let a="float-and-glow";i<1200&&(a="float-only");let s=[];switch(a){case"float-and-glow":{let t=0,r=0;i>=1200&&i<2e3?(t=.7,r=.5):i>=2e3&&i<3e3?(t=.8,r=.6):(i>=3e3&&i<4e3||i>=4e3)&&(t=1,r=.8);const a=Number.isFinite(i)?Math.max(1.2*i,2e3):0,o=EE(xE);s=e.flatMap((e,s,l)=>{const u=n+i/3/l.length*s,c=[],d=new Array(32).fill(0).map((e,n)=>{const i=(n+1)/32,a=o(i),s=Math.sin(i*Math.PI*2),l=Math.max(0,i<xE?a/2:a-.5)*r,u=function(e,t=1,r={x:0,y:0}){const[n,i]=[r.x,r.y];return[e[0]*t,e[1]*t,e[2]*t,e[3],e[4]*t,e[5]*t,e[6]*t,e[7],e[8]*t,e[9]*t,e[10]*t,e[11],e[12]-n*t+n,e[13]-i*t+i,e[14],e[15]]}([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],1+.1*a*t);return{offset:i,transform:`${lE(u,4)} translate(${.005*s*t}em,${.05*-a}em)`,textShadow:`rgba(255, 255, 255, ${l}) 0 0 10px`}}),h=e.animate(d,{duration:a,delay:Number.isFinite(u)?u:0,id:`emphasize-word-float-and-glow-${e.innerText}-${s}`,iterations:1,composite:"replace",easing:"linear",fill:"both"});return h.onfinish=()=>{h.pause()},h.pause(),c.push(h),c});break}case"float-only":s=e.flatMap((e,t,r)=>{const a=n+i/1.5/r.length*t,s=[],o=new Array(32).fill(0).map((e,t)=>{const r=(t+1)/32;return{offset:r,transform:`translateY(${.05*-(r<xE?AE(r):1)}em)`}}),l=e.animate(o,{duration:Number.isFinite(i)?2*i:0,delay:Number.isFinite(a)?a:0,id:`emphasize-word-float-only-${e.innerText}-${t}`,iterations:1,composite:"replace",easing:"linear",fill:"both"});return l.onfinish=()=>{l.pause()},l.pause(),s.push(l),s})}return s}get totalDuration(){return this.lyricLine.endTime-this.lyricLine.startTime}updateMaskImage(){this._hide&&(this._prevParentEl&&this._prevParentEl.appendChild(this.element),this.element.style.display="",this.element.style.visibility="hidden");for(const e of this.splittedWords){const t=e.mainElement;t?(e.padding=parseFloat(getComputedStyle(t).paddingLeft),e.width=t.clientWidth-2*e.padding,e.height=t.clientHeight-2*e.padding):(e.width=0,e.height=0,e.padding=0)}this.lyricPlayer.supportMaskImage?this.generateWebAnimationBasedMaskImage():this.generateCalcBasedMaskImage(),this._hide&&(this._prevParentEl&&this.element.remove(),this.element.style.display="none",this.element.style.visibility="")}generateCalcBasedMaskImage(){for(const e of this.splittedWords){const t=e.mainElement;if(t){e.width=t.clientWidth,e.height=t.clientHeight;const r=e.height/2,[n,i]=SE(r/e.width),a=100*i+"% 100%";this.lyricPlayer.supportMaskImage?(t.style.maskImage=n,t.style.maskRepeat="no-repeat",t.style.maskOrigin="left",t.style.maskSize=a):(t.style.webkitMaskImage=n,t.style.webkitMaskRepeat="no-repeat",t.style.webkitMaskOrigin="left",t.style.webkitMaskSize=a);const s=e.width+r,o=`clamp(${-s}px,calc(${-s}px + (var(--amll-player-time) - ${e.startTime})*${s/Math.abs(e.endTime-e.startTime)}px),0px) 0px, left top`;t.style.maskPosition=o,t.style.webkitMaskPosition=o}}}generateWebAnimationBasedMaskImage(){const e=this.totalDuration;this.splittedWords.forEach((t,r)=>{const n=t.mainElement;if(n){const a=t.height/2,[s,o]=SE(a/(t.width+2*t.padding)),l=100*o+"% 100%";this.lyricPlayer.supportMaskImage?(n.style.maskImage=s,n.style.maskRepeat="no-repeat",n.style.maskOrigin="left",n.style.maskSize=l):(n.style.webkitMaskImage=s,n.style.webkitMaskRepeat="no-repeat",n.style.webkitMaskOrigin="left",n.style.webkitMaskSize=l);const u=this.splittedWords.slice(0,r).reduce((e,t)=>e+t.width,0)+(this.splittedWords[0]?a:0),c=-(t.width+2*t.padding+a),d=e=>Math.max(c,Math.min(0,e));let h=-u-t.width-t.padding-a,f=0;const p=[];let m=h,y=0;const g=()=>{const e=h-m,t=Math.max(0,Math.min(1,f)),r=t-y,n=Math.abs(r/e);if(h>c&&m<c){const e=Math.abs(m-c)*n,t=`${d(m)}px 0`,r={offset:y+e,maskPosition:t};p.push(r)}if(h>0&&m<0){const e=Math.abs(m)*n,t=`${d(h)}px 0`,r={offset:y+e,maskPosition:t};p.push(r)}const i={offset:t,maskPosition:`${d(h)}px 0`};p.push(i),m=h,y=t};g();let _=0;this.splittedWords.forEach((t,r)=>{{const r=t.startTime-this.lyricLine.startTime,n=r-_;f+=n/e,n>0&&g(),_=r}{const n=t.endTime-t.startTime;f+=n/e,h+=t.width,0===r&&(h+=1.5*a),r===this.splittedWords.length-1&&(h+=.5*a),n>0&&g(),_+=n}});for(const e of t.maskAnimations)e.cancel();try{const i=n.animate(p,{duration:e||1,id:`fade-word-${t.word}-${r}`,easing:"linear",fill:"both"});i.pause(),t.maskAnimations=[i]}catch(i){console.warn("应用渐变动画发生错误",p,e,i)}}})}getElement(){return this.element}setTransform(e=this.left,t=this.top,r=this.scale,n=1,i=0,a=!1,s=0){const o=Math.round(i),l=this.isInSight,u=this.lyricPlayer.getEnableSpring();this.left=e,this.top=t,this.scale=r,this.delay=1e3*s|0;const c=this.element.children[0],d=this.element.children[1],h=this.element.children[2];if(c.style.opacity=`${n}`,d.style.opacity=""+n/2,h.style.opacity=""+n/2,a||!u){if(this.blur=Math.min(32,o),a&&this.element.classList.add(this.lyricPlayer.style.classes.tmpDisableTransition),this.lineTransforms.posX.setPosition(e),this.lineTransforms.posY.setPosition(t),this.lineTransforms.scale.setPosition(r),u)this.rebuildStyle();else{const e=this.isInSight;l||e?this.show():this.hide()}a&&requestAnimationFrame(()=>{this.element.classList.remove(this.lyricPlayer.style.classes.tmpDisableTransition)})}else this.lineTransforms.posX.setTargetPosition(e,s),this.lineTransforms.posY.setTargetPosition(t,s),this.lineTransforms.scale.setTargetPosition(r),this.blur!==Math.min(32,o)&&(this.blur=Math.min(32,o),this.element.style.filter=`blur(${Math.min(32,o)}px)`)}update(e=0){this.lyricPlayer.getEnableSpring()&&(this.lineTransforms.posX.update(e),this.lineTransforms.posY.update(e),this.lineTransforms.scale.update(e),this.isInSight?this.show():this.hide())}_getDebugTargetPos(){return`[位移: ${this.left}, ${this.top}; 缩放: ${this.scale}; 延时: ${this.delay}]`}get isInSight(){const e=this.lineTransforms.posX.getCurrentPosition(),t=this.lineTransforms.posY.getCurrentPosition(),r=e+this.lineSize[0],n=t+this.lineSize[1],i=this.lyricPlayer.size[0],a=this.lyricPlayer.size[1];return!(e>i||r<0||t>a||n<0)}dispose(){this.element.remove()}}const RE=qx((void 0===ME&&(ME={}),{plugins:[{onCreateRule:function(e,t,r){if("function"!=typeof t)return null;var n=Gw(e,{},r);return n[Qx]=t,n},onProcessStyle:function(e,t){if(Zx in t||Qx in t)return e;var r={};for(var n in e){var i=e[n];"function"==typeof i&&(delete e[n],r[n]=i)}return t[Zx]=r,e},onUpdate:function(e,t,r,n){var i=t,a=i[Qx];a&&(i.style=a(e)||{});var s=i[Zx];if(s)for(var o in s)i.prop(o,s[o](e),n)}},(OE=ME.observable,{onCreateRule:function(e,t,r){if(!rI(t))return null;var n=t,i=Gw(e,{},r);return n.subscribe(function(e){for(var t in e)i.prop(t,e[t],OE)}),i},onProcessRule:function(e){if(!e||"style"===e.type){var t=e,r=t.style,n=function(e){var n=r[e];if(!rI(n))return"continue";delete r[e],n.subscribe({next:function(r){t.prop(e,r,OE)}})};for(var i in r)n(i)}}}),{onProcessRule:iI},dI(),{onProcessStyle:function(e,t,r){return"extend"in e?pI(e,t,r):e},onChangeValue:function(e,t,r){if("extend"!==t)return e;if(null==e||!1===e){for(var n in r[fI])r.prop(n,null);return r[fI]=null,null}if("object"==typeof e){for(var i in e)r.prop(i,e[i]);r[fI]=e}return null}},_I(),bI(),{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=AI(e[t]);return e}return AI(e)},onChangeValue:function(e,t,r){if(0===t.indexOf("--"))return e;var n=EI(t);return t===n?e:(r.prop(n,e),null)}},LI(ME.defaultUnit),{onProcessStyle:function(e,t){if(!e||"style"!==t.type)return e;if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=jI(e[r],t);return e}return jI(e,t)}},jT(),(LE=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length},{onProcessStyle:function(e,t){if("style"!==t.type)return e;for(var r={},n=Object.keys(e).sort(LE),i=0;i<n.length;i++)r[n[i]]=e[n[i]];return r}})]}));var ME,LE,OE;class FE extends MouseEvent{constructor(e,t,r){super(`line-${r.type}`,r),this.lineIndex=e,this.line=t}}class DE extends EventTarget{constructor(){super(),zT(this,"element",document.createElement("div")),zT(this,"currentTime",0),zT(this,"lyricLines",[]),zT(this,"processedLines",[]),zT(this,"lyricLinesEl",[]),zT(this,"lyricLinesSize",new WeakMap),zT(this,"lyricLinesIndexes",new WeakMap),zT(this,"hotLines",new Set),zT(this,"bufferedLines",new Set),zT(this,"scrollToIndex",0),zT(this,"allowScroll",!0),zT(this,"scrolledHandler",0),zT(this,"isScrolled",!1),zT(this,"invokedByScrollEvent",!1),zT(this,"scrollOffset",0),zT(this,"hidePassedLines",!1),zT(this,"resizeObserver",new ResizeObserver(e=>{const t=e[0].contentRect;this.size[0]=t.width,this.size[1]=t.height;const r=getComputedStyle(e[0].target),n=this.element.clientWidth-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight),i=this.element.clientHeight-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom);this.innerSize[0]=n,this.innerSize[1]=i,this.rebuildStyle(),this.calcLayout(!0,!0),this.lyricLinesEl.forEach(e=>e.updateMaskImage())})),zT(this,"posXSpringParams",{mass:1,damping:10,stiffness:100}),zT(this,"posYSpringParams",{mass:1,damping:16.5,stiffness:100}),zT(this,"scaleSpringParams",{mass:1,damping:20,stiffness:100}),zT(this,"emUnit",Math.max(Math.min(.05*innerHeight,.1*innerWidth),12)),zT(this,"padding",this.emUnit),zT(this,"enableBlur",!0),zT(this,"enableScale",!0),zT(this,"interludeDots"),zT(this,"interludeDotsSize",[0,0]),zT(this,"bottomLine"),zT(this,"supportPlusLighter",CSS.supports("mix-blend-mode","plus-lighter")),zT(this,"supportMaskImage",CSS.supports("mask-image","none")),zT(this,"disableSpring",!1),zT(this,"alignAnchor","center"),zT(this,"alignPosition",.5),zT(this,"isNonDynamic",!1),zT(this,"scrollBoundary",[0,0]),zT(this,"size",[0,0]),zT(this,"innerSize",[0,0]),zT(this,"onLineClickedHandler",e=>{const t=new FE(this.lyricLinesIndexes.get(e.line)??-1,e.line,e);this.dispatchEvent(t)||(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}),zT(this,"style",RE.createStyleSheet({lyricPlayer:{userSelect:"none",fontSize:"var(--amll-lyric-player-font-size,max(min(6vh, 8vw), 12px))",padding:"1em",margin:"-1em",width:"100%",height:"100%",overflow:"hidden",boxSizing:"content-box",maxWidth:"100%",maxHeight:"100%",zIndex:1,color:"var(--amll-lyric-view-color,white)",mixBlendMode:"plus-lighter",contain:"strict","&:hover":{"& $lyricLine":{filter:"unset !important"}}},lyricLine:{position:"absolute",backfaceVisibility:"hidden",transformOrigin:"left",width:"var(--amll-lyric-player-width,100%)",height:"fit-content",padding:"2vh 1.05em",margin:"0 -1em",contain:"content",willChange:"filter,transform,opacity",transition:"filter 0.25s, background-color 0.25s, box-shadow 0.25s",boxSizing:"content-box",borderRadius:"8px","&:has(>*):hover":{backgroundColor:"var(--amll-lyric-view-hover-bg-color,#fff1)",boxShadow:"0 0 0 8px var(--amll-lyric-view-hover-bg-color,#fff1)"},"&:has(>*):active":{boxShadow:"0 0 0 4px var(--amll-lyric-view-hover-bg-color,#fff1)"}},"@media (max-width: 1024px)":{lyricLine:{padding:"1vh 1em"}},lyricDuetLine:{textAlign:"right",transformOrigin:"right"},lyricBgLine:{opacity:0,fontSize:"max(50%, 10px)",transition:"opacity 0.25s","&.active":{transition:"opacity 0.25s 0.25s",opacity:.4}},lyricMainLine:{transition:"opacity 0.3s 0.25s",willChange:"opacity",margin:"-1em",padding:"1em","& span":{display:"inline-block"},"& > span, span.emphasize-wrapper":{whiteSpace:"pre-wrap",willChange:"transform,display,mask-image",display:"inline-block","&.emphasize, span.emphasize":{padding:"1em",margin:"-1em","& > span":{padding:"1em",margin:"-1em"}}}},lyricSubLine:{fontSize:"max(0.5em, 10px)",transition:"opacity 0.3s 0.25s",opacity:.3},disableSpring:{"& > *":{transition:"filter 0.25s, transform 0.5s, background-color 0.25s, box-shadow 0.25s"}},interludeDots:{height:"clamp(0.5em,1vh,3em)",transformOrigin:"center",width:"fit-content",padding:"2.5% 0",position:"absolute",display:"flex",gap:"0.25em",left:"1em","& > *":{height:"clamp(0.5em,1vh,3em)",display:"inline-block",borderRadius:"50%",aspectRatio:"1 / 1",backgroundColor:"var(--amll-lyric-view-color,white)",marginRight:"4px"},"&.duet":{right:"1em",transformOrigin:"center"}},"@supports (mix-blend-mode: plus-lighter)":{lyricSubLine:{opacity:.3}},tmpDisableTransition:{transition:"none !important"}})),zT(this,"_baseFontSize",parseFloat(getComputedStyle(this.element).fontSize)),zT(this,"isPageVisible",!0),zT(this,"onPageShow",()=>{this.isPageVisible=!0,this.setCurrentTime(this.currentTime,!0)}),zT(this,"onPageHide",()=>{this.isPageVisible=!1}),this.interludeDots=new oE(this),this.bottomLine=new aE(this),this.element.setAttribute("class",this.style.classes.lyricPlayer),this.disableSpring&&this.element.classList.add(this.style.classes.disableSpring),this.rebuildStyle(),this.resizeObserver.observe(this.element),this.element.appendChild(this.interludeDots.getElement()),this.element.appendChild(this.bottomLine.getElement()),this.style.attach(),this.interludeDots.setTransform(0,200),window.addEventListener("pageshow",this.onPageShow),window.addEventListener("pagehide",this.onPageHide);let e=0,t="none",r=0,n=0,i=0,a=Symbol("amll-scroll"),s=0,o=0;this.element.addEventListener("touchstart",t=>{this.beginScrollHandler()&&(t.preventDefault(),e=this.scrollOffset,r=t.touches[0].screenY,s=r,n=Date.now(),i=0)}),this.element.addEventListener("touchmove",i=>{if(this.beginScrollHandler()){i.preventDefault();const a=i.touches[0].screenY,l=a-r,u=a-s,c=u>0?"down":u<0?"up":"none";t!==c?(t=c,e=this.scrollOffset,r=a,n=Date.now()):this.scrollOffset=e-l,s=a,o=Date.now(),this.limitScrollOffset(),this.calcLayout(!0)}}),this.element.addEventListener("touchend",t=>{if(this.beginScrollHandler()){t.preventDefault(),r=0;const s=Date.now();if(s-o>100)return this.endScrollHandler();const l=s-n;i=(this.scrollOffset-e)/l*1e3;let u=0;const c=Symbol("amll-scroll");a=c;const d=e=>{u||(u=e),a===c&&this.beginScrollHandler()&&(this.scrollOffset+=i*(e-u)/1e3,i*=.99,this.limitScrollOffset(),this.calcLayout(!0),Math.abs(i)>1&&!this.scrollBoundary.includes(this.scrollOffset)&&requestAnimationFrame(d),this.endScrollHandler(),u=e)};requestAnimationFrame(d),this.endScrollHandler()}}),this.element.addEventListener("wheel",e=>{this.beginScrollHandler()&&(e.deltaMode===e.DOM_DELTA_PIXEL?(this.scrollOffset+=e.deltaY,this.limitScrollOffset(),this.calcLayout(!0)):(this.scrollOffset+=50*e.deltaY,this.limitScrollOffset(),this.calcLayout(!1)),this.endScrollHandler())})}_getIsNonDynamic(){return this.isNonDynamic}setEnableSpring(e=!0){this.disableSpring=!e,e?this.element.classList.remove(this.style.classes.disableSpring):this.element.classList.add(this.style.classes.disableSpring),this.calcLayout(!0)}getEnableSpring(){return!this.disableSpring}setEnableScale(e=!0){this.enableScale=e,this.calcLayout()}getEnableScale(){return this.enableScale}get baseFontSize(){return this._baseFontSize}beginScrollHandler(){const e=this.allowScroll;return e&&(this.isScrolled=!0,this.invokedByScrollEvent=!0,clearTimeout(this.scrolledHandler),this.scrolledHandler=setTimeout(()=>{this.isScrolled=!1,this.scrollOffset=0},5e3)),e}endScrollHandler(){this.invokedByScrollEvent=!1}limitScrollOffset(){this.scrollOffset=Math.max(Math.min(this.scrollBoundary[1],this.scrollOffset),this.scrollBoundary[0])}getCurrentInterlude(){var e,t,r;if(this.bufferedLines.size>0)return;const n=this.currentTime+20,i=this.scrollToIndex;if(0===i){if(null!=(e=this.processedLines[0])&&e.startTime&&this.processedLines[0].startTime>n)return[n,Math.max(n,this.processedLines[0].startTime-250),-2,this.processedLines[0].isDuet]}else if(null!=(t=this.processedLines[i])&&t.endTime&&null!=(r=this.processedLines[i+1])&&r.startTime&&this.processedLines[i+1].startTime>n&&this.processedLines[i].endTime<n)return[Math.max(this.processedLines[i].endTime,n),this.processedLines[i+1].startTime,i,this.processedLines[i+1].isDuet]}rebuildStyle(){this._baseFontSize=parseFloat(getComputedStyle(this.element).fontSize);let e="";e+="--amll-lyric-player-width:",e+=this.innerSize[0]-2*this.padding,e+="px;",e+="--amll-lyric-player-height:",e+=this.innerSize[1]-2*this.padding,e+="px;",this.element.setAttribute("style",e)}setHidePassedLines(e){this.hidePassedLines=e,this.calcLayout()}setEnableBlur(e){this.enableBlur!==e&&(this.enableBlur=e,this.calcLayout())}setLyricLines(e){for(const t of e)for(const e of t.words)e.word=e.word.replace(/\s+/g," ");this.lyricLines=e;this.processedLines=e.filter(e=>e.words.reduce((e,t)=>e+t.word.trim().length,0)>0).map((e,t,r)=>{if(e.isBG)return{...e};if(0===t)return{...e,startTime:Math.max(e.startTime-750,0)};const n=r[t-1],i=r[t-2];if(null!=n&&n.isBG&&i){if(i.endTime<e.startTime)return{...e,startTime:Math.max(i.endTime,e.startTime-750)||e.startTime}}else if(null!=n&&n.endTime&&n.endTime<e.startTime)return{...e,startTime:Math.max(null==n?void 0:n.endTime,e.startTime-750)||e.startTime};return{...e}}),this.isNonDynamic=!0;for(const t of this.processedLines)if(t.words.length>1){this.isNonDynamic=!1;break}this.processedLines.forEach((e,t,r)=>{const n=r[t+1],i=e.words[e.words.length-1];i&&kE(i)&&(n?n.startTime>e.endTime&&(e.endTime=Math.min(e.endTime+1500,n.startTime)):e.endTime=e.endTime+1500)}),this.processedLines.forEach((e,t,r)=>{if(e.isBG)return;const n=r[t+1];null!=n&&n.isBG&&(n.startTime=Math.min(n.startTime,e.startTime))}),this.lyricLinesEl.forEach(e=>{e.removeMouseEventListener("click",this.onLineClickedHandler),e.removeMouseEventListener("contextmenu",this.onLineClickedHandler),e.dispose()}),this.lyricLinesEl=this.processedLines.map(e=>{const t=new PE(this,e);return t.addMouseEventListener("click",this.onLineClickedHandler),t.addMouseEventListener("contextmenu",this.onLineClickedHandler),t}),this.lyricLinesEl.forEach((e,t)=>{this.element.appendChild(e.getElement()),this.lyricLinesIndexes.set(e,t),e.updateMaskImage()}),this.interludeDots.setInterlude(void 0),this.hotLines.clear(),this.bufferedLines.clear(),this.setLinePosXSpringParams({}),this.setLinePosYSpringParams({}),this.setLineScaleSpringParams({}),this.setCurrentTime(0,!0),this.calcLayout(!0,!0)}resetScroll(){this.isScrolled=!1,this.scrollOffset=0,this.invokedByScrollEvent=!1,clearTimeout(this.scrolledHandler),this.scrolledHandler=0}calcLayout(e=!1,t=!1){var r;t&&(this.emUnit=parseFloat(getComputedStyle(this.element).fontSize),this.lyricLinesEl.forEach(e=>{const t=e.measureSize();this.lyricLinesSize.set(e,t),e.lineSize=t}),this.interludeDotsSize[0]=this.interludeDots.getElement().clientWidth,this.interludeDotsSize[1]=this.interludeDots.getElement().clientHeight,this.bottomLine.lineSize=this.bottomLine.measureSize());const n=this.getCurrentInterlude();let i=-this.scrollOffset,a=this.scrollToIndex,s=0;n?(s=n[1]-n[0],s>=5e3&&this.lyricLinesEl[n[2]+1]&&(a=n[2]+1)):this.interludeDots.setInterlude(void 0);const o=this.enableScale?.95:1,l=this.lyricLinesEl.slice(0,a).reduce((e,t)=>{var r;return e+(t.getLine().isBG?0:(null==(r=this.lyricLinesSize.get(t))?void 0:r[1])??0)},0);this.scrollBoundary[0]=-l,i-=l,i+=this.size[1]*this.alignPosition;const u=this.lyricLinesEl[a];if(u){const e=(null==(r=this.lyricLinesSize.get(u))?void 0:r[1])??0;switch(this.alignAnchor){case"bottom":i-=e;break;case"center":i-=e/2}}const c=Math.max(...this.bufferedLines);let d=0,h=.05,f=!1;this.lyricLinesEl.forEach((t,r)=>{var a,l,u;const p=this.bufferedLines.has(r),m=p||r>=this.scrollToIndex&&r<c,y=t.getLine();y.isDuet&&(this.size[0],null==(a=this.lyricLinesSize.get(t))||a[0]),!f&&s>=5e3&&(r===this.scrollToIndex&&-2===(null==n?void 0:n[2])||r===this.scrollToIndex+1)&&(f=!0,this.interludeDots.setTransform(this.padding-20,i+10),n&&this.interludeDots.setInterlude([n[0],n[1]]),i+=this.interludeDotsSize[1]+40);let g=1;g=!m&&r<=(n?n[2]:this.scrollToIndex)?this.hidePassedLines?0:this.isNonDynamic?.25:.15:p?this.isNonDynamic?.85:1:this.isNonDynamic?.25:.5,this.invokedByScrollEvent&&(g=this.isNonDynamic?.85:1);let _=0;this.enableBlur&&(m?_=0:(_=1,r<this.scrollToIndex?_+=Math.abs(this.scrollToIndex-r)/2:_+=Math.abs(r-Math.max(this.scrollToIndex,c)))),this.invokedByScrollEvent&&(_=0),t.setTransform(this.padding,i,m?1:o,g,1.5*_,e,d),y.isBG&&m?i+=(null==(l=this.lyricLinesSize.get(t))?void 0:l[1])??0:y.isBG||(i+=(null==(u=this.lyricLinesSize.get(t))?void 0:u[1])??0),i>=0&&(d+=h,h/=1.2)}),this.scrollBoundary[1]=i+this.scrollOffset-this.size[1]/2,this.bottomLine.setTransform(this.padding,i,e,d)}getCurrentTime(){return this.currentTime}getLyricLines(){return this.lyricLines}getElement(){return this.element}getBottomLineElement(){return this.bottomLine.getElement()}setAlignAnchor(e){this.alignAnchor=e}setAlignPosition(e){this.alignPosition=e}setCurrentTime(e,t=!1){if(this.currentTime=e,!this.isPageVisible||(!this._getIsNonDynamic()&&!this.supportMaskImage&&this.element.style.setProperty("--amll-player-time",`${e}`),this.isScrolled))return;const r=new Set,n=new Set,i=new Set;if(t)for(const o of this.lyricLinesEl)o.setMaskAnimationState(e);var a,s;this.hotLines.forEach(n=>{const i=this.processedLines[n];if(i){if(i.isBG)return;const a=this.processedLines[n+1];if(null!=a&&a.isBG){const s=this.processedLines[n+2],o=Math.min(i.startTime,null==a?void 0:a.startTime),l=Math.min(Math.max(i.endTime,(null==s?void 0:s.startTime)??Number.MAX_VALUE),Math.max(i.endTime,null==a?void 0:a.endTime));(o>e||l<=e)&&(this.hotLines.delete(n),r.add(n),this.hotLines.delete(n+1),r.add(n+1),t&&(this.lyricLinesEl[n].disable(e),this.lyricLinesEl[n+1].disable(e)))}else(i.startTime>e||i.endTime<=e)&&(this.hotLines.delete(n),r.add(n),t&&this.lyricLinesEl[n].disable(e))}else this.hotLines.delete(n),r.add(n),t&&this.lyricLinesEl[n].disable(e)}),this.processedLines.forEach((r,n,a)=>{var s;!r.isBG&&r.startTime<=e&&r.endTime>e&&(this.hotLines.has(n)||(this.hotLines.add(n),i.add(n),t&&this.lyricLinesEl[n].enable(e),null!=(s=a[n+1])&&s.isBG&&(this.hotLines.add(n+1),i.add(n+1),t&&this.lyricLinesEl[n+1].enable(e))))}),this.bufferedLines.forEach(r=>{this.hotLines.has(r)||(n.add(r),t&&this.lyricLinesEl[r].disable(e))}),t?(this.bufferedLines.size>0?this.scrollToIndex=Math.min(...this.bufferedLines):this.scrollToIndex=this.processedLines.findIndex(t=>t.startTime>=e),this.bufferedLines.clear(),this.hotLines.forEach(e=>this.bufferedLines.add(e)),this.calcLayout(!0)):(n.size>0||i.size>0)&&(0===n.size&&i.size>0?(i.forEach(t=>{this.bufferedLines.add(t),this.lyricLinesEl[t].enable(e)}),this.scrollToIndex=Math.min(...this.bufferedLines),this.calcLayout()):0===i.size&&n.size>0?(a=n,s=this.bufferedLines,a.size===s.size&&[...a].every(e=>s.has(e))&&(this.bufferedLines.forEach(t=>{this.hotLines.has(t)||(this.bufferedLines.delete(t),this.lyricLinesEl[t].disable(e))}),this.calcLayout())):(i.forEach(t=>{this.bufferedLines.add(t),this.lyricLinesEl[t].enable(e)}),n.forEach(t=>{this.bufferedLines.delete(t),this.lyricLinesEl[t].disable(e)}),this.bufferedLines.size>0&&(this.scrollToIndex=Math.min(...this.bufferedLines)),this.calcLayout()))}pause(){this.interludeDots.pause();for(const e of this.lyricLinesEl)e.pause()}resume(){this.interludeDots.resume();for(const e of this.lyricLinesEl)e.resume()}update(e=0){if(!this.isPageVisible)return;const t=e/1e3;this.interludeDots.update(e),this.bottomLine.update(t),this.lyricLinesEl.forEach(e=>e.update(t))}setLinePosXSpringParams(e){this.posXSpringParams={...this.posXSpringParams,...e},this.bottomLine.lineTransforms.posX.updateParams(this.posXSpringParams),this.lyricLinesEl.forEach(e=>e.lineTransforms.posX.updateParams(this.posXSpringParams))}setLinePosYSpringParams(e){this.posYSpringParams={...this.posYSpringParams,...e},this.bottomLine.lineTransforms.posY.updateParams(this.posYSpringParams),this.lyricLinesEl.forEach(e=>e.lineTransforms.posY.updateParams(this.posYSpringParams))}setLineScaleSpringParams(e){this.scaleSpringParams={...this.scaleSpringParams,...e},this.lyricLinesEl.forEach(e=>e.lineTransforms.scale.updateParams(this.scaleSpringParams))}dispose(){this.element.remove(),this.resizeObserver.disconnect(),this.style.detach(),this.lyricLinesEl.forEach(e=>e.dispose()),window.removeEventListener("pageshow",this.onPageShow),this.bottomLine.dispose(),this.interludeDots.dispose()}}const NE=n({inheritAttrs:!1,__name:"LyricPlayer",props:{disabled:{type:Boolean},playing:{type:Boolean},alignAnchor:{},alignPosition:{},enableSpring:{type:Boolean},enableBlur:{type:Boolean},enableScale:{type:Boolean},hidePassedLines:{type:Boolean},lyricLines:{},currentTime:{},linePosXSpringParams:{},linePosYSpringParams:{},lineScaleSpringParams:{},bottomLine:{}},emits:["line-click","line-contextmenu"],setup(e,{expose:t,emit:r}){const n=e,i=r,a=s(),o=s(),l=e=>i("line-click",e),u=e=>i("line-contextmenu",e);return d(()=>{a.value&&(o.value=new DE,a.value.appendChild(o.value.getElement()),o.value.addEventListener("line-click",l),o.value.addEventListener("line-contextmenu",u))}),V(()=>{o.value&&(o.value.removeEventListener("line-click",l),o.value.removeEventListener("line-contextmenu",u),o.value.dispose())}),pr(e=>{if(!n.disabled){let t=!1,r=-1;const n=e=>{var i;t||(-1===r&&(r=e),null==(i=o.value)||i.update(e-r),r=e,requestAnimationFrame(n))};requestAnimationFrame(n),e(()=>{t=!0})}}),pr(()=>{var e,t,r;void 0!==n.playing?n.playing?null==(e=o.value)||e.resume():null==(t=o.value)||t.pause():null==(r=o.value)||r.resume()}),pr(()=>{var e;void 0!==n.alignAnchor&&(null==(e=o.value)||e.setAlignAnchor(n.alignAnchor))}),pr(()=>{var e;void 0!==n.hidePassedLines&&(null==(e=o.value)||e.setHidePassedLines(n.hidePassedLines))}),pr(()=>{var e;void 0!==n.alignPosition&&(null==(e=o.value)||e.setAlignPosition(n.alignPosition))}),pr(()=>{var e,t;void 0!==n.enableSpring?null==(e=o.value)||e.setEnableSpring(n.enableSpring):null==(t=o.value)||t.setEnableSpring(!0)}),pr(()=>{var e,t;void 0!==n.enableBlur?null==(e=o.value)||e.setEnableBlur(n.enableBlur):null==(t=o.value)||t.setEnableBlur(!0)}),pr(()=>{var e,t;void 0!==n.enableScale?null==(e=o.value)||e.setEnableScale(n.enableScale):null==(t=o.value)||t.setEnableScale(!0)}),pr(()=>{var e;void 0!==n.lyricLines&&(null==(e=o.value)||e.setLyricLines(n.lyricLines))}),pr(()=>{var e;void 0!==n.currentTime&&(null==(e=o.value)||e.setCurrentTime(n.currentTime))}),pr(()=>{var e;void 0!==n.linePosXSpringParams&&(null==(e=o.value)||e.setLinePosXSpringParams(n.linePosXSpringParams))}),pr(()=>{var e;void 0!==n.linePosYSpringParams&&(null==(e=o.value)||e.setLinePosYSpringParams(n.linePosYSpringParams))}),pr(()=>{var e;void 0!==n.lineScaleSpringParams&&(null==(e=o.value)||e.setLineScaleSpringParams(n.lineScaleSpringParams))}),t({lyricPlayer:o,wrapperEl:a}),(e,t)=>{var r,i;return f(),F(De,null,[N("div",mr({ref_key:"wrapperRef",ref:a},e.$attrs),null,16),null!=(r=o.value)&&r.getBottomLineElement()&&n.bottomLine?(f(),h(yr,{key:0,to:null==(i=o.value)?void 0:i.getBottomLineElement()},null,8,["to"])):me("",!0)],64)}}}),BE=B(n({__name:"MainAMLyric",setup(e){const t=Ke(),n=i(),a=r(),l=s(null),u=s($l.getSeek()),{pause:c,resume:p}=L(()=>{const e=$l.getSeek();u.value=Math.floor(1e3*e)}),y=o(()=>n.mainColor?`rgb(${n.mainColor})`:"rgb(239, 239, 239)"),g=o(()=>t.songLyric.yrcData?.length&&a.showYrc?t.songLyric.yrcAMData:t.songLyric.lrcAMData),b=e=>{if(!e?.line?.lyricLine?.startTime)return;const t=Et(e.line.lyricLine.startTime);$l.setSeek(t),$l.play()};return d(()=>{p()}),O(()=>{c()}),(e,t)=>(f(),h(pe,null,{default:_(()=>[(f(),F("div",{key:m(g)?.[0]?.startTime,class:he(["lyric-am",{pure:m(n).pureLyricMode}])},[v(m(NE),{ref_key:"lyricPlayerRef",ref:l,lyricLines:m(g),currentTime:m(u),playing:m(n).playStatus,enableSpring:m(a).useAMSpring,enableScale:m(a).useAMSpring,alignPosition:"center"===m(a).lyricsScrollPosition?.5:.2,enableBlur:m(a).lyricsBlur,style:D({"--amll-lyric-view-color":m(y),"--amll-lyric-player-font-size":m(a).lyricFontSize+"px","font-weight":m(a).lyricFontBold?"bold":"normal","font-family":"follow"!==m(a).LyricFont?m(a).LyricFont:""}),class:"am-lyric",onLineClick:b},null,8,["lyricLines","currentTime","playing","enableSpring","enableScale","alignPosition","enableBlur","style"])],2))]),_:1}))}}),[["__scopeId","data-v-2d9d8445"]]),UE=""+new URL("../images/annual.png?assest",import.meta.url).href,jE=[{emoji:"😄",emjName:"大笑"},{emoji:"😊",emjName:"可爱"},{emoji:"😄",emjName:"憨笑"},{emoji:"😘",emjName:"亲亲"},{emoji:"😄",emjName:"流泪"},{emoji:"😊",emjName:"亲"},{emoji:"😐",emjName:"呆"},{emoji:"😢",emjName:"哀伤"},{emoji:"😁",emjName:"呲牙"},{emoji:"😝",emjName:"吐舌"},{emoji:"😄",emjName:"撇嘴"},{emoji:"😡",emjName:"怒"},{emoji:"😏",emjName:"奸笑"},{emoji:"😅",emjName:"汗"},{emoji:"😣",emjName:"痛苦"},{emoji:"😱",emjName:"惶恐"},{emoji:"🤒",emjName:"生病"},{emoji:"😷",emjName:"口罩"},{emoji:"😭",emjName:"大哭"},{emoji:"😵",emjName:"晕"},{emoji:"😡",emjName:"发怒"},{emoji:"😀",emjName:"开心"},{emoji:"😈",emjName:"鬼脸"},{emoji:"😠",emjName:"皱眉"},{emoji:"😷",emjName:"流感"},{emoji:"❤️",emjName:"爱心"},{emoji:"💔",emjName:"心碎"},{emoji:"💗",emjName:"钟情"},{emoji:"⭐",emjName:"星星"},{emoji:"💢",emjName:"生气"},{emoji:"💩",emjName:"便便"},{emoji:"💪",emjName:"强"},{emoji:"💤",emjName:"弱"},{emoji:"🙏",emjName:"拜"},{emoji:"🤝",emjName:"牵手"},{emoji:"💃",emjName:"跳舞"},{emoji:"🚫",emjName:"禁止"},{emoji:"👉",emjName:"这边"},{emoji:"😍",emjName:"爱意"},{emoji:"💏",emjName:"示爱"},{emoji:"💋",emjName:"嘴唇"},{emoji:"🐶",emjName:"狗"},{emoji:"😸",emjName:"猫"},{emoji:"🐷",emjName:"猪"},{emoji:"🐰",emjName:"兔子"},{emoji:"🐔",emjName:"小鸡"},{emoji:"🐓",emjName:"公鸡"},{emoji:"👻",emjName:"幽灵"},{emoji:"🎅",emjName:"圣诞"},{emoji:"👽",emjName:"外星"},{emoji:"💎",emjName:"钻石"},{emoji:"🎁",emjName:"礼物"},{emoji:"👦",emjName:"男孩"},{emoji:"👧",emjName:"女孩"},{emoji:"🍰",emjName:"蛋糕"},{emoji:"🔞",emjName:"18"},{emoji:"🔵",emjName:"圈"},{emoji:"❌",emjName:"叉"},{emoji:"😱",emjName:"惊恐"},{emoji:"😍",emjName:"色"}],GE=(e,t=0,r=1,n=20,i=1,a)=>gt({url:"/comment/new",params:{id:e,type:t,pageNo:r,pageSize:n,sortType:i,cursor:a,timestamp:Date.now()}}),zE={key:0,class:"user"},HE={class:"avatar"},VE={key:0,class:"annual",alt:"annual",src:UE,title:"网易音乐人"},$E=["src"],XE={class:"data"},qE={class:"content"},WE={key:0,class:"reply"},YE={class:"item"},KE=["title"],ZE=["onClick"],QE=n({__name:"CommentList",props:{data:{},loading:{type:Boolean},type:{},loadMore:{type:Boolean},transparent:{type:Boolean}},emits:["loadMore"],setup(e,{emit:t}){const r=e,n=t,i=e=>{try{if(!e)return;e=e.trim();const t=/\[(\S+?)\]/g;return e.replace(t,(e,t)=>{const r=jE.find(e=>e.emjName===t);return r?r.emoji:e})}catch(t){return console.error(t),e}},a=Q(async e=>{if(!K())return void dd();const t=e.liked,n=await((e,t=1,r=0)=>gt({url:"/resource/like",params:{id:e,t:t,type:r,timestamp:Date.now()}}))(e.id,t?2:1,r.type);200===n.code?(e.liked=!t,e.likedCount&&(e.likedCount+=t?-1:1)):window.$message.error(n.msg||"评论点赞失败")},300);return(e,t)=>{const r=ye,s=_e,o=ae,l=Se,u=se,c=ve,d=pt;return f(),h(pe,{name:"fade",mode:"out-in"},{default:_(()=>[e.data.length>0?(f(),h(l,{key:0,size:20,class:he(["comment-list",{transparent:e.transparent}]),vertical:""},{default:_(()=>[(f(!0),F(De,null,Ne(e.data,(n,u)=>(f(),h(l,{key:u,size:20,class:"comments"},{default:_(()=>[e.transparent?me("",!0):(f(),F("div",zE,[N("div",HE,[v(r,{src:n.user?.avatarUrl&&n.user.avatarUrl.replace(/^http:/,"https:")+"?param=100y100",class:"cover","preview-disabled":"",lazy:"",onLoad:m(ge)},{placeholder:_(()=>t[1]||(t[1]=[N("div",{class:"cover-loading"},[N("img",{src:$s,class:"loading-img",alt:"loading-img"})],-1)])),_:2},1032,["src","onLoad"]),n.user.isAnnualCount?(f(),F("img",VE)):me("",!0)]),n.user.vipLevel&&n.user.vipLevel>0?(f(),F("img",{key:0,src:n.user.vipIconUrl&&n.user.vipIconUrl.replace(/^http:/,"https:"),class:"vip",alt:"vip",title:"黑胶会员"},null,8,$E)):me("",!0)])),N("div",XE,[N("div",qE,[v(s,{class:"name"},{default:_(()=>[oe(le(n.user.name||"未知用户名")+"：",1)]),_:2},1024),v(s,{class:"text"},{default:_(()=>[oe(le(i(n.content)),1)]),_:2},1024)]),n.beReplied?(f(),F("div",WE,[v(s,{class:"name",depth:3},{default:_(()=>[oe(" @ "+le(n.beReplied.user.name||"未知用户名")+"： ",1)]),_:2},1024),v(s,{class:"text"},{default:_(()=>[oe(le(i(n.beReplied.content)),1)]),_:2},1024)])):me("",!0),v(l,{class:"meta","align-items":"center"},{default:_(()=>[N("div",YE,[v(o,{name:"Time",depth:3}),v(s,{depth:3},{default:_(()=>[oe(le(m(gr)(n.time)),1)]),_:2},1024)]),n.ip?(f(),F("div",{key:0,title:n.ip.ip,class:"item"},[v(o,{name:"IP",depth:3}),v(s,{depth:3},{default:_(()=>[oe(le(n.ip.location),1)]),_:2},1024)],8,KE)):me("",!0),N("div",{class:"item like",onClick:e=>m(a)(n)},[v(o,{name:n?.liked?"ThumbUp":"ThumbUpOff",depth:n?.liked?1:3},null,8,["name","depth"]),v(s,{depth:n?.liked?1:3},{default:_(()=>[oe(le(n.likedCount),1)]),_:2},1032,["depth"])],8,ZE)]),_:2},1024)])]),_:2},1024))),128)),e.loadMore?(f(),h(l,{key:0,class:"load-more",justify:"center"},{default:_(()=>[v(u,{loading:e.loading,size:"large",strong:"",secondary:"",round:"",onClick:t[0]||(t[0]=e=>n("loadMore"))},{default:_(()=>t[2]||(t[2]=[oe(" 加载更多 ")])),_:1,__:[2]},8,["loading"])]),_:1})):me("",!0)]),_:1},8,["class"])):e.loading?(f(),F("div",{key:1,class:he(["comment-list",{transparent:e.transparent}])},[v(c,{repeat:20})],2)):(f(),h(d,{key:2,description:"空空如也，怎么什么都没有啊",size:"large"}))]),_:1})}}}),JE=B(QE,[["__scopeId","data-v-035217d4"]]),eA={class:"player-comment"},tA={class:"placeholder"},rA={class:"title"},nA={class:"placeholder"},iA={class:"title"},aA=n({__name:"PlayerComment",setup(e){const t=Ke(),r=o(()=>t.playSong.id),n=o(()=>"radio"===t.playSong.type?4:0),i=s(!0),a=s([]),l=s([]),u=s(1),c=s(!0),h=async()=>{if(!r.value)return;const e=await((e,t=0,r=20,n=0,i)=>gt({url:"/comment/hot",params:{id:e,type:t,limit:r,offset:n,before:i,timestamp:Date.now()}}))(r.value),t=_r(e.hotComments);l.value=t?.length>0?t:null},p=async()=>{if(!r.value)return;i.value=!0;const e=u.value>1&&a.value?.length>0?a.value[a.value.length-1]?.time:void 0,t=await GE(r.value,n.value,u.value,20,3,e);if(Qe(t.data?.comments))return c.value=!1,void(i.value=!1);const s=_r(t.data.comments);a.value=a.value.concat(s),c.value=t.data.hasMore,i.value=!1},y=()=>{u.value+=1,p()};return d(()=>{h(),p()}),(e,t)=>{const r=ae,s=JE,o=Ye;return f(),F("div",eA,[v(o,{ref:"lyricScroll",class:"lyric-scroll"},{default:_(()=>[m(l)?(f(),F(De,{key:0},[N("div",tA,[N("div",rA,[v(r,{name:"Fire"}),t[0]||(t[0]=N("span",null,"热门评论",-1))])]),v(s,{data:m(l),loading:0===m(l)?.length,type:m(n),transparent:""},null,8,["data","loading","type"])],64)):me("",!0),N("div",nA,[N("div",iA,[v(r,{name:"Message"}),t[1]||(t[1]=N("span",null,"全部评论",-1))])]),v(s,{data:m(a),loading:m(i),type:m(n),loadMore:m(c),transparent:"",onLoadMore:y},null,8,["data","loading","type","loadMore"]),t[2]||(t[2]=N("div",{class:"placeholder"},null,-1))]),_:1,__:[2]},512)])}}}),sA=B(aA,[["__scopeId","data-v-fcc88bdd"]]),oA={class:"name"},lA={class:"name-text text-hidden"},uA={key:0,class:"alia"},cA={key:1,class:"artists"},dA={key:0,class:"ar-list"},hA=["onClick"],fA={key:1,class:"ar-list"},pA={class:"ar"},mA={key:2,class:"artists"},yA={class:"ar-list"},gA={class:"ar"},_A={key:3,class:"album"},vA={key:1,class:"name-text text-hidden"},bA={class:"name-text text-hidden"},wA=B(n({__name:"PlayerData",props:{center:{type:Boolean},theme:{}},setup(e){const t=Ds(),n=Ke(),a=i(),s=r(),o=Q(e=>{e&&(a.showFullPlayer=!1,t.push(e))},300,{leading:!0,trailing:!1});return(e,t)=>{const r=ae,i=ur;return f(),F("div",{class:he(["player-data",m(s).playerType,{center:e.center}])},[N("div",oA,[N("span",lA,le(m(n).playSong.name||"未知曲目"),1),m(a).playUblock?(f(),h(i,{key:0,"show-arrow":!1,placement:"right-start",raw:""},{trigger:_(()=>[v(r,{depth:3,name:"CloudLockOpen",size:"22"})]),default:_(()=>[N("div",{style:D({"--theme":e.theme}),class:"player-tip"},t[2]||(t[2]=[N("span",null,"该歌曲暂时无法播放，为您采用其他音源，可能会与原曲存在差别",-1)]),4)]),_:1})):me("",!0),m(n).playSong.pc?(f(),h(r,{key:1,depth:3,name:"Cloud",size:"22"})):me("",!0)]),m(n).playSong.alia?(f(),F("span",uA,le(m(n).playSong.alia),1)):me("",!0),"radio"!==m(n).playSong.type?(f(),F("div",cA,[v(r,{depth:3,name:"Artist",size:"20"}),Array.isArray(m(n).playSong.artists)?(f(),F("div",dA,[(f(!0),F(De,null,Ne(m(n).playSong.artists,e=>(f(),F("span",{key:e.id,class:"ar",onClick:t=>m(o)({name:"artist",query:{id:e.id}})},le(e.name),9,hA))),128))])):(f(),F("div",fA,[N("span",pA,le(m(n).playSong.artists||"未知艺术家"),1)]))])):(f(),F("div",mA,[v(r,{depth:3,name:"Artist",size:"20"}),N("div",yA,[N("span",gA,le(m(n).playSong.dj?.creator||"未知艺术家"),1)])])),"radio"!==m(n).playSong.type?(f(),F("div",_A,[v(r,{depth:3,name:"Album",size:"20"}),m(et)(m(n).playSong.album)?(f(),F("span",{key:0,class:"name-text text-hidden",onClick:t[0]||(t[0]=e=>m(o)({name:"album",query:{id:m(n).playSong.album.id}}))},le(m(n).playSong.album?.name||"未知专辑"),1)):(f(),F("span",vA,le(m(n).playSong.album||"未知专辑"),1))])):me("",!0),"radio"===m(n).playSong.type?(f(),F("div",{key:4,class:"dj",onClick:t[1]||(t[1]=e=>m(o)({name:"dj",query:{id:m(n).playSong.dj?.id}}))},[v(r,{depth:3,name:"Podcast",size:"20"}),N("span",bA,le(m(n).playSong.dj?.name||"播客电台"),1)])):me("",!0)],2)}}}),[["__scopeId","data-v-d1c3293c"]]),xA=["src"],IA=["src","alt"],TA=B(n({__name:"s-image",props:{src:{},defaultSrc:{default:"/images/song.jpg?assest"},alt:{}},emits:["load","error","update:show"],setup(e,{emit:t}){const r=e,n=t,i=s(),a=s(),o=s(),l=s(!1),u=ze(o),c=e=>{l.value=!0,n("load",e)},d=e=>{l.value=!1,a.value=r.defaultSrc,n("error",e)};return vr(u,e=>{n("update:show",e),e&&(a.value=r.src)}),(e,t)=>(f(),h(pe,{name:"fade",mode:"out-in"},{default:_(()=>[(f(),F("div",{ref_key:"imgContainer",ref:o,key:e.src,class:"s-image"},[v(pe,{name:"fade"},{default:_(()=>[m(l)?me("",!0):(f(),F("img",{key:0,src:e.defaultSrc,class:"loading",alt:"loading"},null,8,xA))]),_:1}),e.src?(f(),F("img",{ref_key:"imgRef",ref:i,src:m(a),key:m(a),alt:e.alt||"image",class:he(["cover",{loaded:m(l)}]),onLoad:c,onError:d},null,42,IA)):me("",!0)]))]),_:1}))}}),[["__scopeId","data-v-3191caa6"]]),EA={key:0,class:"pointer",src:""+new URL("../images/pointer.png?assest",import.meta.url).href,alt:"pointer"},AA=["src"],SA=n({__name:"PlayerCover",setup(e){const t=Ke(),n=i(),a=r(),o=s(""),l=s(!1),c=s(null),{start:p,stop:y}=br(()=>{l.value=!0,c.value?.play()},2e3,{immediate:!1}),g=async()=>{if(1!==K()||t.playSong.path||!t.playSong.id||!a.dynamicCover||"cover"!==a.playerType)return;y(),l.value=!1;const e=await wr(t.playSong.id);!Qe(e.data)&&e?.data?.videoPlayUrl?o.value=e.data.videoPlayUrl:o.value=""},b=()=>{l.value=!1,p()};return u(()=>[t.playSong.id,a.dynamicCover,a.playerType],()=>g()),d(g),(e,r)=>{const i=TA;return f(),F("div",{class:he(["player-cover",m(a).playerType,{playing:m(n).playStatus}])},["record"===m(a).playerType?(f(),F("img",EA)):me("",!0),(f(),h(i,{key:m(t).getSongCover(),src:m(t).getSongCover("l"),class:"cover-img"},null,8,["src"])),v(pe,{name:"fade",mode:"out-in"},{default:_(()=>[m(o)&&m(a).dynamicCover&&"cover"===m(a).playerType?(f(),F("video",{key:0,ref_key:"videoRef",ref:c,src:m(o),class:he(["dynamic-cover",{loaded:m(l)}]),muted:"",autoplay:"",onLoadeddata:r[0]||(r[0]=e=>l.value=!0),onEnded:b},null,42,AA)):me("",!0)]),_:1})],2)}}}),kA=B(SA,[["__scopeId","data-v-979036b1"]]),CA={class:"player-menu"},PA={class:"menu-content"},RA=B(n({__name:"PlayerMenu",setup(e){const t=Ke(),r=i(),{isFullscreen:n,toggle:a}=xr();return(e,i)=>{const s=ae,o=Se;return f(),F("div",CA,[v(pe,{name:"fade",mode:"out-in"},{default:_(()=>[ar(N("div",PA,[v(o,{class:"left"},{default:_(()=>[m(t).isHasLrc&&"radio"!==m(t).playSong.type?(f(),F("div",{key:0,class:he(["menu-icon",{open:m(r).pureLyricMode}]),onClick:i[0]||(i[0]=e=>m(r).pureLyricMode=!m(r).pureLyricMode)},[v(s,{name:"TextPlay"})],2)):me("",!0)]),_:1}),i[3]||(i[3]=N("div",{class:"drag-dom"},null,-1)),v(o,{class:"right",justify:"end"},{default:_(()=>[N("div",{class:"menu-icon",onClick:i[1]||(i[1]=(...e)=>m(a)&&m(a)(...e))},[v(s,{name:m(n)?"FullscreenExit":"Fullscreen"},null,8,["name"])]),m(n)?me("",!0):(f(),F("div",{key:0,class:"menu-icon",onClick:i[2]||(i[2]=e=>m(r).showFullPlayer=!1)},[v(s,{name:"Down"})]))]),_:1})],512),[[cr,m(r).playerMetaShow]])]),_:1})])}}}),[["__scopeId","data-v-ebe46816"]]),MA=n({__name:"PlayerBackground",props:{album:{},albumIsVideo:{type:Boolean},fps:{},playing:{type:Boolean},flowSpeed:{},hasLyric:{type:Boolean},lowFreqVolume:{},renderScale:{},renderer:{type:Function}},setup(e,{expose:t}){const r=e,n=s(),i=s();return pr(()=>{r.album&&i.value?.setAlbum(r.album,r.albumIsVideo)}),pr(()=>{r.fps&&i.value?.setFPS(r.fps)}),pr(()=>{r.playing?i.value?.pause():i.value?.resume()}),pr(()=>{r.flowSpeed&&i.value?.setFlowSpeed(r.flowSpeed)}),pr(()=>{r.renderScale&&i.value?.setRenderScale(r.renderScale)}),pr(()=>{r.lowFreqVolume&&i.value?.setLowFreqVolume(r.lowFreqVolume)}),pr(()=>{void 0!==r.hasLyric&&i.value?.setHasLyric(r.hasLyric??!0)}),t({bgRender:i,wrapperEl:n}),d(()=>{(()=>{if(!n.value)return;i.value=rE.new(r.renderer??tE);const e=i.value.getElement();e.style.width="100%",e.style.height="100%",n.value.appendChild(e)})()}),V(()=>{i.value&&i.value.dispose()}),(e,t)=>(f(),F("div",{ref_key:"wrapperRef",ref:n,class:"player-background"},null,512))}}),LA=["src"],OA={class:"lrc"},FA={key:0,class:"lrc-tran"},DA={key:0,class:"content-left"},NA={key:1,class:"content-right"},BA=B(n({__name:"FullPlayer",setup(e){const t=Ke(),n=i(),a=r(),s=o(()=>!t.playSong.path&&n.showPlayerComment),l=o(()=>`\n  ${t.playSong?.id??0}-\n  ${t.isHasLrc}-\n  ${n.pureLyricMode}-\n  ${s.value}`),u=o(()=>!t.isHasLrc||n.pureLyricMode||"record"===a.playerType||"radio"===t.playSong.type||s.value),c=o(()=>{const e=t.songLyric.yrcData?.length&&a.showYrc?t.songLyric.yrcData[n.lyricIndex]:t.songLyric.lrcData[n.lyricIndex];return{content:e?.content,tran:a.showTran&&e?.tran}}),{isPending:p,start:y,stop:g}=br(()=>{n.playerMetaShow=!1},3e3),b=Ir(()=>{n.playerMetaShow=!0,p.value||y()},300,{trailing:!1}),w=()=>{g(),n.playerMetaShow=!0},x=()=>{n.playerMetaShow=!1,g()};return d(()=>{n.fullPlayerActive=!0,a.showSpectrums&&$l.initSpectrumData(),Y&&a.preventSleep&&window.electron.ipcRenderer.send("prevent-sleep",!0)}),O(()=>{Y&&window.electron.ipcRenderer.send("prevent-sleep",!1)}),(e,r)=>{const i=MA,o=RA,d=kA,p=wA,y=sA,g=BE,I=$d,T=Pd,E=Zi;return ar((f(),F("div",{style:D({"--main-color":m(n).mainColor,cursor:m(n).playerMetaShow?"auto":"none"}),class:"full-player",onMouseleave:x},[v(pe,{name:"fade",mode:"out-in"},{default:_(()=>[(f(),F("div",{key:m(t).playSong?.id??0,class:he(["overlay",m(a).playerBackgroundType])},["blur"===m(a).playerBackgroundType?(f(),F("img",{key:0,src:m(t).songCover,class:"overlay-img",alt:"cover"},null,8,LA)):"animation"===m(a).playerBackgroundType?(f(),h(i,{key:1,album:m(t).songCover,fps:60},null,8,["album"])):me("",!0)],2))]),_:1}),v(pe,{name:"fade",mode:"out-in"},{default:_(()=>[m(s)&&!m(n).pureLyricMode?(f(),F("div",{key:m(c).content,class:"lrc-instant"},[N("span",OA,le(m(c).content),1),m(c).tran?(f(),F("span",FA,le(m(c).tran),1)):me("",!0)])):me("",!0)]),_:1}),v(o,{onMouseenter:Wt(w,["stop"]),onMouseleave:Wt(m(b),["stop"])},null,8,["onMouseleave"]),v(pe,{name:"fade",mode:"out-in"},{default:_(()=>[(f(),F("div",{key:m(l),class:he(["player-content",{pure:m(n).pureLyricMode,"show-comment":m(s)}]),onMousemove:r[0]||(r[0]=(...e)=>m(b)&&m(b)(...e))},[m(n).pureLyricMode&&m(t).isHasLrc&&"radio"!==m(t).playSong.type?me("",!0):(f(),F("div",DA,[v(d),v(p,{center:m(u),theme:m(n).mainColor},null,8,["center","theme"])])),v(pe,{name:"fade",mode:"out-in"},{default:_(()=>[m(s)&&!m(n).pureLyricMode?(f(),h(y,{key:0})):m(t).isHasLrc?(f(),F("div",NA,[m(a).useAMLyrics?(f(),h(g,{key:0})):(f(),h(I,{key:1}))])):me("",!0)]),_:1})],34))]),_:1}),v(T,{onMouseenter:Wt(w,["stop"]),onMouseleave:Wt(m(b),["stop"])},null,8,["onMouseleave"]),m(a).showSpectrums?(f(),h(E,{key:0,color:m(n).mainColor?`rgb(${m(n).mainColor})`:"rgb(239 239 239)",show:!m(n).playerMetaShow,height:60},null,8,["color","show"])):me("",!0)],36)),[[cr,m(n).showFullPlayer]])}}}),[["__scopeId","data-v-58b63796"]]),UA={class:"empty"},jA=B(n({__name:"TextContainer",props:{text:{},speed:{},delay:{}},setup(e){const t=e,r=s(null),n=s(null),i=s(null),a=s(null),o=s(!1),{width:l}=Tr(i),c=()=>{if(r.value&&i.value){const e=r.value.offsetWidth,t=l.value;o.value=e>t+2}h()},h=()=>{o.value?g():_()};let p=null,y=null;const g=()=>{if(!(r.value&&i.value&&a.value&&n.value))return;const e=t.speed||.5;let s=0;const o=()=>{r.value&&i.value&&a.value&&n.value&&(s<=-r.value.scrollWidth-120?s=0:s-=e,a.value.style.transform=`translateX(${s}px)`,p=requestAnimationFrame(o))};y=setTimeout(()=>{o()},t.delay||3e3)},_=()=>{null!==p&&(cancelAnimationFrame(p),p=null),null!==y&&(clearTimeout(y),y=null),a.value&&(a.value.style.transform="translateX(0)")};return u(()=>[t.text,l.value,n.value],()=>{H(c)}),u(o,()=>{h()}),d(()=>{H(c)}),V(()=>{_()}),(e,t)=>(f(),F("div",{ref_key:"textContainerRef",ref:i,key:e.text.length,class:"text-container"},[N("span",UA,le(e.text),1),N("div",{ref_key:"scrollWrapperRef",ref:a,class:"scroll-wrapper"},[N("span",{ref_key:"textRef",ref:r,class:"text"},le(e.text),513),m(o)?(f(),F("span",{key:0,ref_key:"textCloneRef",ref:n,class:"text"},le(e.text),513)):me("",!0)],512)]))}}),[["__scopeId","data-v-d016d66c"]]),GA={class:"play-data"},zA={class:"data"},HA={key:1,class:"artists"},VA={class:"play-control"},$A={key:0,class:"play-icon"},XA={key:1,class:"play-icon"},qA={class:"play-icon"},WA={class:"time"},YA=n({__name:"MainPlayer",setup(e){const t=Ds(),n=ke(),a=Ke(),l=i(),u=r(),c=s([{label:"列表循环",key:"repeat",icon:er("Repeat")},{label:"单曲循环",key:"repeat-once",icon:er("RepeatSong")},{label:"随机播放",key:"shuffle",icon:er("Shuffle")}]),d=o(()=>{const e=a.playSong,r=!!e?.mv&&0!==e.mv,n="song"===e.type,i=!!e?.path;return[{key:"playlist-add",label:"添加到歌单",props:{onClick:()=>pd([e],i)},icon:er("AddList")},{key:"mv",label:"观看 MV",show:n&&r,props:{onClick:()=>t.push({name:"video",query:{id:a.playSong.mv,type:"mv"}})},icon:er("Video",{size:18})},{key:"download",label:"下载歌曲",show:!i&&n,props:{onClick:()=>vd(a.playSong)},icon:er("Download")},{key:"comment",label:"查看评论",show:!i,props:{onClick:()=>{l.$patch({showFullPlayer:!0,showPlayerComment:!0})}},icon:er("Message")}]}),p=()=>{const e=dr(l.progress,l.duration);l.playStatus=!0,$l.setSeek(e),$l.play()},y=o(()=>a.isHasLrc&&u.barLyricShow&&"radio"!==a.playSong.type&&l.playStatus&&-1!==l.lyricIndex),g=o(()=>{const e=a.songLyric.yrcData?.length&&u.showYrc?a.songLyric.yrcData[l.lyricIndex]:a.songLyric.lrcData[l.lyricIndex];return e?.tran&&u.showTran?`${e?.content}（ ${e?.tran} ）`:e?.content});return(e,t)=>{const r=lr,i=ye,s=ae,o=jA,b=Er,w=_e,x=se,I=ur,T=Ar,E=Se,A=ir("debounce");return f(),F("div",{class:he(["main-player",{show:m(a).isHasPlayer&&m(l).showPlayBar}])},[v(r,{value:m(l).progress,"onUpdate:value":t[0]||(t[0]=e=>m(l).progress=e),step:.01,min:0,max:100,tooltip:!1,keyboard:!1,marks:m(l).chorus&&m(l).progress<=m(l).chorus?{[m(l).chorus]:""}:void 0,class:"player-slider",onDragstart:t[1]||(t[1]=e=>m($l).pause(!1)),onDragend:p},null,8,["value","marks"]),N("div",GA,[v(pe,{name:"fade",mode:"out-in"},{default:_(()=>[(f(),F("div",{key:m(a).playSong.cover,class:"cover",onClick:t[2]||(t[2]=Wt(e=>m(l).showFullPlayer=!0,["stop"]))},[v(i,{src:m(a).songCover,alt:m(a).songCover,class:"cover-img","preview-disabled":"",onLoad:m(ge)},{placeholder:_(()=>t[15]||(t[15]=[N("div",{class:"cover-loading"},[N("img",{src:xo,class:"loading-img",alt:"loading-img"})],-1)])),_:1},8,["src","alt","onLoad"]),v(s,{name:"Zoom",size:30})]))]),_:1}),v(pe,{name:"left-sm",mode:"out-in"},{default:_(()=>[(f(),F("div",{key:m(a).playSong.id,class:"info"},[N("div",zA,[(f(),h(o,{key:m(a).playSong.name,text:m(a).playSong.name,speed:.2,class:"name"},null,8,["text"])),"radio"!==m(a).playSong.type?(f(),h(s,{key:0,name:m(n).isLikeSong(m(a).playSong.id)?"Favorite":"FavoriteBorder",size:20,class:"like",onClick:t[3]||(t[3]=e=>m(sr)(m(a).playSong,!m(n).isLikeSong(m(a).playSong.id)))},null,8,["name"])):me("",!0),v(b,{options:m(d),trigger:"click",placement:"top-start"},{default:_(()=>[v(s,{name:"FormatList",size:20,depth:2,class:"more"})]),_:1},8,["options"])]),v(pe,{name:"fade",mode:"out-in"},{default:_(()=>[m(y)&&m(g)?(f(),h(o,{key:m(g),text:m(g),speed:.2,delay:500,class:"lyric"},null,8,["text"])):(f(),F("div",HA,["radio"===m(a).playSong.type?(f(),h(w,{key:0,class:"ar-item"},{default:_(()=>t[16]||(t[16]=[oe("播客电台")])),_:1,__:[16]})):Array.isArray(m(a).playSong.artists)?(f(!0),F(De,{key:1},Ne(m(a).playSong.artists,(e,r)=>(f(),h(w,{key:r,class:"ar-item",onClick:t[4]||(t[4]=e=>m(hd)(m(a).playSong.artists))},{default:_(()=>[oe(le(e.name),1)]),_:2},1024))),128)):(f(),h(w,{key:2,class:"ar-item",onClick:t[5]||(t[5]=e=>m(hd)(m(a).playSong.artists))},{default:_(()=>[oe(le(m(a).playSong.artists||"未知艺术家"),1)]),_:1}))]))]),_:1})]))]),_:1})]),N("div",VA,[m(l).personalFmMode?ar((f(),F("div",$A,[v(s,{class:"icon",size:18,name:"ThumbDown"})])),[[A,()=>m($l).personalFMTrash(m(a).personalFMSong?.id)]]):ar((f(),F("div",XA,[v(s,{size:26,name:"SkipPrev"})])),[[A,()=>m($l).nextOrPrev("prev")]]),ar((f(),h(x,{loading:m(l).playLoading,focusable:!1,keyboard:!1,class:"play-pause",type:"primary",strong:"",secondary:"",circle:""},{icon:_(()=>[v(pe,{name:"fade",mode:"out-in"},{default:_(()=>[(f(),h(s,{key:m(l).playStatus?"Pause":"Play",name:m(l).playStatus?"Pause":"Play",size:28},null,8,["name"]))]),_:1})]),_:1},8,["loading"])),[[A,()=>m($l).playOrPause()]]),ar((f(),F("div",qA,[v(s,{size:26,name:"SkipNext"})])),[[A,()=>m($l).nextOrPrev("next")]])]),v(pe,{name:"fade",mode:"out-in"},{default:_(()=>[(f(),h(E,{key:m(l).personalFmMode?"fm":"normal",size:[8,0],class:"play-menu",justify:"end"},{default:_(()=>[N("div",WA,[v(w,{depth:"2"},{default:_(()=>[oe(le(m(or)(m(l).currentTime)),1)]),_:1}),v(w,{depth:"2"},{default:_(()=>[oe(le(m(or)(m(l).duration)),1)]),_:1})]),m(Y)?(f(),F("div",{key:0,class:"menu-icon",onClick:t[6]||(t[6]=Wt((...e)=>m($l).toggleDesktopLyric&&m($l).toggleDesktopLyric(...e),["stop"]))},[v(s,{name:"DesktopLyric",depth:m(l).showDesktopLyric?1:3},null,8,["depth"])])):me("",!0),"radio"===m(a).playSong.type||m(l).personalFmMode?me("",!0):(f(),h(b,{key:1,options:m(c),"show-arrow":!0,onSelect:t[8]||(t[8]=e=>m($l).togglePlayMode(e))},{default:_(()=>[N("div",{class:"menu-icon",onClick:t[7]||(t[7]=Wt(e=>m($l).togglePlayMode(!1),["stop"]))},[v(s,{name:m(l).playModeIcon},null,8,["name"])])]),_:1},8,["options"])),v(I,{"show-arrow":!1,style:{padding:0}},{trigger:_(()=>[N("div",{class:"menu-icon",onClick:t[9]||(t[9]=Wt((...e)=>m($l).toggleMute&&m($l).toggleMute(...e),["stop"])),onWheel:t[10]||(t[10]=(...e)=>m($l).setVolume&&m($l).setVolume(...e))},[v(s,{name:m(l).playVolumeIcon},null,8,["name"])],32)]),default:_(()=>[N("div",{class:"volume-change",onWheel:t[13]||(t[13]=(...e)=>m($l).setVolume&&m($l).setVolume(...e))},[v(r,{value:m(l).playVolume,"onUpdate:value":[t[11]||(t[11]=e=>m(l).playVolume=e),t[12]||(t[12]=e=>m($l).setVolume(e))],tooltip:!1,min:0,max:1,step:.01,vertical:""},null,8,["value"]),v(w,{class:"slider-num"},{default:_(()=>[oe(le(m(l).playVolumePercent)+"%",1)]),_:1})],32)]),_:1}),m(l).personalFmMode?me("",!0):(f(),h(T,{key:2,value:m(n).playList?.length??0,show:m(u).showPlaylistCount,max:999,style:D({marginRight:m(u).showPlaylistCount?"12px":null})},{default:_(()=>[N("div",{class:"menu-icon",onClick:t[14]||(t[14]=Wt(e=>m(l).playListShow=!m(l).playListShow,["stop"]))},[v(s,{name:"PlayList"})])]),_:1},8,["value","show","style"]))]),_:1}))]),_:1})],2)}}}),KA=B(YA,[["__scopeId","data-v-4e49c3f5"]]),ZA={class:"playlist-header"},QA={class:"index"},JA={class:"data"},eS={key:0,class:"artists"},tS={key:1,class:"artists"},rS={key:2,class:"artists"},nS=["onClick"],iS=B(n({__name:"MainPlayList",setup(e){const t=ke(),r=i(),n=s(null),a=o(()=>t.playList.map((e,t)=>({...e,key:t})));return(e,i)=>{const s=_e,o=ae,l=kr,u=pt,c=se,d=Cr,p=nt,y=Pr,g=Sr,b=ir("debounce");return f(),h(g,{show:m(r).playListShow,"onUpdate:show":i[2]||(i[2]=e=>m(r).playListShow=e),class:he({"full-player":m(r).showFullPlayer}),style:D([{"--main-color":m(r).mainColor},{width:"400px"}]),"auto-focus":!1,id:"main-playlist"},{default:_(()=>[v(y,{"native-scrollbar":!1,closable:""},{header:_(()=>[N("div",ZA,[v(s,{class:"name"},{default:_(()=>i[3]||(i[3]=[oe("播放队列")])),_:1,__:[3]}),v(s,{class:"count",depth:"3"},{default:_(()=>[oe(le(m(t).playList.length)+" 首歌曲 ",1)]),_:1})])]),footer:_(()=>[v(p,{cols:2,"x-gap":"16",class:"playlist-menu"},{default:_(()=>[v(d,null,{default:_(()=>[v(c,{focusable:!1,size:"large",strong:"",secondary:"",onClick:i[0]||(i[0]=e=>m($l).cleanPlayList())},{icon:_(()=>[v(o,{name:"DeleteSweep"})]),default:_(()=>[i[5]||(i[5]=oe(" 清空列表 "))]),_:1,__:[5]})]),_:1}),v(d,null,{default:_(()=>[v(c,{focusable:!1,size:"large",strong:"",secondary:"",onClick:i[1]||(i[1]=e=>((e,t="smooth")=>{n.value?.scrollTo({index:e,behavior:t})})(m(r).playIndex))},{icon:_(()=>[v(o,{name:"Location"})]),default:_(()=>[i[6]||(i[6]=oe(" 当前播放 "))]),_:1,__:[6]})]),_:1})]),_:1})]),default:_(()=>[v(pe,{name:"fade",mode:"out-in"},{default:_(()=>[m(t).playList.length?(f(),h(l,{key:0,ref_key:"playListRef",ref:n,"item-size":80,items:m(a),"default-scroll-index":m(r).playIndex,class:"playlist-list",style:{"max-height":"calc(100vh - 142px)"}},{default:_(({item:e,index:t})=>[ar((f(),F("div",{key:t,class:he(["song-item",{on:m(r).playIndex===t}])},[N("div",QA,[m(r).playIndex!==t?(f(),h(s,{key:0,class:he(["num",{big:t+1>9999}]),depth:"3"},{default:_(()=>[oe(le(t+1),1)]),_:2},1032,["class"])):(f(),h(o,{key:1,size:20,name:"Music"}))]),N("div",JA,[v(s,{class:"name text-hidden"},{default:_(()=>[oe(le(e.name||"未知曲目"),1)]),_:2},1024),Array.isArray(e?.artists)?(f(),F("div",eS,[(f(!0),F(De,null,Ne(e.artists,e=>(f(),h(s,{key:e.id,depth:"3",class:"ar"},{default:_(()=>[oe(le(e.name),1)]),_:2},1024))),128))])):"radio"===e.type?(f(),F("div",tS,[v(s,{class:"ar",depth:"3"},{default:_(()=>i[4]||(i[4]=[oe(" 播客电台 ")])),_:1,__:[4]})])):(f(),F("div",rS,[v(s,{class:"ar",depth:"3"},{default:_(()=>[oe(le(e?.artists||"未知艺术家"),1)]),_:2},1024)]))]),N("div",{class:"remove",onClick:Wt(e=>m($l).removeSongIndex(t),["stop"])},[v(o,{size:20,name:"Delete"})],8,nS)],2)),[[b,()=>{m($l).togglePlayIndex(t),m(r).playListShow=!1}]])]),_:1},8,["items","default-scroll-index"])):(f(),h(u,{key:1,description:"播放列表暂无歌曲，快去添加吧",class:"tip",size:"large",style:{"margin-top":"60px"}}))]),_:1})]),_:1})]),_:1},8,["show","class","style"])}}}),[["__scopeId","data-v-3b3f3bd1"]]),aS=""+new URL("../images/vip.png?assest",import.meta.url).href,sS={class:"avatar"},oS={class:"user-data"},lS={key:0,class:"vip",src:aS},uS={key:0,class:"like-num"},cS=["onClick"],dS=B(n({__name:"User",setup(e){const t=Ds(),r=ke(),n=s(!1),i=()=>{r.userLoginStatus?n.value=!n.value:dd()},a=o(()=>[{label:"歌单",name:"like-playlists",value:r.userLikeData.playlists.length},{label:"专辑",name:"like-albums",value:r.userLikeData.albums.length},{label:"歌手",name:"like-artists",value:r.userLikeData.artists.length}]),l=()=>{K()?window.$dialog.warning({title:"退出登录",content:"确认退出当前用户登录？",positiveText:"确认登出",negativeText:"取消",onPositiveClick:()=>Lr()}):dd()};return Ce(()=>{(async()=>{if("uid"===r.loginType)return void(await Fe());const e=await Rr();e.data?.profile&&Object.keys(e.data?.profile)?.length?(r.userLoginStatus=!0,await Mr(),await Oe()):0!==r.userData.userId&&(r.userLoginStatus=!1,r.userData.userId=0,window.$message.warning("登录已过期，请重新登录",{duration:2e3}),dd())})()}),(e,s)=>{const o=Ue,u=ae,c=_e,d=Or,p=Se,y=Me,g=se,b=ur;return f(),h(b,{trigger:"manual",show:m(n),onClickoutside:s[1]||(s[1]=e=>n.value=!1)},{trigger:_(()=>[N("div",{class:"user",style:D({pointerEvents:m(n)?"none":"auto"}),onClick:i},[N("div",sS,[m(r).userLoginStatus?(f(),h(o,{key:0,src:m(r).userData?.avatarUrl,"fallback-src":"/images/avatar.jpg?assest",round:""},null,8,["src"])):(f(),h(o,{key:1,round:""},{default:_(()=>[v(u,{name:"Person",depth:3,size:"26"})]),_:1}))]),N("div",oS,[v(c,{class:"name"},{default:_(()=>[oe(le(m(r).userLoginStatus?m(r).userData.name||"未知用户名":"未登录"),1)]),_:1}),m(r).userLoginStatus&&0!==m(r).userData.vipType?(f(),F("img",lS)):me("",!0),v(u,{class:he(["down",{open:m(n)}]),name:"DropDown",depth:3},null,8,["class"])])],4)]),default:_(()=>[N("div",{class:"user-menu",onClick:s[0]||(s[0]=e=>n.value=!1)},["uid"!==m(r).loginType?(f(),F("div",uS,[(f(!0),F(De,null,Ne(m(a),(e,r)=>(f(),F("div",{key:r,class:"num-item",onClick:r=>m(t).push({name:e.name})},[v(d,{from:0,to:e.value},null,8,["to"]),v(c,{depth:3},{default:_(()=>[oe(le(e.label),1)]),_:2},1024)],8,cS))),128))])):(f(),h(p,{key:1,align:"center",vertical:""},{default:_(()=>[v(c,null,{default:_(()=>s[2]||(s[2]=[oe("UID 登录模式")])),_:1,__:[2]}),v(c,{depth:3},{default:_(()=>s[3]||(s[3]=[oe("部分功能暂不可用")])),_:1,__:[3]})]),_:1})),v(y),v(g,{focusable:!1,class:"logout",strong:"",secondary:"",round:"",onClick:l},{icon:_(()=>[v(u,{name:"Power"})]),default:_(()=>[s[4]||(s[4]=oe(" 退出登录 "))]),_:1,__:[4]})])]),_:1},8,["show"])}}}),[["__scopeId","data-v-d0ee2fb1"]]),hS=()=>gt({url:"/search/hot/detail"}),fS=(e,t=50,r=0,n=1018)=>gt({url:"/cloudsearch",params:{keywords:e,limit:t,offset:r,type:n}}),pS={class:"suggest-type"},mS=["onClick"],yS=n({__name:"SearchSuggest",emits:["toSearch"],setup(e,{emit:t}){const r=t,n=i(),a=s({}),o=s(0),l=s(null),u=s(null),d={songs:{name:"单曲",icon:"Music"},artists:{name:"歌手",icon:"Artist"},albums:{name:"专辑",icon:"Album"},playlists:{name:"歌单",icon:"MusicList"}},p=async e=>{a.value={};const t=await((e,t=!1)=>gt({url:"/search/suggest",params:{keywords:e,...t&&{type:"mobile"}}}))(e);a.value=t.result,H(y)},y=()=>{const e=l.value?.offsetHeight,t=u.value?.offsetHeight;if(e||t){const r=(e||0)+(t||0)+(t?8:0)+20;o.value=r}else o.value=0};return c(()=>n.searchInputValue,e=>{e&&""!==e&&p(e)},{debounce:300}),(e,t)=>{const i=ae,s=_e,c=Ye,p=Be;return f(),h(pe,{name:"fadeDown",mode:"out-in",onAfterEnter:y,onAfterLeave:y},{default:_(()=>[m(n).searchFocus&&m(n).searchInputValue?(f(),h(p,{key:0,class:"search-suggest","content-style":"padding: 0",style:D({height:`${m(o)}px`,border:0===m(o)?"none":null})},{default:_(()=>[v(c,{class:"scrollbar"},{default:_(()=>[N("div",{ref_key:"directSearchRef",ref:l,class:"direct",onClick:t[0]||(t[0]=e=>r("toSearch",m(n).searchInputValue,"keyword"))},[v(i,{name:"Search",depth:3}),v(s,{class:"text text-hidden"},{default:_(()=>[oe("直接搜索："+le(m(n).searchInputValue),1)]),_:1})],512),v(pe,{name:"fade",mode:"out-in",onAfterLeave:y},{default:_(()=>[Object.keys(m(a))?.length&&m(a)?.order?(f(),F("div",{key:0,ref_key:"searchSuggestRef",ref:u,class:"all-suggest"},[(f(!0),F(De,null,Ne(m(a).order,(e,t)=>(f(),F("div",{key:t,class:"suggest"},[N("div",pS,[v(i,{name:d[e].icon},null,8,["name"]),v(s,null,{default:_(()=>[oe(le(d[e].name),1)]),_:2},1024)]),(f(!0),F(De,null,Ne(m(a)[e],(t,n)=>(f(),F("div",{key:n,class:"suggest-item",onClick:n=>r("toSearch",t,e)},[v(s,{class:"name"},{default:_(()=>[oe(le(t.name),1)]),_:2},1024),t?.artist?(f(),h(s,{key:0,class:"artist",depth:"3"},{default:_(()=>[oe(le(t.artist.name),1)]),_:2},1024)):t?.artists?(f(),h(s,{key:1,class:"artist",depth:"3"},{default:_(()=>[oe(le(t.artists[0].name),1)]),_:2},1024)):me("",!0)],8,mS))),128))]))),128))],512)):me("",!0)]),_:1})]),_:1})]),_:1},8,["style"])):me("",!0)]),_:1})}}}),gS=B(yS,[["__scopeId","data-v-2aa32e19"]]),_S={key:0,class:"history"},vS={class:"title"},bS={key:1,class:"hot-list"},wS={class:"title"},xS=["onClick"],IS={class:"data"},TS={class:"name"},ES={class:"hot"},AS=n({__name:"SearchDefault",emits:["toSearch"],setup(e,{emit:t}){const n=t,a=ke(),l=i(),u=r(),c=s([]),p=o(()=>!l.searchInputValue&&l.searchFocus&&(c.value.length>0||a.searchHistory.length>0)),y=async()=>{if(!u.useOnlineService)return;const e=await ue(hS,{key:"searchHotData",time:10});c.value=e.data},g=()=>{window.$dialog.warning({title:"删除搜索历史",content:"确认删除全部的搜索历史？这将无法恢复！",positiveText:"确认",negativeText:"取消",onPositiveClick:()=>{a.searchHistory=[]}})};return d(()=>{y()}),(e,t)=>{const r=ae,i=_e,s=Ve,o=Se,l=Ye,d=Be;return f(),h(pe,{name:"fadeDown",mode:"out-in",onBeforeEnter:y},{default:_(()=>[m(p)?(f(),h(d,{key:0,class:"search-default","content-style":"padding: 0"},{default:_(()=>[v(l,{class:"scrollbar"},{default:_(()=>[m(u).showSearchHistory&&m(a).searchHistory.length>0?(f(),F("div",_S,[N("div",vS,[v(r,{name:"History"}),v(i,{class:"name"},{default:_(()=>t[0]||(t[0]=[oe("搜索历史 ")])),_:1,__:[0]}),v(r,{class:"delete",name:"Delete",onClick:Wt(g,["stop"])})]),v(o,{class:"history-list"},{default:_(()=>[(f(!0),F(De,null,Ne(m(a).searchHistory,(e,t)=>(f(),h(s,{key:t,bordered:!1,round:"",onClick:t=>n("toSearch",e)},{default:_(()=>[oe(le(e.length>10?e.slice(0,10)+"...":e),1)]),_:2},1032,["onClick"]))),128))]),_:1})])):me("",!0),m(c).length>0?(f(),F("div",bS,[N("div",wS,[v(r,{name:"Fire"}),v(i,{class:"name"},{default:_(()=>t[1]||(t[1]=[oe("热搜榜 ")])),_:1,__:[1]})]),(f(!0),F(De,null,Ne(m(c),(e,t)=>(f(),F("div",{key:t,class:"hot-item",onClick:t=>n("toSearch",e.searchWord)},[v(i,{class:"num",depth:"3"},{default:_(()=>[oe(le(t+1),1)]),_:2},1024),N("div",IS,[N("div",TS,[v(i,{class:"text"},{default:_(()=>[oe(le(e.searchWord),1)]),_:2},1024),e.iconUrl?(f(),h(s,{key:0,type:1==e.iconType?"error":"warning",bordered:!1,size:"small",round:""},{default:_(()=>[oe(le(1===e.iconType?"HOT":"UP"),1)]),_:2},1032,["type"])):me("",!0)]),v(i,{class:"content",depth:"3"},{default:_(()=>[oe(le(e.content),1)]),_:2},1024)]),N("div",ES,[v(r,{name:"Fire"}),v(i,{class:"hot-num"},{default:_(()=>[oe(le(e.score),1)]),_:2},1024)])],8,xS))),128))])):me("",!0)]),_:1})]),_:1})):me("",!0)]),_:1})}}}),SS=B(AS,[["__scopeId","data-v-18780ae3"]]),kS=n({__name:"SearchInpMenu",emits:["toSearch"],setup(e,{expose:t,emit:r}){const n=r,a=i(),o=s(0),l=s(0),u=s(!1),c=s([]);return t({openDropdown:async e=>{try{e.preventDefault(),u.value=!1;const t=await Fr();H().then(()=>{c.value=[{key:"copy",label:"复制搜索框内容",show:!!a.searchInputValue,props:{onClick:()=>st(a.searchInputValue)},icon:er("Copy")},{key:"paste",label:"粘贴至搜索框",show:!!t,props:{onClick:()=>a.searchInputValue+=t},icon:er("Paste")},{key:"paste-search",label:"粘贴并搜索",show:!!t,props:{onClick:()=>{a.searchInputValue=t,n("toSearch",a.searchInputValue)}},icon:er("Search")}],o.value=e.clientX,l.value=e.clientY,u.value=!0})}catch(t){console.error("右键菜单出现异常：",t),window.$message.error("右键菜单出现异常")}}}),(e,t)=>{const r=Er;return f(),h(r,{x:m(o),y:m(l),show:m(u),options:m(c),class:"search-inp-menu",placement:"bottom-start",trigger:"manual",onSelect:t[0]||(t[0]=e=>u.value=!1),onClickoutside:t[1]||(t[1]=e=>u.value=!1)},null,8,["x","y","show","options"])}}}),CS={class:"search"},PS=n({__name:"SearchInp",setup(e){const t=Ds(),r=ke(),n=i(),a=s(null),o=s(null),l=s("搜索音乐 / 视频"),u=s(""),c=e=>!e.startsWith(" "),h=()=>{n.searchFocus=!0},p=async()=>{try{const e=await gt({url:"/search/default",params:{timestamp:Date.now()}});l.value=e.data.showKeyword,u.value=e.data.realkeyword}catch(e){console.error("搜索关键词获取失败：",e),l.value="搜索音乐 / 视频"}},y=async(e,i="keyword")=>{if(e||"搜索音乐 / 视频"!==l.value)switch(!e&&"搜索音乐 / 视频"!==l.value&&u.value&&(e=u.value?.trim()),n.searchFocus=!1,o.value?.blur(),p(),i){case"keyword":t.push({name:"search",query:{keyword:e}}),(e=>{if(!(e=e.trim()))return;const t=r.searchHistory.indexOf(e);-1!==t&&r.searchHistory.splice(t,1),r.searchHistory.unshift(e),r.searchHistory.length>30&&(r.searchHistory.length=30)})(e);break;case"songs":{const t=await _t(e?.id),r=Je(t.songs)[0];$l.addNextSong(r,!0);break}case"playlists":t.push({name:"playlist",query:{id:e?.id}});break;case"artists":t.push({name:"artist",query:{id:e?.id}});break;case"albums":t.push({name:"album",query:{id:e?.id}})}};return d(()=>{p(),Z(p,6e4)}),(e,t)=>{const r=ae,i=Ae,s=SS,u=gS;return f(),F("div",CS,[v(i,{ref_key:"searchInputRef",ref:o,value:m(n).searchInputValue,"onUpdate:value":t[0]||(t[0]=e=>m(n).searchInputValue=e),class:he(["search-input",{focus:m(n).searchFocus}]),"input-props":{autocomplete:"off"},placeholder:m(l),"allow-input":c,round:"",clearable:"",onFocus:h,onKeyup:t[1]||(t[1]=Dr(e=>y(m(n).searchInputValue),["enter"])),onContextmenu:t[2]||(t[2]=Wt(e=>m(a)?.openDropdown(e),["stop"])),onClick:t[3]||(t[3]=Wt(()=>{},["stop"]))},{prefix:_(()=>[v(r,{size:18,name:"Search"})]),_:1},8,["value","class","placeholder"]),v(pe,{name:"fade",mode:"out-in"},{default:_(()=>[ar(N("div",{class:"search-mask",onClick:t[4]||(t[4]=Wt(e=>m(n).searchFocus=!1,["stop"]))},null,512),[[cr,m(n).searchFocus]])]),_:1}),v(s,{onToSearch:y}),v(u,{onToSearch:y}),v(kS,{ref_key:"searchInpMenuRef",ref:a,onToSearch:y},null,512)])}}}),RS=B(PS,[["__scopeId","data-v-81d0cc76"]]),MS=n({__name:"Nav",setup(e){const t=Ds(),n=r(),i=s(!1),a=s(!1),l=s(!1),u=()=>window.electron.ipcRenderer.send("win-min"),c=()=>{window.electron.ipcRenderer.sendSync("win-state")?(l.value=!1,window.electron.ipcRenderer.send("win-restore")):(l.value=!0,window.electron.ipcRenderer.send("win-max"))},p=e=>{a.value&&(n.showCloseAppTip=!1,n.closeAppMethod=e),i.value=!1,window.electron.ipcRenderer.send("hide"===e?"win-hide":"win-close")},y=()=>{n.showCloseAppTip?i.value=!0:p(n.closeAppMethod)},g=o(()=>[{label:"auto"===n.themeMode?"浅色模式":"light"===n.themeMode?"深色模式":"跟随系统",key:"themeMode",icon:er("auto"===n.themeMode?"LightTheme":"light"===n.themeMode?"DarkTheme":"AutoTheme")},{key:"header-divider",type:"divider"},{key:"restart",label:"软件热重载",show:Y,props:{onClick:()=>window.location.reload()},icon:er("Restart")},{key:"dev-tools",label:"开启控制台",show:Nr,icon:er("Code")},{key:"setting",label:"全局设置",icon:er("Settings")}]),b=e=>{switch(e){case"themeMode":n.setThemeMode();break;case"setting":bd();break;case"dev-tools":window.electron.ipcRenderer.send("open-dev-tools")}};return d(()=>{Y&&(l.value=window.electron.ipcRenderer.sendSync("win-state"))}),(e,r)=>{const s=ae,o=se,d=Se,w=RS,x=dS,I=Er,T=Me,E=_e,A=Ur,S=jr,k=Br;return f(),h(k,{class:"nav"},{default:_(()=>[v(d,{class:"page-control"},{default:_(()=>[v(o,{focusable:!1,tertiary:"",circle:"",onClick:r[0]||(r[0]=e=>m(t).go(-1))},{icon:_(()=>[v(s,{name:"NavigateBefore",size:26})]),_:1}),v(o,{focusable:!1,tertiary:"",circle:"",onClick:r[1]||(r[1]=e=>m(t).go(1))},{icon:_(()=>[v(s,{name:"NavigateNext",size:26})]),_:1})]),_:1}),v(d,{class:"nav-main"},{default:_(()=>[v(w),r[7]||(r[7]=N("div",{class:"nav-drag"},null,-1)),m(n).useOnlineService?(f(),h(x,{key:0})):me("",!0),v(I,{options:m(g),trigger:"click","show-arrow":"",onSelect:b},{default:_(()=>[v(o,{focusable:!1,title:"设置",tertiary:"",circle:""},{icon:_(()=>[v(s,{name:"Settings"})]),_:1})]),_:1},8,["options"])]),_:1,__:[7]}),m(Y)?(f(),h(d,{key:0,align:"center",class:"client-control"},{default:_(()=>[v(T,{class:"divider",vertical:""}),v(o,{focusable:!1,title:"最小化",tertiary:"",circle:"",onClick:u},{icon:_(()=>[v(s,{name:"WindowMinimize"})]),_:1}),v(o,{focusable:!1,title:m(l)?"还原":"最大化",tertiary:"",circle:"",onClick:c},{icon:_(()=>[v(s,{name:m(l)?"WindowRestore":"WindowMaximize"},null,8,["name"])]),_:1},8,["title"]),v(o,{focusable:!1,title:"关闭",tertiary:"",circle:"",onClick:y},{icon:_(()=>[v(s,{name:"WindowClose"})]),_:1})]),_:1})):me("",!0),v(S,{show:m(i),"onUpdate:show":r[5]||(r[5]=e=>Te(i)?i.value=e:null),"auto-focus":!1,title:"关闭软件",style:{width:"600px"},preset:"card","transform-origin":"center",bordered:"",onAfterLeave:r[6]||(r[6]=e=>a.value=!1)},{footer:_(()=>[v(d,{justify:"end"},{default:_(()=>[v(o,{strong:"",secondary:"",onClick:r[3]||(r[3]=e=>p("exit"))},{icon:_(()=>[v(s,{name:"ExitToApp"})]),default:_(()=>[r[10]||(r[10]=oe(" 关闭 "))]),_:1,__:[10]}),v(o,{type:"primary",strong:"",secondary:"",onClick:r[4]||(r[4]=e=>p("hide"))},{icon:_(()=>[v(s,{name:"WindowHide"})]),default:_(()=>[r[11]||(r[11]=oe(" 隐藏到托盘 "))]),_:1,__:[11]})]),_:1})]),default:_(()=>[v(E,{class:"tip"},{default:_(()=>r[8]||(r[8]=[oe("确认关闭软件吗？")])),_:1,__:[8]}),v(A,{checked:m(a),"onUpdate:checked":r[2]||(r[2]=e=>Te(a)?a.value=e:null),class:"checkbox"},{default:_(()=>r[9]||(r[9]=[oe(" 记住且不再询问 ")])),_:1,__:[9]},8,["checked"])]),_:1},8,["show"])]),_:1})}}}),LS=B(MS,[["__scopeId","data-v-425be829"]]),OS=n({__name:"Menu",setup(e){const t=Ds(),n=ke(),a=Ke(),l=i(),c=r(),d=s(null),p=s(t.currentRoute.value.name||"home"),y=o(()=>c.useOnlineService?[{key:"home",link:"home",label:"为我推荐",icon:er("Home",{style:{transform:"translateY(-1px)"}})},{key:"discover",link:"discover",label:"发现音乐",icon:er("Discover",{style:{transform:"translateY(-1px)"}})},{key:"personal-fm",label:"私人漫游",show:0!==K(),icon:er("Radio",{style:{transform:"translateY(-1px)"}})},{key:"radio-hot",link:"radio-hot",label:"播客电台",icon:er("Record",{style:{transform:"translateY(-1px)"}})},{key:"divider",type:"divider"},{key:"like-songs",label:()=>S("div",{class:"user-liked"},[S(_e,null,()=>"我喜欢的音乐"),S(se,{type:"tertiary",round:!0,strong:!0,secondary:!0,renderIcon:er("HeartBit"),onClick:e=>{e.stopPropagation(),x()}})]),icon:er("Favorite")},{key:"like",link:"like",label:"我的收藏",icon:er("Star")},{key:"cloud",link:"cloud",label:"我的云盘",show:1===K(),icon:er("Cloud")},{key:"local",link:"local",label:"本地歌曲",show:Y,icon:er("FolderMusic")},{key:"history",link:"history",label:"最近播放",icon:er("History")},{key:"divider-two",type:"divider"},{key:"user-playlists",icon:l.menuCollapsed?er("PlaylistAdd"):void 0,label:()=>S("div",{class:"user-list"},[S(_e,{depth:3},()=>["创建的歌单"]),S(se,{type:"tertiary",round:!0,strong:!0,secondary:!0,renderIcon:er("Add"),onclick:e=>{e.stopPropagation(),gd()}})]),children:[..._.value]},{key:"liked-playlists",icon:l.menuCollapsed?er("PlaylistAddCheck"):void 0,label:()=>S("div",{class:"user-list"},S(_e,{depth:3},()=>["收藏的歌单"])),children:[...v.value]}]:[]),g=(e,t)=>K()?e.map(e=>({key:e.id,label:()=>t?S("div",{class:"pl-cover"},[S(Ue,{src:e.coverSize?.s||e.cover,fallbackSrc:"/images/album.jpg?assest",lazy:!0}),S(Gr,null,()=>e.name)]):S(Gr,null,()=>e.name),icon:t?void 0:er("PlayList")})):[],_=o(()=>{const e=n.userData.userId,t=n.userLikeData.playlists.filter(t=>t?.userId===e).slice(1);return g(t,c.menuShowCover)}),v=o(()=>{const e=n.userData.userId,t=n.userLikeData.playlists.filter(t=>t?.userId!==e);return g(t,c.menuShowCover)}),b=e=>"link"in e?S(Rs,{to:{name:e.link}},()=>e.label):"function"==typeof e.label?e.label():e.label,w=(e,r)=>{if("personal-fm"===e)return a.personalFMSong?.id?(l.personalFmMode?$l.play():(l.personalFmMode=!0,l.playHeartbeatMode=!1,$l.resetStatus(),$l.initPlayer()),l.showFullPlayer=!0,void window.$message.info("已开启私人漫游",{icon:er("Radio")})):void window.$message.error("开启私人漫游出错，请重试");if("number"==typeof e)t.push({name:"playlist",query:{id:r.key}});else if("like-songs"===e)t.push({name:"like-songs"})},x=Q(()=>$l.toggleHeartMode(),1e3,{leading:!0,trailing:!1});return u(()=>[t.currentRoute.value,n.userLikeData.playlists],()=>(()=>{const e=t.currentRoute.value.matched?.[0]?.name||t.currentRoute.value?.name;if(e)switch(d.value?.showOption(e),e){case"playlist":{const e=Number(t.currentRoute.value.query.id||0),r=n.userLikeData.playlists.some(t=>t?.id===e);e&&(p.value=r?Number(e):"home"),d.value?.showOption(e);break}default:p.value=e}})()),(e,t)=>{const r=tr;return f(),h(r,{ref_key:"menuRef",ref:d,value:m(p),"onUpdate:value":[t[0]||(t[0]=e=>Te(p)?p.value=e:null),w],class:he({cover:m(c).menuShowCover}),indent:0,"root-indent":26,collapsed:m(l).menuCollapsed,"collapsed-width":64,"collapsed-icon-size":22,"default-expand-all":!0,options:m(y),"render-label":b},null,8,["value","class","collapsed","options"])}}}),FS=B(OS,[["__scopeId","data-v-587e4c5a"]]),DS={class:"sider-all"},NS=B(n({__name:"Sider",setup(e){const t=Ds(),r=Ke(),n=i();return(e,i)=>{const a=_e,s=FS,o=Ye;return f(),F("div",DS,[N("div",{class:he(["logo",{collapsed:m(n).menuCollapsed}]),onClick:i[0]||(i[0]=e=>m(t).push("/"))},[i[2]||(i[2]=N("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},[N("path",{d:"M511.764091 131.708086a446.145957 446.145957 0 1 0 446.145957 446.145957 446.145957 446.145957 0 0 0-446.145957-446.145957z m0 519.76004A71.829499 71.829499 0 1 1 583.59359 580.530919 72.275645 72.275645 0 0 1 511.764091 651.468126z",fill:"#F55E55","p-id":"11551"}),N("path",{d:"M802.205109 0.541175l-168.197026 37.030114a67.814185 67.814185 0 0 0-53.091369 66.029602V223.614153l3.569168 349.778431h114.213365V223.614153h108.859613a26.322611 26.322611 0 0 0 26.768758-26.322611V26.863786a26.768757 26.768757 0 0 0-32.122509-26.322611z",fill:"#F9BBB8","p-id":"11552"}),N("path",{d:"M511.764091 386.457428a186.935156 186.935156 0 1 0 186.935156 186.48901A186.935156 186.935156 0 0 0 511.764091 386.457428z m0 264.564552a71.383353 71.383353 0 1 1 71.383353-71.383353 71.383353 71.383353 0 0 1-71.383353 71.383353z",fill:"#F9BBB8","p-id":"11553"})],-1)),v(a,null,{default:_(()=>i[1]||(i[1]=[oe("SPlayer")])),_:1,__:[1]})],2),v(o,{style:D({maxHeight:`calc(100vh - ${m(r).isHasPlayer&&m(n).showPlayBar?150:70}px)`})},{default:_(()=>[v(s)]),_:1},8,["style"])])}}}),[["__scopeId","data-v-9a8f63df"]]),BS=(()=>{const e=e=>null==e||void 0===e||""===e,t=(e,t,r)=>{console.info(`%c ${e} %c ${t} %c`,`background:${r};border:1px solid ${r}; padding: 1px; border-radius: 2px 0 0 2px; color: #fff;`,`border:1px solid ${r}; padding: 1px; border-radius: 0 2px 2px 0; color: ${r};`,"background:transparent")};return{info:(r,n="")=>{const i=e(n)?"Info":r,a=e(n)?r:n;t(i,a,"#909399")},error:(r,n="")=>{const i=e(n)?"Error":r,a=e(n)?r:n;t(i,a,"#F56C6C")},warning:(r,n="")=>{const i=e(n)?"Warning":r,a=e(n)?r:n;t(i,a,"#E6A23C")},success:(r,n="")=>{const i=e(n)?"Success ":r,a=e(n)?r:n;t(i,a,"#67C23A")},picture:(e,t=1)=>{const r=new Image;r.crossOrigin="anonymous",r.onload=()=>{const e=document.createElement("canvas"),n=e.getContext("2d");if(n){e.width=r.width,e.height=r.height,n.fillStyle="red",n.fillRect(0,0,e.width,e.height),n.drawImage(r,0,0);const i=e.toDataURL("image/png");console.info("%c sup?",`font-size: 1px;\n          padding: ${Math.floor(r.height*t/2)}px ${Math.floor(r.width*t/2)}px;background-image: url(${i});\n          background-repeat: no-repeat;\n          background-size: ${r.width*t}px ${r.height*t}px;\n          color: transparent;`)}},r.src=e},table:()=>{console.info("%c id%c name%c age","color: white; background-color: black; padding: 2px 10px;","color: white; background-color: black; padding: 2px 10px;","color: white; background-color: black; padding: 2px 10px;"),[{id:1,name:"Alice",age:25},{id:2,name:"Bob",age:30},{id:3,name:"Charlie",age:35}].forEach(e=>{console.info(`%c ${e.id} %c ${e.name} %c ${e.age} `,"color: black; background-color: lightgray; padding: 2px 10px;","color: black; background-color: lightgray; padding: 2px 10px;","color: black; background-color: lightgray; padding: 2px 10px;")})}}})(),US=async()=>{const e=ke(),t=i(),n=r(),a=Xt();zS(),(()=>{if(window.localStorage.getItem("isAgree"))return;const e=window.$modal.create({preset:"card",transformOrigin:"center",autoFocus:!1,maskClosable:!1,closeOnEsc:!1,closable:!1,style:{maxWidth:"70vw"},content:()=>S(co,{onClose:()=>{e.destroy(),window.localStorage.setItem("isAgree",Date.now().toString())}}),onEsc:()=>{window.$message.warning("请先阅读并同意用户协议")}})})(),jS(),await e.loadData(),$l.initPlayer(n.autoPlay,n.memoryLastSeek?t.currentTime:0),$l.playModeSyncIpc(),Y&&(a.registerAllShortcuts(),window.electron.ipcRenderer.send("win-loaded"),window.electron.ipcRenderer.send("change-desktop-lyric",t.showDesktopLyric),n.checkUpdateOnStart&&window.electron.ipcRenderer.send("check-update"))},jS=()=>{zr(window,"keydown",GS)},GS=Q(e=>{const t=Xt(),r=e.target;if(["input","textarea"].includes(r.tagName.toLowerCase()))return;e.preventDefault(),e.stopPropagation();const n=e.code,i=e.ctrlKey||e.metaKey,a=e.shiftKey,s=e.altKey;for(const o in t.shortcutList){const e=t.shortcutList[o],r=e.shortcut.split("+");let l=!0;r.includes("CmdOrCtrl")&&!i&&(l=!1),r.includes("Shift")&&!a&&(l=!1),r.includes("Alt")&&!s&&(l=!1);if(r.find(e=>"CmdOrCtrl"!==e&&"Shift"!==e&&"Alt"!==e)!==n&&(l=!1),l&&o)switch(e.name,o){case"playOrPause":$l.playOrPause();break;case"playPrev":$l.nextOrPrev("prev");break;case"playNext":$l.nextOrPrev("next");break;case"volumeUp":$l.setVolume("up");break;case"volumeDown":$l.setVolume("down");break;case"toogleDesktopLyric":$l.toggleDesktopLyric()}}},100),zS=async()=>{BS.success(`🚀 ${Yl.version}`,Yl.productName),BS.info(`👤 ${Yl.author}`,Yl.github)},HS=B(n({__name:"App",setup(e){const t=Ke(),n=i(),a=r(),o=s(null),{height:l}=Tr(o);return pr(()=>{n.mainContentHeight=l.value}),d(async()=>{await US()}),(e,r)=>{const i=NS,s=$r,u=LS,c=Hr("RouterView"),d=ae,p=Wr,y=Vr,g=iS,b=KA,w=BA,x=Ki;return f(),h(x,null,{default:_(()=>[v(y,{id:"main",class:he({"show-player":m(t).isHasPlayer&&m(n).showPlayBar,"show-full-player":m(n).showFullPlayer}),"has-sider":""},{default:_(()=>[v(s,{id:"main-sider",style:D({height:m(t).isHasPlayer&&m(n).showPlayBar?"calc(100vh - 80px)":"100vh"}),"content-style":{overflow:"hidden",height:"100%",padding:"0"},"native-scrollbar":!1,collapsed:m(n).menuCollapsed,"collapsed-width":64,width:240,"collapse-mode":"width","show-trigger":"bar",bordered:"",onCollapse:r[0]||(r[0]=e=>m(n).menuCollapsed=!0),onExpand:r[1]||(r[1]=e=>m(n).menuCollapsed=!1)},{default:_(()=>[v(i)]),_:1},8,["style","collapsed"]),v(y,{id:"main-layout"},{default:_(()=>[v(u,{id:"main-header"}),v(y,{ref_key:"contentRef",ref:o,id:"main-content","native-scrollbar":!1,style:D({"--layout-height":m(l)}),"content-style":{display:"grid",gridTemplateRows:"1fr",minHeight:"100%",padding:"0 24px"},position:"absolute",embedded:""},{default:_(()=>[v(c,null,{default:_(({Component:e})=>[v(pe,{name:`router-${m(a).routeAnimation}`,mode:"out-in"},{default:_(()=>[m(a).useKeepAlive?(f(),h(Xr,{key:0,max:20,exclude:["layout"]},[(f(),h(qr(e),{class:"router-view"}))],1024)):(f(),h(qr(e),{key:1,class:"router-view"}))]),_:2},1032,["name"])]),_:1}),v(p,{right:40,bottom:120},{default:_(()=>[v(d,{size:22,name:"Up"})]),_:1})]),_:1},8,["style"])]),_:1})]),_:1},8,["class"]),v(g),v(b),(f(),h(yr,{to:"body"},[v(pe,{name:"up",mode:"out-in"},{default:_(()=>[m(n).showFullPlayer||m(n).fullPlayerActive&&m(a).fullPlayerCache?(f(),h(w,{key:0})):me("",!0)]),_:1})]))]),_:1})}}}),[["__scopeId","data-v-9adc2c4a"]]),VS=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,$S=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,XS=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function qS(e,t){if(!("__proto__"===e||"constructor"===e&&t&&"object"==typeof t&&"prototype"in t))return t;!function(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}(e)}function WS(e,t){if(null==e)return;let r=e;for(let n=0;n<t.length;n++){if(null==r||null==r[t[n]])return;r=r[t[n]]}return r}function YS(e,t,r){if(0===r.length)return t;const n=r[0];return r.length>1&&(t=YS("object"==typeof e&&null!==e&&Object.prototype.hasOwnProperty.call(e,n)?e[n]:Number.isInteger(Number(r[1]))?[]:{},t,Array.prototype.slice.call(r,1))),Number.isInteger(Number(n))&&Array.isArray(e)?e.slice()[n]:Object.assign({},e,{[n]:t})}function KS(e,t){if(null==e||0===t.length)return e;if(1===t.length){if(null==e)return e;if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.slice.call(e,0).splice(t[0],1);const r={};for(const t in e)r[t]=e[t];return delete r[t[0]],r}if(null==e[t[0]]){if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.concat.call([],e);const r={};for(const t in e)r[t]=e[t];return r}return YS(e,KS(e[t[0]],Array.prototype.slice.call(t,1)),[t[0]])}function ZS(e,t){return t.map(e=>e.split(".")).map(t=>[t,WS(e,t)]).filter(e=>void 0!==e[1]).reduce((e,t)=>YS(e,t[1],t[0]),{})}function QS(e,t){return t.map(e=>e.split(".")).reduce((e,t)=>KS(e,t),e)}function JS(e,{storage:t,serializer:r,key:n,debug:i,pick:a,omit:s,beforeHydrate:o,afterHydrate:l},u,c=!0){try{c&&o?.(u);const i=t.getItem(n);if(i){const t=r.deserialize(i),n=a?ZS(t,a):t,o=s?QS(n,s):n;e.$patch(o)}c&&l?.(u)}catch(d){i&&console.error("[pinia-plugin-persistedstate]",d)}}function ek(e,{storage:t,serializer:r,key:n,debug:i,pick:a,omit:s}){try{const i=a?ZS(e,a):e,o=s?QS(i,s):i,l=r.serialize(o);t.setItem(n,l)}catch(o){i&&console.error("[pinia-plugin-persistedstate]",o)}}var tk=function(e={}){return function(t){!function(e,t,r){const{pinia:n,store:i,options:{persist:a=r}}=e;if(!a)return;if(!(i.$id in n.state.value)){const e=n._s.get(i.$id.replace("__hot:",""));return void(e&&Promise.resolve().then(()=>e.$persist()))}const s=(Array.isArray(a)?a:!0===a?[{}]:[a]).map(t);i.$hydrate=({runHooks:t=!0}={})=>{s.forEach(r=>{JS(i,r,e,t)})},i.$persist=()=>{s.forEach(e=>{ek(i.$state,e)})},s.forEach(t=>{JS(i,t,e),i.$subscribe((e,r)=>ek(r,t),{detached:!0})})}(t,r=>({key:(e.key?e.key:e=>e)(r.key??t.store.$id),debug:r.debug??e.debug??!1,serializer:r.serializer??e.serializer??{serialize:e=>JSON.stringify(e),deserialize:e=>function(e,t={}){if("string"!=typeof e)return e;if('"'===e[0]&&'"'===e[e.length-1]&&-1===e.indexOf("\\"))return e.slice(1,-1);const r=e.trim();if(r.length<=9)switch(r.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!XS.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(VS.test(e)||$S.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,qS)}return JSON.parse(e)}catch(n){if(t.strict)throw n;return e}}(e)},storage:r.storage??e.storage??window.localStorage,beforeHydrate:r.beforeHydrate,afterHydrate:r.afterHydrate,pick:r.pick,omit:r.omit}),e.auto??!1)}}();const rk={mounted(e,t){if("function"!=typeof t.value)return void console.warn("v-debounce directive expects a function as the value");const r=t.arg?parseInt(t.arg):300,n=Q(t.value,r,{leading:!0,trailing:!1});e.addEventListener("click",n),e._debouncedFn=n},beforeUnmount(e){e._debouncedFn&&(e.removeEventListener("click",e._debouncedFn),delete e._debouncedFn)}},nk={mounted(e,t){if("function"!=typeof t.value)return void console.warn("v-throttle directive expects a function as the value");const r=t.arg?parseInt(t.arg):300,n=Ir(t.value,r,{leading:!0,trailing:!1});e.addEventListener("click",n),e._throttledFn=n},beforeUnmount(e){e._throttledFn&&(e.removeEventListener("click",e._throttledFn),delete e._throttledFn)}},ik={mounted(e,t){const{modifiers:r,value:n}=t,{stop:i}=Yr(e,t=>{t.forEach(t=>{const a=t.isIntersecting;e.classList.toggle("hidden",!a),"function"==typeof n&&n(a),r.once&&a&&i()})},{threshold:.1})}},ak=()=>{i().updateCheck=!1};(()=>{try{if(!Y)return;window.electron.ipcRenderer.on("play",()=>$l.play()),window.electron.ipcRenderer.on("pause",()=>$l.pause()),window.electron.ipcRenderer.on("playOrPause",()=>$l.playOrPause()),window.electron.ipcRenderer.on("playPrev",()=>$l.nextOrPrev("prev")),window.electron.ipcRenderer.on("playNext",()=>$l.nextOrPrev("next")),window.electron.ipcRenderer.on("volumeUp",()=>$l.setVolume("up")),window.electron.ipcRenderer.on("volumeDown",()=>$l.setVolume("down")),window.electron.ipcRenderer.on("changeMode",(e,t)=>$l.togglePlayMode(t)),window.electron.ipcRenderer.on("toogleLikeSong",async()=>{const e=ke(),t=Ke();await sr(t.playSong,!e.isLikeSong(t.playSong.id))}),window.electron.ipcRenderer.on("toogleDesktopLyric",()=>$l.toggleDesktopLyric()),window.electron.ipcRenderer.on("closeDesktopLyric",()=>$l.toggleDesktopLyric()),window.electron.ipcRenderer.on("update-not-available",()=>{ak(),window.$message.success("当前已是最新版本")}),window.electron.ipcRenderer.on("update-available",(e,t)=>{ak(),(e=>{const t=window.$modal.create({preset:"card",transformOrigin:"center",autoFocus:!1,style:{width:"600px"},title:"发现新版本",content:()=>S(ld,{data:e,onClose:()=>t.destroy()})})})(t)}),window.electron.ipcRenderer.on("update-error",(e,t)=>{console.error("Error updating:",t),ak(),window.$message.error("更新过程出现错误")})}catch(e){}})();const sk=Kr(HS),ok=Zr();ok.use(tk),sk.use(ok),sk.use(Bs),sk.directive("debounce",rk),sk.directive("throttle",nk),sk.directive("visible",ik),sk.mount("#app");export{xo as _,JE as a,yo as b,hd as c,md as d,_d as e,Co as f,GE as g,TA as h,ho as i,pd as j,yd as k,vd as l,fd as m,Po as n,As as o,$l as p,Ro as q,Es as r,fS as s,Ds as u};
