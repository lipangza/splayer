import{_ as a}from"./MainCover-C4bF_JGP.js";import{a7 as e,r as s,w as t,f as l,g as r,G as u,J as o,k as i,j as n,n as d,i as v,L as c,aa as y,K as m,X as p,U as f,P as k,R as g,at as h,a1 as _}from"./vendor-QWMq--4w.js";import{_ as j,a as C,q}from"./index-D_KQhQdT.js";import{g as b}from"./artist-DFsVadNt.js";import"./album-BZa_fuA4.js";import"./dj-BjUMPDZK.js";const R={class:"dsc-artists"},S={class:"menu"},$=j({__name:"artists",setup(j){const $=e(),z=C(),w=[{key:-1,value:"热门"},...Array.from({length:26},((a,e)=>String.fromCharCode(e+65))).map((a=>({key:a,value:a}))),{key:0,value:"#"}],x=s($.currentRoute.value.query?.initial||w[0].key),L=["全部",...["华语","欧美","日本","韩国"].flatMap((a=>[`${a}`,`${a}男`,`${a}女`,`${a}组合`])),"其他"],M=[-1,-1,1,2,3,-1,1,2,3,-1,1,2,3,-1,1,2,3,-1],N=[-1,7,7,7,7,96,96,96,96,8,8,8,8,16,16,16,16,0],P=s(Number($.currentRoute.value.query?.type)||0),A=s([]),G=s(0),I=s(!1),J=s(!1),K=(a=M[P.value]||-1,e=N[P.value]||-1,s=G.value,t=x.value,l=z.loadSize)=>{b(a,e,s,t,l).then((a=>{a.more?I.value=!0:I.value=!1,J.value=!1,A.value.push(...q(a.artists,"artist"))}))},O=()=>{J.value=!0,G.value+=z.loadSize,K()};return t((()=>$.currentRoute.value),(a=>{"dsc-artists"===a.name&&(A.value=[],G.value=0,P.value=Number(a.query?.type)||0,x.value=a.query?.initial||w[0].key,K(M[P.value],N[P.value],G.value,x.value))})),l((()=>{K()})),(e,s)=>{const t=h,l=y,j=a,C=_;return r(),u("div",R,[o("div",S,[i(l,{class:"initial"},{default:n((()=>[(r(),u(m,null,p(w,(a=>i(t,{key:a,bordered:!1,class:f(["tag",{choose:a.key==d(x)}]),round:"",onClick:e=>{return s=a.key,void $.push({path:"/discover/artists",query:{type:P.value,initial:s,page:1}});var s}},{default:n((()=>[k(g(a.value),1)])),_:2},1032,["class","onClick"]))),64))])),_:1}),i(l,{class:"category"},{default:n((()=>[(r(),u(m,null,p(L,((a,e)=>i(t,{key:a,class:f(["tag",a.length>2?"hidden":"show",{choose:e==d(P)}]),bordered:!1,round:"",onClick:a=>{return s=e,void $.push({path:"/discover/artists",query:{type:s,initial:x.value,page:1}});var s}},{default:n((()=>[k(g(a),1)])),_:2},1032,["class","onClick"]))),64))])),_:1})]),i(j,{data:d(A),columns:"3 s:4 m:5 l:6",type:"artist"},null,8,["data"]),d(I)?(r(),v(l,{key:0,justify:"center"},{default:n((()=>[i(C,{loading:d(J),class:"load-more",size:"large",strong:"",secondary:"",round:"",onClick:O},{default:n((()=>[k(" 加载更多 ")])),_:1},8,["loading"])])),_:1})):c("",!0)])}}},[["__scopeId","data-v-a95cd93e"]]);export{$ as default};
