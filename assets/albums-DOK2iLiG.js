import{_ as a}from"./Pagination-0Aw9qrf-.js";import{_ as e}from"./MainCover-C4bF_JGP.js";import{a7 as t,r as s,w as u,e as r,g as l,G as o,k as i,j as n,T as m,n as p,i as d,L as v,a0 as c}from"./vendor-QWMq--4w.js";import{a as y,q as b}from"./index-D_KQhQdT.js";import{d as g}from"./artist-DFsVadNt.js";import"./album-BZa_fuA4.js";import"./dj-BjUMPDZK.js";const f={class:"artist-albums"},j={key:0,class:"list"},z={__name:"albums",setup(z){const S=t(),h=y(),q=s(S.currentRoute.value.query.id),N=s(null),_=s(0),k=s(Number(S.currentRoute.value.query?.page)||1),w=async(a,e=h.loadSize,t=0)=>{try{N.value=null;const s=await g(a,e,t);if(_.value=s.artist.albumSize,0===_.value)return N.value="empty";N.value=b(s.hotAlbums,"album")}catch(s){console.error("获取歌手专辑失败：",s)}},C=a=>{S.push({path:"/artist/albums",query:{id:q.value,page:a}})};return u((()=>S.currentRoute.value),(async a=>{"ar-albums"===a.name&&(q.value=a.query.id,k.value=Number(a.query?.page)||1,await w(q.value,h.loadSize,(k.value-1)*h.loadSize))})),r((async()=>{await w(q.value,h.loadSize,(k.value-1)*h.loadSize)})),(t,s)=>{const u=e,r=a,y=c;return l(),o("div",f,[i(m,{name:"fade",mode:"out-in"},{default:n((()=>["empty"!==p(N)?(l(),o("div",j,[i(u,{data:p(N),type:"album"},null,8,["data"]),p(N)?.length?(l(),d(r,{key:0,totalCount:p(_),pageNumber:p(k),onPageNumberChange:C},null,8,["totalCount","pageNumber"])):v("",!0)])):(l(),d(y,{key:1,description:"当前歌手暂无专辑",class:"tip",style:{"margin-top":"60px"},size:"large"}))])),_:1})])}}};export{z as default};
