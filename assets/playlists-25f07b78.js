import{n as e,l as r,q as o,m as a,au as l,av as n,d as t,e as s,aw as i,B as d,ax as u,p as c,w as v,g as p,D as m,h as g,b as h,i as b,a as f,M as y,N as x,O as C,_ as w,R as k,S as _,a7 as z,r as $,z as q,j as R,Q as j,Y as L,U as P,ao as T,W as D,X as B,ay as M,a4 as S,az as U,ap as E,aA as I,aB as N,a1 as F,a2 as O,I as H,Z as V,$ as Y,ac as G,aC as Q,ad as A,aD as W,aE as X}from"./index-62a86a6d.js";import{C as Z}from"./CoverLists-8120940c.js";import{P as J}from"./index-c617a262.js";import"./album-03f4a364.js";import"./formRules-8f71b7bd.js";import"./FormItem-9925873e.js";import"./Select-874bd504.js";import"./getCoverUrl-483cfc93.js";import"./Tooltip-05e90936.js";import"./PlayOne-08324da2.js";import"./LinkTwo-de3400c3.js";import"./Unlike-8f9bbc24.js";import"./Grid-b6f95812.js";import"./Skeleton-341b61e6.js";import"./use-houdini-3b9e128b.js";const K=e([r("list","\n --n-merged-border-color: var(--n-border-color);\n --n-merged-color: var(--n-color);\n --n-merged-color-hover: var(--n-color-hover);\n margin: 0;\n font-size: var(--n-font-size);\n transition:\n background-color .3s var(--n-bezier),\n color .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n padding: 0;\n list-style-type: none;\n color: var(--n-text-color);\n background-color: var(--n-merged-color);\n ",[o("show-divider",[r("list-item",[e("&:not(:last-child)",[a("divider","\n background-color: var(--n-merged-border-color);\n ")])])]),o("clickable",[r("list-item","\n cursor: pointer;\n ")]),o("bordered","\n border: 1px solid var(--n-merged-border-color);\n border-radius: var(--n-border-radius);\n "),o("hoverable",[r("list-item","\n border-radius: var(--n-border-radius);\n ",[e("&:hover","\n background-color: var(--n-merged-color-hover);\n ",[a("divider","\n background-color: transparent;\n ")])])]),o("bordered, hoverable",[r("list-item","\n padding: 12px 20px;\n "),a("header, footer","\n padding: 12px 20px;\n ")]),a("header, footer","\n padding: 12px 0;\n box-sizing: border-box;\n transition: border-color .3s var(--n-bezier);\n ",[e("&:not(:last-child)","\n border-bottom: 1px solid var(--n-merged-border-color);\n ")]),r("list-item","\n position: relative;\n padding: 12px 0; \n box-sizing: border-box;\n display: flex;\n flex-wrap: nowrap;\n align-items: center;\n transition:\n background-color .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n ",[a("prefix","\n margin-right: 20px;\n flex: 0;\n "),a("suffix","\n margin-left: 20px;\n flex: 0;\n "),a("main","\n flex: 1;\n "),a("divider","\n height: 1px;\n position: absolute;\n bottom: 0;\n left: 0;\n right: 0;\n background-color: transparent;\n transition: background-color .3s var(--n-bezier);\n pointer-events: none;\n ")])]),l(r("list","\n --n-merged-color-hover: var(--n-color-hover-modal);\n --n-merged-color: var(--n-color-modal);\n --n-merged-border-color: var(--n-border-color-modal);\n ")),n(r("list","\n --n-merged-color-hover: var(--n-color-hover-popover);\n --n-merged-color: var(--n-color-popover);\n --n-merged-border-color: var(--n-border-color-popover);\n "))]),ee=Object.assign(Object.assign({},d.props),{size:{type:String,default:"medium"},bordered:Boolean,clickable:Boolean,hoverable:Boolean,showDivider:{type:Boolean,default:!0}}),re=h("n-list"),oe=t({name:"List",props:ee,setup(e){const{mergedClsPrefixRef:r,inlineThemeDisabled:o,mergedRtlRef:a}=s(e),l=i("List",a,r),n=d("List","-list",K,u,e,r);c(re,{showDividerRef:v(e,"showDivider"),mergedClsPrefixRef:r});const t=p((()=>{const{common:{cubicBezierEaseInOut:e},self:{fontSize:r,textColor:o,color:a,colorModal:l,colorPopover:t,borderColor:s,borderColorModal:i,borderColorPopover:d,borderRadius:u,colorHover:c,colorHoverModal:v,colorHoverPopover:p}}=n.value;return{"--n-font-size":r,"--n-bezier":e,"--n-text-color":o,"--n-color":a,"--n-border-radius":u,"--n-border-color":s,"--n-border-color-modal":i,"--n-border-color-popover":d,"--n-color-modal":l,"--n-color-popover":t,"--n-color-hover":c,"--n-color-hover-modal":v,"--n-color-hover-popover":p}})),g=o?m("list",void 0,t,e):void 0;return{mergedClsPrefix:r,rtlEnabled:l,cssVars:o?void 0:t,themeClass:null==g?void 0:g.themeClass,onRender:null==g?void 0:g.onRender}},render(){var e;const{$slots:r,mergedClsPrefix:o,onRender:a}=this;return null==a||a(),g("ul",{class:[`${o}-list`,this.rtlEnabled&&`${o}-list--rtl`,this.bordered&&`${o}-list--bordered`,this.showDivider&&`${o}-list--show-divider`,this.hoverable&&`${o}-list--hoverable`,this.clickable&&`${o}-list--clickable`,this.themeClass],style:this.cssVars},r.header?g("div",{class:`${o}-list__header`},r.header()):null,null===(e=r.default)||void 0===e?void 0:e.call(r),r.footer?g("div",{class:`${o}-list__footer`},r.footer()):null)}}),ae=t({name:"ListItem",setup(){const e=b(re,null);return e||f("list-item","`n-list-item` must be placed in `n-list`."),{showDivider:e.showDividerRef,mergedClsPrefix:e.mergedClsPrefixRef}},render(){const{$slots:e,mergedClsPrefix:r}=this;return g("li",{class:`${r}-list-item`},e.prefix?g("div",{class:`${r}-list-item__prefix`},e.prefix()):null,e.default?g("div",{class:`${r}-list-item__main`},e):null,e.suffix?g("div",{class:`${r}-list-item__suffix`},e.suffix()):null,this.showDivider&&g("div",{class:`${r}-list-item__divider`}))}}),le={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},ne=[C("path",{d:"M9.29 6.71a.996.996 0 0 0 0 1.41L13.17 12l-3.88 3.88a.996.996 0 1 0 1.41 1.41l4.59-4.59a.996.996 0 0 0 0-1.41L10.7 6.7c-.38-.38-1.02-.38-1.41.01z",fill:"currentColor"},null,-1)],te=t({name:"ChevronRightRound",render:function(e,r){return y(),x("svg",le,ne)}}),se={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},ie=[C("path",{d:"M19.48 12.35c-1.57-4.08-7.16-4.3-5.81-10.23c.1-.44-.37-.78-.75-.55C9.29 3.71 6.68 8 8.87 13.62c.18.46-.36.89-.75.59c-1.81-1.37-2-3.34-1.84-4.75c.06-.52-.62-.77-.91-.34C4.69 10.16 4 11.84 4 14.37c.38 5.6 5.11 7.32 6.81 7.54c2.43.31 5.06-.14 6.95-1.87c2.08-1.93 2.84-5.01 1.72-7.69zm-9.28 5.03c1.44-.35 2.18-1.39 2.38-2.31c.33-1.43-.96-2.83-.09-5.09c.33 1.87 3.27 3.04 3.27 5.08c.08 2.53-2.66 4.7-5.56 2.32z",fill:"currentColor"},null,-1),C("path",{d:"M19.48 12.35c-1.57-4.08-7.16-4.3-5.81-10.23c.1-.44-.37-.78-.75-.55C9.29 3.71 6.68 8 8.87 13.62c.18.46-.36.89-.75.59c-1.81-1.37-2-3.34-1.84-4.75c.06-.52-.62-.77-.91-.34C4.69 10.16 4 11.84 4 14.37c.38 5.6 5.11 7.32 6.81 7.54c2.43.31 5.06-.14 6.95-1.87c2.08-1.93 2.84-5.01 1.72-7.69zm-9.28 5.03c1.44-.35 2.18-1.39 2.38-2.31c.33-1.43-.96-2.83-.09-5.09c.33 1.87 3.27 3.04 3.27 5.08c.08 2.53-2.66 4.7-5.56 2.32z",fill:"currentColor"},null,-1)],de=t({name:"LocalFireDepartmentRound",render:function(e,r){return y(),x("svg",se,ie)}}),ue={class:"playlists"},ce={class:"menu"},ve={key:0,class:"all-cat"},pe={key:1,class:"error"},me=w({__name:"playlists",setup(e){const{t:r}=k(),o=_(),a=z(),l=$(!1),n=$(o.currentRoute.value.query.cat?o.currentRoute.value.query.cat:"全部歌单"),t=$([]),s=$(0),i=$(30),d=$(o.currentRoute.value.query.page?Number(o.currentRoute.value.query.page):1),u=$(!!o.currentRoute.value.query.hq&&"true"==o.currentRoute.value.query.hq),c=$(!0),v=$(!1),p=e=>{t.value=[],o.push({path:"/discover/playlists",query:{cat:n.value,hq:!!e,page:1}})},m=(e="全部歌单",o=30,a=0)=>{M(e,o,a).then((e=>{s.value=e.total,t.value=[],e.playlists[0]?e.playlists.forEach((e=>{t.value.push({id:e.id,cover:e.coverImgUrl,name:e.name,artist:e.creator,playCount:S(e.playCount)})})):$message.error(r("general.message.acquisitionFailed")),"undefined"!=typeof $scrollToTop&&$scrollToTop()}))},g=(e="全部歌单",o=30)=>{const a=t.value[0]?t.value[t.value.length-1].updateTime:null;U(e,o,a).then((e=>{e.playlists[0]?(e.more?c.value=!0:c.value=!1,v.value=!1,e.playlists.forEach((e=>{t.value.push({id:e.id,cover:e.coverImgUrl,name:e.name,artist:e.creator,playCount:S(e.playCount),updateTime:e.updateTime})}))):(c.value=!1,$message.error(r("general.message.acquisitionFailed")))}))},h=e=>{t.value=[],o.push({path:"/discover/playlists",query:{cat:e,page:1}}),l.value=!1},b=e=>{i.value=e,m(n.value,e,(d.value-1)*i.value)},f=e=>{o.push({path:"/discover/playlists",query:{cat:n.value,page:e}})};return q((()=>o.currentRoute.value),(e=>{n.value=e.query.cat?e.query.cat:"全部歌单",u.value=!!e.query.hq&&"true"==e.query.hq,"dsc-playlists"==e.name&&(u.value?(t.value=[],g(n.value)):(d.value=e.query.page?Number(e.query.page):1,m(n.value,i.value,(d.value-1)*i.value)))})),R((()=>{$setSiteTitle(r("nav.discover")+" - "+r("general.name.playlist")),a.catList.sub&&a.highqualityCatList[0]||a.setCatList(!0),u.value?g(n.value):m(n.value,i.value,(d.value-1)*i.value)})),(e,r)=>{const o=G,i=E,m=Q,w=A,k=I,_=ae,z=oe,$=W,q=N,R=X;return y(),x("div",ue,[C("div",ce,[j(i,{strong:"",secondary:"",class:"cat","icon-placement":"right",round:"",onClick:r[0]||(r[0]=e=>l.value=!0)},{icon:L((()=>[j(o,{class:"up",component:P(te)},null,8,["component"])])),default:L((()=>[F(" "+O(P(n)),1)])),_:1}),j(q,{class:"s-modal",show:P(l),"onUpdate:show":r[2]||(r[2]=e=>T(l)?l.value=e:null),preset:"card",title:e.$t("general.name.playlistType"),bordered:!1},{header:L((()=>[F(O(e.$t("general.name.playlistType"))+" ",1),j(m,{round:"",class:"tag",type:"全部歌单"==P(n)?"primary":"default",style:H({marginLeft:"12px",fontSize:"12px",transform:"translateY(-2px)",cursor:"pointer"}),bordered:!1,onClick:r[1]||(r[1]=e=>h("全部歌单"))},{default:L((()=>[F(O(e.$t("general.name.allPLaylist")),1)])),_:1},8,["type","style"])])),default:L((()=>[j($,null,{default:L((()=>{var r;return[(null==(r=P(a).catList)?void 0:r.sub[0])?(y(),x("div",ve,[j(z,null,{default:L((()=>[(y(!0),x(V,null,Y(P(a).catList.categories,((e,r)=>(y(),D(_,{key:e},{prefix:L((()=>[j(w,{class:"type"},{default:L((()=>[F(O(e),1)])),_:2},1024)])),default:L((()=>[j(k,null,{default:L((()=>[(y(!0),x(V,null,Y(P(a).catList.sub.filter((e=>e.category==r)),(e=>(y(),D(m,{round:"",class:"tag",size:"large",key:e,bordered:!1,type:e.name==P(n)?"primary":"default",onClick:r=>h(e.name)},{icon:L((()=>[e.hot?(y(),D(o,{key:0,class:"icon",component:P(de)},null,8,["component"])):B("",!0)])),default:L((()=>[F(O(e.name)+" ",1)])),_:2},1032,["type","onClick"])))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1})])):(y(),x("div",pe,O(e.$t("general.message.acquisitionFailed")),1))]})),_:1})])),_:1},8,["show","title"]),(M=P(a).highqualityCatList,S=P(n),"全部歌单"==S||M.some((e=>e.name==S))?(y(),D(k,{key:0,align:"center"},{default:L((()=>[j(w,null,{default:L((()=>[F(O(e.$t("general.name.bestPlaylist")),1)])),_:1}),j(R,{value:P(u),"onUpdate:value":[r[3]||(r[3]=e=>T(u)?u.value=e:null),p],round:!1},null,8,["value"])])),_:1})):B("",!0))]),j(Z,{listData:P(t)},null,8,["listData"]),P(t)[0]&&!P(u)?(y(),D(J,{key:0,totalCount:P(s),pageNumber:P(d),onPageSizeChange:b,onPageNumberChange:f},null,8,["totalCount","pageNumber"])):B("",!0),j(k,{justify:"center"},{default:L((()=>[P(u)&&P(c)?(y(),D(i,{key:0,class:"more",size:"large",strong:"",secondary:"",round:"",loading:P(v),onClick:r[4]||(r[4]=()=>{v.value=!0,g(P(n))})},{default:L((()=>[F(O(e.$t("general.name.loadMore")),1)])),_:1},8,["loading"])):B("",!0)])),_:1})]);var M,S}}},[["__scopeId","data-v-8acd8166"]]);export{me as default};
